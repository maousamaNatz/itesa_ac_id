function RG(cs){return cs&&cs.__esModule&&Object.prototype.hasOwnProperty.call(cs,"default")?cs.default:cs}/*!
 * ApexCharts v4.1.0
 * (c) 2018-2024 ApexCharts
 * Released under the MIT License.
 */var _Y,rZ;function VG(){if(rZ)return _Y;rZ=1;function cs(C,o){(o==null||o>C.length)&&(o=C.length);for(var a=0,c=Array(o);a<o;a++)c[a]=C[a];return c}function Rs(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function gn(C,o){if(!(C instanceof o))throw new TypeError("Cannot call a class as a function")}function ys(C,o){for(var a=0;a<o.length;a++){var c=o[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(C,Bt(c.key),c)}}function rn(C,o,a){return o&&ys(C.prototype,o),a&&ys(C,a),Object.defineProperty(C,"prototype",{writable:!1}),C}function gs(C,o){var a=typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(!a){if(Array.isArray(C)||(a=xn(C))||o){a&&(C=a);var c=0,d=function(){};return{s:d,n:function(){return c>=C.length?{done:!0}:{done:!1,value:C[c++]}},e:function(A){throw A},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m,b=!0,w=!1;return{s:function(){a=a.call(C)},n:function(){var A=a.next();return b=A.done,A},e:function(A){w=!0,m=A},f:function(){try{b||a.return==null||a.return()}finally{if(w)throw m}}}}function Fo(C){var o=Bo();return function(){var a,c=lo(C);if(o){var d=lo(this).constructor;a=Reflect.construct(c,arguments,d)}else a=c.apply(this,arguments);return function(m,b){if(b&&(typeof b=="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rs(m)}(this,a)}}function Ot(C,o,a){return(o=Bt(o))in C?Object.defineProperty(C,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):C[o]=a,C}function lo(C){return lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},lo(C)}function ns(C,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(o&&o.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),o&&Ln(C,o)}function Bo(){try{var C=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bo=function(){return!!C})()}function fs(C,o){var a=Object.keys(C);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(C);o&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(C,d).enumerable})),a.push.apply(a,c)}return a}function Tt(C){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?fs(Object(a),!0).forEach(function(c){Ot(C,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(a)):fs(Object(a)).forEach(function(c){Object.defineProperty(C,c,Object.getOwnPropertyDescriptor(a,c))})}return C}function Ln(C,o){return Ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},Ln(C,o)}function Lo(C,o){return function(a){if(Array.isArray(a))return a}(C)||function(a,c){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var m,b,w,A,E=[],M=!0,O=!1;try{if(w=(d=d.call(a)).next,c===0){if(Object(d)!==d)return;M=!1}else for(;!(M=(m=w.call(d)).done)&&(E.push(m.value),E.length!==c);M=!0);}catch(L){O=!0,b=L}finally{try{if(!M&&d.return!=null&&(A=d.return(),Object(A)!==A))return}finally{if(O)throw b}}return E}}(C,o)||xn(C,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vn(C){return function(o){if(Array.isArray(o))return cs(o)}(C)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(C)||xn(C)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bt(C){var o=function(a,c){if(typeof a!="object"||!a)return a;var d=a[Symbol.toPrimitive];if(d!==void 0){var m=d.call(a,c||"default");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}(C,"string");return typeof o=="symbol"?o:o+""}function vo(C){return vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},vo(C)}function xn(C,o){if(C){if(typeof C=="string")return cs(C,o);var a={}.toString.call(C).slice(8,-1);return a==="Object"&&C.constructor&&(a=C.constructor.name),a==="Map"||a==="Set"?Array.from(C):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?cs(C,o):void 0}}var oe=function(){function C(){gn(this,C)}return rn(C,[{key:"shadeRGBColor",value:function(o,a){var c=a.split(","),d=o<0?0:255,m=o<0?-1*o:o,b=parseInt(c[0].slice(4),10),w=parseInt(c[1],10),A=parseInt(c[2],10);return"rgb("+(Math.round((d-b)*m)+b)+","+(Math.round((d-w)*m)+w)+","+(Math.round((d-A)*m)+A)+")"}},{key:"shadeHexColor",value:function(o,a){var c=parseInt(a.slice(1),16),d=o<0?0:255,m=o<0?-1*o:o,b=c>>16,w=c>>8&255,A=255&c;return"#"+(16777216+65536*(Math.round((d-b)*m)+b)+256*(Math.round((d-w)*m)+w)+(Math.round((d-A)*m)+A)).toString(16).slice(1)}},{key:"shadeColor",value:function(o,a){return C.isColorHex(a)?this.shadeHexColor(o,a):this.shadeRGBColor(o,a)}}],[{key:"bind",value:function(o,a){return function(){return o.apply(a,arguments)}}},{key:"isObject",value:function(o){return o&&vo(o)==="object"&&!Array.isArray(o)&&o!=null}},{key:"is",value:function(o,a){return Object.prototype.toString.call(a)==="[object "+o+"]"}},{key:"listToArray",value:function(o){var a,c=[];for(a=0;a<o.length;a++)c[a]=o[a];return c}},{key:"extend",value:function(o,a){var c=this;typeof Object.assign!="function"&&(Object.assign=function(m){if(m==null)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(m),w=1;w<arguments.length;w++){var A=arguments[w];if(A!=null)for(var E in A)A.hasOwnProperty(E)&&(b[E]=A[E])}return b});var d=Object.assign({},o);return this.isObject(o)&&this.isObject(a)&&Object.keys(a).forEach(function(m){c.isObject(a[m])&&m in o?d[m]=c.extend(o[m],a[m]):Object.assign(d,Ot({},m,a[m]))}),d}},{key:"extendArray",value:function(o,a){var c=[];return o.map(function(d){c.push(C.extend(a,d))}),o=c}},{key:"monthMod",value:function(o){return o%12}},{key:"clone",value:function(o){if(C.is("Array",o)){for(var a=[],c=0;c<o.length;c++)a[c]=this.clone(o[c]);return a}if(C.is("Null",o))return null;if(C.is("Date",o))return o;if(vo(o)==="object"){var d={};for(var m in o)o.hasOwnProperty(m)&&(d[m]=this.clone(o[m]));return d}return o}},{key:"log10",value:function(o){return Math.log(o)/Math.LN10}},{key:"roundToBase10",value:function(o){return Math.pow(10,Math.floor(Math.log10(o)))}},{key:"roundToBase",value:function(o,a){return Math.pow(a,Math.floor(Math.log(o)/Math.log(a)))}},{key:"parseNumber",value:function(o){return o===null?o:parseFloat(o)}},{key:"stripNumber",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(o)?o:parseFloat(o.toPrecision(a))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(o){var a=String(o).split(/[eE]/);if(a.length===1)return a[0];var c="",d=o<0?"-":"",m=a[0].replace(".",""),b=Number(a[1])+1;if(b<0){for(c=d+"0.";b++;)c+="0";return c+m.replace(/^-/,"")}for(b-=m.length;b--;)c+="0";return m+c}},{key:"elementExists",value:function(o){return!(!o||!o.isConnected)}},{key:"getDimensions",value:function(o){var a=getComputedStyle(o,null),c=o.clientHeight,d=o.clientWidth;return c-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),[d-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),c]}},{key:"getBoundingClientRect",value:function(o){var a=o.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:o.clientWidth,height:o.clientHeight,x:a.left,y:a.top}}},{key:"getLargestStringFromArr",value:function(o){return o.reduce(function(a,c){return Array.isArray(c)&&(c=c.reduce(function(d,m){return d.length>m.length?d:m})),a.length>c.length?a:c},0)}},{key:"hexToRgba",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;o.substring(0,1)!=="#"&&(o="#999999");var c=o.replace("#","");c=c.match(new RegExp("(.{"+c.length/3+"})","g"));for(var d=0;d<c.length;d++)c[d]=parseInt(c[d].length===1?c[d]+c[d]:c[d],16);return a!==void 0&&c.push(a),"rgba("+c.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(o){return parseFloat(o.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(o){return(o=o.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&o.length===4?"#"+("0"+parseInt(o[1],10).toString(16)).slice(-2)+("0"+parseInt(o[2],10).toString(16)).slice(-2)+("0"+parseInt(o[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(o){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(o)}},{key:"getPolygonPos",value:function(o,a){for(var c=[],d=2*Math.PI/a,m=0;m<a;m++){var b={};b.x=o*Math.sin(m*d),b.y=-o*Math.cos(m*d),c.push(b)}return c}},{key:"polarToCartesian",value:function(o,a,c,d){var m=(d-90)*Math.PI/180;return{x:o+c*Math.cos(m),y:a+c*Math.sin(m)}}},{key:"escapeString",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",c=o.toString().slice();return c=c.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,a)}},{key:"negToZero",value:function(o){return o<0?0:o}},{key:"moveIndexInArray",value:function(o,a,c){if(c>=o.length)for(var d=c-o.length+1;d--;)o.push(void 0);return o.splice(c,0,o.splice(a,1)[0]),o}},{key:"extractNumber",value:function(o){return parseFloat(o.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(o,a){for(;(o=o.parentElement)&&!o.classList.contains(a););return o}},{key:"setELstyles",value:function(o,a){for(var c in a)a.hasOwnProperty(c)&&(o.style.key=a[c])}},{key:"preciseAddition",value:function(o,a){var c=(String(o).split(".")[1]||"").length,d=(String(a).split(".")[1]||"").length,m=Math.pow(10,Math.max(c,d));return(Math.round(o*m)+Math.round(a*m))/m}},{key:"isNumber",value:function(o){return!isNaN(o)&&parseFloat(Number(o))===o&&!isNaN(parseInt(o,10))}},{key:"isFloat",value:function(o){return Number(o)===o&&o%1!=0}},{key:"isMsEdge",value:function(){var o=window.navigator.userAgent,a=o.indexOf("Edge/");return a>0&&parseInt(o.substring(a+5,o.indexOf(".",a)),10)}},{key:"getGCD",value:function(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,d=Math.pow(10,c-Math.floor(Math.log10(Math.max(o,a))));for(o=Math.round(Math.abs(o)*d),a=Math.round(Math.abs(a)*d);a;){var m=a;a=o%a,o=m}return o/d}},{key:"getPrimeFactors",value:function(o){for(var a=[],c=2;o>=2;)o%c==0?(a.push(c),o/=c):c++;return a}},{key:"mod",value:function(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,d=Math.pow(10,c-Math.floor(Math.log10(Math.max(o,a))));return(o=Math.round(Math.abs(o)*d))%(a=Math.round(Math.abs(a)*d))/d}}]),C}(),Wt=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"animateLine",value:function(o,a,c,d){o.attr(a).animate(d).attr(c)}},{key:"animateMarker",value:function(o,a,c,d){o.attr({opacity:0}).animate(a).attr({opacity:1}).after(function(){d()})}},{key:"animateRect",value:function(o,a,c,d,m){o.attr(a).animate(d).attr(c).after(function(){return m()})}},{key:"animatePathsGradually",value:function(o){var a=o.el,c=o.realIndex,d=o.j,m=o.fill,b=o.pathFrom,w=o.pathTo,A=o.speed,E=o.delay,M=this.w,O=0;M.config.chart.animations.animateGradually.enabled&&(O=M.config.chart.animations.animateGradually.delay),M.config.chart.animations.dynamicAnimation.enabled&&M.globals.dataChanged&&M.config.chart.type!=="bar"&&(O=0),this.morphSVG(a,c,d,M.config.chart.type!=="line"||M.globals.comboCharts?m:"stroke",b,w,A,E*O)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(o){var a=o.el;a.classList.remove("apexcharts-element-hidden"),a.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(o){var a=this.w;a.globals.animationEnded||(a.globals.animationEnded=!0,this.showDelayedElements(),typeof a.config.chart.events.animationEnd=="function"&&a.config.chart.events.animationEnd(this.ctx,{el:o,w:a}))}},{key:"morphSVG",value:function(o,a,c,d,m,b,w,A){var E=this,M=this.w;m||(m=o.attr("pathFrom")),b||(b=o.attr("pathTo"));var O=function(L){return M.config.chart.type==="radar"&&(w=1),"M 0 ".concat(M.globals.gridHeight)};(!m||m.indexOf("undefined")>-1||m.indexOf("NaN")>-1)&&(m=O()),(!b.trim()||b.indexOf("undefined")>-1||b.indexOf("NaN")>-1)&&(b=O()),M.globals.shouldAnimate||(w=1),o.plot(m).animate(1,A).plot(m).animate(w,A).plot(b).after(function(){oe.isNumber(c)?c===M.globals.series[M.globals.maxValsInArrayIndex].length-2&&M.globals.shouldAnimate&&E.animationCompleted(o):d!=="none"&&M.globals.shouldAnimate&&(!M.globals.comboCharts&&a===M.globals.series.length-1||M.globals.comboCharts)&&E.animationCompleted(o),E.showDelayedElements()})}}]),C}();const Yo={},jt=[];function ce(C,o){if(Array.isArray(C))for(const a of C)ce(a,o);else if(typeof C!="object")Wn(Object.getOwnPropertyNames(o)),Yo[C]=Object.assign(Yo[C]||{},o);else for(const a in C)ce(a,C[a])}function Gt(C){return Yo[C]||{}}function Wn(C){jt.push(...C)}function no(C,o){let a;const c=C.length,d=[];for(a=0;a<c;a++)d.push(o(C[a]));return d}function ut(C){return C%360*Math.PI/180}function Be(C){return C.charAt(0).toUpperCase()+C.slice(1)}function Qo(C,o,a,c){return o!=null&&a!=null||(c=c||C.bbox(),o==null?o=c.width/c.height*a:a==null&&(a=c.height/c.width*o)),{width:o,height:a}}function Je(C,o){const a=C.origin;let c=C.ox!=null?C.ox:C.originX!=null?C.originX:"center",d=C.oy!=null?C.oy:C.originY!=null?C.originY:"center";a!=null&&([c,d]=Array.isArray(a)?a:typeof a=="object"?[a.x,a.y]:[a,a]);const m=typeof c=="string",b=typeof d=="string";if(m||b){const{height:w,width:A,x:E,y:M}=o.bbox();m&&(c=c.includes("left")?E:c.includes("right")?E+A:E+A/2),b&&(d=d.includes("top")?M:d.includes("bottom")?M+w:M+w/2)}return[c,d]}const ot=new Set(["desc","metadata","title"]),V=C=>ot.has(C.nodeName),Zn=(C,o,a={})=>{const c={...o};for(const d in c)c[d].valueOf()===a[d]&&delete c[d];Object.keys(c).length?C.node.setAttribute("data-svgjs",JSON.stringify(c)):(C.node.removeAttribute("data-svgjs"),C.node.removeAttribute("svgjs:data"))},Dt="http://www.w3.org/2000/svg",Ao="http://www.w3.org/2000/xmlns/",Rn="http://www.w3.org/1999/xlink",it={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function No(){return it.window}let qs=class{};const Ht={},Gn="___SYMBOL___ROOT___";function dt(C,o=Dt){return it.document.createElementNS(o,C)}function wt(C,o=!1){if(C instanceof qs)return C;if(typeof C=="object")return zo(C);if(C==null)return new Ht[Gn];if(typeof C=="string"&&C.charAt(0)!=="<")return zo(it.document.querySelector(C));const a=o?it.document.createElement("div"):dt("svg");return a.innerHTML=C,C=zo(a.firstChild),a.removeChild(a.firstChild),C}function te(C,o){return o&&(o instanceof it.window.Node||o.ownerDocument&&o instanceof o.ownerDocument.defaultView.Node)?o:dt(C)}function As(C){if(!C)return null;if(C.instance instanceof qs)return C.instance;if(C.nodeName==="#document-fragment")return new Ht.Fragment(C);let o=Be(C.nodeName||"Dom");return o==="LinearGradient"||o==="RadialGradient"?o="Gradient":Ht[o]||(o="Dom"),new Ht[o](C)}let zo=As;function Un(C,o=C.name,a=!1){return Ht[o]=C,a&&(Ht[Gn]=C),Wn(Object.getOwnPropertyNames(C.prototype)),C}let ms=1e3;function Ka(C){return"Svgjs"+Be(C)+ms++}function We(C){for(let o=C.children.length-1;o>=0;o--)We(C.children[o]);return C.id&&(C.id=Ka(C.nodeName)),C}function Ie(C,o){let a,c;for(c=(C=Array.isArray(C)?C:[C]).length-1;c>=0;c--)for(a in o)C[c].prototype[a]=o[a]}function Ze(C){return function(...o){const a=o[o.length-1];return!a||a.constructor!==Object||a instanceof Array?C.apply(this,o):C.apply(this,o.slice(0,-1)).attr(a)}}ce("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const C=this.position();return this.parent().add(this.remove(),C+1),this},backward:function(){const C=this.position();return this.parent().add(this.remove(),C?C-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(C){(C=wt(C)).remove();const o=this.position();return this.parent().add(C,o),this},after:function(C){(C=wt(C)).remove();const o=this.position();return this.parent().add(C,o+1),this},insertBefore:function(C){return(C=wt(C)).before(this),this},insertAfter:function(C){return(C=wt(C)).after(this),this}});const De=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Xn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Mo=/rgb\((\d+),(\d+),(\d+)\)/,Cn=/(#[a-z_][a-z0-9\-_]*)/i,Qs=/\)\s*,?\s*/,Vo=/\s/g,Cr=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,us=/^rgb\(/,ur=/^(\s+)?$/,ri=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vr=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,qo=/[\s,]+/,ds=/[MLHVCSQTAZ]/i;function jr(C){const o=Math.round(C),a=Math.max(0,Math.min(255,o)).toString(16);return a.length===1?"0"+a:a}function $s(C,o){for(let a=o.length;a--;)if(C[o[a]]==null)return!1;return!0}function Go(C,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?C+6*(o-C)*a:a<.5?o:a<2/3?C+(o-C)*(2/3-a)*6:C}ce("Dom",{classes:function(){const C=this.attr("class");return C==null?[]:C.trim().split(qo)},hasClass:function(C){return this.classes().indexOf(C)!==-1},addClass:function(C){if(!this.hasClass(C)){const o=this.classes();o.push(C),this.attr("class",o.join(" "))}return this},removeClass:function(C){return this.hasClass(C)&&this.attr("class",this.classes().filter(function(o){return o!==C}).join(" ")),this},toggleClass:function(C){return this.hasClass(C)?this.removeClass(C):this.addClass(C)}}),ce("Dom",{css:function(C,o){const a={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(c){return!!c.length}).forEach(function(c){const d=c.split(/\s*:\s*/);a[d[0]]=d[1]}),a;if(arguments.length<2){if(Array.isArray(C)){for(const c of C){const d=c;a[c]=this.node.style.getPropertyValue(d)}return a}if(typeof C=="string")return this.node.style.getPropertyValue(C);if(typeof C=="object")for(const c in C)this.node.style.setProperty(c,C[c]==null||ur.test(C[c])?"":C[c])}return arguments.length===2&&this.node.style.setProperty(C,o==null||ur.test(o)?"":o),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),ce("Dom",{data:function(C,o,a){if(C==null)return this.data(no(function(c,d){let m;const b=c.length,w=[];for(m=0;m<b;m++)d(c[m])&&w.push(c[m]);return w}(this.node.attributes,c=>c.nodeName.indexOf("data-")===0),c=>c.nodeName.slice(5)));if(C instanceof Array){const c={};for(const d of C)c[d]=this.data(d);return c}if(typeof C=="object")for(o in C)this.data(o,C[o]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+C))}catch{return this.attr("data-"+C)}else this.attr("data-"+C,o===null?null:a===!0||typeof o=="string"||typeof o=="number"?o:JSON.stringify(o));return this}}),ce("Dom",{remember:function(C,o){if(typeof arguments[0]=="object")for(const a in C)this.remember(a,C[a]);else{if(arguments.length===1)return this.memory()[C];this.memory()[C]=o}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let C=arguments.length-1;C>=0;C--)delete this.memory()[arguments[C]];return this},memory:function(){return this._memory=this._memory||{}}});class Xs{constructor(...o){this.init(...o)}static isColor(o){return o&&(o instanceof Xs||this.isRgb(o)||this.test(o))}static isRgb(o){return o&&typeof o.r=="number"&&typeof o.g=="number"&&typeof o.b=="number"}static random(o="vibrant",a){const{random:c,round:d,sin:m,PI:b}=Math;if(o==="vibrant"){const w=24*c()+57,A=38*c()+45,E=360*c();return new Xs(w,A,E,"lch")}if(o==="sine"){const w=d(80*m(2*b*(a=a??c())/.5+.01)+150),A=d(50*m(2*b*a/.5+4.6)+200),E=d(100*m(2*b*a/.5+2.3)+150);return new Xs(w,A,E)}if(o==="pastel"){const w=8*c()+86,A=17*c()+9,E=360*c();return new Xs(w,A,E,"lch")}if(o==="dark"){const w=10+10*c(),A=50*c()+86,E=360*c();return new Xs(w,A,E,"lch")}if(o==="rgb"){const w=255*c(),A=255*c(),E=255*c();return new Xs(w,A,E)}if(o==="lab"){const w=100*c(),A=256*c()-128,E=256*c()-128;return new Xs(w,A,E,"lab")}if(o==="grey"){const w=255*c();return new Xs(w,w,w)}throw new Error("Unsupported random color mode")}static test(o){return typeof o=="string"&&(Cr.test(o)||us.test(o))}cmyk(){const{_a:o,_b:a,_c:c}=this.rgb(),[d,m,b]=[o,a,c].map(A=>A/255),w=Math.min(1-d,1-m,1-b);return w===1?new Xs(0,0,0,1,"cmyk"):new Xs((1-d-w)/(1-w),(1-m-w)/(1-w),(1-b-w)/(1-w),w,"cmyk")}hsl(){const{_a:o,_b:a,_c:c}=this.rgb(),[d,m,b]=[o,a,c].map(L=>L/255),w=Math.max(d,m,b),A=Math.min(d,m,b),E=(w+A)/2,M=w===A,O=w-A;return new Xs(360*(M?0:w===d?((m-b)/O+(m<b?6:0))/6:w===m?((b-d)/O+2)/6:w===b?((d-m)/O+4)/6:0),100*(M?0:E>.5?O/(2-w-A):O/(w+A)),100*E,"hsl")}init(o=0,a=0,c=0,d=0,m="rgb"){if(o=o||0,this.space)for(const O in this.space)delete this[this.space[O]];if(typeof o=="number")m=typeof d=="string"?d:m,d=typeof d=="string"?0:d,Object.assign(this,{_a:o,_b:a,_c:c,_d:d,space:m});else if(o instanceof Array)this.space=a||(typeof o[3]=="string"?o[3]:o[4])||"rgb",Object.assign(this,{_a:o[0],_b:o[1],_c:o[2],_d:o[3]||0});else if(o instanceof Object){const O=function(L,$){const Y=$s(L,"rgb")?{_a:L.r,_b:L.g,_c:L.b,_d:0,space:"rgb"}:$s(L,"xyz")?{_a:L.x,_b:L.y,_c:L.z,_d:0,space:"xyz"}:$s(L,"hsl")?{_a:L.h,_b:L.s,_c:L.l,_d:0,space:"hsl"}:$s(L,"lab")?{_a:L.l,_b:L.a,_c:L.b,_d:0,space:"lab"}:$s(L,"lch")?{_a:L.l,_b:L.c,_c:L.h,_d:0,space:"lch"}:$s(L,"cmyk")?{_a:L.c,_b:L.m,_c:L.y,_d:L.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return Y.space=$||Y.space,Y}(o,a);Object.assign(this,O)}else if(typeof o=="string")if(us.test(o)){const O=o.replace(Vo,""),[L,$,Y]=Mo.exec(O).slice(1,4).map(U=>parseInt(U));Object.assign(this,{_a:L,_b:$,_c:Y,_d:0,space:"rgb"})}else{if(!Cr.test(o))throw Error("Unsupported string format, can't construct Color");{const O=U=>parseInt(U,16),[,L,$,Y]=Xn.exec(function(U){return U.length===4?["#",U.substring(1,2),U.substring(1,2),U.substring(2,3),U.substring(2,3),U.substring(3,4),U.substring(3,4)].join(""):U}(o)).map(O);Object.assign(this,{_a:L,_b:$,_c:Y,_d:0,space:"rgb"})}}const{_a:b,_b:w,_c:A,_d:E}=this,M=this.space==="rgb"?{r:b,g:w,b:A}:this.space==="xyz"?{x:b,y:w,z:A}:this.space==="hsl"?{h:b,s:w,l:A}:this.space==="lab"?{l:b,a:w,b:A}:this.space==="lch"?{l:b,c:w,h:A}:this.space==="cmyk"?{c:b,m:w,y:A,k:E}:{};Object.assign(this,M)}lab(){const{x:o,y:a,z:c}=this.xyz();return new Xs(116*a-16,500*(o-a),200*(a-c),"lab")}lch(){const{l:o,a,b:c}=this.lab(),d=Math.sqrt(a**2+c**2);let m=180*Math.atan2(c,a)/Math.PI;return m<0&&(m*=-1,m=360-m),new Xs(o,d,m,"lch")}rgb(){if(this.space==="rgb")return this;if((o=this.space)==="lab"||o==="xyz"||o==="lch"){let{x:a,y:c,z:d}=this;if(this.space==="lab"||this.space==="lch"){let{l:$,a:Y,b:U}=this;if(this.space==="lch"){const{c:Ve,h:ve}=this,Pe=Math.PI/180;Y=Ve*Math.cos(Pe*ve),U=Ve*Math.sin(Pe*ve)}const ne=($+16)/116,ae=Y/500+ne,le=ne-U/200,me=16/116,Oe=.008856,Te=7.787;a=.95047*(ae**3>Oe?ae**3:(ae-me)/Te),c=1*(ne**3>Oe?ne**3:(ne-me)/Te),d=1.08883*(le**3>Oe?le**3:(le-me)/Te)}const m=3.2406*a+-1.5372*c+-.4986*d,b=-.9689*a+1.8758*c+.0415*d,w=.0557*a+-.204*c+1.057*d,A=Math.pow,E=.0031308,M=m>E?1.055*A(m,1/2.4)-.055:12.92*m,O=b>E?1.055*A(b,1/2.4)-.055:12.92*b,L=w>E?1.055*A(w,1/2.4)-.055:12.92*w;return new Xs(255*M,255*O,255*L)}if(this.space==="hsl"){let{h:a,s:c,l:d}=this;if(a/=360,c/=100,d/=100,c===0)return d*=255,new Xs(d,d,d);const m=d<.5?d*(1+c):d+c-d*c,b=2*d-m,w=255*Go(b,m,a+1/3),A=255*Go(b,m,a),E=255*Go(b,m,a-1/3);return new Xs(w,A,E)}if(this.space==="cmyk"){const{c:a,m:c,y:d,k:m}=this,b=255*(1-Math.min(1,a*(1-m)+m)),w=255*(1-Math.min(1,c*(1-m)+m)),A=255*(1-Math.min(1,d*(1-m)+m));return new Xs(b,w,A)}return this;var o}toArray(){const{_a:o,_b:a,_c:c,_d:d,space:m}=this;return[o,a,c,d,m]}toHex(){const[o,a,c]=this._clamped().map(jr);return`#${o}${a}${c}`}toRgb(){const[o,a,c]=this._clamped();return`rgb(${o},${a},${c})`}toString(){return this.toHex()}xyz(){const{_a:o,_b:a,_c:c}=this.rgb(),[d,m,b]=[o,a,c].map(ne=>ne/255),w=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,A=m>.04045?Math.pow((m+.055)/1.055,2.4):m/12.92,E=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,M=(.4124*w+.3576*A+.1805*E)/.95047,O=(.2126*w+.7152*A+.0722*E)/1,L=(.0193*w+.1192*A+.9505*E)/1.08883,$=M>.008856?Math.pow(M,1/3):7.787*M+16/116,Y=O>.008856?Math.pow(O,1/3):7.787*O+16/116,U=L>.008856?Math.pow(L,1/3):7.787*L+16/116;return new Xs($,Y,U,"xyz")}_clamped(){const{_a:o,_b:a,_c:c}=this.rgb(),{max:d,min:m,round:b}=Math;return[o,a,c].map(w=>d(0,m(b(w),255)))}}class qn{constructor(...o){this.init(...o)}clone(){return new qn(this)}init(o,a){const m=Array.isArray(o)?{x:o[0],y:o[1]}:typeof o=="object"?{x:o.x,y:o.y}:{x:o,y:a};return this.x=m.x==null?0:m.x,this.y=m.y==null?0:m.y,this}toArray(){return[this.x,this.y]}transform(o){return this.clone().transformO(o)}transformO(o){oo.isMatrixLike(o)||(o=new oo(o));const{x:a,y:c}=this;return this.x=o.a*a+o.c*c+o.e,this.y=o.b*a+o.d*c+o.f,this}}function Ns(C,o,a){return Math.abs(o-C)<1e-6}class oo{constructor(...o){this.init(...o)}static formatTransforms(o){const a=o.flip==="both"||o.flip===!0,c=o.flip&&(a||o.flip==="x")?-1:1,d=o.flip&&(a||o.flip==="y")?-1:1,m=o.skew&&o.skew.length?o.skew[0]:isFinite(o.skew)?o.skew:isFinite(o.skewX)?o.skewX:0,b=o.skew&&o.skew.length?o.skew[1]:isFinite(o.skew)?o.skew:isFinite(o.skewY)?o.skewY:0,w=o.scale&&o.scale.length?o.scale[0]*c:isFinite(o.scale)?o.scale*c:isFinite(o.scaleX)?o.scaleX*c:c,A=o.scale&&o.scale.length?o.scale[1]*d:isFinite(o.scale)?o.scale*d:isFinite(o.scaleY)?o.scaleY*d:d,E=o.shear||0,M=o.rotate||o.theta||0,O=new qn(o.origin||o.around||o.ox||o.originX,o.oy||o.originY),L=O.x,$=O.y,Y=new qn(o.position||o.px||o.positionX||NaN,o.py||o.positionY||NaN),U=Y.x,ne=Y.y,ae=new qn(o.translate||o.tx||o.translateX,o.ty||o.translateY),le=ae.x,me=ae.y,Oe=new qn(o.relative||o.rx||o.relativeX,o.ry||o.relativeY);return{scaleX:w,scaleY:A,skewX:m,skewY:b,shear:E,theta:M,rx:Oe.x,ry:Oe.y,tx:le,ty:me,ox:L,oy:$,px:U,py:ne}}static fromArray(o){return{a:o[0],b:o[1],c:o[2],d:o[3],e:o[4],f:o[5]}}static isMatrixLike(o){return o.a!=null||o.b!=null||o.c!=null||o.d!=null||o.e!=null||o.f!=null}static matrixMultiply(o,a,c){const d=o.a*a.a+o.c*a.b,m=o.b*a.a+o.d*a.b,b=o.a*a.c+o.c*a.d,w=o.b*a.c+o.d*a.d,A=o.e+o.a*a.e+o.c*a.f,E=o.f+o.b*a.e+o.d*a.f;return c.a=d,c.b=m,c.c=b,c.d=w,c.e=A,c.f=E,c}around(o,a,c){return this.clone().aroundO(o,a,c)}aroundO(o,a,c){const d=o||0,m=a||0;return this.translateO(-d,-m).lmultiplyO(c).translateO(d,m)}clone(){return new oo(this)}decompose(o=0,a=0){const c=this.a,d=this.b,m=this.c,b=this.d,w=this.e,A=this.f,E=c*b-d*m,M=E>0?1:-1,O=M*Math.sqrt(c*c+d*d),L=Math.atan2(M*d,M*c),$=180/Math.PI*L,Y=Math.cos(L),U=Math.sin(L),ne=(c*m+d*b)/E,ae=m*O/(ne*c-d)||b*O/(ne*d+c);return{scaleX:O,scaleY:ae,shear:ne,rotate:$,translateX:w-o+o*Y*O+a*(ne*Y*O-U*ae),translateY:A-a+o*U*O+a*(ne*U*O+Y*ae),originX:o,originY:a,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(o){if(o===this)return!0;const a=new oo(o);return Ns(this.a,a.a)&&Ns(this.b,a.b)&&Ns(this.c,a.c)&&Ns(this.d,a.d)&&Ns(this.e,a.e)&&Ns(this.f,a.f)}flip(o,a){return this.clone().flipO(o,a)}flipO(o,a){return o==="x"?this.scaleO(-1,1,a,0):o==="y"?this.scaleO(1,-1,0,a):this.scaleO(-1,-1,o,a||o)}init(o){const a=oo.fromArray([1,0,0,1,0,0]);return o=o instanceof Ms?o.matrixify():typeof o=="string"?oo.fromArray(o.split(qo).map(parseFloat)):Array.isArray(o)?oo.fromArray(o):typeof o=="object"&&oo.isMatrixLike(o)?o:typeof o=="object"?new oo().transform(o):arguments.length===6?oo.fromArray([].slice.call(arguments)):a,this.a=o.a!=null?o.a:a.a,this.b=o.b!=null?o.b:a.b,this.c=o.c!=null?o.c:a.c,this.d=o.d!=null?o.d:a.d,this.e=o.e!=null?o.e:a.e,this.f=o.f!=null?o.f:a.f,this}inverse(){return this.clone().inverseO()}inverseO(){const o=this.a,a=this.b,c=this.c,d=this.d,m=this.e,b=this.f,w=o*d-a*c;if(!w)throw new Error("Cannot invert "+this);const A=d/w,E=-a/w,M=-c/w,O=o/w,L=-(A*m+M*b),$=-(E*m+O*b);return this.a=A,this.b=E,this.c=M,this.d=O,this.e=L,this.f=$,this}lmultiply(o){return this.clone().lmultiplyO(o)}lmultiplyO(o){const a=o instanceof oo?o:new oo(o);return oo.matrixMultiply(a,this,this)}multiply(o){return this.clone().multiplyO(o)}multiplyO(o){const a=o instanceof oo?o:new oo(o);return oo.matrixMultiply(this,a,this)}rotate(o,a,c){return this.clone().rotateO(o,a,c)}rotateO(o,a=0,c=0){o=ut(o);const d=Math.cos(o),m=Math.sin(o),{a:b,b:w,c:A,d:E,e:M,f:O}=this;return this.a=b*d-w*m,this.b=w*d+b*m,this.c=A*d-E*m,this.d=E*d+A*m,this.e=M*d-O*m+c*m-a*d+a,this.f=O*d+M*m-a*m-c*d+c,this}scale(){return this.clone().scaleO(...arguments)}scaleO(o,a=o,c=0,d=0){arguments.length===3&&(d=c,c=a,a=o);const{a:m,b,c:w,d:A,e:E,f:M}=this;return this.a=m*o,this.b=b*a,this.c=w*o,this.d=A*a,this.e=E*o-c*o+c,this.f=M*a-d*a+d,this}shear(o,a,c){return this.clone().shearO(o,a,c)}shearO(o,a=0,c=0){const{a:d,b:m,c:b,d:w,e:A,f:E}=this;return this.a=d+m*o,this.c=b+w*o,this.e=A+E*o-c*o,this}skew(){return this.clone().skewO(...arguments)}skewO(o,a=o,c=0,d=0){arguments.length===3&&(d=c,c=a,a=o),o=ut(o),a=ut(a);const m=Math.tan(o),b=Math.tan(a),{a:w,b:A,c:E,d:M,e:O,f:L}=this;return this.a=w+A*m,this.b=A+w*b,this.c=E+M*m,this.d=M+E*b,this.e=O+L*m-d*m,this.f=L+O*b-c*b,this}skewX(o,a,c){return this.skew(o,0,a,c)}skewY(o,a,c){return this.skew(0,o,a,c)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(o){if(oo.isMatrixLike(o))return new oo(o).multiplyO(this);const a=oo.formatTransforms(o),{x:c,y:d}=new qn(a.ox,a.oy).transform(this),m=new oo().translateO(a.rx,a.ry).lmultiplyO(this).translateO(-c,-d).scaleO(a.scaleX,a.scaleY).skewO(a.skewX,a.skewY).shearO(a.shear).rotateO(a.theta).translateO(c,d);if(isFinite(a.px)||isFinite(a.py)){const b=new qn(c,d).transform(m),w=isFinite(a.px)?a.px-b.x:0,A=isFinite(a.py)?a.py-b.y:0;m.translateO(w,A)}return m.translateO(a.tx,a.ty),m}translate(o,a){return this.clone().translateO(o,a)}translateO(o,a){return this.e+=o||0,this.f+=a||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Wr(){if(!Wr.nodes){const C=wt().size(2,0);C.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),C.attr("focusable","false"),C.attr("aria-hidden","true");const o=C.path().node;Wr.nodes={svg:C,path:o}}if(!Wr.nodes.svg.node.parentNode){const C=it.document.body||it.document.documentElement;Wr.nodes.svg.addTo(C)}return Wr.nodes}function yi(C){return!(C.width||C.height||C.x||C.y)}Un(oo,"Matrix");class uo{constructor(...o){this.init(...o)}addOffset(){return this.x+=it.window.pageXOffset,this.y+=it.window.pageYOffset,new uo(this)}init(o){return o=typeof o=="string"?o.split(qo).map(parseFloat):Array.isArray(o)?o:typeof o=="object"?[o.left!=null?o.left:o.x,o.top!=null?o.top:o.y,o.width,o.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=o[0]||0,this.y=o[1]||0,this.width=this.w=o[2]||0,this.height=this.h=o[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return yi(this)}merge(o){const a=Math.min(this.x,o.x),c=Math.min(this.y,o.y),d=Math.max(this.x+this.width,o.x+o.width)-a,m=Math.max(this.y+this.height,o.y+o.height)-c;return new uo(a,c,d,m)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(o){o instanceof oo||(o=new oo(o));let a=1/0,c=-1/0,d=1/0,m=-1/0;return[new qn(this.x,this.y),new qn(this.x2,this.y),new qn(this.x,this.y2),new qn(this.x2,this.y2)].forEach(function(b){b=b.transform(o),a=Math.min(a,b.x),c=Math.max(c,b.x),d=Math.min(d,b.y),m=Math.max(m,b.y)}),new uo(a,d,c-a,m-d)}}function Ri(C,o,a){let c;try{if(c=o(C.node),yi(c)&&(d=C.node)!==it.document&&!(it.document.documentElement.contains||function(m){for(;m.parentNode;)m=m.parentNode;return m===it.document}).call(it.document.documentElement,d))throw new Error("Element not in the dom")}catch{c=a(C)}var d;return c}ce({viewbox:{viewbox(C,o,a,c){return C==null?new uo(this.attr("viewBox")):this.attr("viewBox",new uo(C,o,a,c))},zoom(C,o){let{width:a,height:c}=this.attr(["width","height"]);if((a||c)&&typeof a!="string"&&typeof c!="string"||(a=this.node.clientWidth,c=this.node.clientHeight),!a||!c)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const d=this.viewbox(),m=a/d.width,b=c/d.height,w=Math.min(m,b);if(C==null)return w;let A=w/C;A===1/0&&(A=Number.MAX_SAFE_INTEGER/100),o=o||new qn(a/2/m+d.x,c/2/b+d.y);const E=new uo(d).transform(new oo({scale:A,origin:o}));return this.viewbox(E)}}}),Un(uo,"Box");class Yt extends Array{constructor(o=[],...a){if(super(o,...a),typeof o=="number")return this;this.length=0,this.push(...o)}}Ie([Yt],{each(C,...o){return typeof C=="function"?this.map((a,c,d)=>C.call(a,a,c,d)):this.map(a=>a[C](...o))},toArray(){return Array.prototype.concat.apply([],this)}});const os=["toArray","constructor","each"];function Lr(C,o){return new Yt(no((o||it.document).querySelectorAll(C),function(a){return As(a)}))}Yt.extend=function(C){C=C.reduce((o,a)=>(os.includes(a)||a[0]==="_"||(a in Array.prototype&&(o["$"+a]=Array.prototype[a]),o[a]=function(...c){return this.each(a,...c)}),o),{}),Ie([Yt],C)};let Zr=0;const Fa={};function Xa(C){let o=C.getEventHolder();return o===it.window&&(o=Fa),o.events||(o.events={}),o.events}function Is(C){return C.getEventTarget()}function da(C,o,a,c,d){const m=a.bind(c||C),b=wt(C),w=Xa(b),A=Is(b);o=Array.isArray(o)?o:o.split(qo),a._svgjsListenerId||(a._svgjsListenerId=++Zr),o.forEach(function(E){const M=E.split(".")[0],O=E.split(".")[1]||"*";w[M]=w[M]||{},w[M][O]=w[M][O]||{},w[M][O][a._svgjsListenerId]=m,A.addEventListener(M,m,d||!1)})}function Dr(C,o,a,c){const d=wt(C),m=Xa(d),b=Is(d);(typeof a!="function"||(a=a._svgjsListenerId))&&(o=Array.isArray(o)?o:(o||"").split(qo)).forEach(function(w){const A=w&&w.split(".")[0],E=w&&w.split(".")[1];let M,O;if(a)m[A]&&m[A][E||"*"]&&(b.removeEventListener(A,m[A][E||"*"][a],c||!1),delete m[A][E||"*"][a]);else if(A&&E){if(m[A]&&m[A][E]){for(O in m[A][E])Dr(b,[A,E].join("."),O);delete m[A][E]}}else if(E)for(w in m)for(M in m[w])E===M&&Dr(b,[w,E].join("."));else if(A){if(m[A]){for(M in m[A])Dr(b,[A,M].join("."));delete m[A]}}else{for(w in m)Dr(b,w);(function(L){let $=L.getEventHolder();$===it.window&&($=Fa),$.events&&($.events={})})(d)}})}class Ts extends qs{addEventListener(){}dispatch(o,a,c){return function(d,m,b,w){const A=Is(d);return m instanceof it.window.Event||(m=new it.window.CustomEvent(m,{detail:b,cancelable:!0,...w})),A.dispatchEvent(m),m}(this,o,a,c)}dispatchEvent(o){const a=this.getEventHolder().events;if(!a)return!0;const c=a[o.type];for(const d in c)for(const m in c[d])c[d][m](o);return!o.defaultPrevented}fire(o,a,c){return this.dispatch(o,a,c),this}getEventHolder(){return this}getEventTarget(){return this}off(o,a,c){return Dr(this,o,a,c),this}on(o,a,c,d){return da(this,o,a,c,d),this}removeEventListener(){}}function Qn(){}Un(Ts,"EventTarget");const hr=400,Ta=">",vl=0,Ol={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Ds extends Array{constructor(...o){super(...o),this.init(...o)}clone(){return new this.constructor(this)}init(o){return typeof o=="number"||(this.length=0,this.push(...this.parse(o))),this}parse(o=[]){return o instanceof Array?o:o.trim().split(qo).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const o=[];return o.push(...this),o}}class yo{constructor(...o){this.init(...o)}convert(o){return new yo(this.value,o)}divide(o){return o=new yo(o),new yo(this/o,this.unit||o.unit)}init(o,a){return a=Array.isArray(o)?o[1]:a,o=Array.isArray(o)?o[0]:o,this.value=0,this.unit=a||"",typeof o=="number"?this.value=isNaN(o)?0:isFinite(o)?o:o<0?-34e37:34e37:typeof o=="string"?(a=o.match(De))&&(this.value=parseFloat(a[1]),a[5]==="%"?this.value/=100:a[5]==="s"&&(this.value*=1e3),this.unit=a[5]):o instanceof yo&&(this.value=o.valueOf(),this.unit=o.unit),this}minus(o){return o=new yo(o),new yo(this-o,this.unit||o.unit)}plus(o){return o=new yo(o),new yo(this+o,this.unit||o.unit)}times(o){return o=new yo(o),new yo(this*o,this.unit||o.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const mr=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),Ea=[];class va extends Ts{constructor(o,a){super(),this.node=o,this.type=o.nodeName,a&&o!==a&&this.attr(a)}add(o,a){return(o=wt(o)).removeNamespace&&this.node instanceof it.window.SVGElement&&o.removeNamespace(),a==null?this.node.appendChild(o.node):o.node!==this.node.childNodes[a]&&this.node.insertBefore(o.node,this.node.childNodes[a]),this}addTo(o,a){return wt(o).put(this,a)}children(){return new Yt(no(this.node.children,function(o){return As(o)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(o=!0,a=!0){this.writeDataToDom();let c=this.node.cloneNode(o);return a&&(c=We(c)),new this.constructor(c)}each(o,a){const c=this.children();let d,m;for(d=0,m=c.length;d<m;d++)o.apply(c[d],[d,c]),a&&c[d].each(o,a);return this}element(o,a){return this.put(new va(dt(o),a))}first(){return As(this.node.firstChild)}get(o){return As(this.node.childNodes[o])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(o){return this.index(o)>=0}html(o,a){return this.xml(o,a,"http://www.w3.org/1999/xhtml")}id(o){return o!==void 0||this.node.id||(this.node.id=Ka(this.type)),this.attr("id",o)}index(o){return[].slice.call(this.node.childNodes).indexOf(o.node)}last(){return As(this.node.lastChild)}matches(o){const a=this.node,c=a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector||null;return c&&c.call(a,o)}parent(o){let a=this;if(!a.node.parentNode)return null;if(a=As(a.node.parentNode),!o)return a;do if(typeof o=="string"?a.matches(o):a instanceof o)return a;while(a=As(a.node.parentNode));return a}put(o,a){return o=wt(o),this.add(o,a),o}putIn(o,a){return wt(o).add(this,a)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(o){return this.node.removeChild(o.node),this}replace(o){return o=wt(o),this.node.parentNode&&this.node.parentNode.replaceChild(o.node,this.node),o}round(o=2,a=null){const c=10**o,d=this.attr(a);for(const m in d)typeof d[m]=="number"&&(d[m]=Math.round(d[m]*c)/c);return this.attr(d),this}svg(o,a){return this.xml(o,a,Dt)}toString(){return this.id()}words(o){return this.node.textContent=o,this}wrap(o){const a=this.parent();if(!a)return this.addTo(o);const c=a.index(this);return a.put(o,c).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(o,a,c){if(typeof o=="boolean"&&(c=a,a=o,o=null),o==null||typeof o=="function"){a=a==null||a,this.writeDataToDom();let w=this;if(o!=null){if(w=As(w.node.cloneNode(!0)),a){const A=o(w);if(w=A||w,A===!1)return""}w.each(function(){const A=o(this),E=A||this;A===!1?this.remove():A&&this!==E&&this.replace(E)},!0)}return a?w.node.outerHTML:w.node.innerHTML}a=a!=null&&a;const d=dt("wrapper",c),m=it.document.createDocumentFragment();d.innerHTML=o;for(let w=d.children.length;w--;)m.appendChild(d.firstElementChild);const b=this.parent();return a?this.replace(m)&&b:this.add(m)}}Ie(va,{attr:function(C,o,a){if(C==null){C={},o=this.node.attributes;for(const c of o)C[c.nodeName]=ri.test(c.nodeValue)?parseFloat(c.nodeValue):c.nodeValue;return C}if(C instanceof Array)return C.reduce((c,d)=>(c[d]=this.attr(d),c),{});if(typeof C=="object"&&C.constructor===Object)for(o in C)this.attr(o,C[o]);else if(o===null)this.node.removeAttribute(C);else{if(o==null)return(o=this.node.getAttribute(C))==null?Ol[C]:ri.test(o)?parseFloat(o):o;typeof(o=Ea.reduce((c,d)=>d(C,c,this),o))=="number"?o=new yo(o):mr.has(C)&&Xs.isColor(o)?o=new Xs(o):o.constructor===Array&&(o=new Ds(o)),C==="leading"?this.leading&&this.leading(o):typeof a=="string"?this.node.setAttributeNS(a,C,o.toString()):this.node.setAttribute(C,o.toString()),!this.rebuild||C!=="font-size"&&C!=="x"||this.rebuild()}return this},find:function(C){return Lr(C,this.node)},findOne:function(C){return As(this.node.querySelector(C))}}),Un(va,"Dom");class Ms extends va{constructor(o,a){super(o,a),this.dom={},this.node.instance=this,(o.hasAttribute("data-svgjs")||o.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(o.getAttribute("data-svgjs"))??JSON.parse(o.getAttribute("svgjs:data"))??{})}center(o,a){return this.cx(o).cy(a)}cx(o){return o==null?this.x()+this.width()/2:this.x(o-this.width()/2)}cy(o){return o==null?this.y()+this.height()/2:this.y(o-this.height()/2)}defs(){const o=this.root();return o&&o.defs()}dmove(o,a){return this.dx(o).dy(a)}dx(o=0){return this.x(new yo(o).plus(this.x()))}dy(o=0){return this.y(new yo(o).plus(this.y()))}getEventHolder(){return this}height(o){return this.attr("height",o)}move(o,a){return this.x(o).y(a)}parents(o=this.root()){const a=typeof o=="string";a||(o=wt(o));const c=new Yt;let d=this;for(;(d=d.parent())&&d.node!==it.document&&d.nodeName!=="#document-fragment"&&(c.push(d),a||d.node!==o.node)&&(!a||!d.matches(o));)if(d.node===this.root().node)return null;return c}reference(o){if(!(o=this.attr(o)))return null;const a=(o+"").match(Cn);return a?wt(a[1]):null}root(){const o=this.parent(function(a){return Ht[a]}(Gn));return o&&o.root()}setData(o){return this.dom=o,this}size(o,a){const c=Qo(this,o,a);return this.width(new yo(c.width)).height(new yo(c.height))}width(o){return this.attr("width",o)}writeDataToDom(){return Zn(this,this.dom),super.writeDataToDom()}x(o){return this.attr("x",o)}y(o){return this.attr("y",o)}}Ie(Ms,{bbox:function(){const C=Ri(this,o=>o.getBBox(),o=>{try{const a=o.clone().addTo(Wr().svg).show(),c=a.node.getBBox();return a.remove(),c}catch(a){throw new Error(`Getting bbox of element "${o.node.nodeName}" is not possible: ${a.toString()}`)}});return new uo(C)},rbox:function(C){const o=Ri(this,c=>c.getBoundingClientRect(),c=>{throw new Error(`Getting rbox of element "${c.node.nodeName}" is not possible`)}),a=new uo(o);return C?a.transform(C.screenCTM().inverseO()):a.addOffset()},inside:function(C,o){const a=this.bbox();return C>a.x&&o>a.y&&C<a.x+a.width&&o<a.y+a.height},point:function(C,o){return new qn(C,o).transformO(this.screenCTM().inverseO())},ctm:function(){return new oo(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const C=this.rect(1,1),o=C.node.getScreenCTM();return C.remove(),new oo(o)}return new oo(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new oo}}}),Un(Ms,"Element");const Ne={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(C,o){return o==="color"?C:C+"-"+o}};["fill","stroke"].forEach(function(C){const o={};let a;o[C]=function(c){if(c===void 0)return this.attr(C);if(typeof c=="string"||c instanceof Xs||Xs.isRgb(c)||c instanceof Ms)this.attr(C,c);else for(a=Ne[C].length-1;a>=0;a--)c[Ne[C][a]]!=null&&this.attr(Ne.prefix(C,Ne[C][a]),c[Ne[C][a]]);return this},ce(["Element","Runner"],o)}),ce(["Element","Runner"],{matrix:function(C,o,a,c,d,m){return C==null?new oo(this):this.attr("transform",new oo(C,o,a,c,d,m))},rotate:function(C,o,a){return this.transform({rotate:C,ox:o,oy:a},!0)},skew:function(C,o,a,c){return arguments.length===1||arguments.length===3?this.transform({skew:C,ox:o,oy:a},!0):this.transform({skew:[C,o],ox:a,oy:c},!0)},shear:function(C,o,a){return this.transform({shear:C,ox:o,oy:a},!0)},scale:function(C,o,a,c){return arguments.length===1||arguments.length===3?this.transform({scale:C,ox:o,oy:a},!0):this.transform({scale:[C,o],ox:a,oy:c},!0)},translate:function(C,o){return this.transform({translate:[C,o]},!0)},relative:function(C,o){return this.transform({relative:[C,o]},!0)},flip:function(C="both",o="center"){return"xybothtrue".indexOf(C)===-1&&(o=C,C="both"),this.transform({flip:C,origin:o},!0)},opacity:function(C){return this.attr("opacity",C)}}),ce("radius",{radius:function(C,o=C){return(this._element||this).type==="radialGradient"?this.attr("r",new yo(C)):this.rx(C).ry(o)}}),ce("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(C){return new qn(this.node.getPointAtLength(C))}}),ce(["Element","Runner"],{font:function(C,o){if(typeof C=="object"){for(o in C)this.font(o,C[o]);return this}return C==="leading"?this.leading(o):C==="anchor"?this.attr("text-anchor",o):C==="size"||C==="family"||C==="weight"||C==="stretch"||C==="variant"||C==="style"?this.attr("font-"+C,o):this.attr(C,o)}}),ce("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(C,o){return C[o]=function(a){return a===null?this.off(o):this.on(o,a),this},C},{})),ce("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(Qs).slice(0,-1).map(function(o){const a=o.trim().split("(");return[a[0],a[1].split(qo).map(function(c){return parseFloat(c)})]}).reverse().reduce(function(o,a){return a[0]==="matrix"?o.lmultiply(oo.fromArray(a[1])):o[a[0]].apply(o,a[1])},new oo)},toParent:function(C,o){if(this===C)return this;if(V(this.node))return this.addTo(C,o);const a=this.screenCTM(),c=C.screenCTM().inverse();return this.addTo(C,o).untransform().transform(c.multiply(a)),this},toRoot:function(C){return this.toParent(this.root(),C)},transform:function(C,o){if(C==null||typeof C=="string"){const c=new oo(this).decompose();return C==null?c:c[C]}oo.isMatrixLike(C)||(C={...C,origin:Je(C,this)});const a=new oo(o===!0?this:o||!1).transform(C);return this.attr("transform",a)}});class Re extends Ms{flatten(){return this.each(function(){if(this instanceof Re)return this.flatten().ungroup()}),this}ungroup(o=this.parent(),a=o.index(this)){return a=a===-1?o.children().length:a,this.each(function(c,d){return d[d.length-c-1].toParent(o,a)}),this.remove()}}Un(Re,"Container");class gt extends Re{constructor(o,a=o){super(te("defs",o),a)}flatten(){return this}ungroup(){return this}}Un(gt,"Defs");class ft extends Ms{}function Yn(C){return this.attr("rx",C)}function go(C){return this.attr("ry",C)}function To(C){return C==null?this.cx()-this.rx():this.cx(C+this.rx())}function Sr(C){return C==null?this.cy()-this.ry():this.cy(C+this.ry())}function Xe(C){return this.attr("cx",C)}function Eo(C){return this.attr("cy",C)}function He(C){return C==null?2*this.rx():this.rx(new yo(C).divide(2))}function ze(C){return C==null?2*this.ry():this.ry(new yo(C).divide(2))}Un(ft,"Shape");var It=Object.freeze({__proto__:null,cx:Xe,cy:Eo,height:ze,rx:Yn,ry:go,width:He,x:To,y:Sr});class Vt extends ft{constructor(o,a=o){super(te("ellipse",o),a)}size(o,a){const c=Qo(this,o,a);return this.rx(new yo(c.width).divide(2)).ry(new yo(c.height).divide(2))}}Ie(Vt,It),ce("Container",{ellipse:Ze(function(C=0,o=C){return this.put(new Vt).size(C,o).move(0,0)})}),Un(Vt,"Ellipse");class bn extends va{constructor(o=it.document.createDocumentFragment()){super(o)}xml(o,a,c){if(typeof o=="boolean"&&(c=a,a=o,o=null),o==null||typeof o=="function"){const d=new va(dt("wrapper",c));return d.add(this.node.cloneNode(!0)),d.xml(!1,c)}return super.xml(o,!1,c)}}function Hn(C,o){return(this._element||this).type==="radialGradient"?this.attr({fx:new yo(C),fy:new yo(o)}):this.attr({x1:new yo(C),y1:new yo(o)})}function $n(C,o){return(this._element||this).type==="radialGradient"?this.attr({cx:new yo(C),cy:new yo(o)}):this.attr({x2:new yo(C),y2:new yo(o)})}Un(bn,"Fragment");var Mn=Object.freeze({__proto__:null,from:Hn,to:$n});class eo extends Re{constructor(o,a){super(te(o+"Gradient",typeof o=="string"?null:o),a)}attr(o,a,c){return o==="transform"&&(o="gradientTransform"),super.attr(o,a,c)}bbox(){return new uo}targets(){return Lr("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(o){return this.clear(),typeof o=="function"&&o.call(this,this),this}url(){return"url(#"+this.id()+")"}}Ie(eo,Mn),ce({Container:{gradient(...C){return this.defs().gradient(...C)}},Defs:{gradient:Ze(function(C,o){return this.put(new eo(C)).update(o)})}}),Un(eo,"Gradient");class co extends Re{constructor(o,a=o){super(te("pattern",o),a)}attr(o,a,c){return o==="transform"&&(o="patternTransform"),super.attr(o,a,c)}bbox(){return new uo}targets(){return Lr("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(o){return this.clear(),typeof o=="function"&&o.call(this,this),this}url(){return"url(#"+this.id()+")"}}ce({Container:{pattern(...C){return this.defs().pattern(...C)}},Defs:{pattern:Ze(function(C,o,a){return this.put(new co).update(a).attr({x:0,y:0,width:C,height:o,patternUnits:"userSpaceOnUse"})})}}),Un(co,"Pattern");let ps=class extends ft{constructor(C,o=C){super(te("image",C),o)}load(C,o){if(!C)return this;const a=new it.window.Image;return da(a,"load",function(c){const d=this.parent(co);this.width()===0&&this.height()===0&&this.size(a.width,a.height),d instanceof co&&d.width()===0&&d.height()===0&&d.size(this.width(),this.height()),typeof o=="function"&&o.call(this,c)},this),da(a,"load error",function(){Dr(a)}),this.attr("href",a.src=C,Rn)}};var Ks;Ks=function(C,o,a){return C!=="fill"&&C!=="stroke"||vr.test(o)&&(o=a.root().defs().image(o)),o instanceof ps&&(o=a.root().defs().pattern(0,0,c=>{c.add(o)})),o},Ea.push(Ks),ce({Container:{image:Ze(function(C,o){return this.put(new ps).size(0,0).load(C,o)})}}),Un(ps,"Image");class Ys extends Ds{bbox(){let o=-1/0,a=-1/0,c=1/0,d=1/0;return this.forEach(function(m){o=Math.max(m[0],o),a=Math.max(m[1],a),c=Math.min(m[0],c),d=Math.min(m[1],d)}),new uo(c,d,o-c,a-d)}move(o,a){const c=this.bbox();if(o-=c.x,a-=c.y,!isNaN(o)&&!isNaN(a))for(let d=this.length-1;d>=0;d--)this[d]=[this[d][0]+o,this[d][1]+a];return this}parse(o=[0,0]){const a=[];(o=o instanceof Array?Array.prototype.concat.apply([],o):o.trim().split(qo).map(parseFloat)).length%2!=0&&o.pop();for(let c=0,d=o.length;c<d;c+=2)a.push([o[c],o[c+1]]);return a}size(o,a){let c;const d=this.bbox();for(c=this.length-1;c>=0;c--)d.width&&(this[c][0]=(this[c][0]-d.x)*o/d.width+d.x),d.height&&(this[c][1]=(this[c][1]-d.y)*a/d.height+d.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const o=[];for(let a=0,c=this.length;a<c;a++)o.push(this[a].join(","));return o.join(" ")}transform(o){return this.clone().transformO(o)}transformO(o){oo.isMatrixLike(o)||(o=new oo(o));for(let a=this.length;a--;){const[c,d]=this[a];this[a][0]=o.a*c+o.c*d+o.e,this[a][1]=o.b*c+o.d*d+o.f}return this}}var Ja=Object.freeze({__proto__:null,MorphArray:Ys,height:function(C){const o=this.bbox();return C==null?o.height:this.size(o.width,C)},width:function(C){const o=this.bbox();return C==null?o.width:this.size(C,o.height)},x:function(C){return C==null?this.bbox().x:this.move(C,this.bbox().y)},y:function(C){return C==null?this.bbox().y:this.move(this.bbox().x,C)}});let so=class extends ft{constructor(C,o=C){super(te("line",C),o)}array(){return new Ys([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(C,o){return this.attr(this.array().move(C,o).toLine())}plot(C,o,a,c){return C==null?this.array():(C=o!==void 0?{x1:C,y1:o,x2:a,y2:c}:new Ys(C).toLine(),this.attr(C))}size(C,o){const a=Qo(this,C,o);return this.attr(this.array().size(a.width,a.height).toLine())}};Ie(so,Ja),ce({Container:{line:Ze(function(...C){return so.prototype.plot.apply(this.put(new so),C[0]!=null?C:[0,0,0,0])})}}),Un(so,"Line");let ls=class extends Re{constructor(C,o=C){super(te("marker",C),o)}height(C){return this.attr("markerHeight",C)}orient(C){return this.attr("orient",C)}ref(C,o){return this.attr("refX",C).attr("refY",o)}toString(){return"url(#"+this.id()+")"}update(C){return this.clear(),typeof C=="function"&&C.call(this,this),this}width(C){return this.attr("markerWidth",C)}};function ss(C,o){return function(a){return a==null?this[C]:(this[C]=a,o&&o.call(this),this)}}ce({Container:{marker(...C){return this.defs().marker(...C)}},Defs:{marker:Ze(function(C,o,a){return this.put(new ls).size(C,o).ref(C/2,o/2).viewbox(0,0,C,o).attr("orient","auto").update(a)})},marker:{marker(C,o,a,c){let d=["marker"];return C!=="all"&&d.push(C),d=d.join("-"),C=arguments[1]instanceof ls?arguments[1]:this.defs().marker(o,a,c),this.attr(d,C)}}}),Un(ls,"Marker");const _a={"-":function(C){return C},"<>":function(C){return-Math.cos(C*Math.PI)/2+.5},">":function(C){return Math.sin(C*Math.PI/2)},"<":function(C){return 1-Math.cos(C*Math.PI/2)},bezier:function(C,o,a,c){return function(d){return d<0?C>0?o/C*d:a>0?c/a*d:0:d>1?a<1?(1-c)/(1-a)*d+(c-a)/(1-a):C<1?(1-o)/(1-C)*d+(o-C)/(1-C):1:3*d*(1-d)**2*o+3*d**2*(1-d)*c+d**3}},steps:function(C,o="end"){o=o.split("-").reverse()[0];let a=C;return o==="none"?--a:o==="both"&&++a,(c,d=!1)=>{let m=Math.floor(c*C);const b=c*m%1==0;return o!=="start"&&o!=="both"||++m,d&&b&&--m,c>=0&&m<0&&(m=0),c<=1&&m>a&&(m=a),m/a}}};class xa{done(){return!1}}class ea extends xa{constructor(o=Ta){super(),this.ease=_a[o]||o}step(o,a,c){return typeof o!="number"?c<1?o:a:o+(a-o)*this.ease(c)}}class pr extends xa{constructor(o){super(),this.stepper=o}done(o){return o.done}step(o,a,c,d){return this.stepper(o,a,c,d)}}function eu(){const C=(this._duration||500)/1e3,o=this._overshoot||0,a=Math.PI,c=Math.log(o/100+1e-10),d=-c/Math.sqrt(a*a+c*c),m=3.9/(d*C);this.d=2*d*m,this.k=m*m}Ie(class extends pr{constructor(C=500,o=0){super(),this.duration(C).overshoot(o)}step(C,o,a,c){if(typeof C=="string")return C;if(c.done=a===1/0,a===1/0)return o;if(a===0)return C;a>100&&(a=16),a/=1e3;const d=c.velocity||0,m=-this.d*d-this.k*(C-o),b=C+d*a+m*a*a/2;return c.velocity=d+m*a,c.done=Math.abs(o-b)+Math.abs(d)<.002,c.done?o:b}},{duration:ss("_duration",eu),overshoot:ss("_overshoot",eu)}),Ie(class extends pr{constructor(C=.1,o=.01,a=0,c=1e3){super(),this.p(C).i(o).d(a).windup(c)}step(C,o,a,c){if(typeof C=="string")return C;if(c.done=a===1/0,a===1/0)return o;if(a===0)return C;const d=o-C;let m=(c.integral||0)+d*a;const b=(d-(c.error||0))/a,w=this._windup;return w!==!1&&(m=Math.max(-w,Math.min(m,w))),c.error=d,c.integral=m,c.done=Math.abs(d)<.001,c.done?o:C+(this.P*d+this.I*m+this.D*b)}},{windup:ss("_windup"),p:ss("P"),i:ss("I"),d:ss("D")});const ji={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Fs={M:function(C,o,a){return o.x=a.x=C[0],o.y=a.y=C[1],["M",o.x,o.y]},L:function(C,o){return o.x=C[0],o.y=C[1],["L",C[0],C[1]]},H:function(C,o){return o.x=C[0],["H",C[0]]},V:function(C,o){return o.y=C[0],["V",C[0]]},C:function(C,o){return o.x=C[4],o.y=C[5],["C",C[0],C[1],C[2],C[3],C[4],C[5]]},S:function(C,o){return o.x=C[2],o.y=C[3],["S",C[0],C[1],C[2],C[3]]},Q:function(C,o){return o.x=C[2],o.y=C[3],["Q",C[0],C[1],C[2],C[3]]},T:function(C,o){return o.x=C[0],o.y=C[1],["T",C[0],C[1]]},Z:function(C,o,a){return o.x=a.x,o.y=a.y,["Z"]},A:function(C,o){return o.x=C[5],o.y=C[6],["A",C[0],C[1],C[2],C[3],C[4],C[5],C[6]]}},Oa="mlhvqtcsaz".split("");for(let C=0,o=Oa.length;C<o;++C)Fs[Oa[C]]=function(a){return function(c,d,m){if(a==="H")c[0]=c[0]+d.x;else if(a==="V")c[0]=c[0]+d.y;else if(a==="A")c[5]=c[5]+d.x,c[6]=c[6]+d.y;else for(let b=0,w=c.length;b<w;++b)c[b]=c[b]+(b%2?d.y:d.x);return Fs[a](c,d,m)}}(Oa[C].toUpperCase());function Ra(C){return C.segment.length&&C.segment.length-1===ji[C.segment[0].toUpperCase()]}function ya(C,o){C.inNumber&&Di(C,!1);const a=ds.test(o);if(a)C.segment=[o];else{const c=C.lastCommand,d=c.toLowerCase(),m=c===d;C.segment=[d==="m"?m?"l":"L":c]}return C.inSegment=!0,C.lastCommand=C.segment[0],a}function Di(C,o){if(!C.inNumber)throw new Error("Parser Error");C.number&&C.segment.push(parseFloat(C.number)),C.inNumber=o,C.number="",C.pointSeen=!1,C.hasExponent=!1,Ra(C)&&Qa(C)}function Qa(C){C.inSegment=!1,C.absolute&&(C.segment=function(o){const a=o.segment[0];return Fs[a](o.segment.slice(1),o.p,o.p0)}(C)),C.segments.push(C.segment)}function ai(C){if(!C.segment.length)return!1;const o=C.segment[0].toUpperCase()==="A",a=C.segment.length;return o&&(a===4||a===5)}function Zi(C){return C.lastToken.toUpperCase()==="E"}const Mi=new Set([" ",",","	",`
`,"\r","\f"]);class ii extends Ds{bbox(){return Wr().path.setAttribute("d",this.toString()),new uo(Wr.nodes.path.getBBox())}move(o,a){const c=this.bbox();if(o-=c.x,a-=c.y,!isNaN(o)&&!isNaN(a))for(let d,m=this.length-1;m>=0;m--)d=this[m][0],d==="M"||d==="L"||d==="T"?(this[m][1]+=o,this[m][2]+=a):d==="H"?this[m][1]+=o:d==="V"?this[m][1]+=a:d==="C"||d==="S"||d==="Q"?(this[m][1]+=o,this[m][2]+=a,this[m][3]+=o,this[m][4]+=a,d==="C"&&(this[m][5]+=o,this[m][6]+=a)):d==="A"&&(this[m][6]+=o,this[m][7]+=a);return this}parse(o="M0 0"){return Array.isArray(o)&&(o=Array.prototype.concat.apply([],o).toString()),function(a,c=!0){let d=0,m="";const b={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:c,p0:new qn,p:new qn};for(;b.lastToken=m,m=a.charAt(d++);)if(b.inSegment||!ya(b,m))if(m!==".")if(isNaN(parseInt(m)))if(Mi.has(m))b.inNumber&&Di(b,!1);else if(m!=="-"&&m!=="+")if(m.toUpperCase()!=="E"){if(ds.test(m)){if(b.inNumber)Di(b,!1);else{if(!Ra(b))throw new Error("parser Error");Qa(b)}--d}}else b.number+=m,b.hasExponent=!0;else{if(b.inNumber&&!Zi(b)){Di(b,!1),--d;continue}b.number+=m,b.inNumber=!0}else{if(b.number==="0"||ai(b)){b.inNumber=!0,b.number=m,Di(b,!0);continue}b.inNumber=!0,b.number+=m}else{if(b.pointSeen||b.hasExponent){Di(b,!1),--d;continue}b.inNumber=!0,b.pointSeen=!0,b.number+=m}return b.inNumber&&Di(b,!1),b.inSegment&&Ra(b)&&Qa(b),b.segments}(o)}size(o,a){const c=this.bbox();let d,m;for(c.width=c.width===0?1:c.width,c.height=c.height===0?1:c.height,d=this.length-1;d>=0;d--)m=this[d][0],m==="M"||m==="L"||m==="T"?(this[d][1]=(this[d][1]-c.x)*o/c.width+c.x,this[d][2]=(this[d][2]-c.y)*a/c.height+c.y):m==="H"?this[d][1]=(this[d][1]-c.x)*o/c.width+c.x:m==="V"?this[d][1]=(this[d][1]-c.y)*a/c.height+c.y:m==="C"||m==="S"||m==="Q"?(this[d][1]=(this[d][1]-c.x)*o/c.width+c.x,this[d][2]=(this[d][2]-c.y)*a/c.height+c.y,this[d][3]=(this[d][3]-c.x)*o/c.width+c.x,this[d][4]=(this[d][4]-c.y)*a/c.height+c.y,m==="C"&&(this[d][5]=(this[d][5]-c.x)*o/c.width+c.x,this[d][6]=(this[d][6]-c.y)*a/c.height+c.y)):m==="A"&&(this[d][1]=this[d][1]*o/c.width,this[d][2]=this[d][2]*a/c.height,this[d][6]=(this[d][6]-c.x)*o/c.width+c.x,this[d][7]=(this[d][7]-c.y)*a/c.height+c.y);return this}toString(){return function(o){let a="";for(let c=0,d=o.length;c<d;c++)a+=o[c][0],o[c][1]!=null&&(a+=o[c][1],o[c][2]!=null&&(a+=" ",a+=o[c][2],o[c][3]!=null&&(a+=" ",a+=o[c][3],a+=" ",a+=o[c][4],o[c][5]!=null&&(a+=" ",a+=o[c][5],a+=" ",a+=o[c][6],o[c][7]!=null&&(a+=" ",a+=o[c][7])))));return a+" "}(this)}}const Ql=C=>{const o=typeof C;return o==="number"?yo:o==="string"?Xs.isColor(C)?Xs:qo.test(C)?ds.test(C)?ii:Ds:De.test(C)?yo:gi:tc.indexOf(C.constructor)>-1?C.constructor:Array.isArray(C)?Ds:o==="object"?sl:gi};class wi{constructor(o){this._stepper=o||new ea("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(o){return this._morphObj.morph(this._from,this._to,o,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(o,a){return o&&a},!0)}from(o){return o==null?this._from:(this._from=this._set(o),this)}stepper(o){return o==null?this._stepper:(this._stepper=o,this)}to(o){return o==null?this._to:(this._to=this._set(o),this)}type(o){return o==null?this._type:(this._type=o,this)}_set(o){this._type||this.type(Ql(o));let a=new this._type(o);return this._type===Xs&&(a=this._to?a[this._to[4]]():this._from?a[this._from[4]]():a),this._type===sl&&(a=this._to?a.align(this._to):this._from?a.align(this._from):a),a=a.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(a.length)).map(Object).map(function(c){return c.done=!0,c}),a}}class gi{constructor(...o){this.init(...o)}init(o){return o=Array.isArray(o)?o[0]:o,this.value=o,this}toArray(){return[this.value]}valueOf(){return this.value}}class ha{constructor(...o){this.init(...o)}init(o){return Array.isArray(o)&&(o={scaleX:o[0],scaleY:o[1],shear:o[2],rotate:o[3],translateX:o[4],translateY:o[5],originX:o[6],originY:o[7]}),Object.assign(this,ha.defaults,o),this}toArray(){const o=this;return[o.scaleX,o.scaleY,o.shear,o.rotate,o.translateX,o.translateY,o.originX,o.originY]}}ha.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const ec=(C,o)=>C[0]<o[0]?-1:C[0]>o[0]?1:0;class sl{constructor(...o){this.init(...o)}align(o){const a=this.values;for(let c=0,d=a.length;c<d;++c){if(a[c+1]===o[c+1]){if(a[c+1]===Xs&&o[c+7]!==a[c+7]){const w=o[c+7],A=new Xs(this.values.splice(c+3,5))[w]().toArray();this.values.splice(c+3,0,...A)}c+=a[c+2]+2;continue}if(!o[c+1])return this;const m=new o[c+1]().toArray(),b=a[c+2]+3;a.splice(c,b,o[c],o[c+1],o[c+2],...m),c+=a[c+2]+2}return this}init(o){if(this.values=[],Array.isArray(o))return void(this.values=o.slice());o=o||{};const a=[];for(const c in o){const d=Ql(o[c]),m=new d(o[c]).toArray();a.push([c,d,m.length,...m])}return a.sort(ec),this.values=a.reduce((c,d)=>c.concat(d),[]),this}toArray(){return this.values}valueOf(){const o={},a=this.values;for(;a.length;){const c=a.shift(),d=a.shift(),m=a.shift(),b=a.splice(0,m);o[c]=new d(b)}return o}}const tc=[gi,ha,sl];class Ci extends ft{constructor(o,a=o){super(te("path",o),a)}array(){return this._array||(this._array=new ii(this.attr("d")))}clear(){return delete this._array,this}height(o){return o==null?this.bbox().height:this.size(this.bbox().width,o)}move(o,a){return this.attr("d",this.array().move(o,a))}plot(o){return o==null?this.array():this.clear().attr("d",typeof o=="string"?o:this._array=new ii(o))}size(o,a){const c=Qo(this,o,a);return this.attr("d",this.array().size(c.width,c.height))}width(o){return o==null?this.bbox().width:this.size(o,this.bbox().height)}x(o){return o==null?this.bbox().x:this.move(o,this.bbox().y)}y(o){return o==null?this.bbox().y:this.move(this.bbox().x,o)}}Ci.prototype.MorphArray=ii,ce({Container:{path:Ze(function(C){return this.put(new Ci).plot(C||new ii)})}}),Un(Ci,"Path");var ga=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new Ys(this.attr("points")))},clear:function(){return delete this._array,this},move:function(C,o){return this.attr("points",this.array().move(C,o))},plot:function(C){return C==null?this.array():this.clear().attr("points",typeof C=="string"?C:this._array=new Ys(C))},size:function(C,o){const a=Qo(this,C,o);return this.attr("points",this.array().size(a.width,a.height))}});class Ba extends ft{constructor(o,a=o){super(te("polygon",o),a)}}ce({Container:{polygon:Ze(function(C){return this.put(new Ba).plot(C||new Ys)})}}),Ie(Ba,Ja),Ie(Ba,ga),Un(Ba,"Polygon");class ta extends ft{constructor(o,a=o){super(te("polyline",o),a)}}ce({Container:{polyline:Ze(function(C){return this.put(new ta).plot(C||new Ys)})}}),Ie(ta,Ja),Ie(ta,ga),Un(ta,"Polyline");class Ha extends ft{constructor(o,a=o){super(te("rect",o),a)}}Ie(Ha,{rx:Yn,ry:go}),ce({Container:{rect:Ze(function(C,o){return this.put(new Ha).size(C,o)})}}),Un(Ha,"Rect");class nc{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(o){const a=o.next!==void 0?o:{value:o,next:null,prev:null};return this._last?(a.prev=this._last,this._last.next=a,this._last=a):(this._last=a,this._first=a),a}remove(o){o.prev&&(o.prev.next=o.next),o.next&&(o.next.prev=o.prev),o===this._last&&(this._last=o.prev),o===this._first&&(this._first=o.next),o.prev=null,o.next=null}shift(){const o=this._first;return o?(this._first=o.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,o.value):null}}const gr={nextDraw:null,frames:new nc,timeouts:new nc,immediates:new nc,timer:()=>it.window.performance||it.window.Date,transforms:[],frame(C){const o=gr.frames.push({run:C});return gr.nextDraw===null&&(gr.nextDraw=it.window.requestAnimationFrame(gr._draw)),o},timeout(C,o){o=o||0;const a=gr.timer().now()+o,c=gr.timeouts.push({run:C,time:a});return gr.nextDraw===null&&(gr.nextDraw=it.window.requestAnimationFrame(gr._draw)),c},immediate(C){const o=gr.immediates.push(C);return gr.nextDraw===null&&(gr.nextDraw=it.window.requestAnimationFrame(gr._draw)),o},cancelFrame(C){C!=null&&gr.frames.remove(C)},clearTimeout(C){C!=null&&gr.timeouts.remove(C)},cancelImmediate(C){C!=null&&gr.immediates.remove(C)},_draw(C){let o=null;const a=gr.timeouts.last();for(;(o=gr.timeouts.shift())&&(C>=o.time?o.run():gr.timeouts.push(o),o!==a););let c=null;const d=gr.frames.last();for(;c!==d&&(c=gr.frames.shift());)c.run(C);let m=null;for(;m=gr.immediates.shift();)m();gr.nextDraw=gr.timeouts.first()||gr.frames.first()?it.window.requestAnimationFrame(gr._draw):null}},he=function(C){const o=C.start,a=C.runner.duration();return{start:o,duration:a,end:o+a,runner:C.runner}},Me=function(){const C=it.window;return(C.performance||C.Date).now()};class Ge extends Ts{constructor(o=Me){super(),this._timeSource=o,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const o=this.getLastRunnerInfo(),a=o?o.runner.duration():0;return(o?o.start:this._time)+a}getEndTimeOfTimeline(){const o=this._runners.map(a=>a.start+a.runner.duration());return Math.max(0,...o)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(o){return this._runners[this._runnerIds.indexOf(o)]||null}pause(){return this._paused=!0,this._continue()}persist(o){return o==null?this._persist:(this._persist=o,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(o){const a=this.speed();if(o==null)return this.speed(-a);const c=Math.abs(a);return this.speed(o?-c:c)}schedule(o,a,c){if(o==null)return this._runners.map(he);let d=0;const m=this.getEndTime();if(a=a||0,c==null||c==="last"||c==="after")d=m;else if(c==="absolute"||c==="start")d=a,a=0;else if(c==="now")d=this._time;else if(c==="relative"){const A=this.getRunnerInfoById(o.id);A&&(d=A.start+a,a=0)}else{if(c!=="with-last")throw new Error('Invalid value for the "when" parameter');{const A=this.getLastRunnerInfo();d=A?A.start:this._time}}o.unschedule(),o.timeline(this);const b=o.persist(),w={persist:b===null?this._persist:b,start:d+a,runner:o};return this._lastRunnerId=o.id,this._runners.push(w),this._runners.sort((A,E)=>A.start-E.start),this._runnerIds=this._runners.map(A=>A.runner.id),this.updateTime()._continue(),this}seek(o){return this.time(this._time+o)}source(o){return o==null?this._timeSource:(this._timeSource=o,this)}speed(o){return o==null?this._speed:(this._speed=o,this)}stop(){return this.time(0),this.pause()}time(o){return o==null?this._time:(this._time=o,this._continue(!0))}unschedule(o){const a=this._runnerIds.indexOf(o.id);return a<0||(this._runners.splice(a,1),this._runnerIds.splice(a,1),o.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(o=!1){return gr.cancelFrame(this._nextFrame),this._nextFrame=null,o?this._stepImmediate():(this._paused||(this._nextFrame=gr.frame(this._step)),this)}_stepFn(o=!1){const a=this._timeSource();let c=a-this._lastSourceTime;o&&(c=0);const d=this._speed*c+(this._time-this._lastStepTime);this._lastSourceTime=a,o||(this._time+=d,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let b=this._runners.length;b--;){const w=this._runners[b],A=w.runner;this._time-w.start<=0&&A.reset()}let m=!1;for(let b=0,w=this._runners.length;b<w;b++){const A=this._runners[b],E=A.runner;let M=d;const O=this._time-A.start;if(O<=0){m=!0;continue}O<M&&(M=O),E.active()&&(E.step(M).done?A.persist!==!0&&E.duration()-E.time()+this._time+A.persist<this._time&&(E.unschedule(),--b,--w):m=!0)}return m&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}ce({Element:{timeline:function(C){return C==null?(this._timeline=this._timeline||new Ge,this._timeline):(this._timeline=C,this)}}});class mt extends Ts{constructor(o){super(),this.id=mt.id++,o=typeof(o=o??hr)=="function"?new pr(o):o,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof o=="number"&&o,this._isDeclarative=o instanceof pr,this._stepper=this._isDeclarative?o:new ea,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new oo,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(o,a,c){let d=1,m=!1,b=0;return a=a??vl,c=c||"last",typeof(o=o??hr)!="object"||o instanceof xa||(a=o.delay??a,c=o.when??c,m=o.swing||m,d=o.times??d,b=o.wait??b,o=o.duration??hr),{duration:o,delay:a,swing:m,times:d,wait:b,when:c}}active(o){return o==null?this.enabled:(this.enabled=o,this)}addTransform(o){return this.transforms.lmultiplyO(o),this}after(o){return this.on("finished",o)}animate(o,a,c){const d=mt.sanitise(o,a,c),m=new mt(d.duration);return this._timeline&&m.timeline(this._timeline),this._element&&m.element(this._element),m.loop(d).schedule(d.delay,d.when)}clearTransform(){return this.transforms=new oo,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(o=>!o.isTransform))}delay(o){return this.animate(0,o)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(o){return this.queue(null,o)}ease(o){return this._stepper=new ea(o),this}element(o){return o==null?this._element:(this._element=o,o._prepareRunner(),this)}finish(){return this.step(1/0)}loop(o,a,c){return typeof o=="object"&&(a=o.swing,c=o.wait,o=o.times),this._times=o||1/0,this._swing=a||!1,this._wait=c||0,this._times===!0&&(this._times=1/0),this}loops(o){const a=this._duration+this._wait;if(o==null){const m=Math.floor(this._time/a),b=(this._time-m*a)/this._duration;return Math.min(m+b,this._times)}const c=o%1,d=a*Math.floor(o)+this._duration*c;return this.time(d)}persist(o){return o==null?this._persist:(this._persist=o,this)}position(o){const a=this._time,c=this._duration,d=this._wait,m=this._times,b=this._swing,w=this._reverse;let A;if(o==null){const O=function($){const Y=b*Math.floor($%(2*(d+c))/(d+c)),U=Y&&!w||!Y&&w,ne=Math.pow(-1,U)*($%(d+c))/c+U;return Math.max(Math.min(ne,1),0)},L=m*(d+c)-d;return A=a<=0?Math.round(O(1e-5)):a<L?O(a):Math.round(O(L-1e-5)),A}const E=Math.floor(this.loops()),M=b&&E%2==0;return A=E+(M&&!w||w&&M?o:1-o),this.loops(A)}progress(o){return o==null?Math.min(1,this._time/this.duration()):this.time(o*this.duration())}queue(o,a,c,d){return this._queue.push({initialiser:o||Qn,runner:a||Qn,retarget:c,isTransform:d,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(o){return this._reverse=o??!this._reverse,this}schedule(o,a,c){if(o instanceof Ge||(c=a,a=o,o=this.timeline()),!o)throw Error("Runner cannot be scheduled without timeline");return o.schedule(this,a,c),this}step(o){if(!this.enabled)return this;o=o??16,this._time+=o;const a=this.position(),c=this._lastPosition!==a&&this._time>=0;this._lastPosition=a;const d=this.duration(),m=this._lastTime<=0&&this._time>0,b=this._lastTime<d&&this._time>=d;this._lastTime=this._time,m&&this.fire("start",this);const w=this._isDeclarative;this.done=!w&&!b&&this._time>=d,this._reseted=!1;let A=!1;return(c||w)&&(this._initialise(c),this.transforms=new oo,A=this._run(w?o:a),this.fire("step",this)),this.done=this.done||A&&w,b&&this.fire("finished",this),this}time(o){if(o==null)return this._time;const a=o-this._time;return this.step(a),this}timeline(o){return o===void 0?this._timeline:(this._timeline=o,this)}unschedule(){const o=this.timeline();return o&&o.unschedule(this),this}_initialise(o){if(o||this._isDeclarative)for(let a=0,c=this._queue.length;a<c;++a){const d=this._queue[a],m=this._isDeclarative||!d.initialised&&o;o=!d.finished,m&&o&&(d.initialiser.call(this),d.initialised=!0)}}_rememberMorpher(o,a){if(this._history[o]={morpher:a,caller:this._queue[this._queue.length-1]},this._isDeclarative){const c=this.timeline();c&&c.play()}}_run(o){let a=!0;for(let c=0,d=this._queue.length;c<d;++c){const m=this._queue[c],b=m.runner.call(this,o);m.finished=m.finished||b===!0,a=a&&m.finished}return a}_tryRetarget(o,a,c){if(this._history[o]){if(!this._history[o].caller.initialised){const m=this._queue.indexOf(this._history[o].caller);return this._queue.splice(m,1),!1}this._history[o].caller.retarget?this._history[o].caller.retarget.call(this,a,c):this._history[o].morpher.to(a),this._history[o].caller.finished=!1;const d=this.timeline();return d&&d.play(),!0}return!1}}mt.id=0;class Qt{constructor(o=new oo,a=-1,c=!0){this.transforms=o,this.id=a,this.done=c}clearTransformsFromQueue(){}}Ie([mt,Qt],{mergeWith(C){return new Qt(C.transforms.lmultiply(this.transforms),C.id)}});const kt=(C,o)=>C.lmultiplyO(o),Ps=C=>C.transforms;function In(){const C=this._transformationRunners.runners.map(Ps).reduce(kt,new oo);this.transform(C),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class _o{constructor(){this.runners=[],this.ids=[]}add(o){if(this.runners.includes(o))return;const a=o.id+1;return this.runners.push(o),this.ids.push(a),this}clearBefore(o){const a=this.ids.indexOf(o+1)||1;return this.ids.splice(0,a,0),this.runners.splice(0,a,new Qt).forEach(c=>c.clearTransformsFromQueue()),this}edit(o,a){const c=this.ids.indexOf(o+1);return this.ids.splice(c,1,o+1),this.runners.splice(c,1,a),this}getByID(o){return this.runners[this.ids.indexOf(o+1)]}length(){return this.ids.length}merge(){let o=null;for(let a=0;a<this.runners.length;++a){const c=this.runners[a];if(o&&c.done&&o.done&&(!c._timeline||!c._timeline._runnerIds.includes(c.id))&&(!o._timeline||!o._timeline._runnerIds.includes(o.id))){this.remove(c.id);const d=c.mergeWith(o);this.edit(o.id,d),o=d,--a}else o=c}return this}remove(o){const a=this.ids.indexOf(o+1);return this.ids.splice(a,1),this.runners.splice(a,1),this}}ce({Element:{animate(C,o,a){const c=mt.sanitise(C,o,a),d=this.timeline();return new mt(c.duration).loop(c).element(this).timeline(d.play()).schedule(c.delay,c.when)},delay(C,o){return this.animate(0,C,o)},_clearTransformRunnersBefore(C){this._transformationRunners.clearBefore(C.id)},_currentTransform(C){return this._transformationRunners.runners.filter(o=>o.id<=C.id).map(Ps).reduce(kt,new oo)},_addRunner(C){this._transformationRunners.add(C),gr.cancelImmediate(this._frameId),this._frameId=gr.immediate(In.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new _o().add(new Qt(new oo(this))))}}}),Ie(mt,{attr(C,o){return this.styleAttr("attr",C,o)},css(C,o){return this.styleAttr("css",C,o)},styleAttr(C,o,a){if(typeof o=="string")return this.styleAttr(C,{[o]:a});let c=o;if(this._tryRetarget(C,c))return this;let d=new wi(this._stepper).to(c),m=Object.keys(c);return this.queue(function(){d=d.from(this.element()[C](m))},function(b){return this.element()[C](d.at(b).valueOf()),d.done()},function(b){const w=Object.keys(b),A=(E=m,w.filter(O=>!E.includes(O)));var E;if(A.length){const O=this.element()[C](A),L=new sl(d.from()).valueOf();Object.assign(L,O),d.from(L)}const M=new sl(d.to()).valueOf();Object.assign(M,b),d.to(M),m=w,c=b}),this._rememberMorpher(C,d),this},zoom(C,o){if(this._tryRetarget("zoom",C,o))return this;let a=new wi(this._stepper).to(new yo(C));return this.queue(function(){a=a.from(this.element().zoom())},function(c){return this.element().zoom(a.at(c),o),a.done()},function(c,d){o=d,a.to(c)}),this._rememberMorpher("zoom",a),this},transform(C,o,a){if(o=C.relative||o,this._isDeclarative&&!o&&this._tryRetarget("transform",C))return this;const c=oo.isMatrixLike(C);a=C.affine!=null?C.affine:a??!c;const d=new wi(this._stepper).type(a?ha:oo);let m,b,w,A,E;return this.queue(function(){b=b||this.element(),m=m||Je(C,b),E=new oo(o?void 0:b),b._addRunner(this),o||b._clearTransformRunnersBefore(this)},function(M){o||this.clearTransform();const{x:O,y:L}=new qn(m).transform(b._currentTransform(this));let $=new oo({...C,origin:[O,L]}),Y=this._isDeclarative&&w?w:E;if(a){$=$.decompose(O,L),Y=Y.decompose(O,L);const ne=$.rotate,ae=Y.rotate,le=[ne-360,ne,ne+360],me=le.map(Ve=>Math.abs(Ve-ae)),Oe=Math.min(...me),Te=me.indexOf(Oe);$.rotate=le[Te]}o&&(c||($.rotate=C.rotate||0),this._isDeclarative&&A&&(Y.rotate=A)),d.from(Y),d.to($);const U=d.at(M);return A=U.rotate,w=new oo(U),this.addTransform(w),b._addRunner(this),d.done()},function(M){(M.origin||"center").toString()!==(C.origin||"center").toString()&&(m=Je(M,b)),C={...M,origin:m}},!0),this._isDeclarative&&this._rememberMorpher("transform",d),this},x(C){return this._queueNumber("x",C)},y(C){return this._queueNumber("y",C)},ax(C){return this._queueNumber("ax",C)},ay(C){return this._queueNumber("ay",C)},dx(C=0){return this._queueNumberDelta("x",C)},dy(C=0){return this._queueNumberDelta("y",C)},dmove(C,o){return this.dx(C).dy(o)},_queueNumberDelta(C,o){if(o=new yo(o),this._tryRetarget(C,o))return this;const a=new wi(this._stepper).to(o);let c=null;return this.queue(function(){c=this.element()[C](),a.from(c),a.to(c+o)},function(d){return this.element()[C](a.at(d)),a.done()},function(d){a.to(c+new yo(d))}),this._rememberMorpher(C,a),this},_queueObject(C,o){if(this._tryRetarget(C,o))return this;const a=new wi(this._stepper).to(o);return this.queue(function(){a.from(this.element()[C]())},function(c){return this.element()[C](a.at(c)),a.done()}),this._rememberMorpher(C,a),this},_queueNumber(C,o){return this._queueObject(C,new yo(o))},cx(C){return this._queueNumber("cx",C)},cy(C){return this._queueNumber("cy",C)},move(C,o){return this.x(C).y(o)},amove(C,o){return this.ax(C).ay(o)},center(C,o){return this.cx(C).cy(o)},size(C,o){let a;return C&&o||(a=this._element.bbox()),C||(C=a.width/a.height*o),o||(o=a.height/a.width*C),this.width(C).height(o)},width(C){return this._queueNumber("width",C)},height(C){return this._queueNumber("height",C)},plot(C,o,a,c){if(arguments.length===4)return this.plot([C,o,a,c]);if(this._tryRetarget("plot",C))return this;const d=new wi(this._stepper).type(this._element.MorphArray).to(C);return this.queue(function(){d.from(this._element.array())},function(m){return this._element.plot(d.at(m)),d.done()}),this._rememberMorpher("plot",d),this},leading(C){return this._queueNumber("leading",C)},viewbox(C,o,a,c){return this._queueObject("viewbox",new uo(C,o,a,c))},update(C){return typeof C!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(C.opacity!=null&&this.attr("stop-opacity",C.opacity),C.color!=null&&this.attr("stop-color",C.color),C.offset!=null&&this.attr("offset",C.offset),this)}}),Ie(mt,{rx:Yn,ry:go,from:Hn,to:$n}),Un(mt,"Runner");class kr extends Re{constructor(o,a=o){super(te("svg",o),a),this.namespace()}defs(){return this.isRoot()?As(this.node.querySelector("defs"))||this.put(new gt):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof it.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Dt,version:"1.1"}).attr("xmlns:xlink",Rn,Ao):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Ao).attr("xmlns:svgjs",null,Ao)}root(){return this.isRoot()?this:super.root()}}ce({Container:{nested:Ze(function(){return this.put(new kr)})}}),Un(kr,"Svg",!0);let Q=class extends Re{constructor(C,o=C){super(te("symbol",C),o)}};ce({Container:{symbol:Ze(function(){return this.put(new Q)})}}),Un(Q,"Symbol");var xe=Object.freeze({__proto__:null,amove:function(C,o){return this.ax(C).ay(o)},ax:function(C){return this.attr("x",C)},ay:function(C){return this.attr("y",C)},build:function(C){return this._build=!!C,this},center:function(C,o,a=this.bbox()){return this.cx(C,a).cy(o,a)},cx:function(C,o=this.bbox()){return C==null?o.cx:this.attr("x",this.attr("x")+C-o.cx)},cy:function(C,o=this.bbox()){return C==null?o.cy:this.attr("y",this.attr("y")+C-o.cy)},length:function(){return this.node.getComputedTextLength()},move:function(C,o,a=this.bbox()){return this.x(C,a).y(o,a)},plain:function(C){return this._build===!1&&this.clear(),this.node.appendChild(it.document.createTextNode(C)),this},x:function(C,o=this.bbox()){return C==null?o.x:this.attr("x",this.attr("x")+C-o.x)},y:function(C,o=this.bbox()){return C==null?o.y:this.attr("y",this.attr("y")+C-o.y)}});class Le extends ft{constructor(o,a=o){super(te("text",o),a),this.dom.leading=this.dom.leading??new yo(1.3),this._rebuild=!0,this._build=!1}leading(o){return o==null?this.dom.leading:(this.dom.leading=new yo(o),this.rebuild())}rebuild(o){if(typeof o=="boolean"&&(this._rebuild=o),this._rebuild){const a=this;let c=0;const d=this.dom.leading;this.each(function(m){if(V(this.node))return;const b=it.window.getComputedStyle(this.node).getPropertyValue("font-size"),w=d*new yo(b);this.dom.newLined&&(this.attr("x",a.attr("x")),this.text()===`
`?c+=w:(this.attr("dy",m?w+c:0),c=0))}),this.fire("rebuild")}return this}setData(o){return this.dom=o,this.dom.leading=new yo(o.leading||1.3),this}writeDataToDom(){return Zn(this,this.dom,{leading:1.3}),this}text(o){if(o===void 0){const a=this.node.childNodes;let c=0;o="";for(let d=0,m=a.length;d<m;++d)a[d].nodeName==="textPath"||V(a[d])?d===0&&(c=d+1):(d!==c&&a[d].nodeType!==3&&As(a[d]).dom.newLined===!0&&(o+=`
`),o+=a[d].textContent);return o}if(this.clear().build(!0),typeof o=="function")o.call(this,this);else for(let a=0,c=(o=(o+"").split(`
`)).length;a<c;a++)this.newLine(o[a]);return this.build(!1).rebuild()}}Ie(Le,xe),ce({Container:{text:Ze(function(C=""){return this.put(new Le).text(C)}),plain:Ze(function(C=""){return this.put(new Le).plain(C)})}}),Un(Le,"Text");class st extends ft{constructor(o,a=o){super(te("tspan",o),a),this._build=!1}dx(o){return this.attr("dx",o)}dy(o){return this.attr("dy",o)}newLine(){this.dom.newLined=!0;const o=this.parent();if(!(o instanceof Le))return this;const a=o.index(this),c=it.window.getComputedStyle(this.node).getPropertyValue("font-size"),d=o.dom.leading*new yo(c);return this.dy(a?d:0).attr("x",o.x())}text(o){return o==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof o=="function"?(this.clear().build(!0),o.call(this,this),this.build(!1)):this.plain(o),this)}}Ie(st,xe),ce({Tspan:{tspan:Ze(function(C=""){const o=new st;return this._build||this.clear(),this.put(o).text(C)})},Text:{newLine:function(C=""){return this.tspan(C).newLine()}}}),Un(st,"Tspan");class Mt extends ft{constructor(o,a=o){super(te("circle",o),a)}radius(o){return this.attr("r",o)}rx(o){return this.attr("r",o)}ry(o){return this.rx(o)}size(o){return this.radius(new yo(o).divide(2))}}Ie(Mt,{x:To,y:Sr,cx:Xe,cy:Eo,width:He,height:ze}),ce({Container:{circle:Ze(function(C=0){return this.put(new Mt).size(C).move(0,0)})}}),Un(Mt,"Circle");class jo extends Re{constructor(o,a=o){super(te("clipPath",o),a)}remove(){return this.targets().forEach(function(o){o.unclip()}),super.remove()}targets(){return Lr("svg [clip-path*="+this.id()+"]")}}ce({Container:{clip:Ze(function(){return this.defs().put(new jo)})},Element:{clipper(){return this.reference("clip-path")},clipWith(C){const o=C instanceof jo?C:this.parent().clip().add(C);return this.attr("clip-path","url(#"+o.id()+")")},unclip(){return this.attr("clip-path",null)}}}),Un(jo,"ClipPath");class js extends Ms{constructor(o,a=o){super(te("foreignObject",o),a)}}ce({Container:{foreignObject:Ze(function(C,o){return this.put(new js).size(C,o)})}}),Un(js,"ForeignObject");var nr=Object.freeze({__proto__:null,dmove:function(C,o){return this.children().forEach(a=>{let c;try{c=a.node instanceof No().SVGSVGElement?new uo(a.attr(["x","y","width","height"])):a.bbox()}catch{return}const d=new oo(a),m=d.translate(C,o).transform(d.inverse()),b=new qn(c.x,c.y).transform(m);a.move(b.x,b.y)}),this},dx:function(C){return this.dmove(C,0)},dy:function(C){return this.dmove(0,C)},height:function(C,o=this.bbox()){return C==null?o.height:this.size(o.width,C,o)},move:function(C=0,o=0,a=this.bbox()){const c=C-a.x,d=o-a.y;return this.dmove(c,d)},size:function(C,o,a=this.bbox()){const c=Qo(this,C,o,a),d=c.width/a.width,m=c.height/a.height;return this.children().forEach(b=>{const w=new qn(a).transform(new oo(b).inverse());b.scale(d,m,w.x,w.y)}),this},width:function(C,o=this.bbox()){return C==null?o.width:this.size(C,o.height,o)},x:function(C,o=this.bbox()){return C==null?o.x:this.move(C,o.y,o)},y:function(C,o=this.bbox()){return C==null?o.y:this.move(o.x,C,o)}});class zt extends Re{constructor(o,a=o){super(te("g",o),a)}}Ie(zt,nr),ce({Container:{group:Ze(function(){return this.put(new zt)})}}),Un(zt,"G");class or extends Re{constructor(o,a=o){super(te("a",o),a)}target(o){return this.attr("target",o)}to(o){return this.attr("href",o,Rn)}}Ie(or,nr),ce({Container:{link:Ze(function(C){return this.put(new or).to(C)})},Element:{unlink(){const C=this.linker();if(!C)return this;const o=C.parent();if(!o)return this.remove();const a=o.index(C);return o.add(this,a),C.remove(),this},linkTo(C){let o=this.linker();return o||(o=new or,this.wrap(o)),typeof C=="function"?C.call(o,o):o.to(C),this},linker(){const C=this.parent();return C&&C.node.nodeName.toLowerCase()==="a"?C:null}}}),Un(or,"A");class Da extends Re{constructor(o,a=o){super(te("mask",o),a)}remove(){return this.targets().forEach(function(o){o.unmask()}),super.remove()}targets(){return Lr("svg [mask*="+this.id()+"]")}}ce({Container:{mask:Ze(function(){return this.defs().put(new Da)})},Element:{masker(){return this.reference("mask")},maskWith(C){const o=C instanceof Da?C:this.parent().mask().add(C);return this.attr("mask","url(#"+o.id()+")")},unmask(){return this.attr("mask",null)}}}),Un(Da,"Mask");class Rl extends Ms{constructor(o,a=o){super(te("stop",o),a)}update(o){return(typeof o=="number"||o instanceof yo)&&(o={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),o.opacity!=null&&this.attr("stop-opacity",o.opacity),o.color!=null&&this.attr("stop-color",o.color),o.offset!=null&&this.attr("offset",new yo(o.offset)),this}}ce({Gradient:{stop:function(C,o,a){return this.put(new Rl).update(C,o,a)}}}),Un(Rl,"Stop");class Oo extends Ms{constructor(o,a=o){super(te("style",o),a)}addText(o=""){return this.node.textContent+=o,this}font(o,a,c={}){return this.rule("@font-face",{fontFamily:o,src:a,...c})}rule(o,a){return this.addText(function(c,d){if(!c)return"";if(!d)return c;let m=c+"{";for(const b in d)m+=b.replace(/([A-Z])/g,function(w,A){return"-"+A.toLowerCase()})+":"+d[b]+";";return m+="}",m}(o,a))}}ce("Dom",{style(C,o){return this.put(new Oo).rule(C,o)},fontface(C,o,a){return this.put(new Oo).font(C,o,a)}}),Un(Oo,"Style");class Si extends Le{constructor(o,a=o){super(te("textPath",o),a)}array(){const o=this.track();return o?o.array():null}plot(o){const a=this.track();let c=null;return a&&(c=a.plot(o)),o==null?c:this}track(){return this.reference("href")}}ce({Container:{textPath:Ze(function(C,o){return C instanceof Le||(C=this.text(C)),C.path(o)})},Text:{path:Ze(function(C,o=!0){const a=new Si;let c;if(C instanceof Ci||(C=this.defs().path(C)),a.attr("href","#"+C,Rn),o)for(;c=this.node.firstChild;)a.node.appendChild(c);return this.put(a)}),textPath(){return this.findOne("textPath")}},Path:{text:Ze(function(C){return C instanceof Le||(C=new Le().addTo(this.parent()).text(C)),C.path(this)}),targets(){return Lr("svg textPath").filter(C=>(C.attr("href")||"").includes(this.id()))}}}),Si.prototype.MorphArray=ii,Un(Si,"TextPath");class rl extends ft{constructor(o,a=o){super(te("use",o),a)}use(o,a){return this.attr("href",(a||"")+"#"+o,Rn)}}ce({Container:{use:Ze(function(C,o){return this.put(new rl).use(C,o)})}}),Un(rl,"Use");const Ma=wt;Ie([kr,Q,ps,co,ls],Gt("viewbox")),Ie([so,ta,Ba,Ci],Gt("marker")),Ie(Le,Gt("Text")),Ie(Ci,Gt("Path")),Ie(gt,Gt("Defs")),Ie([Le,st],Gt("Tspan")),Ie([Ha,Vt,eo,mt],Gt("radius")),Ie(Ts,Gt("EventTarget")),Ie(va,Gt("Dom")),Ie(Ms,Gt("Element")),Ie(ft,Gt("Shape")),Ie([Re,bn],Gt("Container")),Ie(eo,Gt("Gradient")),Ie(mt,Gt("Runner")),Yt.extend([...new Set(jt)]),function(C=[]){tc.push(...[].concat(C))}([yo,Xs,uo,oo,Ds,Ys,ii,qn]),Ie(tc,{to(C){return new wi().type(this.constructor).from(this.toArray()).to(C)},fromArray(C){return this.init(C),this},toConsumable(){return this.toArray()},morph(C,o,a,c,d){return this.fromArray(C.map(function(m,b){return c.step(m,o[b],a,d[b],d)}))}});class Xo extends Ms{constructor(o){super(te("filter",o),o),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(o,a){return!(o=super.put(o,a)).attr("in")&&this.$autoSetIn&&o.attr("in",this.$source),o.attr("result")||o.attr("result",o.id()),o}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return Lr('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class xl extends Ms{constructor(o,a){super(o,a),this.result(this.id())}in(o){if(o==null){const a=this.attr("in");return this.parent()&&this.parent().find(`[result="${a}"]`)[0]||a}return this.attr("in",o)}result(o){return this.attr("result",o)}toString(){return this.result()}}const yl=C=>function(...o){for(let a=C.length;a--;)o[a]!=null&&this.attr(C[a],o[a])},Ku={blend:yl(["in","in2","mode"]),colorMatrix:yl(["type","values"]),composite:yl(["in","in2","operator"]),convolveMatrix:function(C){C=new Ds(C).toString(),this.attr({order:Math.sqrt(C.split(" ").length),kernelMatrix:C})},diffuseLighting:yl(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:yl(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:yl(["in","dx","dy","stdDeviation"]),flood:yl(["flood-color","flood-opacity"]),gaussianBlur:function(C=0,o=C){this.attr("stdDeviation",C+" "+o)},image:function(C){this.attr("href",C,Rn)},morphology:yl(["operator","radius"]),offset:yl(["dx","dy"]),specularLighting:yl(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:yl([]),turbulence:yl(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach(C=>{const o=Be(C),a=Ku[C];Xo[o+"Effect"]=class extends xl{constructor(c){super(te("fe"+o,c),c)}update(c){return a.apply(this,c),this}},Xo.prototype[C]=Ze(function(c,...d){const m=new Xo[o+"Effect"];return c==null?this.put(m):(typeof c=="function"?c.call(m,m):d.unshift(c),this.put(m).update(d))})}),Ie(Xo,{merge(C){const o=this.put(new Xo.MergeEffect);return typeof C=="function"?(C.call(o,o),o):((C instanceof Array?C:[...arguments]).forEach(a=>{a instanceof Xo.MergeNode?o.put(a):o.mergeNode(a)}),o)},componentTransfer(C={}){const o=this.put(new Xo.ComponentTransferEffect);if(typeof C=="function")return C.call(o,o),o;C.r||C.g||C.b||C.a||(C={r:C,g:C,b:C,a:C});for(const a in C)o.add(new Xo["Func"+a.toUpperCase()](C[a]));return o}}),["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach(C=>{const o=Be(C);Xo[o]=class extends xl{constructor(a){super(te("fe"+o,a),a)}}}),["funcR","funcG","funcB","funcA"].forEach(function(C){const o=Xo[Be(C)],a=Ze(function(){return this.put(new o)});Xo.ComponentTransferEffect.prototype[C]=a}),["distantLight","pointLight","spotLight"].forEach(C=>{const o=Xo[Be(C)],a=Ze(function(){return this.put(new o)});Xo.DiffuseLightingEffect.prototype[C]=a,Xo.SpecularLightingEffect.prototype[C]=a}),Ie(Xo.MergeEffect,{mergeNode(C){return this.put(new Xo.MergeNode).attr("in",C)}}),Ie(gt,{filter:function(C){const o=this.put(new Xo);return typeof C=="function"&&C.call(o,o),o}}),Ie(Re,{filter:function(C){return this.defs().filter(C)}}),Ie(Ms,{filterWith:function(C){const o=C instanceof Xo?C:this.defs().filter(C);return this.attr("filter",o)},unfilter:function(C){return this.attr("filter",null)},filterer(){return this.reference("filter")}}),Ie(xl,{blend:function(C,o){return this.parent()&&this.parent().blend(this,C,o)},colorMatrix:function(C,o){return this.parent()&&this.parent().colorMatrix(C,o).in(this)},componentTransfer:function(C){return this.parent()&&this.parent().componentTransfer(C).in(this)},composite:function(C,o){return this.parent()&&this.parent().composite(this,C,o)},convolveMatrix:function(C){return this.parent()&&this.parent().convolveMatrix(C).in(this)},diffuseLighting:function(C,o,a,c){return this.parent()&&this.parent().diffuseLighting(C,a,c).in(this)},displacementMap:function(C,o,a,c){return this.parent()&&this.parent().displacementMap(this,C,o,a,c)},dropShadow:function(C,o,a){return this.parent()&&this.parent().dropShadow(this,C,o,a).in(this)},flood:function(C,o){return this.parent()&&this.parent().flood(C,o)},gaussianBlur:function(C,o){return this.parent()&&this.parent().gaussianBlur(C,o).in(this)},image:function(C){return this.parent()&&this.parent().image(C)},merge:function(C){return C=C instanceof Array?C:[...C],this.parent()&&this.parent().merge(this,...C)},morphology:function(C,o){return this.parent()&&this.parent().morphology(C,o).in(this)},offset:function(C,o){return this.parent()&&this.parent().offset(C,o).in(this)},specularLighting:function(C,o,a,c,d){return this.parent()&&this.parent().specularLighting(C,a,c,d).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(C,o,a,c,d){return this.parent()&&this.parent().turbulence(C,o,a,c,d).in(this)}}),Ie(Xo.MergeEffect,{in:function(C){return C instanceof Xo.MergeNode?this.add(C,0):this.add(new Xo.MergeNode().in(C),0),this}}),Ie([Xo.CompositeEffect,Xo.BlendEffect,Xo.DisplacementMapEffect],{in2:function(C){if(C==null){const o=this.attr("in2");return this.parent()&&this.parent().find(`[result="${o}"]`)[0]||o}return this.attr("in2",C)}}),Xo.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var Ya=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"getDefaultFilter",value:function(o,a){var c=this.w;o.unfilter(!0),new Xo().size("120%","180%","-5%","-40%"),c.config.chart.dropShadow.enabled&&this.dropShadow(o,c.config.chart.dropShadow,a)}},{key:"applyFilter",value:function(o,a,c){var d,m=this,b=this.w;if(o.unfilter(!0),c!=="none"){var w,A,E=b.config.chart.dropShadow,M=c==="lighten"?2:.3;o.filterWith(function(O){O.colorMatrix({type:"matrix",values:`
          `.concat(M,` 0 0 0 0
          0 `).concat(M,` 0 0 0
          0 0 `).concat(M,` 0 0
          0 0 0 1 0
        `),in:"SourceGraphic",result:"brightness"}),E.enabled&&m.addShadow(O,a,E,"brightness")}),!E.noUserSpaceOnUse&&((w=o.filterer())===null||w===void 0||(A=w.node)===null||A===void 0||A.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize((d=o.filterer())===null||d===void 0?void 0:d.node)}else this.getDefaultFilter(o,a)}},{key:"addShadow",value:function(o,a,c,d){var m,b=this.w,w=c.blur,A=c.top,E=c.left,M=c.color,O=c.opacity;if(M=Array.isArray(M)?M[a]:M,((m=b.config.chart.dropShadow.enabledOnSeries)===null||m===void 0?void 0:m.length)>0&&b.config.chart.dropShadow.enabledOnSeries.indexOf(a)===-1)return o;o.offset({in:d,dx:E,dy:A,result:"offset"}),o.gaussianBlur({in:"offset",stdDeviation:w,result:"blur"}),o.flood({"flood-color":M,"flood-opacity":O,result:"flood"}),o.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),o.merge(["shadow",d])}},{key:"dropShadow",value:function(o,a){var c,d,m,b=this,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=this.w;return o.unfilter(!0),oe.isMsEdge()&&A.config.chart.type==="radialBar"||((c=A.config.chart.dropShadow.enabledOnSeries)===null||c===void 0?void 0:c.length)>0&&((m=A.config.chart.dropShadow.enabledOnSeries)===null||m===void 0?void 0:m.indexOf(w))===-1||(o.filterWith(function(E){b.addShadow(E,w,a,"SourceGraphic")}),a.noUserSpaceOnUse||o.filterer().node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize((d=o.filterer())===null||d===void 0?void 0:d.node)),o}},{key:"setSelectionFilter",value:function(o,a,c){var d=this.w;if(d.globals.selectedDataPoints[a]!==void 0&&d.globals.selectedDataPoints[a].indexOf(c)>-1){o.node.setAttribute("selected",!0);var m=d.config.states.active.filter;m!=="none"&&this.applyFilter(o,a,m.type)}}},{key:"_scaleFilterSize",value:function(o){o&&function(a){for(var c in a)a.hasOwnProperty(c)&&o.setAttribute(c,a[c])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),C}(),tn=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"roundPathCorners",value:function(o,a){function c(Pe,ht,P){var W=ht.x-Pe.x,q=ht.y-Pe.y,ue=Math.sqrt(W*W+q*q);return d(Pe,ht,Math.min(1,P/ue))}function d(Pe,ht,P){return{x:Pe.x+(ht.x-Pe.x)*P,y:Pe.y+(ht.y-Pe.y)*P}}function m(Pe,ht){Pe.length>2&&(Pe[Pe.length-2]=ht.x,Pe[Pe.length-1]=ht.y)}function b(Pe){return{x:parseFloat(Pe[Pe.length-2]),y:parseFloat(Pe[Pe.length-1])}}o.indexOf("NaN")>-1&&(o="");var w=o.split(/[,\s]/).reduce(function(Pe,ht){var P=ht.match("([a-zA-Z])(.+)");return P?(Pe.push(P[1]),Pe.push(P[2])):Pe.push(ht),Pe},[]).reduce(function(Pe,ht){return parseFloat(ht)==ht&&Pe.length?Pe[Pe.length-1].push(ht):Pe.push([ht]),Pe},[]),A=[];if(w.length>1){var E=b(w[0]),M=null;w[w.length-1][0]=="Z"&&w[0].length>2&&(M=["L",E.x,E.y],w[w.length-1]=M),A.push(w[0]);for(var O=1;O<w.length;O++){var L=A[A.length-1],$=w[O],Y=$==M?w[1]:w[O+1];if(Y&&L&&L.length>2&&$[0]=="L"&&Y.length>2&&Y[0]=="L"){var U,ne,ae=b(L),le=b($),me=b(Y);U=c(le,ae,a),ne=c(le,me,a),m($,U),$.origPoint=le,A.push($);var Oe=d(U,le,.5),Te=d(le,ne,.5),Ve=["C",Oe.x,Oe.y,Te.x,Te.y,ne.x,ne.y];Ve.origPoint=le,A.push(Ve)}else A.push($)}if(M){var ve=b(A[A.length-1]);A.push(["Z"]),m(A[0],ve)}}else A=w;return A.reduce(function(Pe,ht){return Pe+ht.join(" ")+" "},"")}},{key:"drawLine",value:function(o,a,c,d){var m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,w=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,A=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:o,y1:a,x2:c,y2:d,stroke:m,"stroke-dasharray":b,"stroke-width":w,"stroke-linecap":A})}},{key:"drawRect",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",w=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,A=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,E=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,M=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,O=this.w.globals.dom.Paper.rect();return O.attr({x:o,y:a,width:c>0?c:0,height:d>0?d:0,rx:m,ry:m,opacity:w,"stroke-width":A!==null?A:0,stroke:E!==null?E:"none","stroke-dasharray":M}),O.node.setAttribute("fill",b),O}},{key:"drawPolygon",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(o).attr({fill:d,stroke:a,"stroke-width":c})}},{key:"drawCircle",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;o<0&&(o=0);var c=this.w.globals.dom.Paper.circle(2*o);return a!==null&&c.attr(a),c}},{key:"drawPath",value:function(o){var a=o.d,c=a===void 0?"":a,d=o.stroke,m=d===void 0?"#a8a8a8":d,b=o.strokeWidth,w=b===void 0?1:b,A=o.fill,E=o.fillOpacity,M=E===void 0?1:E,O=o.strokeOpacity,L=O===void 0?1:O,$=o.classes,Y=o.strokeLinecap,U=Y===void 0?null:Y,ne=o.strokeDashArray,ae=ne===void 0?0:ne,le=this.w;return U===null&&(U=le.config.stroke.lineCap),(c.indexOf("undefined")>-1||c.indexOf("NaN")>-1)&&(c="M 0 ".concat(le.globals.gridHeight)),le.globals.dom.Paper.path(c).attr({fill:A,"fill-opacity":M,stroke:m,"stroke-opacity":L,"stroke-linecap":U,"stroke-width":w,"stroke-dasharray":ae,class:$})}},{key:"group",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this.w.globals.dom.Paper.group();return o!==null&&a.attr(o),a}},{key:"move",value:function(o,a){var c=["M",o,a].join(" ");return c}},{key:"line",value:function(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=null;return c===null?d=[" L",o,a].join(" "):c==="H"?d=[" H",o].join(" "):c==="V"&&(d=[" V",a].join(" ")),d}},{key:"curve",value:function(o,a,c,d,m,b){var w=["C",o,a,c,d,m,b].join(" ");return w}},{key:"quadraticCurve",value:function(o,a,c,d){return["Q",o,a,c,d].join(" ")}},{key:"arc",value:function(o,a,c,d,m,b,w){var A="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(A="a");var E=[A,o,a,c,d,m,b,w].join(" ");return E}},{key:"renderPaths",value:function(o){var a,c=o.j,d=o.realIndex,m=o.pathFrom,b=o.pathTo,w=o.stroke,A=o.strokeWidth,E=o.strokeLinecap,M=o.fill,O=o.animationDelay,L=o.initialSpeed,$=o.dataChangeSpeed,Y=o.className,U=o.chartType,ne=o.shouldClipToGrid,ae=ne===void 0||ne,le=o.bindEventsOnPaths,me=le===void 0||le,Oe=o.drawShadow,Te=Oe===void 0||Oe,Ve=this.w,ve=new Ya(this.ctx),Pe=new Wt(this.ctx),ht=this.w.config.chart.animations.enabled,P=ht&&this.w.config.chart.animations.dynamicAnimation.enabled,W=!!(ht&&!Ve.globals.resized||P&&Ve.globals.dataChanged&&Ve.globals.shouldAnimate);W?a=m:(a=b,Ve.globals.animationEnded=!0);var q=Ve.config.stroke.dashArray,ue=0;ue=Array.isArray(q)?q[d]:Ve.config.stroke.dashArray;var ye=this.drawPath({d:a,stroke:w,strokeWidth:A,fill:M,fillOpacity:1,classes:Y,strokeLinecap:E,strokeDashArray:ue});ye.attr("index",d),ae&&(U==="bar"&&!Ve.globals.isHorizontal||Ve.globals.comboCharts?ye.attr({"clip-path":"url(#gridRectBarMask".concat(Ve.globals.cuid,")")}):ye.attr({"clip-path":"url(#gridRectMask".concat(Ve.globals.cuid,")")})),Ve.config.chart.dropShadow.enabled&&Te&&ve.dropShadow(ye,Ve.config.chart.dropShadow,d),me&&(ye.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,ye)),ye.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,ye)),ye.node.addEventListener("mousedown",this.pathMouseDown.bind(this,ye))),ye.attr({pathTo:b,pathFrom:m});var nt={el:ye,j:c,realIndex:d,pathFrom:m,pathTo:b,fill:M,strokeWidth:A,delay:O};return!ht||Ve.globals.resized||Ve.globals.dataChanged?!Ve.globals.resized&&Ve.globals.dataChanged||Pe.showDelayedElements():Pe.animatePathsGradually(Tt(Tt({},nt),{},{speed:L})),Ve.globals.dataChanged&&P&&W&&Pe.animatePathsGradually(Tt(Tt({},nt),{},{speed:$})),ye}},{key:"drawPattern",value:function(o,a,c){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(a,c,function(b){o==="horizontalLines"?b.line(0,0,c,0).stroke({color:d,width:m+1}):o==="verticalLines"?b.line(0,0,0,a).stroke({color:d,width:m+1}):o==="slantedLines"?b.line(0,0,a,c).stroke({color:d,width:m}):o==="squares"?b.rect(a,c).fill("none").stroke({color:d,width:m}):o==="circles"&&b.circle(a).fill("none").stroke({color:d,width:m})})}},{key:"drawGradient",value:function(o,a,c,d,m){var b,w=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,A=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,E=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],M=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,O=this.w;a.length<9&&a.indexOf("#")===0&&(a=oe.hexToRgba(a,d)),c.length<9&&c.indexOf("#")===0&&(c=oe.hexToRgba(c,m));var L=0,$=1,Y=1,U=null;A!==null&&(L=A[0]!==void 0?A[0]/100:0,$=A[1]!==void 0?A[1]/100:1,Y=A[2]!==void 0?A[2]/100:1,U=A[3]!==void 0?A[3]/100:null);var ne=!(O.config.chart.type!=="donut"&&O.config.chart.type!=="pie"&&O.config.chart.type!=="polarArea"&&O.config.chart.type!=="bubble");if(b=E&&E.length!==0?O.globals.dom.Paper.gradient(ne?"radial":"linear",function(me){(Array.isArray(E[M])?E[M]:E).forEach(function(Oe){me.stop(Oe.offset/100,Oe.color,Oe.opacity)})}):O.globals.dom.Paper.gradient(ne?"radial":"linear",function(me){me.stop(L,a,d),me.stop($,c,m),me.stop(Y,c,m),U!==null&&me.stop(U,a,d)}),ne){var ae=O.globals.gridWidth/2,le=O.globals.gridHeight/2;O.config.chart.type!=="bubble"?b.attr({gradientUnits:"userSpaceOnUse",cx:ae,cy:le,r:w}):b.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else o==="vertical"?b.from(0,0).to(0,1):o==="diagonal"?b.from(0,0).to(1,1):o==="horizontal"?b.from(0,1).to(1,1):o==="diagonal2"&&b.from(1,0).to(0,1);return b}},{key:"getTextBasedOnMaxWidth",value:function(o){var a=o.text,c=o.maxWidth,d=o.fontSize,m=o.fontFamily,b=this.getTextRects(a,d,m),w=b.width/a.length,A=Math.floor(c/w);return c<b.width?a.slice(0,A-3)+"...":a}},{key:"drawText",value:function(o){var a=this,c=o.x,d=o.y,m=o.text,b=o.textAnchor,w=o.fontSize,A=o.fontFamily,E=o.fontWeight,M=o.foreColor,O=o.opacity,L=o.maxWidth,$=o.cssClass,Y=$===void 0?"":$,U=o.isPlainText,ne=U===void 0||U,ae=o.dominantBaseline,le=ae===void 0?"auto":ae,me=this.w;m===void 0&&(m="");var Oe=m;b||(b="start"),M&&M.length||(M=me.config.chart.foreColor),A=A||me.config.chart.fontFamily,E=E||"regular";var Te,Ve={maxWidth:L,fontSize:w=w||"11px",fontFamily:A};return Array.isArray(m)?Te=me.globals.dom.Paper.text(function(ve){for(var Pe=0;Pe<m.length;Pe++)Oe=m[Pe],L&&(Oe=a.getTextBasedOnMaxWidth(Tt({text:m[Pe]},Ve))),Pe===0?ve.tspan(Oe):ve.tspan(Oe).newLine()}):(L&&(Oe=this.getTextBasedOnMaxWidth(Tt({text:m},Ve))),Te=ne?me.globals.dom.Paper.plain(m):me.globals.dom.Paper.text(function(ve){return ve.tspan(Oe)})),Te.attr({x:c,y:d,"text-anchor":b,"dominant-baseline":le,"font-size":w,"font-family":A,"font-weight":E,fill:M,class:"apexcharts-text "+Y}),Te.node.style.fontFamily=A,Te.node.style.opacity=O,Te}},{key:"getMarkerPath",value:function(o,a,c,d){var m="";switch(c){case"cross":m="M ".concat(o-(d/=1.4)," ").concat(a-d," L ").concat(o+d," ").concat(a+d,"  M ").concat(o-d," ").concat(a+d," L ").concat(o+d," ").concat(a-d);break;case"plus":m="M ".concat(o-(d/=1.12)," ").concat(a," L ").concat(o+d," ").concat(a,"  M ").concat(o," ").concat(a-d," L ").concat(o," ").concat(a+d);break;case"star":case"sparkle":var b=5;d*=1.15,c==="sparkle"&&(d/=1.1,b=4);for(var w=Math.PI/b,A=0;A<=2*b;A++){var E=A*w,M=A%2==0?d:d/2;m+=(A===0?"M":"L")+(o+M*Math.sin(E))+","+(a-M*Math.cos(E))}m+="Z";break;case"triangle":m="M ".concat(o," ").concat(a-d,` 
             L `).concat(o+d," ").concat(a+d,` 
             L `).concat(o-d," ").concat(a+d,` 
             Z`);break;case"square":case"rect":m="M ".concat(o-(d/=1.125)," ").concat(a-d,` 
           L `).concat(o+d," ").concat(a-d,` 
           L `).concat(o+d," ").concat(a+d,` 
           L `).concat(o-d," ").concat(a+d,` 
           Z`);break;case"diamond":d*=1.05,m="M ".concat(o," ").concat(a-d,` 
             L `).concat(o+d," ").concat(a,` 
             L `).concat(o," ").concat(a+d,` 
             L `).concat(o-d," ").concat(a,` 
            Z`);break;case"line":m="M ".concat(o-(d/=1.1)," ").concat(a,` 
           L `).concat(o+d," ").concat(a);break;default:d*=2,m="M ".concat(o,", ").concat(a,` 
           m -`).concat(d/2,`, 0 
           a `).concat(d/2,",").concat(d/2," 0 1,0 ").concat(d,`,0 
           a `).concat(d/2,",").concat(d/2," 0 1,0 -").concat(d,",0")}return m}},{key:"drawMarkerShape",value:function(o,a,c,d,m){var b=this.drawPath({d:this.getMarkerPath(o,a,c,d,m),stroke:m.pointStrokeColor,strokeDashArray:m.pointStrokeDashArray,strokeWidth:m.pointStrokeWidth,fill:m.pointFillColor,fillOpacity:m.pointFillOpacity,strokeOpacity:m.pointStrokeOpacity});return b.attr({cx:o,cy:a,shape:m.shape,class:m.class?m.class:""}),b}},{key:"drawMarker",value:function(o,a,c){o=o||0;var d=c.pSize||0;return oe.isNumber(a)||(d=0,a=0),this.drawMarkerShape(o,a,c==null?void 0:c.shape,d,Tt(Tt({},c),c.shape==="line"||c.shape==="plus"||c.shape==="cross"?{pointStrokeColor:c.pointFillColor,pointStrokeOpacity:c.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(o,a){var c=this.w,d=new Ya(this.ctx),m=parseInt(o.node.getAttribute("index"),10),b=parseInt(o.node.getAttribute("j"),10);if(typeof c.config.chart.events.dataPointMouseEnter=="function"&&c.config.chart.events.dataPointMouseEnter(a,this.ctx,{seriesIndex:m,dataPointIndex:b,w:c}),this.ctx.events.fireEvent("dataPointMouseEnter",[a,this.ctx,{seriesIndex:m,dataPointIndex:b,w:c}]),(c.config.states.active.filter.type==="none"||o.node.getAttribute("selected")!=="true")&&c.config.states.hover.filter.type!=="none"&&!c.globals.isTouchDevice){var w=c.config.states.hover.filter;d.applyFilter(o,m,w.type)}}},{key:"pathMouseLeave",value:function(o,a){var c=this.w,d=new Ya(this.ctx),m=parseInt(o.node.getAttribute("index"),10),b=parseInt(o.node.getAttribute("j"),10);typeof c.config.chart.events.dataPointMouseLeave=="function"&&c.config.chart.events.dataPointMouseLeave(a,this.ctx,{seriesIndex:m,dataPointIndex:b,w:c}),this.ctx.events.fireEvent("dataPointMouseLeave",[a,this.ctx,{seriesIndex:m,dataPointIndex:b,w:c}]),c.config.states.active.filter.type!=="none"&&o.node.getAttribute("selected")==="true"||c.config.states.hover.filter.type!=="none"&&d.getDefaultFilter(o,m)}},{key:"pathMouseDown",value:function(o,a){var c=this.w,d=new Ya(this.ctx),m=parseInt(o.node.getAttribute("index"),10),b=parseInt(o.node.getAttribute("j"),10),w="false";if(o.node.getAttribute("selected")==="true"){if(o.node.setAttribute("selected","false"),c.globals.selectedDataPoints[m].indexOf(b)>-1){var A=c.globals.selectedDataPoints[m].indexOf(b);c.globals.selectedDataPoints[m].splice(A,1)}}else{if(!c.config.states.active.allowMultipleDataPointsSelection&&c.globals.selectedDataPoints.length>0){c.globals.selectedDataPoints=[];var E=c.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),M=c.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),O=function(Y){Array.prototype.forEach.call(Y,function(U){U.node.setAttribute("selected","false"),d.getDefaultFilter(U,m)})};O(E),O(M)}o.node.setAttribute("selected","true"),w="true",c.globals.selectedDataPoints[m]===void 0&&(c.globals.selectedDataPoints[m]=[]),c.globals.selectedDataPoints[m].push(b)}if(w==="true"){var L=c.config.states.active.filter;if(L!=="none")d.applyFilter(o,m,L.type);else if(c.config.states.hover.filter!=="none"&&!c.globals.isTouchDevice){var $=c.config.states.hover.filter;d.applyFilter(o,m,$.type)}}else c.config.states.active.filter.type!=="none"&&(c.config.states.hover.filter.type==="none"||c.globals.isTouchDevice?d.getDefaultFilter(o,m):($=c.config.states.hover.filter,d.applyFilter(o,m,$.type)));typeof c.config.chart.events.dataPointSelection=="function"&&c.config.chart.events.dataPointSelection(a,this.ctx,{selectedDataPoints:c.globals.selectedDataPoints,seriesIndex:m,dataPointIndex:b,w:c}),a&&this.ctx.events.fireEvent("dataPointSelection",[a,this.ctx,{selectedDataPoints:c.globals.selectedDataPoints,seriesIndex:m,dataPointIndex:b,w:c}])}},{key:"rotateAroundCenter",value:function(o){var a={};return o&&typeof o.getBBox=="function"&&(a=o.getBBox()),{x:a.x+a.width/2,y:a.y+a.height/2}}},{key:"getTextRects",value:function(o,a,c,d){var m=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],b=this.w,w=this.drawText({x:-200,y:-200,text:o,textAnchor:"start",fontSize:a,fontFamily:c,foreColor:"#fff",opacity:0});d&&w.attr("transform",d),b.globals.dom.Paper.add(w);var A=w.bbox();return m||(A=w.node.getBoundingClientRect()),w.remove(),{width:A.width,height:A.height}}},{key:"placeTextWithEllipsis",value:function(o,a,c){if(typeof o.getComputedTextLength=="function"&&(o.textContent=a,a.length>0&&o.getComputedTextLength()>=c/1.1)){for(var d=a.length-3;d>0;d-=3)if(o.getSubStringLength(0,d)<=c/1.1)return void(o.textContent=a.substring(0,d)+"...");o.textContent="."}}}],[{key:"setAttrs",value:function(o,a){for(var c in a)a.hasOwnProperty(c)&&o.setAttribute(c,a[c])}}]),C}(),bs=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"getStackedSeriesTotals",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=this.w,c=[];if(a.globals.series.length===0)return c;for(var d=0;d<a.globals.series[a.globals.maxValsInArrayIndex].length;d++){for(var m=0,b=0;b<a.globals.series.length;b++)a.globals.series[b][d]!==void 0&&o.indexOf(b)===-1&&(m+=a.globals.series[b][d]);c.push(m)}return c}},{key:"getSeriesTotalByIndex",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return o===null?this.w.config.series.reduce(function(a,c){return a+c},0):this.w.globals.series[o].reduce(function(a,c){return a+c},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var o=this,a=this.w,c=[];return a.globals.seriesGroups.forEach(function(d){var m=[];a.config.series.forEach(function(w,A){d.indexOf(a.globals.seriesNames[A])>-1&&m.push(A)});var b=a.globals.series.map(function(w,A){return m.indexOf(A)===-1?A:-1}).filter(function(w){return w!==-1});c.push(o.getStackedSeriesTotals(b))}),c}},{key:"setSeriesYAxisMappings",value:function(){var o=this.w.globals,a=this.w.config,c=[],d=[],m=[],b=o.series.length>a.yaxis.length||a.yaxis.some(function(O){return Array.isArray(O.seriesName)});a.series.forEach(function(O,L){m.push(L),d.push(null)}),a.yaxis.forEach(function(O,L){c[L]=[]});var w=[];a.yaxis.forEach(function(O,L){var $=!1;if(O.seriesName){var Y=[];Array.isArray(O.seriesName)?Y=O.seriesName:Y.push(O.seriesName),Y.forEach(function(U){a.series.forEach(function(ne,ae){if(ne.name===U){var le=ae;L===ae||b?!b||m.indexOf(ae)>-1?c[L].push([L,ae]):console.warn("Series '"+ne.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(c[ae].push([ae,L]),le=L),$=!0,(le=m.indexOf(le))!==-1&&m.splice(le,1)}})})}$||w.push(L)}),c=c.map(function(O,L){var $=[];return O.forEach(function(Y){d[Y[1]]=Y[0],$.push(Y[1])}),$});for(var A=a.yaxis.length-1,E=0;E<w.length&&(A=w[E],c[A]=[],m);E++){var M=m[0];m.shift(),c[A].push(M),d[M]=A}m.forEach(function(O){c[A].push(O),d[O]=A}),o.seriesYAxisMap=c.map(function(O){return O}),o.seriesYAxisReverseMap=d.map(function(O){return O}),o.seriesYAxisMap.forEach(function(O,L){O.forEach(function($){a.series[$]&&a.series[$].group===void 0&&(a.series[$].group="apexcharts-axis-".concat(L.toString()))})})}},{key:"isSeriesNull",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(o===null?this.w.config.series.filter(function(a){return a!==null}):this.w.config.series[o].data.filter(function(a){return a!==null})).length===0}},{key:"seriesHaveSameValues",value:function(o){return this.w.globals.series[o].every(function(a,c,d){return a===d[0]})}},{key:"getCategoryLabels",value:function(o){var a=this.w,c=o.slice();return a.config.xaxis.convertedCatToNumeric&&(c=o.map(function(d,m){return a.config.xaxis.labels.formatter(d-a.globals.minX+1)})),c}},{key:"getLargestSeries",value:function(){var o=this.w;o.globals.maxValsInArrayIndex=o.globals.series.map(function(a){return a.length}).indexOf(Math.max.apply(Math,o.globals.series.map(function(a){return a.length})))}},{key:"getLargestMarkerSize",value:function(){var o=this.w,a=0;return o.globals.markers.size.forEach(function(c){a=Math.max(a,c)}),o.config.markers.discrete&&o.config.markers.discrete.length&&o.config.markers.discrete.forEach(function(c){a=Math.max(a,c.size)}),a>0&&(o.config.markers.hover.size>0?a=o.config.markers.hover.size:a+=o.config.markers.hover.sizeOffset),o.globals.markers.largestSize=a,a}},{key:"getSeriesTotals",value:function(){var o=this.w;o.globals.seriesTotals=o.globals.series.map(function(a,c){var d=0;if(Array.isArray(a))for(var m=0;m<a.length;m++)d+=a[m];else d+=a;return d})}},{key:"getSeriesTotalsXRange",value:function(o,a){var c=this.w;return c.globals.series.map(function(d,m){for(var b=0,w=0;w<d.length;w++)c.globals.seriesX[m][w]>o&&c.globals.seriesX[m][w]<a&&(b+=d[w]);return b})}},{key:"getPercentSeries",value:function(){var o=this.w;o.globals.seriesPercent=o.globals.series.map(function(a,c){var d=[];if(Array.isArray(a))for(var m=0;m<a.length;m++){var b=o.globals.stackedSeriesTotals[m],w=0;b&&(w=100*a[m]/b),d.push(w)}else{var A=100*a/o.globals.seriesTotals.reduce(function(E,M){return E+M},0);d.push(A)}return d})}},{key:"getCalculatedRatios",value:function(){var o,a,c,d=this,m=this.w,b=m.globals,w=[],A=0,E=[],M=.1,O=0;if(b.yRange=[],b.isMultipleYAxis)for(var L=0;L<b.minYArr.length;L++)b.yRange.push(Math.abs(b.minYArr[L]-b.maxYArr[L])),E.push(0);else b.yRange.push(Math.abs(b.minY-b.maxY));b.xRange=Math.abs(b.maxX-b.minX),b.zRange=Math.abs(b.maxZ-b.minZ);for(var $=0;$<b.yRange.length;$++)w.push(b.yRange[$]/b.gridHeight);if(a=b.xRange/b.gridWidth,o=b.yRange/b.gridWidth,c=b.xRange/b.gridHeight,(A=b.zRange/b.gridHeight*16)||(A=1),b.minY!==Number.MIN_VALUE&&Math.abs(b.minY)!==0&&(b.hasNegs=!0),m.globals.seriesYAxisReverseMap.length>0){var Y=function(ne,ae){var le=m.config.yaxis[m.globals.seriesYAxisReverseMap[ae]],me=ne<0?-1:1;return ne=Math.abs(ne),le.logarithmic&&(ne=d.getBaseLog(le.logBase,ne)),-me*ne/w[ae]};if(b.isMultipleYAxis){E=[];for(var U=0;U<w.length;U++)E.push(Y(b.minYArr[U],U))}else(E=[]).push(Y(b.minY,0)),b.minY!==Number.MIN_VALUE&&Math.abs(b.minY)!==0&&(M=-b.minY/o,O=b.minX/a)}else(E=[]).push(0),M=0,O=0;return{yRatio:w,invertedYRatio:o,zRatio:A,xRatio:a,invertedXRatio:c,baseLineInvertedY:M,baseLineY:E,baseLineX:O}}},{key:"getLogSeries",value:function(o){var a=this,c=this.w;return c.globals.seriesLog=o.map(function(d,m){var b=c.globals.seriesYAxisReverseMap[m];return c.config.yaxis[b]&&c.config.yaxis[b].logarithmic?d.map(function(w){return w===null?null:a.getLogVal(c.config.yaxis[b].logBase,w,m)}):d}),c.globals.invalidLogScale?o:c.globals.seriesLog}},{key:"getBaseLog",value:function(o,a){return Math.log(a)/Math.log(o)}},{key:"getLogVal",value:function(o,a,c){if(a<=0)return 0;var d=this.w,m=d.globals.minYArr[c]===0?-1:this.getBaseLog(o,d.globals.minYArr[c]),b=(d.globals.maxYArr[c]===0?0:this.getBaseLog(o,d.globals.maxYArr[c]))-m;return a<1?a/b:(this.getBaseLog(o,a)-m)/b}},{key:"getLogYRatios",value:function(o){var a=this,c=this.w,d=this.w.globals;return d.yLogRatio=o.slice(),d.logYRange=d.yRange.map(function(m,b){var w=c.globals.seriesYAxisReverseMap[b];if(c.config.yaxis[w]&&a.w.config.yaxis[w].logarithmic){var A,E=-Number.MAX_VALUE,M=Number.MIN_VALUE;return d.seriesLog.forEach(function(O,L){O.forEach(function($){c.config.yaxis[L]&&c.config.yaxis[L].logarithmic&&(E=Math.max($,E),M=Math.min($,M))})}),A=Math.pow(d.yRange[b],Math.abs(M-E)/d.yRange[b]),d.yLogRatio[b]=A/d.gridHeight,A}}),d.invalidLogScale?o.slice():d.yLogRatio}},{key:"drawSeriesByGroup",value:function(o,a,c,d){var m=this.w,b=[];return o.series.length>0&&a.forEach(function(w){var A=[],E=[];o.i.forEach(function(M,O){m.config.series[M].group===w&&(A.push(o.series[O]),E.push(M))}),A.length>0&&b.push(d.draw(A,c,E))}),b}}],[{key:"checkComboSeries",value:function(o,a){var c=!1,d=0,m=0;return a===void 0&&(a="line"),o.length&&o[0].type!==void 0&&o.forEach(function(b){b.type!=="bar"&&b.type!=="column"&&b.type!=="candlestick"&&b.type!=="boxPlot"||d++,b.type!==void 0&&b.type!==a&&m++}),m>0&&(c=!0),{comboBarCount:d,comboCharts:c}}},{key:"extendArrayProps",value:function(o,a,c){var d,m,b,w,A,E;return(d=a)!==null&&d!==void 0&&d.yaxis&&(a=o.extendYAxis(a,c)),(m=a)!==null&&m!==void 0&&m.annotations&&(a.annotations.yaxis&&(a=o.extendYAxisAnnotations(a)),(b=a)!==null&&b!==void 0&&(w=b.annotations)!==null&&w!==void 0&&w.xaxis&&(a=o.extendXAxisAnnotations(a)),(A=a)!==null&&A!==void 0&&(E=A.annotations)!==null&&E!==void 0&&E.points&&(a=o.extendPointAnnotations(a))),a}}]),C}(),Gi=function(){function C(o){gn(this,C),this.w=o.w,this.annoCtx=o}return rn(C,[{key:"setOrientations",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=this.w;if(o.label.orientation==="vertical"){var d=a!==null?a:0,m=c.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(d,"']"));if(m!==null){var b=m.getBoundingClientRect();m.setAttribute("x",parseFloat(m.getAttribute("x"))-b.height+4);var w=o.label.position==="top"?b.width:-b.width;m.setAttribute("y",parseFloat(m.getAttribute("y"))+w);var A=this.annoCtx.graphics.rotateAroundCenter(m),E=A.x,M=A.y;m.setAttribute("transform","rotate(-90 ".concat(E," ").concat(M,")"))}}}},{key:"addBackgroundToAnno",value:function(o,a){var c=this.w;if(!o||!a.label.text||!String(a.label.text).trim())return null;var d=c.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),m=o.getBoundingClientRect(),b=a.label.style.padding,w=b.left,A=b.right,E=b.top,M=b.bottom;if(a.label.orientation==="vertical"){var O=[w,A,E,M];E=O[0],M=O[1],w=O[2],A=O[3]}var L=m.left-d.left-w,$=m.top-d.top-E,Y=this.annoCtx.graphics.drawRect(L-c.globals.barPadForNumericAxis,$,m.width+w+A,m.height+E+M,a.label.borderRadius,a.label.style.background,1,a.label.borderWidth,a.label.borderColor,0);return a.id&&Y.node.classList.add(a.id),Y}},{key:"annotationsBackground",value:function(){var o=this,a=this.w,c=function(d,m,b){var w=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(b,"-annotations .apexcharts-").concat(b,"-annotation-label[rel='").concat(m,"']"));if(w){var A=w.parentNode,E=o.addBackgroundToAnno(w,d);E&&(A.insertBefore(E.node,w),d.label.mouseEnter&&E.node.addEventListener("mouseenter",d.label.mouseEnter.bind(o,d)),d.label.mouseLeave&&E.node.addEventListener("mouseleave",d.label.mouseLeave.bind(o,d)),d.label.click&&E.node.addEventListener("click",d.label.click.bind(o,d)))}};a.config.annotations.xaxis.forEach(function(d,m){return c(d,m,"xaxis")}),a.config.annotations.yaxis.forEach(function(d,m){return c(d,m,"yaxis")}),a.config.annotations.points.forEach(function(d,m){return c(d,m,"point")})}},{key:"getY1Y2",value:function(o,a){var c,d=this.w,m=o==="y1"?a.y:a.y2,b=!1;if(this.annoCtx.invertAxis){var w=d.config.xaxis.convertedCatToNumeric?d.globals.categoryLabels:d.globals.labels,A=w.indexOf(m),E=d.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(A+1,")"));c=E?parseFloat(E.getAttribute("y")):(d.globals.gridHeight/w.length-1)*(A+1)-d.globals.barHeight,a.seriesIndex!==void 0&&d.globals.barHeight&&(c-=d.globals.barHeight/2*(d.globals.series.length-1)-d.globals.barHeight*a.seriesIndex)}else{var M,O=d.globals.seriesYAxisMap[a.yAxisIndex][0],L=d.config.yaxis[a.yAxisIndex].logarithmic?new bs(this.annoCtx.ctx).getLogVal(d.config.yaxis[a.yAxisIndex].logBase,m,O)/d.globals.yLogRatio[O]:(m-d.globals.minYArr[O])/(d.globals.yRange[O]/d.globals.gridHeight);c=d.globals.gridHeight-Math.min(Math.max(L,0),d.globals.gridHeight),b=L>d.globals.gridHeight||L<0,!a.marker||a.y!==void 0&&a.y!==null||(c=0),(M=d.config.yaxis[a.yAxisIndex])!==null&&M!==void 0&&M.reversed&&(c=L)}return typeof m=="string"&&m.includes("px")&&(c=parseFloat(m)),{yP:c,clipped:b}}},{key:"getX1X2",value:function(o,a){var c=this.w,d=o==="x1"?a.x:a.x2,m=this.annoCtx.invertAxis?c.globals.minY:c.globals.minX,b=this.annoCtx.invertAxis?c.globals.maxY:c.globals.maxX,w=this.annoCtx.invertAxis?c.globals.yRange[0]:c.globals.xRange,A=!1,E=this.annoCtx.inversedReversedAxis?(b-d)/(w/c.globals.gridWidth):(d-m)/(w/c.globals.gridWidth);return c.config.xaxis.type!=="category"&&!c.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||c.globals.dataFormatXNumeric||c.config.chart.sparkline.enabled||(E=this.getStringX(d)),typeof d=="string"&&d.includes("px")&&(E=parseFloat(d)),d==null&&a.marker&&(E=c.globals.gridWidth),a.seriesIndex!==void 0&&c.globals.barWidth&&!this.annoCtx.invertAxis&&(E-=c.globals.barWidth/2*(c.globals.series.length-1)-c.globals.barWidth*a.seriesIndex),E>c.globals.gridWidth?(E=c.globals.gridWidth,A=!0):E<0&&(E=0,A=!0),{x:E,clipped:A}}},{key:"getStringX",value:function(o){var a=this.w,c=o;a.config.xaxis.convertedCatToNumeric&&a.globals.categoryLabels.length&&(o=a.globals.categoryLabels.indexOf(o)+1);var d=a.globals.labels.map(function(b){return Array.isArray(b)?b.join(" "):b}).indexOf(o),m=a.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(d+1,")"));return m&&(c=parseFloat(m.getAttribute("x"))),c}}]),C}(),Pi=function(){function C(o){gn(this,C),this.w=o.w,this.annoCtx=o,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Gi(this.annoCtx)}return rn(C,[{key:"addXaxisAnnotation",value:function(o,a,c){var d,m=this.w,b=this.helpers.getX1X2("x1",o),w=b.x,A=b.clipped,E=!0,M=o.label.text,O=o.strokeDashArray;if(oe.isNumber(w)){if(o.x2===null||o.x2===void 0){if(!A){var L=this.annoCtx.graphics.drawLine(w+o.offsetX,0+o.offsetY,w+o.offsetX,m.globals.gridHeight+o.offsetY,o.borderColor,O,o.borderWidth);a.appendChild(L.node),o.id&&L.node.classList.add(o.id)}}else{var $=this.helpers.getX1X2("x2",o);if(d=$.x,E=$.clipped,!A||!E){if(d<w){var Y=w;w=d,d=Y}var U=this.annoCtx.graphics.drawRect(w+o.offsetX,0+o.offsetY,d-w,m.globals.gridHeight+o.offsetY,0,o.fillColor,o.opacity,1,o.borderColor,O);U.node.classList.add("apexcharts-annotation-rect"),U.attr("clip-path","url(#gridRectMask".concat(m.globals.cuid,")")),a.appendChild(U.node),o.id&&U.node.classList.add(o.id)}}if(!A||!E){var ne=this.annoCtx.graphics.getTextRects(M,parseFloat(o.label.style.fontSize)),ae=o.label.position==="top"?4:o.label.position==="center"?m.globals.gridHeight/2+(o.label.orientation==="vertical"?ne.width/2:0):m.globals.gridHeight,le=this.annoCtx.graphics.drawText({x:w+o.label.offsetX,y:ae+o.label.offsetY-(o.label.orientation==="vertical"?o.label.position==="top"?ne.width/2-12:-ne.width/2:0),text:M,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});le.attr({rel:c}),a.appendChild(le.node),this.annoCtx.helpers.setOrientations(o,c)}}}},{key:"drawXAxisAnnotations",value:function(){var o=this,a=this.w,c=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return a.config.annotations.xaxis.map(function(d,m){o.addXaxisAnnotation(d,c.node,m)}),c}}]),C}(),ja=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return rn(C,[{key:"isValidDate",value:function(o){return typeof o!="number"&&!isNaN(this.parseDate(o))}},{key:"getTimeStamp",value:function(o){return Date.parse(o)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(o).toISOString().substr(0,25)).getTime():new Date(o).getTime():o}},{key:"getDate",value:function(o){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(o).toUTCString()):new Date(o)}},{key:"parseDate",value:function(o){var a=Date.parse(o);if(!isNaN(a))return this.getTimeStamp(o);var c=Date.parse(o.replace(/-/g,"/").replace(/[a-z]+/gi," "));return c=this.getTimeStamp(c)}},{key:"parseDateWithTimezone",value:function(o){return Date.parse(o.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(o,a){var c=this.w.globals.locale,d=this.w.config.xaxis.labels.datetimeUTC,m=["\0"].concat(vn(c.months)),b=[""].concat(vn(c.shortMonths)),w=[""].concat(vn(c.days)),A=[""].concat(vn(c.shortDays));function E(Pe,ht){var P=Pe+"";for(ht=ht||2;P.length<ht;)P="0"+P;return P}var M=d?o.getUTCFullYear():o.getFullYear();a=(a=(a=a.replace(/(^|[^\\])yyyy+/g,"$1"+M)).replace(/(^|[^\\])yy/g,"$1"+M.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+M);var O=(d?o.getUTCMonth():o.getMonth())+1;a=(a=(a=(a=a.replace(/(^|[^\\])MMMM+/g,"$1"+m[0])).replace(/(^|[^\\])MMM/g,"$1"+b[0])).replace(/(^|[^\\])MM/g,"$1"+E(O))).replace(/(^|[^\\])M/g,"$1"+O);var L=d?o.getUTCDate():o.getDate();a=(a=(a=(a=a.replace(/(^|[^\\])dddd+/g,"$1"+w[0])).replace(/(^|[^\\])ddd/g,"$1"+A[0])).replace(/(^|[^\\])dd/g,"$1"+E(L))).replace(/(^|[^\\])d/g,"$1"+L);var $=d?o.getUTCHours():o.getHours(),Y=$>12?$-12:$===0?12:$;a=(a=(a=(a=a.replace(/(^|[^\\])HH+/g,"$1"+E($))).replace(/(^|[^\\])H/g,"$1"+$)).replace(/(^|[^\\])hh+/g,"$1"+E(Y))).replace(/(^|[^\\])h/g,"$1"+Y);var U=d?o.getUTCMinutes():o.getMinutes();a=(a=a.replace(/(^|[^\\])mm+/g,"$1"+E(U))).replace(/(^|[^\\])m/g,"$1"+U);var ne=d?o.getUTCSeconds():o.getSeconds();a=(a=a.replace(/(^|[^\\])ss+/g,"$1"+E(ne))).replace(/(^|[^\\])s/g,"$1"+ne);var ae=d?o.getUTCMilliseconds():o.getMilliseconds();a=a.replace(/(^|[^\\])fff+/g,"$1"+E(ae,3)),ae=Math.round(ae/10),a=a.replace(/(^|[^\\])ff/g,"$1"+E(ae)),ae=Math.round(ae/10);var le=$<12?"AM":"PM";a=(a=(a=a.replace(/(^|[^\\])f/g,"$1"+ae)).replace(/(^|[^\\])TT+/g,"$1"+le)).replace(/(^|[^\\])T/g,"$1"+le.charAt(0));var me=le.toLowerCase();a=(a=a.replace(/(^|[^\\])tt+/g,"$1"+me)).replace(/(^|[^\\])t/g,"$1"+me.charAt(0));var Oe=-o.getTimezoneOffset(),Te=d||!Oe?"Z":Oe>0?"+":"-";if(!d){var Ve=(Oe=Math.abs(Oe))%60;Te+=E(Math.floor(Oe/60))+":"+E(Ve)}a=a.replace(/(^|[^\\])K/g,"$1"+Te);var ve=(d?o.getUTCDay():o.getDay())+1;return a=(a=(a=(a=(a=a.replace(new RegExp(w[0],"g"),w[ve])).replace(new RegExp(A[0],"g"),A[ve])).replace(new RegExp(m[0],"g"),m[O])).replace(new RegExp(b[0],"g"),b[O])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(o,a,c){var d=this.w;d.config.xaxis.min!==void 0&&(o=d.config.xaxis.min),d.config.xaxis.max!==void 0&&(a=d.config.xaxis.max);var m=this.getDate(o),b=this.getDate(a),w=this.formatDate(m,"yyyy MM dd HH mm ss fff").split(" "),A=this.formatDate(b,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(w[6],10),maxMillisecond:parseInt(A[6],10),minSecond:parseInt(w[5],10),maxSecond:parseInt(A[5],10),minMinute:parseInt(w[4],10),maxMinute:parseInt(A[4],10),minHour:parseInt(w[3],10),maxHour:parseInt(A[3],10),minDate:parseInt(w[2],10),maxDate:parseInt(A[2],10),minMonth:parseInt(w[1],10)-1,maxMonth:parseInt(A[1],10)-1,minYear:parseInt(w[0],10),maxYear:parseInt(A[0],10)}}},{key:"isLeapYear",value:function(o){return o%4==0&&o%100!=0||o%400==0}},{key:"calculcateLastDaysOfMonth",value:function(o,a,c){return this.determineDaysOfMonths(o,a)-c}},{key:"determineDaysOfYear",value:function(o){var a=365;return this.isLeapYear(o)&&(a=366),a}},{key:"determineRemainingDaysOfYear",value:function(o,a,c){var d=this.daysCntOfYear[a]+c;return a>1&&this.isLeapYear()&&d++,d}},{key:"determineDaysOfMonths",value:function(o,a){var c=30;switch(o=oe.monthMod(o),!0){case this.months30.indexOf(o)>-1:o===2&&(c=this.isLeapYear(a)?29:28);break;case this.months31.indexOf(o)>-1:default:c=31}return c}}]),C}(),pe=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.tooltipKeyFormat="dd MMM"}return rn(C,[{key:"xLabelFormat",value:function(o,a,c,d){var m=this.w;if(m.config.xaxis.type==="datetime"&&m.config.xaxis.labels.formatter===void 0&&m.config.tooltip.x.formatter===void 0){var b=new ja(this.ctx);return b.formatDate(b.getDate(a),m.config.tooltip.x.format)}return o(a,c,d)}},{key:"defaultGeneralFormatter",value:function(o){return Array.isArray(o)?o.map(function(a){return a}):o}},{key:"defaultYFormatter",value:function(o,a,c){var d=this.w;if(oe.isNumber(o))if(d.globals.yValueDecimal!==0)o=o.toFixed(a.decimalsInFloat!==void 0?a.decimalsInFloat:d.globals.yValueDecimal);else{var m=o.toFixed(0);o=o==m?m:o.toFixed(1)}return o}},{key:"setLabelFormatters",value:function(){var o=this,a=this.w;return a.globals.xaxisTooltipFormatter=function(c){return o.defaultGeneralFormatter(c)},a.globals.ttKeyFormatter=function(c){return o.defaultGeneralFormatter(c)},a.globals.ttZFormatter=function(c){return c},a.globals.legendFormatter=function(c){return o.defaultGeneralFormatter(c)},a.config.xaxis.labels.formatter!==void 0?a.globals.xLabelFormatter=a.config.xaxis.labels.formatter:a.globals.xLabelFormatter=function(c){if(oe.isNumber(c)){if(!a.config.xaxis.convertedCatToNumeric&&a.config.xaxis.type==="numeric"){if(oe.isNumber(a.config.xaxis.decimalsInFloat))return c.toFixed(a.config.xaxis.decimalsInFloat);var d=a.globals.maxX-a.globals.minX;return d>0&&d<100?c.toFixed(1):c.toFixed(0)}return a.globals.isBarHorizontal&&a.globals.maxY-a.globals.minYArr<4?c.toFixed(1):c.toFixed(0)}return c},typeof a.config.tooltip.x.formatter=="function"?a.globals.ttKeyFormatter=a.config.tooltip.x.formatter:a.globals.ttKeyFormatter=a.globals.xLabelFormatter,typeof a.config.xaxis.tooltip.formatter=="function"&&(a.globals.xaxisTooltipFormatter=a.config.xaxis.tooltip.formatter),(Array.isArray(a.config.tooltip.y)||a.config.tooltip.y.formatter!==void 0)&&(a.globals.ttVal=a.config.tooltip.y),a.config.tooltip.z.formatter!==void 0&&(a.globals.ttZFormatter=a.config.tooltip.z.formatter),a.config.legend.formatter!==void 0&&(a.globals.legendFormatter=a.config.legend.formatter),a.config.yaxis.forEach(function(c,d){c.labels.formatter!==void 0?a.globals.yLabelFormatters[d]=c.labels.formatter:a.globals.yLabelFormatters[d]=function(m){return a.globals.xyCharts?Array.isArray(m)?m.map(function(b){return o.defaultYFormatter(b,c,d)}):o.defaultYFormatter(m,c,d):m}}),a.globals}},{key:"heatmapLabelFormatters",value:function(){var o=this.w;if(o.config.chart.type==="heatmap"){o.globals.yAxisScale[0].result=o.globals.seriesNames.slice();var a=o.globals.seriesNames.reduce(function(c,d){return c.length>d.length?c:d},0);o.globals.yAxisScale[0].niceMax=a,o.globals.yAxisScale[0].niceMin=a}}}]),C}(),Se=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"getLabel",value:function(o,a,c,d){var m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",w=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],A=this.w,E=o[d]===void 0?"":o[d],M=E,O=A.globals.xLabelFormatter,L=A.config.xaxis.labels.formatter,$=!1,Y=new pe(this.ctx),U=E;w&&(M=Y.xLabelFormat(O,E,U,{i:d,dateFormatter:new ja(this.ctx).formatDate,w:A}),L!==void 0&&(M=L(E,o[d],{i:d,dateFormatter:new ja(this.ctx).formatDate,w:A})));var ne,ae;a.length>0?(ne=a[d].unit,ae=null,a.forEach(function(Te){Te.unit==="month"?ae="year":Te.unit==="day"?ae="month":Te.unit==="hour"?ae="day":Te.unit==="minute"&&(ae="hour")}),$=ae===ne,c=a[d].position,M=a[d].value):A.config.xaxis.type==="datetime"&&L===void 0&&(M=""),M===void 0&&(M=""),M=Array.isArray(M)?M:M.toString();var le=new tn(this.ctx),me={};me=A.globals.rotateXLabels&&w?le.getTextRects(M,parseInt(b,10),null,"rotate(".concat(A.config.xaxis.labels.rotate," 0 0)"),!1):le.getTextRects(M,parseInt(b,10));var Oe=!A.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(M)&&(String(M)==="NaN"||m.indexOf(M)>=0&&Oe)&&(M=""),{x:c,text:M,textRect:me,isBold:$}}},{key:"checkLabelBasedOnTickamount",value:function(o,a,c){var d=this.w,m=d.config.xaxis.tickAmount;return m==="dataPoints"&&(m=Math.round(d.globals.gridWidth/120)),m>c||o%Math.round(c/(m+1))==0||(a.text=""),a}},{key:"checkForOverflowingLabels",value:function(o,a,c,d,m){var b=this.w;if(o===0&&b.globals.skipFirstTimelinelabel&&(a.text=""),o===c-1&&b.globals.skipLastTimelinelabel&&(a.text=""),b.config.xaxis.labels.hideOverlappingLabels&&d.length>0){var w=m[m.length-1];a.x<w.textRect.width/(b.globals.rotateXLabels?Math.abs(b.config.xaxis.labels.rotate)/12:1.01)+w.x&&(a.text="")}return a}},{key:"checkForReversedLabels",value:function(o,a){var c=this.w;return c.config.yaxis[o]&&c.config.yaxis[o].reversed&&a.reverse(),a}},{key:"yAxisAllSeriesCollapsed",value:function(o){var a=this.w.globals;return!a.seriesYAxisMap[o].some(function(c){return a.collapsedSeriesIndices.indexOf(c)===-1})}},{key:"translateYAxisIndex",value:function(o){var a=this.w,c=a.globals,d=a.config.yaxis;return c.series.length>d.length||d.some(function(m){return Array.isArray(m.seriesName)})?o:c.seriesYAxisReverseMap[o]}},{key:"isYAxisHidden",value:function(o){var a=this.w,c=a.config.yaxis[o];if(!c.show||this.yAxisAllSeriesCollapsed(o))return!0;if(!c.showForNullSeries){var d=a.globals.seriesYAxisMap[o],m=new bs(this.ctx);return d.every(function(b){return m.isSeriesNull(b)})}return!1}},{key:"getYAxisForeColor",value:function(o,a){var c=this.w;return Array.isArray(o)&&c.globals.yAxisScale[a]&&this.ctx.theme.pushExtraColors(o,c.globals.yAxisScale[a].result.length,!1),o}},{key:"drawYAxisTicks",value:function(o,a,c,d,m,b,w){var A=this.w,E=new tn(this.ctx),M=A.globals.translateY+A.config.yaxis[m].labels.offsetY;if(A.globals.isBarHorizontal?M=0:A.config.chart.type==="heatmap"&&(M+=b/2),d.show&&a>0){A.config.yaxis[m].opposite===!0&&(o+=d.width);for(var O=a;O>=0;O--){var L=E.drawLine(o+c.offsetX-d.width+d.offsetX,M+d.offsetY,o+c.offsetX+d.offsetX,M+d.offsetY,d.color);w.add(L),M+=b}}}}]),C}(),at=function(){function C(o){gn(this,C),this.w=o.w,this.annoCtx=o,this.helpers=new Gi(this.annoCtx),this.axesUtils=new Se(this.annoCtx)}return rn(C,[{key:"addYaxisAnnotation",value:function(o,a,c){var d,m=this.w,b=o.strokeDashArray,w=this.helpers.getY1Y2("y1",o),A=w.yP,E=w.clipped,M=!0,O=!1,L=o.label.text;if(o.y2===null||o.y2===void 0){if(!E){O=!0;var $=this.annoCtx.graphics.drawLine(0+o.offsetX,A+o.offsetY,this._getYAxisAnnotationWidth(o),A+o.offsetY,o.borderColor,b,o.borderWidth);a.appendChild($.node),o.id&&$.node.classList.add(o.id)}}else{if(d=(w=this.helpers.getY1Y2("y2",o)).yP,M=w.clipped,d>A){var Y=A;A=d,d=Y}if(!E||!M){O=!0;var U=this.annoCtx.graphics.drawRect(0+o.offsetX,d+o.offsetY,this._getYAxisAnnotationWidth(o),A-d,0,o.fillColor,o.opacity,1,o.borderColor,b);U.node.classList.add("apexcharts-annotation-rect"),U.attr("clip-path","url(#gridRectMask".concat(m.globals.cuid,")")),a.appendChild(U.node),o.id&&U.node.classList.add(o.id)}}if(O){var ne=o.label.position==="right"?m.globals.gridWidth:o.label.position==="center"?m.globals.gridWidth/2:0,ae=this.annoCtx.graphics.drawText({x:ne+o.label.offsetX,y:(d??A)+o.label.offsetY-3,text:L,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});ae.attr({rel:c}),a.appendChild(ae.node)}}},{key:"_getYAxisAnnotationWidth",value:function(o){var a=this.w;return a.globals.gridWidth,(o.width.indexOf("%")>-1?a.globals.gridWidth*parseInt(o.width,10)/100:parseInt(o.width,10))+o.offsetX}},{key:"drawYAxisAnnotations",value:function(){var o=this,a=this.w,c=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return a.config.annotations.yaxis.forEach(function(d,m){d.yAxisIndex=o.axesUtils.translateYAxisIndex(d.yAxisIndex),o.axesUtils.isYAxisHidden(d.yAxisIndex)&&o.axesUtils.yAxisAllSeriesCollapsed(d.yAxisIndex)||o.addYaxisAnnotation(d,c.node,m)}),c}}]),C}(),Et=function(){function C(o){gn(this,C),this.w=o.w,this.annoCtx=o,this.helpers=new Gi(this.annoCtx)}return rn(C,[{key:"addPointAnnotation",value:function(o,a,c){if(!(this.w.globals.collapsedSeriesIndices.indexOf(o.seriesIndex)>-1)){var d=this.helpers.getX1X2("x1",o),m=d.x,b=d.clipped,w=(d=this.helpers.getY1Y2("y1",o)).yP,A=d.clipped;if(oe.isNumber(m)&&!A&&!b){var E={pSize:o.marker.size,pointStrokeWidth:o.marker.strokeWidth,pointFillColor:o.marker.fillColor,pointStrokeColor:o.marker.strokeColor,shape:o.marker.shape,pRadius:o.marker.radius,class:"apexcharts-point-annotation-marker ".concat(o.marker.cssClass," ").concat(o.id?o.id:"")},M=this.annoCtx.graphics.drawMarker(m+o.marker.offsetX,w+o.marker.offsetY,E);a.appendChild(M.node);var O=o.label.text?o.label.text:"",L=this.annoCtx.graphics.drawText({x:m+o.label.offsetX,y:w+o.label.offsetY-o.marker.size-parseFloat(o.label.style.fontSize)/1.6,text:O,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});if(L.attr({rel:c}),a.appendChild(L.node),o.customSVG.SVG){var $=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+o.customSVG.cssClass});$.attr({transform:"translate(".concat(m+o.customSVG.offsetX,", ").concat(w+o.customSVG.offsetY,")")}),$.node.innerHTML=o.customSVG.SVG,a.appendChild($.node)}if(o.image.path){var Y=o.image.width?o.image.width:20,U=o.image.height?o.image.height:20;M=this.annoCtx.addImage({x:m+o.image.offsetX-Y/2,y:w+o.image.offsetY-U/2,width:Y,height:U,path:o.image.path,appendTo:".apexcharts-point-annotations"})}o.mouseEnter&&M.node.addEventListener("mouseenter",o.mouseEnter.bind(this,o)),o.mouseLeave&&M.node.addEventListener("mouseleave",o.mouseLeave.bind(this,o)),o.click&&M.node.addEventListener("click",o.click.bind(this,o))}}}},{key:"drawPointAnnotations",value:function(){var o=this,a=this.w,c=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return a.config.annotations.points.map(function(d,m){o.addPointAnnotation(d,c.node,m)}),c}}]),C}(),ro={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},es=function(){function C(){gn(this,C),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return rn(C,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[ro],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(o){return o}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(o){return o+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(o){return o.globals.seriesTotals.reduce(function(a,c){return a+c},0)/o.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(o){return o},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(o){return o}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(o){return o}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(o){return o.globals.seriesTotals.reduce(function(a,c){return a+c},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(o){return o!==null?o:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(o){return o?o+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),C}(),Jo=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.graphics=new tn(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Gi(this),this.xAxisAnnotations=new Pi(this),this.yAxisAnnotations=new at(this),this.pointsAnnotations=new Et(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return rn(C,[{key:"drawAxesAnnotations",value:function(){var o=this.w;if(o.globals.axisCharts&&o.globals.dataPoints){for(var a=this.yAxisAnnotations.drawYAxisAnnotations(),c=this.xAxisAnnotations.drawXAxisAnnotations(),d=this.pointsAnnotations.drawPointAnnotations(),m=o.config.chart.animations.enabled,b=[a,c,d],w=[c.node,a.node,d.node],A=0;A<3;A++)o.globals.dom.elGraphical.add(b[A]),!m||o.globals.resized||o.globals.dataChanged||o.config.chart.type!=="scatter"&&o.config.chart.type!=="bubble"&&o.globals.dataPoints>1&&w[A].classList.add("apexcharts-element-hidden"),o.globals.delayedElements.push({el:w[A],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var o=this;this.w.config.annotations.images.map(function(a,c){o.addImage(a,c)})}},{key:"drawTextAnnos",value:function(){var o=this;this.w.config.annotations.texts.map(function(a,c){o.addText(a,c)})}},{key:"addXaxisAnnotation",value:function(o,a,c){this.xAxisAnnotations.addXaxisAnnotation(o,a,c)}},{key:"addYaxisAnnotation",value:function(o,a,c){this.yAxisAnnotations.addYaxisAnnotation(o,a,c)}},{key:"addPointAnnotation",value:function(o,a,c){this.pointsAnnotations.addPointAnnotation(o,a,c)}},{key:"addText",value:function(o,a){var c=o.x,d=o.y,m=o.text,b=o.textAnchor,w=o.foreColor,A=o.fontSize,E=o.fontFamily,M=o.fontWeight,O=o.cssClass,L=o.backgroundColor,$=o.borderWidth,Y=o.strokeDashArray,U=o.borderRadius,ne=o.borderColor,ae=o.appendTo,le=ae===void 0?".apexcharts-svg":ae,me=o.paddingLeft,Oe=me===void 0?4:me,Te=o.paddingRight,Ve=Te===void 0?4:Te,ve=o.paddingBottom,Pe=ve===void 0?2:ve,ht=o.paddingTop,P=ht===void 0?2:ht,W=this.w,q=this.graphics.drawText({x:c,y:d,text:m,textAnchor:b||"start",fontSize:A||"12px",fontWeight:M||"regular",fontFamily:E||W.config.chart.fontFamily,foreColor:w||W.config.chart.foreColor,cssClass:O}),ue=W.globals.dom.baseEl.querySelector(le);ue&&ue.appendChild(q.node);var ye=q.bbox();if(m){var nt=this.graphics.drawRect(ye.x-Oe,ye.y-P,ye.width+Oe+Ve,ye.height+Pe+P,U,L||"transparent",1,$,ne,Y);ue.insertBefore(nt.node,q.node)}}},{key:"addImage",value:function(o,a){var c=this.w,d=o.path,m=o.x,b=m===void 0?0:m,w=o.y,A=w===void 0?0:w,E=o.width,M=E===void 0?20:E,O=o.height,L=O===void 0?20:O,$=o.appendTo,Y=$===void 0?".apexcharts-svg":$,U=c.globals.dom.Paper.image(d);U.size(M,L).move(b,A);var ne=c.globals.dom.baseEl.querySelector(Y);return ne&&ne.appendChild(U.node),U}},{key:"addXaxisAnnotationExternal",value:function(o,a,c){return this.addAnnotationExternal({params:o,pushToMemory:a,context:c,type:"xaxis",contextMethod:c.addXaxisAnnotation}),c}},{key:"addYaxisAnnotationExternal",value:function(o,a,c){return this.addAnnotationExternal({params:o,pushToMemory:a,context:c,type:"yaxis",contextMethod:c.addYaxisAnnotation}),c}},{key:"addPointAnnotationExternal",value:function(o,a,c){return this.invertAxis===void 0&&(this.invertAxis=c.w.globals.isBarHorizontal),this.addAnnotationExternal({params:o,pushToMemory:a,context:c,type:"point",contextMethod:c.addPointAnnotation}),c}},{key:"addAnnotationExternal",value:function(o){var a=o.params,c=o.pushToMemory,d=o.context,m=o.type,b=o.contextMethod,w=d,A=w.w,E=A.globals.dom.baseEl.querySelector(".apexcharts-".concat(m,"-annotations")),M=E.childNodes.length+1,O=new es,L=Object.assign({},m==="xaxis"?O.xAxisAnnotation:m==="yaxis"?O.yAxisAnnotation:O.pointAnnotation),$=oe.extend(L,a);switch(m){case"xaxis":this.addXaxisAnnotation($,E,M);break;case"yaxis":this.addYaxisAnnotation($,E,M);break;case"point":this.addPointAnnotation($,E,M)}var Y=A.globals.dom.baseEl.querySelector(".apexcharts-".concat(m,"-annotations .apexcharts-").concat(m,"-annotation-label[rel='").concat(M,"']")),U=this.helpers.addBackgroundToAnno(Y,$);return U&&E.insertBefore(U.node,Y),c&&A.globals.memory.methodsToExec.push({context:w,id:$.id?$.id:oe.randomId(),method:b,label:"addAnnotation",params:a}),d}},{key:"clearAnnotations",value:function(o){for(var a=o.w,c=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),d=a.globals.memory.methodsToExec.length-1;d>=0;d--)a.globals.memory.methodsToExec[d].label!=="addText"&&a.globals.memory.methodsToExec[d].label!=="addAnnotation"||a.globals.memory.methodsToExec.splice(d,1);c=oe.listToArray(c),Array.prototype.forEach.call(c,function(m){for(;m.firstChild;)m.removeChild(m.firstChild)})}},{key:"removeAnnotation",value:function(o,a){var c=o.w,d=c.globals.dom.baseEl.querySelectorAll(".".concat(a));d&&(c.globals.memory.methodsToExec.map(function(m,b){m.id===a&&c.globals.memory.methodsToExec.splice(b,1)}),Array.prototype.forEach.call(d,function(m){m.parentElement.removeChild(m)}))}}]),C}(),fr=function(C){var o,a=C.isTimeline,c=C.ctx,d=C.seriesIndex,m=C.dataPointIndex,b=C.y1,w=C.y2,A=C.w,E=A.globals.seriesRangeStart[d][m],M=A.globals.seriesRangeEnd[d][m],O=A.globals.labels[m],L=A.config.series[d].name?A.config.series[d].name:"",$=A.globals.ttKeyFormatter,Y=A.config.tooltip.y.title.formatter,U={w:A,seriesIndex:d,dataPointIndex:m,start:E,end:M};typeof Y=="function"&&(L=Y(L,U)),(o=A.config.series[d].data[m])!==null&&o!==void 0&&o.x&&(O=A.config.series[d].data[m].x),a||A.config.xaxis.type==="datetime"&&(O=new pe(c).xLabelFormat(A.globals.ttKeyFormatter,O,O,{i:void 0,dateFormatter:new ja(c).formatDate,w:A})),typeof $=="function"&&(O=$(O,U)),Number.isFinite(b)&&Number.isFinite(w)&&(E=b,M=w);var ne="",ae="",le=A.globals.colors[d];if(A.config.tooltip.x.formatter===void 0)if(A.config.xaxis.type==="datetime"){var me=new ja(c);ne=me.formatDate(me.getDate(E),A.config.tooltip.x.format),ae=me.formatDate(me.getDate(M),A.config.tooltip.x.format)}else ne=E,ae=M;else ne=A.config.tooltip.x.formatter(E),ae=A.config.tooltip.x.formatter(M);return{start:E,end:M,startVal:ne,endVal:ae,ylabel:O,color:le,seriesName:L}},na=function(C){var o=C.color,a=C.seriesName,c=C.ylabel,d=C.start,m=C.end,b=C.seriesIndex,w=C.dataPointIndex,A=C.ctx.tooltip.tooltipLabels.getFormatters(b);d=A.yLbFormatter(d),m=A.yLbFormatter(m);var E=A.yLbFormatter(C.w.globals.series[b][w]),M=`<span class="value start-value">
  `.concat(d,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(m,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+o+'">'+(a||"")+'</span></div><div> <span class="category">'+c+": </span> "+(C.w.globals.comboCharts?C.w.config.series[b].type==="rangeArea"||C.w.config.series[b].type==="rangeBar"?M:"<span>".concat(E,"</span>"):M)+" </div></div>"},ei=function(){function C(o){gn(this,C),this.opts=o}return rn(C,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(o){return this.hideYAxis(),oe.extend(o,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(o,a){var c=a.w.config.series[a.seriesIndex].name;return o!==null?c+": "+o:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Tt(Tt({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var o=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(a){var c=a.seriesIndex,d=a.dataPointIndex,m=a.w;return o._getBoxTooltip(m,c,d,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var o=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(a){var c=a.seriesIndex,d=a.dataPointIndex,m=a.w;return o._getBoxTooltip(m,c,d,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(o,a){a.ctx;var c=a.seriesIndex,d=a.dataPointIndex,m=a.w,b=function(){var w=m.globals.seriesRangeStart[c][d];return m.globals.seriesRangeEnd[c][d]-w};return m.globals.comboCharts?m.config.series[c].type==="rangeBar"||m.config.series[c].type==="rangeArea"?b():o:b()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(o){return o.w.config.plotOptions&&o.w.config.plotOptions.bar&&o.w.config.plotOptions.bar.horizontal?function(a){var c=fr(Tt(Tt({},a),{},{isTimeline:!0})),d=c.color,m=c.seriesName,b=c.ylabel,w=c.startVal,A=c.endVal;return na(Tt(Tt({},a),{},{color:d,seriesName:m,ylabel:b,start:w,end:A}))}(o):function(a){var c=fr(a),d=c.color,m=c.seriesName,b=c.ylabel,w=c.start,A=c.end;return na(Tt(Tt({},a),{},{color:d,seriesName:m,ylabel:b,start:w,end:A}))}(o)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(o){var a,c;return(a=o.plotOptions.bar)!==null&&a!==void 0&&a.barHeight||(o.plotOptions.bar.barHeight=2),(c=o.plotOptions.bar)!==null&&c!==void 0&&c.columnWidth||(o.plotOptions.bar.columnWidth=2),o}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(o){return function(a){var c=fr(a),d=c.color,m=c.seriesName,b=c.ylabel,w=c.start,A=c.end;return na(Tt(Tt({},a),{},{color:d,seriesName:m,ylabel:b,start:w,end:A}))}(o)}}}}},{key:"brush",value:function(o){return oe.extend(o,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(o){o.dataLabels=o.dataLabels||{},o.dataLabels.formatter=o.dataLabels.formatter||void 0;var a=o.dataLabels.formatter;return o.yaxis.forEach(function(c,d){o.yaxis[d].min=0,o.yaxis[d].max=100}),o.chart.type==="bar"&&(o.dataLabels.formatter=a||function(c){return typeof c=="number"&&c?c.toFixed(0)+"%":c}),o}},{key:"stackedBars",value:function(){var o=this.bar();return Tt(Tt({},o),{},{plotOptions:Tt(Tt({},o.plotOptions),{},{bar:Tt(Tt({},o.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(o){return o.xaxis.convertedCatToNumeric=!0,o}},{key:"convertCatToNumericXaxis",value:function(o,a,c){o.xaxis.type="numeric",o.xaxis.labels=o.xaxis.labels||{},o.xaxis.labels.formatter=o.xaxis.labels.formatter||function(b){return oe.isNumber(b)?Math.floor(b):b};var d=o.xaxis.labels.formatter,m=o.xaxis.categories&&o.xaxis.categories.length?o.xaxis.categories:o.labels;return c&&c.length&&(m=c.map(function(b){return Array.isArray(b)?b:String(b)})),m&&m.length&&(o.xaxis.labels.formatter=function(b){return oe.isNumber(b)?d(m[Math.floor(b)-1]):d(b)}),o.xaxis.categories=[],o.labels=[],o.xaxis.tickAmount=o.xaxis.tickAmount||"dataPoints",o}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(o){return o},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(o,a,c,d,m){var b=o.globals.seriesCandleO[a][c],w=o.globals.seriesCandleH[a][c],A=o.globals.seriesCandleM[a][c],E=o.globals.seriesCandleL[a][c],M=o.globals.seriesCandleC[a][c];return o.config.series[a].type&&o.config.series[a].type!==m?`<div class="apexcharts-custom-tooltip">
          `.concat(o.config.series[a].name?o.config.series[a].name:"series-"+(a+1),": <strong>").concat(o.globals.series[a][c],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(o.config.chart.type,'">')+"<div>".concat(d[0],': <span class="value">')+b+"</span></div>"+"<div>".concat(d[1],': <span class="value">')+w+"</span></div>"+(A?"<div>".concat(d[2],': <span class="value">')+A+"</span></div>":"")+"<div>".concat(d[3],': <span class="value">')+E+"</span></div>"+"<div>".concat(d[4],': <span class="value">')+M+"</span></div></div>"}}]),C}(),$a=function(){function C(o){gn(this,C),this.opts=o}return rn(C,[{key:"init",value:function(o){var a=o.responsiveOverride,c=this.opts,d=new es,m=new ei(c);this.chartType=c.chart.type,c=this.extendYAxis(c),c=this.extendAnnotations(c);var b=d.init(),w={};if(c&&vo(c)==="object"){var A,E,M,O,L,$,Y,U,ne,ae,le={};le=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(c.chart.type)!==-1?m[c.chart.type]():m.line(),(A=c.plotOptions)!==null&&A!==void 0&&(E=A.bar)!==null&&E!==void 0&&E.isFunnel&&(le=m.funnel()),c.chart.stacked&&c.chart.type==="bar"&&(le=m.stackedBars()),(M=c.chart.brush)!==null&&M!==void 0&&M.enabled&&(le=m.brush(le)),(O=c.plotOptions)!==null&&O!==void 0&&(L=O.line)!==null&&L!==void 0&&L.isSlopeChart&&(le=m.slope()),c.chart.stacked&&c.chart.stackType==="100%"&&(c=m.stacked100(c)),($=c.plotOptions)!==null&&$!==void 0&&(Y=$.bar)!==null&&Y!==void 0&&Y.isDumbbell&&(c=m.dumbbell(c)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(c),c.xaxis=c.xaxis||window.Apex.xaxis||{},a||(c.xaxis.convertedCatToNumeric=!1),((U=(c=this.checkForCatToNumericXAxis(this.chartType,le,c)).chart.sparkline)!==null&&U!==void 0&&U.enabled||(ne=window.Apex.chart)!==null&&ne!==void 0&&(ae=ne.sparkline)!==null&&ae!==void 0&&ae.enabled)&&(le=m.sparkline(le)),w=oe.extend(b,le)}var me=oe.extend(w,window.Apex);return b=oe.extend(me,c),b=this.handleUserInputErrors(b)}},{key:"checkForCatToNumericXAxis",value:function(o,a,c){var d,m,b=new ei(c),w=(o==="bar"||o==="boxPlot")&&((d=c.plotOptions)===null||d===void 0||(m=d.bar)===null||m===void 0?void 0:m.horizontal),A=o==="pie"||o==="polarArea"||o==="donut"||o==="radar"||o==="radialBar"||o==="heatmap",E=c.xaxis.type!=="datetime"&&c.xaxis.type!=="numeric",M=c.xaxis.tickPlacement?c.xaxis.tickPlacement:a.xaxis&&a.xaxis.tickPlacement;return w||A||!E||M==="between"||(c=b.convertCatToNumeric(c)),c}},{key:"extendYAxis",value:function(o,a){var c=new es;(o.yaxis===void 0||!o.yaxis||Array.isArray(o.yaxis)&&o.yaxis.length===0)&&(o.yaxis={}),o.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(o.yaxis=oe.extend(o.yaxis,window.Apex.yaxis)),o.yaxis.constructor!==Array?o.yaxis=[oe.extend(c.yAxis,o.yaxis)]:o.yaxis=oe.extendArray(o.yaxis,c.yAxis);var d=!1;o.yaxis.forEach(function(b){b.logarithmic&&(d=!0)});var m=o.series;return a&&!m&&(m=a.config.series),d&&m.length!==o.yaxis.length&&m.length&&(o.yaxis=m.map(function(b,w){if(b.name||(m[w].name="series-".concat(w+1)),o.yaxis[w])return o.yaxis[w].seriesName=m[w].name,o.yaxis[w];var A=oe.extend(c.yAxis,o.yaxis[0]);return A.show=!1,A})),d&&m.length>1&&m.length!==o.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),o}},{key:"extendAnnotations",value:function(o){return o.annotations===void 0&&(o.annotations={},o.annotations.yaxis=[],o.annotations.xaxis=[],o.annotations.points=[]),o=this.extendYAxisAnnotations(o),o=this.extendXAxisAnnotations(o),o=this.extendPointAnnotations(o)}},{key:"extendYAxisAnnotations",value:function(o){var a=new es;return o.annotations.yaxis=oe.extendArray(o.annotations.yaxis!==void 0?o.annotations.yaxis:[],a.yAxisAnnotation),o}},{key:"extendXAxisAnnotations",value:function(o){var a=new es;return o.annotations.xaxis=oe.extendArray(o.annotations.xaxis!==void 0?o.annotations.xaxis:[],a.xAxisAnnotation),o}},{key:"extendPointAnnotations",value:function(o){var a=new es;return o.annotations.points=oe.extendArray(o.annotations.points!==void 0?o.annotations.points:[],a.pointAnnotation),o}},{key:"checkForDarkTheme",value:function(o){o.theme&&o.theme.mode==="dark"&&(o.tooltip||(o.tooltip={}),o.tooltip.theme!=="light"&&(o.tooltip.theme="dark"),o.chart.foreColor||(o.chart.foreColor="#f6f7f8"),o.theme.palette||(o.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(o){var a=o;if(a.tooltip.shared&&a.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(a.chart.type==="bar"&&a.plotOptions.bar.horizontal){if(a.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");a.yaxis[0].reversed&&(a.yaxis[0].opposite=!0),a.xaxis.tooltip.enabled=!1,a.yaxis[0].tooltip.enabled=!1,a.chart.zoom.enabled=!1}return a.chart.type!=="bar"&&a.chart.type!=="rangeBar"||a.tooltip.shared&&a.xaxis.crosshairs.width==="barWidth"&&a.series.length>1&&(a.xaxis.crosshairs.width="tickWidth"),a.chart.type!=="candlestick"&&a.chart.type!=="boxPlot"||a.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(a.chart.type," chart is not supported.")),a.yaxis[0].reversed=!1),a}}]),C}(),oa=function(){function C(){gn(this,C)}return rn(C,[{key:"initGlobalVars",value:function(o){o.series=[],o.seriesCandleO=[],o.seriesCandleH=[],o.seriesCandleM=[],o.seriesCandleL=[],o.seriesCandleC=[],o.seriesRangeStart=[],o.seriesRangeEnd=[],o.seriesRange=[],o.seriesPercent=[],o.seriesGoals=[],o.seriesX=[],o.seriesZ=[],o.seriesNames=[],o.seriesTotals=[],o.seriesLog=[],o.seriesColors=[],o.stackedSeriesTotals=[],o.seriesXvalues=[],o.seriesYvalues=[],o.labels=[],o.hasXaxisGroups=!1,o.groups=[],o.barGroups=[],o.lineGroups=[],o.areaGroups=[],o.hasSeriesGroups=!1,o.seriesGroups=[],o.categoryLabels=[],o.timescaleLabels=[],o.noLabelsProvided=!1,o.resizeTimer=null,o.selectionResizeTimer=null,o.lastWheelExecution=0,o.delayedElements=[],o.pointsArray=[],o.dataLabelsRects=[],o.isXNumeric=!1,o.skipLastTimelinelabel=!1,o.skipFirstTimelinelabel=!1,o.isDataXYZ=!1,o.isMultiLineX=!1,o.isMultipleYAxis=!1,o.maxY=-Number.MAX_VALUE,o.minY=Number.MIN_VALUE,o.minYArr=[],o.maxYArr=[],o.maxX=-Number.MAX_VALUE,o.minX=Number.MAX_VALUE,o.initialMaxX=-Number.MAX_VALUE,o.initialMinX=Number.MAX_VALUE,o.maxDate=0,o.minDate=Number.MAX_VALUE,o.minZ=Number.MAX_VALUE,o.maxZ=-Number.MAX_VALUE,o.minXDiff=Number.MAX_VALUE,o.yAxisScale=[],o.xAxisScale=null,o.xAxisTicksPositions=[],o.yLabelsCoords=[],o.yTitleCoords=[],o.barPadForNumericAxis=0,o.padHorizontal=0,o.xRange=0,o.yRange=[],o.zRange=0,o.dataPoints=0,o.xTickAmount=0,o.multiAxisTickAmount=0}},{key:"globalVars",value:function(o){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:o.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:o.chart.toolbar.autoSelected==="zoom"&&o.chart.toolbar.tools.zoom&&o.chart.zoom.enabled,panEnabled:o.chart.toolbar.autoSelected==="pan"&&o.chart.toolbar.tools.pan,selectionEnabled:o.chart.toolbar.autoSelected==="selection"&&o.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:o.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(o){var a=this.globalVars(o);return this.initGlobalVars(a),a.initialConfig=oe.extend({},o),a.initialSeries=oe.clone(o.series),a.lastXAxis=oe.clone(a.initialConfig.xaxis),a.lastYAxis=oe.clone(a.initialConfig.yaxis),a}}]),C}(),fa=function(){function C(o){gn(this,C),this.opts=o}return rn(C,[{key:"init",value:function(){var o=new $a(this.opts).init({responsiveOverride:!1});return{config:o,globals:new oa().init(o)}}}]),C}(),Mr=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return rn(C,[{key:"clippedImgArea",value:function(o){var a=this.w,c=a.config,d=parseInt(a.globals.gridWidth,10),m=parseInt(a.globals.gridHeight,10),b=d>m?d:m,w=o.image,A=0,E=0;o.width===void 0&&o.height===void 0?c.fill.image.width!==void 0&&c.fill.image.height!==void 0?(A=c.fill.image.width+1,E=c.fill.image.height):(A=b+1,E=b):(A=o.width,E=o.height);var M=document.createElementNS(a.globals.SVGNS,"pattern");tn.setAttrs(M,{id:o.patternID,patternUnits:o.patternUnits?o.patternUnits:"userSpaceOnUse",width:A+"px",height:E+"px"});var O=document.createElementNS(a.globals.SVGNS,"image");M.appendChild(O),O.setAttributeNS(window.SVG.xlink,"href",w),tn.setAttrs(O,{x:0,y:0,preserveAspectRatio:"none",width:A+"px",height:E+"px"}),O.style.opacity=o.opacity,a.globals.dom.elDefs.node.appendChild(M)}},{key:"getSeriesIndex",value:function(o){var a=this.w,c=a.config.chart.type;return(c==="bar"||c==="rangeBar")&&a.config.plotOptions.bar.distributed||c==="heatmap"||c==="treemap"?this.seriesIndex=o.seriesNumber:this.seriesIndex=o.seriesNumber%a.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(o,a){var c,d=this.w,m=null,b=null,w=gs(o);try{for(w.s();!(c=w.n()).done;){var A=c.value;A>=a.threshold?(m===null||A>m)&&(m=A):(b===null||A<b)&&(b=A)}}catch(O){w.e(O)}finally{w.f()}m===null&&(m=a.threshold),b===null&&(b=a.threshold);var E=m-a.threshold+(a.threshold-b);E===0&&(E=1);var M=100-(a.threshold-b)/E*100;return[{offset:M=Math.max(0,Math.min(M,100)),color:a.colorAboveThreshold,opacity:d.config.fill.opacity},{offset:0,color:a.colorBelowThreshold,opacity:d.config.fill.opacity}]}},{key:"fillPath",value:function(o){var a,c,d,m=this.w;this.opts=o;var b,w,A,E=this.w.config;this.seriesIndex=this.getSeriesIndex(o);var M=E.plotOptions.line.colors.colorAboveThreshold&&E.plotOptions.line.colors.colorBelowThreshold,O=this.getFillColors()[this.seriesIndex];m.globals.seriesColors[this.seriesIndex]!==void 0&&(O=m.globals.seriesColors[this.seriesIndex]),typeof O=="function"&&(O=O({seriesIndex:this.seriesIndex,dataPointIndex:o.dataPointIndex,value:o.value,w:m}));var L,$,Y,U=o.fillType?o.fillType:this.getFillType(this.seriesIndex),ne=Array.isArray(E.fill.opacity)?E.fill.opacity[this.seriesIndex]:E.fill.opacity,ae=U==="gradient"||M;o.color&&(O=o.color),(a=m.config.series[this.seriesIndex])!==null&&a!==void 0&&(c=a.data)!==null&&c!==void 0&&(d=c[o.dataPointIndex])!==null&&d!==void 0&&d.fillColor&&(O=(L=m.config.series[this.seriesIndex])===null||L===void 0||($=L.data)===null||$===void 0||(Y=$[o.dataPointIndex])===null||Y===void 0?void 0:Y.fillColor),O||(O="#fff",console.warn("undefined color - ApexCharts"));var le=O;if(O.indexOf("rgb")===-1?O.indexOf("#")===-1?le=O:O.length<9&&(le=oe.hexToRgba(O,ne)):O.indexOf("rgba")>-1?ne=oe.getOpacityFromRGBA(O):le=oe.hexToRgba(oe.rgb2hex(O),ne),o.opacity&&(ne=o.opacity),U==="pattern"&&(w=this.handlePatternFill({fillConfig:o.fillConfig,patternFill:w,fillColor:O,fillOpacity:ne,defaultColor:le})),ae){var me=vn(E.fill.gradient.colorStops)||[],Oe=E.fill.gradient.type;M&&(me[this.seriesIndex]=this.computeColorStops(m.globals.series[this.seriesIndex],E.plotOptions.line.colors),Oe="vertical"),A=this.handleGradientFill({type:Oe,fillConfig:o.fillConfig,fillColor:O,fillOpacity:ne,colorStops:me,i:this.seriesIndex})}if(U==="image"){var Te=E.fill.image.src,Ve=o.patternID?o.patternID:"",ve="pattern".concat(m.globals.cuid).concat(o.seriesNumber+1).concat(Ve);this.patternIDs.indexOf(ve)===-1&&(this.clippedImgArea({opacity:ne,image:Array.isArray(Te)?o.seriesNumber<Te.length?Te[o.seriesNumber]:Te[0]:Te,width:o.width?o.width:void 0,height:o.height?o.height:void 0,patternUnits:o.patternUnits,patternID:ve}),this.patternIDs.push(ve)),b="url(#".concat(ve,")")}else b=ae?A:U==="pattern"?w:le;return o.solid&&(b=le),b}},{key:"getFillType",value:function(o){var a=this.w;return Array.isArray(a.config.fill.type)?a.config.fill.type[o]:a.config.fill.type}},{key:"getFillColors",value:function(){var o=this.w,a=o.config,c=this.opts,d=[];return o.globals.comboCharts?o.config.series[this.seriesIndex].type==="line"?Array.isArray(o.globals.stroke.colors)?d=o.globals.stroke.colors:d.push(o.globals.stroke.colors):Array.isArray(o.globals.fill.colors)?d=o.globals.fill.colors:d.push(o.globals.fill.colors):a.chart.type==="line"?Array.isArray(o.globals.stroke.colors)?d=o.globals.stroke.colors:d.push(o.globals.stroke.colors):Array.isArray(o.globals.fill.colors)?d=o.globals.fill.colors:d.push(o.globals.fill.colors),c.fillColors!==void 0&&(d=[],Array.isArray(c.fillColors)?d=c.fillColors.slice():d.push(c.fillColors)),d}},{key:"handlePatternFill",value:function(o){var a=o.fillConfig,c=o.patternFill,d=o.fillColor,m=o.fillOpacity,b=o.defaultColor,w=this.w.config.fill;a&&(w=a);var A=this.opts,E=new tn(this.ctx),M=Array.isArray(w.pattern.strokeWidth)?w.pattern.strokeWidth[this.seriesIndex]:w.pattern.strokeWidth,O=d;return Array.isArray(w.pattern.style)?c=w.pattern.style[A.seriesNumber]!==void 0?E.drawPattern(w.pattern.style[A.seriesNumber],w.pattern.width,w.pattern.height,O,M,m):b:c=E.drawPattern(w.pattern.style,w.pattern.width,w.pattern.height,O,M,m),c}},{key:"handleGradientFill",value:function(o){var a=o.type,c=o.fillColor,d=o.fillOpacity,m=o.fillConfig,b=o.colorStops,w=o.i,A=this.w.config.fill;m&&(A=Tt(Tt({},A),m));var E=this.opts,M=new tn(this.ctx),O=new oe;a=a||A.gradient.type;var L,$=c,Y=A.gradient.opacityFrom===void 0?d:Array.isArray(A.gradient.opacityFrom)?A.gradient.opacityFrom[w]:A.gradient.opacityFrom;$.indexOf("rgba")>-1&&(Y=oe.getOpacityFromRGBA($));var U=A.gradient.opacityTo===void 0?d:Array.isArray(A.gradient.opacityTo)?A.gradient.opacityTo[w]:A.gradient.opacityTo;if(A.gradient.gradientToColors===void 0||A.gradient.gradientToColors.length===0)L=A.gradient.shade==="dark"?O.shadeColor(-1*parseFloat(A.gradient.shadeIntensity),c.indexOf("rgb")>-1?oe.rgb2hex(c):c):O.shadeColor(parseFloat(A.gradient.shadeIntensity),c.indexOf("rgb")>-1?oe.rgb2hex(c):c);else if(A.gradient.gradientToColors[E.seriesNumber]){var ne=A.gradient.gradientToColors[E.seriesNumber];L=ne,ne.indexOf("rgba")>-1&&(U=oe.getOpacityFromRGBA(ne))}else L=c;if(A.gradient.gradientFrom&&($=A.gradient.gradientFrom),A.gradient.gradientTo&&(L=A.gradient.gradientTo),A.gradient.inverseColors){var ae=$;$=L,L=ae}return $.indexOf("rgb")>-1&&($=oe.rgb2hex($)),L.indexOf("rgb")>-1&&(L=oe.rgb2hex(L)),M.drawGradient(a,$,L,Y,U,E.size,A.gradient.stops,b,w)}}]),C}(),Pa=function(){function C(o,a){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"setGlobalMarkerSize",value:function(){var o=this.w;if(o.globals.markers.size=Array.isArray(o.config.markers.size)?o.config.markers.size:[o.config.markers.size],o.globals.markers.size.length>0){if(o.globals.markers.size.length<o.globals.series.length+1)for(var a=0;a<=o.globals.series.length;a++)o.globals.markers.size[a]===void 0&&o.globals.markers.size.push(o.globals.markers.size[0])}else o.globals.markers.size=o.config.series.map(function(c){return o.config.markers.size})}},{key:"plotChartMarkers",value:function(o,a,c,d){var m=arguments.length>4&&arguments[4]!==void 0&&arguments[4],b=this.w,w=a,A=o,E=null,M=new tn(this.ctx),O=b.config.markers.discrete&&b.config.markers.discrete.length;if(Array.isArray(A.x))for(var L=0;L<A.x.length;L++){var $=void 0,Y=c,U=!oe.isNumber(A.y[L]);c===1&&L===0&&(Y=0),c===1&&L===1&&(Y=1);var ne="apexcharts-marker";if(b.config.chart.type!=="line"&&b.config.chart.type!=="area"||b.globals.comboCharts||b.config.tooltip.intersect||(ne+=" no-pointer-events"),(Array.isArray(b.config.markers.size)?b.globals.markers.size[a]>0:b.config.markers.size>0)||m||O){U||(ne+=" w".concat(oe.randomId()));var ae=this.getMarkerConfig({cssClass:ne,seriesIndex:a,dataPointIndex:Y});b.config.series[w].data[Y]&&(b.config.series[w].data[Y].fillColor&&(ae.pointFillColor=b.config.series[w].data[Y].fillColor),b.config.series[w].data[Y].strokeColor&&(ae.pointStrokeColor=b.config.series[w].data[Y].strokeColor)),d!==void 0&&(ae.pSize=d),(A.x[L]<-b.globals.markers.largestSize||A.x[L]>b.globals.gridWidth+b.globals.markers.largestSize||A.y[L]<-b.globals.markers.largestSize||A.y[L]>b.globals.gridHeight+b.globals.markers.largestSize)&&(ae.pSize=0),!U&&((b.globals.markers.size[a]>0||m||O)&&!E&&(E=M.group({class:m||O?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(b.globals.cuid,")")),($=M.drawMarker(A.x[L],A.y[L],ae)).attr("rel",Y),$.attr("j",Y),$.attr("index",a),$.node.setAttribute("default-marker-size",ae.pSize),new Ya(this.ctx).setSelectionFilter($,a,Y),this.addEvents($),E&&E.add($))}else b.globals.pointsArray[a]===void 0&&(b.globals.pointsArray[a]=[]),b.globals.pointsArray[a].push([A.x[L],A.y[L]])}return E}},{key:"getMarkerConfig",value:function(o){var a=o.cssClass,c=o.seriesIndex,d=o.dataPointIndex,m=d===void 0?null:d,b=o.radius,w=b===void 0?null:b,A=o.size,E=A===void 0?null:A,M=o.strokeWidth,O=M===void 0?null:M,L=this.w,$=this.getMarkerStyle(c),Y=E===null?L.globals.markers.size[c]:E,U=L.config.markers;return m!==null&&U.discrete.length&&U.discrete.map(function(ne){ne.seriesIndex===c&&ne.dataPointIndex===m&&($.pointStrokeColor=ne.strokeColor,$.pointFillColor=ne.fillColor,Y=ne.size,$.pointShape=ne.shape)}),{pSize:w===null?Y:w,pRadius:w!==null?w:U.radius,pointStrokeWidth:O!==null?O:Array.isArray(U.strokeWidth)?U.strokeWidth[c]:U.strokeWidth,pointStrokeColor:$.pointStrokeColor,pointFillColor:$.pointFillColor,shape:$.pointShape||(Array.isArray(U.shape)?U.shape[c]:U.shape),class:a,pointStrokeOpacity:Array.isArray(U.strokeOpacity)?U.strokeOpacity[c]:U.strokeOpacity,pointStrokeDashArray:Array.isArray(U.strokeDashArray)?U.strokeDashArray[c]:U.strokeDashArray,pointFillOpacity:Array.isArray(U.fillOpacity)?U.fillOpacity[c]:U.fillOpacity,seriesIndex:c}}},{key:"addEvents",value:function(o){var a=this.w,c=new tn(this.ctx);o.node.addEventListener("mouseenter",c.pathMouseEnter.bind(this.ctx,o)),o.node.addEventListener("mouseleave",c.pathMouseLeave.bind(this.ctx,o)),o.node.addEventListener("mousedown",c.pathMouseDown.bind(this.ctx,o)),o.node.addEventListener("click",a.config.markers.onClick),o.node.addEventListener("dblclick",a.config.markers.onDblClick),o.node.addEventListener("touchstart",c.pathMouseDown.bind(this.ctx,o),{passive:!0})}},{key:"getMarkerStyle",value:function(o){var a=this.w,c=a.globals.markers.colors,d=a.config.markers.strokeColor||a.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(d)?d[o]:d,pointFillColor:Array.isArray(c)?c[o]:c}}}]),C}(),Fr=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.initialAnim=this.w.config.chart.animations.enabled}return rn(C,[{key:"draw",value:function(o,a,c){var d=this.w,m=new tn(this.ctx),b=c.realIndex,w=c.pointsPos,A=c.zRatio,E=c.elParent,M=m.group({class:"apexcharts-series-markers apexcharts-series-".concat(d.config.chart.type)});if(M.attr("clip-path","url(#gridRectMarkerMask".concat(d.globals.cuid,")")),Array.isArray(w.x))for(var O=0;O<w.x.length;O++){var L=a+1,$=!0;a===0&&O===0&&(L=0),a===0&&O===1&&(L=1);var Y=d.globals.markers.size[b];if(A!==1/0){var U=d.config.plotOptions.bubble;Y=d.globals.seriesZ[b][L],U.zScaling&&(Y/=A),U.minBubbleRadius&&Y<U.minBubbleRadius&&(Y=U.minBubbleRadius),U.maxBubbleRadius&&Y>U.maxBubbleRadius&&(Y=U.maxBubbleRadius)}var ne=w.x[O],ae=w.y[O];if(Y=Y||0,ae!==null&&d.globals.series[b][L]!==void 0||($=!1),$){var le=this.drawPoint(ne,ae,Y,b,L,a);M.add(le)}E.add(M)}}},{key:"drawPoint",value:function(o,a,c,d,m,b){var w=this.w,A=d,E=new Wt(this.ctx),M=new Ya(this.ctx),O=new Mr(this.ctx),L=new Pa(this.ctx),$=new tn(this.ctx),Y=L.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:A,dataPointIndex:m,radius:w.config.chart.type==="bubble"||w.globals.comboCharts&&w.config.series[d]&&w.config.series[d].type==="bubble"?c:null}),U=O.fillPath({seriesNumber:d,dataPointIndex:m,color:Y.pointFillColor,patternUnits:"objectBoundingBox",value:w.globals.series[d][b]}),ne=$.drawMarker(o,a,Y);if(w.config.series[A].data[m]&&w.config.series[A].data[m].fillColor&&(U=w.config.series[A].data[m].fillColor),ne.attr({fill:U}),w.config.chart.dropShadow.enabled){var ae=w.config.chart.dropShadow;M.dropShadow(ne,ae,d)}if(!this.initialAnim||w.globals.dataChanged||w.globals.resized)w.globals.animationEnded=!0;else{var le=w.config.chart.animations.speed;E.animateMarker(ne,le,w.globals.easing,function(){window.setTimeout(function(){E.animationCompleted(ne)},100)})}return ne.attr({rel:m,j:m,index:d,"default-marker-size":Y.pSize}),M.setSelectionFilter(ne,d,m),L.addEvents(ne),ne.node.classList.add("apexcharts-marker"),ne}},{key:"centerTextInBubble",value:function(o){var a=this.w;return{y:o+=parseInt(a.config.dataLabels.style.fontSize,10)/4}}}]),C}(),Nr=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"dataLabelsCorrection",value:function(o,a,c,d,m,b,w){var A=this.w,E=!1,M=new tn(this.ctx).getTextRects(c,w),O=M.width,L=M.height;a<0&&(a=0),a>A.globals.gridHeight+L&&(a=A.globals.gridHeight+L/2),A.globals.dataLabelsRects[d]===void 0&&(A.globals.dataLabelsRects[d]=[]),A.globals.dataLabelsRects[d].push({x:o,y:a,width:O,height:L});var $=A.globals.dataLabelsRects[d].length-2,Y=A.globals.lastDrawnDataLabelsIndexes[d]!==void 0?A.globals.lastDrawnDataLabelsIndexes[d][A.globals.lastDrawnDataLabelsIndexes[d].length-1]:0;if(A.globals.dataLabelsRects[d][$]!==void 0){var U=A.globals.dataLabelsRects[d][Y];(o>U.x+U.width||a>U.y+U.height||a+L<U.y||o+O<U.x)&&(E=!0)}return(m===0||b)&&(E=!0),{x:o,y:a,textRects:M,drawnextLabel:E}}},{key:"drawDataLabel",value:function(o){var a=this,c=o.type,d=o.pos,m=o.i,b=o.j,w=o.isRangeStart,A=o.strokeWidth,E=A===void 0?2:A,M=this.w,O=new tn(this.ctx),L=M.config.dataLabels,$=0,Y=0,U=b,ne=null;if(M.globals.collapsedSeriesIndices.indexOf(m)!==-1||!L.enabled||!Array.isArray(d.x))return ne;ne=O.group({class:"apexcharts-data-labels"});for(var ae=0;ae<d.x.length;ae++)if($=d.x[ae]+L.offsetX,Y=d.y[ae]+L.offsetY+E,!isNaN($)){b===1&&ae===0&&(U=0),b===1&&ae===1&&(U=1);var le=M.globals.series[m][U];c==="rangeArea"&&(le=w?M.globals.seriesRangeStart[m][U]:M.globals.seriesRangeEnd[m][U]);var me="",Oe=function(Ve){return M.config.dataLabels.formatter(Ve,{ctx:a.ctx,seriesIndex:m,dataPointIndex:U,w:M})};M.config.chart.type==="bubble"?(me=Oe(le=M.globals.seriesZ[m][U]),Y=d.y[ae],Y=new Fr(this.ctx).centerTextInBubble(Y,m,U).y):le!==void 0&&(me=Oe(le));var Te=M.config.dataLabels.textAnchor;M.globals.isSlopeChart&&(Te=U===0?"end":U===M.config.series[m].data.length-1?"start":"middle"),this.plotDataLabelsText({x:$,y:Y,text:me,i:m,j:U,parent:ne,offsetCorrection:!0,dataLabelsConfig:M.config.dataLabels,textAnchor:Te})}return ne}},{key:"plotDataLabelsText",value:function(o){var a=this.w,c=new tn(this.ctx),d=o.x,m=o.y,b=o.i,w=o.j,A=o.text,E=o.textAnchor,M=o.fontSize,O=o.parent,L=o.dataLabelsConfig,$=o.color,Y=o.alwaysDrawDataLabel,U=o.offsetCorrection,ne=o.className,ae=null;if(Array.isArray(a.config.dataLabels.enabledOnSeries)&&a.config.dataLabels.enabledOnSeries.indexOf(b)<0)return ae;var le={x:d,y:m,drawnextLabel:!0,textRects:null};U&&(le=this.dataLabelsCorrection(d,m,A,b,w,Y,parseInt(L.style.fontSize,10))),a.globals.zoomed||(d=le.x,m=le.y),le.textRects&&(d<-20-le.textRects.width||d>a.globals.gridWidth+le.textRects.width+30)&&(A="");var me=a.globals.dataLabels.style.colors[b];((a.config.chart.type==="bar"||a.config.chart.type==="rangeBar")&&a.config.plotOptions.bar.distributed||a.config.dataLabels.distributed)&&(me=a.globals.dataLabels.style.colors[w]),typeof me=="function"&&(me=me({series:a.globals.series,seriesIndex:b,dataPointIndex:w,w:a})),$&&(me=$);var Oe=L.offsetX,Te=L.offsetY;if(a.config.chart.type!=="bar"&&a.config.chart.type!=="rangeBar"||(Oe=0,Te=0),a.globals.isSlopeChart&&(w!==0&&(Oe=-2*L.offsetX+5),w!==0&&w!==a.config.series[b].data.length-1&&(Oe=0)),le.drawnextLabel){if((ae=c.drawText({width:100,height:parseInt(L.style.fontSize,10),x:d+Oe,y:m+Te,foreColor:me,textAnchor:E||L.textAnchor,text:A,fontSize:M||L.style.fontSize,fontFamily:L.style.fontFamily,fontWeight:L.style.fontWeight||"normal"})).attr({class:ne||"apexcharts-datalabel",cx:d,cy:m}),L.dropShadow.enabled){var Ve=L.dropShadow;new Ya(this.ctx).dropShadow(ae,Ve)}O.add(ae),a.globals.lastDrawnDataLabelsIndexes[b]===void 0&&(a.globals.lastDrawnDataLabelsIndexes[b]=[]),a.globals.lastDrawnDataLabelsIndexes[b].push(w)}return ae}},{key:"addBackgroundToDataLabel",value:function(o,a){var c=this.w,d=c.config.dataLabels.background,m=d.padding,b=d.padding/2,w=a.width,A=a.height,E=new tn(this.ctx).drawRect(a.x-m,a.y-b/2,w+2*m,A+b,d.borderRadius,c.config.chart.background!=="transparent"&&c.config.chart.background?c.config.chart.background:"#fff",d.opacity,d.borderWidth,d.borderColor);return d.dropShadow.enabled&&new Ya(this.ctx).dropShadow(E,d.dropShadow),E}},{key:"dataLabelsBackground",value:function(){var o=this.w;if(o.config.chart.type!=="bubble")for(var a=o.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),c=0;c<a.length;c++){var d=a[c],m=d.getBBox(),b=null;if(m.width&&m.height&&(b=this.addBackgroundToDataLabel(d,m)),b){d.parentNode.insertBefore(b.node,d);var w=d.getAttribute("fill");o.config.chart.animations.enabled&&!o.globals.resized&&!o.globals.dataChanged?b.animate().attr({fill:w}):b.attr({fill:w}),d.setAttribute("fill",o.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var o=this.w,a=o.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),c=o.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),d=0;d<a.length;d++)c&&c.insertBefore(a[d],c.nextSibling)}}]),C}(),er=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.legendInactiveClass="legend-mouseover-inactive"}return rn(C,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(o){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(oe.escapeString(o),"']"))}},{key:"isSeriesHidden",value:function(o){var a=this.getSeriesByName(o),c=parseInt(a.getAttribute("data:realIndex"),10);return{isHidden:a.classList.contains("apexcharts-series-collapsed"),realIndex:c}}},{key:"addCollapsedClassToSeries",value:function(o,a){var c=this.w;function d(m){for(var b=0;b<m.length;b++)m[b].index===a&&o.node.classList.add("apexcharts-series-collapsed")}d(c.globals.collapsedSeries),d(c.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(o){var a=this.isSeriesHidden(o);return this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,a.isHidden),a.isHidden}},{key:"showSeries",value:function(o){var a=this.isSeriesHidden(o);a.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,!0)}},{key:"hideSeries",value:function(o){var a=this.isSeriesHidden(o);a.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,!1)}},{key:"resetSeries",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],c=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],d=this.w,m=oe.clone(d.globals.initialSeries);d.globals.previousPaths=[],c?(d.globals.collapsedSeries=[],d.globals.ancillaryCollapsedSeries=[],d.globals.collapsedSeriesIndices=[],d.globals.ancillaryCollapsedSeriesIndices=[]):m=this.emptyCollapsedSeries(m),d.config.series=m,o&&(a&&(d.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(m,d.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(o){for(var a=this.w,c=0;c<o.length;c++)a.globals.collapsedSeriesIndices.indexOf(c)>-1&&(o[c].data=[]);return o}},{key:"highlightSeries",value:function(o){var a=this.w,c=this.getSeriesByName(o),d=parseInt(c==null?void 0:c.getAttribute("data:realIndex"),10),m=a.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),b=null,w=null,A=null;if(a.globals.axisCharts||a.config.chart.type==="radialBar")if(a.globals.axisCharts){b=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(d,"']")),w=a.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(d,"']"));var E=a.globals.seriesYAxisReverseMap[d];A=a.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(E,"']"))}else b=a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(d+1,"']"));else b=a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(d+1,"'] path"));for(var M=0;M<m.length;M++)m[M].classList.add(this.legendInactiveClass);if(b)a.globals.axisCharts||b.parentNode.classList.remove(this.legendInactiveClass),b.classList.remove(this.legendInactiveClass),w!==null&&w.classList.remove(this.legendInactiveClass),A!==null&&A.classList.remove(this.legendInactiveClass);else for(var O=0;O<m.length;O++)m[O].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(o,a){var c=this.w;a||(a=o.target);var d=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(o.type==="mousemove"){var m=parseInt(a.getAttribute("rel"),10)-1;this.highlightSeries(c.globals.seriesNames[m])}else if(o.type==="mouseout")for(var b=0;b<d.length;b++)d[b].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(o,a){var c=this,d=this.w,m=d.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),b=function(E){for(var M=0;M<m.length;M++)m[M].classList[E](c.legendInactiveClass)};if(o.type==="mousemove"){var w=parseInt(a.getAttribute("rel"),10)-1;b("add");var A=d.config.plotOptions.heatmap.colorScale.ranges;(function(E,M){for(var O=0;O<m.length;O++){var L=Number(m[O].getAttribute("val"));L>=E.from&&(L<E.to||E.to===M&&L===M)&&m[O].classList.remove(c.legendInactiveClass)}})(A[w],A.reduce(function(E,M){return Math.max(E,M.to)},0))}else o.type==="mouseout"&&b("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],c=this.w,d=0;if(c.config.series.length>1){for(var m=c.config.series.map(function(w,A){return w.data&&w.data.length>0&&c.globals.collapsedSeriesIndices.indexOf(A)===-1&&(!c.globals.comboCharts||a.length===0||a.length&&a.indexOf(c.config.series[A].type)>-1)?A:-1}),b=o==="asc"?0:m.length-1;o==="asc"?b<m.length:b>=0;o==="asc"?b++:b--)if(m[b]!==-1){d=m[b];break}}return d}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(o,a){return o.type==="bar"||o.type==="column"?a:-1}).filter(function(o){return o!==-1}):this.w.config.series.map(function(o,a){return a})}},{key:"getPreviousPaths",value:function(){var o=this.w;function a(b,w,A){for(var E=b[w].childNodes,M={type:A,paths:[],realIndex:b[w].getAttribute("data:realIndex")},O=0;O<E.length;O++)if(E[O].hasAttribute("pathTo")){var L=E[O].getAttribute("pathTo");M.paths.push({d:L})}o.globals.previousPaths.push(M)}o.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(b){for(var w,A=(w=b,o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(w,"-series .apexcharts-series"))),E=0;E<A.length;E++)a(A,E,b)});var c=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o.config.chart.type," .apexcharts-series"));if(c.length>0)for(var d=function(b){for(var w=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(b,"'] rect")),A=[],E=function(O){var L=function(Y){return w[O].getAttribute(Y)},$={x:parseFloat(L("x")),y:parseFloat(L("y")),width:parseFloat(L("width")),height:parseFloat(L("height"))};A.push({rect:$,color:w[O].getAttribute("color")})},M=0;M<w.length;M++)E(M);o.globals.previousPaths.push(A)},m=0;m<c.length;m++)d(m);o.globals.axisCharts||(o.globals.previousPaths=o.globals.series)}},{key:"clearPreviousPaths",value:function(){var o=this.w;o.globals.previousPaths=[],o.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var o=this.w,a=o.config.noData,c=new tn(this.ctx),d=o.globals.svgWidth/2,m=o.globals.svgHeight/2,b="middle";if(o.globals.noData=!0,o.globals.animationEnded=!0,a.align==="left"?(d=10,b="start"):a.align==="right"&&(d=o.globals.svgWidth-10,b="end"),a.verticalAlign==="top"?m=50:a.verticalAlign==="bottom"&&(m=o.globals.svgHeight-50),d+=a.offsetX,m=m+parseInt(a.style.fontSize,10)+2+a.offsetY,a.text!==void 0&&a.text!==""){var w=c.drawText({x:d,y:m,text:a.text,textAnchor:b,fontSize:a.style.fontSize,fontFamily:a.style.fontFamily,foreColor:a.style.color,opacity:1,class:"apexcharts-text-nodata"});o.globals.dom.Paper.add(w)}}},{key:"setNullSeriesToZeroValues",value:function(o){for(var a=this.w,c=0;c<o.length;c++)if(o[c].length===0)for(var d=0;d<o[a.globals.maxValsInArrayIndex].length;d++)o[c].push(0);return o}},{key:"hasAllSeriesEqualX",value:function(){for(var o=!0,a=this.w,c=this.filteredSeriesX(),d=0;d<c.length-1;d++)if(c[d][0]!==c[d+1][0]){o=!1;break}return a.globals.allSeriesHasEqualX=o,o}},{key:"filteredSeriesX",value:function(){var o=this.w.globals.seriesX.map(function(a){return a.length>0?a:[]});return o}}]),C}(),$l=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new bs(this.ctx)}return rn(C,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var o=this.w.config.series.slice(),a=new er(this.ctx);if(this.activeSeriesIndex=a.getActiveConfigSeriesIndex(),o[this.activeSeriesIndex].data!==void 0&&o[this.activeSeriesIndex].data.length>0&&o[this.activeSeriesIndex].data[0]!==null&&o[this.activeSeriesIndex].data[0].x!==void 0&&o[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var o=this.w.config.series.slice(),a=new er(this.ctx);if(this.activeSeriesIndex=a.getActiveConfigSeriesIndex(),o[this.activeSeriesIndex].data!==void 0&&o[this.activeSeriesIndex].data.length>0&&o[this.activeSeriesIndex].data[0]!==void 0&&o[this.activeSeriesIndex].data[0]!==null&&o[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(o,a){for(var c=this.w.config,d=this.w.globals,m=c.chart.type==="boxPlot"||c.series[a].type==="boxPlot",b=0;b<o[a].data.length;b++)if(o[a].data[b][1]!==void 0&&(Array.isArray(o[a].data[b][1])&&o[a].data[b][1].length===4&&!m?this.twoDSeries.push(oe.parseNumber(o[a].data[b][1][3])):o[a].data[b].length>=5?this.twoDSeries.push(oe.parseNumber(o[a].data[b][4])):this.twoDSeries.push(oe.parseNumber(o[a].data[b][1])),d.dataFormatXNumeric=!0),c.xaxis.type==="datetime"){var w=new Date(o[a].data[b][0]);w=new Date(w).getTime(),this.twoDSeriesX.push(w)}else this.twoDSeriesX.push(o[a].data[b][0]);for(var A=0;A<o[a].data.length;A++)o[a].data[A][2]!==void 0&&(this.threeDSeries.push(o[a].data[A][2]),d.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(o,a){var c=this.w.config,d=this.w.globals,m=new ja(this.ctx),b=a;d.collapsedSeriesIndices.indexOf(a)>-1&&(b=this.activeSeriesIndex);for(var w=0;w<o[a].data.length;w++)o[a].data[w].y!==void 0&&(Array.isArray(o[a].data[w].y)?this.twoDSeries.push(oe.parseNumber(o[a].data[w].y[o[a].data[w].y.length-1])):this.twoDSeries.push(oe.parseNumber(o[a].data[w].y))),o[a].data[w].goals!==void 0&&Array.isArray(o[a].data[w].goals)?(this.seriesGoals[a]===void 0&&(this.seriesGoals[a]=[]),this.seriesGoals[a].push(o[a].data[w].goals)):(this.seriesGoals[a]===void 0&&(this.seriesGoals[a]=[]),this.seriesGoals[a].push(null));for(var A=0;A<o[b].data.length;A++){var E=typeof o[b].data[A].x=="string",M=Array.isArray(o[b].data[A].x),O=!M&&!!m.isValidDate(o[b].data[A].x);if(E||O)if(E||c.xaxis.convertedCatToNumeric){var L=d.isBarHorizontal&&d.isRangeData;c.xaxis.type!=="datetime"||L?(this.fallbackToCategory=!0,this.twoDSeriesX.push(o[b].data[A].x),isNaN(o[b].data[A].x)||this.w.config.xaxis.type==="category"||typeof o[b].data[A].x=="string"||(d.isXNumeric=!0)):this.twoDSeriesX.push(m.parseDate(o[b].data[A].x))}else c.xaxis.type==="datetime"?this.twoDSeriesX.push(m.parseDate(o[b].data[A].x.toString())):(d.dataFormatXNumeric=!0,d.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(o[b].data[A].x)));else M?(this.fallbackToCategory=!0,this.twoDSeriesX.push(o[b].data[A].x)):(d.isXNumeric=!0,d.dataFormatXNumeric=!0,this.twoDSeriesX.push(o[b].data[A].x))}if(o[a].data[0]&&o[a].data[0].z!==void 0){for(var $=0;$<o[a].data.length;$++)this.threeDSeries.push(o[a].data[$].z);d.isDataXYZ=!0}}},{key:"handleRangeData",value:function(o,a){var c=this.w.globals,d={};return this.isFormat2DArray()?d=this.handleRangeDataFormat("array",o,a):this.isFormatXY()&&(d=this.handleRangeDataFormat("xy",o,a)),c.seriesRangeStart.push(d.start===void 0?[]:d.start),c.seriesRangeEnd.push(d.end===void 0?[]:d.end),c.seriesRange.push(d.rangeUniques),c.seriesRange.forEach(function(m,b){m&&m.forEach(function(w,A){w.y.forEach(function(E,M){for(var O=0;O<w.y.length;O++)if(M!==O){var L=E.y1,$=E.y2,Y=w.y[O].y1;L<=w.y[O].y2&&Y<=$&&(w.overlaps.indexOf(E.rangeName)<0&&w.overlaps.push(E.rangeName),w.overlaps.indexOf(w.y[O].rangeName)<0&&w.overlaps.push(w.y[O].rangeName))}})})}),d}},{key:"handleCandleStickBoxData",value:function(o,a){var c=this.w.globals,d={};return this.isFormat2DArray()?d=this.handleCandleStickBoxDataFormat("array",o,a):this.isFormatXY()&&(d=this.handleCandleStickBoxDataFormat("xy",o,a)),c.seriesCandleO[a]=d.o,c.seriesCandleH[a]=d.h,c.seriesCandleM[a]=d.m,c.seriesCandleL[a]=d.l,c.seriesCandleC[a]=d.c,d}},{key:"handleRangeDataFormat",value:function(o,a,c){var d=[],m=[],b=a[c].data.filter(function(M,O,L){return O===L.findIndex(function($){return $.x===M.x})}).map(function(M,O){return{x:M.x,overlaps:[],y:[]}});if(o==="array")for(var w=0;w<a[c].data.length;w++)Array.isArray(a[c].data[w])?(d.push(a[c].data[w][1][0]),m.push(a[c].data[w][1][1])):(d.push(a[c].data[w]),m.push(a[c].data[w]));else if(o==="xy")for(var A=function(M){var O=Array.isArray(a[c].data[M].y),L=oe.randomId(),$=a[c].data[M].x,Y={y1:O?a[c].data[M].y[0]:a[c].data[M].y,y2:O?a[c].data[M].y[1]:a[c].data[M].y,rangeName:L};a[c].data[M].rangeName=L;var U=b.findIndex(function(ne){return ne.x===$});b[U].y.push(Y),d.push(Y.y1),m.push(Y.y2)},E=0;E<a[c].data.length;E++)A(E);return{start:d,end:m,rangeUniques:b}}},{key:"handleCandleStickBoxDataFormat",value:function(o,a,c){var d=this.w,m=d.config.chart.type==="boxPlot"||d.config.series[c].type==="boxPlot",b=[],w=[],A=[],E=[],M=[];if(o==="array")if(m&&a[c].data[0].length===6||!m&&a[c].data[0].length===5)for(var O=0;O<a[c].data.length;O++)b.push(a[c].data[O][1]),w.push(a[c].data[O][2]),m?(A.push(a[c].data[O][3]),E.push(a[c].data[O][4]),M.push(a[c].data[O][5])):(E.push(a[c].data[O][3]),M.push(a[c].data[O][4]));else for(var L=0;L<a[c].data.length;L++)Array.isArray(a[c].data[L][1])&&(b.push(a[c].data[L][1][0]),w.push(a[c].data[L][1][1]),m?(A.push(a[c].data[L][1][2]),E.push(a[c].data[L][1][3]),M.push(a[c].data[L][1][4])):(E.push(a[c].data[L][1][2]),M.push(a[c].data[L][1][3])));else if(o==="xy")for(var $=0;$<a[c].data.length;$++)Array.isArray(a[c].data[$].y)&&(b.push(a[c].data[$].y[0]),w.push(a[c].data[$].y[1]),m?(A.push(a[c].data[$].y[2]),E.push(a[c].data[$].y[3]),M.push(a[c].data[$].y[4])):(E.push(a[c].data[$].y[2]),M.push(a[c].data[$].y[3])));return{o:b,h:w,m:A,l:E,c:M}}},{key:"parseDataAxisCharts",value:function(o){var a=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,d=this.w.config,m=this.w.globals,b=new ja(c),w=d.labels.length>0?d.labels.slice():d.xaxis.categories.slice();m.isRangeBar=d.chart.type==="rangeBar"&&m.isBarHorizontal,m.hasXaxisGroups=d.xaxis.type==="category"&&d.xaxis.group.groups.length>0,m.hasXaxisGroups&&(m.groups=d.xaxis.group.groups),o.forEach(function($,Y){$.name!==void 0?m.seriesNames.push($.name):m.seriesNames.push("series-"+parseInt(Y+1,10))}),this.coreUtils.setSeriesYAxisMappings();var A=[],E=vn(new Set(d.series.map(function($){return $.group})));d.series.forEach(function($,Y){var U=E.indexOf($.group);A[U]||(A[U]=[]),A[U].push(m.seriesNames[Y])}),m.seriesGroups=A;for(var M=function(){for(var $=0;$<w.length;$++)if(typeof w[$]=="string"){if(!b.isValidDate(w[$]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");a.twoDSeriesX.push(b.parseDate(w[$]))}else a.twoDSeriesX.push(w[$])},O=0;O<o.length;O++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],o[O].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(d.chart.type!=="rangeBar"&&d.chart.type!=="rangeArea"&&o[O].type!=="rangeBar"&&o[O].type!=="rangeArea"||(m.isRangeData=!0,d.chart.type!=="rangeBar"&&d.chart.type!=="rangeArea"||this.handleRangeData(o,O)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(o,O):this.isFormatXY()&&this.handleFormatXY(o,O),d.chart.type!=="candlestick"&&o[O].type!=="candlestick"&&d.chart.type!=="boxPlot"&&o[O].type!=="boxPlot"||this.handleCandleStickBoxData(o,O),m.series.push(this.twoDSeries),m.labels.push(this.twoDSeriesX),m.seriesX.push(this.twoDSeriesX),m.seriesGoals=this.seriesGoals,O!==this.activeSeriesIndex||this.fallbackToCategory||(m.isXNumeric=!0);else{d.xaxis.type==="datetime"?(m.isXNumeric=!0,M(),m.seriesX.push(this.twoDSeriesX)):d.xaxis.type==="numeric"&&(m.isXNumeric=!0,w.length>0&&(this.twoDSeriesX=w,m.seriesX.push(this.twoDSeriesX))),m.labels.push(this.twoDSeriesX);var L=o[O].data.map(function($){return oe.parseNumber($)});m.series.push(L)}m.seriesZ.push(this.threeDSeries),o[O].color!==void 0?m.seriesColors.push(o[O].color):m.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(o){var a=this.w.globals,c=this.w.config;a.series=o.slice(),a.seriesNames=c.labels.slice();for(var d=0;d<a.series.length;d++)a.seriesNames[d]===void 0&&a.seriesNames.push("series-"+(d+1));return this.w}},{key:"handleExternalLabelsData",value:function(o){var a=this.w.config,c=this.w.globals;a.xaxis.categories.length>0?c.labels=a.xaxis.categories:a.labels.length>0?c.labels=a.labels.slice():this.fallbackToCategory?(c.labels=c.labels[0],c.seriesRange.length&&(c.seriesRange.map(function(d){d.forEach(function(m){c.labels.indexOf(m.x)<0&&m.x&&c.labels.push(m.x)})}),c.labels=Array.from(new Set(c.labels.map(JSON.stringify)),JSON.parse)),a.xaxis.convertedCatToNumeric&&(new ei(a).convertCatToNumericXaxis(a,this.ctx,c.seriesX[0]),this._generateExternalLabels(o))):this._generateExternalLabels(o)}},{key:"_generateExternalLabels",value:function(o){var a=this.w.globals,c=this.w.config,d=[];if(a.axisCharts){if(a.series.length>0)if(this.isFormatXY())for(var m=c.series.map(function(O,L){return O.data.filter(function($,Y,U){return U.findIndex(function(ne){return ne.x===$.x})===Y})}),b=m.reduce(function(O,L,$,Y){return Y[O].length>L.length?O:$},0),w=0;w<m[b].length;w++)d.push(w+1);else for(var A=0;A<a.series[a.maxValsInArrayIndex].length;A++)d.push(A+1);a.seriesX=[];for(var E=0;E<o.length;E++)a.seriesX.push(d);this.w.globals.isBarHorizontal||(a.isXNumeric=!0)}if(d.length===0){d=a.axisCharts?[]:a.series.map(function(O,L){return L+1});for(var M=0;M<o.length;M++)a.seriesX.push(d)}a.labels=d,c.xaxis.convertedCatToNumeric&&(a.categoryLabels=d.map(function(O){return c.xaxis.labels.formatter(O)})),a.noLabelsProvided=!0}},{key:"parseData",value:function(o){var a=this.w,c=a.config,d=a.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),d.axisCharts?(this.parseDataAxisCharts(o),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(o),c.chart.stacked){var m=new er(this.ctx);d.series=m.setNullSeriesToZeroValues(d.series)}this.coreUtils.getSeriesTotals(),d.axisCharts&&(d.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),d.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),d.dataFormatXNumeric||d.isXNumeric&&(c.xaxis.type!=="numeric"||c.labels.length!==0||c.xaxis.categories.length!==0)||this.handleExternalLabelsData(o);for(var b=this.coreUtils.getCategoryLabels(d.labels),w=0;w<b.length;w++)if(Array.isArray(b[w])){d.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var o=this.w,a=[];o.globals.seriesYAxisMap.forEach(function(c,d){var m=0;c.forEach(function(b){o.globals.collapsedSeriesIndices.indexOf(b)!==-1&&m++}),m>0&&m==c.length&&a.push(d)}),o.globals.ignoreYAxisIndexes=a.map(function(c){return c})}}]),C}(),Lc=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"scaleSvgNode",value:function(o,a){var c=parseFloat(o.getAttributeNS(null,"width")),d=parseFloat(o.getAttributeNS(null,"height"));o.setAttributeNS(null,"width",c*a),o.setAttributeNS(null,"height",d*a),o.setAttributeNS(null,"viewBox","0 0 "+c+" "+d)}},{key:"getSvgString",value:function(){var o=this;return new Promise(function(a){var c=o.w,d=c.config.chart.toolbar.export.width,m=c.config.chart.toolbar.export.scale||d/c.globals.svgWidth;m||(m=1);var b=o.w.globals.dom.Paper.svg(),w=o.w.globals.dom.Paper.node.cloneNode(!0);m!==1&&o.scaleSvgNode(w,m),o.convertImagesToBase64(w).then(function(){b=new XMLSerializer().serializeToString(w),a(b.replace(/&nbsp;/g,"&#160;"))})})}},{key:"convertImagesToBase64",value:function(o){var a=this,c=o.getElementsByTagName("image"),d=Array.from(c).map(function(m){var b=m.getAttributeNS("http://www.w3.org/1999/xlink","href");return b&&!b.startsWith("data:")?a.getBase64FromUrl(b).then(function(w){m.setAttributeNS("http://www.w3.org/1999/xlink","href",w)}).catch(function(w){console.error("Error converting image to base64:",w)}):Promise.resolve()});return Promise.all(d)}},{key:"getBase64FromUrl",value:function(o){return new Promise(function(a,c){var d=new Image;d.crossOrigin="Anonymous",d.onload=function(){var m=document.createElement("canvas");m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0),a(m.toDataURL())},d.onerror=c,d.src=o})}},{key:"cleanup",value:function(){var o=this.w,a=o.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),c=o.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),d=o.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(d,function(m){m.setAttribute("width",0)}),a&&a[0]&&(a[0].setAttribute("x",-500),a[0].setAttribute("x1",-500),a[0].setAttribute("x2",-500)),c&&c[0]&&(c[0].setAttribute("y",-100),c[0].setAttribute("y1",-100),c[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){var o=this;return new Promise(function(a){o.cleanup(),o.getSvgString().then(function(c){var d=new Blob([c],{type:"image/svg+xml;charset=utf-8"});a(URL.createObjectURL(d))})})}},{key:"dataURI",value:function(o){var a=this;return new Promise(function(c){var d=a.w,m=o?o.scale||o.width/d.globals.svgWidth:1;a.cleanup();var b=document.createElement("canvas");b.width=d.globals.svgWidth*m,b.height=parseInt(d.globals.dom.elWrap.style.height,10)*m;var w=d.config.chart.background!=="transparent"&&d.config.chart.background?d.config.chart.background:"#fff",A=b.getContext("2d");A.fillStyle=w,A.fillRect(0,0,b.width*m,b.height*m),a.getSvgString().then(function(E){var M="data:image/svg+xml,"+encodeURIComponent(E),O=new Image;O.crossOrigin="anonymous",O.onload=function(){if(A.drawImage(O,0,0),b.msToBlob){var L=b.msToBlob();c({blob:L})}else{var $=b.toDataURL("image/png");c({imgURI:$})}},O.src=M})})}},{key:"exportToSVG",value:function(){var o=this;this.svgUrl().then(function(a){o.triggerDownload(a,o.w.config.chart.toolbar.export.svg.filename,".svg")})}},{key:"exportToPng",value:function(){var o=this,a=this.w.config.chart.toolbar.export.scale,c=this.w.config.chart.toolbar.export.width,d=a?{scale:a}:c?{width:c}:void 0;this.dataURI(d).then(function(m){var b=m.imgURI,w=m.blob;w?navigator.msSaveOrOpenBlob(w,o.w.globals.chartID+".png"):o.triggerDownload(b,o.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(o){var a=this,c=o.series,d=o.fileName,m=o.columnDelimiter,b=m===void 0?",":m,w=o.lineDelimiter,A=w===void 0?`
`:w,E=this.w;c||(c=E.config.series);var M=[],O=[],L="",$=E.globals.series.map(function(Te,Ve){return E.globals.collapsedSeriesIndices.indexOf(Ve)===-1?Te:[]}),Y=function(Te){return typeof E.config.chart.toolbar.export.csv.categoryFormatter=="function"?E.config.chart.toolbar.export.csv.categoryFormatter(Te):E.config.xaxis.type==="datetime"&&String(Te).length>=10?new Date(Te).toDateString():oe.isNumber(Te)?Te:Te.split(b).join("")},U=function(Te){return typeof E.config.chart.toolbar.export.csv.valueFormatter=="function"?E.config.chart.toolbar.export.csv.valueFormatter(Te):Te},ne=Math.max.apply(Math,vn(c.map(function(Te){return Te.data?Te.data.length:0}))),ae=new $l(this.ctx),le=new Se(this.ctx),me=function(Te){var Ve="";if(E.globals.axisCharts){if(E.config.xaxis.type==="category"||E.config.xaxis.convertedCatToNumeric)if(E.globals.isBarHorizontal){var ve=E.globals.yLabelFormatters[0],Pe=new er(a.ctx).getActiveConfigSeriesIndex();Ve=ve(E.globals.labels[Te],{seriesIndex:Pe,dataPointIndex:Te,w:E})}else Ve=le.getLabel(E.globals.labels,E.globals.timescaleLabels,0,Te).text;E.config.xaxis.type==="datetime"&&(E.config.xaxis.categories.length?Ve=E.config.xaxis.categories[Te]:E.config.labels.length&&(Ve=E.config.labels[Te]))}else Ve=E.config.labels[Te];return Ve===null?"nullvalue":(Array.isArray(Ve)&&(Ve=Ve.join(" ")),oe.isNumber(Ve)?Ve:Ve.split(b).join(""))},Oe=function(Te,Ve){if(M.length&&Ve===0&&O.push(M.join(b)),Te.data){Te.data=Te.data.length&&Te.data||vn(Array(ne)).map(function(){return""});for(var ve=0;ve<Te.data.length;ve++){M=[];var Pe=me(ve);if(Pe!=="nullvalue"){if(Pe||(ae.isFormatXY()?Pe=c[Ve].data[ve].x:ae.isFormat2DArray()&&(Pe=c[Ve].data[ve]?c[Ve].data[ve][0]:"")),Ve===0){M.push(Y(Pe));for(var ht=0;ht<E.globals.series.length;ht++){var P,W=ae.isFormatXY()?(P=c[ht].data[ve])===null||P===void 0?void 0:P.y:$[ht][ve];M.push(U(W))}}(E.config.chart.type==="candlestick"||Te.type&&Te.type==="candlestick")&&(M.pop(),M.push(E.globals.seriesCandleO[Ve][ve]),M.push(E.globals.seriesCandleH[Ve][ve]),M.push(E.globals.seriesCandleL[Ve][ve]),M.push(E.globals.seriesCandleC[Ve][ve])),(E.config.chart.type==="boxPlot"||Te.type&&Te.type==="boxPlot")&&(M.pop(),M.push(E.globals.seriesCandleO[Ve][ve]),M.push(E.globals.seriesCandleH[Ve][ve]),M.push(E.globals.seriesCandleM[Ve][ve]),M.push(E.globals.seriesCandleL[Ve][ve]),M.push(E.globals.seriesCandleC[Ve][ve])),E.config.chart.type==="rangeBar"&&(M.pop(),M.push(E.globals.seriesRangeStart[Ve][ve]),M.push(E.globals.seriesRangeEnd[Ve][ve])),M.length&&O.push(M.join(b))}}}};M.push(E.config.chart.toolbar.export.csv.headerCategory),E.config.chart.type==="boxPlot"?(M.push("minimum"),M.push("q1"),M.push("median"),M.push("q3"),M.push("maximum")):E.config.chart.type==="candlestick"?(M.push("open"),M.push("high"),M.push("low"),M.push("close")):E.config.chart.type==="rangeBar"?(M.push("minimum"),M.push("maximum")):c.map(function(Te,Ve){var ve=(Te.name?Te.name:"series-".concat(Ve))+"";E.globals.axisCharts&&M.push(ve.split(b).join("")?ve.split(b).join(""):"series-".concat(Ve))}),E.globals.axisCharts||(M.push(E.config.chart.toolbar.export.csv.headerValue),O.push(M.join(b))),E.globals.allSeriesHasEqualX||!E.globals.axisCharts||E.config.xaxis.categories.length||E.config.labels.length?c.map(function(Te,Ve){E.globals.axisCharts?Oe(Te,Ve):((M=[]).push(Y(E.globals.labels[Ve])),M.push(U($[Ve])),O.push(M.join(b)))}):function(){var Te=new Set,Ve={};c.forEach(function(ve,Pe){ve==null||ve.data.forEach(function(ht){var P,W;if(ae.isFormatXY())P=ht.x,W=ht.y;else{if(!ae.isFormat2DArray())return;P=ht[0],W=ht[1]}Ve[P]||(Ve[P]=Array(c.length).fill("")),Ve[P][Pe]=U(W),Te.add(P)})}),M.length&&O.push(M.join(b)),Array.from(Te).sort().forEach(function(ve){O.push([Y(ve),Ve[ve].join(b)])})}(),L+=O.join(A),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+L),d||E.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(o,a,c){var d=document.createElement("a");d.href=o,d.download=(a||this.w.globals.chartID)+c,document.body.appendChild(d),d.click(),document.body.removeChild(d)}}]),C}(),zl=function(){function C(o,a){gn(this,C),this.ctx=o,this.elgrid=a,this.w=o.w;var c=this.w;this.axesUtils=new Se(o),this.xaxisLabels=c.globals.labels.slice(),c.globals.timescaleLabels.length>0&&!c.globals.isBarHorizontal&&(this.xaxisLabels=c.globals.timescaleLabels.slice()),c.config.xaxis.overwriteCategories&&(this.xaxisLabels=c.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],c.config.xaxis.position==="top"?this.offY=0:this.offY=c.globals.gridHeight,this.offY=this.offY+c.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=c.config.chart.type==="bar"&&c.config.plotOptions.bar.horizontal,this.xaxisFontSize=c.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=c.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=c.config.xaxis.labels.style.colors,this.xaxisBorderWidth=c.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=c.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=c.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=c.config.xaxis.axisBorder.height,this.yaxis=c.config.yaxis[0]}return rn(C,[{key:"drawXaxis",value:function(){var o=this.w,a=new tn(this.ctx),c=a.group({class:"apexcharts-xaxis",transform:"translate(".concat(o.config.xaxis.offsetX,", ").concat(o.config.xaxis.offsetY,")")}),d=a.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(o.globals.translateXAxisX,", ").concat(o.globals.translateXAxisY,")")});c.add(d);for(var m=[],b=0;b<this.xaxisLabels.length;b++)m.push(this.xaxisLabels[b]);if(this.drawXAxisLabelAndGroup(!0,a,d,m,o.globals.isXNumeric,function(Y,U){return U}),o.globals.hasXaxisGroups){var w=o.globals.groups;m=[];for(var A=0;A<w.length;A++)m.push(w[A].title);var E={};o.config.xaxis.group.style&&(E.xaxisFontSize=o.config.xaxis.group.style.fontSize,E.xaxisFontFamily=o.config.xaxis.group.style.fontFamily,E.xaxisForeColors=o.config.xaxis.group.style.colors,E.fontWeight=o.config.xaxis.group.style.fontWeight,E.cssClass=o.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,a,d,m,!1,function(Y,U){return w[Y].cols*U},E)}if(o.config.xaxis.title.text!==void 0){var M=a.group({class:"apexcharts-xaxis-title"}),O=a.drawText({x:o.globals.gridWidth/2+o.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(o.config.xaxis.position==="bottom"?o.globals.xAxisLabelsHeight:-o.globals.xAxisLabelsHeight-10)+o.config.xaxis.title.offsetY,text:o.config.xaxis.title.text,textAnchor:"middle",fontSize:o.config.xaxis.title.style.fontSize,fontFamily:o.config.xaxis.title.style.fontFamily,fontWeight:o.config.xaxis.title.style.fontWeight,foreColor:o.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+o.config.xaxis.title.style.cssClass});M.add(O),c.add(M)}if(o.config.xaxis.axisBorder.show){var L=o.globals.barPadForNumericAxis,$=a.drawLine(o.globals.padHorizontal+o.config.xaxis.axisBorder.offsetX-L,this.offY,this.xaxisBorderWidth+L,this.offY,o.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&o.config.grid.show?this.elgrid.elGridBorders.add($):c.add($)}return c}},{key:"drawXAxisLabelAndGroup",value:function(o,a,c,d,m,b){var w,A=this,E=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},M=[],O=[],L=this.w,$=E.xaxisFontSize||this.xaxisFontSize,Y=E.xaxisFontFamily||this.xaxisFontFamily,U=E.xaxisForeColors||this.xaxisForeColors,ne=E.fontWeight||L.config.xaxis.labels.style.fontWeight,ae=E.cssClass||L.config.xaxis.labels.style.cssClass,le=L.globals.padHorizontal,me=d.length,Oe=L.config.xaxis.type==="category"?L.globals.dataPoints:me;if(Oe===0&&me>Oe&&(Oe=me),m){var Te=Oe>1?Oe-1:Oe;w=L.globals.gridWidth/Math.min(Te,me-1),le=le+b(0,w)/2+L.config.xaxis.labels.offsetX}else w=L.globals.gridWidth/Oe,le=le+b(0,w)+L.config.xaxis.labels.offsetX;for(var Ve=function(Pe){var ht=le-b(Pe,w)/2+L.config.xaxis.labels.offsetX;Pe===0&&me===1&&w/2===le&&Oe===1&&(ht=L.globals.gridWidth/2);var P=A.axesUtils.getLabel(d,L.globals.timescaleLabels,ht,Pe,M,$,o),W=28;if(L.globals.rotateXLabels&&o&&(W=22),L.config.xaxis.title.text&&L.config.xaxis.position==="top"&&(W+=parseFloat(L.config.xaxis.title.style.fontSize)+2),o||(W=W+parseFloat($)+(L.globals.xAxisLabelsHeight-L.globals.xAxisGroupLabelsHeight)+(L.globals.rotateXLabels?10:0)),P=L.config.xaxis.tickAmount!==void 0&&L.config.xaxis.tickAmount!=="dataPoints"&&L.config.xaxis.type!=="datetime"?A.axesUtils.checkLabelBasedOnTickamount(Pe,P,me):A.axesUtils.checkForOverflowingLabels(Pe,P,me,M,O),L.config.xaxis.labels.show){var q=a.drawText({x:P.x,y:A.offY+L.config.xaxis.labels.offsetY+W-(L.config.xaxis.position==="top"?L.globals.xAxisHeight+L.config.xaxis.axisTicks.height-2:0),text:P.text,textAnchor:"middle",fontWeight:P.isBold?600:ne,fontSize:$,fontFamily:Y,foreColor:Array.isArray(U)?o&&L.config.xaxis.convertedCatToNumeric?U[L.globals.minX+Pe-1]:U[Pe]:U,isPlainText:!1,cssClass:(o?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+ae});if(c.add(q),q.on("click",function(ye){if(typeof L.config.chart.events.xAxisLabelClick=="function"){var nt=Object.assign({},L,{labelIndex:Pe});L.config.chart.events.xAxisLabelClick(ye,A.ctx,nt)}}),o){var ue=document.createElementNS(L.globals.SVGNS,"title");ue.textContent=Array.isArray(P.text)?P.text.join(" "):P.text,q.node.appendChild(ue),P.text!==""&&(M.push(P.text),O.push(P))}}Pe<me-1&&(le+=b(Pe+1,w))},ve=0;ve<=me-1;ve++)Ve(ve)}},{key:"drawXaxisInversed",value:function(o){var a,c,d=this,m=this.w,b=new tn(this.ctx),w=m.config.yaxis[0].opposite?m.globals.translateYAxisX[o]:0,A=b.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:o}),E=b.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+w+", 0)"});A.add(E);var M=[];if(m.config.yaxis[o].show)for(var O=0;O<this.xaxisLabels.length;O++)M.push(this.xaxisLabels[O]);a=m.globals.gridHeight/M.length,c=-a/2.2;var L=m.globals.yLabelFormatters[0],$=m.config.yaxis[0].labels;if($.show)for(var Y=function(Te){var Ve=M[Te]===void 0?"":M[Te];Ve=L(Ve,{seriesIndex:o,dataPointIndex:Te,w:m});var ve=d.axesUtils.getYAxisForeColor($.style.colors,o),Pe=0;Array.isArray(Ve)&&(Pe=Ve.length/2*parseInt($.style.fontSize,10));var ht=$.offsetX-15,P="end";d.yaxis.opposite&&(P="start"),m.config.yaxis[0].labels.align==="left"?(ht=$.offsetX,P="start"):m.config.yaxis[0].labels.align==="center"?(ht=$.offsetX,P="middle"):m.config.yaxis[0].labels.align==="right"&&(P="end");var W=b.drawText({x:ht,y:c+a+$.offsetY-Pe,text:Ve,textAnchor:P,foreColor:Array.isArray(ve)?ve[Te]:ve,fontSize:$.style.fontSize,fontFamily:$.style.fontFamily,fontWeight:$.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+$.style.cssClass,maxWidth:$.maxWidth});E.add(W),W.on("click",function(ye){if(typeof m.config.chart.events.xAxisLabelClick=="function"){var nt=Object.assign({},m,{labelIndex:Te});m.config.chart.events.xAxisLabelClick(ye,d.ctx,nt)}});var q=document.createElementNS(m.globals.SVGNS,"title");if(q.textContent=Array.isArray(Ve)?Ve.join(" "):Ve,W.node.appendChild(q),m.config.yaxis[o].labels.rotate!==0){var ue=b.rotateAroundCenter(W.node);W.node.setAttribute("transform","rotate(".concat(m.config.yaxis[o].labels.rotate," 0 ").concat(ue.y,")"))}c+=a},U=0;U<=M.length-1;U++)Y(U);if(m.config.yaxis[0].title.text!==void 0){var ne=b.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+w+", 0)"}),ae=b.drawText({x:m.config.yaxis[0].title.offsetX,y:m.globals.gridHeight/2+m.config.yaxis[0].title.offsetY,text:m.config.yaxis[0].title.text,textAnchor:"middle",foreColor:m.config.yaxis[0].title.style.color,fontSize:m.config.yaxis[0].title.style.fontSize,fontWeight:m.config.yaxis[0].title.style.fontWeight,fontFamily:m.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+m.config.yaxis[0].title.style.cssClass});ne.add(ae),A.add(ne)}var le=0;this.isCategoryBarHorizontal&&m.config.yaxis[0].opposite&&(le=m.globals.gridWidth);var me=m.config.xaxis.axisBorder;if(me.show){var Oe=b.drawLine(m.globals.padHorizontal+me.offsetX+le,1+me.offsetY,m.globals.padHorizontal+me.offsetX+le,m.globals.gridHeight+me.offsetY,me.color,0);this.elgrid&&this.elgrid.elGridBorders&&m.config.grid.show?this.elgrid.elGridBorders.add(Oe):A.add(Oe)}return m.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(le,M.length,m.config.yaxis[0].axisBorder,m.config.yaxis[0].axisTicks,0,a,A),A}},{key:"drawXaxisTicks",value:function(o,a,c){var d=this.w,m=o;if(!(o<0||o-2>d.globals.gridWidth)){var b=this.offY+d.config.xaxis.axisTicks.offsetY;if(a=a+b+d.config.xaxis.axisTicks.height,d.config.xaxis.position==="top"&&(a=b-d.config.xaxis.axisTicks.height),d.config.xaxis.axisTicks.show){var w=new tn(this.ctx).drawLine(o+d.config.xaxis.axisTicks.offsetX,b+d.config.xaxis.offsetY,m+d.config.xaxis.axisTicks.offsetX,a+d.config.xaxis.offsetY,d.config.xaxis.axisTicks.color);c.add(w),w.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var o=this.w,a=[],c=this.xaxisLabels.length,d=o.globals.padHorizontal;if(o.globals.timescaleLabels.length>0)for(var m=0;m<c;m++)d=this.xaxisLabels[m].position,a.push(d);else for(var b=c,w=0;w<b;w++){var A=b;o.globals.isXNumeric&&o.config.chart.type!=="bar"&&(A-=1),d+=o.globals.gridWidth/A,a.push(d)}return a}},{key:"xAxisLabelCorrections",value:function(){var o=this.w,a=new tn(this.ctx),c=o.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),d=o.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),m=o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),b=o.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(o.globals.rotateXLabels||o.config.xaxis.labels.rotateAlways)for(var w=0;w<d.length;w++){var A=a.rotateAroundCenter(d[w]);A.y=A.y-1,A.x=A.x+1,d[w].setAttribute("transform","rotate(".concat(o.config.xaxis.labels.rotate," ").concat(A.x," ").concat(A.y,")")),d[w].setAttribute("text-anchor","end"),c.setAttribute("transform","translate(0, ".concat(-10,")"));var E=d[w].childNodes;o.config.xaxis.labels.trim&&Array.prototype.forEach.call(E,function($){a.placeTextWithEllipsis($,$.textContent,o.globals.xAxisLabelsHeight-(o.config.legend.position==="bottom"?20:10))})}else(function(){for(var $=o.globals.gridWidth/(o.globals.labels.length+1),Y=0;Y<d.length;Y++){var U=d[Y].childNodes;o.config.xaxis.labels.trim&&o.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(U,function(ne){a.placeTextWithEllipsis(ne,ne.textContent,$)})}})();if(m.length>0){var M=m[m.length-1].getBBox(),O=m[0].getBBox();M.x<-20&&m[m.length-1].parentNode.removeChild(m[m.length-1]),O.x+O.width>o.globals.gridWidth&&!o.globals.isBarHorizontal&&m[0].parentNode.removeChild(m[0]);for(var L=0;L<b.length;L++)a.placeTextWithEllipsis(b[L],b[L].textContent,o.config.yaxis[0].labels.maxWidth-(o.config.yaxis[0].title.text?2*parseFloat(o.config.yaxis[0].title.style.fontSize):0)-15)}}}]),C}(),tu=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w;var a=this.w;this.xaxisLabels=a.globals.labels.slice(),this.axesUtils=new Se(o),this.isRangeBar=a.globals.seriesRange.length&&a.globals.isBarHorizontal,a.globals.timescaleLabels.length>0&&(this.xaxisLabels=a.globals.timescaleLabels.slice())}return rn(C,[{key:"drawGridArea",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this.w,c=new tn(this.ctx);o||(o=c.group({class:"apexcharts-grid"}));var d=c.drawLine(a.globals.padHorizontal,1,a.globals.padHorizontal,a.globals.gridHeight,"transparent"),m=c.drawLine(a.globals.padHorizontal,a.globals.gridHeight,a.globals.gridWidth,a.globals.gridHeight,"transparent");return o.add(m),o.add(d),o}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var o=this.renderGrid();return this.drawGridArea(o.el),o}return null}},{key:"createGridMask",value:function(){var o=this.w,a=o.globals,c=new tn(this.ctx),d=Array.isArray(o.config.stroke.width)?Math.max.apply(Math,vn(o.config.stroke.width)):o.config.stroke.width,m=function(M){var O=document.createElementNS(a.SVGNS,"clipPath");return O.setAttribute("id",M),O};a.dom.elGridRectMask=m("gridRectMask".concat(a.cuid)),a.dom.elGridRectBarMask=m("gridRectBarMask".concat(a.cuid)),a.dom.elGridRectMarkerMask=m("gridRectMarkerMask".concat(a.cuid)),a.dom.elForecastMask=m("forecastMask".concat(a.cuid)),a.dom.elNonForecastMask=m("nonForecastMask".concat(a.cuid));var b=0,w=0;(["bar","rangeBar","candlestick","boxPlot"].includes(o.config.chart.type)||o.globals.comboBarCount>0)&&o.globals.isXNumeric&&!o.globals.isBarHorizontal&&(b=Math.max(o.config.grid.padding.left,a.barPadForNumericAxis),w=Math.max(o.config.grid.padding.right,a.barPadForNumericAxis)),a.dom.elGridRect=c.drawRect(0,0,a.gridWidth,a.gridHeight,0,"#fff"),a.dom.elGridRectBar=c.drawRect(-d/2-b-2,-d/2-2,a.gridWidth+d+w+b+4,a.gridHeight+d+4,0,"#fff");var A=o.globals.markers.largestSize;a.dom.elGridRectMarker=c.drawRect(-A,-A,a.gridWidth+2*A,a.gridHeight+2*A,0,"#fff"),a.dom.elGridRectMask.appendChild(a.dom.elGridRect.node),a.dom.elGridRectBarMask.appendChild(a.dom.elGridRectBar.node),a.dom.elGridRectMarkerMask.appendChild(a.dom.elGridRectMarker.node);var E=a.dom.baseEl.querySelector("defs");E.appendChild(a.dom.elGridRectMask),E.appendChild(a.dom.elGridRectBarMask),E.appendChild(a.dom.elGridRectMarkerMask),E.appendChild(a.dom.elForecastMask),E.appendChild(a.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(o){var a=o.i,c=o.x1,d=o.y1,m=o.x2,b=o.y2,w=o.xCount,A=o.parent,E=this.w;if(!(a===0&&E.globals.skipFirstTimelinelabel||a===w-1&&E.globals.skipLastTimelinelabel&&!E.config.xaxis.labels.formatter||E.config.chart.type==="radar")){E.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,x1:c,y1:d,x2:m,y2:b,xCount:w,parent:A});var M=0;if(E.globals.hasXaxisGroups&&E.config.xaxis.tickPlacement==="between"){var O=E.globals.groups;if(O){for(var L=0,$=0;L<a&&$<O.length;$++)L+=O[$].cols;L===a&&(M=.6*E.globals.xAxisLabelsHeight)}}new zl(this.ctx).drawXaxisTicks(c,M,E.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(o){var a=o.i,c=o.x1,d=o.y1,m=o.x2,b=o.y2,w=o.xCount,A=o.parent,E=this.w,M=A.node.classList.contains("apexcharts-gridlines-horizontal"),O=E.globals.barPadForNumericAxis,L=d===0&&b===0||c===0&&m===0||d===E.globals.gridHeight&&b===E.globals.gridHeight||E.globals.isBarHorizontal&&(a===0||a===w-1),$=new tn(this).drawLine(c-(M?O:0),d,m+(M?O:0),b,E.config.grid.borderColor,E.config.grid.strokeDashArray);$.node.classList.add("apexcharts-gridline"),L&&E.config.grid.show?this.elGridBorders.add($):A.add($)}},{key:"_drawGridBandRect",value:function(o){var a=o.c,c=o.x1,d=o.y1,m=o.x2,b=o.y2,w=o.type,A=this.w,E=new tn(this.ctx),M=A.globals.barPadForNumericAxis,O=A.config.grid[w].colors[a],L=E.drawRect(c-(w==="row"?M:0),d,m+(w==="row"?2*M:0),b,0,O,A.config.grid[w].opacity);this.elg.add(L),L.attr("clip-path","url(#gridRectMask".concat(A.globals.cuid,")")),L.node.classList.add("apexcharts-grid-".concat(w))}},{key:"_drawXYLines",value:function(o){var a=this,c=o.xCount,d=o.tickAmount,m=this.w;if(m.config.grid.xaxis.lines.show||m.config.xaxis.axisTicks.show){var b,w=m.globals.padHorizontal,A=m.globals.gridHeight;m.globals.timescaleLabels.length?function(Y){for(var U=Y.xC,ne=Y.x1,ae=Y.y1,le=Y.x2,me=Y.y2,Oe=0;Oe<U;Oe++)ne=a.xaxisLabels[Oe].position,le=a.xaxisLabels[Oe].position,a._drawGridLines({i:Oe,x1:ne,y1:ae,x2:le,y2:me,xCount:c,parent:a.elgridLinesV})}({xC:c,x1:w,y1:0,x2:b,y2:A}):(m.globals.isXNumeric&&(c=m.globals.xAxisScale.result.length),function(Y){for(var U=Y.xC,ne=Y.x1,ae=Y.y1,le=Y.x2,me=Y.y2,Oe=0;Oe<U+(m.globals.isXNumeric?0:1);Oe++)Oe===0&&U===1&&m.globals.dataPoints===1&&(le=ne=m.globals.gridWidth/2),a._drawGridLines({i:Oe,x1:ne,y1:ae,x2:le,y2:me,xCount:c,parent:a.elgridLinesV}),le=ne+=m.globals.gridWidth/(m.globals.isXNumeric?U-1:U)}({xC:c,x1:w,y1:0,x2:b,y2:A}))}if(m.config.grid.yaxis.lines.show){var E=0,M=0,O=m.globals.gridWidth,L=d+1;this.isRangeBar&&(L=m.globals.labels.length);for(var $=0;$<L+(this.isRangeBar?1:0);$++)this._drawGridLine({i:$,xCount:L+(this.isRangeBar?1:0),x1:0,y1:E,x2:O,y2:M,parent:this.elgridLinesH}),M=E+=m.globals.gridHeight/(this.isRangeBar?L:d)}}},{key:"_drawInvertedXYLines",value:function(o){var a=o.xCount,c=this.w;if(c.config.grid.xaxis.lines.show||c.config.xaxis.axisTicks.show)for(var d,m=c.globals.padHorizontal,b=c.globals.gridHeight,w=0;w<a+1;w++)c.config.grid.xaxis.lines.show&&this._drawGridLine({i:w,xCount:a+1,x1:m,y1:0,x2:d,y2:b,parent:this.elgridLinesV}),new zl(this.ctx).drawXaxisTicks(m,0,c.globals.dom.elGraphical),d=m+=c.globals.gridWidth/a;if(c.config.grid.yaxis.lines.show)for(var A=0,E=0,M=c.globals.gridWidth,O=0;O<c.globals.dataPoints+1;O++)this._drawGridLine({i:O,xCount:c.globals.dataPoints+1,x1:0,y1:A,x2:M,y2:E,parent:this.elgridLinesH}),E=A+=c.globals.gridHeight/c.globals.dataPoints}},{key:"renderGrid",value:function(){var o=this.w,a=o.globals,c=new tn(this.ctx);this.elg=c.group({class:"apexcharts-grid"}),this.elgridLinesH=c.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=c.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=c.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),o.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var d=0;d<a.seriesYAxisMap.length&&a.ignoreYAxisIndexes.includes(d);)d++;d===a.seriesYAxisMap.length&&(d=0);var m,b=a.yAxisScale[d].result.length-1;if(!a.isBarHorizontal||this.isRangeBar){var w,A,E;m=this.xaxisLabels.length,this.isRangeBar&&(b=a.labels.length,o.config.xaxis.tickAmount&&o.config.xaxis.labels.formatter&&(m=o.config.xaxis.tickAmount),((w=a.yAxisScale)===null||w===void 0||(A=w[d])===null||A===void 0||(E=A.result)===null||E===void 0?void 0:E.length)>0&&o.config.xaxis.type!=="datetime"&&(m=a.yAxisScale[d].result.length-1)),this._drawXYLines({xCount:m,tickAmount:b})}else m=b,b=a.xTickAmount,this._drawInvertedXYLines({xCount:m,tickAmount:b});return this.drawGridBands(m,b),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:a.gridWidth/m}}},{key:"drawGridBands",value:function(o,a){var c,d,m=this,b=this.w;if(((c=b.config.grid.row.colors)===null||c===void 0?void 0:c.length)>0&&function(Y,U,ne,ae,le,me){for(var Oe=0,Te=0;Oe<U;Oe++,Te++)Te>=b.config.grid[Y].colors.length&&(Te=0),m._drawGridBandRect({c:Te,x1:ne,y1:ae,x2:le,y2:me,type:Y}),ae+=b.globals.gridHeight/a}("row",a,0,0,b.globals.gridWidth,b.globals.gridHeight/a),((d=b.config.grid.column.colors)===null||d===void 0?void 0:d.length)>0){var w=b.globals.isBarHorizontal||b.config.xaxis.tickPlacement!=="on"||b.config.xaxis.type!=="category"&&!b.config.xaxis.convertedCatToNumeric?o:o-1;b.globals.isXNumeric&&(w=b.globals.xAxisScale.result.length-1);for(var A=b.globals.padHorizontal,E=b.globals.padHorizontal+b.globals.gridWidth/w,M=b.globals.gridHeight,O=0,L=0;O<o;O++,L++){var $;L>=b.config.grid.column.colors.length&&(L=0),b.config.xaxis.type==="datetime"&&(A=this.xaxisLabels[O].position,E=((($=this.xaxisLabels[O+1])===null||$===void 0?void 0:$.position)||b.globals.gridWidth)-this.xaxisLabels[O].position),this._drawGridBandRect({c:L,x1:A,y1:0,x2:E,y2:M,type:"column"}),A+=b.globals.gridWidth/w}}}}]),C}(),nu=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.coreUtils=new bs(this.ctx)}return rn(C,[{key:"niceScale",value:function(o,a){var c,d,m,b,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=1e-11,E=this.w,M=E.globals;M.isBarHorizontal?(c=E.config.xaxis,d=Math.max((M.svgWidth-100)/25,2)):(c=E.config.yaxis[w],d=Math.max((M.svgHeight-100)/15,2)),oe.isNumber(d)||(d=10),m=c.min!==void 0&&c.min!==null,b=c.max!==void 0&&c.min!==null;var O=c.stepSize!==void 0&&c.stepSize!==null,L=c.tickAmount!==void 0&&c.tickAmount!==null,$=L?c.tickAmount:M.niceScaleDefaultTicks[Math.min(Math.round(d/2),M.niceScaleDefaultTicks.length-1)];if(M.isMultipleYAxis&&!L&&M.multiAxisTickAmount>0&&($=M.multiAxisTickAmount,L=!0),$=$==="dataPoints"?M.dataPoints-1:Math.abs(Math.round($)),(o===Number.MIN_VALUE&&a===0||!oe.isNumber(o)&&!oe.isNumber(a)||o===Number.MIN_VALUE&&a===-Number.MAX_VALUE)&&(o=oe.isNumber(c.min)?c.min:0,a=oe.isNumber(c.max)?c.max:o+$,M.allSeriesCollapsed=!1),o>a){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var Y=a;a=o,o=Y}else o===a&&(o=o===0?0:o-1,a=a===0?2:a+1);var U=[];$<1&&($=1);var ne=$,ae=Math.abs(a-o);!m&&o>0&&o/ae<.15&&(o=0,m=!0),!b&&a<0&&-a/ae<.15&&(a=0,b=!0);var le=(ae=Math.abs(a-o))/ne,me=le,Oe=Math.floor(Math.log10(me)),Te=Math.pow(10,Oe),Ve=Math.ceil(me/Te);if(le=me=(Ve=M.niceScaleAllowedMagMsd[M.yValueDecimal===0?0:1][Ve])*Te,M.isBarHorizontal&&c.stepSize&&c.type!=="datetime"?(le=c.stepSize,O=!0):O&&(le=c.stepSize),O&&c.forceNiceScale){var ve=Math.floor(Math.log10(le));le*=Math.pow(10,Oe-ve)}if(m&&b){var Pe=ae/ne;if(L)if(O)if(oe.mod(ae,le)!=0){var ht=oe.getGCD(le,Pe);le=Pe/ht<10?ht:Pe}else oe.mod(le,Pe)==0?le=Pe:(Pe=le,L=!1);else le=Pe;else if(O)oe.mod(ae,le)==0?Pe=le:le=Pe;else if(oe.mod(ae,le)==0)Pe=le;else{Pe=ae/(ne=Math.ceil(ae/le));var P=oe.getGCD(ae,le);ae/P<d&&(Pe=P),le=Pe}ne=Math.round(ae/le)}else{if(m||b){if(b)if(L)o=a-le*ne;else{var W=o;o=le*Math.floor(o/le),Math.abs(a-o)/oe.getGCD(ae,le)>d&&(o=a-le*$,o+=le*Math.floor((W-o)/le))}else if(m)if(L)a=o+le*ne;else{var q=a;a=le*Math.ceil(a/le),Math.abs(a-o)/oe.getGCD(ae,le)>d&&(a=o+le*$,a+=le*Math.ceil((q-a)/le))}}else if(M.isMultipleYAxis&&L){var ue=le*Math.floor(o/le),ye=ue+le*ne;ye<a&&(le*=2),ye=a,a=(o=ue)+le*ne,ae=Math.abs(a-o),o>0&&o<Math.abs(ye-a)&&(o=0,a=le*ne),a<0&&-a<Math.abs(ue-o)&&(a=0,o=-le*ne)}else o=le*Math.floor(o/le),a=le*Math.ceil(a/le);ae=Math.abs(a-o),le=oe.getGCD(ae,le),ne=Math.round(ae/le)}if(L||m||b||(ne=Math.ceil((ae-A)/(le+A)))>16&&oe.getPrimeFactors(ne).length<2&&ne++,!L&&c.forceNiceScale&&M.yValueDecimal===0&&ne>ae&&(ne=ae,le=Math.round(ae/ne)),ne>d&&(!L&&!O||c.forceNiceScale)){var nt=oe.getPrimeFactors(ne),Ft=nt.length-1,an=ne;e:for(var hn=0;hn<Ft;hn++)for(var Jt=0;Jt<=Ft-hn;Jt++){for(var wo=Math.min(Jt+hn,Ft),Ro=an,sr=1,qr=Jt;qr<=wo;qr++)sr*=nt[qr];if((Ro/=sr)<d){an=Ro;break e}}le=an===ne?ae:ae/an,ne=Math.round(ae/le)}M.isMultipleYAxis&&M.multiAxisTickAmount==0&&M.ignoreYAxisIndexes.indexOf(w)<0&&(M.multiAxisTickAmount=ne);var $r=o-le,Ii=le*A;do $r+=le,U.push(oe.stripNumber($r,7));while(a-$r>Ii);return{result:U,niceMin:U[0],niceMax:U[U.length-1]}}},{key:"linearScale",value:function(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,b=Math.abs(a-o),w=[];if(o===a)return{result:w=[o],niceMin:w[0],niceMax:w[w.length-1]};(c=this._adjustTicksForSmallRange(c,d,b))==="dataPoints"&&(c=this.w.globals.dataPoints-1),m||(m=b/c),m=Math.round(10*(m+Number.EPSILON))/10,c===Number.MAX_VALUE&&(c=5,m=1);for(var A=o;c>=0;)w.push(A),A=oe.preciseAddition(A,m),c-=1;return{result:w,niceMin:w[0],niceMax:w[w.length-1]}}},{key:"logarithmicScaleNice",value:function(o,a,c){a<=0&&(a=Math.max(o,c)),o<=0&&(o=Math.min(a,c));for(var d=[],m=Math.ceil(Math.log(a)/Math.log(c)+1),b=Math.floor(Math.log(o)/Math.log(c));b<m;b++)d.push(Math.pow(c,b));return{result:d,niceMin:d[0],niceMax:d[d.length-1]}}},{key:"logarithmicScale",value:function(o,a,c){a<=0&&(a=Math.max(o,c)),o<=0&&(o=Math.min(a,c));for(var d=[],m=Math.log(a)/Math.log(c),b=Math.log(o)/Math.log(c),w=m-b,A=Math.round(w),E=w/A,M=0,O=b;M<A;M++,O+=E)d.push(Math.pow(c,O));return d.push(Math.pow(c,m)),{result:d,niceMin:o,niceMax:a}}},{key:"_adjustTicksForSmallRange",value:function(o,a,c){var d=o;if(a!==void 0&&this.w.config.yaxis[a].labels.formatter&&this.w.config.yaxis[a].tickAmount===void 0){var m=Number(this.w.config.yaxis[a].labels.formatter(1));oe.isNumber(m)&&this.w.globals.yValueDecimal===0&&(d=Math.ceil(c))}return d<o?d:o}},{key:"setYScaleForIndex",value:function(o,a,c){var d=this.w.globals,m=this.w.config,b=d.isBarHorizontal?m.xaxis:m.yaxis[o];d.yAxisScale[o]===void 0&&(d.yAxisScale[o]=[]);var w=Math.abs(c-a);b.logarithmic&&w<=5&&(d.invalidLogScale=!0),b.logarithmic&&w>5?(d.allSeriesCollapsed=!1,d.yAxisScale[o]=b.forceNiceScale?this.logarithmicScaleNice(a,c,b.logBase):this.logarithmicScale(a,c,b.logBase)):c!==-Number.MAX_VALUE&&oe.isNumber(c)&&a!==Number.MAX_VALUE&&oe.isNumber(a)?(d.allSeriesCollapsed=!1,d.yAxisScale[o]=this.niceScale(a,c,o)):d.yAxisScale[o]=this.niceScale(Number.MIN_VALUE,0,o)}},{key:"setXScale",value:function(o,a){var c=this.w,d=c.globals,m=Math.abs(a-o);if(a!==-Number.MAX_VALUE&&oe.isNumber(a)){var b=d.xTickAmount+1;m<10&&m>1&&(b=m),d.xAxisScale=this.linearScale(o,a,b,0,c.config.xaxis.stepSize)}else d.xAxisScale=this.linearScale(0,10,10);return d.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var o=this,a=this.w.config,c=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var d=c.seriesYAxisMap,m=c.minYArr,b=c.maxYArr;c.allSeriesCollapsed=!0,c.barGroups=[],d.forEach(function(w,A){var E=[];w.forEach(function(M){var O=a.series[M].group;E.indexOf(O)<0&&E.push(O)}),w.length>0?function(){var M,O,L=Number.MAX_VALUE,$=-Number.MAX_VALUE,Y=L,U=$;if(a.chart.stacked)(function(){var le=new Array(c.dataPoints).fill(0),me=[],Oe=[],Te=[];E.forEach(function(){me.push(le.map(function(){return Number.MIN_VALUE})),Oe.push(le.map(function(){return Number.MIN_VALUE})),Te.push(le.map(function(){return Number.MIN_VALUE}))});for(var Ve=function(Pe){!M&&a.series[w[Pe]].type&&(M=a.series[w[Pe]].type);var ht=w[Pe];O=a.series[ht].group?a.series[ht].group:"axis-".concat(A),!(c.collapsedSeriesIndices.indexOf(ht)<0&&c.ancillaryCollapsedSeriesIndices.indexOf(ht)<0)||(c.allSeriesCollapsed=!1,E.forEach(function(P,W){if(a.series[ht].group===P)for(var q=0;q<c.series[ht].length;q++){var ue=c.series[ht][q];ue>=0?Oe[W][q]+=ue:Te[W][q]+=ue,me[W][q]+=ue,Y=Math.min(Y,ue),U=Math.max(U,ue)}})),M!=="bar"&&M!=="column"||c.barGroups.push(O)},ve=0;ve<w.length;ve++)Ve(ve);M||(M=a.chart.type),M==="bar"||M==="column"?E.forEach(function(Pe,ht){L=Math.min(L,Math.min.apply(null,Te[ht])),$=Math.max($,Math.max.apply(null,Oe[ht]))}):(E.forEach(function(Pe,ht){Y=Math.min(Y,Math.min.apply(null,me[ht])),U=Math.max(U,Math.max.apply(null,me[ht]))}),L=Y,$=U),L===Number.MIN_VALUE&&$===Number.MIN_VALUE&&($=-Number.MAX_VALUE)})();else for(var ne=0;ne<w.length;ne++){var ae=w[ne];L=Math.min(L,m[ae]),$=Math.max($,b[ae]),!(c.collapsedSeriesIndices.indexOf(ae)<0&&c.ancillaryCollapsedSeriesIndices.indexOf(ae)<0)||(c.allSeriesCollapsed=!1)}a.yaxis[A].min!==void 0&&(L=typeof a.yaxis[A].min=="function"?a.yaxis[A].min(L):a.yaxis[A].min),a.yaxis[A].max!==void 0&&($=typeof a.yaxis[A].max=="function"?a.yaxis[A].max($):a.yaxis[A].max),c.barGroups=c.barGroups.filter(function(le,me,Oe){return Oe.indexOf(le)===me}),o.setYScaleForIndex(A,L,$),w.forEach(function(le){m[le]=c.yAxisScale[A].niceMin,b[le]=c.yAxisScale[A].niceMax})}():o.setYScaleForIndex(A,0,-Number.MAX_VALUE)})}}]),C}(),Ec=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.scales=new nu(o)}return rn(C,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,m=this.w.config,b=this.w.globals,w=-Number.MAX_VALUE,A=Number.MIN_VALUE;d===null&&(d=o+1);var E=b.series,M=E,O=E;m.chart.type==="candlestick"?(M=b.seriesCandleL,O=b.seriesCandleH):m.chart.type==="boxPlot"?(M=b.seriesCandleO,O=b.seriesCandleC):b.isRangeData&&(M=b.seriesRangeStart,O=b.seriesRangeEnd);var L=!1;if(b.seriesX.length>=d){var $,Y=($=b.brushSource)===null||$===void 0?void 0:$.w.config.chart.brush;(m.chart.zoom.enabled&&m.chart.zoom.autoScaleYaxis||Y!=null&&Y.enabled&&Y!=null&&Y.autoScaleYaxis)&&(L=!0)}for(var U=o;U<d;U++){b.dataPoints=Math.max(b.dataPoints,E[U].length);var ne=m.series[U].type;b.categoryLabels.length&&(b.dataPoints=b.categoryLabels.filter(function(Te){return Te!==void 0}).length),b.labels.length&&m.xaxis.type!=="datetime"&&b.series.reduce(function(Te,Ve){return Te+Ve.length},0)!==0&&(b.dataPoints=Math.max(b.dataPoints,b.labels.length));var ae=0,le=E[U].length-1;if(L){if(m.xaxis.min)for(;ae<le&&b.seriesX[U][ae]<m.xaxis.min;ae++);if(m.xaxis.max)for(;le>ae&&b.seriesX[U][le]>m.xaxis.max;le--);}for(var me=ae;me<=le&&me<b.series[U].length;me++){var Oe=E[U][me];if(Oe!==null&&oe.isNumber(Oe)){switch(O[U][me]!==void 0&&(w=Math.max(w,O[U][me]),a=Math.min(a,O[U][me])),M[U][me]!==void 0&&(a=Math.min(a,M[U][me]),c=Math.max(c,M[U][me])),ne){case"candlestick":b.seriesCandleC[U][me]!==void 0&&(w=Math.max(w,b.seriesCandleH[U][me]),a=Math.min(a,b.seriesCandleL[U][me]));break;case"boxPlot":b.seriesCandleC[U][me]!==void 0&&(w=Math.max(w,b.seriesCandleC[U][me]),a=Math.min(a,b.seriesCandleO[U][me]))}ne&&ne!=="candlestick"&&ne!=="boxPlot"&&ne!=="rangeArea"&&ne!=="rangeBar"&&(w=Math.max(w,b.series[U][me]),a=Math.min(a,b.series[U][me])),c=w,b.seriesGoals[U]&&b.seriesGoals[U][me]&&Array.isArray(b.seriesGoals[U][me])&&b.seriesGoals[U][me].forEach(function(Te){A!==Number.MIN_VALUE&&(A=Math.min(A,Te.value),a=A),w=Math.max(w,Te.value),c=w}),oe.isFloat(Oe)&&(Oe=oe.noExponents(Oe),b.yValueDecimal=Math.max(b.yValueDecimal,Oe.toString().split(".")[1].length)),A>M[U][me]&&M[U][me]<0&&(A=M[U][me])}else b.hasNullValues=!0}ne!=="bar"&&ne!=="column"||(A<0&&w<0&&(w=0,c=Math.max(c,0)),A===Number.MIN_VALUE&&(A=0,a=Math.min(a,0)))}return m.chart.type==="rangeBar"&&b.seriesRangeStart.length&&b.isBarHorizontal&&(A=a),m.chart.type==="bar"&&(A<0&&w<0&&(w=0),A===Number.MIN_VALUE&&(A=0)),{minY:A,maxY:w,lowestY:a,highestY:c}}},{key:"setYRange",value:function(){var o=this.w.globals,a=this.w.config;o.maxY=-Number.MAX_VALUE,o.minY=Number.MIN_VALUE;var c,d=Number.MAX_VALUE;if(o.isMultipleYAxis){d=Number.MAX_VALUE;for(var m=0;m<o.series.length;m++)c=this.getMinYMaxY(m),o.minYArr[m]=c.lowestY,o.maxYArr[m]=c.highestY,d=Math.min(d,c.lowestY)}return c=this.getMinYMaxY(0,d,null,o.series.length),a.chart.type==="bar"?(o.minY=c.minY,o.maxY=c.maxY):(o.minY=c.lowestY,o.maxY=c.highestY),d=c.lowestY,a.chart.stacked&&this._setStackedMinMax(),a.chart.type==="line"||a.chart.type==="area"||a.chart.type==="scatter"||a.chart.type==="candlestick"||a.chart.type==="boxPlot"||a.chart.type==="rangeBar"&&!o.isBarHorizontal?o.minY===Number.MIN_VALUE&&d!==-Number.MAX_VALUE&&d!==o.maxY&&(o.minY=d):o.minY=o.minY!==Number.MIN_VALUE?Math.min(c.minY,o.minY):c.minY,a.yaxis.forEach(function(b,w){b.max!==void 0&&(typeof b.max=="number"?o.maxYArr[w]=b.max:typeof b.max=="function"&&(o.maxYArr[w]=b.max(o.isMultipleYAxis?o.maxYArr[w]:o.maxY)),o.maxY=o.maxYArr[w]),b.min!==void 0&&(typeof b.min=="number"?o.minYArr[w]=b.min:typeof b.min=="function"&&(o.minYArr[w]=b.min(o.isMultipleYAxis?o.minYArr[w]===Number.MIN_VALUE?0:o.minYArr[w]:o.minY)),o.minY=o.minYArr[w])}),o.isBarHorizontal&&["min","max"].forEach(function(b){a.xaxis[b]!==void 0&&typeof a.xaxis[b]=="number"&&(b==="min"?o.minY=a.xaxis[b]:o.maxY=a.xaxis[b])}),o.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),o.minY=d):(this.scales.setYScaleForIndex(0,o.minY,o.maxY),o.minY=o.yAxisScale[0].niceMin,o.maxY=o.yAxisScale[0].niceMax,o.minYArr[0]=o.minY,o.maxYArr[0]=o.maxY),o.barGroups=[],o.lineGroups=[],o.areaGroups=[],a.series.forEach(function(b){switch(b.type||a.chart.type){case"bar":case"column":o.barGroups.push(b.group);break;case"line":o.lineGroups.push(b.group);break;case"area":o.areaGroups.push(b.group)}}),o.barGroups=o.barGroups.filter(function(b,w,A){return A.indexOf(b)===w}),o.lineGroups=o.lineGroups.filter(function(b,w,A){return A.indexOf(b)===w}),o.areaGroups=o.areaGroups.filter(function(b,w,A){return A.indexOf(b)===w}),{minY:o.minY,maxY:o.maxY,minYArr:o.minYArr,maxYArr:o.maxYArr,yAxisScale:o.yAxisScale}}},{key:"setXRange",value:function(){var o=this.w.globals,a=this.w.config,c=a.xaxis.type==="numeric"||a.xaxis.type==="datetime"||a.xaxis.type==="category"&&!o.noLabelsProvided||o.noLabelsProvided||o.isXNumeric;if(o.isXNumeric&&function(){for(var A=0;A<o.series.length;A++)if(o.labels[A])for(var E=0;E<o.labels[A].length;E++)o.labels[A][E]!==null&&oe.isNumber(o.labels[A][E])&&(o.maxX=Math.max(o.maxX,o.labels[A][E]),o.initialMaxX=Math.max(o.maxX,o.labels[A][E]),o.minX=Math.min(o.minX,o.labels[A][E]),o.initialMinX=Math.min(o.minX,o.labels[A][E]))}(),o.noLabelsProvided&&a.xaxis.categories.length===0&&(o.maxX=o.labels[o.labels.length-1],o.initialMaxX=o.labels[o.labels.length-1],o.minX=1,o.initialMinX=1),o.isXNumeric||o.noLabelsProvided||o.dataFormatXNumeric){var d=10;if(a.xaxis.tickAmount===void 0)d=Math.round(o.svgWidth/150),a.xaxis.type==="numeric"&&o.dataPoints<30&&(d=o.dataPoints-1),d>o.dataPoints&&o.dataPoints!==0&&(d=o.dataPoints-1);else if(a.xaxis.tickAmount==="dataPoints"){if(o.series.length>1&&(d=o.series[o.maxValsInArrayIndex].length-1),o.isXNumeric){var m=o.maxX-o.minX;m<30&&(d=m-1)}}else d=a.xaxis.tickAmount;if(o.xTickAmount=d,a.xaxis.max!==void 0&&typeof a.xaxis.max=="number"&&(o.maxX=a.xaxis.max),a.xaxis.min!==void 0&&typeof a.xaxis.min=="number"&&(o.minX=a.xaxis.min),a.xaxis.range!==void 0&&(o.minX=o.maxX-a.xaxis.range),o.minX!==Number.MAX_VALUE&&o.maxX!==-Number.MAX_VALUE)if(a.xaxis.convertedCatToNumeric&&!o.dataFormatXNumeric){for(var b=[],w=o.minX-1;w<o.maxX;w++)b.push(w+1);o.xAxisScale={result:b,niceMin:b[0],niceMax:b[b.length-1]}}else o.xAxisScale=this.scales.setXScale(o.minX,o.maxX);else o.xAxisScale=this.scales.linearScale(0,d,d,0,a.xaxis.stepSize),o.noLabelsProvided&&o.labels.length>0&&(o.xAxisScale=this.scales.linearScale(1,o.labels.length,d-1,0,a.xaxis.stepSize),o.seriesX=o.labels.slice());c&&(o.labels=o.xAxisScale.result.slice())}return o.isBarHorizontal&&o.labels.length&&(o.xTickAmount=o.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:o.minX,maxX:o.maxX}}},{key:"setZRange",value:function(){var o=this.w.globals;if(o.isDataXYZ){for(var a=0;a<o.series.length;a++)if(o.seriesZ[a]!==void 0)for(var c=0;c<o.seriesZ[a].length;c++)o.seriesZ[a][c]!==null&&oe.isNumber(o.seriesZ[a][c])&&(o.maxZ=Math.max(o.maxZ,o.seriesZ[a][c]),o.minZ=Math.min(o.minZ,o.seriesZ[a][c]))}}},{key:"_handleSingleDataPoint",value:function(){var o=this.w.globals,a=this.w.config;if(o.minX===o.maxX){var c=new ja(this.ctx);if(a.xaxis.type==="datetime"){var d=c.getDate(o.minX);a.xaxis.labels.datetimeUTC?d.setUTCDate(d.getUTCDate()-2):d.setDate(d.getDate()-2),o.minX=new Date(d).getTime();var m=c.getDate(o.maxX);a.xaxis.labels.datetimeUTC?m.setUTCDate(m.getUTCDate()+2):m.setDate(m.getDate()+2),o.maxX=new Date(m).getTime()}else(a.xaxis.type==="numeric"||a.xaxis.type==="category"&&!o.noLabelsProvided)&&(o.minX=o.minX-2,o.initialMinX=o.minX,o.maxX=o.maxX+2,o.initialMaxX=o.maxX)}}},{key:"_getMinXDiff",value:function(){var o=this.w.globals;o.isXNumeric&&o.seriesX.forEach(function(a,c){a.length===1&&a.push(o.seriesX[o.maxValsInArrayIndex][o.seriesX[o.maxValsInArrayIndex].length-1]);var d=a.slice();d.sort(function(m,b){return m-b}),d.forEach(function(m,b){if(b>0){var w=m-d[b-1];w>0&&(o.minXDiff=Math.min(w,o.minXDiff))}}),o.dataPoints!==1&&o.minXDiff!==Number.MAX_VALUE||(o.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var o=this,a=this.w.globals;if(a.series.length){var c=a.seriesGroups;c.length||(c=[this.w.globals.seriesNames.map(function(b){return b})]);var d={},m={};c.forEach(function(b){d[b]=[],m[b]=[],o.w.config.series.map(function(w,A){return b.indexOf(a.seriesNames[A])>-1?A:null}).filter(function(w){return w!==null}).forEach(function(w){for(var A=0;A<a.series[a.maxValsInArrayIndex].length;A++){var E,M,O,L;d[b][A]===void 0&&(d[b][A]=0,m[b][A]=0),(o.w.config.chart.stacked&&!a.comboCharts||o.w.config.chart.stacked&&a.comboCharts&&(!o.w.config.chart.stackOnlyBar||((E=o.w.config.series)===null||E===void 0||(M=E[w])===null||M===void 0?void 0:M.type)==="bar"||((O=o.w.config.series)===null||O===void 0||(L=O[w])===null||L===void 0?void 0:L.type)==="column"))&&a.series[w][A]!==null&&oe.isNumber(a.series[w][A])&&(a.series[w][A]>0?d[b][A]+=parseFloat(a.series[w][A])+1e-4:m[b][A]+=parseFloat(a.series[w][A]))}})}),Object.entries(d).forEach(function(b){var w=Lo(b,1)[0];d[w].forEach(function(A,E){a.maxY=Math.max(a.maxY,d[w][E]),a.minY=Math.min(a.minY,m[w][E])})})}}}]),C}(),_c=function(){function C(o,a){gn(this,C),this.ctx=o,this.elgrid=a,this.w=o.w;var c=this.w;this.xaxisFontSize=c.config.xaxis.labels.style.fontSize,this.axisFontFamily=c.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=c.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=c.config.chart.type==="bar"&&c.config.plotOptions.bar.horizontal,this.xAxisoffX=c.config.xaxis.position==="bottom"?c.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new Se(o)}return rn(C,[{key:"drawYaxis",value:function(o){var a=this.w,c=new tn(this.ctx),d=a.config.yaxis[o].labels.style,m=d.fontSize,b=d.fontFamily,w=d.fontWeight,A=c.group({class:"apexcharts-yaxis",rel:o,transform:"translate(".concat(a.globals.translateYAxisX[o],", 0)")});if(this.axesUtils.isYAxisHidden(o))return A;var E=c.group({class:"apexcharts-yaxis-texts-g"});A.add(E);var M=a.globals.yAxisScale[o].result.length-1,O=a.globals.gridHeight/M,L=a.globals.yLabelFormatters[o],$=this.axesUtils.checkForReversedLabels(o,a.globals.yAxisScale[o].result.slice());if(a.config.yaxis[o].labels.show){var Y=a.globals.translateY+a.config.yaxis[o].labels.offsetY;a.globals.isBarHorizontal?Y=0:a.config.chart.type==="heatmap"&&(Y-=O/2),Y+=parseInt(m,10)/3;for(var U=M;U>=0;U--){var ne=L($[U],U,a),ae=a.config.yaxis[o].labels.padding;a.config.yaxis[o].opposite&&a.config.yaxis.length!==0&&(ae*=-1);var le=this.getTextAnchor(a.config.yaxis[o].labels.align,a.config.yaxis[o].opposite),me=this.axesUtils.getYAxisForeColor(d.colors,o),Oe=Array.isArray(me)?me[U]:me,Te=oe.listToArray(a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-label tspan"))).map(function(ve){return ve.textContent}),Ve=c.drawText({x:ae,y:Y,text:Te.includes(ne)&&!a.config.yaxis[o].labels.showDuplicates?"":ne,textAnchor:le,fontSize:m,fontFamily:b,fontWeight:w,maxWidth:a.config.yaxis[o].labels.maxWidth,foreColor:Oe,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(d.cssClass)});E.add(Ve),this.addTooltip(Ve,ne),a.config.yaxis[o].labels.rotate!==0&&this.rotateLabel(c,Ve,firstLabel,a.config.yaxis[o].labels.rotate),Y+=O}}return this.addYAxisTitle(c,A,o),this.addAxisBorder(c,A,o,M,O),A}},{key:"getTextAnchor",value:function(o,a){return o==="left"?"start":o==="center"?"middle":o==="right"?"end":a?"start":"end"}},{key:"addTooltip",value:function(o,a){var c=document.createElementNS(this.w.globals.SVGNS,"title");c.textContent=Array.isArray(a)?a.join(" "):a,o.node.appendChild(c)}},{key:"rotateLabel",value:function(o,a,c,d){var m=o.rotateAroundCenter(c.node),b=o.rotateAroundCenter(a.node);a.node.setAttribute("transform","rotate(".concat(d," ").concat(m.x," ").concat(b.y,")"))}},{key:"addYAxisTitle",value:function(o,a,c){var d=this.w;if(d.config.yaxis[c].title.text!==void 0){var m=o.group({class:"apexcharts-yaxis-title"}),b=d.config.yaxis[c].opposite?d.globals.translateYAxisX[c]:0,w=o.drawText({x:b,y:d.globals.gridHeight/2+d.globals.translateY+d.config.yaxis[c].title.offsetY,text:d.config.yaxis[c].title.text,textAnchor:"end",foreColor:d.config.yaxis[c].title.style.color,fontSize:d.config.yaxis[c].title.style.fontSize,fontWeight:d.config.yaxis[c].title.style.fontWeight,fontFamily:d.config.yaxis[c].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(d.config.yaxis[c].title.style.cssClass)});m.add(w),a.add(m)}}},{key:"addAxisBorder",value:function(o,a,c,d,m){var b=this.w,w=b.config.yaxis[c].axisBorder,A=31+w.offsetX;if(b.config.yaxis[c].opposite&&(A=-31-w.offsetX),w.show){var E=o.drawLine(A,b.globals.translateY+w.offsetY-2,A,b.globals.gridHeight+b.globals.translateY+w.offsetY+2,w.color,0,w.width);a.add(E)}b.config.yaxis[c].axisTicks.show&&this.axesUtils.drawYAxisTicks(A,d,w,b.config.yaxis[c].axisTicks,c,m,a)}},{key:"drawYaxisInversed",value:function(o){var a=this.w,c=new tn(this.ctx),d=c.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),m=c.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(a.globals.translateXAxisX,", ").concat(a.globals.translateXAxisY,")")});d.add(m);var b=a.globals.yAxisScale[o].result.length-1,w=a.globals.gridWidth/b+.1,A=w+a.config.xaxis.labels.offsetX,E=a.globals.xLabelFormatter,M=this.axesUtils.checkForReversedLabels(o,a.globals.yAxisScale[o].result.slice()),O=a.globals.timescaleLabels;if(O.length>0&&(this.xaxisLabels=O.slice(),b=(M=O.slice()).length),a.config.xaxis.labels.show)for(var L=O.length?0:b;O.length?L<O.length:L>=0;O.length?L++:L--){var $=E(M[L],L,a),Y=a.globals.gridWidth+a.globals.padHorizontal-(A-w+a.config.xaxis.labels.offsetX);if(O.length){var U=this.axesUtils.getLabel(M,O,Y,L,this.drawnLabels,this.xaxisFontSize);Y=U.x,$=U.text,this.drawnLabels.push(U.text),L===0&&a.globals.skipFirstTimelinelabel&&($=""),L===M.length-1&&a.globals.skipLastTimelinelabel&&($="")}var ne=c.drawText({x:Y,y:this.xAxisoffX+a.config.xaxis.labels.offsetY+30-(a.config.xaxis.position==="top"?a.globals.xAxisHeight+a.config.xaxis.axisTicks.height-2:0),text:$,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[o]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:a.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(a.config.xaxis.labels.style.cssClass)});m.add(ne),ne.tspan($),this.addTooltip(ne,$),A+=w}return this.inversedYAxisTitleText(d),this.inversedYAxisBorder(d),d}},{key:"inversedYAxisBorder",value:function(o){var a=this.w,c=new tn(this.ctx),d=a.config.xaxis.axisBorder;if(d.show){var m=0;a.config.chart.type==="bar"&&a.globals.isXNumeric&&(m-=15);var b=c.drawLine(a.globals.padHorizontal+m+d.offsetX,this.xAxisoffX,a.globals.gridWidth,this.xAxisoffX,d.color,0,d.height);this.elgrid&&this.elgrid.elGridBorders&&a.config.grid.show?this.elgrid.elGridBorders.add(b):o.add(b)}}},{key:"inversedYAxisTitleText",value:function(o){var a=this.w,c=new tn(this.ctx);if(a.config.xaxis.title.text!==void 0){var d=c.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),m=c.drawText({x:a.globals.gridWidth/2+a.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(a.config.xaxis.title.style.fontSize)+a.config.xaxis.title.offsetY+20,text:a.config.xaxis.title.text,textAnchor:"middle",fontSize:a.config.xaxis.title.style.fontSize,fontFamily:a.config.xaxis.title.style.fontFamily,fontWeight:a.config.xaxis.title.style.fontWeight,foreColor:a.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(a.config.xaxis.title.style.cssClass)});d.add(m),o.add(d)}}},{key:"yAxisTitleRotate",value:function(o,a){var c=this.w,d=new tn(this.ctx),m=c.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-texts-g")),b=m?m.getBoundingClientRect():{width:0,height:0},w=c.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-title text")),A=w?w.getBoundingClientRect():{width:0,height:0};if(w){var E=this.xPaddingForYAxisTitle(o,b,A,a);w.setAttribute("x",E.xPos-(a?10:0));var M=d.rotateAroundCenter(w);w.setAttribute("transform","rotate(".concat(a?-1*c.config.yaxis[o].title.rotate:c.config.yaxis[o].title.rotate," ").concat(M.x," ").concat(M.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(o,a,c,d){var m=this.w,b=0,w=10;return m.config.yaxis[o].title.text===void 0||o<0?{xPos:b,padd:0}:(d?b=a.width+m.config.yaxis[o].title.offsetX+c.width/2+w/2:(b=-1*a.width+m.config.yaxis[o].title.offsetX+w/2+c.width/2,m.globals.isBarHorizontal&&(w=25,b=-1*a.width-m.config.yaxis[o].title.offsetX-w)),{xPos:b,padd:w})}},{key:"setYAxisXPosition",value:function(o,a){var c=this.w,d=0,m=0,b=18,w=1;c.config.yaxis.length>1&&(this.multipleYs=!0),c.config.yaxis.forEach(function(A,E){var M=c.globals.ignoreYAxisIndexes.includes(E)||!A.show||A.floating||o[E].width===0,O=o[E].width+a[E].width;A.opposite?c.globals.isBarHorizontal?(m=c.globals.gridWidth+c.globals.translateX-1,c.globals.translateYAxisX[E]=m-A.labels.offsetX):(m=c.globals.gridWidth+c.globals.translateX+w,M||(w+=O+20),c.globals.translateYAxisX[E]=m-A.labels.offsetX+20):(d=c.globals.translateX-b,M||(b+=O+20),c.globals.translateYAxisX[E]=d+A.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var o=this.w;oe.listToArray(o.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach(function(a,c){var d=o.config.yaxis[c];if(d&&!d.floating&&d.labels.align!==void 0){var m=o.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(c,"'] .apexcharts-yaxis-texts-g")),b=oe.listToArray(o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(c,"'] .apexcharts-yaxis-label"))),w=m.getBoundingClientRect();b.forEach(function(A){A.setAttribute("text-anchor",d.labels.align)}),d.labels.align!=="left"||d.opposite?d.labels.align==="center"?m.setAttribute("transform","translate(".concat(w.width/2*(d.opposite?1:-1),", 0)")):d.labels.align==="right"&&d.opposite&&m.setAttribute("transform","translate(".concat(w.width,", 0)")):m.setAttribute("transform","translate(-".concat(w.width,", 0)"))}})}}]),C}(),Dl=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.documentEvent=oe.bind(this.documentEvent,this)}return rn(C,[{key:"addEventListener",value:function(o,a){var c=this.w;c.globals.events.hasOwnProperty(o)?c.globals.events[o].push(a):c.globals.events[o]=[a]}},{key:"removeEventListener",value:function(o,a){var c=this.w;if(c.globals.events.hasOwnProperty(o)){var d=c.globals.events[o].indexOf(a);d!==-1&&c.globals.events[o].splice(d,1)}}},{key:"fireEvent",value:function(o,a){var c=this.w;if(c.globals.events.hasOwnProperty(o)){a&&a.length||(a=[]);for(var d=c.globals.events[o],m=d.length,b=0;b<m;b++)d[b].apply(null,a)}}},{key:"setupEventHandlers",value:function(){var o=this,a=this.w,c=this.ctx,d=a.globals.dom.baseEl.querySelector(a.globals.chartClass);this.ctx.eventList.forEach(function(m){d.addEventListener(m,function(b){var w=Object.assign({},a,{seriesIndex:a.globals.axisCharts?a.globals.capturedSeriesIndex:0,dataPointIndex:a.globals.capturedDataPointIndex});b.type==="mousemove"||b.type==="touchmove"?typeof a.config.chart.events.mouseMove=="function"&&a.config.chart.events.mouseMove(b,c,w):b.type==="mouseleave"||b.type==="touchleave"?typeof a.config.chart.events.mouseLeave=="function"&&a.config.chart.events.mouseLeave(b,c,w):(b.type==="mouseup"&&b.which===1||b.type==="touchend")&&(typeof a.config.chart.events.click=="function"&&a.config.chart.events.click(b,c,w),c.ctx.events.fireEvent("click",[b,c,w]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(m){a.globals.dom.baseEl.addEventListener(m,o.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(o){var a=this.w,c=o.target.className;if(o.type==="click"){var d=a.globals.dom.baseEl.querySelector(".apexcharts-menu");d&&d.classList.contains("apexcharts-menu-open")&&c!=="apexcharts-menu-icon"&&d.classList.remove("apexcharts-menu-open")}a.globals.clientX=o.type==="touchmove"?o.touches[0].clientX:o.clientX,a.globals.clientY=o.type==="touchmove"?o.touches[0].clientY:o.clientY}}]),C}(),qi=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"setCurrentLocaleValues",value:function(o){var a=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(a=this.w.config.chart.locales.concat(window.Apex.chart.locales));var c=a.filter(function(m){return m.name===o})[0];if(!c)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var d=oe.extend(ro,c);this.w.globals.locale=d.options}}]),C}(),jh=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"drawAxis",value:function(o,a){var c,d,m=this,b=this.w.globals,w=this.w.config,A=new zl(this.ctx,a),E=new _c(this.ctx,a);b.axisCharts&&o!=="radar"&&(b.isBarHorizontal?(d=E.drawYaxisInversed(0),c=A.drawXaxisInversed(0),b.dom.elGraphical.add(c),b.dom.elGraphical.add(d)):(c=A.drawXaxis(),b.dom.elGraphical.add(c),w.yaxis.map(function(M,O){if(b.ignoreYAxisIndexes.indexOf(O)===-1&&(d=E.drawYaxis(O),b.dom.Paper.add(d),m.w.config.grid.position==="back")){var L=b.dom.Paper.children()[1];L.remove(),b.dom.Paper.add(L)}})))}}]),C}(),oc=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"drawXCrosshairs",value:function(){var o=this.w,a=new tn(this.ctx),c=new Ya(this.ctx),d=o.config.xaxis.crosshairs.fill.gradient,m=o.config.xaxis.crosshairs.dropShadow,b=o.config.xaxis.crosshairs.fill.type,w=d.colorFrom,A=d.colorTo,E=d.opacityFrom,M=d.opacityTo,O=d.stops,L=m.enabled,$=m.left,Y=m.top,U=m.blur,ne=m.color,ae=m.opacity,le=o.config.xaxis.crosshairs.fill.color;if(o.config.xaxis.crosshairs.show){b==="gradient"&&(le=a.drawGradient("vertical",w,A,E,M,null,O,null));var me=a.drawRect();o.config.xaxis.crosshairs.width===1&&(me=a.drawLine());var Oe=o.globals.gridHeight;(!oe.isNumber(Oe)||Oe<0)&&(Oe=0);var Te=o.config.xaxis.crosshairs.width;(!oe.isNumber(Te)||Te<0)&&(Te=0),me.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:Oe,width:Te,height:Oe,fill:le,filter:"none","fill-opacity":o.config.xaxis.crosshairs.opacity,stroke:o.config.xaxis.crosshairs.stroke.color,"stroke-width":o.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":o.config.xaxis.crosshairs.stroke.dashArray}),L&&(me=c.dropShadow(me,{left:$,top:Y,blur:U,color:ne,opacity:ae})),o.globals.dom.elGraphical.add(me)}}},{key:"drawYCrosshairs",value:function(){var o=this.w,a=new tn(this.ctx),c=o.config.yaxis[0].crosshairs,d=o.globals.barPadForNumericAxis;if(o.config.yaxis[0].crosshairs.show){var m=a.drawLine(-d,0,o.globals.gridWidth+d,0,c.stroke.color,c.stroke.dashArray,c.stroke.width);m.attr({class:"apexcharts-ycrosshairs"}),o.globals.dom.elGraphical.add(m)}var b=a.drawLine(-d,0,o.globals.gridWidth+d,0,c.stroke.color,0,0);b.attr({class:"apexcharts-ycrosshairs-hidden"}),o.globals.dom.elGraphical.add(b)}}]),C}(),mh=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"checkResponsiveConfig",value:function(o){var a=this,c=this.w,d=c.config;if(d.responsive.length!==0){var m=d.responsive.slice();m.sort(function(E,M){return E.breakpoint>M.breakpoint?1:M.breakpoint>E.breakpoint?-1:0}).reverse();var b=new $a({}),w=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=m[0].breakpoint,O=window.innerWidth>0?window.innerWidth:screen.width;if(O>M){var L=oe.clone(c.globals.initialConfig);L.series=oe.clone(c.config.series);var $=bs.extendArrayProps(b,L,c);E=oe.extend($,E),E=oe.extend(c.config,E),a.overrideResponsiveOptions(E)}else for(var Y=0;Y<m.length;Y++)O<m[Y].breakpoint&&(E=bs.extendArrayProps(b,m[Y].options,c),E=oe.extend(c.config,E),a.overrideResponsiveOptions(E))};if(o){var A=bs.extendArrayProps(b,o,c);A=oe.extend(c.config,A),w(A=oe.extend(A,o))}else w({})}}},{key:"overrideResponsiveOptions",value:function(o){var a=new $a(o).init({responsiveOverride:!0});this.w.config=a}}]),C}(),Tu=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return rn(C,[{key:"checkHeatmapDistributed",value:function(){var o=this.w.config,a=o.chart,c=o.plotOptions;return a.type==="treemap"&&c.treemap&&c.treemap.distributed||a.type==="heatmap"&&c.heatmap&&c.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var o=this.w.config,a=o.chart,c=o.plotOptions;return c.bar&&c.bar.distributed&&(a.type==="bar"||a.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var o=this.w,a=new oe;o.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(o.config.theme.mode));var c=vn(o.config.colors||o.config.fill.colors||[]);o.globals.colors=this.getColors(c),this.applySeriesColors(o.globals.seriesColors,o.globals.colors),o.config.theme.monochrome.enabled&&(o.globals.colors=this.getMonochromeColors(o.config.theme.monochrome,o.globals.series,a));var d=o.globals.colors.slice();this.pushExtraColors(o.globals.colors),this.applyColorTypes(["fill","stroke"],d),this.applyDataLabelsColors(d),this.applyRadarPolygonsColors(),this.applyMarkersColors(d)}},{key:"getColors",value:function(o){var a=this,c=this.w;return o&&o.length!==0?Array.isArray(o)&&o.length>0&&typeof o[0]=="function"?(this.isColorFn=!0,c.config.series.map(function(d,m){var b=o[m]||o[0];return typeof b=="function"?b({value:c.globals.axisCharts?c.globals.series[m][0]||0:c.globals.series[m],seriesIndex:m,dataPointIndex:m,w:a.w}):b})):o:this.predefined()}},{key:"applySeriesColors",value:function(o,a){o.forEach(function(c,d){c&&(a[d]=c)})}},{key:"getMonochromeColors",value:function(o,a,c){var d=o.color,m=o.shadeIntensity,b=o.shadeTo,w=this.isBarDistributed||this.isHeatmapDistributed?a[0].length*a.length:a.length,A=1/(w/m),E=0;return Array.from({length:w},function(){var M=b==="dark"?c.shadeColor(-1*E,d):c.shadeColor(E,d);return E+=A,M})}},{key:"applyColorTypes",value:function(o,a){var c=this,d=this.w;o.forEach(function(m){d.globals[m].colors=d.config[m].colors===void 0?c.isColorFn?d.config.colors:a:d.config[m].colors.slice(),c.pushExtraColors(d.globals[m].colors)})}},{key:"applyDataLabelsColors",value:function(o){var a=this.w;a.globals.dataLabels.style.colors=a.config.dataLabels.style.colors===void 0?o:a.config.dataLabels.style.colors.slice(),this.pushExtraColors(a.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var o=this.w;o.globals.radarPolygons.fill.colors=o.config.plotOptions.radar.polygons.fill.colors===void 0?[o.config.theme.mode==="dark"?"#424242":"none"]:o.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(o.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(o){var a=this.w;a.globals.markers.colors=a.config.markers.colors===void 0?o:a.config.markers.colors.slice(),this.pushExtraColors(a.globals.markers.colors)}},{key:"pushExtraColors",value:function(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=this.w,m=a||d.globals.series.length;if(c===null&&(c=this.isBarDistributed||this.isHeatmapDistributed||d.config.chart.type==="heatmap"&&d.config.plotOptions.heatmap&&d.config.plotOptions.heatmap.colorScale.inverse),c&&d.globals.series.length&&(m=d.globals.series[d.globals.maxValsInArrayIndex].length*d.globals.series.length),o.length<m)for(var b=m-o.length,w=0;w<b;w++)o.push(o[w])}},{key:"updateThemeOptions",value:function(o){o.chart=o.chart||{},o.tooltip=o.tooltip||{};var a=o.theme.mode,c=a==="dark"?"palette4":a==="light"?"palette1":o.theme.palette||"palette1",d=a==="dark"?"#f6f7f8":a==="light"?"#373d3f":o.chart.foreColor||"#373d3f";return o.tooltip.theme=a||"light",o.chart.foreColor=d,o.theme.palette=c,o}},{key:"predefined",value:function(){var o={palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"],palette3:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"],palette4:["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"],palette5:["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"],default:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]};return o[this.w.config.theme.palette]||o.default}}]),C}(),ph=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(o){var a=this.w,c=o==="title"?a.config.title:a.config.subtitle,d=a.globals.svgWidth/2,m=c.offsetY,b="middle";if(c.align==="left"?(d=10,b="start"):c.align==="right"&&(d=a.globals.svgWidth-10,b="end"),d+=c.offsetX,m=m+parseInt(c.style.fontSize,10)+c.margin/2,c.text!==void 0){var w=new tn(this.ctx).drawText({x:d,y:m,text:c.text,textAnchor:b,fontSize:c.style.fontSize,fontFamily:c.style.fontFamily,fontWeight:c.style.fontWeight,foreColor:c.style.color,opacity:1});w.node.setAttribute("class","apexcharts-".concat(o,"-text")),a.globals.dom.Paper.add(w)}}}]),C}(),Md=function(){function C(o){gn(this,C),this.w=o.w,this.dCtx=o}return rn(C,[{key:"getTitleSubtitleCoords",value:function(o){var a=this.w,c=0,d=0,m=o==="title"?a.config.title.floating:a.config.subtitle.floating,b=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-text"));if(b!==null&&!m){var w=b.getBoundingClientRect();c=w.width,d=a.globals.axisCharts?w.height+5:w.height}return{width:c,height:d}}},{key:"getLegendsRect",value:function(){var o=this.w,a=o.globals.dom.elLegendWrap;o.config.legend.height||o.config.legend.position!=="top"&&o.config.legend.position!=="bottom"||(a.style.maxHeight=o.globals.svgHeight/2+"px");var c=Object.assign({},oe.getBoundingClientRect(a));return a!==null&&!o.config.legend.floating&&o.config.legend.show?this.dCtx.lgRect={x:c.x,y:c.y,height:c.height,width:c.height===0?0:c.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},o.config.legend.position!=="left"&&o.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>o.globals.svgWidth&&(this.dCtx.lgRect.width=o.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var o=this,a=this.w,c=[];a.config.series.forEach(function(A,E){A.data.forEach(function(M,O){var L;L=a.globals.series[E][O],d=a.config.dataLabels.formatter(L,{ctx:o.dCtx.ctx,seriesIndex:E,dataPointIndex:O,w:a}),c.push(d)})});var d=oe.getLargestStringFromArr(c),m=new tn(this.dCtx.ctx),b=a.config.dataLabels.style,w=m.getTextRects(d,parseInt(b.fontSize),b.fontFamily);return{width:1.05*w.width,height:w.height}}},{key:"getLargestStringFromMultiArr",value:function(o,a){var c=o;if(this.w.globals.isMultiLineX){var d=a.map(function(b,w){return Array.isArray(b)?b.length:1}),m=Math.max.apply(Math,vn(d));c=a[d.indexOf(m)]}return c}}]),C}(),Eu=function(){function C(o){gn(this,C),this.w=o.w,this.dCtx=o}return rn(C,[{key:"getxAxisLabelsCoords",value:function(){var o,a=this.w,c=a.globals.labels.slice();if(a.config.xaxis.convertedCatToNumeric&&c.length===0&&(c=a.globals.categoryLabels),a.globals.timescaleLabels.length>0){var d=this.getxAxisTimeScaleLabelsCoords();o={width:d.width,height:d.height},a.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=a.config.legend.position!=="left"&&a.config.legend.position!=="right"||a.config.legend.floating?0:this.dCtx.lgRect.width;var m=a.globals.xLabelFormatter,b=oe.getLargestStringFromArr(c),w=this.dCtx.dimHelpers.getLargestStringFromMultiArr(b,c);a.globals.isBarHorizontal&&(w=b=a.globals.yAxisScale[0].result.reduce(function(Y,U){return Y.length>U.length?Y:U},0));var A=new pe(this.dCtx.ctx),E=b;b=A.xLabelFormat(m,b,E,{i:void 0,dateFormatter:new ja(this.dCtx.ctx).formatDate,w:a}),w=A.xLabelFormat(m,w,E,{i:void 0,dateFormatter:new ja(this.dCtx.ctx).formatDate,w:a}),(a.config.xaxis.convertedCatToNumeric&&b===void 0||String(b).trim()==="")&&(w=b="1");var M=new tn(this.dCtx.ctx),O=M.getTextRects(b,a.config.xaxis.labels.style.fontSize),L=O;if(b!==w&&(L=M.getTextRects(w,a.config.xaxis.labels.style.fontSize)),(o={width:O.width>=L.width?O.width:L.width,height:O.height>=L.height?O.height:L.height}).width*c.length>a.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&a.config.xaxis.labels.rotate!==0||a.config.xaxis.labels.rotateAlways){if(!a.globals.isBarHorizontal){a.globals.rotateXLabels=!0;var $=function(Y){return M.getTextRects(Y,a.config.xaxis.labels.style.fontSize,a.config.xaxis.labels.style.fontFamily,"rotate(".concat(a.config.xaxis.labels.rotate," 0 0)"),!1)};O=$(b),b!==w&&(L=$(w)),o.height=(O.height>L.height?O.height:L.height)/1.5,o.width=O.width>L.width?O.width:L.width}}else a.globals.rotateXLabels=!1}return a.config.xaxis.labels.show||(o={width:0,height:0}),{width:o.width,height:o.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var o,a=this.w;if(!a.globals.hasXaxisGroups)return{width:0,height:0};var c,d=((o=a.config.xaxis.group.style)===null||o===void 0?void 0:o.fontSize)||a.config.xaxis.labels.style.fontSize,m=a.globals.groups.map(function(O){return O.title}),b=oe.getLargestStringFromArr(m),w=this.dCtx.dimHelpers.getLargestStringFromMultiArr(b,m),A=new tn(this.dCtx.ctx),E=A.getTextRects(b,d),M=E;return b!==w&&(M=A.getTextRects(w,d)),c={width:E.width>=M.width?E.width:M.width,height:E.height>=M.height?E.height:M.height},a.config.xaxis.labels.show||(c={width:0,height:0}),{width:c.width,height:c.height}}},{key:"getxAxisTitleCoords",value:function(){var o=this.w,a=0,c=0;if(o.config.xaxis.title.text!==void 0){var d=new tn(this.dCtx.ctx).getTextRects(o.config.xaxis.title.text,o.config.xaxis.title.style.fontSize);a=d.width,c=d.height}return{width:a,height:c}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var o,a=this.w;this.dCtx.timescaleLabels=a.globals.timescaleLabels.slice();var c=this.dCtx.timescaleLabels.map(function(m){return m.value}),d=c.reduce(function(m,b){return m===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):m.length>b.length?m:b},0);return 1.05*(o=new tn(this.dCtx.ctx).getTextRects(d,a.config.xaxis.labels.style.fontSize)).width*c.length>a.globals.gridWidth&&a.config.xaxis.labels.rotate!==0&&(a.globals.overlappingXLabels=!0),o}},{key:"additionalPaddingXLabels",value:function(o){var a=this,c=this.w,d=c.globals,m=c.config,b=m.xaxis.type,w=o.width;d.skipLastTimelinelabel=!1,d.skipFirstTimelinelabel=!1;var A=c.config.yaxis[0].opposite&&c.globals.isBarHorizontal,E=function(M,O){m.yaxis.length>1&&function(L){return d.collapsedSeriesIndices.indexOf(L)!==-1}(O)||function(L){if(a.dCtx.timescaleLabels&&a.dCtx.timescaleLabels.length){var $=a.dCtx.timescaleLabels[0],Y=a.dCtx.timescaleLabels[a.dCtx.timescaleLabels.length-1].position+w/1.75-a.dCtx.yAxisWidthRight,U=$.position-w/1.75+a.dCtx.yAxisWidthLeft,ne=c.config.legend.position==="right"&&a.dCtx.lgRect.width>0?a.dCtx.lgRect.width:0;Y>d.svgWidth-d.translateX-ne&&(d.skipLastTimelinelabel=!0),U<-(L.show&&!L.floating||m.chart.type!=="bar"&&m.chart.type!=="candlestick"&&m.chart.type!=="rangeBar"&&m.chart.type!=="boxPlot"?10:w/1.75)&&(d.skipFirstTimelinelabel=!0)}else b==="datetime"?a.dCtx.gridPad.right<w&&!d.rotateXLabels&&(d.skipLastTimelinelabel=!0):b!=="datetime"&&a.dCtx.gridPad.right<w/2-a.dCtx.yAxisWidthRight&&!d.rotateXLabels&&!c.config.xaxis.labels.trim&&(a.dCtx.xPadRight=w/2+1)}(M)};m.yaxis.forEach(function(M,O){A?(a.dCtx.gridPad.left<w&&(a.dCtx.xPadLeft=w/2+1),a.dCtx.xPadRight=w/2+1):E(M,O)})}}]),C}(),Pd=function(){function C(o){gn(this,C),this.w=o.w,this.dCtx=o}return rn(C,[{key:"getyAxisLabelsCoords",value:function(){var o=this,a=this.w,c=[],d=10,m=new Se(this.dCtx.ctx);return a.config.yaxis.map(function(b,w){var A={seriesIndex:w,dataPointIndex:-1,w:a},E=a.globals.yAxisScale[w],M=0;if(!m.isYAxisHidden(w)&&b.labels.show&&b.labels.minWidth!==void 0&&(M=b.labels.minWidth),!m.isYAxisHidden(w)&&b.labels.show&&E.result.length){var O=a.globals.yLabelFormatters[w],L=E.niceMin===Number.MIN_VALUE?0:E.niceMin,$=E.result.reduce(function(Oe,Te){var Ve,ve;return((Ve=String(O(Oe,A)))===null||Ve===void 0?void 0:Ve.length)>((ve=String(O(Te,A)))===null||ve===void 0?void 0:ve.length)?Oe:Te},L),Y=$=O($,A);if($!==void 0&&$.length!==0||($=E.niceMax),a.globals.isBarHorizontal){d=0;var U=a.globals.labels.slice();$=oe.getLargestStringFromArr(U),$=O($,{seriesIndex:w,dataPointIndex:-1,w:a}),Y=o.dCtx.dimHelpers.getLargestStringFromMultiArr($,U)}var ne=new tn(o.dCtx.ctx),ae="rotate(".concat(b.labels.rotate," 0 0)"),le=ne.getTextRects($,b.labels.style.fontSize,b.labels.style.fontFamily,ae,!1),me=le;$!==Y&&(me=ne.getTextRects(Y,b.labels.style.fontSize,b.labels.style.fontFamily,ae,!1)),c.push({width:(M>me.width||M>le.width?M:me.width>le.width?me.width:le.width)+d,height:me.height>le.height?me.height:le.height})}else c.push({width:0,height:0})}),c}},{key:"getyAxisTitleCoords",value:function(){var o=this,a=this.w,c=[];return a.config.yaxis.map(function(d,m){if(d.show&&d.title.text!==void 0){var b=new tn(o.dCtx.ctx),w="rotate(".concat(d.title.rotate," 0 0)"),A=b.getTextRects(d.title.text,d.title.style.fontSize,d.title.style.fontFamily,w,!1);c.push({width:A.width,height:A.height})}else c.push({width:0,height:0})}),c}},{key:"getTotalYAxisWidth",value:function(){var o=this.w,a=0,c=0,d=0,m=o.globals.yAxisScale.length>1?10:0,b=new Se(this.dCtx.ctx),w=function(A,E){var M=o.config.yaxis[E].floating,O=0;A.width>0&&!M?(O=A.width+m,function(L){return o.globals.ignoreYAxisIndexes.indexOf(L)>-1}(E)&&(O=O-A.width-m)):O=M||b.isYAxisHidden(E)?0:5,o.config.yaxis[E].opposite?d+=O:c+=O,a+=O};return o.globals.yLabelsCoords.map(function(A,E){w(A,E)}),o.globals.yTitleCoords.map(function(A,E){w(A,E)}),o.globals.isBarHorizontal&&!o.config.yaxis[0].floating&&(a=o.globals.yLabelsCoords[0].width+o.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=c,this.dCtx.yAxisWidthRight=d,a}}]),C}(),bh=function(){function C(o){gn(this,C),this.w=o.w,this.dCtx=o}return rn(C,[{key:"gridPadForColumnsInNumericAxis",value:function(o){var a=this.w,c=a.config,d=a.globals;if(d.noData||d.collapsedSeries.length+d.ancillaryCollapsedSeries.length===c.series.length)return 0;var m=function($){return["bar","rangeBar","candlestick","boxPlot"].includes($)},b=c.chart.type,w=0,A=m(b)?c.series.length:1;d.comboBarCount>0&&(A=d.comboBarCount),d.collapsedSeries.forEach(function($){m($.type)&&(A-=1)}),c.chart.stacked&&(A=1);var E=m(b)||d.comboBarCount>0,M=Math.abs(d.initialMaxX-d.initialMinX);if(E&&d.isXNumeric&&!d.isBarHorizontal&&A>0&&M!==0){M<=3&&(M=d.dataPoints);var O=M/o,L=d.minXDiff&&d.minXDiff/O>0?d.minXDiff/O:0;L>o/2&&(L/=2),(w=L*parseInt(c.plotOptions.bar.columnWidth,10)/100)<1&&(w=1),d.barPadForNumericAxis=w}return w}},{key:"gridPadFortitleSubtitle",value:function(){var o=this,a=this.w,c=a.globals,d=this.dCtx.isSparkline||!c.axisCharts?0:10;["title","subtitle"].forEach(function(w){a.config[w].text!==void 0?d+=a.config[w].margin:d+=o.dCtx.isSparkline||!c.axisCharts?0:5}),!a.config.legend.show||a.config.legend.position!=="bottom"||a.config.legend.floating||c.axisCharts||(d+=10);var m=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),b=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");c.gridHeight-=m.height+b.height+d,c.translateY+=m.height+b.height+d}},{key:"setGridXPosForDualYAxis",value:function(o,a){var c=this.w,d=new Se(this.dCtx.ctx);c.config.yaxis.forEach(function(m,b){c.globals.ignoreYAxisIndexes.indexOf(b)!==-1||m.floating||d.isYAxisHidden(b)||(m.opposite&&(c.globals.translateX-=a[b].width+o[b].width+parseInt(m.labels.style.fontSize,10)/1.2+12),c.globals.translateX<2&&(c.globals.translateX=2))})}}]),C}(),fc=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new Md(this),this.dimYAxis=new Pd(this),this.dimXAxis=new Eu(this),this.dimGrid=new bh(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return rn(C,[{key:"plotCoords",value:function(){var o=this,a=this.w,c=a.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var d=Array.isArray(a.config.stroke.width)?Math.max.apply(Math,vn(a.config.stroke.width)):a.config.stroke.width;this.isSparkline&&((a.config.markers.discrete.length>0||a.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(b){var w=Lo(b,2),A=w[0],E=w[1];o.gridPad[A]=Math.max(E,o.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(d/2,this.gridPad.top),this.gridPad.bottom=Math.max(d/2,this.gridPad.bottom)),c.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),c.gridHeight=c.gridHeight-this.gridPad.top-this.gridPad.bottom,c.gridWidth=c.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var m=this.dimGrid.gridPadForColumnsInNumericAxis(c.gridWidth);c.gridWidth=c.gridWidth-2*m,c.translateX=c.translateX+this.gridPad.left+this.xPadLeft+(m>0?m:0),c.translateY=c.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var o=this,a=this.w,c=a.globals,d=this.dimYAxis.getyAxisLabelsCoords(),m=this.dimYAxis.getyAxisTitleCoords();c.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),a.globals.yLabelsCoords=[],a.globals.yTitleCoords=[],a.config.yaxis.map(function($,Y){a.globals.yLabelsCoords.push({width:d[Y].width,index:Y}),a.globals.yTitleCoords.push({width:m[Y].width,index:Y})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var b=this.dimXAxis.getxAxisLabelsCoords(),w=this.dimXAxis.getxAxisGroupLabelsCoords(),A=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(b,A,w),c.translateXAxisY=a.globals.rotateXLabels?this.xAxisHeight/8:-4,c.translateXAxisX=a.globals.rotateXLabels&&a.globals.isXNumeric&&a.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,a.globals.isBarHorizontal&&(c.rotateXLabels=!1,c.translateXAxisY=parseInt(a.config.xaxis.labels.style.fontSize,10)/1.5*-1),c.translateXAxisY=c.translateXAxisY+a.config.xaxis.labels.offsetY,c.translateXAxisX=c.translateXAxisX+a.config.xaxis.labels.offsetX;var E=this.yAxisWidth,M=this.xAxisHeight;c.xAxisLabelsHeight=this.xAxisHeight-A.height,c.xAxisGroupLabelsHeight=c.xAxisLabelsHeight-b.height,c.xAxisLabelsWidth=this.xAxisWidth,c.xAxisHeight=this.xAxisHeight;var O=10;(a.config.chart.type==="radar"||this.isSparkline)&&(E=0,M=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||a.config.chart.type==="treemap")&&(E=0,M=0,O=0),this.isSparkline||a.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(b);var L=function(){c.translateX=E+o.datalabelsCoords.width,c.gridHeight=c.svgHeight-o.lgRect.height-M-(o.isSparkline||a.config.chart.type==="treemap"?0:a.globals.rotateXLabels?10:15),c.gridWidth=c.svgWidth-E-2*o.datalabelsCoords.width};switch(a.config.xaxis.position==="top"&&(O=c.xAxisHeight-a.config.xaxis.axisTicks.height-5),a.config.legend.position){case"bottom":c.translateY=O,L();break;case"top":c.translateY=this.lgRect.height+O,L();break;case"left":c.translateY=O,c.translateX=this.lgRect.width+E+this.datalabelsCoords.width,c.gridHeight=c.svgHeight-M-12,c.gridWidth=c.svgWidth-this.lgRect.width-E-2*this.datalabelsCoords.width;break;case"right":c.translateY=O,c.translateX=E+this.datalabelsCoords.width,c.gridHeight=c.svgHeight-M-12,c.gridWidth=c.svgWidth-this.lgRect.width-E-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(m,d),new _c(this.ctx).setYAxisXPosition(d,m)}},{key:"setDimensionsForNonAxisCharts",value:function(){var o=this.w,a=o.globals,c=o.config,d=0;o.config.legend.show&&!o.config.legend.floating&&(d=20);var m=c.chart.type==="pie"||c.chart.type==="polarArea"||c.chart.type==="donut"?"pie":"radialBar",b=c.plotOptions[m].offsetY,w=c.plotOptions[m].offsetX;if(!c.legend.show||c.legend.floating){a.gridHeight=a.svgHeight;var A=a.dom.elWrap.getBoundingClientRect().width;return a.gridWidth=Math.min(A,a.gridHeight),a.translateY=b,void(a.translateX=w+(a.svgWidth-a.gridWidth)/2)}switch(c.legend.position){case"bottom":a.gridHeight=a.svgHeight-this.lgRect.height,a.gridWidth=a.svgWidth,a.translateY=b-10,a.translateX=w+(a.svgWidth-a.gridWidth)/2;break;case"top":a.gridHeight=a.svgHeight-this.lgRect.height,a.gridWidth=a.svgWidth,a.translateY=this.lgRect.height+b+10,a.translateX=w+(a.svgWidth-a.gridWidth)/2;break;case"left":a.gridWidth=a.svgWidth-this.lgRect.width-d,a.gridHeight=c.chart.height!=="auto"?a.svgHeight:a.gridWidth,a.translateY=b,a.translateX=w+this.lgRect.width+d;break;case"right":a.gridWidth=a.svgWidth-this.lgRect.width-d-5,a.gridHeight=c.chart.height!=="auto"?a.svgHeight:a.gridWidth,a.translateY=b,a.translateX=w+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(o,a,c){var d=this.w,m=d.globals.hasXaxisGroups?2:1,b=c.height+o.height+a.height,w=d.globals.isMultiLineX?1.2:d.globals.LINE_HEIGHT_RATIO,A=d.globals.rotateXLabels?22:10,E=d.globals.rotateXLabels&&d.config.legend.position==="bottom"?10:0;this.xAxisHeight=b*w+m*A+E,this.xAxisWidth=o.width,this.xAxisHeight-a.height>d.config.xaxis.labels.maxHeight&&(this.xAxisHeight=d.config.xaxis.labels.maxHeight),d.config.xaxis.labels.minHeight&&this.xAxisHeight<d.config.xaxis.labels.minHeight&&(this.xAxisHeight=d.config.xaxis.labels.minHeight),d.config.xaxis.floating&&(this.xAxisHeight=0);var M=0,O=0;d.config.yaxis.forEach(function(L){M+=L.labels.minWidth,O+=L.labels.maxWidth}),this.yAxisWidth<M&&(this.yAxisWidth=M),this.yAxisWidth>O&&(this.yAxisWidth=O)}}]),C}(),Zh=function(){function C(o){gn(this,C),this.w=o.w,this.lgCtx=o}return rn(C,[{key:"getLegendStyles",value:function(){var o,a,c,d=document.createElement("style");d.setAttribute("type","text/css");var m=((o=this.lgCtx.ctx)===null||o===void 0||(a=o.opts)===null||a===void 0||(c=a.chart)===null||c===void 0?void 0:c.nonce)||this.w.config.chart.nonce;m&&d.setAttribute("nonce",m);var b=document.createTextNode(`
      .apexcharts-flip-y {
        transform: scaleY(-1) translateY(-100%);
        transform-origin: top;
        transform-box: fill-box;
      }
      .apexcharts-flip-x {
        transform: scaleX(-1);
        transform-origin: center;
        transform-box: fill-box;
      }
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
        display: flex;
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-right: 1px;
      }

      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }

    `);return d.appendChild(b),d}},{key:"getLegendDimensions",value:function(){var o=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),a=o.width;return{clwh:o.height,clww:a}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(o,a){var c=this,d=this.w;if(d.globals.axisCharts||d.config.chart.type==="radialBar"){d.globals.resized=!0;var m=null,b=null;d.globals.risingSeries=[],d.globals.axisCharts?(m=d.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(o,"']")),b=parseInt(m.getAttribute("data:realIndex"),10)):(m=d.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(o+1,"']")),b=parseInt(m.getAttribute("rel"),10)-1),a?[{cs:d.globals.collapsedSeries,csi:d.globals.collapsedSeriesIndices},{cs:d.globals.ancillaryCollapsedSeries,csi:d.globals.ancillaryCollapsedSeriesIndices}].forEach(function(M){c.riseCollapsedSeries(M.cs,M.csi,b)}):this.hideSeries({seriesEl:m,realIndex:b})}else{var w=d.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(o+1,"'] path")),A=d.config.chart.type;if(A==="pie"||A==="polarArea"||A==="donut"){var E=d.config.plotOptions.pie.donut.labels;new tn(this.lgCtx.ctx).pathMouseDown(w,null),this.lgCtx.ctx.pie.printDataLabelsInner(w.node,E)}w.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(o){var a=o.realIndex,c=this.w,d=c.globals,m=oe.clone(c.config.series);if(d.axisCharts){var b=c.config.yaxis[d.seriesYAxisReverseMap[a]],w={index:a,data:m[a].data.slice(),type:m[a].type||c.config.chart.type};if(b&&b.show&&b.showAlways)d.ancillaryCollapsedSeriesIndices.indexOf(a)<0&&(d.ancillaryCollapsedSeries.push(w),d.ancillaryCollapsedSeriesIndices.push(a));else if(d.collapsedSeriesIndices.indexOf(a)<0){d.collapsedSeries.push(w),d.collapsedSeriesIndices.push(a);var A=d.risingSeries.indexOf(a);d.risingSeries.splice(A,1)}}else d.collapsedSeries.push({index:a,data:m[a]}),d.collapsedSeriesIndices.push(a);return d.allSeriesCollapsed=d.collapsedSeries.length+d.ancillaryCollapsedSeries.length===c.config.series.length,this._getSeriesBasedOnCollapsedState(m)}},{key:"hideSeries",value:function(o){for(var a=o.seriesEl,c=o.realIndex,d=this.w,m=this.getSeriesAfterCollapsing({realIndex:c}),b=a.childNodes,w=0;w<b.length;w++)b[w].classList.contains("apexcharts-series-markers-wrap")&&(b[w].classList.contains("apexcharts-hide")?b[w].classList.remove("apexcharts-hide"):b[w].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(m,d.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(o,a,c){var d=this.w,m=oe.clone(d.config.series);if(o.length>0){for(var b=0;b<o.length;b++)o[b].index===c&&(d.globals.axisCharts?m[c].data=o[b].data.slice():m[c]=o[b].data,typeof m[c]!="number"&&(m[c].hidden=!1),o.splice(b,1),a.splice(b,1),d.globals.risingSeries.push(c));m=this._getSeriesBasedOnCollapsedState(m),this.lgCtx.ctx.updateHelpers._updateSeries(m,d.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(o){var a=this.w,c=0;return a.globals.axisCharts?o.forEach(function(d,m){a.globals.collapsedSeriesIndices.indexOf(m)<0&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(m)<0||(o[m].data=[],c++)}):o.forEach(function(d,m){!a.globals.collapsedSeriesIndices.indexOf(m)<0&&(o[m]=0,c++)}),a.globals.allSeriesCollapsed=c===o.length,o}}]),C}(),$e=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new Zh(this)}return rn(C,[{key:"init",value:function(){var o=this.w,a=o.globals,c=o.config,d=c.legend.showForSingleSeries&&a.series.length===1||this.isBarsDistributed||a.series.length>1;if(this.legendHelpers.appendToForeignObject(),(d||!a.axisCharts)&&c.legend.show){for(;a.dom.elLegendWrap.firstChild;)a.dom.elLegendWrap.removeChild(a.dom.elLegendWrap.firstChild);this.drawLegends(),c.legend.position==="bottom"||c.legend.position==="top"?this.legendAlignHorizontal():c.legend.position!=="right"&&c.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(o){var a=o.i,c=o.fillcolor,d=this.w,m=document.createElement("span");m.classList.add("apexcharts-legend-marker");var b=d.config.legend.markers.shape||d.config.markers.shape,w=b;Array.isArray(b)&&(w=b[a]);var A=Array.isArray(d.config.legend.markers.size)?parseFloat(d.config.legend.markers.size[a]):parseFloat(d.config.legend.markers.size),E=Array.isArray(d.config.legend.markers.offsetX)?parseFloat(d.config.legend.markers.offsetX[a]):parseFloat(d.config.legend.markers.offsetX),M=Array.isArray(d.config.legend.markers.offsetY)?parseFloat(d.config.legend.markers.offsetY[a]):parseFloat(d.config.legend.markers.offsetY),O=Array.isArray(d.config.legend.markers.strokeWidth)?parseFloat(d.config.legend.markers.strokeWidth[a]):parseFloat(d.config.legend.markers.strokeWidth),L=m.style;if(L.height=2*(A+O)+"px",L.width=2*(A+O)+"px",L.left=E+"px",L.top=M+"px",d.config.legend.markers.customHTML)L.background="transparent",L.color=c[a],Array.isArray(d.config.legend.markers.customHTML)?d.config.legend.markers.customHTML[a]&&(m.innerHTML=d.config.legend.markers.customHTML[a]()):m.innerHTML=d.config.legend.markers.customHTML();else{var $=new Pa(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(w),seriesIndex:a,strokeWidth:O,size:A}),Y=window.SVG().addTo(m).size("100%","100%"),U=new tn(this.ctx).drawMarker(0,0,Tt(Tt({},$),{},{pointFillColor:Array.isArray(c)?c[a]:$.pointFillColor,shape:w}));d.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach(function(ne){ne.node.classList.contains("apexcharts-marker-triangle")?ne.node.style.transform="translate(50%, 45%)":ne.node.style.transform="translate(50%, 50%)"}),Y.add(U)}return m}},{key:"drawLegends",value:function(){var o=this,a=this.w,c=a.config.legend.fontFamily,d=a.globals.seriesNames,m=a.config.legend.markers.fillColors?a.config.legend.markers.fillColors.slice():a.globals.colors.slice();if(a.config.chart.type==="heatmap"){var b=a.config.plotOptions.heatmap.colorScale.ranges;d=b.map(function(Te){return Te.name?Te.name:Te.from+" - "+Te.to}),m=b.map(function(Te){return Te.color})}else this.isBarsDistributed&&(d=a.globals.labels.slice());a.config.legend.customLegendItems.length&&(d=a.config.legend.customLegendItems);for(var w=a.globals.legendFormatter,A=a.config.legend.inverseOrder,E=A?d.length-1:0;A?E>=0:E<=d.length-1;A?E--:E++){var M,O=w(d[E],{seriesIndex:E,w:a}),L=!1,$=!1;if(a.globals.collapsedSeries.length>0)for(var Y=0;Y<a.globals.collapsedSeries.length;Y++)a.globals.collapsedSeries[Y].index===E&&(L=!0);if(a.globals.ancillaryCollapsedSeriesIndices.length>0)for(var U=0;U<a.globals.ancillaryCollapsedSeriesIndices.length;U++)a.globals.ancillaryCollapsedSeriesIndices[U]===E&&($=!0);var ne=this.createLegendMarker({i:E,fillcolor:m});tn.setAttrs(ne,{rel:E+1,"data:collapsed":L||$}),(L||$)&&ne.classList.add("apexcharts-inactive-legend");var ae=document.createElement("div"),le=document.createElement("span");le.classList.add("apexcharts-legend-text"),le.innerHTML=Array.isArray(O)?O.join(" "):O;var me=a.config.legend.labels.useSeriesColors?a.globals.colors[E]:Array.isArray(a.config.legend.labels.colors)?(M=a.config.legend.labels.colors)===null||M===void 0?void 0:M[E]:a.config.legend.labels.colors;me||(me=a.config.chart.foreColor),le.style.color=me,le.style.fontSize=parseFloat(a.config.legend.fontSize)+"px",le.style.fontWeight=a.config.legend.fontWeight,le.style.fontFamily=c||a.config.chart.fontFamily,tn.setAttrs(le,{rel:E+1,i:E,"data:default-text":encodeURIComponent(O),"data:collapsed":L||$}),ae.appendChild(ne),ae.appendChild(le);var Oe=new bs(this.ctx);a.config.legend.showForZeroSeries||Oe.getSeriesTotalByIndex(E)===0&&Oe.seriesHaveSameValues(E)&&!Oe.isSeriesNull(E)&&a.globals.collapsedSeriesIndices.indexOf(E)===-1&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(E)===-1&&ae.classList.add("apexcharts-hidden-zero-series"),a.config.legend.showForNullSeries||Oe.isSeriesNull(E)&&a.globals.collapsedSeriesIndices.indexOf(E)===-1&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(E)===-1&&ae.classList.add("apexcharts-hidden-null-series"),a.globals.dom.elLegendWrap.appendChild(ae),a.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(a.config.legend.horizontalAlign)),a.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+a.config.legend.position),ae.classList.add("apexcharts-legend-series"),ae.style.margin="".concat(a.config.legend.itemMargin.vertical,"px ").concat(a.config.legend.itemMargin.horizontal,"px"),a.globals.dom.elLegendWrap.style.width=a.config.legend.width?a.config.legend.width+"px":"",a.globals.dom.elLegendWrap.style.height=a.config.legend.height?a.config.legend.height+"px":"",tn.setAttrs(ae,{rel:E+1,seriesName:oe.escapeString(d[E]),"data:collapsed":L||$}),(L||$)&&ae.classList.add("apexcharts-inactive-legend"),a.config.legend.onItemClick.toggleDataSeries||ae.classList.add("apexcharts-no-click")}a.globals.dom.elWrap.addEventListener("click",o.onLegendClick,!0),a.config.legend.onItemHover.highlightDataSeries&&a.config.legend.customLegendItems.length===0&&(a.globals.dom.elWrap.addEventListener("mousemove",o.onLegendHovered,!0),a.globals.dom.elWrap.addEventListener("mouseout",o.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(o,a){var c=this.w,d=c.globals.dom.elLegendWrap,m=d.clientHeight,b=0,w=0;if(c.config.legend.position==="bottom")w=c.globals.svgHeight-Math.min(m,c.globals.svgHeight/2)-5;else if(c.config.legend.position==="top"){var A=new fc(this.ctx),E=A.dimHelpers.getTitleSubtitleCoords("title").height,M=A.dimHelpers.getTitleSubtitleCoords("subtitle").height;w=(E>0?E-10:0)+(M>0?M-10:0)}d.style.position="absolute",b=b+o+c.config.legend.offsetX,w=w+a+c.config.legend.offsetY,d.style.left=b+"px",d.style.top=w+"px",c.config.legend.position==="right"&&(d.style.left="auto",d.style.right=25+c.config.legend.offsetX+"px"),["width","height"].forEach(function(O){d.style[O]&&(d.style[O]=parseInt(c.config.legend[O],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var o=this.w;o.globals.dom.elLegendWrap.style.right=0;var a=new fc(this.ctx),c=a.dimHelpers.getTitleSubtitleCoords("title"),d=a.dimHelpers.getTitleSubtitleCoords("subtitle"),m=0;o.config.legend.position==="top"&&(m=c.height+d.height+o.config.title.margin+o.config.subtitle.margin-10),this.setLegendWrapXY(20,m)}},{key:"legendAlignVertical",value:function(){var o=this.w,a=this.legendHelpers.getLegendDimensions(),c=0;o.config.legend.position==="left"&&(c=20),o.config.legend.position==="right"&&(c=o.globals.svgWidth-a.clww-10),this.setLegendWrapXY(c,20)}},{key:"onLegendHovered",value:function(o){var a=this.w,c=o.target.classList.contains("apexcharts-legend-series")||o.target.classList.contains("apexcharts-legend-text")||o.target.classList.contains("apexcharts-legend-marker");if(a.config.chart.type==="heatmap"||this.isBarsDistributed){if(c){var d=parseInt(o.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,d,this.w]),new er(this.ctx).highlightRangeInSeries(o,o.target)}}else!o.target.classList.contains("apexcharts-inactive-legend")&&c&&new er(this.ctx).toggleSeriesOnHover(o,o.target)}},{key:"onLegendClick",value:function(o){var a=this.w;if(!a.config.legend.customLegendItems.length&&(o.target.classList.contains("apexcharts-legend-series")||o.target.classList.contains("apexcharts-legend-text")||o.target.classList.contains("apexcharts-legend-marker"))){var c=parseInt(o.target.getAttribute("rel"),10)-1,d=o.target.getAttribute("data:collapsed")==="true",m=this.w.config.chart.events.legendClick;typeof m=="function"&&m(this.ctx,c,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,c,this.w]);var b=this.w.config.legend.markers.onClick;typeof b=="function"&&o.target.classList.contains("apexcharts-legend-marker")&&(b(this.ctx,c,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,c,this.w])),a.config.chart.type!=="treemap"&&a.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&a.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(c,d)}}}]),C}(),ou=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w;var a=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=a.globals.minX,this.maxX=a.globals.maxX}return rn(C,[{key:"createToolbar",value:function(){var o=this,a=this.w,c=function(){return document.createElement("div")},d=c();if(d.setAttribute("class","apexcharts-toolbar"),d.style.top=a.config.chart.toolbar.offsetY+"px",d.style.right=3-a.config.chart.toolbar.offsetX+"px",a.globals.dom.elWrap.appendChild(d),this.elZoom=c(),this.elZoomIn=c(),this.elZoomOut=c(),this.elPan=c(),this.elSelection=c(),this.elZoomReset=c(),this.elMenuIcon=c(),this.elMenu=c(),this.elCustomIcons=[],this.t=a.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var m=0;m<this.t.customIcons.length;m++)this.elCustomIcons.push(c());var b=[],w=function(O,L,$){var Y=O.toLowerCase();o.t[Y]&&a.config.chart.zoom.enabled&&b.push({el:L,icon:typeof o.t[Y]=="string"?o.t[Y]:$,title:o.localeValues[O],class:"apexcharts-".concat(Y,"-icon")})};w("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),w("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var A=function(O){o.t[O]&&a.config.chart[O].enabled&&b.push({el:O==="zoom"?o.elZoom:o.elSelection,icon:typeof o.t[O]=="string"?o.t[O]:O==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:o.localeValues[O==="zoom"?"selectionZoom":"selection"],class:a.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(O,"-icon")})};A("zoom"),A("selection"),this.t.pan&&a.config.chart.zoom.enabled&&b.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:a.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),w("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&b.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var E=0;E<this.elCustomIcons.length;E++)b.push({el:this.elCustomIcons[E],icon:this.t.customIcons[E].icon,title:this.t.customIcons[E].title,index:this.t.customIcons[E].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[E].class});b.forEach(function(O,L){O.index&&oe.moveIndexInArray(b,L,O.index)});for(var M=0;M<b.length;M++)tn.setAttrs(b[M].el,{class:b[M].class,title:b[M].title}),b[M].el.innerHTML=b[M].icon,d.appendChild(b[M].el);this._createHamburgerMenu(d),a.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):a.globals.panEnabled?this.elPan.classList.add(this.selectedClass):a.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(o){this.elMenuItems=[],o.appendChild(this.elMenu),tn.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var a=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],c=0;c<a.length;c++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[c].innerHTML=a[c].title,tn.setAttrs(this.elMenuItems[c],{class:"apexcharts-menu-item ".concat(a[c].name),title:a[c].title}),this.elMenu.appendChild(this.elMenuItems[c])}},{key:"addToolbarEventListeners",value:function(){var o=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(c){c.classList.contains("exportSVG")?c.addEventListener("click",o.handleDownload.bind(o,"svg")):c.classList.contains("exportPNG")?c.addEventListener("click",o.handleDownload.bind(o,"png")):c.classList.contains("exportCSV")&&c.addEventListener("click",o.handleDownload.bind(o,"csv"))});for(var a=0;a<this.t.customIcons.length;a++)this.elCustomIcons[a].addEventListener("click",this.t.customIcons[a].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(o){this.ctx.getSyncedCharts().forEach(function(a){a.ctx.toolbar.toggleOtherControls();var c=o==="selection"?a.ctx.toolbar.elSelection:a.ctx.toolbar.elZoom,d=o==="selection"?"selectionEnabled":"zoomEnabled";a.w.globals[d]=!a.w.globals[d],c.classList.contains(a.ctx.toolbar.selectedClass)?c.classList.remove(a.ctx.toolbar.selectedClass):c.classList.add(a.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var o=this.w;this.elZoom||(this.elZoom=o.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=o.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=o.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(o){this.toggleOtherControls(),o==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var a=o==="pan"?this.elPan:this.elZoom,c=o==="pan"?this.elZoom:this.elPan;a&&a.classList.add(this.selectedClass),c&&c.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(o){o.ctx.toolbar.toggleOtherControls(),o.w.globals.panEnabled=!o.w.globals.panEnabled,o.ctx.toolbar.elPan.classList.contains(o.ctx.toolbar.selectedClass)?o.ctx.toolbar.elPan.classList.remove(o.ctx.toolbar.selectedClass):o.ctx.toolbar.elPan.classList.add(o.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var o=this,a=this.w;a.globals.panEnabled=!1,a.globals.zoomEnabled=!1,a.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(c){c&&c.classList.remove(o.selectedClass)})}},{key:"handleZoomIn",value:function(){var o=this.w;o.globals.isRangeBar&&(this.minX=o.globals.minY,this.maxX=o.globals.maxY);var a=(this.minX+this.maxX)/2,c=(this.minX+a)/2,d=(this.maxX+a)/2,m=this._getNewMinXMaxX(c,d);o.globals.disableZoomIn||this.zoomUpdateOptions(m.minX,m.maxX)}},{key:"handleZoomOut",value:function(){var o=this.w;if(o.globals.isRangeBar&&(this.minX=o.globals.minY,this.maxX=o.globals.maxY),!(o.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var a=(this.minX+this.maxX)/2,c=this.minX-(a-this.minX),d=this.maxX-(a-this.maxX),m=this._getNewMinXMaxX(c,d);o.globals.disableZoomOut||this.zoomUpdateOptions(m.minX,m.maxX)}}},{key:"_getNewMinXMaxX",value:function(o,a){var c=this.w.config.xaxis.convertedCatToNumeric;return{minX:c?Math.floor(o):o,maxX:c?Math.floor(a):a}}},{key:"zoomUpdateOptions",value:function(o,a){var c=this.w;if(o!==void 0||a!==void 0){if(!(c.config.xaxis.convertedCatToNumeric&&(o<1&&(o=1,a=c.globals.dataPoints),a-o<2))){var d={min:o,max:a},m=this.getBeforeZoomRange(d);m&&(d=m.xaxis);var b={xaxis:d},w=oe.clone(c.globals.initialConfig.yaxis);c.config.chart.group||(b.yaxis=w),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(b,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(d,w)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(o,a){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:o,yaxis:a})}},{key:"getBeforeZoomRange",value:function(o,a){var c=null;return typeof this.ev.beforeZoom=="function"&&(c=this.ev.beforeZoom(this,{xaxis:o,yaxis:a})),c}},{key:"toggleMenu",value:function(){var o=this;window.setTimeout(function(){o.elMenu.classList.contains("apexcharts-menu-open")?o.elMenu.classList.remove("apexcharts-menu-open"):o.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(o){var a=this.w,c=new Lc(this.ctx);switch(o){case"svg":c.exportToSVG(this.ctx);break;case"png":c.exportToPng(this.ctx);break;case"csv":c.exportToCSV({series:a.config.series,columnDelimiter:a.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(o){this.ctx.getSyncedCharts().forEach(function(a){var c=a.w;if(c.globals.lastXAxis.min=c.globals.initialConfig.xaxis.min,c.globals.lastXAxis.max=c.globals.initialConfig.xaxis.max,a.updateHelpers.revertDefaultAxisMinMax(),typeof c.config.chart.events.beforeResetZoom=="function"){var d=c.config.chart.events.beforeResetZoom(a,c);d&&a.updateHelpers.revertDefaultAxisMinMax(d)}typeof c.config.chart.events.zoomed=="function"&&a.ctx.toolbar.zoomCallback({min:c.config.xaxis.min,max:c.config.xaxis.max}),c.globals.zoomed=!1;var m=a.ctx.series.emptyCollapsedSeries(oe.clone(c.globals.initialSeries));a.updateHelpers._updateSeries(m,c.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),C}(),Ml=function(C){ns(a,ou);var o=Fo(a);function a(c){var d;return gn(this,a),(d=o.call(this,c)).ctx=c,d.w=c.w,d.dragged=!1,d.graphics=new tn(d.ctx),d.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],d.clientX=0,d.clientY=0,d.startX=0,d.endX=0,d.dragX=0,d.startY=0,d.endY=0,d.dragY=0,d.moveDirection="none",d.debounceTimer=null,d.debounceDelay=100,d.wheelDelay=400,d}return rn(a,[{key:"init",value:function(c){var d=this,m=c.xyRatios,b=this.w,w=this;this.xyRatios=m,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=b.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new uo(0,0,b.globals.gridWidth,b.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),b.globals.dom.Paper.add(this.zoomRect),b.globals.dom.Paper.add(this.selectionRect),b.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:b.globals.gridWidth,maxY:b.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):b.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:b.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=b.globals.dom.baseEl.querySelector("".concat(b.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(A){d.hoverArea.addEventListener(A,w.svgMouseEvents.bind(w,m),{capture:!1,passive:!0})}),b.config.chart.zoom.enabled&&b.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",w.mouseWheelEvent.bind(w),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(c,d){var m=this.w,b=this,w=this.ctx.toolbar,A=m.globals.zoomEnabled?m.config.chart.zoom.type:m.config.chart.selection.type,E=m.config.chart.toolbar.autoSelected;if(d.shiftKey?(this.shiftWasPressed=!0,w.enableZoomPanFromToolbar(E==="pan"?"zoom":"pan")):this.shiftWasPressed&&(w.enableZoomPanFromToolbar(E),this.shiftWasPressed=!1),d.target){var M,O=d.target.classList;if(d.target.parentNode&&d.target.parentNode!==null&&(M=d.target.parentNode.classList),!(O.contains("apexcharts-selection-rect")||O.contains("apexcharts-legend-marker")||O.contains("apexcharts-legend-text")||M&&M.contains("apexcharts-toolbar"))){if(b.clientX=d.type==="touchmove"||d.type==="touchstart"?d.touches[0].clientX:d.type==="touchend"?d.changedTouches[0].clientX:d.clientX,b.clientY=d.type==="touchmove"||d.type==="touchstart"?d.touches[0].clientY:d.type==="touchend"?d.changedTouches[0].clientY:d.clientY,d.type==="mousedown"&&d.which===1||d.type==="touchstart"){var L=b.gridRect.getBoundingClientRect();b.startX=b.clientX-L.left,b.startY=b.clientY-L.top,b.dragged=!1,b.w.globals.mousedown=!0}if((d.type==="mousemove"&&d.which===1||d.type==="touchmove")&&(b.dragged=!0,m.globals.panEnabled?(m.globals.selection=null,b.w.globals.mousedown&&b.panDragging({context:b,zoomtype:A,xyRatios:c})):(b.w.globals.mousedown&&m.globals.zoomEnabled||b.w.globals.mousedown&&m.globals.selectionEnabled)&&(b.selection=b.selectionDrawing({context:b,zoomtype:A}))),d.type==="mouseup"||d.type==="touchend"||d.type==="mouseleave"){var $,Y=($=b.gridRect)===null||$===void 0?void 0:$.getBoundingClientRect();Y&&b.w.globals.mousedown&&(b.endX=b.clientX-Y.left,b.endY=b.clientY-Y.top,b.dragX=Math.abs(b.endX-b.startX),b.dragY=Math.abs(b.endY-b.startY),(m.globals.zoomEnabled||m.globals.selectionEnabled)&&b.selectionDrawn({context:b,zoomtype:A}),m.globals.panEnabled&&m.config.xaxis.convertedCatToNumeric&&b.delayedPanScrolled()),m.globals.zoomEnabled&&b.hideSelectionRect(this.selectionRect),b.dragged=!1,b.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"mouseWheelEvent",value:function(c){var d=this,m=this.w;c.preventDefault();var b=Date.now();b-m.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(c),m.globals.lastWheelExecution=b),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){b-m.globals.lastWheelExecution>d.wheelDelay&&(d.executeMouseWheelZoom(c),m.globals.lastWheelExecution=b)},this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(c){var d,m=this.w;this.minX=m.globals.isRangeBar?m.globals.minY:m.globals.minX,this.maxX=m.globals.isRangeBar?m.globals.maxY:m.globals.maxX;var b=(d=this.gridRect)===null||d===void 0?void 0:d.getBoundingClientRect();if(b){var w,A,E,M=(c.clientX-b.left)/b.width,O=this.minX,L=this.maxX,$=L-O;if(c.deltaY<0){var Y=O+M*$;A=Y-(w=.5*$)/2,E=Y+w/2}else A=O-(w=1.5*$)/2,E=L+w/2;if(!m.globals.isRangeBar){A=Math.max(A,m.globals.initialMinX),E=Math.min(E,m.globals.initialMaxX);var U=.01*(m.globals.initialMaxX-m.globals.initialMinX);if(E-A<U){var ne=(A+E)/2;A=ne-U/2,E=ne+U/2}}var ae=this._getNewMinXMaxX(A,E);isNaN(ae.minX)||isNaN(ae.maxX)||this.zoomUpdateOptions(ae.minX,ae.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){if(this.w,this.selectionRect){var c=this.selectionRect.node.getBoundingClientRect();c.width>0&&c.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(d,m,b,w,A){return A==="l"||A==="r"?d.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):d.circle(0)},updateHandle:function(d,m){return d.center(m[0],m[1])}}).resize().on("resizing",this.selectionDragging.bind(this,"resizing")))}}},{key:"preselectedSelection",value:function(){var c=this.w,d=this.xyRatios;if(!c.globals.zoomEnabled){if(c.globals.selection!==void 0&&c.globals.selection!==null)this.drawSelectionRect(Tt(Tt({},c.globals.selection),{},{translateX:c.globals.translateX,translateY:c.globals.translateY}));else if(c.config.chart.selection.xaxis.min!==void 0&&c.config.chart.selection.xaxis.max!==void 0){var m=(c.config.chart.selection.xaxis.min-c.globals.minX)/d.xRatio,b=c.globals.gridWidth-(c.globals.maxX-c.config.chart.selection.xaxis.max)/d.xRatio-m;c.globals.isRangeBar&&(m=(c.config.chart.selection.xaxis.min-c.globals.yAxisScale[0].niceMin)/d.invertedYRatio,b=(c.config.chart.selection.xaxis.max-c.config.chart.selection.xaxis.min)/d.invertedYRatio);var w={x:m,y:0,width:b,height:c.globals.gridHeight,translateX:c.globals.translateX,translateY:c.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(w),this.makeSelectionRectDraggable(),typeof c.config.chart.events.selection=="function"&&c.config.chart.events.selection(this.ctx,{xaxis:{min:c.config.chart.selection.xaxis.min,max:c.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(c){var d=c.x,m=c.y,b=c.width,w=c.height,A=c.translateX,E=A===void 0?0:A,M=c.translateY,O=M===void 0?0:M,L=this.w,$=this.zoomRect,Y=this.selectionRect;if(this.dragged||L.globals.selection!==null){var U={transform:"translate("+E+", "+O+")"};L.globals.zoomEnabled&&this.dragged&&(b<0&&(b=1),$.attr({x:d,y:m,width:b,height:w,fill:L.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":L.config.chart.zoom.zoomedArea.fill.opacity,stroke:L.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":L.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":L.config.chart.zoom.zoomedArea.stroke.opacity}),tn.setAttrs($.node,U)),L.globals.selectionEnabled&&(Y.attr({x:d,y:m,width:b>0?b:0,height:w>0?w:0,fill:L.config.chart.selection.fill.color,"fill-opacity":L.config.chart.selection.fill.opacity,stroke:L.config.chart.selection.stroke.color,"stroke-width":L.config.chart.selection.stroke.width,"stroke-dasharray":L.config.chart.selection.stroke.dashArray,"stroke-opacity":L.config.chart.selection.stroke.opacity}),tn.setAttrs(Y.node,U))}}},{key:"hideSelectionRect",value:function(c){c&&c.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(c){var d=c.context,m=c.zoomtype,b=this.w,w=d,A=this.gridRect.getBoundingClientRect(),E=w.startX-1,M=w.startY,O=!1,L=!1,$=w.clientX-A.left-E,Y=w.clientY-A.top-M,U={translateX:b.globals.translateX,translateY:b.globals.translateY};return Math.abs($+E)>b.globals.gridWidth?$=b.globals.gridWidth-E:w.clientX-A.left<0&&($=E),E>w.clientX-A.left&&(O=!0,$=Math.abs($)),M>w.clientY-A.top&&(L=!0,Y=Math.abs(Y)),U=Tt(Tt({},U=m==="x"?{x:O?E-$:E,y:0,width:$,height:b.globals.gridHeight}:m==="y"?{x:0,y:L?M-Y:M,width:b.globals.gridWidth,height:Y}:{x:O?E-$:E,y:L?M-Y:M,width:$,height:Y}),{},{translateX:b.globals.translateX,translateY:b.globals.translateY}),w.drawSelectionRect(U),w.selectionDragging("resizing"),U}},{key:"selectionDragging",value:function(c,d){var m=this,b=this.w;if(d){d.preventDefault();var w=d.detail,A=w.handler,E=w.box,M=E.x,O=E.y;M<this.constraints.x&&(M=this.constraints.x),O<this.constraints.y&&(O=this.constraints.y),E.x2>this.constraints.x2&&(M=this.constraints.x2-E.w),E.y2>this.constraints.y2&&(O=this.constraints.y2-E.h),A.move(M,O);var L=this.xyRatios,$=this.selectionRect,Y=0;c==="resizing"&&(Y=30);var U=function(ae){return parseFloat($.node.getAttribute(ae))},ne={x:U("x"),y:U("y"),width:U("width"),height:U("height")};b.globals.selection=ne,typeof b.config.chart.events.selection=="function"&&b.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var ae,le,me,Oe,Te=m.gridRect.getBoundingClientRect(),Ve=$.node.getBoundingClientRect();b.globals.isRangeBar?(ae=b.globals.yAxisScale[0].niceMin+(Ve.left-Te.left)*L.invertedYRatio,le=b.globals.yAxisScale[0].niceMin+(Ve.right-Te.left)*L.invertedYRatio,me=0,Oe=1):(ae=b.globals.xAxisScale.niceMin+(Ve.left-Te.left)*L.xRatio,le=b.globals.xAxisScale.niceMin+(Ve.right-Te.left)*L.xRatio,me=b.globals.yAxisScale[0].niceMin+(Te.bottom-Ve.bottom)*L.yRatio[0],Oe=b.globals.yAxisScale[0].niceMax-(Ve.top-Te.top)*L.yRatio[0]);var ve={xaxis:{min:ae,max:le},yaxis:{min:me,max:Oe}};b.config.chart.events.selection(m.ctx,ve),b.config.chart.brush.enabled&&b.config.chart.events.brushScrolled!==void 0&&b.config.chart.events.brushScrolled(m.ctx,ve)},Y))}}},{key:"selectionDrawn",value:function(c){var d=c.context,m=c.zoomtype,b=this.w,w=d,A=this.xyRatios,E=this.ctx.toolbar;if(w.startX>w.endX){var M=w.startX;w.startX=w.endX,w.endX=M}if(w.startY>w.endY){var O=w.startY;w.startY=w.endY,w.endY=O}var L=void 0,$=void 0;b.globals.isRangeBar?(L=b.globals.yAxisScale[0].niceMin+w.startX*A.invertedYRatio,$=b.globals.yAxisScale[0].niceMin+w.endX*A.invertedYRatio):(L=b.globals.xAxisScale.niceMin+w.startX*A.xRatio,$=b.globals.xAxisScale.niceMin+w.endX*A.xRatio);var Y=[],U=[];if(b.config.yaxis.forEach(function(Ve,ve){var Pe=b.globals.seriesYAxisMap[ve][0];Y.push(b.globals.yAxisScale[ve].niceMax-A.yRatio[Pe]*w.startY),U.push(b.globals.yAxisScale[ve].niceMax-A.yRatio[Pe]*w.endY)}),w.dragged&&(w.dragX>10||w.dragY>10)&&L!==$){if(b.globals.zoomEnabled){var ne=oe.clone(b.globals.initialConfig.yaxis),ae=oe.clone(b.globals.initialConfig.xaxis);if(b.globals.zoomed=!0,b.config.xaxis.convertedCatToNumeric&&(L=Math.floor(L),$=Math.floor($),L<1&&(L=1,$=b.globals.dataPoints),$-L<2&&($=L+1)),m!=="xy"&&m!=="x"||(ae={min:L,max:$}),m!=="xy"&&m!=="y"||ne.forEach(function(Ve,ve){ne[ve].min=U[ve],ne[ve].max=Y[ve]}),E){var le=E.getBeforeZoomRange(ae,ne);le&&(ae=le.xaxis?le.xaxis:ae,ne=le.yaxis?le.yaxis:ne)}var me={xaxis:ae};b.config.chart.group||(me.yaxis=ne),w.ctx.updateHelpers._updateOptions(me,!1,w.w.config.chart.animations.dynamicAnimation.enabled),typeof b.config.chart.events.zoomed=="function"&&E.zoomCallback(ae,ne)}else if(b.globals.selectionEnabled){var Oe,Te=null;Oe={min:L,max:$},m!=="xy"&&m!=="y"||(Te=oe.clone(b.config.yaxis)).forEach(function(Ve,ve){Te[ve].min=U[ve],Te[ve].max=Y[ve]}),b.globals.selection=w.selection,typeof b.config.chart.events.selection=="function"&&b.config.chart.events.selection(w.ctx,{xaxis:Oe,yaxis:Te})}}}},{key:"panDragging",value:function(c){var d=c.context,m=this.w,b=d;if(m.globals.lastClientPosition.x!==void 0){var w=m.globals.lastClientPosition.x-b.clientX,A=m.globals.lastClientPosition.y-b.clientY;Math.abs(w)>Math.abs(A)&&w>0?this.moveDirection="left":Math.abs(w)>Math.abs(A)&&w<0?this.moveDirection="right":Math.abs(A)>Math.abs(w)&&A>0?this.moveDirection="up":Math.abs(A)>Math.abs(w)&&A<0&&(this.moveDirection="down")}m.globals.lastClientPosition={x:b.clientX,y:b.clientY};var E=m.globals.isRangeBar?m.globals.minY:m.globals.minX,M=m.globals.isRangeBar?m.globals.maxY:m.globals.maxX;m.config.xaxis.convertedCatToNumeric||b.panScrolled(E,M)}},{key:"delayedPanScrolled",value:function(){var c=this.w,d=c.globals.minX,m=c.globals.maxX,b=(c.globals.maxX-c.globals.minX)/2;this.moveDirection==="left"?(d=c.globals.minX+b,m=c.globals.maxX+b):this.moveDirection==="right"&&(d=c.globals.minX-b,m=c.globals.maxX-b),d=Math.floor(d),m=Math.floor(m),this.updateScrolledChart({xaxis:{min:d,max:m}},d,m)}},{key:"panScrolled",value:function(c,d){var m=this.w,b=this.xyRatios,w=oe.clone(m.globals.initialConfig.yaxis),A=b.xRatio,E=m.globals.minX,M=m.globals.maxX;m.globals.isRangeBar&&(A=b.invertedYRatio,E=m.globals.minY,M=m.globals.maxY),this.moveDirection==="left"?(c=E+m.globals.gridWidth/15*A,d=M+m.globals.gridWidth/15*A):this.moveDirection==="right"&&(c=E-m.globals.gridWidth/15*A,d=M-m.globals.gridWidth/15*A),m.globals.isRangeBar||(c<m.globals.initialMinX||d>m.globals.initialMaxX)&&(c=E,d=M);var O={xaxis:{min:c,max:d}};m.config.chart.group||(O.yaxis=w),this.updateScrolledChart(O,c,d)}},{key:"updateScrolledChart",value:function(c,d,m){var b=this.w;this.ctx.updateHelpers._updateOptions(c,!1,!1),typeof b.config.chart.events.scrolled=="function"&&b.config.chart.events.scrolled(this.ctx,{xaxis:{min:d,max:m}})}}]),a}(),Gh=function(){function C(o){gn(this,C),this.w=o.w,this.ttCtx=o,this.ctx=o.ctx}return rn(C,[{key:"getNearestValues",value:function(o){var a=o.hoverArea,c=o.elGrid,d=o.clientX,m=o.clientY,b=this.w,w=c.getBoundingClientRect(),A=w.width,E=w.height,M=A/(b.globals.dataPoints-1),O=E/b.globals.dataPoints,L=this.hasBars();!b.globals.comboCharts&&!L||b.config.xaxis.convertedCatToNumeric||(M=A/b.globals.dataPoints);var $=d-w.left-b.globals.barPadForNumericAxis,Y=m-w.top;$<0||Y<0||$>A||Y>E?(a.classList.remove("hovering-zoom"),a.classList.remove("hovering-pan")):b.globals.zoomEnabled?(a.classList.remove("hovering-pan"),a.classList.add("hovering-zoom")):b.globals.panEnabled&&(a.classList.remove("hovering-zoom"),a.classList.add("hovering-pan"));var U=Math.round($/M),ne=Math.floor(Y/O);L&&!b.config.xaxis.convertedCatToNumeric&&(U=Math.ceil($/M),U-=1);var ae=null,le=null,me=b.globals.seriesXvalues.map(function(Pe){return Pe.filter(function(ht){return oe.isNumber(ht)})}),Oe=b.globals.seriesYvalues.map(function(Pe){return Pe.filter(function(ht){return oe.isNumber(ht)})});if(b.globals.isXNumeric){var Te=this.ttCtx.getElGrid().getBoundingClientRect(),Ve=$*(Te.width/A),ve=Y*(Te.height/E);ae=(le=this.closestInMultiArray(Ve,ve,me,Oe)).index,U=le.j,ae!==null&&(me=b.globals.seriesXvalues[ae],U=(le=this.closestInArray(Ve,me)).index)}return b.globals.capturedSeriesIndex=ae===null?-1:ae,(!U||U<1)&&(U=0),b.globals.isBarHorizontal?b.globals.capturedDataPointIndex=ne:b.globals.capturedDataPointIndex=U,{capturedSeries:ae,j:b.globals.isBarHorizontal?ne:U,hoverX:$,hoverY:Y}}},{key:"closestInMultiArray",value:function(o,a,c,d){var m=this.w,b=0,w=null,A=-1;m.globals.series.length>1?b=this.getFirstActiveXArray(c):w=0;var E=c[b][0],M=Math.abs(o-E);if(c.forEach(function($){$.forEach(function(Y,U){var ne=Math.abs(o-Y);ne<=M&&(M=ne,A=U)})}),A!==-1){var O=d[b][A],L=Math.abs(a-O);w=b,d.forEach(function($,Y){var U=Math.abs(a-$[A]);U<=L&&(L=U,w=Y)})}return{index:w,j:A}}},{key:"getFirstActiveXArray",value:function(o){for(var a=this.w,c=0,d=o.map(function(b,w){return b.length>0?w:-1}),m=0;m<d.length;m++)if(d[m]!==-1&&a.globals.collapsedSeriesIndices.indexOf(m)===-1&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(m)===-1){c=d[m];break}return c}},{key:"closestInArray",value:function(o,a){for(var c=a[0],d=null,m=Math.abs(o-c),b=0;b<a.length;b++){var w=Math.abs(o-a[b]);w<m&&(m=w,d=b)}return{index:d}}},{key:"isXoverlap",value:function(o){var a=[],c=this.w.globals.seriesX.filter(function(m){return m[0]!==void 0});if(c.length>0)for(var d=0;d<c.length-1;d++)c[d][o]!==void 0&&c[d+1][o]!==void 0&&c[d][o]!==c[d+1][o]&&a.push("unEqual");return a.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var o=!0,a=this.w.globals.initialSeries,c=0;c<a.length-1;c++)if(a[c].data.length!==a[c+1].data.length){o=!1;break}return o}},{key:"getBarsHeight",value:function(o){return vn(o).reduce(function(a,c){return a+c.getBBox().height},0)}},{key:"getElMarkers",value:function(o){return typeof o=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(o,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var o=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(o=vn(o)).sort(function(c,d){var m=Number(c.getAttribute("data:realIndex")),b=Number(d.getAttribute("data:realIndex"));return b<m?1:b>m?-1:0});var a=[];return o.forEach(function(c){a.push(c.querySelector(".apexcharts-marker"))}),a}},{key:"hasMarkers",value:function(o){return this.getElMarkers(o).length>0}},{key:"getPathFromPoint",value:function(o,a){var c=Number(o.getAttribute("cx")),d=Number(o.getAttribute("cy")),m=o.getAttribute("shape");return new tn(this.ctx).getMarkerPath(c,d,m,a)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(o){var a=this.w,c=a.config.markers.hover.size;return c===void 0&&(c=a.globals.markers.size[o]+a.config.markers.hover.sizeOffset),c}},{key:"toggleAllTooltipSeriesGroups",value:function(o){var a=this.w,c=this.ttCtx;c.allTooltipSeriesGroups.length===0&&(c.allTooltipSeriesGroups=a.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var d=c.allTooltipSeriesGroups,m=0;m<d.length;m++)o==="enable"?(d[m].classList.add("apexcharts-active"),d[m].style.display=a.config.tooltip.items.display):(d[m].classList.remove("apexcharts-active"),d[m].style.display="none")}}]),C}(),Ng=function(){function C(o){gn(this,C),this.w=o.w,this.ctx=o.ctx,this.ttCtx=o,this.tooltipUtil=new Gh(o)}return rn(C,[{key:"drawSeriesTexts",value:function(o){var a=o.shared,c=a===void 0||a,d=o.ttItems,m=o.i,b=m===void 0?0:m,w=o.j,A=w===void 0?null:w,E=o.y1,M=o.y2,O=o.e,L=this.w;L.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:b,j:A,y1:E,y2:M,w:L}):this.toggleActiveInactiveSeries(c,b);var $=this.getValuesToPrint({i:b,j:A});this.printLabels({i:b,j:A,values:$,ttItems:d,shared:c,e:O});var Y=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=Y.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=Y.getBoundingClientRect().height}},{key:"printLabels",value:function(o){var a,c=this,d=o.i,m=o.j,b=o.values,w=o.ttItems,A=o.shared,E=o.e,M=this.w,O=[],L=function(Te){return M.globals.seriesGoals[Te]&&M.globals.seriesGoals[Te][m]&&Array.isArray(M.globals.seriesGoals[Te][m])},$=b.xVal,Y=b.zVal,U=b.xAxisTTVal,ne="",ae=M.globals.colors[d];m!==null&&M.config.plotOptions.bar.distributed&&(ae=M.globals.colors[m]);for(var le=function(Te,Ve){var ve=c.getFormatters(d);ne=c.getSeriesName({fn:ve.yLbTitleFormatter,index:d,seriesIndex:d,j:m}),M.config.chart.type==="treemap"&&(ne=ve.yLbTitleFormatter(String(M.config.series[d].data[m].x),{series:M.globals.series,seriesIndex:d,dataPointIndex:m,w:M}));var Pe=M.config.tooltip.inverseOrder?Ve:Te;if(M.globals.axisCharts){var ht=function(q){var ue,ye,nt,Ft;return M.globals.isRangeData?ve.yLbFormatter((ue=M.globals.seriesRangeStart)===null||ue===void 0||(ye=ue[q])===null||ye===void 0?void 0:ye[m],{series:M.globals.seriesRangeStart,seriesIndex:q,dataPointIndex:m,w:M})+" - "+ve.yLbFormatter((nt=M.globals.seriesRangeEnd)===null||nt===void 0||(Ft=nt[q])===null||Ft===void 0?void 0:Ft[m],{series:M.globals.seriesRangeEnd,seriesIndex:q,dataPointIndex:m,w:M}):ve.yLbFormatter(M.globals.series[q][m],{series:M.globals.series,seriesIndex:q,dataPointIndex:m,w:M})};if(A)ve=c.getFormatters(Pe),ne=c.getSeriesName({fn:ve.yLbTitleFormatter,index:Pe,seriesIndex:d,j:m}),ae=M.globals.colors[Pe],a=ht(Pe),L(Pe)&&(O=M.globals.seriesGoals[Pe][m].map(function(q){return{attrs:q,val:ve.yLbFormatter(q.value,{seriesIndex:Pe,dataPointIndex:m,w:M})}}));else{var P,W=E==null||(P=E.target)===null||P===void 0?void 0:P.getAttribute("fill");W&&(W.indexOf("url")!==-1?W.indexOf("Pattern")!==-1&&(ae=M.globals.dom.baseEl.querySelector(W.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):ae=W),a=ht(d),L(d)&&Array.isArray(M.globals.seriesGoals[d][m])&&(O=M.globals.seriesGoals[d][m].map(function(q){return{attrs:q,val:ve.yLbFormatter(q.value,{seriesIndex:d,dataPointIndex:m,w:M})}}))}}m===null&&(a=ve.yLbFormatter(M.globals.series[d],Tt(Tt({},M),{},{seriesIndex:d,dataPointIndex:d}))),c.DOMHandling({i:d,t:Pe,j:m,ttItems:w,values:{val:a,goalVals:O,xVal:$,xAxisTTVal:U,zVal:Y},seriesName:ne,shared:A,pColor:ae})},me=0,Oe=M.globals.series.length-1;me<M.globals.series.length;me++,Oe--)le(me,Oe)}},{key:"getFormatters",value:function(o){var a,c=this.w,d=c.globals.yLabelFormatters[o];return c.globals.ttVal!==void 0?Array.isArray(c.globals.ttVal)?(d=c.globals.ttVal[o]&&c.globals.ttVal[o].formatter,a=c.globals.ttVal[o]&&c.globals.ttVal[o].title&&c.globals.ttVal[o].title.formatter):(d=c.globals.ttVal.formatter,typeof c.globals.ttVal.title.formatter=="function"&&(a=c.globals.ttVal.title.formatter)):a=c.config.tooltip.y.title.formatter,typeof d!="function"&&(d=c.globals.yLabelFormatters[0]?c.globals.yLabelFormatters[0]:function(m){return m}),typeof a!="function"&&(a=function(m){return m?m+": ":""}),{yLbFormatter:d,yLbTitleFormatter:a}}},{key:"getSeriesName",value:function(o){var a=o.fn,c=o.index,d=o.seriesIndex,m=o.j,b=this.w;return a(String(b.globals.seriesNames[c]),{series:b.globals.series,seriesIndex:d,dataPointIndex:m,w:b})}},{key:"DOMHandling",value:function(o){o.i;var a=o.t,c=o.j,d=o.ttItems,m=o.values,b=o.seriesName,w=o.shared,A=o.pColor,E=this.w,M=this.ttCtx,O=m.val,L=m.goalVals,$=m.xVal,Y=m.xAxisTTVal,U=m.zVal,ne=null;ne=d[a].children,E.config.tooltip.fillSeriesColor&&(d[a].style.backgroundColor=A,ne[0].style.display="none"),M.showTooltipTitle&&(M.tooltipTitle===null&&(M.tooltipTitle=E.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),M.tooltipTitle.innerHTML=$),M.isXAxisTooltipEnabled&&(M.xaxisTooltipText.innerHTML=Y!==""?Y:$);var ae=d[a].querySelector(".apexcharts-tooltip-text-y-label");ae&&(ae.innerHTML=b||"");var le=d[a].querySelector(".apexcharts-tooltip-text-y-value");le&&(le.innerHTML=O!==void 0?O:""),ne[0]&&ne[0].classList.contains("apexcharts-tooltip-marker")&&(E.config.tooltip.marker.fillColors&&Array.isArray(E.config.tooltip.marker.fillColors)&&(A=E.config.tooltip.marker.fillColors[a]),ne[0].style.backgroundColor=A),E.config.tooltip.marker.show||(ne[0].style.display="none");var me=d[a].querySelector(".apexcharts-tooltip-text-goals-label"),Oe=d[a].querySelector(".apexcharts-tooltip-text-goals-value");if(L.length&&E.globals.seriesGoals[a]){var Te=function(){var Pe="<div >",ht="<div>";L.forEach(function(P,W){Pe+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(P.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(P.attrs.name,"</div>"),ht+="<div>".concat(P.val,"</div>")}),me.innerHTML=Pe+"</div>",Oe.innerHTML=ht+"</div>"};w?E.globals.seriesGoals[a][c]&&Array.isArray(E.globals.seriesGoals[a][c])?Te():(me.innerHTML="",Oe.innerHTML=""):Te()}else me.innerHTML="",Oe.innerHTML="";if(U!==null&&(d[a].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=E.config.tooltip.z.title,d[a].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=U!==void 0?U:""),w&&ne[0]){if(E.config.tooltip.hideEmptySeries){var Ve=d[a].querySelector(".apexcharts-tooltip-marker"),ve=d[a].querySelector(".apexcharts-tooltip-text");parseFloat(O)==0?(Ve.style.display="none",ve.style.display="none"):(Ve.style.display="block",ve.style.display="block")}O==null||E.globals.ancillaryCollapsedSeriesIndices.indexOf(a)>-1||E.globals.collapsedSeriesIndices.indexOf(a)>-1||Array.isArray(M.tConfig.enabledOnSeries)&&M.tConfig.enabledOnSeries.indexOf(a)===-1?ne[0].parentNode.style.display="none":ne[0].parentNode.style.display=E.config.tooltip.items.display}else Array.isArray(M.tConfig.enabledOnSeries)&&M.tConfig.enabledOnSeries.indexOf(a)===-1&&(ne[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(o,a){var c=this.w;if(o)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var d=c.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(a));d&&(d.classList.add("apexcharts-active"),d.style.display=c.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(o){var a=o.i,c=o.j,d=this.w,m=this.ctx.series.filteredSeriesX(),b="",w="",A=null,E=null,M={series:d.globals.series,seriesIndex:a,dataPointIndex:c,w:d},O=d.globals.ttZFormatter;c===null?E=d.globals.series[a]:d.globals.isXNumeric&&d.config.chart.type!=="treemap"?(b=m[a][c],m[a].length===0&&(b=m[this.tooltipUtil.getFirstActiveXArray(m)][c])):b=new $l(this.ctx).isFormatXY()?d.config.series[a].data[c]!==void 0?d.config.series[a].data[c].x:"":d.globals.labels[c]!==void 0?d.globals.labels[c]:"";var L=b;return d.globals.isXNumeric&&d.config.xaxis.type==="datetime"?b=new pe(this.ctx).xLabelFormat(d.globals.ttKeyFormatter,L,L,{i:void 0,dateFormatter:new ja(this.ctx).formatDate,w:this.w}):b=d.globals.isBarHorizontal?d.globals.yLabelFormatters[0](L,M):d.globals.xLabelFormatter(L,M),d.config.tooltip.x.formatter!==void 0&&(b=d.globals.ttKeyFormatter(L,M)),d.globals.seriesZ.length>0&&d.globals.seriesZ[a].length>0&&(A=O(d.globals.seriesZ[a][c],d)),w=typeof d.config.xaxis.tooltip.formatter=="function"?d.globals.xaxisTooltipFormatter(L,M):b,{val:Array.isArray(E)?E.join(" "):E,xVal:Array.isArray(b)?b.join(" "):b,xAxisTTVal:Array.isArray(w)?w.join(" "):w,zVal:A}}},{key:"handleCustomTooltip",value:function(o){var a=o.i,c=o.j,d=o.y1,m=o.y2,b=o.w,w=this.ttCtx.getElTooltip(),A=b.config.tooltip.custom;Array.isArray(A)&&A[a]&&(A=A[a]),w.innerHTML=A({ctx:this.ctx,series:b.globals.series,seriesIndex:a,dataPointIndex:c,y1:d,y2:m,w:b})}}]),C}(),Nc=function(){function C(o){gn(this,C),this.ttCtx=o,this.ctx=o.ctx,this.w=o.w}return rn(C,[{key:"moveXCrosshairs",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=this.ttCtx,d=this.w,m=c.getElXCrosshairs(),b=o-c.xcrosshairsWidth/2,w=d.globals.labels.slice().length;if(a!==null&&(b=d.globals.gridWidth/w*a),m===null||d.globals.isBarHorizontal||(m.setAttribute("x",b),m.setAttribute("x1",b),m.setAttribute("x2",b),m.setAttribute("y2",d.globals.gridHeight),m.classList.add("apexcharts-active")),b<0&&(b=0),b>d.globals.gridWidth&&(b=d.globals.gridWidth),c.isXAxisTooltipEnabled){var A=b;d.config.xaxis.crosshairs.width!=="tickWidth"&&d.config.xaxis.crosshairs.width!=="barWidth"||(A=b+c.xcrosshairsWidth/2),this.moveXAxisTooltip(A)}}},{key:"moveYCrosshairs",value:function(o){var a=this.ttCtx;a.ycrosshairs!==null&&tn.setAttrs(a.ycrosshairs,{y1:o,y2:o}),a.ycrosshairsHidden!==null&&tn.setAttrs(a.ycrosshairsHidden,{y1:o,y2:o})}},{key:"moveXAxisTooltip",value:function(o){var a=this.w,c=this.ttCtx;if(c.xaxisTooltip!==null&&c.xcrosshairsWidth!==0){c.xaxisTooltip.classList.add("apexcharts-active");var d=c.xaxisOffY+a.config.xaxis.tooltip.offsetY+a.globals.translateY+1+a.config.xaxis.offsetY;if(o-=c.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(o)){o+=a.globals.translateX;var m;m=new tn(this.ctx).getTextRects(c.xaxisTooltipText.innerHTML),c.xaxisTooltipText.style.minWidth=m.width+"px",c.xaxisTooltip.style.left=o+"px",c.xaxisTooltip.style.top=d+"px"}}}},{key:"moveYAxisTooltip",value:function(o){var a=this.w,c=this.ttCtx;c.yaxisTTEls===null&&(c.yaxisTTEls=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var d=parseInt(c.ycrosshairsHidden.getAttribute("y1"),10),m=a.globals.translateY+d,b=c.yaxisTTEls[o].getBoundingClientRect().height,w=a.globals.translateYAxisX[o]-2;a.config.yaxis[o].opposite&&(w-=26),m-=b/2,a.globals.ignoreYAxisIndexes.indexOf(o)===-1?(c.yaxisTTEls[o].classList.add("apexcharts-active"),c.yaxisTTEls[o].style.top=m+"px",c.yaxisTTEls[o].style.left=w+a.config.yaxis[o].tooltip.offsetX+"px"):c.yaxisTTEls[o].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=this.w,m=this.ttCtx,b=m.getElTooltip(),w=m.tooltipRect,A=c!==null?parseFloat(c):1,E=parseFloat(o)+A+5,M=parseFloat(a)+A/2;if(E>d.globals.gridWidth/2&&(E=E-w.ttWidth-A-10),E>d.globals.gridWidth-w.ttWidth-10&&(E=d.globals.gridWidth-w.ttWidth),E<-20&&(E=-20),d.config.tooltip.followCursor){var O=m.getElGrid().getBoundingClientRect();(E=m.e.clientX-O.left)>d.globals.gridWidth/2&&(E-=m.tooltipRect.ttWidth),(M=m.e.clientY+d.globals.translateY-O.top)>d.globals.gridHeight/2&&(M-=m.tooltipRect.ttHeight)}else d.globals.isBarHorizontal||w.ttHeight/2+M>d.globals.gridHeight&&(M=d.globals.gridHeight-w.ttHeight+d.globals.translateY);isNaN(E)||(E+=d.globals.translateX,b.style.left=E+"px",b.style.top=M+"px")}},{key:"moveMarkers",value:function(o,a){var c=this.w,d=this.ttCtx;if(c.globals.markers.size[o]>0)for(var m=c.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(o,"'] .apexcharts-marker")),b=0;b<m.length;b++)parseInt(m[b].getAttribute("rel"),10)===a&&(d.marker.resetPointsSize(),d.marker.enlargeCurrentPoint(a,m[b]));else d.marker.resetPointsSize(),this.moveDynamicPointOnHover(a,o)}},{key:"moveDynamicPointOnHover",value:function(o,a){var c,d,m,b,w=this.w,A=this.ttCtx,E=new tn(this.ctx),M=w.globals.pointsArray,O=A.tooltipUtil.getHoverMarkerSize(a),L=w.config.series[a].type;if(!L||L!=="column"&&L!=="candlestick"&&L!=="boxPlot"){m=(c=M[a][o])===null||c===void 0?void 0:c[0],b=((d=M[a][o])===null||d===void 0?void 0:d[1])||0;var $=w.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(a,"'] .apexcharts-series-markers path"));if($&&b<w.globals.gridHeight&&b>0){var Y=$.getAttribute("shape"),U=E.getMarkerPath(m,b,Y,1.5*O);$.setAttribute("d",U)}this.moveXCrosshairs(m),A.fixedTooltip||this.moveTooltip(m,b,O)}}},{key:"moveDynamicPointsOnHover",value:function(o){var a,c=this.ttCtx,d=c.w,m=0,b=0,w=d.globals.pointsArray,A=new er(this.ctx),E=new tn(this.ctx);a=A.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var M=c.tooltipUtil.getHoverMarkerSize(a);w[a]&&(m=w[a][o][0],b=w[a][o][1]);var O=c.tooltipUtil.getAllMarkers();if(O!==null)for(var L=0;L<d.globals.series.length;L++){var $=w[L];if(d.globals.comboCharts&&$===void 0&&O.splice(L,0,null),$&&$.length){var Y=w[L][o][1],U=void 0;O[L].setAttribute("cx",m);var ne=O[L].getAttribute("shape");if(d.config.chart.type==="rangeArea"&&!d.globals.comboCharts){var ae=o+d.globals.series[L].length;U=w[L][ae][1],Y-=Math.abs(Y-U)/2}if(Y!==null&&!isNaN(Y)&&Y<d.globals.gridHeight+M&&Y+M>0){var le=E.getMarkerPath(m,Y,ne,M);O[L].setAttribute("d",le)}else O[L].setAttribute("d","")}}this.moveXCrosshairs(m),c.fixedTooltip||this.moveTooltip(m,b||d.globals.gridHeight,M)}},{key:"moveStickyTooltipOverBars",value:function(o,a){var c=this.w,d=this.ttCtx,m=c.globals.columnSeries?c.globals.columnSeries.length:c.globals.series.length,b=m>=2&&m%2==0?Math.floor(m/2):Math.floor(m/2)+1;c.globals.isBarHorizontal&&(b=new er(this.ctx).getActiveConfigSeriesIndex("desc")+1);var w=c.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(b,"'] path[j='").concat(o,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(b,"'] path[j='").concat(o,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(b,"'] path[j='").concat(o,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(b,"'] path[j='").concat(o,"']"));w||typeof a!="number"||(w=c.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(a,"'] path[j='").concat(o,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(a,"'] path[j='").concat(o,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(a,"'] path[j='").concat(o,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(a,"'] path[j='").concat(o,"']")));var A=w?parseFloat(w.getAttribute("cx")):0,E=w?parseFloat(w.getAttribute("cy")):0,M=w?parseFloat(w.getAttribute("barWidth")):0,O=d.getElGrid().getBoundingClientRect(),L=w&&(w.classList.contains("apexcharts-candlestick-area")||w.classList.contains("apexcharts-boxPlot-area"));c.globals.isXNumeric?(w&&!L&&(A-=m%2!=0?M/2:0),w&&L&&c.globals.comboCharts&&(A-=M/2)):c.globals.isBarHorizontal||(A=d.xAxisTicksPositions[o-1]+d.dataPointsDividedWidth/2,isNaN(A)&&(A=d.xAxisTicksPositions[o]-d.dataPointsDividedWidth/2)),c.globals.isBarHorizontal?E-=d.tooltipRect.ttHeight:c.config.tooltip.followCursor?E=d.e.clientY-O.top-d.tooltipRect.ttHeight/2:E+d.tooltipRect.ttHeight+15>c.globals.gridHeight&&(E=c.globals.gridHeight),c.globals.isBarHorizontal||this.moveXCrosshairs(A),d.fixedTooltip||this.moveTooltip(A,E||c.globals.gridHeight)}}]),C}(),rs=function(){function C(o){gn(this,C),this.w=o.w,this.ttCtx=o,this.ctx=o.ctx,this.tooltipPosition=new Nc(o)}return rn(C,[{key:"drawDynamicPoints",value:function(){var o=this.w,a=new tn(this.ctx),c=new Pa(this.ctx),d=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series");d=vn(d),o.config.chart.stacked&&d.sort(function(O,L){return parseFloat(O.getAttribute("data:realIndex"))-parseFloat(L.getAttribute("data:realIndex"))});for(var m=0;m<d.length;m++){var b=d[m].querySelector(".apexcharts-series-markers-wrap");if(b!==null){var w=void 0,A="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));o.config.chart.type!=="line"&&o.config.chart.type!=="area"||o.globals.comboCharts||o.config.tooltip.intersect||(A+=" no-pointer-events");var E=c.getMarkerConfig({cssClass:A,seriesIndex:Number(b.getAttribute("data:realIndex"))});(w=a.drawMarker(0,0,E)).node.setAttribute("default-marker-size",0);var M=document.createElementNS(o.globals.SVGNS,"g");M.classList.add("apexcharts-series-markers"),M.appendChild(w.node),b.appendChild(M)}}}},{key:"enlargeCurrentPoint",value:function(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,m=this.w;m.config.chart.type!=="bubble"&&this.newPointSize(o,a);var b=a.getAttribute("cx"),w=a.getAttribute("cy");if(c!==null&&d!==null&&(b=c,w=d),this.tooltipPosition.moveXCrosshairs(b),!this.fixedTooltip){if(m.config.chart.type==="radar"){var A=this.ttCtx.getElGrid().getBoundingClientRect();b=this.ttCtx.e.clientX-A.left}this.tooltipPosition.moveTooltip(b,w,m.config.markers.hover.size)}}},{key:"enlargePoints",value:function(o){for(var a=this.w,c=this,d=this.ttCtx,m=o,b=a.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),w=a.config.markers.hover.size,A=0;A<b.length;A++){var E=b[A].getAttribute("rel"),M=b[A].getAttribute("index");if(w===void 0&&(w=a.globals.markers.size[M]+a.config.markers.hover.sizeOffset),m===parseInt(E,10)){c.newPointSize(m,b[A]);var O=b[A].getAttribute("cx"),L=b[A].getAttribute("cy");c.tooltipPosition.moveXCrosshairs(O),d.fixedTooltip||c.tooltipPosition.moveTooltip(O,L,w)}else c.oldPointSize(b[A])}}},{key:"newPointSize",value:function(o,a){var c=this.w,d=c.config.markers.hover.size,m=o===0?a.parentNode.firstChild:a.parentNode.lastChild;if(m.getAttribute("default-marker-size")!=="0"){var b=parseInt(m.getAttribute("index"),10);d===void 0&&(d=c.globals.markers.size[b]+c.config.markers.hover.sizeOffset),d<0&&(d=0);var w=this.ttCtx.tooltipUtil.getPathFromPoint(a,d);a.setAttribute("d",w)}}},{key:"oldPointSize",value:function(o){var a=parseFloat(o.getAttribute("default-marker-size")),c=this.ttCtx.tooltipUtil.getPathFromPoint(o,a);o.setAttribute("d",c)}},{key:"resetPointsSize",value:function(){for(var o=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=0;a<o.length;a++){var c=parseFloat(o[a].getAttribute("default-marker-size"));if(oe.isNumber(c)&&c>0){var d=this.ttCtx.tooltipUtil.getPathFromPoint(o[a],c);o[a].setAttribute("d",d)}else o[a].setAttribute("d","M0,0")}}}]),C}(),Li=function(){function C(o){gn(this,C),this.w=o.w;var a=this.w;this.ttCtx=o,this.isVerticalGroupedRangeBar=!a.globals.isBarHorizontal&&a.config.chart.type==="rangeBar"&&a.config.plotOptions.bar.rangeBarGroupRows}return rn(C,[{key:"getAttr",value:function(o,a){return parseFloat(o.target.getAttribute(a))}},{key:"handleHeatTreeTooltip",value:function(o){var a=o.e,c=o.opt,d=o.x,m=o.y,b=o.type,w=this.ttCtx,A=this.w;if(a.target.classList.contains("apexcharts-".concat(b,"-rect"))){var E=this.getAttr(a,"i"),M=this.getAttr(a,"j"),O=this.getAttr(a,"cx"),L=this.getAttr(a,"cy"),$=this.getAttr(a,"width"),Y=this.getAttr(a,"height");if(w.tooltipLabels.drawSeriesTexts({ttItems:c.ttItems,i:E,j:M,shared:!1,e:a}),A.globals.capturedSeriesIndex=E,A.globals.capturedDataPointIndex=M,d=O+w.tooltipRect.ttWidth/2+$,m=L+w.tooltipRect.ttHeight/2-Y/2,w.tooltipPosition.moveXCrosshairs(O+$/2),d>A.globals.gridWidth/2&&(d=O-w.tooltipRect.ttWidth/2+$),w.w.config.tooltip.followCursor){var U=A.globals.dom.elWrap.getBoundingClientRect();d=A.globals.clientX-U.left-(d>A.globals.gridWidth/2?w.tooltipRect.ttWidth:0),m=A.globals.clientY-U.top-(m>A.globals.gridHeight/2?w.tooltipRect.ttHeight:0)}}return{x:d,y:m}}},{key:"handleMarkerTooltip",value:function(o){var a,c,d=o.e,m=o.opt,b=o.x,w=o.y,A=this.w,E=this.ttCtx;if(d.target.classList.contains("apexcharts-marker")){var M=parseInt(m.paths.getAttribute("cx"),10),O=parseInt(m.paths.getAttribute("cy"),10),L=parseFloat(m.paths.getAttribute("val"));if(c=parseInt(m.paths.getAttribute("rel"),10),a=parseInt(m.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,E.intersect){var $=oe.findAncestor(m.paths,"apexcharts-series");$&&(a=parseInt($.getAttribute("data:realIndex"),10))}if(E.tooltipLabels.drawSeriesTexts({ttItems:m.ttItems,i:a,j:c,shared:!E.showOnIntersect&&A.config.tooltip.shared,e:d}),d.type==="mouseup"&&E.markerClick(d,a,c),A.globals.capturedSeriesIndex=a,A.globals.capturedDataPointIndex=c,b=M,w=O+A.globals.translateY-1.4*E.tooltipRect.ttHeight,E.w.config.tooltip.followCursor){var Y=E.getElGrid().getBoundingClientRect();w=E.e.clientY+A.globals.translateY-Y.top}L<0&&(w=O),E.marker.enlargeCurrentPoint(c,m.paths,b,w)}return{x:b,y:w}}},{key:"handleBarTooltip",value:function(o){var a,c,d=o.e,m=o.opt,b=this.w,w=this.ttCtx,A=w.getElTooltip(),E=0,M=0,O=0,L=this.getBarTooltipXY({e:d,opt:m});if(L.j!==null||L.barHeight!==0||L.barWidth!==0){a=L.i;var $=L.j;if(b.globals.capturedSeriesIndex=a,b.globals.capturedDataPointIndex=$,b.globals.isBarHorizontal&&w.tooltipUtil.hasBars()||!b.config.tooltip.shared?(M=L.x,O=L.y,c=Array.isArray(b.config.stroke.width)?b.config.stroke.width[a]:b.config.stroke.width,E=M):b.globals.comboCharts||b.config.tooltip.shared||(E/=2),isNaN(O)&&(O=b.globals.svgHeight-w.tooltipRect.ttHeight),parseInt(m.paths.parentNode.getAttribute("data:realIndex"),10),M+w.tooltipRect.ttWidth>b.globals.gridWidth?M-=w.tooltipRect.ttWidth:M<0&&(M=0),w.w.config.tooltip.followCursor){var Y=w.getElGrid().getBoundingClientRect();O=w.e.clientY-Y.top}w.tooltip===null&&(w.tooltip=b.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),b.config.tooltip.shared||(b.globals.comboBarCount>0?w.tooltipPosition.moveXCrosshairs(E+c/2):w.tooltipPosition.moveXCrosshairs(E)),!w.fixedTooltip&&(!b.config.tooltip.shared||b.globals.isBarHorizontal&&w.tooltipUtil.hasBars())&&(O=O+b.globals.translateY-w.tooltipRect.ttHeight/2,A.style.left=M+b.globals.translateX+"px",A.style.top=O+"px")}}},{key:"getBarTooltipXY",value:function(o){var a=this,c=o.e,d=o.opt,m=this.w,b=null,w=this.ttCtx,A=0,E=0,M=0,O=0,L=0,$=c.target.classList;if($.contains("apexcharts-bar-area")||$.contains("apexcharts-candlestick-area")||$.contains("apexcharts-boxPlot-area")||$.contains("apexcharts-rangebar-area")){var Y=c.target,U=Y.getBoundingClientRect(),ne=d.elGrid.getBoundingClientRect(),ae=U.height;L=U.height;var le=U.width,me=parseInt(Y.getAttribute("cx"),10),Oe=parseInt(Y.getAttribute("cy"),10);O=parseFloat(Y.getAttribute("barWidth"));var Te=c.type==="touchmove"?c.touches[0].clientX:c.clientX;b=parseInt(Y.getAttribute("j"),10),A=parseInt(Y.parentNode.getAttribute("rel"),10)-1;var Ve=Y.getAttribute("data-range-y1"),ve=Y.getAttribute("data-range-y2");m.globals.comboCharts&&(A=parseInt(Y.parentNode.getAttribute("data:realIndex"),10));var Pe=function(P){return m.globals.isXNumeric?me-le/2:a.isVerticalGroupedRangeBar?me+le/2:me-w.dataPointsDividedWidth+le/2},ht=function(){return Oe-w.dataPointsDividedHeight+ae/2-w.tooltipRect.ttHeight/2};w.tooltipLabels.drawSeriesTexts({ttItems:d.ttItems,i:A,j:b,y1:Ve?parseInt(Ve,10):null,y2:ve?parseInt(ve,10):null,shared:!w.showOnIntersect&&m.config.tooltip.shared,e:c}),m.config.tooltip.followCursor?m.globals.isBarHorizontal?(E=Te-ne.left+15,M=ht()):(E=Pe(),M=c.clientY-ne.top-w.tooltipRect.ttHeight/2-15):m.globals.isBarHorizontal?((E=me)<w.xyRatios.baseLineInvertedY&&(E=me-w.tooltipRect.ttWidth),M=ht()):(E=Pe(),M=Oe)}return{x:E,y:M,barHeight:L,barWidth:O,i:A,j:b}}}]),C}(),fi=function(){function C(o){gn(this,C),this.w=o.w,this.ttCtx=o}return rn(C,[{key:"drawXaxisTooltip",value:function(){var o=this.w,a=this.ttCtx,c=o.config.xaxis.position==="bottom";a.xaxisOffY=c?o.globals.gridHeight+1:-o.globals.xAxisHeight-o.config.xaxis.axisTicks.height+3;var d=c?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",m=o.globals.dom.elWrap;a.isXAxisTooltipEnabled&&o.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(a.xaxisTooltip=document.createElement("div"),a.xaxisTooltip.setAttribute("class",d+" apexcharts-theme-"+o.config.tooltip.theme),m.appendChild(a.xaxisTooltip),a.xaxisTooltipText=document.createElement("div"),a.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),a.xaxisTooltipText.style.fontFamily=o.config.xaxis.tooltip.style.fontFamily||o.config.chart.fontFamily,a.xaxisTooltipText.style.fontSize=o.config.xaxis.tooltip.style.fontSize,a.xaxisTooltip.appendChild(a.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var o=this.w,a=this.ttCtx,c=0;c<o.config.yaxis.length;c++){var d=o.config.yaxis[c].opposite||o.config.yaxis[c].crosshairs.opposite;a.yaxisOffX=d?o.globals.gridWidth+1:1;var m="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(c,d?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),b=o.globals.dom.elWrap;o.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(c))===null&&(a.yaxisTooltip=document.createElement("div"),a.yaxisTooltip.setAttribute("class",m+" apexcharts-theme-"+o.config.tooltip.theme),b.appendChild(a.yaxisTooltip),c===0&&(a.yaxisTooltipText=[]),a.yaxisTooltipText[c]=document.createElement("div"),a.yaxisTooltipText[c].classList.add("apexcharts-yaxistooltip-text"),a.yaxisTooltip.appendChild(a.yaxisTooltipText[c]))}}},{key:"setXCrosshairWidth",value:function(){var o=this.w,a=this.ttCtx,c=a.getElXCrosshairs();if(a.xcrosshairsWidth=parseInt(o.config.xaxis.crosshairs.width,10),o.globals.comboCharts){var d=o.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(d!==null&&o.config.xaxis.crosshairs.width==="barWidth"){var m=parseFloat(d.getAttribute("barWidth"));a.xcrosshairsWidth=m}else if(o.config.xaxis.crosshairs.width==="tickWidth"){var b=o.globals.labels.length;a.xcrosshairsWidth=o.globals.gridWidth/b}}else if(o.config.xaxis.crosshairs.width==="tickWidth"){var w=o.globals.labels.length;a.xcrosshairsWidth=o.globals.gridWidth/w}else if(o.config.xaxis.crosshairs.width==="barWidth"){var A=o.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(A!==null){var E=parseFloat(A.getAttribute("barWidth"));a.xcrosshairsWidth=E}else a.xcrosshairsWidth=1}o.globals.isBarHorizontal&&(a.xcrosshairsWidth=0),c!==null&&a.xcrosshairsWidth>0&&c.setAttribute("width",a.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var o=this.w,a=this.ttCtx;a.ycrosshairs=o.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),a.ycrosshairsHidden=o.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(o,a,c){var d=this.ttCtx,m=this.w,b=m.globals,w=b.seriesYAxisMap[o];if(d.yaxisTooltips[o]&&w.length>0){var A=b.yLabelFormatters[o],E=d.getElGrid().getBoundingClientRect(),M=w[0],O=0;c.yRatio.length>1&&(O=M);var L=(a-E.top)*c.yRatio[O],$=b.maxYArr[M]-b.minYArr[M],Y=b.minYArr[M]+($-L);m.config.yaxis[o].reversed&&(Y=b.maxYArr[M]-($-L)),d.tooltipPosition.moveYCrosshairs(a-E.top),d.yaxisTooltipText[o].innerHTML=A(Y),d.tooltipPosition.moveYAxisTooltip(o)}}}]),C}(),Ic=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w;var a=this.w;this.tConfig=a.config.tooltip,this.tooltipUtil=new Gh(this),this.tooltipLabels=new Ng(this),this.tooltipPosition=new Nc(this),this.marker=new rs(this),this.intersect=new Li(this),this.axesTooltip=new fi(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!a.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return rn(C,[{key:"getElTooltip",value:function(o){return o||(o=this),o.w.globals.dom.baseEl?o.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(o){var a=this.w;this.xyRatios=o,this.isXAxisTooltipEnabled=a.config.xaxis.tooltip.enabled&&a.globals.axisCharts,this.yaxisTooltips=a.config.yaxis.map(function(b,w){return!!(b.show&&b.tooltip.enabled&&a.globals.axisCharts)}),this.allTooltipSeriesGroups=[],a.globals.axisCharts||(this.showTooltipTitle=!1);var c=document.createElement("div");if(c.classList.add("apexcharts-tooltip"),a.config.tooltip.cssClass&&c.classList.add(a.config.tooltip.cssClass),c.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),a.globals.dom.elWrap.appendChild(c),a.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var d=new zl(this.ctx);this.xAxisTicksPositions=d.getXAxisTicksPositions()}if(!a.globals.comboCharts&&!this.tConfig.intersect&&a.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),a.config.markers.size!==0&&a.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),a.globals.collapsedSeries.length!==a.globals.series.length){this.dataPointsDividedHeight=a.globals.gridHeight/a.globals.dataPoints,this.dataPointsDividedWidth=a.globals.gridWidth/a.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||a.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,c.appendChild(this.tooltipTitle));var m=a.globals.series.length;(a.globals.xyCharts||a.globals.comboCharts)&&this.tConfig.shared&&(m=this.showOnIntersect?1:a.globals.series.length),this.legendLabels=a.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(m),this.addSVGEvents()}}},{key:"createTTElements",value:function(o){for(var a=this,c=this.w,d=[],m=this.getElTooltip(),b=function(A){var E=document.createElement("div");E.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(A)),E.style.order=c.config.tooltip.inverseOrder?o-A:A+1;var M=document.createElement("span");M.classList.add("apexcharts-tooltip-marker"),M.style.backgroundColor=c.globals.colors[A],E.appendChild(M);var O=document.createElement("div");O.classList.add("apexcharts-tooltip-text"),O.style.fontFamily=a.tConfig.style.fontFamily||c.config.chart.fontFamily,O.style.fontSize=a.tConfig.style.fontSize,["y","goals","z"].forEach(function(L){var $=document.createElement("div");$.classList.add("apexcharts-tooltip-".concat(L,"-group"));var Y=document.createElement("span");Y.classList.add("apexcharts-tooltip-text-".concat(L,"-label")),$.appendChild(Y);var U=document.createElement("span");U.classList.add("apexcharts-tooltip-text-".concat(L,"-value")),$.appendChild(U),O.appendChild($)}),E.appendChild(O),m.appendChild(E),d.push(E)},w=0;w<o;w++)b(w);return d}},{key:"addSVGEvents",value:function(){var o=this.w,a=o.config.chart.type,c=this.getElTooltip(),d=!(a!=="bar"&&a!=="candlestick"&&a!=="boxPlot"&&a!=="rangeBar"),m=a==="area"||a==="line"||a==="scatter"||a==="bubble"||a==="radar",b=o.globals.dom.Paper.node,w=this.getElGrid();w&&(this.seriesBound=w.getBoundingClientRect());var A,E=[],M=[],O={hoverArea:b,elGrid:w,tooltipEl:c,tooltipY:E,tooltipX:M,ttItems:this.ttItems};if(o.globals.axisCharts&&(m?A=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):d?A=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):a!=="heatmap"&&a!=="treemap"||(A=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),A&&A.length))for(var L=0;L<A.length;L++)E.push(A[L].getAttribute("cy")),M.push(A[L].getAttribute("cx"));if(o.globals.xyCharts&&!this.showOnIntersect||o.globals.comboCharts&&!this.showOnIntersect||d&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([b],O);else if(d&&!o.globals.comboCharts||m&&this.showOnIntersect)this.addDatapointEventsListeners(O);else if(!o.globals.axisCharts||a==="heatmap"||a==="treemap"){var $=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners($,O)}if(this.showOnIntersect){var Y=o.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");Y.length>0&&this.addPathsEventListeners(Y,O),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(O)}}},{key:"drawFixedTooltipRect",value:function(){var o=this.w,a=this.getElTooltip(),c=a.getBoundingClientRect(),d=c.width+10,m=c.height+10,b=this.tConfig.fixed.offsetX,w=this.tConfig.fixed.offsetY,A=this.tConfig.fixed.position.toLowerCase();return A.indexOf("right")>-1&&(b=b+o.globals.svgWidth-d+10),A.indexOf("bottom")>-1&&(w=w+o.globals.svgHeight-m-10),a.style.left=b+"px",a.style.top=w+"px",{x:b,y:w,ttWidth:d,ttHeight:m}}},{key:"addDatapointEventsListeners",value:function(o){var a=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(a,o)}},{key:"addPathsEventListeners",value:function(o,a){for(var c=this,d=function(b){var w={paths:o[b],tooltipEl:a.tooltipEl,tooltipY:a.tooltipY,tooltipX:a.tooltipX,elGrid:a.elGrid,hoverArea:a.hoverArea,ttItems:a.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(A){return o[b].addEventListener(A,c.onSeriesHover.bind(c,w),{capture:!1,passive:!0})})},m=0;m<o.length;m++)d(m)}},{key:"onSeriesHover",value:function(o,a){var c=this,d=Date.now()-this.lastHoverTime;d>=20?this.seriesHover(o,a):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){c.seriesHover(o,a)},20-d))}},{key:"seriesHover",value:function(o,a){var c=this;this.lastHoverTime=Date.now();var d=[],m=this.w;m.config.chart.group&&(d=this.ctx.getGroupedCharts()),m.globals.axisCharts&&(m.globals.minX===-1/0&&m.globals.maxX===1/0||m.globals.dataPoints===0)||(d.length?d.forEach(function(b){var w=c.getElTooltip(b),A={paths:o.paths,tooltipEl:w,tooltipY:o.tooltipY,tooltipX:o.tooltipX,elGrid:o.elGrid,hoverArea:o.hoverArea,ttItems:b.w.globals.tooltip.ttItems};b.w.globals.minX===c.w.globals.minX&&b.w.globals.maxX===c.w.globals.maxX&&b.w.globals.tooltip.seriesHoverByContext({chartCtx:b,ttCtx:b.w.globals.tooltip,opt:A,e:a})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:o,e:a}))}},{key:"seriesHoverByContext",value:function(o){var a=o.chartCtx,c=o.ttCtx,d=o.opt,m=o.e,b=a.w,w=this.getElTooltip(a);w&&(c.tooltipRect={x:0,y:0,ttWidth:w.getBoundingClientRect().width,ttHeight:w.getBoundingClientRect().height},c.e=m,c.tooltipUtil.hasBars()&&!b.globals.comboCharts&&!c.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new er(a).toggleSeriesOnHover(m,m.target.parentNode),c.fixedTooltip&&c.drawFixedTooltipRect(),b.globals.axisCharts?c.axisChartsTooltips({e:m,opt:d,tooltipRect:c.tooltipRect}):c.nonAxisChartsTooltips({e:m,opt:d,tooltipRect:c.tooltipRect}))}},{key:"axisChartsTooltips",value:function(o){var a,c,d=o.e,m=o.opt,b=this.w,w=m.elGrid.getBoundingClientRect(),A=d.type==="touchmove"?d.touches[0].clientX:d.clientX,E=d.type==="touchmove"?d.touches[0].clientY:d.clientY;if(this.clientY=E,this.clientX=A,b.globals.capturedSeriesIndex=-1,b.globals.capturedDataPointIndex=-1,E<w.top||E>w.top+w.height)this.handleMouseOut(m);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!b.config.tooltip.shared){var M=parseInt(m.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(M)<0)return void this.handleMouseOut(m)}var O=this.getElTooltip(),L=this.getElXCrosshairs(),$=[];b.config.chart.group&&($=this.ctx.getSyncedCharts());var Y=b.globals.xyCharts||b.config.chart.type==="bar"&&!b.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||b.globals.comboCharts&&this.tooltipUtil.hasBars();if(d.type==="mousemove"||d.type==="touchmove"||d.type==="mouseup"){if(b.globals.collapsedSeries.length+b.globals.ancillaryCollapsedSeries.length===b.globals.series.length)return;L!==null&&L.classList.add("apexcharts-active");var U=this.yaxisTooltips.filter(function(le){return le===!0});if(this.ycrosshairs!==null&&U.length&&this.ycrosshairs.classList.add("apexcharts-active"),Y&&!this.showOnIntersect||$.length>1)this.handleStickyTooltip(d,A,E,m);else if(b.config.chart.type==="heatmap"||b.config.chart.type==="treemap"){var ne=this.intersect.handleHeatTreeTooltip({e:d,opt:m,x:a,y:c,type:b.config.chart.type});a=ne.x,c=ne.y,O.style.left=a+"px",O.style.top=c+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:d,opt:m}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:d,opt:m,x:a,y:c});if(this.yaxisTooltips.length)for(var ae=0;ae<b.config.yaxis.length;ae++)this.axesTooltip.drawYaxisTooltipText(ae,E,this.xyRatios);b.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),m.tooltipEl.classList.add("apexcharts-active")}else d.type!=="mouseout"&&d.type!=="touchend"||this.handleMouseOut(m)}}},{key:"nonAxisChartsTooltips",value:function(o){var a=o.e,c=o.opt,d=o.tooltipRect,m=this.w,b=c.paths.getAttribute("rel"),w=this.getElTooltip(),A=m.globals.dom.elWrap.getBoundingClientRect();if(a.type==="mousemove"||a.type==="touchmove"){m.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),w.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:c.ttItems,i:parseInt(b,10)-1,shared:!1});var E=m.globals.clientX-A.left-d.ttWidth/2,M=m.globals.clientY-A.top-d.ttHeight-10;if(w.style.left=E+"px",w.style.top=M+"px",m.config.legend.tooltipHoverFormatter){var O=b-1,L=(0,m.config.legend.tooltipHoverFormatter)(this.legendLabels[O].getAttribute("data:default-text"),{seriesIndex:O,dataPointIndex:O,w:m});this.legendLabels[O].innerHTML=L}}else a.type!=="mouseout"&&a.type!=="touchend"||(w.classList.remove("apexcharts-active"),m.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),m.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function($){var Y=$.getAttribute("data:default-text");$.innerHTML=decodeURIComponent(Y)}))}},{key:"handleStickyTooltip",value:function(o,a,c,d){var m=this.w,b=this.tooltipUtil.getNearestValues({context:this,hoverArea:d.hoverArea,elGrid:d.elGrid,clientX:a,clientY:c}),w=b.j,A=b.capturedSeries;m.globals.collapsedSeriesIndices.includes(A)&&(A=null);var E=d.elGrid.getBoundingClientRect();if(b.hoverX<0||b.hoverX>E.width)this.handleMouseOut(d);else if(A!==null)this.handleStickyCapturedSeries(o,A,d,w);else if(this.tooltipUtil.isXoverlap(w)||m.globals.isBarHorizontal){var M=m.globals.series.findIndex(function(O,L){return!m.globals.collapsedSeriesIndices.includes(L)});this.create(o,this,M,w,d.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(o,a,c,d){var m=this.w;if(!this.tConfig.shared&&m.globals.series[a][d]===null)return void this.handleMouseOut(c);if(m.globals.series[a][d]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(d)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(o,this,a,d,c.ttItems):this.create(o,this,a,d,c.ttItems,!1);else if(this.tooltipUtil.isXoverlap(d)){var b=m.globals.series.findIndex(function(w,A){return!m.globals.collapsedSeriesIndices.includes(A)});this.create(o,this,b,d,c.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var o=this.w,a=new tn(this.ctx),c=o.globals.dom.Paper.find(".apexcharts-bar-area"),d=0;d<c.length;d++)a.pathMouseLeave(c[d])}},{key:"handleMouseOut",value:function(o){var a=this.w,c=this.getElXCrosshairs();if(a.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),o.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),a.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),c!==null&&c.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var d=0;d<this.yaxisTTEls.length;d++)this.yaxisTTEls[d].classList.remove("apexcharts-active")}a.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(m){var b=m.getAttribute("data:default-text");m.innerHTML=decodeURIComponent(b)})}},{key:"markerClick",value:function(o,a,c){var d=this.w;typeof d.config.chart.events.markerClick=="function"&&d.config.chart.events.markerClick(o,this.ctx,{seriesIndex:a,dataPointIndex:c,w:d}),this.ctx.events.fireEvent("markerClick",[o,this.ctx,{seriesIndex:a,dataPointIndex:c,w:d}])}},{key:"create",value:function(o,a,c,d,m){var b,w,A,E,M,O,L,$,Y,U,ne,ae,le,me,Oe,Te,Ve=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,ve=this.w,Pe=a;o.type==="mouseup"&&this.markerClick(o,c,d),Ve===null&&(Ve=this.tConfig.shared);var ht=this.tooltipUtil.hasMarkers(c),P=this.tooltipUtil.getElBars();if(ve.config.legend.tooltipHoverFormatter){var W=ve.config.legend.tooltipHoverFormatter,q=Array.from(this.legendLabels);q.forEach(function(sr){var qr=sr.getAttribute("data:default-text");sr.innerHTML=decodeURIComponent(qr)});for(var ue=0;ue<q.length;ue++){var ye=q[ue],nt=parseInt(ye.getAttribute("i"),10),Ft=decodeURIComponent(ye.getAttribute("data:default-text")),an=W(Ft,{seriesIndex:Ve?nt:c,dataPointIndex:d,w:ve});if(Ve)ye.innerHTML=ve.globals.collapsedSeriesIndices.indexOf(nt)<0?an:Ft;else if(ye.innerHTML=nt===c?an:Ft,c===nt)break}}var hn=Tt(Tt({ttItems:m,i:c,j:d},((b=ve.globals.seriesRange)===null||b===void 0||(w=b[c])===null||w===void 0||(A=w[d])===null||A===void 0||(E=A.y[0])===null||E===void 0?void 0:E.y1)!==void 0&&{y1:(M=ve.globals.seriesRange)===null||M===void 0||(O=M[c])===null||O===void 0||(L=O[d])===null||L===void 0||($=L.y[0])===null||$===void 0?void 0:$.y1}),((Y=ve.globals.seriesRange)===null||Y===void 0||(U=Y[c])===null||U===void 0||(ne=U[d])===null||ne===void 0||(ae=ne.y[0])===null||ae===void 0?void 0:ae.y2)!==void 0&&{y2:(le=ve.globals.seriesRange)===null||le===void 0||(me=le[c])===null||me===void 0||(Oe=me[d])===null||Oe===void 0||(Te=Oe.y[0])===null||Te===void 0?void 0:Te.y2});if(Ve){if(Pe.tooltipLabels.drawSeriesTexts(Tt(Tt({},hn),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),ht)ve.globals.markers.largestSize>0?Pe.marker.enlargePoints(d):Pe.tooltipPosition.moveDynamicPointsOnHover(d);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(P),this.barSeriesHeight>0)){var Jt=new tn(this.ctx),wo=ve.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(d,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(d,c);for(var Ro=0;Ro<wo.length;Ro++)Jt.pathMouseEnter(wo[Ro])}}else Pe.tooltipLabels.drawSeriesTexts(Tt({shared:!1},hn)),this.tooltipUtil.hasBars()&&Pe.tooltipPosition.moveStickyTooltipOverBars(d,c),ht&&Pe.tooltipPosition.moveMarkers(c,d)}}]),C}(),vh=function(){function C(o){gn(this,C),this.w=o.w,this.barCtx=o,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return rn(C,[{key:"handleBarDataLabels",value:function(o){var a,c,d=o.x,m=o.y,b=o.y1,w=o.y2,A=o.i,E=o.j,M=o.realIndex,O=o.columnGroupIndex,L=o.series,$=o.barHeight,Y=o.barWidth,U=o.barXPosition,ne=o.barYPosition,ae=o.visibleSeries,le=o.renderedPath,me=this.w,Oe=new tn(this.barCtx.ctx),Te=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[M]:this.barCtx.strokeWidth;me.globals.isXNumeric&&!me.globals.isBarHorizontal?(a=d+parseFloat(Y*(ae+1)),c=m+parseFloat($*(ae+1))-Te):(a=d+parseFloat(Y*ae),c=m+parseFloat($*ae));var Ve,ve=null,Pe=d,ht=m,P={},W=me.config.dataLabels,q=this.barCtx.barOptions.dataLabels,ue=this.barCtx.barOptions.dataLabels.total;ne!==void 0&&this.barCtx.isRangeBar&&(c=ne,ht=ne),U!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(a=U,Pe=U);var ye=W.offsetX,nt=W.offsetY,Ft={width:0,height:0};if(me.config.dataLabels.enabled){var an=me.globals.series[A][E];Ft=Oe.getTextRects(me.config.dataLabels.formatter?me.config.dataLabels.formatter(an,Tt(Tt({},me),{},{seriesIndex:A,dataPointIndex:E,w:me})):me.globals.yLabelFormatters[0](an),parseFloat(W.style.fontSize))}var hn={x:d,y:m,i:A,j:E,realIndex:M,columnGroupIndex:O,renderedPath:le,bcx:a,bcy:c,barHeight:$,barWidth:Y,textRects:Ft,strokeWidth:Te,dataLabelsX:Pe,dataLabelsY:ht,dataLabelsConfig:W,barDataLabelsConfig:q,barTotalDataLabelsConfig:ue,offX:ye,offY:nt};return P=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(hn):this.calculateColumnsDataLabelsPosition(hn),le.attr({cy:P.bcy,cx:P.bcx,j:E,val:me.globals.series[A][E],barHeight:$,barWidth:Y}),Ve=this.drawCalculatedDataLabels({x:P.dataLabelsX,y:P.dataLabelsY,val:this.barCtx.isRangeBar?[b,w]:me.config.chart.stackType==="100%"?L[M][E]:me.globals.series[M][E],i:M,j:E,barWidth:Y,barHeight:$,textRects:Ft,dataLabelsConfig:W}),me.config.chart.stacked&&ue.enabled&&(ve=this.drawTotalDataLabels({x:P.totalDataLabelsX,y:P.totalDataLabelsY,barWidth:Y,barHeight:$,realIndex:M,textAnchor:P.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:M,j:E}),dataLabelsConfig:W,barTotalDataLabelsConfig:ue})),{dataLabels:Ve,totalDataLabels:ve}}},{key:"getStackedTotalDataLabel",value:function(o){var a=o.realIndex,c=o.j,d=this.w,m=this.barCtx.stackedSeriesTotals[c];return this.totalFormatter&&(m=this.totalFormatter(m,Tt(Tt({},d),{},{seriesIndex:a,dataPointIndex:c,w:d}))),m}},{key:"calculateColumnsDataLabelsPosition",value:function(o){var a=this.w,c=o.i,d=o.j,m=o.realIndex;o.columnGroupIndex;var b,w,A=o.y,E=o.bcx,M=o.barWidth,O=o.barHeight,L=o.textRects,$=o.dataLabelsX,Y=o.dataLabelsY,U=o.dataLabelsConfig,ne=o.barDataLabelsConfig,ae=o.barTotalDataLabelsConfig,le=o.strokeWidth,me=o.offX,Oe=o.offY,Te=E;O=Math.abs(O);var Ve=a.config.plotOptions.bar.dataLabels.orientation==="vertical",ve=this.barCtx.barHelpers.getZeroValueEncounters({i:c,j:d}).zeroEncounters;E-=le/2;var Pe=a.globals.gridWidth/a.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?$+=M/2:($=a.globals.isXNumeric?E-M/2+me:E-Pe+M/2+me,ve>0&&a.config.plotOptions.bar.hideZeroBarsWhenGrouped&&($-=M*ve)),Ve&&($=$+L.height/2-le/2-2);var ht=a.globals.series[c][d]<0,P=A;switch(this.barCtx.isReversed&&(P=A+(ht?O:-O)),ne.position){case"center":Y=Ve?ht?P-O/2+Oe:P+O/2-Oe:ht?P-O/2+L.height/2+Oe:P+O/2+L.height/2-Oe;break;case"bottom":Y=Ve?ht?P-O+Oe:P+O-Oe:ht?P-O+L.height+le+Oe:P+O-L.height/2+le-Oe;break;case"top":Y=Ve?ht?P+Oe:P-Oe:ht?P-L.height/2-Oe:P+L.height+Oe}if(this.barCtx.lastActiveBarSerieIndex===m&&ae.enabled){var W=new tn(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:m,j:d}),U.fontSize);b=ht?P-W.height/2-Oe-ae.offsetY+18:P+W.height+Oe+ae.offsetY-18;var q=Pe;w=Te+(a.globals.isXNumeric?-M*a.globals.barGroups.length/2:a.globals.barGroups.length*M/2-(a.globals.barGroups.length-1)*M-q)+ae.offsetX}return a.config.chart.stacked||(Y<0?Y=0+le:Y+L.height/3>a.globals.gridHeight&&(Y=a.globals.gridHeight-le)),{bcx:E,bcy:A,dataLabelsX:$,dataLabelsY:Y,totalDataLabelsX:w,totalDataLabelsY:b,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(o){var a=this.w,c=o.x,d=o.i,m=o.j,b=o.realIndex,w=o.bcy,A=o.barHeight,E=o.barWidth,M=o.textRects,O=o.dataLabelsX,L=o.strokeWidth,$=o.dataLabelsConfig,Y=o.barDataLabelsConfig,U=o.barTotalDataLabelsConfig,ne=o.offX,ae=o.offY,le=a.globals.gridHeight/a.globals.dataPoints;E=Math.abs(E);var me,Oe,Te=w-(this.barCtx.isRangeBar?0:le)+A/2+M.height/2+ae-3,Ve="start",ve=a.globals.series[d][m]<0,Pe=c;switch(this.barCtx.isReversed&&(Pe=c+(ve?-E:E),Ve=ve?"start":"end"),Y.position){case"center":O=ve?Pe+E/2-ne:Math.max(M.width/2,Pe-E/2)+ne;break;case"bottom":O=ve?Pe+E-L-ne:Pe-E+L+ne;break;case"top":O=ve?Pe-L-ne:Pe-L+ne}if(this.barCtx.lastActiveBarSerieIndex===b&&U.enabled){var ht=new tn(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:b,j:m}),$.fontSize);ve?(me=Pe-L-ne-U.offsetX,Ve="end"):me=Pe+ne+U.offsetX+(this.barCtx.isReversed?-(E+L):L),Oe=Te-M.height/2+ht.height/2+U.offsetY+L}return a.config.chart.stacked||($.textAnchor==="start"?O-M.width<0?O=ve?M.width+L:L:O+M.width>a.globals.gridWidth&&(O=ve?a.globals.gridWidth-L:a.globals.gridWidth-M.width-L):$.textAnchor==="middle"?O-M.width/2<0?O=M.width/2+L:O+M.width/2>a.globals.gridWidth&&(O=a.globals.gridWidth-M.width/2-L):$.textAnchor==="end"&&(O<1?O=M.width+L:O+1>a.globals.gridWidth&&(O=a.globals.gridWidth-M.width-L))),{bcx:c,bcy:w,dataLabelsX:O,dataLabelsY:Te,totalDataLabelsX:me,totalDataLabelsY:Oe,totalDataLabelsAnchor:Ve}}},{key:"drawCalculatedDataLabels",value:function(o){var a=o.x,c=o.y,d=o.val,m=o.i,b=o.j,w=o.textRects,A=o.barHeight,E=o.barWidth,M=o.dataLabelsConfig,O=this.w,L="rotate(0)";O.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(L="rotate(-90, ".concat(a,", ").concat(c,")"));var $=new Nr(this.barCtx.ctx),Y=new tn(this.barCtx.ctx),U=M.formatter,ne=null,ae=O.globals.collapsedSeriesIndices.indexOf(m)>-1;if(M.enabled&&!ae){ne=Y.group({class:"apexcharts-data-labels",transform:L});var le="";d!==void 0&&(le=U(d,Tt(Tt({},O),{},{seriesIndex:m,dataPointIndex:b,w:O}))),!d&&O.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(le="");var me=O.globals.series[m][b]<0,Oe=O.config.plotOptions.bar.dataLabels.position;O.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(Oe==="top"&&(M.textAnchor=me?"end":"start"),Oe==="center"&&(M.textAnchor="middle"),Oe==="bottom"&&(M.textAnchor=me?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&E<Y.getTextRects(le,parseFloat(M.style.fontSize)).width&&(le=""),O.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?w.width/1.6>Math.abs(E)&&(le=""):w.height/1.6>Math.abs(A)&&(le=""));var Te=Tt({},M);this.barCtx.isHorizontal&&d<0&&(M.textAnchor==="start"?Te.textAnchor="end":M.textAnchor==="end"&&(Te.textAnchor="start")),$.plotDataLabelsText({x:a,y:c,text:le,i:m,j:b,parent:ne,dataLabelsConfig:Te,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return ne}},{key:"drawTotalDataLabels",value:function(o){var a=o.x,c=o.y,d=o.val,m=o.realIndex,b=o.textAnchor,w=o.barTotalDataLabelsConfig;this.w;var A,E=new tn(this.barCtx.ctx);return w.enabled&&a!==void 0&&c!==void 0&&this.barCtx.lastActiveBarSerieIndex===m&&(A=E.drawText({x:a,y:c,foreColor:w.style.color,text:d,textAnchor:b,fontFamily:w.style.fontFamily,fontSize:w.style.fontSize,fontWeight:w.style.fontWeight})),A}}]),C}(),Ju=function(){function C(o){gn(this,C),this.w=o.w,this.barCtx=o}return rn(C,[{key:"initVariables",value:function(o){var a=this.w;this.barCtx.series=o,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var c=0;c<o.length;c++)if(o[c].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=o[c].length),a.globals.isXNumeric)for(var d=0;d<o[c].length;d++)a.globals.seriesX[c][d]>a.globals.minX&&a.globals.seriesX[c][d]<a.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=a.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(a.globals.series),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],a.globals.comboCharts||this.checkZeroSeries({series:o})}},{key:"initialPositions",value:function(){var o,a,c,d,m,b,w,A,E=this.w,M=E.globals.dataPoints;this.barCtx.isRangeBar&&(M=E.globals.labels.length);var O=this.barCtx.seriesLen;if(E.config.plotOptions.bar.rangeBarGroupRows&&(O=1),this.barCtx.isHorizontal)m=(c=E.globals.gridHeight/M)/O,E.globals.isXNumeric&&(m=(c=E.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),m=m*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(m=parseInt(this.barCtx.barOptions.barHeight,10)),A=this.barCtx.baseLineInvertedY+E.globals.padHorizontal+(this.barCtx.isReversed?E.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(A=E.globals.gridWidth/2),a=(c-m*this.barCtx.seriesLen)/2;else{if(d=E.globals.gridWidth/this.barCtx.visibleItems,E.config.xaxis.convertedCatToNumeric&&(d=E.globals.gridWidth/E.globals.dataPoints),b=d/O*parseInt(this.barCtx.barOptions.columnWidth,10)/100,E.globals.isXNumeric){var L=this.barCtx.xRatio;E.globals.minXDiff&&E.globals.minXDiff!==.5&&E.globals.minXDiff/L>0&&(d=E.globals.minXDiff/L),(b=d/O*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(b=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(b=parseInt(this.barCtx.barOptions.columnWidth,10)),w=E.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?E.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),o=E.globals.padHorizontal+(d-b*this.barCtx.seriesLen)/2}return E.globals.barHeight=m,E.globals.barWidth=b,{x:o,y:a,yDivision:c,xDivision:d,barHeight:m,barWidth:b,zeroH:w,zeroW:A}}},{key:"initializeStackedPrevVars",value:function(o){o.w.globals.seriesGroups.forEach(function(a){o[a]||(o[a]={}),o[a].prevY=[],o[a].prevX=[],o[a].prevYF=[],o[a].prevXF=[],o[a].prevYVal=[],o[a].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(o){o.w.globals.seriesGroups.forEach(function(a){o[a]||(o[a]={}),o[a].xArrj=[],o[a].xArrjF=[],o[a].xArrjVal=[],o[a].yArrj=[],o[a].yArrjF=[],o[a].yArrjVal=[]})}},{key:"getPathFillColor",value:function(o,a,c,d){var m,b,w,A,E=this.w,M=this.barCtx.ctx.fill,O=null,L=this.barCtx.barOptions.distributed?c:a;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function($){o[a][c]>=$.from&&o[a][c]<=$.to&&(O=$.color)}),M.fillPath({seriesNumber:this.barCtx.barOptions.distributed?L:d,dataPointIndex:c,color:O,value:o[a][c],fillConfig:(m=E.config.series[a].data[c])===null||m===void 0?void 0:m.fill,fillType:(b=E.config.series[a].data[c])!==null&&b!==void 0&&(w=b.fill)!==null&&w!==void 0&&w.type?(A=E.config.series[a].data[c])===null||A===void 0?void 0:A.fill.type:Array.isArray(E.config.fill.type)?E.config.fill.type[d]:E.config.fill.type})}},{key:"getStrokeWidth",value:function(o,a,c){var d=0,m=this.w;return this.barCtx.series[o][a]?this.barCtx.isNullValue=!1:this.barCtx.isNullValue=!0,m.config.stroke.show&&(this.barCtx.isNullValue||(d=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[c]:this.barCtx.strokeWidth)),d}},{key:"createBorderRadiusArr",value:function(o){var a,c=this.w,d=!this.w.config.chart.stacked||c.config.plotOptions.bar.borderRadius<=0,m=o.length,b=0|((a=o[0])===null||a===void 0?void 0:a.length),w=Array.from({length:m},function(){return Array(b).fill(d?"top":"none")});if(d)return w;for(var A=0;A<b;A++){for(var E=[],M=[],O=0,L=0;L<m;L++){var $=o[L][A];$>0?(E.push(L),O++):$<0&&(M.push(L),O++)}if(E.length>0&&M.length===0)if(E.length===1)w[E[0]][A]="both";else{var Y,U=E[0],ne=E[E.length-1],ae=gs(E);try{for(ae.s();!(Y=ae.n()).done;){var le=Y.value;w[le][A]=le===U?"bottom":le===ne?"top":"none"}}catch(Ft){ae.e(Ft)}finally{ae.f()}}else if(M.length>0&&E.length===0)if(M.length===1)w[M[0]][A]="both";else{var me,Oe=Math.max.apply(Math,M),Te=Math.min.apply(Math,M),Ve=gs(M);try{for(Ve.s();!(me=Ve.n()).done;){var ve=me.value;w[ve][A]=ve===Oe?"bottom":ve===Te?"top":"none"}}catch(Ft){Ve.e(Ft)}finally{Ve.f()}}else if(E.length>0&&M.length>0){var Pe,ht=E[E.length-1],P=gs(E);try{for(P.s();!(Pe=P.n()).done;){var W=Pe.value;w[W][A]=W===ht?"top":"none"}}catch(Ft){P.e(Ft)}finally{P.f()}var q,ue=Math.max.apply(Math,M),ye=gs(M);try{for(ye.s();!(q=ye.n()).done;){var nt=q.value;w[nt][A]=nt===ue?"bottom":"none"}}catch(Ft){ye.e(Ft)}finally{ye.f()}}else O===1&&(w[E[0]||M[0]][A]="both")}return w}},{key:"barBackground",value:function(o){var a=o.j,c=o.i,d=o.x1,m=o.x2,b=o.y1,w=o.y2,A=o.elSeries,E=this.w,M=new tn(this.barCtx.ctx),O=new er(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&O===c){a>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(a%=this.barCtx.barOptions.colors.backgroundBarColors.length);var L=this.barCtx.barOptions.colors.backgroundBarColors[a],$=M.drawRect(d!==void 0?d:0,b!==void 0?b:0,m!==void 0?m:E.globals.gridWidth,w!==void 0?w:E.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,L,this.barCtx.barOptions.colors.backgroundBarOpacity);A.add($),$.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(o){var a,c=o.barWidth,d=o.barXPosition,m=o.y1,b=o.y2,w=o.strokeWidth,A=o.isReversed,E=o.series,M=o.seriesGroup,O=o.realIndex,L=o.i,$=o.j,Y=o.w,U=new tn(this.barCtx.ctx);(w=Array.isArray(w)?w[O]:w)||(w=0);var ne=c,ae=d;(a=Y.config.series[O].data[$])!==null&&a!==void 0&&a.columnWidthOffset&&(ae=d-Y.config.series[O].data[$].columnWidthOffset/2,ne=c+Y.config.series[O].data[$].columnWidthOffset);var le=w/2,me=ae+le,Oe=ae+ne-le,Te=(E[L][$]>=0?1:-1)*(A?-1:1);m+=.001-le*Te,b+=.001+le*Te;var Ve=U.move(me,m),ve=U.move(me,m),Pe=U.line(Oe,m);if(Y.globals.previousPaths.length>0&&(ve=this.barCtx.getPreviousPath(O,$,!1)),Ve=Ve+U.line(me,b)+U.line(Oe,b)+Pe+(Y.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[O][$]==="both"?" Z":" z"),ve=ve+U.line(me,m)+Pe+Pe+Pe+Pe+Pe+U.line(me,m)+(Y.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[O][$]==="both"?" Z":" z"),this.arrBorderRadius[O][$]!=="none"&&(Ve=U.roundPathCorners(Ve,Y.config.plotOptions.bar.borderRadius)),Y.config.chart.stacked){var ht=this.barCtx;(ht=this.barCtx[M]).yArrj.push(b-le*Te),ht.yArrjF.push(Math.abs(m-b+w*Te)),ht.yArrjVal.push(this.barCtx.series[L][$])}return{pathTo:Ve,pathFrom:ve}}},{key:"getBarpaths",value:function(o){var a,c=o.barYPosition,d=o.barHeight,m=o.x1,b=o.x2,w=o.strokeWidth,A=o.isReversed,E=o.series,M=o.seriesGroup,O=o.realIndex,L=o.i,$=o.j,Y=o.w,U=new tn(this.barCtx.ctx);(w=Array.isArray(w)?w[O]:w)||(w=0);var ne=c,ae=d;(a=Y.config.series[O].data[$])!==null&&a!==void 0&&a.barHeightOffset&&(ne=c-Y.config.series[O].data[$].barHeightOffset/2,ae=d+Y.config.series[O].data[$].barHeightOffset);var le=w/2,me=ne+le,Oe=ne+ae-le,Te=(E[L][$]>=0?1:-1)*(A?-1:1);m+=.001+le*Te,b+=.001-le*Te;var Ve=U.move(m,me),ve=U.move(m,me);Y.globals.previousPaths.length>0&&(ve=this.barCtx.getPreviousPath(O,$,!1));var Pe=U.line(m,Oe);if(Ve=Ve+U.line(b,me)+U.line(b,Oe)+Pe+(Y.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[O][$]==="both"?" Z":" z"),ve=ve+U.line(m,me)+Pe+Pe+Pe+Pe+Pe+U.line(m,me)+(Y.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[O][$]==="both"?" Z":" z"),this.arrBorderRadius[O][$]!=="none"&&(Ve=U.roundPathCorners(Ve,Y.config.plotOptions.bar.borderRadius)),Y.config.chart.stacked){var ht=this.barCtx;(ht=this.barCtx[M]).xArrj.push(b+le*Te),ht.xArrjF.push(Math.abs(m-b-w*Te)),ht.xArrjVal.push(this.barCtx.series[L][$])}return{pathTo:Ve,pathFrom:ve}}},{key:"checkZeroSeries",value:function(o){for(var a=o.series,c=this.w,d=0;d<a.length;d++){for(var m=0,b=0;b<a[c.globals.maxValsInArrayIndex].length;b++)m+=a[d][b];m===0&&this.barCtx.zeroSerieses.push(d)}}},{key:"getXForValue",value:function(o,a){var c=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?a:null;return o!=null&&(c=a+o/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?o/this.barCtx.invertedYRatio:0)),c}},{key:"getYForValue",value:function(o,a,c){var d=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?a:null;return o!=null&&(d=a-o/this.barCtx.yRatio[c]+2*(this.barCtx.isReversed?o/this.barCtx.yRatio[c]:0)),d}},{key:"getGoalValues",value:function(o,a,c,d,m,b){var w=this,A=this.w,E=[],M=function($,Y){var U;E.push((Ot(U={},o,o==="x"?w.getXForValue($,a,!1):w.getYForValue($,c,b,!1)),Ot(U,"attrs",Y),U))};if(A.globals.seriesGoals[d]&&A.globals.seriesGoals[d][m]&&Array.isArray(A.globals.seriesGoals[d][m])&&A.globals.seriesGoals[d][m].forEach(function($){M($.value,$)}),this.barCtx.barOptions.isDumbbell&&A.globals.seriesRange.length){var O=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:A.globals.colors,L={strokeHeight:o==="x"?0:A.globals.markers.size[d],strokeWidth:o==="x"?A.globals.markers.size[d]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(O[d])?O[d][0]:O[d]};M(A.globals.seriesRangeStart[d][m],L),M(A.globals.seriesRangeEnd[d][m],Tt(Tt({},L),{},{strokeColor:Array.isArray(O[d])?O[d][1]:O[d]}))}return E}},{key:"drawGoalLine",value:function(o){var a=o.barXPosition,c=o.barYPosition,d=o.goalX,m=o.goalY,b=o.barWidth,w=o.barHeight,A=new tn(this.barCtx.ctx),E=A.group({className:"apexcharts-bar-goals-groups"});E.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:E.node}),E.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var M=null;return this.barCtx.isHorizontal?Array.isArray(d)&&d.forEach(function(O){if(O.x>=-1&&O.x<=A.w.globals.gridWidth+1){var L=O.attrs.strokeHeight!==void 0?O.attrs.strokeHeight:w/2,$=c+L+w/2;M=A.drawLine(O.x,$-2*L,O.x,$,O.attrs.strokeColor?O.attrs.strokeColor:void 0,O.attrs.strokeDashArray,O.attrs.strokeWidth?O.attrs.strokeWidth:2,O.attrs.strokeLineCap),E.add(M)}}):Array.isArray(m)&&m.forEach(function(O){if(O.y>=-1&&O.y<=A.w.globals.gridHeight+1){var L=O.attrs.strokeWidth!==void 0?O.attrs.strokeWidth:b/2,$=a+L+b/2;M=A.drawLine($-2*L,O.y,$,O.y,O.attrs.strokeColor?O.attrs.strokeColor:void 0,O.attrs.strokeDashArray,O.attrs.strokeHeight?O.attrs.strokeHeight:2,O.attrs.strokeLineCap),E.add(M)}}),E}},{key:"drawBarShadow",value:function(o){var a=o.prevPaths,c=o.currPaths,d=o.color,m=this.w,b=a.x,w=a.x1,A=a.barYPosition,E=c.x,M=c.x1,O=c.barYPosition,L=A+c.barHeight,$=new tn(this.barCtx.ctx),Y=new oe,U=$.move(w,L)+$.line(b,L)+$.line(E,O)+$.line(M,O)+$.line(w,L)+(m.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return $.drawPath({d:U,fill:Y.shadeColor(.5,oe.rgb2hex(d)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(o){var a,c=o.i,d=o.j,m=this.w,b=0,w=0;return(m.config.plotOptions.bar.horizontal?m.globals.series.map(function(A,E){return E}):((a=m.globals.columnSeries)===null||a===void 0?void 0:a.i.map(function(A){return A}))||[]).forEach(function(A){var E=m.globals.seriesPercent[A][d];E&&b++,A<c&&E===0&&w++}),{nonZeroColumns:b,zeroEncounters:w}}},{key:"getGroupIndex",value:function(o){var a=this.w,c=a.globals.seriesGroups.findIndex(function(b){return b.indexOf(a.globals.seriesNames[o])>-1}),d=this.barCtx.columnGroupIndices,m=d.indexOf(c);return m<0&&(d.push(c),m=d.length-1),{groupIndex:c,columnGroupIndex:m}}}]),C}(),Za=function(){function C(o,a){gn(this,C),this.ctx=o,this.w=o.w;var c=this.w;this.barOptions=c.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=c.config.stroke.width,this.isNullValue=!1,this.isRangeBar=c.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!c.globals.isBarHorizontal&&c.globals.seriesRange.length&&c.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=a,this.xyRatios!==null&&(this.xRatio=a.xRatio,this.yRatio=a.yRatio,this.invertedXRatio=a.invertedXRatio,this.invertedYRatio=a.invertedYRatio,this.baseLineY=a.baseLineY,this.baseLineInvertedY=a.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var d=new er(this.ctx);this.lastActiveBarSerieIndex=d.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var m=d.getBarSeriesIndices(),b=new bs(this.ctx);this.stackedSeriesTotals=b.getStackedSeriesTotals(this.w.config.series.map(function(w,A){return m.indexOf(A)===-1?A:-1}).filter(function(w){return w!==-1})),this.barHelpers=new Ju(this)}return rn(C,[{key:"draw",value:function(o,a){var c=this.w,d=new tn(this.ctx),m=new bs(this.ctx,c);o=m.getLogSeries(o),this.series=o,this.yRatio=m.getLogYRatios(this.yRatio),this.barHelpers.initVariables(o);var b=d.group({class:"apexcharts-bar-series apexcharts-plot-series"});c.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var w=0,A=0;w<o.length;w++,A++){var E,M,O,L,$=void 0,Y=void 0,U=[],ne=[],ae=c.globals.comboCharts?a[w]:w,le=this.barHelpers.getGroupIndex(ae).columnGroupIndex,me=d.group({class:"apexcharts-series",rel:w+1,seriesName:oe.escapeString(c.globals.seriesNames[ae]),"data:realIndex":ae});this.ctx.series.addCollapsedClassToSeries(me,ae),o[w].length>0&&(this.visibleI=this.visibleI+1);var Oe=0,Te=0;this.yRatio.length>1&&(this.yaxisIndex=c.globals.seriesYAxisReverseMap[ae],this.translationsIndex=ae);var Ve=this.translationsIndex;this.isReversed=c.config.yaxis[this.yaxisIndex]&&c.config.yaxis[this.yaxisIndex].reversed;var ve=this.barHelpers.initialPositions();Y=ve.y,Oe=ve.barHeight,M=ve.yDivision,L=ve.zeroW,$=ve.x,Te=ve.barWidth,E=ve.xDivision,O=ve.zeroH,this.isHorizontal||ne.push($+Te/2);var Pe=d.group({class:"apexcharts-datalabels","data:realIndex":ae});c.globals.delayedElements.push({el:Pe.node}),Pe.node.classList.add("apexcharts-element-hidden");var ht=d.group({class:"apexcharts-bar-goals-markers"}),P=d.group({class:"apexcharts-bar-shadows"});c.globals.delayedElements.push({el:P.node}),P.node.classList.add("apexcharts-element-hidden");for(var W=0;W<o[w].length;W++){var q=this.barHelpers.getStrokeWidth(w,W,ae),ue=null,ye={indexes:{i:w,j:W,realIndex:ae,translationsIndex:Ve,bc:A},x:$,y:Y,strokeWidth:q,elSeries:me};this.isHorizontal?(ue=this.drawBarPaths(Tt(Tt({},ye),{},{barHeight:Oe,zeroW:L,yDivision:M})),Te=this.series[w][W]/this.invertedYRatio):(ue=this.drawColumnPaths(Tt(Tt({},ye),{},{xDivision:E,barWidth:Te,zeroH:O})),Oe=this.series[w][W]/this.yRatio[Ve]);var nt=this.barHelpers.getPathFillColor(o,w,W,ae);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&W>0){var Ft=this.barHelpers.drawBarShadow({color:typeof nt=="string"&&(nt==null?void 0:nt.indexOf("url"))===-1?nt:oe.hexToRgba(c.globals.colors[w]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:ue});P.add(Ft),c.config.chart.dropShadow.enabled&&new Ya(this.ctx).dropShadow(Ft,c.config.chart.dropShadow,ae)}this.pathArr.push(ue);var an=this.barHelpers.drawGoalLine({barXPosition:ue.barXPosition,barYPosition:ue.barYPosition,goalX:ue.goalX,goalY:ue.goalY,barHeight:Oe,barWidth:Te});an&&ht.add(an),Y=ue.y,$=ue.x,W>0&&ne.push($+Te/2),U.push(Y),this.renderSeries({realIndex:ae,pathFill:nt,j:W,i:w,columnGroupIndex:le,pathFrom:ue.pathFrom,pathTo:ue.pathTo,strokeWidth:q,elSeries:me,x:$,y:Y,series:o,barHeight:Math.abs(ue.barHeight?ue.barHeight:Oe),barWidth:Math.abs(ue.barWidth?ue.barWidth:Te),elDataLabelsWrap:Pe,elGoalsMarkers:ht,elBarShadows:P,visibleSeries:this.visibleI,type:"bar"})}c.globals.seriesXvalues[ae]=ne,c.globals.seriesYvalues[ae]=U,b.add(me)}return b}},{key:"renderSeries",value:function(o){var a=o.realIndex,c=o.pathFill,d=o.lineFill,m=o.j,b=o.i,w=o.columnGroupIndex,A=o.pathFrom,E=o.pathTo,M=o.strokeWidth,O=o.elSeries,L=o.x,$=o.y,Y=o.y1,U=o.y2,ne=o.series,ae=o.barHeight,le=o.barWidth,me=o.barXPosition,Oe=o.barYPosition,Te=o.elDataLabelsWrap,Ve=o.elGoalsMarkers,ve=o.elBarShadows,Pe=o.visibleSeries,ht=o.type,P=o.classes,W=this.w,q=new tn(this.ctx);if(!d){var ue=typeof W.globals.stroke.colors[a]=="function"?function(hn){var Jt,wo=W.config.stroke.colors;return Array.isArray(wo)&&wo.length>0&&((Jt=wo[hn])||(Jt=""),typeof Jt=="function")?Jt({value:W.globals.series[hn][m],dataPointIndex:m,w:W}):Jt}(a):W.globals.stroke.colors[a];d=this.barOptions.distributed?W.globals.stroke.colors[m]:ue}W.config.series[b].data[m]&&W.config.series[b].data[m].strokeColor&&(d=W.config.series[b].data[m].strokeColor),this.isNullValue&&(c="none");var ye=m/W.config.chart.animations.animateGradually.delay*(W.config.chart.animations.speed/W.globals.dataPoints)/2.4,nt=q.renderPaths({i:b,j:m,realIndex:a,pathFrom:A,pathTo:E,stroke:d,strokeWidth:M,strokeLineCap:W.config.stroke.lineCap,fill:c,animationDelay:ye,initialSpeed:W.config.chart.animations.speed,dataChangeSpeed:W.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(ht,"-area ").concat(P),chartType:ht});nt.attr("clip-path","url(#gridRectBarMask".concat(W.globals.cuid,")"));var Ft=W.config.forecastDataPoints;Ft.count>0&&m>=W.globals.dataPoints-Ft.count&&(nt.node.setAttribute("stroke-dasharray",Ft.dashArray),nt.node.setAttribute("stroke-width",Ft.strokeWidth),nt.node.setAttribute("fill-opacity",Ft.fillOpacity)),Y!==void 0&&U!==void 0&&(nt.attr("data-range-y1",Y),nt.attr("data-range-y2",U)),new Ya(this.ctx).setSelectionFilter(nt,a,m),O.add(nt);var an=new vh(this).handleBarDataLabels({x:L,y:$,y1:Y,y2:U,i:b,j:m,series:ne,realIndex:a,columnGroupIndex:w,barHeight:ae,barWidth:le,barXPosition:me,barYPosition:Oe,renderedPath:nt,visibleSeries:Pe});return an.dataLabels!==null&&Te.add(an.dataLabels),an.totalDataLabels&&Te.add(an.totalDataLabels),O.add(Te),Ve&&O.add(Ve),ve&&O.add(ve),O}},{key:"drawBarPaths",value:function(o){var a,c=o.indexes,d=o.barHeight,m=o.strokeWidth,b=o.zeroW,w=o.x,A=o.y,E=o.yDivision,M=o.elSeries,O=this.w,L=c.i,$=c.j;if(O.globals.isXNumeric)a=(A=(O.globals.seriesX[L][$]-O.globals.minX)/this.invertedXRatio-d)+d*this.visibleI;else if(O.config.plotOptions.bar.hideZeroBarsWhenGrouped){var Y=0,U=0;O.globals.seriesPercent.forEach(function(ae,le){ae[$]&&Y++,le<L&&ae[$]===0&&U++}),Y>0&&(d=this.seriesLen*d/Y),a=A+d*this.visibleI,a-=d*U}else a=A+d*this.visibleI;this.isFunnel&&(b-=(this.barHelpers.getXForValue(this.series[L][$],b)-b)/2),w=this.barHelpers.getXForValue(this.series[L][$],b);var ne=this.barHelpers.getBarpaths({barYPosition:a,barHeight:d,x1:b,x2:w,strokeWidth:m,isReversed:this.isReversed,series:this.series,realIndex:c.realIndex,i:L,j:$,w:O});return O.globals.isXNumeric||(A+=E),this.barHelpers.barBackground({j:$,i:L,y1:a-d*this.visibleI,y2:d*this.seriesLen,elSeries:M}),{pathTo:ne.pathTo,pathFrom:ne.pathFrom,x1:b,x:w,y:A,goalX:this.barHelpers.getGoalValues("x",b,null,L,$),barYPosition:a,barHeight:d}}},{key:"drawColumnPaths",value:function(o){var a,c=o.indexes,d=o.x,m=o.y,b=o.xDivision,w=o.barWidth,A=o.zeroH,E=o.strokeWidth,M=o.elSeries,O=this.w,L=c.realIndex,$=c.translationsIndex,Y=c.i,U=c.j,ne=c.bc;if(O.globals.isXNumeric){var ae=this.getBarXForNumericXAxis({x:d,j:U,realIndex:L,barWidth:w});d=ae.x,a=ae.barXPosition}else if(O.config.plotOptions.bar.hideZeroBarsWhenGrouped){var le=this.barHelpers.getZeroValueEncounters({i:Y,j:U}),me=le.nonZeroColumns,Oe=le.zeroEncounters;me>0&&(w=this.seriesLen*w/me),a=d+w*this.visibleI,a-=w*Oe}else a=d+w*this.visibleI;m=this.barHelpers.getYForValue(this.series[Y][U],A,$);var Te=this.barHelpers.getColumnPaths({barXPosition:a,barWidth:w,y1:A,y2:m,strokeWidth:E,isReversed:this.isReversed,series:this.series,realIndex:L,i:Y,j:U,w:O});return O.globals.isXNumeric||(d+=b),this.barHelpers.barBackground({bc:ne,j:U,i:Y,x1:a-E/2-w*this.visibleI,x2:w*this.seriesLen+E/2,elSeries:M}),{pathTo:Te.pathTo,pathFrom:Te.pathFrom,x:d,y:m,goalY:this.barHelpers.getGoalValues("y",null,A,Y,U,$),barXPosition:a,barWidth:w}}},{key:"getBarXForNumericXAxis",value:function(o){var a=o.x,c=o.barWidth,d=o.realIndex,m=o.j,b=this.w,w=d;return b.globals.seriesX[d].length||(w=b.globals.maxValsInArrayIndex),oe.isNumber(b.globals.seriesX[w][m])&&(a=(b.globals.seriesX[w][m]-b.globals.minX)/this.xRatio-c*this.seriesLen/2),{barXPosition:a+c*this.visibleI,x:a}}},{key:"getPreviousPath",value:function(o,a){for(var c,d=this.w,m=0;m<d.globals.previousPaths.length;m++){var b=d.globals.previousPaths[m];b.paths&&b.paths.length>0&&parseInt(b.realIndex,10)===parseInt(o,10)&&d.globals.previousPaths[m].paths[a]!==void 0&&(c=d.globals.previousPaths[m].paths[a].d)}return c}}]),C}(),Qu=function(C){ns(a,Za);var o=Fo(a);function a(){return gn(this,a),o.apply(this,arguments)}return rn(a,[{key:"draw",value:function(c,d){var m=this,b=this.w;this.graphics=new tn(this.ctx),this.bar=new Za(this.ctx,this.xyRatios);var w=new bs(this.ctx,b);c=w.getLogSeries(c),this.yRatio=w.getLogYRatios(this.yRatio),this.barHelpers.initVariables(c),b.config.chart.stackType==="100%"&&(c=b.globals.comboCharts?d.map(function(Y){return b.globals.seriesPercent[Y]}):b.globals.seriesPercent.slice()),this.series=c,this.barHelpers.initializeStackedPrevVars(this);for(var A=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),E=0,M=0,O=function(Y,U){var ne=void 0,ae=void 0,le=void 0,me=void 0,Oe=b.globals.comboCharts?d[Y]:Y,Te=m.barHelpers.getGroupIndex(Oe),Ve=Te.groupIndex,ve=Te.columnGroupIndex;m.groupCtx=m[b.globals.seriesGroups[Ve]];var Pe=[],ht=[],P=0;m.yRatio.length>1&&(m.yaxisIndex=b.globals.seriesYAxisReverseMap[Oe][0],P=Oe),m.isReversed=b.config.yaxis[m.yaxisIndex]&&b.config.yaxis[m.yaxisIndex].reversed;var W=m.graphics.group({class:"apexcharts-series",seriesName:oe.escapeString(b.globals.seriesNames[Oe]),rel:Y+1,"data:realIndex":Oe});m.ctx.series.addCollapsedClassToSeries(W,Oe);var q=m.graphics.group({class:"apexcharts-datalabels","data:realIndex":Oe}),ue=m.graphics.group({class:"apexcharts-bar-goals-markers"}),ye=0,nt=0,Ft=m.initialPositions(E,M,ne,ae,le,me,P);M=Ft.y,ye=Ft.barHeight,ae=Ft.yDivision,me=Ft.zeroW,E=Ft.x,nt=Ft.barWidth,ne=Ft.xDivision,le=Ft.zeroH,b.globals.barHeight=ye,b.globals.barWidth=nt,m.barHelpers.initializeStackedXYVars(m),m.groupCtx.prevY.length===1&&m.groupCtx.prevY[0].every(function(Ii){return isNaN(Ii)})&&(m.groupCtx.prevY[0]=m.groupCtx.prevY[0].map(function(){return le}),m.groupCtx.prevYF[0]=m.groupCtx.prevYF[0].map(function(){return 0}));for(var an=0;an<b.globals.dataPoints;an++){var hn=m.barHelpers.getStrokeWidth(Y,an,Oe),Jt={indexes:{i:Y,j:an,realIndex:Oe,translationsIndex:P,bc:U},strokeWidth:hn,x:E,y:M,elSeries:W,columnGroupIndex:ve,seriesGroup:b.globals.seriesGroups[Ve]},wo=null;m.isHorizontal?(wo=m.drawStackedBarPaths(Tt(Tt({},Jt),{},{zeroW:me,barHeight:ye,yDivision:ae})),nt=m.series[Y][an]/m.invertedYRatio):(wo=m.drawStackedColumnPaths(Tt(Tt({},Jt),{},{xDivision:ne,barWidth:nt,zeroH:le})),ye=m.series[Y][an]/m.yRatio[P]);var Ro=m.barHelpers.drawGoalLine({barXPosition:wo.barXPosition,barYPosition:wo.barYPosition,goalX:wo.goalX,goalY:wo.goalY,barHeight:ye,barWidth:nt});Ro&&ue.add(Ro),M=wo.y,E=wo.x,Pe.push(E),ht.push(M);var sr=m.barHelpers.getPathFillColor(c,Y,an,Oe),qr="",$r=b.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";(m.barHelpers.arrBorderRadius[Oe][an]==="bottom"&&b.globals.series[Oe][an]>0||m.barHelpers.arrBorderRadius[Oe][an]==="top"&&b.globals.series[Oe][an]<0)&&(qr=$r),W=m.renderSeries({realIndex:Oe,pathFill:sr,j:an,i:Y,columnGroupIndex:ve,pathFrom:wo.pathFrom,pathTo:wo.pathTo,strokeWidth:hn,elSeries:W,x:E,y:M,series:c,barHeight:ye,barWidth:nt,elDataLabelsWrap:q,elGoalsMarkers:ue,type:"bar",visibleSeries:ve,classes:qr})}b.globals.seriesXvalues[Oe]=Pe,b.globals.seriesYvalues[Oe]=ht,m.groupCtx.prevY.push(m.groupCtx.yArrj),m.groupCtx.prevYF.push(m.groupCtx.yArrjF),m.groupCtx.prevYVal.push(m.groupCtx.yArrjVal),m.groupCtx.prevX.push(m.groupCtx.xArrj),m.groupCtx.prevXF.push(m.groupCtx.xArrjF),m.groupCtx.prevXVal.push(m.groupCtx.xArrjVal),A.add(W)},L=0,$=0;L<c.length;L++,$++)O(L,$);return A}},{key:"initialPositions",value:function(c,d,m,b,w,A,E){var M,O,L=this.w;if(this.isHorizontal){b=L.globals.gridHeight/L.globals.dataPoints;var $=L.config.plotOptions.bar.barHeight;M=String($).indexOf("%")===-1?parseInt($,10):b*parseInt($,10)/100,A=L.globals.padHorizontal+(this.isReversed?L.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),d=(b-M)/2}else{O=m=L.globals.gridWidth/L.globals.dataPoints;var Y=L.config.plotOptions.bar.columnWidth;L.globals.isXNumeric&&L.globals.dataPoints>1?O=(m=L.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(Y).indexOf("%")===-1?O=parseInt(Y,10):O*=parseInt(Y,10)/100,w=this.isReversed?this.baseLineY[E]:L.globals.gridHeight-this.baseLineY[E],c=L.globals.padHorizontal+(m-O)/2}var U=L.globals.barGroups.length||1;return{x:c,y:d,yDivision:b,xDivision:m,barHeight:M/U,barWidth:O/U,zeroH:w,zeroW:A}}},{key:"drawStackedBarPaths",value:function(c){for(var d,m=c.indexes,b=c.barHeight,w=c.strokeWidth,A=c.zeroW,E=c.x,M=c.y,O=c.columnGroupIndex,L=c.seriesGroup,$=c.yDivision,Y=c.elSeries,U=this.w,ne=M+O*b,ae=m.i,le=m.j,me=m.realIndex,Oe=m.translationsIndex,Te=0,Ve=0;Ve<this.groupCtx.prevXF.length;Ve++)Te+=this.groupCtx.prevXF[Ve][le];var ve;if((ve=L.indexOf(U.config.series[me].name))>0){var Pe=A;this.groupCtx.prevXVal[ve-1][le]<0?Pe=this.series[ae][le]>=0?this.groupCtx.prevX[ve-1][le]+Te-2*(this.isReversed?Te:0):this.groupCtx.prevX[ve-1][le]:this.groupCtx.prevXVal[ve-1][le]>=0&&(Pe=this.series[ae][le]>=0?this.groupCtx.prevX[ve-1][le]:this.groupCtx.prevX[ve-1][le]-Te+2*(this.isReversed?Te:0)),d=Pe}else d=A;E=this.series[ae][le]===null?d:d+this.series[ae][le]/this.invertedYRatio-2*(this.isReversed?this.series[ae][le]/this.invertedYRatio:0);var ht=this.barHelpers.getBarpaths({barYPosition:ne,barHeight:b,x1:d,x2:E,strokeWidth:w,isReversed:this.isReversed,series:this.series,realIndex:m.realIndex,seriesGroup:L,i:ae,j:le,w:U});return this.barHelpers.barBackground({j:le,i:ae,y1:ne,y2:b,elSeries:Y}),M+=$,{pathTo:ht.pathTo,pathFrom:ht.pathFrom,goalX:this.barHelpers.getGoalValues("x",A,null,ae,le,Oe),barXPosition:d,barYPosition:ne,x:E,y:M}}},{key:"drawStackedColumnPaths",value:function(c){var d=c.indexes,m=c.x,b=c.y,w=c.xDivision,A=c.barWidth,E=c.zeroH,M=c.columnGroupIndex,O=c.seriesGroup,L=c.elSeries,$=this.w,Y=d.i,U=d.j,ne=d.bc,ae=d.realIndex,le=d.translationsIndex;if($.globals.isXNumeric){var me=$.globals.seriesX[ae][U];me||(me=0),m=(me-$.globals.minX)/this.xRatio-A/2*$.globals.barGroups.length}for(var Oe,Te=m+M*A,Ve=0,ve=0;ve<this.groupCtx.prevYF.length;ve++)Ve+=isNaN(this.groupCtx.prevYF[ve][U])?0:this.groupCtx.prevYF[ve][U];var Pe=Y;if(O&&(Pe=O.indexOf($.globals.seriesNames[ae])),Pe>0&&!$.globals.isXNumeric||Pe>0&&$.globals.isXNumeric&&$.globals.seriesX[ae-1][U]===$.globals.seriesX[ae][U]){var ht,P,W,q=Math.min(this.yRatio.length+1,ae+1);if(this.groupCtx.prevY[Pe-1]!==void 0&&this.groupCtx.prevY[Pe-1].length)for(var ue=1;ue<q;ue++){var ye;if(!isNaN((ye=this.groupCtx.prevY[Pe-ue])===null||ye===void 0?void 0:ye[U])){W=this.groupCtx.prevY[Pe-ue][U];break}}for(var nt=1;nt<q;nt++){var Ft,an;if(((Ft=this.groupCtx.prevYVal[Pe-nt])===null||Ft===void 0?void 0:Ft[U])<0){P=this.series[Y][U]>=0?W-Ve+2*(this.isReversed?Ve:0):W;break}if(((an=this.groupCtx.prevYVal[Pe-nt])===null||an===void 0?void 0:an[U])>=0){P=this.series[Y][U]>=0?W:W+Ve-2*(this.isReversed?Ve:0);break}}P===void 0&&(P=$.globals.gridHeight),Oe=(ht=this.groupCtx.prevYF[0])!==null&&ht!==void 0&&ht.every(function(Jt){return Jt===0})&&this.groupCtx.prevYF.slice(1,Pe).every(function(Jt){return Jt.every(function(wo){return isNaN(wo)})})?E:P}else Oe=E;b=this.series[Y][U]?Oe-this.series[Y][U]/this.yRatio[le]+2*(this.isReversed?this.series[Y][U]/this.yRatio[le]:0):Oe;var hn=this.barHelpers.getColumnPaths({barXPosition:Te,barWidth:A,y1:Oe,y2:b,yRatio:this.yRatio[le],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:O,realIndex:d.realIndex,i:Y,j:U,w:$});return this.barHelpers.barBackground({bc:ne,j:U,i:Y,x1:Te,x2:A,elSeries:L}),{pathTo:hn.pathTo,pathFrom:hn.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,E,Y,U),barXPosition:Te,x:$.globals.isXNumeric?m:m+w,y:b}}}]),a}(),mc=function(C){ns(a,Za);var o=Fo(a);function a(){return gn(this,a),o.apply(this,arguments)}return rn(a,[{key:"draw",value:function(c,d,m){var b=this,w=this.w,A=new tn(this.ctx),E=w.globals.comboCharts?d:w.config.chart.type,M=new Mr(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=w.config.plotOptions.bar.horizontal;var O=new bs(this.ctx,w);c=O.getLogSeries(c),this.series=c,this.yRatio=O.getLogYRatios(this.yRatio),this.barHelpers.initVariables(c);for(var L=A.group({class:"apexcharts-".concat(E,"-series apexcharts-plot-series")}),$=function(U){b.isBoxPlot=w.config.chart.type==="boxPlot"||w.config.series[U].type==="boxPlot";var ne,ae,le,me,Oe=void 0,Te=void 0,Ve=[],ve=[],Pe=w.globals.comboCharts?m[U]:U,ht=b.barHelpers.getGroupIndex(Pe).columnGroupIndex,P=A.group({class:"apexcharts-series",seriesName:oe.escapeString(w.globals.seriesNames[Pe]),rel:U+1,"data:realIndex":Pe});b.ctx.series.addCollapsedClassToSeries(P,Pe),c[U].length>0&&(b.visibleI=b.visibleI+1);var W,q,ue=0;b.yRatio.length>1&&(b.yaxisIndex=w.globals.seriesYAxisReverseMap[Pe][0],ue=Pe);var ye=b.barHelpers.initialPositions();Te=ye.y,W=ye.barHeight,ae=ye.yDivision,me=ye.zeroW,Oe=ye.x,q=ye.barWidth,ne=ye.xDivision,le=ye.zeroH,ve.push(Oe+q/2);for(var nt=A.group({class:"apexcharts-datalabels","data:realIndex":Pe}),Ft=A.group({class:"apexcharts-bar-goals-markers"}),an=function(Jt){var wo=b.barHelpers.getStrokeWidth(U,Jt,Pe),Ro=null,sr={indexes:{i:U,j:Jt,realIndex:Pe,translationsIndex:ue},x:Oe,y:Te,strokeWidth:wo,elSeries:P};Ro=b.isHorizontal?b.drawHorizontalBoxPaths(Tt(Tt({},sr),{},{yDivision:ae,barHeight:W,zeroW:me})):b.drawVerticalBoxPaths(Tt(Tt({},sr),{},{xDivision:ne,barWidth:q,zeroH:le})),Te=Ro.y,Oe=Ro.x;var qr=b.barHelpers.drawGoalLine({barXPosition:Ro.barXPosition,barYPosition:Ro.barYPosition,goalX:Ro.goalX,goalY:Ro.goalY,barHeight:W,barWidth:q});qr&&Ft.add(qr),Jt>0&&ve.push(Oe+q/2),Ve.push(Te),Ro.pathTo.forEach(function($r,Ii){var Vs=!b.isBoxPlot&&b.candlestickOptions.wick.useFillColor?Ro.color[Ii]:w.globals.stroke.colors[U],Ar=M.fillPath({seriesNumber:Pe,dataPointIndex:Jt,color:Ro.color[Ii],value:c[U][Jt]});b.renderSeries({realIndex:Pe,pathFill:Ar,lineFill:Vs,j:Jt,i:U,pathFrom:Ro.pathFrom,pathTo:$r,strokeWidth:wo,elSeries:P,x:Oe,y:Te,series:c,columnGroupIndex:ht,barHeight:W,barWidth:q,elDataLabelsWrap:nt,elGoalsMarkers:Ft,visibleSeries:b.visibleI,type:w.config.chart.type})})},hn=0;hn<w.globals.dataPoints;hn++)an(hn);w.globals.seriesXvalues[Pe]=ve,w.globals.seriesYvalues[Pe]=Ve,L.add(P)},Y=0;Y<c.length;Y++)$(Y);return L}},{key:"drawVerticalBoxPaths",value:function(c){var d=c.indexes,m=c.x;c.y;var b=c.xDivision,w=c.barWidth,A=c.zeroH,E=c.strokeWidth,M=this.w,O=new tn(this.ctx),L=d.i,$=d.j,Y=!0,U=M.config.plotOptions.candlestick.colors.upward,ne=M.config.plotOptions.candlestick.colors.downward,ae="";this.isBoxPlot&&(ae=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var le=this.yRatio[d.translationsIndex],me=d.realIndex,Oe=this.getOHLCValue(me,$),Te=A,Ve=A;Oe.o>Oe.c&&(Y=!1);var ve=Math.min(Oe.o,Oe.c),Pe=Math.max(Oe.o,Oe.c),ht=Oe.m;M.globals.isXNumeric&&(m=(M.globals.seriesX[me][$]-M.globals.minX)/this.xRatio-w/2);var P=m+w*this.visibleI;this.series[L][$]===void 0||this.series[L][$]===null?(ve=A,Pe=A):(ve=A-ve/le,Pe=A-Pe/le,Te=A-Oe.h/le,Ve=A-Oe.l/le,ht=A-Oe.m/le);var W=O.move(P,A),q=O.move(P+w/2,ve);return M.globals.previousPaths.length>0&&(q=this.getPreviousPath(me,$,!0)),W=this.isBoxPlot?[O.move(P,ve)+O.line(P+w/2,ve)+O.line(P+w/2,Te)+O.line(P+w/4,Te)+O.line(P+w-w/4,Te)+O.line(P+w/2,Te)+O.line(P+w/2,ve)+O.line(P+w,ve)+O.line(P+w,ht)+O.line(P,ht)+O.line(P,ve+E/2),O.move(P,ht)+O.line(P+w,ht)+O.line(P+w,Pe)+O.line(P+w/2,Pe)+O.line(P+w/2,Ve)+O.line(P+w-w/4,Ve)+O.line(P+w/4,Ve)+O.line(P+w/2,Ve)+O.line(P+w/2,Pe)+O.line(P,Pe)+O.line(P,ht)+"z"]:[O.move(P,Pe)+O.line(P+w/2,Pe)+O.line(P+w/2,Te)+O.line(P+w/2,Pe)+O.line(P+w,Pe)+O.line(P+w,ve)+O.line(P+w/2,ve)+O.line(P+w/2,Ve)+O.line(P+w/2,ve)+O.line(P,ve)+O.line(P,Pe-E/2)],q+=O.move(P,ve),M.globals.isXNumeric||(m+=b),{pathTo:W,pathFrom:q,x:m,y:Pe,goalY:this.barHelpers.getGoalValues("y",null,A,L,$,d.translationsIndex),barXPosition:P,color:this.isBoxPlot?ae:Y?[U]:[ne]}}},{key:"drawHorizontalBoxPaths",value:function(c){var d=c.indexes;c.x;var m=c.y,b=c.yDivision,w=c.barHeight,A=c.zeroW,E=c.strokeWidth,M=this.w,O=new tn(this.ctx),L=d.i,$=d.j,Y=this.boxOptions.colors.lower;this.isBoxPlot&&(Y=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var U=this.invertedYRatio,ne=d.realIndex,ae=this.getOHLCValue(ne,$),le=A,me=A,Oe=Math.min(ae.o,ae.c),Te=Math.max(ae.o,ae.c),Ve=ae.m;M.globals.isXNumeric&&(m=(M.globals.seriesX[ne][$]-M.globals.minX)/this.invertedXRatio-w/2);var ve=m+w*this.visibleI;this.series[L][$]===void 0||this.series[L][$]===null?(Oe=A,Te=A):(Oe=A+Oe/U,Te=A+Te/U,le=A+ae.h/U,me=A+ae.l/U,Ve=A+ae.m/U);var Pe=O.move(A,ve),ht=O.move(Oe,ve+w/2);return M.globals.previousPaths.length>0&&(ht=this.getPreviousPath(ne,$,!0)),Pe=[O.move(Oe,ve)+O.line(Oe,ve+w/2)+O.line(le,ve+w/2)+O.line(le,ve+w/2-w/4)+O.line(le,ve+w/2+w/4)+O.line(le,ve+w/2)+O.line(Oe,ve+w/2)+O.line(Oe,ve+w)+O.line(Ve,ve+w)+O.line(Ve,ve)+O.line(Oe+E/2,ve),O.move(Ve,ve)+O.line(Ve,ve+w)+O.line(Te,ve+w)+O.line(Te,ve+w/2)+O.line(me,ve+w/2)+O.line(me,ve+w-w/4)+O.line(me,ve+w/4)+O.line(me,ve+w/2)+O.line(Te,ve+w/2)+O.line(Te,ve)+O.line(Ve,ve)+"z"],ht+=O.move(Oe,ve),M.globals.isXNumeric||(m+=b),{pathTo:Pe,pathFrom:ht,x:Te,y:m,goalX:this.barHelpers.getGoalValues("x",A,null,L,$),barYPosition:ve,color:Y}}},{key:"getOHLCValue",value:function(c,d){var m=this.w;return{o:this.isBoxPlot?m.globals.seriesCandleH[c][d]:m.globals.seriesCandleO[c][d],h:this.isBoxPlot?m.globals.seriesCandleO[c][d]:m.globals.seriesCandleH[c][d],m:m.globals.seriesCandleM[c][d],l:this.isBoxPlot?m.globals.seriesCandleC[c][d]:m.globals.seriesCandleL[c][d],c:this.isBoxPlot?m.globals.seriesCandleL[c][d]:m.globals.seriesCandleC[c][d]}}}]),a}(),ed=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"checkColorRange",value:function(){var o=this.w,a=!1,c=o.config.plotOptions[o.config.chart.type];return c.colorScale.ranges.length>0&&c.colorScale.ranges.map(function(d,m){d.from<=0&&(a=!0)}),a}},{key:"getShadeColor",value:function(o,a,c,d){var m=this.w,b=1,w=m.config.plotOptions[o].shadeIntensity,A=this.determineColor(o,a,c);m.globals.hasNegs||d?b=m.config.plotOptions[o].reverseNegativeShade?A.percent<0?A.percent/100*(1.25*w):(1-A.percent/100)*(1.25*w):A.percent<=0?1-(1+A.percent/100)*w:(1-A.percent/100)*w:(b=1-A.percent/100,o==="treemap"&&(b=(1-A.percent/100)*(1.25*w)));var E=A.color,M=new oe;if(m.config.plotOptions[o].enableShades)if(this.w.config.theme.mode==="dark"){var O=M.shadeColor(-1*b,A.color);E=oe.hexToRgba(oe.isColorHex(O)?O:oe.rgb2hex(O),m.config.fill.opacity)}else{var L=M.shadeColor(b,A.color);E=oe.hexToRgba(oe.isColorHex(L)?L:oe.rgb2hex(L),m.config.fill.opacity)}return{color:E,colorProps:A}}},{key:"determineColor",value:function(o,a,c){var d=this.w,m=d.globals.series[a][c],b=d.config.plotOptions[o],w=b.colorScale.inverse?c:a;b.distributed&&d.config.chart.type==="treemap"&&(w=c);var A=d.globals.colors[w],E=null,M=Math.min.apply(Math,vn(d.globals.series[a])),O=Math.max.apply(Math,vn(d.globals.series[a]));b.distributed||o!=="heatmap"||(M=d.globals.minY,O=d.globals.maxY),b.colorScale.min!==void 0&&(M=b.colorScale.min<d.globals.minY?b.colorScale.min:d.globals.minY,O=b.colorScale.max>d.globals.maxY?b.colorScale.max:d.globals.maxY);var L=Math.abs(O)+Math.abs(M),$=100*m/(L===0?L-1e-6:L);return b.colorScale.ranges.length>0&&b.colorScale.ranges.map(function(Y,U){if(m>=Y.from&&m<=Y.to){A=Y.color,E=Y.foreColor?Y.foreColor:null,M=Y.from,O=Y.to;var ne=Math.abs(O)+Math.abs(M);$=100*m/(ne===0?ne-1e-6:ne)}}),{color:A,foreColor:E,percent:$}}},{key:"calculateDataLabels",value:function(o){var a=o.text,c=o.x,d=o.y,m=o.i,b=o.j,w=o.colorProps,A=o.fontSize,E=this.w.config.dataLabels,M=new tn(this.ctx),O=new Nr(this.ctx),L=null;if(E.enabled){L=M.group({class:"apexcharts-data-labels"});var $=E.offsetX,Y=E.offsetY,U=c+$,ne=d+parseFloat(E.style.fontSize)/3+Y;O.plotDataLabelsText({x:U,y:ne,text:a,i:m,j:b,color:w.foreColor,parent:L,fontSize:A,dataLabelsConfig:E})}return L}},{key:"addListeners",value:function(o){var a=new tn(this.ctx);o.node.addEventListener("mouseenter",a.pathMouseEnter.bind(this,o)),o.node.addEventListener("mouseleave",a.pathMouseLeave.bind(this,o)),o.node.addEventListener("mousedown",a.pathMouseDown.bind(this,o))}}]),C}(),Fc=function(){function C(o,a){gn(this,C),this.ctx=o,this.w=o.w,this.xRatio=a.xRatio,this.yRatio=a.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new ed(o),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return rn(C,[{key:"draw",value:function(o){var a=this.w,c=new tn(this.ctx),d=c.group({class:"apexcharts-heatmap"});d.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")"));var m=a.globals.gridWidth/a.globals.dataPoints,b=a.globals.gridHeight/a.globals.series.length,w=0,A=!1;this.negRange=this.helpers.checkColorRange();var E=o.slice();a.config.yaxis[0].reversed&&(A=!0,E.reverse());for(var M=A?0:E.length-1;A?M<E.length:M>=0;A?M++:M--){var O=c.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:oe.escapeString(a.globals.seriesNames[M]),rel:M+1,"data:realIndex":M});if(this.ctx.series.addCollapsedClassToSeries(O,M),a.config.chart.dropShadow.enabled){var L=a.config.chart.dropShadow;new Ya(this.ctx).dropShadow(O,L,M)}for(var $=0,Y=a.config.plotOptions.heatmap.shadeIntensity,U=0;U<E[M].length;U++){var ne=this.helpers.getShadeColor(a.config.chart.type,M,U,this.negRange),ae=ne.color,le=ne.colorProps;a.config.fill.type==="image"&&(ae=new Mr(this.ctx).fillPath({seriesNumber:M,dataPointIndex:U,opacity:a.globals.hasNegs?le.percent<0?1-(1+le.percent/100):Y+le.percent/100:le.percent/100,patternID:oe.randomId(),width:a.config.fill.image.width?a.config.fill.image.width:m,height:a.config.fill.image.height?a.config.fill.image.height:b}));var me=this.rectRadius,Oe=c.drawRect($,w,m,b,me);if(Oe.attr({cx:$,cy:w}),Oe.node.classList.add("apexcharts-heatmap-rect"),O.add(Oe),Oe.attr({fill:ae,i:M,index:M,j:U,val:o[M][U],"stroke-width":this.strokeWidth,stroke:a.config.plotOptions.heatmap.useFillColorAsStroke?ae:a.globals.stroke.colors[0],color:ae}),this.helpers.addListeners(Oe),a.config.chart.animations.enabled&&!a.globals.dataChanged){var Te=1;a.globals.resized||(Te=a.config.chart.animations.speed),this.animateHeatMap(Oe,$,w,m,b,Te)}if(a.globals.dataChanged){var Ve=1;if(this.dynamicAnim.enabled&&a.globals.shouldAnimate){Ve=this.dynamicAnim.speed;var ve=a.globals.previousPaths[M]&&a.globals.previousPaths[M][U]&&a.globals.previousPaths[M][U].color;ve||(ve="rgba(255, 255, 255, 0)"),this.animateHeatColor(Oe,oe.isColorHex(ve)?ve:oe.rgb2hex(ve),oe.isColorHex(ae)?ae:oe.rgb2hex(ae),Ve)}}var Pe=(0,a.config.dataLabels.formatter)(a.globals.series[M][U],{value:a.globals.series[M][U],seriesIndex:M,dataPointIndex:U,w:a}),ht=this.helpers.calculateDataLabels({text:Pe,x:$+m/2,y:w+b/2,i:M,j:U,colorProps:le,series:E});ht!==null&&O.add(ht),$+=m}w+=b,d.add(O)}var P=a.globals.yAxisScale[0].result.slice();return a.config.yaxis[0].reversed?P.unshift(""):P.push(""),a.globals.yAxisScale[0].result=P,d}},{key:"animateHeatMap",value:function(o,a,c,d,m,b){var w=new Wt(this.ctx);w.animateRect(o,{x:a+d/2,y:c+m/2,width:0,height:0},{x:a,y:c,width:d,height:m},b,function(){w.animationCompleted(o)})}},{key:"animateHeatColor",value:function(o,a,c,d){o.attr({fill:a}).animate(d).attr({fill:c})}}]),C}(),Ni=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"drawYAxisTexts",value:function(o,a,c,d){var m=this.w,b=m.config.yaxis[0],w=m.globals.yLabelFormatters[0];return new tn(this.ctx).drawText({x:o+b.labels.offsetX,y:a+b.labels.offsetY,text:w(d,c),textAnchor:"middle",fontSize:b.labels.style.fontSize,fontFamily:b.labels.style.fontFamily,foreColor:Array.isArray(b.labels.style.colors)?b.labels.style.colors[c]:b.labels.style.colors})}}]),C}(),qh=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w;var a=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=a.globals.stroke.colors!==void 0?a.globals.stroke.colors:a.globals.colors,this.defaultSize=Math.min(a.globals.gridWidth,a.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=a.globals.gridWidth/2,a.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(a.config.plotOptions.pie.endAngle-a.config.plotOptions.pie.startAngle),this.initialAngle=a.config.plotOptions.pie.startAngle%this.fullAngle,a.globals.radialSize=this.defaultSize/2.05-a.config.stroke.width-(a.config.chart.sparkline.enabled?0:a.config.chart.dropShadow.blur),this.donutSize=a.globals.radialSize*parseInt(a.config.plotOptions.pie.donut.size,10)/100;var c=a.config.plotOptions.pie.customScale,d=a.globals.gridWidth/2,m=a.globals.gridHeight/2;this.translateX=d-d*c,this.translateY=m-m*c,this.dataLabelsGroup=new tn(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(c,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return rn(C,[{key:"draw",value:function(o){var a=this,c=this.w,d=new tn(this.ctx),m=d.group({class:"apexcharts-pie"});if(c.globals.noData)return m;for(var b=0,w=0;w<o.length;w++)b+=oe.negToZero(o[w]);var A=[],E=d.group();b===0&&(b=1e-5),o.forEach(function(me){a.maxY=Math.max(a.maxY,me)}),c.config.yaxis[0].max&&(this.maxY=c.config.yaxis[0].max),c.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(m);for(var M=0;M<o.length;M++){var O=this.fullAngle*oe.negToZero(o[M])/b;A.push(O),this.chartType==="polarArea"?(A[M]=this.fullAngle/o.length,this.sliceSizes.push(c.globals.radialSize*o[M]/this.maxY)):this.sliceSizes.push(c.globals.radialSize)}if(c.globals.dataChanged){for(var L,$=0,Y=0;Y<c.globals.previousPaths.length;Y++)$+=oe.negToZero(c.globals.previousPaths[Y]);for(var U=0;U<c.globals.previousPaths.length;U++)L=this.fullAngle*oe.negToZero(c.globals.previousPaths[U])/$,this.prevSectorAngleArr.push(L)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var ne=d.drawCircle(this.donutSize);ne.attr({cx:this.centerX,cy:this.centerY,fill:c.config.plotOptions.pie.donut.background?c.config.plotOptions.pie.donut.background:"transparent"}),E.add(ne)}var ae=this.drawArcs(A,o);if(this.sliceLabels.forEach(function(me){ae.add(me)}),E.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(c.config.plotOptions.pie.customScale,")")}),E.add(ae),m.add(E),this.donutDataLabels.show){var le=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});m.add(le)}return c.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(m),m}},{key:"drawArcs",value:function(o,a){var c=this.w,d=new Ya(this.ctx),m=new tn(this.ctx),b=new Mr(this.ctx),w=m.group({class:"apexcharts-slices"}),A=this.initialAngle,E=this.initialAngle,M=this.initialAngle,O=this.initialAngle;this.strokeWidth=c.config.stroke.show?c.config.stroke.width:0;for(var L=0;L<o.length;L++){var $=m.group({class:"apexcharts-series apexcharts-pie-series",seriesName:oe.escapeString(c.globals.seriesNames[L]),rel:L+1,"data:realIndex":L});w.add($),E=O,M=(A=M)+o[L],O=E+this.prevSectorAngleArr[L];var Y=M<A?this.fullAngle+M-A:M-A,U=b.fillPath({seriesNumber:L,size:this.sliceSizes[L],value:a[L]}),ne=this.getChangedPath(E,O),ae=m.drawPath({d:ne,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[L]:this.lineColorArr,strokeWidth:0,fill:U,fillOpacity:c.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(L)});if(ae.attr({index:0,j:L}),d.setSelectionFilter(ae,0,L),c.config.chart.dropShadow.enabled){var le=c.config.chart.dropShadow;d.dropShadow(ae,le,L)}this.addListeners(ae,this.donutDataLabels),tn.setAttrs(ae.node,{"data:angle":Y,"data:startAngle":A,"data:strokeWidth":this.strokeWidth,"data:value":a[L]});var me={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?me=oe.polarToCartesian(this.centerX,this.centerY,c.globals.radialSize/1.25+c.config.plotOptions.pie.dataLabels.offset,(A+Y/2)%this.fullAngle):this.chartType==="donut"&&(me=oe.polarToCartesian(this.centerX,this.centerY,(c.globals.radialSize+this.donutSize)/2+c.config.plotOptions.pie.dataLabels.offset,(A+Y/2)%this.fullAngle)),$.add(ae);var Oe=0;if(!this.initialAnim||c.globals.resized||c.globals.dataChanged?this.animBeginArr.push(0):((Oe=Y/this.fullAngle*c.config.chart.animations.speed)===0&&(Oe=1),this.animDur=Oe+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&c.globals.dataChanged?this.animatePaths(ae,{size:this.sliceSizes[L],endAngle:M,startAngle:A,prevStartAngle:E,prevEndAngle:O,animateStartingPos:!0,i:L,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:c.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(ae,{size:this.sliceSizes[L],endAngle:M,startAngle:A,i:L,totalItems:o.length-1,animBeginArr:this.animBeginArr,dur:Oe}),c.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&ae.node.addEventListener("mouseup",this.pieClicked.bind(this,L)),c.globals.selectedDataPoints[0]!==void 0&&c.globals.selectedDataPoints[0].indexOf(L)>-1&&this.pieClicked(L),c.config.dataLabels.enabled){var Te=me.x,Ve=me.y,ve=100*Y/this.fullAngle+"%";if(Y!==0&&c.config.plotOptions.pie.dataLabels.minAngleToShowLabel<o[L]){var Pe=c.config.dataLabels.formatter;Pe!==void 0&&(ve=Pe(c.globals.seriesPercent[L][0],{seriesIndex:L,w:c}));var ht=c.globals.dataLabels.style.colors[L],P=m.group({class:"apexcharts-datalabels"}),W=m.drawText({x:Te,y:Ve,text:ve,textAnchor:"middle",fontSize:c.config.dataLabels.style.fontSize,fontFamily:c.config.dataLabels.style.fontFamily,fontWeight:c.config.dataLabels.style.fontWeight,foreColor:ht});if(P.add(W),c.config.dataLabels.dropShadow.enabled){var q=c.config.dataLabels.dropShadow;d.dropShadow(W,q)}W.node.classList.add("apexcharts-pie-label"),c.config.chart.animations.animate&&c.globals.resized===!1&&(W.node.classList.add("apexcharts-pie-label-delay"),W.node.style.animationDelay=c.config.chart.animations.speed/940+"s"),this.sliceLabels.push(P)}}}return w}},{key:"addListeners",value:function(o,a){var c=new tn(this.ctx);o.node.addEventListener("mouseenter",c.pathMouseEnter.bind(this,o)),o.node.addEventListener("mouseleave",c.pathMouseLeave.bind(this,o)),o.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,o.node,a)),o.node.addEventListener("mousedown",c.pathMouseDown.bind(this,o)),this.donutDataLabels.total.showAlways||(o.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,o.node,a)),o.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,o.node,a)))}},{key:"animatePaths",value:function(o,a){var c=this.w,d=a.endAngle<a.startAngle?this.fullAngle+a.endAngle-a.startAngle:a.endAngle-a.startAngle,m=d,b=a.startAngle,w=a.startAngle;a.prevStartAngle!==void 0&&a.prevEndAngle!==void 0&&(b=a.prevEndAngle,m=a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle),a.i===c.config.series.length-1&&(d+w>this.fullAngle?a.endAngle=a.endAngle-(d+w):d+w<this.fullAngle&&(a.endAngle=a.endAngle+(this.fullAngle-(d+w)))),d===this.fullAngle&&(d=this.fullAngle-.01),this.animateArc(o,b,w,d,m,a)}},{key:"animateArc",value:function(o,a,c,d,m,b){var w,A=this,E=this.w,M=new Wt(this.ctx),O=b.size;(isNaN(a)||isNaN(m))&&(a=c,m=d,b.dur=0);var L=d,$=c,Y=a<c?this.fullAngle+a-c:a-c;E.globals.dataChanged&&b.shouldSetPrevPaths&&b.prevEndAngle&&(w=A.getPiePath({me:A,startAngle:b.prevStartAngle,angle:b.prevEndAngle<b.prevStartAngle?this.fullAngle+b.prevEndAngle-b.prevStartAngle:b.prevEndAngle-b.prevStartAngle,size:O}),o.attr({d:w})),b.dur!==0?o.animate(b.dur,b.animBeginArr[b.i]).after(function(){A.chartType!=="pie"&&A.chartType!=="donut"&&A.chartType!=="polarArea"||this.animate(E.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":A.strokeWidth}),b.i===E.config.series.length-1&&M.animationCompleted(o)}).during(function(U){L=Y+(d-Y)*U,b.animateStartingPos&&(L=m+(d-m)*U,$=a-m+(c-(a-m))*U),w=A.getPiePath({me:A,startAngle:$,angle:L,size:O}),o.node.setAttribute("data:pathOrig",w),o.attr({d:w})}):(w=A.getPiePath({me:A,startAngle:$,angle:d,size:O}),b.isTrack||(E.globals.animationEnded=!0),o.node.setAttribute("data:pathOrig",w),o.attr({d:w,"stroke-width":A.strokeWidth}))}},{key:"pieClicked",value:function(o){var a,c=this.w,d=this,m=d.sliceSizes[o]+(c.config.plotOptions.pie.expandOnClick?4:0),b=c.globals.dom.Paper.findOne(".apexcharts-".concat(d.chartType.toLowerCase(),"-slice-").concat(o));if(b.attr("data:pieClicked")!=="true"){var w=c.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(w,function(O){O.setAttribute("data:pieClicked","false");var L=O.getAttribute("data:pathOrig");L&&O.setAttribute("d",L)}),c.globals.capturedDataPointIndex=o,b.attr("data:pieClicked","true");var A=parseInt(b.attr("data:startAngle"),10),E=parseInt(b.attr("data:angle"),10);a=d.getPiePath({me:d,startAngle:A,angle:E,size:m}),E!==360&&b.plot(a)}else{b.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(b.node,this.donutDataLabels);var M=b.attr("data:pathOrig");b.attr({d:M})}}},{key:"getChangedPath",value:function(o,a){var c="";return this.dynamicAnim&&this.w.globals.dataChanged&&(c=this.getPiePath({me:this,startAngle:o,angle:a-o,size:this.size})),c}},{key:"getPiePath",value:function(o){var a,c=o.me,d=o.startAngle,m=o.angle,b=o.size,w=new tn(this.ctx),A=d,E=Math.PI*(A-90)/180,M=m+d;Math.ceil(M)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(M=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(M)>this.fullAngle&&(M-=this.fullAngle);var O=Math.PI*(M-90)/180,L=c.centerX+b*Math.cos(E),$=c.centerY+b*Math.sin(E),Y=c.centerX+b*Math.cos(O),U=c.centerY+b*Math.sin(O),ne=oe.polarToCartesian(c.centerX,c.centerY,c.donutSize,M),ae=oe.polarToCartesian(c.centerX,c.centerY,c.donutSize,A),le=m>180?1:0,me=["M",L,$,"A",b,b,0,le,1,Y,U];return a=c.chartType==="donut"?[].concat(me,["L",ne.x,ne.y,"A",c.donutSize,c.donutSize,0,le,0,ae.x,ae.y,"L",L,$,"z"]).join(" "):c.chartType==="pie"||c.chartType==="polarArea"?[].concat(me,["L",c.centerX,c.centerY,"L",L,$]).join(" "):[].concat(me).join(" "),w.roundPathCorners(a,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(o){var a=this.w,c=new nu(this.ctx),d=new tn(this.ctx),m=new Ni(this.ctx),b=d.group(),w=d.group(),A=c.niceScale(0,Math.ceil(this.maxY),0),E=A.result.reverse(),M=A.result.length;this.maxY=A.niceMax;for(var O=a.globals.radialSize,L=O/(M-1),$=0;$<M-1;$++){var Y=d.drawCircle(O);if(Y.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":a.config.plotOptions.polarArea.rings.strokeWidth,stroke:a.config.plotOptions.polarArea.rings.strokeColor}),a.config.yaxis[0].show){var U=m.drawYAxisTexts(this.centerX,this.centerY-O+parseInt(a.config.yaxis[0].labels.style.fontSize,10)/2,$,E[$]);w.add(U)}b.add(Y),O-=L}this.drawSpokes(o),o.add(b),o.add(w)}},{key:"renderInnerDataLabels",value:function(o,a,c){var d=this.w,m=new tn(this.ctx),b=a.total.show;o.node.innerHTML="",o.node.style.opacity=c.opacity;var w,A,E=c.centerX,M=this.donutDataLabels.total.label?c.centerY:c.centerY-c.centerY/6;w=a.name.color===void 0?d.globals.colors[0]:a.name.color;var O=a.name.fontSize,L=a.name.fontFamily,$=a.name.fontWeight;A=a.value.color===void 0?d.config.chart.foreColor:a.value.color;var Y=a.value.formatter,U="",ne="";if(b?(w=a.total.color,O=a.total.fontSize,L=a.total.fontFamily,$=a.total.fontWeight,ne=this.donutDataLabels.total.label?a.total.label:"",U=a.total.formatter(d)):d.globals.series.length===1&&(U=Y(d.globals.series[0],d),ne=d.globals.seriesNames[0]),ne&&(ne=a.name.formatter(ne,a.total.show,d)),a.name.show){var ae=m.drawText({x:E,y:M+parseFloat(a.name.offsetY),text:ne,textAnchor:"middle",foreColor:w,fontSize:O,fontWeight:$,fontFamily:L});ae.node.classList.add("apexcharts-datalabel-label"),o.add(ae)}if(a.value.show){var le=a.name.show?parseFloat(a.value.offsetY)+16:a.value.offsetY,me=m.drawText({x:E,y:M+le,text:U,textAnchor:"middle",foreColor:A,fontWeight:a.value.fontWeight,fontSize:a.value.fontSize,fontFamily:a.value.fontFamily});me.node.classList.add("apexcharts-datalabel-value"),o.add(me)}return o}},{key:"printInnerLabels",value:function(o,a,c,d){var m,b=this.w;d?m=o.name.color===void 0?b.globals.colors[parseInt(d.parentNode.getAttribute("rel"),10)-1]:o.name.color:b.globals.series.length>1&&o.total.show&&(m=o.total.color);var w=b.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),A=b.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");c=(0,o.value.formatter)(c,b),d||typeof o.total.formatter!="function"||(c=o.total.formatter(b));var E=a===o.total.label;a=this.donutDataLabels.total.label?o.name.formatter(a,E,b):"",w!==null&&(w.textContent=a),A!==null&&(A.textContent=c),w!==null&&(w.style.fill=m)}},{key:"printDataLabelsInner",value:function(o,a){var c=this.w,d=o.getAttribute("data:value"),m=c.globals.seriesNames[parseInt(o.parentNode.getAttribute("rel"),10)-1];c.globals.series.length>1&&this.printInnerLabels(a,m,d,o);var b=c.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");b!==null&&(b.style.opacity=1)}},{key:"drawSpokes",value:function(o){var a=this,c=this.w,d=new tn(this.ctx),m=c.config.plotOptions.polarArea.spokes;if(m.strokeWidth!==0){for(var b=[],w=360/c.globals.series.length,A=0;A<c.globals.series.length;A++)b.push(oe.polarToCartesian(this.centerX,this.centerY,c.globals.radialSize,c.config.plotOptions.pie.startAngle+w*A));b.forEach(function(E,M){var O=d.drawLine(E.x,E.y,a.centerX,a.centerY,Array.isArray(m.connectorColors)?m.connectorColors[M]:m.connectorColors);o.add(O)})}}},{key:"revertDataLabelsInner",value:function(){var o=this.w;if(this.donutDataLabels.show){var a=o.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),c=this.renderInnerDataLabels(a,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});o.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(c)}}}]),C}(),td=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var a=this.w;this.graphics=new tn(this.ctx),this.lineColorArr=a.globals.stroke.colors!==void 0?a.globals.stroke.colors:a.globals.colors,this.defaultSize=a.globals.svgHeight<a.globals.svgWidth?a.globals.gridHeight:a.globals.gridWidth,this.isLog=a.config.yaxis[0].logarithmic,this.logBase=a.config.yaxis[0].logBase,this.coreUtils=new bs(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,a.globals.maxY,0):a.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):a.globals.minY,this.polygons=a.config.plotOptions.radar.polygons,this.strokeWidth=a.config.stroke.show?a.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-a.config.chart.dropShadow.blur,a.config.xaxis.labels.show&&(this.size=this.size-a.globals.xAxisLabelsWidth/1.75),a.config.plotOptions.radar.size!==void 0&&(this.size=a.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return rn(C,[{key:"draw",value:function(o){var a=this,c=this.w,d=new Mr(this.ctx),m=[],b=new Nr(this.ctx);o.length&&(this.dataPointsLen=o[c.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var w=c.globals.gridWidth/2,A=c.globals.gridHeight/2,E=w+c.config.plotOptions.radar.offsetX,M=A+c.config.plotOptions.radar.offsetY,O=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(E||0,", ").concat(M||0,")")}),L=[],$=null,Y=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),o.forEach(function(ne,ae){var le=ne.length===c.globals.dataPoints,me=a.graphics.group().attr({class:"apexcharts-series","data:longestSeries":le,seriesName:oe.escapeString(c.globals.seriesNames[ae]),rel:ae+1,"data:realIndex":ae});a.dataRadiusOfPercent[ae]=[],a.dataRadius[ae]=[],a.angleArr[ae]=[],ne.forEach(function(ue,ye){var nt=Math.abs(a.maxValue-a.minValue);ue-=a.minValue,a.isLog&&(ue=a.coreUtils.getLogVal(a.logBase,ue,0)),a.dataRadiusOfPercent[ae][ye]=ue/nt,a.dataRadius[ae][ye]=a.dataRadiusOfPercent[ae][ye]*a.size,a.angleArr[ae][ye]=ye*a.disAngle}),L=a.getDataPointsPos(a.dataRadius[ae],a.angleArr[ae]);var Oe=a.createPaths(L,{x:0,y:0});$=a.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),Y=a.graphics.group({class:"apexcharts-datalabels","data:realIndex":ae}),c.globals.delayedElements.push({el:$.node,index:ae});var Te={i:ae,realIndex:ae,animationDelay:ae,initialSpeed:c.config.chart.animations.speed,dataChangeSpeed:c.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:c.globals.stroke.colors[ae],strokeLineCap:c.config.stroke.lineCap},Ve=null;c.globals.previousPaths.length>0&&(Ve=a.getPreviousPath(ae));for(var ve=0;ve<Oe.linePathsTo.length;ve++){var Pe=a.graphics.renderPaths(Tt(Tt({},Te),{},{pathFrom:Ve===null?Oe.linePathsFrom[ve]:Ve,pathTo:Oe.linePathsTo[ve],strokeWidth:Array.isArray(a.strokeWidth)?a.strokeWidth[ae]:a.strokeWidth,fill:"none",drawShadow:!1}));me.add(Pe);var ht=d.fillPath({seriesNumber:ae}),P=a.graphics.renderPaths(Tt(Tt({},Te),{},{pathFrom:Ve===null?Oe.areaPathsFrom[ve]:Ve,pathTo:Oe.areaPathsTo[ve],strokeWidth:0,fill:ht,drawShadow:!1}));if(c.config.chart.dropShadow.enabled){var W=new Ya(a.ctx),q=c.config.chart.dropShadow;W.dropShadow(P,Object.assign({},q,{noUserSpaceOnUse:!0}),ae)}me.add(P)}ne.forEach(function(ue,ye){var nt=new Pa(a.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:ae,dataPointIndex:ye}),Ft=a.graphics.drawMarker(L[ye].x,L[ye].y,nt);Ft.attr("rel",ye),Ft.attr("j",ye),Ft.attr("index",ae),Ft.node.setAttribute("default-marker-size",nt.pSize);var an=a.graphics.group({class:"apexcharts-series-markers"});an&&an.add(Ft),$.add(an),me.add($);var hn=c.config.dataLabels;if(hn.enabled){var Jt=hn.formatter(c.globals.series[ae][ye],{seriesIndex:ae,dataPointIndex:ye,w:c});b.plotDataLabelsText({x:L[ye].x,y:L[ye].y,text:Jt,textAnchor:"middle",i:ae,j:ae,parent:Y,offsetCorrection:!1,dataLabelsConfig:Tt({},hn)})}me.add(Y)}),m.push(me)}),this.drawPolygons({parent:O}),c.config.xaxis.labels.show){var U=this.drawXAxisTexts();O.add(U)}return m.forEach(function(ne){O.add(ne)}),O.add(this.yaxisLabels),O}},{key:"drawPolygons",value:function(o){for(var a=this,c=this.w,d=o.parent,m=new Ni(this.ctx),b=c.globals.yAxisScale[0].result.reverse(),w=b.length,A=[],E=this.size/(w-1),M=0;M<w;M++)A[M]=E*M;A.reverse();var O=[],L=[];A.forEach(function($,Y){var U=oe.getPolygonPos($,a.dataPointsLen),ne="";U.forEach(function(ae,le){if(Y===0){var me=a.graphics.drawLine(ae.x,ae.y,0,0,Array.isArray(a.polygons.connectorColors)?a.polygons.connectorColors[le]:a.polygons.connectorColors);L.push(me)}le===0&&a.yaxisLabelsTextsPos.push({x:ae.x,y:ae.y}),ne+=ae.x+","+ae.y+" "}),O.push(ne)}),O.forEach(function($,Y){var U=a.polygons.strokeColors,ne=a.polygons.strokeWidth,ae=a.graphics.drawPolygon($,Array.isArray(U)?U[Y]:U,Array.isArray(ne)?ne[Y]:ne,c.globals.radarPolygons.fill.colors[Y]);d.add(ae)}),L.forEach(function($){d.add($)}),c.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function($,Y){var U=m.drawYAxisTexts($.x,$.y,Y,b[Y]);a.yaxisLabels.add(U)})}},{key:"drawXAxisTexts",value:function(){var o=this,a=this.w,c=a.config.xaxis.labels,d=this.graphics.group({class:"apexcharts-xaxis"}),m=oe.getPolygonPos(this.size,this.dataPointsLen);return a.globals.labels.forEach(function(b,w){var A=a.config.xaxis.labels.formatter,E=new Nr(o.ctx);if(m[w]){var M=o.getTextPos(m[w],o.size),O=A(b,{seriesIndex:-1,dataPointIndex:w,w:a});E.plotDataLabelsText({x:M.newX,y:M.newY,text:O,textAnchor:M.textAnchor,i:w,j:w,parent:d,className:"apexcharts-xaxis-label",color:Array.isArray(c.style.colors)&&c.style.colors[w]?c.style.colors[w]:"#a8a8a8",dataLabelsConfig:Tt({textAnchor:M.textAnchor,dropShadow:{enabled:!1}},c),offsetCorrection:!1}).on("click",function(L){if(typeof a.config.chart.events.xAxisLabelClick=="function"){var $=Object.assign({},a,{labelIndex:w});a.config.chart.events.xAxisLabelClick(L,o.ctx,$)}})}}),d}},{key:"createPaths",value:function(o,a){var c=this,d=[],m=[],b=[],w=[];if(o.length){m=[this.graphics.move(a.x,a.y)],w=[this.graphics.move(a.x,a.y)];var A=this.graphics.move(o[0].x,o[0].y),E=this.graphics.move(o[0].x,o[0].y);o.forEach(function(M,O){A+=c.graphics.line(M.x,M.y),E+=c.graphics.line(M.x,M.y),O===o.length-1&&(A+="Z",E+="Z")}),d.push(A),b.push(E)}return{linePathsFrom:m,linePathsTo:d,areaPathsFrom:w,areaPathsTo:b}}},{key:"getTextPos",value:function(o,a){var c="middle",d=o.x,m=o.y;return Math.abs(o.x)>=10?o.x>0?(c="start",d+=10):o.x<0&&(c="end",d-=10):c="middle",Math.abs(o.y)>=a-10&&(o.y<0?m-=10:o.y>0&&(m+=10)),{textAnchor:c,newX:d,newY:m}}},{key:"getPreviousPath",value:function(o){for(var a=this.w,c=null,d=0;d<a.globals.previousPaths.length;d++){var m=a.globals.previousPaths[d];m.paths.length>0&&parseInt(m.realIndex,10)===parseInt(o,10)&&a.globals.previousPaths[d].paths[0]!==void 0&&(c=a.globals.previousPaths[d].paths[0].d)}return c}},{key:"getDataPointsPos",value:function(o,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;o=o||[],a=a||[];for(var d=[],m=0;m<c;m++){var b={};b.x=o[m]*Math.sin(a[m]),b.y=-o[m]*Math.cos(a[m]),d.push(b)}return d}}]),C}(),li=function(C){ns(a,qh);var o=Fo(a);function a(c){var d;gn(this,a),(d=o.call(this,c)).ctx=c,d.w=c.w,d.animBeginArr=[0],d.animDur=0;var m=d.w;return d.startAngle=m.config.plotOptions.radialBar.startAngle,d.endAngle=m.config.plotOptions.radialBar.endAngle,d.totalAngle=Math.abs(m.config.plotOptions.radialBar.endAngle-m.config.plotOptions.radialBar.startAngle),d.trackStartAngle=m.config.plotOptions.radialBar.track.startAngle,d.trackEndAngle=m.config.plotOptions.radialBar.track.endAngle,d.barLabels=d.w.config.plotOptions.radialBar.barLabels,d.donutDataLabels=d.w.config.plotOptions.radialBar.dataLabels,d.radialDataLabels=d.donutDataLabels,d.trackStartAngle||(d.trackStartAngle=d.startAngle),d.trackEndAngle||(d.trackEndAngle=d.endAngle),d.endAngle===360&&(d.endAngle=359.99),d.margin=parseInt(m.config.plotOptions.radialBar.track.margin,10),d.onBarLabelClick=d.onBarLabelClick.bind(Rs(d)),d}return rn(a,[{key:"draw",value:function(c){var d=this.w,m=new tn(this.ctx),b=m.group({class:"apexcharts-radialbar"});if(d.globals.noData)return b;var w=m.group(),A=this.defaultSize/2,E=d.globals.gridWidth/2,M=this.defaultSize/2.05;d.config.chart.sparkline.enabled||(M=M-d.config.stroke.width-d.config.chart.dropShadow.blur);var O=d.globals.fill.colors;if(d.config.plotOptions.radialBar.track.show){var L=this.drawTracks({size:M,centerX:E,centerY:A,colorArr:O,series:c});w.add(L)}var $=this.drawArcs({size:M,centerX:E,centerY:A,colorArr:O,series:c}),Y=360;d.config.plotOptions.radialBar.startAngle<0&&(Y=this.totalAngle);var U=(360-Y)/360;if(d.globals.radialSize=M-M*U,this.radialDataLabels.value.show){var ne=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);d.globals.radialSize+=ne*U}return w.add($.g),d.config.plotOptions.radialBar.hollow.position==="front"&&($.g.add($.elHollow),$.dataLabels&&$.g.add($.dataLabels)),b.add(w),b}},{key:"drawTracks",value:function(c){var d=this.w,m=new tn(this.ctx),b=m.group({class:"apexcharts-tracks"}),w=new Ya(this.ctx),A=new Mr(this.ctx),E=this.getStrokeWidth(c);c.size=c.size-E/2;for(var M=0;M<c.series.length;M++){var O=m.group({class:"apexcharts-radialbar-track apexcharts-track"});b.add(O),O.attr({rel:M+1}),c.size=c.size-E-this.margin;var L=d.config.plotOptions.radialBar.track,$=A.fillPath({seriesNumber:0,size:c.size,fillColors:Array.isArray(L.background)?L.background[M]:L.background,solid:!0}),Y=this.trackStartAngle,U=this.trackEndAngle;Math.abs(U)+Math.abs(Y)>=360&&(U=360-Math.abs(this.startAngle)-.1);var ne=m.drawPath({d:"",stroke:$,strokeWidth:E*parseInt(L.strokeWidth,10)/100,fill:"none",strokeOpacity:L.opacity,classes:"apexcharts-radialbar-area"});if(L.dropShadow.enabled){var ae=L.dropShadow;w.dropShadow(ne,ae)}O.add(ne),ne.attr("id","apexcharts-radialbarTrack-"+M),this.animatePaths(ne,{centerX:c.centerX,centerY:c.centerY,endAngle:U,startAngle:Y,size:c.size,i:M,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return b}},{key:"drawArcs",value:function(c){var d=this.w,m=new tn(this.ctx),b=new Mr(this.ctx),w=new Ya(this.ctx),A=m.group(),E=this.getStrokeWidth(c);c.size=c.size-E/2;var M=d.config.plotOptions.radialBar.hollow.background,O=c.size-E*c.series.length-this.margin*c.series.length-E*parseInt(d.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,L=O-d.config.plotOptions.radialBar.hollow.margin;d.config.plotOptions.radialBar.hollow.image!==void 0&&(M=this.drawHollowImage(c,A,O,M));var $=this.drawHollow({size:L,centerX:c.centerX,centerY:c.centerY,fill:M||"transparent"});if(d.config.plotOptions.radialBar.hollow.dropShadow.enabled){var Y=d.config.plotOptions.radialBar.hollow.dropShadow;w.dropShadow($,Y)}var U=1;!this.radialDataLabels.total.show&&d.globals.series.length>1&&(U=0);var ne=null;if(this.radialDataLabels.show){var ae=d.globals.dom.Paper.findOne(".apexcharts-datalabels-group");ne=this.renderInnerDataLabels(ae,this.radialDataLabels,{hollowSize:O,centerX:c.centerX,centerY:c.centerY,opacity:U})}d.config.plotOptions.radialBar.hollow.position==="back"&&(A.add($),ne&&A.add(ne));var le=!1;d.config.plotOptions.radialBar.inverseOrder&&(le=!0);for(var me=le?c.series.length-1:0;le?me>=0:me<c.series.length;le?me--:me++){var Oe=m.group({class:"apexcharts-series apexcharts-radial-series",seriesName:oe.escapeString(d.globals.seriesNames[me])});A.add(Oe),Oe.attr({rel:me+1,"data:realIndex":me}),this.ctx.series.addCollapsedClassToSeries(Oe,me),c.size=c.size-E-this.margin;var Te=b.fillPath({seriesNumber:me,size:c.size,value:c.series[me]}),Ve=this.startAngle,ve=void 0,Pe=oe.negToZero(c.series[me]>100?100:c.series[me])/100,ht=Math.round(this.totalAngle*Pe)+this.startAngle,P=void 0;d.globals.dataChanged&&(ve=this.startAngle,P=Math.round(this.totalAngle*oe.negToZero(d.globals.previousPaths[me])/100)+ve),Math.abs(ht)+Math.abs(Ve)>360&&(ht-=.01),Math.abs(P)+Math.abs(ve)>360&&(P-=.01);var W=ht-Ve,q=Array.isArray(d.config.stroke.dashArray)?d.config.stroke.dashArray[me]:d.config.stroke.dashArray,ue=m.drawPath({d:"",stroke:Te,strokeWidth:E,fill:"none",fillOpacity:d.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+me,strokeDashArray:q});if(tn.setAttrs(ue.node,{"data:angle":W,"data:value":c.series[me]}),d.config.chart.dropShadow.enabled){var ye=d.config.chart.dropShadow;w.dropShadow(ue,ye,me)}if(w.setSelectionFilter(ue,0,me),this.addListeners(ue,this.radialDataLabels),Oe.add(ue),ue.attr({index:0,j:me}),this.barLabels.enabled){var nt=oe.polarToCartesian(c.centerX,c.centerY,c.size,Ve),Ft=this.barLabels.formatter(d.globals.seriesNames[me],{seriesIndex:me,w:d}),an=["apexcharts-radialbar-label"];this.barLabels.onClick||an.push("apexcharts-no-click");var hn=this.barLabels.useSeriesColors?d.globals.colors[me]:d.config.chart.foreColor;hn||(hn=d.config.chart.foreColor);var Jt=nt.x+this.barLabels.offsetX,wo=nt.y+this.barLabels.offsetY,Ro=m.drawText({x:Jt,y:wo,text:Ft,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:hn,cssClass:an.join(" ")});Ro.on("click",this.onBarLabelClick),Ro.attr({rel:me+1}),Ve!==0&&Ro.attr({"transform-origin":"".concat(Jt," ").concat(wo),transform:"rotate(".concat(Ve," 0 0)")}),Oe.add(Ro)}var sr=0;!this.initialAnim||d.globals.resized||d.globals.dataChanged||(sr=d.config.chart.animations.speed),d.globals.dataChanged&&(sr=d.config.chart.animations.dynamicAnimation.speed),this.animDur=sr/(1.2*c.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(ue,{centerX:c.centerX,centerY:c.centerY,endAngle:ht,startAngle:Ve,prevEndAngle:P,prevStartAngle:ve,size:c.size,i:me,totalItems:2,animBeginArr:this.animBeginArr,dur:sr,shouldSetPrevPaths:!0})}return{g:A,elHollow:$,dataLabels:ne}}},{key:"drawHollow",value:function(c){var d=new tn(this.ctx).drawCircle(2*c.size);return d.attr({class:"apexcharts-radialbar-hollow",cx:c.centerX,cy:c.centerY,r:c.size,fill:c.fill}),d}},{key:"drawHollowImage",value:function(c,d,m,b){var w=this.w,A=new Mr(this.ctx),E=oe.randomId(),M=w.config.plotOptions.radialBar.hollow.image;if(w.config.plotOptions.radialBar.hollow.imageClipped)A.clippedImgArea({width:m,height:m,image:M,patternID:"pattern".concat(w.globals.cuid).concat(E)}),b="url(#pattern".concat(w.globals.cuid).concat(E,")");else{var O=w.config.plotOptions.radialBar.hollow.imageWidth,L=w.config.plotOptions.radialBar.hollow.imageHeight;if(O===void 0&&L===void 0){var $=w.globals.dom.Paper.image(M,function(U){this.move(c.centerX-U.width/2+w.config.plotOptions.radialBar.hollow.imageOffsetX,c.centerY-U.height/2+w.config.plotOptions.radialBar.hollow.imageOffsetY)});d.add($)}else{var Y=w.globals.dom.Paper.image(M,function(U){this.move(c.centerX-O/2+w.config.plotOptions.radialBar.hollow.imageOffsetX,c.centerY-L/2+w.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(O,L)});d.add(Y)}}return b}},{key:"getStrokeWidth",value:function(c){var d=this.w;return c.size*(100-parseInt(d.config.plotOptions.radialBar.hollow.size,10))/100/(c.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(c){var d=parseInt(c.target.getAttribute("rel"),10)-1,m=this.barLabels.onClick,b=this.w;m&&m(b.globals.seriesNames[d],{w:b,seriesIndex:d})}}]),a}(),wl=function(C){ns(a,Za);var o=Fo(a);function a(){return gn(this,a),o.apply(this,arguments)}return rn(a,[{key:"draw",value:function(c,d){var m=this.w,b=new tn(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=c,this.seriesRangeStart=m.globals.seriesRangeStart,this.seriesRangeEnd=m.globals.seriesRangeEnd,this.barHelpers.initVariables(c);for(var w=b.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),A=0;A<c.length;A++){var E,M,O,L,$=void 0,Y=void 0,U=m.globals.comboCharts?d[A]:A,ne=this.barHelpers.getGroupIndex(U).columnGroupIndex,ae=b.group({class:"apexcharts-series",seriesName:oe.escapeString(m.globals.seriesNames[U]),rel:A+1,"data:realIndex":U});this.ctx.series.addCollapsedClassToSeries(ae,U),c[A].length>0&&(this.visibleI=this.visibleI+1);var le=0,me=0,Oe=0;this.yRatio.length>1&&(this.yaxisIndex=m.globals.seriesYAxisReverseMap[U][0],Oe=U);var Te=this.barHelpers.initialPositions();Y=Te.y,L=Te.zeroW,$=Te.x,me=Te.barWidth,le=Te.barHeight,E=Te.xDivision,M=Te.yDivision,O=Te.zeroH;for(var Ve=b.group({class:"apexcharts-datalabels","data:realIndex":U}),ve=b.group({class:"apexcharts-rangebar-goals-markers"}),Pe=0;Pe<m.globals.dataPoints;Pe++){var ht=this.barHelpers.getStrokeWidth(A,Pe,U),P=this.seriesRangeStart[A][Pe],W=this.seriesRangeEnd[A][Pe],q=null,ue=null,ye=null,nt={x:$,y:Y,strokeWidth:ht,elSeries:ae},Ft=this.seriesLen;if(m.config.plotOptions.bar.rangeBarGroupRows&&(Ft=1),m.config.series[A].data[Pe]===void 0)break;if(this.isHorizontal){ye=Y+le*this.visibleI;var an=(M-le*Ft)/2;if(m.config.series[A].data[Pe].x){var hn=this.detectOverlappingBars({i:A,j:Pe,barYPosition:ye,srty:an,barHeight:le,yDivision:M,initPositions:Te});le=hn.barHeight,ye=hn.barYPosition}me=(q=this.drawRangeBarPaths(Tt({indexes:{i:A,j:Pe,realIndex:U},barHeight:le,barYPosition:ye,zeroW:L,yDivision:M,y1:P,y2:W},nt))).barWidth}else{m.globals.isXNumeric&&($=(m.globals.seriesX[A][Pe]-m.globals.minX)/this.xRatio-me/2),ue=$+me*this.visibleI;var Jt=(E-me*Ft)/2;if(m.config.series[A].data[Pe].x){var wo=this.detectOverlappingBars({i:A,j:Pe,barXPosition:ue,srtx:Jt,barWidth:me,xDivision:E,initPositions:Te});me=wo.barWidth,ue=wo.barXPosition}le=(q=this.drawRangeColumnPaths(Tt({indexes:{i:A,j:Pe,realIndex:U,translationsIndex:Oe},barWidth:me,barXPosition:ue,zeroH:O,xDivision:E},nt))).barHeight}var Ro=this.barHelpers.drawGoalLine({barXPosition:q.barXPosition,barYPosition:ye,goalX:q.goalX,goalY:q.goalY,barHeight:le,barWidth:me});Ro&&ve.add(Ro),Y=q.y,$=q.x;var sr=this.barHelpers.getPathFillColor(c,A,Pe,U),qr=m.globals.stroke.colors[U];this.renderSeries({realIndex:U,pathFill:sr,lineFill:qr,j:Pe,i:A,x:$,y:Y,y1:P,y2:W,pathFrom:q.pathFrom,pathTo:q.pathTo,strokeWidth:ht,elSeries:ae,series:c,barHeight:le,barWidth:me,barXPosition:ue,barYPosition:ye,columnGroupIndex:ne,elDataLabelsWrap:Ve,elGoalsMarkers:ve,visibleSeries:this.visibleI,type:"rangebar"})}w.add(ae)}return w}},{key:"detectOverlappingBars",value:function(c){var d=c.i,m=c.j,b=c.barYPosition,w=c.barXPosition,A=c.srty,E=c.srtx,M=c.barHeight,O=c.barWidth,L=c.yDivision,$=c.xDivision,Y=c.initPositions,U=this.w,ne=[],ae=U.config.series[d].data[m].rangeName,le=U.config.series[d].data[m].x,me=Array.isArray(le)?le.join(" "):le,Oe=U.globals.labels.map(function(Ve){return Array.isArray(Ve)?Ve.join(" "):Ve}).indexOf(me),Te=U.globals.seriesRange[d].findIndex(function(Ve){return Ve.x===me&&Ve.overlaps.length>0});return this.isHorizontal?(b=U.config.plotOptions.bar.rangeBarGroupRows?A+L*Oe:A+M*this.visibleI+L*Oe,Te>-1&&!U.config.plotOptions.bar.rangeBarOverlap&&(ne=U.globals.seriesRange[d][Te].overlaps).indexOf(ae)>-1&&(b=(M=Y.barHeight/ne.length)*this.visibleI+L*(100-parseInt(this.barOptions.barHeight,10))/100/2+M*(this.visibleI+ne.indexOf(ae))+L*Oe)):(Oe>-1&&!U.globals.timescaleLabels.length&&(w=U.config.plotOptions.bar.rangeBarGroupRows?E+$*Oe:E+O*this.visibleI+$*Oe),Te>-1&&!U.config.plotOptions.bar.rangeBarOverlap&&(ne=U.globals.seriesRange[d][Te].overlaps).indexOf(ae)>-1&&(w=(O=Y.barWidth/ne.length)*this.visibleI+$*(100-parseInt(this.barOptions.barWidth,10))/100/2+O*(this.visibleI+ne.indexOf(ae))+$*Oe)),{barYPosition:b,barXPosition:w,barHeight:M,barWidth:O}}},{key:"drawRangeColumnPaths",value:function(c){var d=c.indexes,m=c.x,b=c.xDivision,w=c.barWidth,A=c.barXPosition,E=c.zeroH,M=this.w,O=d.i,L=d.j,$=d.realIndex,Y=d.translationsIndex,U=this.yRatio[Y],ne=this.getRangeValue($,L),ae=Math.min(ne.start,ne.end),le=Math.max(ne.start,ne.end);this.series[O][L]===void 0||this.series[O][L]===null?ae=E:(ae=E-ae/U,le=E-le/U);var me=Math.abs(le-ae),Oe=this.barHelpers.getColumnPaths({barXPosition:A,barWidth:w,y1:ae,y2:le,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:$,i:$,j:L,w:M});if(M.globals.isXNumeric){var Te=this.getBarXForNumericXAxis({x:m,j:L,realIndex:$,barWidth:w});m=Te.x,A=Te.barXPosition}else m+=b;return{pathTo:Oe.pathTo,pathFrom:Oe.pathFrom,barHeight:me,x:m,y:ne.start<0&&ne.end<0?ae:le,goalY:this.barHelpers.getGoalValues("y",null,E,O,L,Y),barXPosition:A}}},{key:"preventBarOverflow",value:function(c){var d=this.w;return c<0&&(c=0),c>d.globals.gridWidth&&(c=d.globals.gridWidth),c}},{key:"drawRangeBarPaths",value:function(c){var d=c.indexes,m=c.y,b=c.y1,w=c.y2,A=c.yDivision,E=c.barHeight,M=c.barYPosition,O=c.zeroW,L=this.w,$=d.realIndex,Y=d.j,U=this.preventBarOverflow(O+b/this.invertedYRatio),ne=this.preventBarOverflow(O+w/this.invertedYRatio),ae=this.getRangeValue($,Y),le=Math.abs(ne-U),me=this.barHelpers.getBarpaths({barYPosition:M,barHeight:E,x1:U,x2:ne,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:$,realIndex:$,j:Y,w:L});return L.globals.isXNumeric||(m+=A),{pathTo:me.pathTo,pathFrom:me.pathFrom,barWidth:le,x:ae.start<0&&ae.end<0?U:ne,goalX:this.barHelpers.getGoalValues("x",O,null,$,Y),y:m}}},{key:"getRangeValue",value:function(c,d){var m=this.w;return{start:m.globals.seriesRangeStart[c][d],end:m.globals.seriesRangeEnd[c][d]}}}]),a}(),Ki=function(){function C(o){gn(this,C),this.w=o.w,this.lineCtx=o}return rn(C,[{key:"sameValueSeriesFix",value:function(o,a){var c=this.w;if((c.config.fill.type==="gradient"||c.config.fill.type[o]==="gradient")&&new bs(this.lineCtx.ctx,c).seriesHaveSameValues(o)){var d=a[o].slice();d[d.length-1]=d[d.length-1]+1e-6,a[o]=d}return a}},{key:"calculatePoints",value:function(o){var a=o.series,c=o.realIndex,d=o.x,m=o.y,b=o.i,w=o.j,A=o.prevY,E=this.w,M=[],O=[];if(w===0){var L=this.lineCtx.categoryAxisCorrection+E.config.markers.offsetX;E.globals.isXNumeric&&(L=(E.globals.seriesX[c][0]-E.globals.minX)/this.lineCtx.xRatio+E.config.markers.offsetX),M.push(L),O.push(oe.isNumber(a[b][0])?A+E.config.markers.offsetY:null),M.push(d+E.config.markers.offsetX),O.push(oe.isNumber(a[b][w+1])?m+E.config.markers.offsetY:null)}else M.push(d+E.config.markers.offsetX),O.push(oe.isNumber(a[b][w+1])?m+E.config.markers.offsetY:null);return{x:M,y:O}}},{key:"checkPreviousPaths",value:function(o){for(var a=o.pathFromLine,c=o.pathFromArea,d=o.realIndex,m=this.w,b=0;b<m.globals.previousPaths.length;b++){var w=m.globals.previousPaths[b];(w.type==="line"||w.type==="area")&&w.paths.length>0&&parseInt(w.realIndex,10)===parseInt(d,10)&&(w.type==="line"?(this.lineCtx.appendPathFrom=!1,a=m.globals.previousPaths[b].paths[0].d):w.type==="area"&&(this.lineCtx.appendPathFrom=!1,c=m.globals.previousPaths[b].paths[0].d,m.config.stroke.show&&m.globals.previousPaths[b].paths[1]&&(a=m.globals.previousPaths[b].paths[1].d)))}return{pathFromLine:a,pathFromArea:c}}},{key:"determineFirstPrevY",value:function(o){var a,c,d,m=o.i,b=o.realIndex,w=o.series,A=o.prevY,E=o.lineYPosition,M=o.translationsIndex,O=this.w,L=O.config.chart.stacked&&!O.globals.comboCharts||O.config.chart.stacked&&O.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((a=this.w.config.series[b])===null||a===void 0?void 0:a.type)==="bar"||((c=this.w.config.series[b])===null||c===void 0?void 0:c.type)==="column");if(((d=w[m])===null||d===void 0?void 0:d[0])!==void 0)A=(E=L&&m>0?this.lineCtx.prevSeriesY[m-1][0]:this.lineCtx.zeroY)-w[m][0]/this.lineCtx.yRatio[M]+2*(this.lineCtx.isReversed?w[m][0]/this.lineCtx.yRatio[M]:0);else if(L&&m>0&&w[m][0]===void 0){for(var $=m-1;$>=0;$--)if(w[$][0]!==null&&w[$][0]!==void 0){A=E=this.lineCtx.prevSeriesY[$][0];break}}return{prevY:A,lineYPosition:E}}}]),C}(),_u=function(C){for(var o,a,c,d,m=function(M){for(var O=[],L=M[0],$=M[1],Y=O[0]=su(L,$),U=1,ne=M.length-1;U<ne;U++)L=$,$=M[U+1],O[U]=.5*(Y+(Y=su(L,$)));return O[U]=Y,O}(C),b=C.length-1,w=[],A=0;A<b;A++)c=su(C[A],C[A+1]),Math.abs(c)<1e-6?m[A]=m[A+1]=0:(d=(o=m[A]/c)*o+(a=m[A+1]/c)*a)>9&&(d=3*c/Math.sqrt(d),m[A]=d*o,m[A+1]=d*a);for(var E=0;E<=b;E++)d=(C[Math.min(b,E+1)][0]-C[Math.max(0,E-1)][0])/(6*(1+m[E]*m[E])),w.push([d||0,m[E]*d||0]);return w},nd=function(C){var o=_u(C),a=C[1],c=C[0],d=[],m=o[1],b=o[0];d.push(c,[c[0]+b[0],c[1]+b[1],a[0]-m[0],a[1]-m[1],a[0],a[1]]);for(var w=2,A=o.length;w<A;w++){var E=C[w],M=o[w];d.push([E[0]-M[0],E[1]-M[1],E[0],E[1]])}return d},Kh=function(C,o,a){var c=C.slice(o,a);if(o){if(a-o>1&&c[1].length<6){var d=c[0].length;c[1]=[2*c[0][d-2]-c[0][d-4],2*c[0][d-1]-c[0][d-3]].concat(c[1])}c[0]=c[0].slice(-2)}return c};function su(C,o){return(o[1]-C[1])/(o[0]-C[0])}var Vl=function(){function C(o,a,c){gn(this,C),this.ctx=o,this.w=o.w,this.xyRatios=a,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||c,this.scatter=new Fr(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Ki(this),this.markers=new Pa(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return rn(C,[{key:"draw",value:function(o,a,c,d){var m,b=this.w,w=new tn(this.ctx),A=b.globals.comboCharts?a:b.config.chart.type,E=w.group({class:"apexcharts-".concat(A,"-series apexcharts-plot-series")}),M=new bs(this.ctx,b);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,o=M.getLogSeries(o),this.yRatio=M.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var O=[],L=0;L<o.length;L++){o=this.lineHelpers.sameValueSeriesFix(L,o);var $=b.globals.comboCharts?c[L]:L,Y=this.yRatio.length>1?$:0;this._initSerieVariables(o,L,$);var U=[],ne=[],ae=[],le=b.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,$),b.globals.isXNumeric&&b.globals.seriesX.length>0&&(le=(b.globals.seriesX[$][0]-b.globals.minX)/this.xRatio),ae.push(le);var me,Oe=le,Te=void 0,Ve=Oe,ve=this.zeroY,Pe=this.zeroY;ve=this.lineHelpers.determineFirstPrevY({i:L,realIndex:$,series:o,prevY:ve,lineYPosition:0,translationsIndex:Y}).prevY,b.config.stroke.curve==="monotoneCubic"&&o[L][0]===null?U.push(null):U.push(ve),me=ve,A==="rangeArea"&&(Te=Pe=this.lineHelpers.determineFirstPrevY({i:L,realIndex:$,series:d,prevY:Pe,lineYPosition:0,translationsIndex:Y}).prevY,ne.push(U[0]!==null?Pe:null));var ht=this._calculatePathsFrom({type:A,series:o,i:L,realIndex:$,translationsIndex:Y,prevX:Ve,prevY:ve,prevY2:Pe}),P=[U[0]],W=[ne[0]],q={type:A,series:o,realIndex:$,translationsIndex:Y,i:L,x:le,y:1,pX:Oe,pY:me,pathsFrom:ht,linePaths:[],areaPaths:[],seriesIndex:c,lineYPosition:0,xArrj:ae,yArrj:U,y2Arrj:ne,seriesRangeEnd:d},ue=this._iterateOverDataPoints(Tt(Tt({},q),{},{iterations:A==="rangeArea"?o[L].length-1:void 0,isRangeStart:!0}));if(A==="rangeArea"){for(var ye=this._calculatePathsFrom({series:d,i:L,realIndex:$,prevX:Ve,prevY:Pe}),nt=this._iterateOverDataPoints(Tt(Tt({},q),{},{series:d,xArrj:[le],yArrj:P,y2Arrj:W,pY:Te,areaPaths:ue.areaPaths,pathsFrom:ye,iterations:d[L].length-1,isRangeStart:!1})),Ft=ue.linePaths.length/2,an=0;an<Ft;an++)ue.linePaths[an]=nt.linePaths[an+Ft]+ue.linePaths[an];ue.linePaths.splice(Ft),ue.pathFromLine=nt.pathFromLine+ue.pathFromLine}else ue.pathFromArea+="z";this._handlePaths({type:A,realIndex:$,i:L,paths:ue}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),O.push(this.elSeries)}if(((m=b.config.series[0])===null||m===void 0?void 0:m.zIndex)!==void 0&&O.sort(function(wo,Ro){return Number(wo.node.getAttribute("zIndex"))-Number(Ro.node.getAttribute("zIndex"))}),b.config.chart.stacked)for(var hn=O.length-1;hn>=0;hn--)E.add(O[hn]);else for(var Jt=0;Jt<O.length;Jt++)E.add(O[Jt]);return E}},{key:"_initSerieVariables",value:function(o,a,c){var d=this.w,m=new tn(this.ctx);this.xDivision=d.globals.gridWidth/(d.globals.dataPoints-(d.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(d.config.stroke.width)?d.config.stroke.width[c]:d.config.stroke.width;var b=0;this.yRatio.length>1&&(this.yaxisIndex=d.globals.seriesYAxisReverseMap[c],b=c),this.isReversed=d.config.yaxis[this.yaxisIndex]&&d.config.yaxis[this.yaxisIndex].reversed,this.zeroY=d.globals.gridHeight-this.baseLineY[b]-(this.isReversed?d.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[b]:0),this.areaBottomY=this.zeroY,(this.zeroY>d.globals.gridHeight||d.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=d.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=m.group({class:"apexcharts-series",zIndex:d.config.series[c].zIndex!==void 0?d.config.series[c].zIndex:c,seriesName:oe.escapeString(d.globals.seriesNames[c])}),this.elPointsMain=m.group({class:"apexcharts-series-markers-wrap","data:realIndex":c}),this.elDataLabelsWrap=m.group({class:"apexcharts-datalabels","data:realIndex":c});var w=o[a].length===d.globals.dataPoints;this.elSeries.attr({"data:longestSeries":w,rel:a+1,"data:realIndex":c}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(o){var a,c,d,m,b=o.type,w=o.series,A=o.i,E=o.realIndex,M=o.translationsIndex,O=o.prevX,L=o.prevY,$=o.prevY2,Y=this.w,U=new tn(this.ctx);if(w[A][0]===null){for(var ne=0;ne<w[A].length;ne++)if(w[A][ne]!==null){O=this.xDivision*ne,L=this.zeroY-w[A][ne]/this.yRatio[M],a=U.move(O,L),c=U.move(O,this.areaBottomY);break}}else a=U.move(O,L),b==="rangeArea"&&(a=U.move(O,$)+U.line(O,L)),c=U.move(O,this.areaBottomY)+U.line(O,L);if(d=U.move(0,this.areaBottomY)+U.line(0,this.areaBottomY),m=U.move(0,this.areaBottomY)+U.line(0,this.areaBottomY),Y.globals.previousPaths.length>0){var ae=this.lineHelpers.checkPreviousPaths({pathFromLine:d,pathFromArea:m,realIndex:E});d=ae.pathFromLine,m=ae.pathFromArea}return{prevX:O,prevY:L,linePath:a,areaPath:c,pathFromLine:d,pathFromArea:m}}},{key:"_handlePaths",value:function(o){var a=o.type,c=o.realIndex,d=o.i,m=o.paths,b=this.w,w=new tn(this.ctx),A=new Mr(this.ctx);this.prevSeriesY.push(m.yArrj),b.globals.seriesXvalues[c]=m.xArrj,b.globals.seriesYvalues[c]=m.yArrj;var E=b.config.forecastDataPoints;if(E.count>0&&a!=="rangeArea"){var M=b.globals.seriesXvalues[c][b.globals.seriesXvalues[c].length-E.count-1],O=w.drawRect(M,0,b.globals.gridWidth,b.globals.gridHeight,0);b.globals.dom.elForecastMask.appendChild(O.node);var L=w.drawRect(0,0,M,b.globals.gridHeight,0);b.globals.dom.elNonForecastMask.appendChild(L.node)}this.pointsChart||b.globals.delayedElements.push({el:this.elPointsMain.node,index:c});var $={i:d,realIndex:c,animationDelay:d,initialSpeed:b.config.chart.animations.speed,dataChangeSpeed:b.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(a)};if(a==="area")for(var Y=A.fillPath({seriesNumber:c}),U=0;U<m.areaPaths.length;U++){var ne=w.renderPaths(Tt(Tt({},$),{},{pathFrom:m.pathFromArea,pathTo:m.areaPaths[U],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:Y}));this.elSeries.add(ne)}if(b.config.stroke.show&&!this.pointsChart){var ae=null;if(a==="line")ae=A.fillPath({seriesNumber:c,i:d});else if(b.config.stroke.fill.type==="solid")ae=b.globals.stroke.colors[c];else{var le=b.config.fill;b.config.fill=b.config.stroke.fill,ae=A.fillPath({seriesNumber:c,i:d}),b.config.fill=le}for(var me=0;me<m.linePaths.length;me++){var Oe=ae;a==="rangeArea"&&(Oe=A.fillPath({seriesNumber:c}));var Te=Tt(Tt({},$),{},{pathFrom:m.pathFromLine,pathTo:m.linePaths[me],stroke:ae,strokeWidth:this.strokeWidth,strokeLineCap:b.config.stroke.lineCap,fill:a==="rangeArea"?Oe:"none"}),Ve=w.renderPaths(Te);if(this.elSeries.add(Ve),Ve.attr("fill-rule","evenodd"),E.count>0&&a!=="rangeArea"){var ve=w.renderPaths(Te);ve.node.setAttribute("stroke-dasharray",E.dashArray),E.strokeWidth&&ve.node.setAttribute("stroke-width",E.strokeWidth),this.elSeries.add(ve),ve.attr("clip-path","url(#forecastMask".concat(b.globals.cuid,")")),Ve.attr("clip-path","url(#nonForecastMask".concat(b.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(o){var a,c,d=this,m=o.type,b=o.series,w=o.iterations,A=o.realIndex,E=o.translationsIndex,M=o.i,O=o.x,L=o.y,$=o.pX,Y=o.pY,U=o.pathsFrom,ne=o.linePaths,ae=o.areaPaths,le=o.seriesIndex,me=o.lineYPosition,Oe=o.xArrj,Te=o.yArrj,Ve=o.y2Arrj,ve=o.isRangeStart,Pe=o.seriesRangeEnd,ht=this.w,P=new tn(this.ctx),W=this.yRatio,q=U.prevY,ue=U.linePath,ye=U.areaPath,nt=U.pathFromLine,Ft=U.pathFromArea,an=oe.isNumber(ht.globals.minYArr[A])?ht.globals.minYArr[A]:ht.globals.minY;w||(w=ht.globals.dataPoints>1?ht.globals.dataPoints-1:ht.globals.dataPoints);var hn=function(al,Tr){return Tr-al/W[E]+2*(d.isReversed?al/W[E]:0)},Jt=L,wo=ht.config.chart.stacked&&!ht.globals.comboCharts||ht.config.chart.stacked&&ht.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((a=this.w.config.series[A])===null||a===void 0?void 0:a.type)==="bar"||((c=this.w.config.series[A])===null||c===void 0?void 0:c.type)==="column"),Ro=ht.config.stroke.curve;Array.isArray(Ro)&&(Ro=Array.isArray(le)?Ro[le[M]]:Ro[M]);for(var sr,qr=0,$r=0;$r<w;$r++){var Ii=b[M][$r+1]===void 0||b[M][$r+1]===null;if(ht.globals.isXNumeric){var Vs=ht.globals.seriesX[A][$r+1];ht.globals.seriesX[A][$r+1]===void 0&&(Vs=ht.globals.seriesX[A][w-1]),O=(Vs-ht.globals.minX)/this.xRatio}else O+=this.xDivision;wo?M>0&&ht.globals.collapsedSeries.length<ht.config.series.length-1?me=this.prevSeriesY[function(al){for(var Tr=al;Tr>0;Tr--){if(!(ht.globals.collapsedSeriesIndices.indexOf((le==null?void 0:le[Tr])||Tr)>-1))return Tr;Tr--}return 0}(M-1)][$r+1]:me=this.zeroY:me=this.zeroY,Ii?L=hn(an,me):(L=hn(b[M][$r+1],me),m==="rangeArea"&&(Jt=hn(Pe[M][$r+1],me))),Oe.push(O),!Ii||ht.config.stroke.curve!=="smooth"&&ht.config.stroke.curve!=="monotoneCubic"?(Te.push(L),Ve.push(Jt)):(Te.push(null),Ve.push(null));var Ar=this.lineHelpers.calculatePoints({series:b,x:O,y:L,realIndex:A,i:M,j:$r,prevY:q}),ma=this._createPaths({type:m,series:b,i:M,realIndex:A,j:$r,x:O,y:L,y2:Jt,xArrj:Oe,yArrj:Te,y2Arrj:Ve,pX:$,pY:Y,pathState:qr,segmentStartX:sr,linePath:ue,areaPath:ye,linePaths:ne,areaPaths:ae,curve:Ro,isRangeStart:ve});ae=ma.areaPaths,ne=ma.linePaths,$=ma.pX,Y=ma.pY,qr=ma.pathState,sr=ma.segmentStartX,ye=ma.areaPath,ue=ma.linePath,!this.appendPathFrom||ht.globals.hasNullValues||Ro==="monotoneCubic"&&m==="rangeArea"||(nt+=P.line(O,this.areaBottomY),Ft+=P.line(O,this.areaBottomY)),this.handleNullDataPoints(b,Ar,M,$r,A),this._handleMarkersAndLabels({type:m,pointsPos:Ar,i:M,j:$r,realIndex:A,isRangeStart:ve})}return{yArrj:Te,xArrj:Oe,pathFromArea:Ft,areaPaths:ae,pathFromLine:nt,linePaths:ne,linePath:ue,areaPath:ye}}},{key:"_handleMarkersAndLabels",value:function(o){var a=o.type,c=o.pointsPos,d=o.isRangeStart,m=o.i,b=o.j,w=o.realIndex,A=this.w,E=new Nr(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,b,{realIndex:w,pointsPos:c,zRatio:this.zRatio,elParent:this.elPointsMain});else{A.globals.series[m].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var M=this.markers.plotChartMarkers(c,w,b+1);M!==null&&this.elPointsMain.add(M)}var O=E.drawDataLabel({type:a,isRangeStart:d,pos:c,i:w,j:b+1});O!==null&&this.elDataLabelsWrap.add(O)}},{key:"_createPaths",value:function(o){var a=o.type,c=o.series,d=o.i;o.realIndex;var m,b=o.j,w=o.x,A=o.y,E=o.xArrj,M=o.yArrj,O=o.y2,L=o.y2Arrj,$=o.pX,Y=o.pY,U=o.pathState,ne=o.segmentStartX,ae=o.linePath,le=o.areaPath,me=o.linePaths,Oe=o.areaPaths,Te=o.curve,Ve=o.isRangeStart,ve=new tn(this.ctx),Pe=this.areaBottomY,ht=a==="rangeArea",P=a==="rangeArea"&&Ve;switch(Te){case"monotoneCubic":var W=Ve?M:L;switch(U){case 0:if(W[b+1]===null)break;U=1;case 1:if(!(ht?E.length===c[d].length:b===c[d].length-2))break;case 2:var q=Ve?E:E.slice().reverse(),ue=Ve?W:W.slice().reverse(),ye=(m=ue,q.map(function(Vs,Ar){return[Vs,m[Ar]]}).filter(function(Vs){return Vs[1]!==null})),nt=ye.length>1?nd(ye):ye,Ft=[];ht&&(P?Oe=ye:Ft=Oe.reverse());var an=0,hn=0;if(function(Vs,Ar){for(var ma=function(za){var il=[],mi=0;return za.forEach(function(fo){fo!==null?mi++:mi>0&&(il.push(mi),mi=0)}),mi>0&&il.push(mi),il}(Vs),al=[],Tr=0,pc=0;Tr<ma.length;pc+=ma[Tr++])al[Tr]=Kh(Ar,pc,pc+ma[Tr]);return al}(ue,nt).forEach(function(Vs){an++;var Ar=function(Tr){for(var pc="",za=0;za<Tr.length;za++){var il=Tr[za],mi=il.length;mi>4?(pc+="C".concat(il[0],", ").concat(il[1]),pc+=", ".concat(il[2],", ").concat(il[3]),pc+=", ".concat(il[4],", ").concat(il[5])):mi>2&&(pc+="S".concat(il[0],", ").concat(il[1]),pc+=", ".concat(il[2],", ").concat(il[3]))}return pc}(Vs),ma=hn,al=(hn+=Vs.length)-1;P?ae=ve.move(ye[ma][0],ye[ma][1])+Ar:ht?ae=ve.move(Ft[ma][0],Ft[ma][1])+ve.line(ye[ma][0],ye[ma][1])+Ar+ve.line(Ft[al][0],Ft[al][1]):(ae=ve.move(ye[ma][0],ye[ma][1])+Ar,le=ae+ve.line(ye[al][0],Pe)+ve.line(ye[ma][0],Pe)+"z",Oe.push(le)),me.push(ae)}),ht&&an>1&&!P){var Jt=me.slice(an).reverse();me.splice(an),Jt.forEach(function(Vs){return me.push(Vs)})}U=0}break;case"smooth":var wo=.35*(w-$);if(c[d][b]===null)U=0;else switch(U){case 0:if(ne=$,ae=P?ve.move($,L[b])+ve.line($,Y):ve.move($,Y),le=ve.move($,Y),c[d][b+1]===null||c[d][b+1]===void 0){me.push(ae),Oe.push(le);break}if(U=1,b<c[d].length-2){var Ro=ve.curve($+wo,Y,w-wo,A,w,A);ae+=Ro,le+=Ro;break}case 1:if(c[d][b+1]===null)ae+=P?ve.line($,O):ve.move($,Y),le+=ve.line($,Pe)+ve.line(ne,Pe)+"z",me.push(ae),Oe.push(le),U=-1;else{var sr=ve.curve($+wo,Y,w-wo,A,w,A);ae+=sr,le+=sr,b>=c[d].length-2&&(P&&(ae+=ve.curve(w,A,w,A,w,O)+ve.move(w,O)),le+=ve.curve(w,A,w,A,w,Pe)+ve.line(ne,Pe)+"z",me.push(ae),Oe.push(le),U=-1)}}$=w,Y=A;break;default:var qr=function(Vs,Ar,ma){var al=[];switch(Vs){case"stepline":al=ve.line(Ar,null,"H")+ve.line(null,ma,"V");break;case"linestep":al=ve.line(null,ma,"V")+ve.line(Ar,null,"H");break;case"straight":al=ve.line(Ar,ma)}return al};if(c[d][b]===null)U=0;else switch(U){case 0:if(ne=$,ae=P?ve.move($,L[b])+ve.line($,Y):ve.move($,Y),le=ve.move($,Y),c[d][b+1]===null||c[d][b+1]===void 0){me.push(ae),Oe.push(le);break}if(U=1,b<c[d].length-2){var $r=qr(Te,w,A);ae+=$r,le+=$r;break}case 1:if(c[d][b+1]===null)ae+=P?ve.line($,O):ve.move($,Y),le+=ve.line($,Pe)+ve.line(ne,Pe)+"z",me.push(ae),Oe.push(le),U=-1;else{var Ii=qr(Te,w,A);ae+=Ii,le+=Ii,b>=c[d].length-2&&(P&&(ae+=ve.line(w,O)),le+=ve.line(w,Pe)+ve.line(ne,Pe)+"z",me.push(ae),Oe.push(le),U=-1)}}$=w,Y=A}return{linePaths:me,areaPaths:Oe,pX:$,pY:Y,pathState:U,segmentStartX:ne,linePath:ae,areaPath:le}}},{key:"handleNullDataPoints",value:function(o,a,c,d,m){var b=this.w;if(o[c][d]===null&&b.config.markers.showNullDataPoints||o[c].length===1){var w=this.strokeWidth-b.config.markers.strokeWidth/2;w>0||(w=0);var A=this.markers.plotChartMarkers(a,m,d+1,w,!0);A!==null&&this.elPointsMain.add(A)}}}]),C}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function C(w,A,E,M){this.xoffset=w,this.yoffset=A,this.height=M,this.width=E,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(O){var L,$=[],Y=this.xoffset,U=this.yoffset,ne=m(O)/this.height,ae=m(O)/this.width;if(this.width>=this.height)for(L=0;L<O.length;L++)$.push([Y,U,Y+ne,U+O[L]/ne]),U+=O[L]/ne;else for(L=0;L<O.length;L++)$.push([Y,U,Y+O[L]/ae,U+ae]),Y+=O[L]/ae;return $},this.cutArea=function(O){var L;if(this.width>=this.height){var $=O/this.height,Y=this.width-$;L=new C(this.xoffset+$,this.yoffset,Y,this.height)}else{var U=O/this.width,ne=this.height-U;L=new C(this.xoffset,this.yoffset+U,this.width,ne)}return L}}function o(w,A,E,M,O){M=M===void 0?0:M,O=O===void 0?0:O;var L=a(function($,Y){var U,ne=[],ae=Y/m($);for(U=0;U<$.length;U++)ne[U]=$[U]*ae;return ne}(w,A*E),[],new C(M,O,A,E),[]);return function($){var Y,U,ne=[];for(Y=0;Y<$.length;Y++)for(U=0;U<$[Y].length;U++)ne.push($[Y][U]);return ne}(L)}function a(w,A,E,M){var O,L,$;if(w.length!==0)return O=E.shortestEdge(),function(Y,U,ne){var ae;if(Y.length===0)return!0;(ae=Y.slice()).push(U);var le=c(Y,ne),me=c(ae,ne);return le>=me}(A,L=w[0],O)?(A.push(L),a(w.slice(1),A,E,M)):($=E.cutArea(m(A),M),M.push(E.getCoordinates(A)),a(w,[],$,M)),M;M.push(E.getCoordinates(A))}function c(w,A){var E=Math.min.apply(Math,w),M=Math.max.apply(Math,w),O=m(w);return Math.max(Math.pow(A,2)*M/Math.pow(O,2),Math.pow(O,2)/(Math.pow(A,2)*E))}function d(w){return w&&w.constructor===Array}function m(w){var A,E=0;for(A=0;A<w.length;A++)E+=w[A];return E}function b(w){var A,E=0;if(d(w[0]))for(A=0;A<w.length;A++)E+=b(w[A]);else E=m(w);return E}return function w(A,E,M,O,L){O=O===void 0?0:O,L=L===void 0?0:L;var $,Y,U=[],ne=[];if(d(A[0])){for(Y=0;Y<A.length;Y++)U[Y]=b(A[Y]);for($=o(U,E,M,O,L),Y=0;Y<A.length;Y++)ne.push(w(A[Y],$[Y][2]-$[Y][0],$[Y][3]-$[Y][1],$[Y][0],$[Y][1]))}else ne=o(A,E,M,O,L);return ne}}();var od=function(){function C(o,a){gn(this,C),this.ctx=o,this.w=o.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new ed(o),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return rn(C,[{key:"draw",value:function(o){var a=this,c=this.w,d=new tn(this.ctx),m=new Mr(this.ctx),b=d.group({class:"apexcharts-treemap"});if(c.globals.noData)return b;var w=[];return o.forEach(function(A){var E=A.map(function(M){return Math.abs(M)});w.push(E)}),this.negRange=this.helpers.checkColorRange(),c.config.series.forEach(function(A,E){A.data.forEach(function(M){Array.isArray(a.labels[E])||(a.labels[E]=[]),a.labels[E].push(M.x)})}),window.TreemapSquared.generate(w,c.globals.gridWidth,c.globals.gridHeight).forEach(function(A,E){var M=d.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:oe.escapeString(c.globals.seriesNames[E]),rel:E+1,"data:realIndex":E});if(c.config.chart.dropShadow.enabled){var O=c.config.chart.dropShadow;new Ya(a.ctx).dropShadow(b,O,E)}var L=d.group({class:"apexcharts-data-labels"});A.forEach(function($,Y){var U=$[0],ne=$[1],ae=$[2],le=$[3],me=d.drawRect(U,ne,ae-U,le-ne,c.config.plotOptions.treemap.borderRadius,"#fff",1,a.strokeWidth,c.config.plotOptions.treemap.useFillColorAsStroke?Te:c.globals.stroke.colors[E]);me.attr({cx:U,cy:ne,index:E,i:E,j:Y,width:ae-U,height:le-ne});var Oe=a.helpers.getShadeColor(c.config.chart.type,E,Y,a.negRange),Te=Oe.color,Ve=m.fillPath({color:Te,seriesNumber:E,dataPointIndex:Y});me.node.classList.add("apexcharts-treemap-rect"),me.attr({fill:Ve}),a.helpers.addListeners(me);var ve={x:U+(ae-U)/2,y:ne+(le-ne)/2,width:0,height:0},Pe={x:U,y:ne,width:ae-U,height:le-ne};if(c.config.chart.animations.enabled&&!c.globals.dataChanged){var ht=1;c.globals.resized||(ht=c.config.chart.animations.speed),a.animateTreemap(me,ve,Pe,ht)}if(c.globals.dataChanged){var P=1;a.dynamicAnim.enabled&&c.globals.shouldAnimate&&(P=a.dynamicAnim.speed,c.globals.previousPaths[E]&&c.globals.previousPaths[E][Y]&&c.globals.previousPaths[E][Y].rect&&(ve=c.globals.previousPaths[E][Y].rect),a.animateTreemap(me,ve,Pe,P))}var W=a.getFontSize($),q=c.config.dataLabels.formatter(a.labels[E][Y],{value:c.globals.series[E][Y],seriesIndex:E,dataPointIndex:Y,w:c});c.config.plotOptions.treemap.dataLabels.format==="truncate"&&(W=parseInt(c.config.dataLabels.style.fontSize,10),q=a.truncateLabels(q,W,U,ne,ae,le));var ue=null;c.globals.series[E][Y]&&(ue=a.helpers.calculateDataLabels({text:q,x:(U+ae)/2,y:(ne+le)/2+a.strokeWidth/2+W/3,i:E,j:Y,colorProps:Oe,fontSize:W,series:o})),c.config.dataLabels.enabled&&ue&&a.rotateToFitLabel(ue,W,q,U,ne,ae,le),M.add(me),ue!==null&&M.add(ue)}),M.add(L),b.add(M)}),b}},{key:"getFontSize",value:function(o){var a=this.w,c=function d(m){var b,w=0;if(Array.isArray(m[0]))for(b=0;b<m.length;b++)w+=d(m[b]);else for(b=0;b<m.length;b++)w+=m[b].length;return w}(this.labels)/function d(m){var b,w=0;if(Array.isArray(m[0]))for(b=0;b<m.length;b++)w+=d(m[b]);else for(b=0;b<m.length;b++)w+=1;return w}(this.labels);return function(d,m){var b=d*m,w=Math.pow(b,.5);return Math.min(w/c,parseInt(a.config.dataLabels.style.fontSize,10))}(o[2]-o[0],o[3]-o[1])}},{key:"rotateToFitLabel",value:function(o,a,c,d,m,b,w){var A=new tn(this.ctx),E=A.getTextRects(c,a);if(E.width+this.w.config.stroke.width+5>b-d&&E.width<=w-m){var M=A.rotateAroundCenter(o.node);o.node.setAttribute("transform","rotate(-90 ".concat(M.x," ").concat(M.y,") translate(").concat(E.height/3,")"))}}},{key:"truncateLabels",value:function(o,a,c,d,m,b){var w=new tn(this.ctx),A=w.getTextRects(o,a).width+this.w.config.stroke.width+5>m-c&&b-d>m-c?b-d:m-c,E=w.getTextBasedOnMaxWidth({text:o,maxWidth:A,fontSize:a});return o.length!==E.length&&A/a<5?"":E}},{key:"animateTreemap",value:function(o,a,c,d){var m=new Wt(this.ctx);m.animateRect(o,{x:a.x,y:a.y,width:a.width,height:a.height},{x:c.x,y:c.y,width:c.width,height:c.height},d,function(){m.animationCompleted(o)})}}]),C}(),Ig=86400,Jh=10/Ig,Fg=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return rn(C,[{key:"calculateTimeScaleTicks",value:function(o,a){var c=this,d=this.w;if(d.globals.allSeriesCollapsed)return d.globals.labels=[],d.globals.timescaleLabels=[],[];var m=new ja(this.ctx),b=(a-o)/864e5;this.determineInterval(b),d.globals.disableZoomIn=!1,d.globals.disableZoomOut=!1,b<Jh?d.globals.disableZoomIn=!0:b>5e4&&(d.globals.disableZoomOut=!0);var w=m.getTimeUnitsfromTimestamp(o,a,this.utc),A=d.globals.gridWidth/b,E=A/24,M=E/60,O=M/60,L=Math.floor(24*b),$=Math.floor(1440*b),Y=Math.floor(b*Ig),U=Math.floor(b),ne=Math.floor(b/30),ae=Math.floor(b/365),le={minMillisecond:w.minMillisecond,minSecond:w.minSecond,minMinute:w.minMinute,minHour:w.minHour,minDate:w.minDate,minMonth:w.minMonth,minYear:w.minYear},me={firstVal:le,currentMillisecond:le.minMillisecond,currentSecond:le.minSecond,currentMinute:le.minMinute,currentHour:le.minHour,currentMonthDate:le.minDate,currentDate:le.minDate,currentMonth:le.minMonth,currentYear:le.minYear,daysWidthOnXAxis:A,hoursWidthOnXAxis:E,minutesWidthOnXAxis:M,secondsWidthOnXAxis:O,numberOfSeconds:Y,numberOfMinutes:$,numberOfHours:L,numberOfDays:U,numberOfMonths:ne,numberOfYears:ae};switch(this.tickInterval){case"years":this.generateYearScale(me);break;case"months":case"half_year":this.generateMonthScale(me);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(me);break;case"hours":this.generateHourScale(me);break;case"minutes_fives":case"minutes":this.generateMinuteScale(me);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(me)}var Oe=this.timeScaleArray.map(function(Te){var Ve={position:Te.position,unit:Te.unit,year:Te.year,day:Te.day?Te.day:1,hour:Te.hour?Te.hour:0,month:Te.month+1};return Te.unit==="month"?Tt(Tt({},Ve),{},{day:1,value:Te.value+1}):Te.unit==="day"||Te.unit==="hour"?Tt(Tt({},Ve),{},{value:Te.value}):Te.unit==="minute"?Tt(Tt({},Ve),{},{value:Te.value,minute:Te.value}):Te.unit==="second"?Tt(Tt({},Ve),{},{value:Te.value,minute:Te.minute,second:Te.second}):Te});return Oe.filter(function(Te){var Ve=1,ve=Math.ceil(d.globals.gridWidth/120),Pe=Te.value;d.config.xaxis.tickAmount!==void 0&&(ve=d.config.xaxis.tickAmount),Oe.length>ve&&(Ve=Math.floor(Oe.length/ve));var ht=!1,P=!1;switch(c.tickInterval){case"years":Te.unit==="year"&&(ht=!0);break;case"half_year":Ve=7,Te.unit==="year"&&(ht=!0);break;case"months":Ve=1,Te.unit==="year"&&(ht=!0);break;case"months_fortnight":Ve=15,Te.unit!=="year"&&Te.unit!=="month"||(ht=!0),Pe===30&&(P=!0);break;case"months_days":Ve=10,Te.unit==="month"&&(ht=!0),Pe===30&&(P=!0);break;case"week_days":Ve=8,Te.unit==="month"&&(ht=!0);break;case"days":Ve=1,Te.unit==="month"&&(ht=!0);break;case"hours":Te.unit==="day"&&(ht=!0);break;case"minutes_fives":case"seconds_fives":Pe%5!=0&&(P=!0);break;case"seconds_tens":Pe%10!=0&&(P=!0)}if(c.tickInterval==="hours"||c.tickInterval==="minutes_fives"||c.tickInterval==="seconds_tens"||c.tickInterval==="seconds_fives"){if(!P)return!0}else if((Pe%Ve==0||ht)&&!P)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(o,a){var c=this.w,d=this.formatDates(o),m=this.removeOverlappingTS(d);c.globals.timescaleLabels=m.slice(),new fc(this.ctx).plotCoords()}},{key:"determineInterval",value:function(o){var a=24*o,c=60*a;switch(!0){case o/365>5:this.tickInterval="years";break;case o>800:this.tickInterval="half_year";break;case o>180:this.tickInterval="months";break;case o>90:this.tickInterval="months_fortnight";break;case o>60:this.tickInterval="months_days";break;case o>30:this.tickInterval="week_days";break;case o>2:this.tickInterval="days";break;case a>2.4:this.tickInterval="hours";break;case c>15:this.tickInterval="minutes_fives";break;case c>5:this.tickInterval="minutes";break;case c>1:this.tickInterval="seconds_tens";break;case 60*c>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(o){var a=o.firstVal,c=o.currentMonth,d=o.currentYear,m=o.daysWidthOnXAxis,b=o.numberOfYears,w=a.minYear,A=0,E=new ja(this.ctx),M="year";if(a.minDate>1||a.minMonth>0){var O=E.determineRemainingDaysOfYear(a.minYear,a.minMonth,a.minDate);A=(E.determineDaysOfYear(a.minYear)-O+1)*m,w=a.minYear+1,this.timeScaleArray.push({position:A,value:w,unit:M,year:w,month:oe.monthMod(c+1)})}else a.minDate===1&&a.minMonth===0&&this.timeScaleArray.push({position:A,value:w,unit:M,year:d,month:oe.monthMod(c+1)});for(var L=w,$=A,Y=0;Y<b;Y++)L++,$=E.determineDaysOfYear(L-1)*m+$,this.timeScaleArray.push({position:$,value:L,unit:M,year:L,month:1})}},{key:"generateMonthScale",value:function(o){var a=o.firstVal,c=o.currentMonthDate,d=o.currentMonth,m=o.currentYear,b=o.daysWidthOnXAxis,w=o.numberOfMonths,A=d,E=0,M=new ja(this.ctx),O="month",L=0;if(a.minDate>1){E=(M.determineDaysOfMonths(d+1,a.minYear)-c+1)*b,A=oe.monthMod(d+1);var $=m+L,Y=oe.monthMod(A),U=A;A===0&&(O="year",U=$,Y=1,$+=L+=1),this.timeScaleArray.push({position:E,value:U,unit:O,year:$,month:Y})}else this.timeScaleArray.push({position:E,value:A,unit:O,year:m,month:oe.monthMod(d)});for(var ne=A+1,ae=E,le=0,me=1;le<w;le++,me++){(ne=oe.monthMod(ne))===0?(O="year",L+=1):O="month";var Oe=this._getYear(m,ne,L);ae=M.determineDaysOfMonths(ne,Oe)*b+ae;var Te=ne===0?Oe:ne;this.timeScaleArray.push({position:ae,value:Te,unit:O,year:Oe,month:ne===0?1:ne}),ne++}}},{key:"generateDayScale",value:function(o){var a=o.firstVal,c=o.currentMonth,d=o.currentYear,m=o.hoursWidthOnXAxis,b=o.numberOfDays,w=new ja(this.ctx),A="day",E=a.minDate+1,M=E,O=function(me,Oe,Te){return me>w.determineDaysOfMonths(Oe+1,Te)&&(M=1,A="month",$=Oe+=1),Oe},L=(24-a.minHour)*m,$=E,Y=O(M,c,d);a.minHour===0&&a.minDate===1?(L=0,$=oe.monthMod(a.minMonth),A="month",M=a.minDate):a.minDate!==1&&a.minHour===0&&a.minMinute===0&&(L=0,E=a.minDate,$=E,Y=O(M=E,c,d)),this.timeScaleArray.push({position:L,value:$,unit:A,year:this._getYear(d,Y,0),month:oe.monthMod(Y),day:M});for(var U=L,ne=0;ne<b;ne++){A="day",Y=O(M+=1,Y,this._getYear(d,Y,0));var ae=this._getYear(d,Y,0);U=24*m+U;var le=M===1?oe.monthMod(Y):M;this.timeScaleArray.push({position:U,value:le,unit:A,year:ae,month:oe.monthMod(Y),day:le})}}},{key:"generateHourScale",value:function(o){var a=o.firstVal,c=o.currentDate,d=o.currentMonth,m=o.currentYear,b=o.minutesWidthOnXAxis,w=o.numberOfHours,A=new ja(this.ctx),E="hour",M=function(Ve,ve){return Ve>A.determineDaysOfMonths(ve+1,m)&&(ne=1,ve+=1),{month:ve,date:ne}},O=function(Ve,ve){return Ve>A.determineDaysOfMonths(ve+1,m)?ve+=1:ve},L=60-(a.minMinute+a.minSecond/60),$=L*b,Y=a.minHour+1,U=Y;L===60&&($=0,U=Y=a.minHour);var ne=c;U>=24&&(U=0,E="day",Y=ne+=1);var ae=M(ne,d).month;ae=O(ne,ae),this.timeScaleArray.push({position:$,value:Y,unit:E,day:ne,hour:U,year:m,month:oe.monthMod(ae)}),U++;for(var le=$,me=0;me<w;me++){E="hour",U>=24&&(U=0,E="day",ae=M(ne+=1,ae).month,ae=O(ne,ae));var Oe=this._getYear(m,ae,0);le=60*b+le;var Te=U===0?ne:U;this.timeScaleArray.push({position:le,value:Te,unit:E,hour:U,day:ne,year:Oe,month:oe.monthMod(ae)}),U++}}},{key:"generateMinuteScale",value:function(o){for(var a=o.currentMillisecond,c=o.currentSecond,d=o.currentMinute,m=o.currentHour,b=o.currentDate,w=o.currentMonth,A=o.currentYear,E=o.minutesWidthOnXAxis,M=o.secondsWidthOnXAxis,O=o.numberOfMinutes,L=d+1,$=b,Y=w,U=A,ne=m,ae=(60-c-a/1e3)*M,le=0;le<O;le++)L>=60&&(L=0,(ne+=1)===24&&(ne=0)),this.timeScaleArray.push({position:ae,value:L,unit:"minute",hour:ne,minute:L,day:$,year:this._getYear(U,Y,0),month:oe.monthMod(Y)}),ae+=E,L++}},{key:"generateSecondScale",value:function(o){for(var a=o.currentMillisecond,c=o.currentSecond,d=o.currentMinute,m=o.currentHour,b=o.currentDate,w=o.currentMonth,A=o.currentYear,E=o.secondsWidthOnXAxis,M=o.numberOfSeconds,O=c+1,L=d,$=b,Y=w,U=A,ne=m,ae=(1e3-a)/1e3*E,le=0;le<M;le++)O>=60&&(O=0,++L>=60&&(L=0,++ne===24&&(ne=0))),this.timeScaleArray.push({position:ae,value:O,unit:"second",hour:ne,minute:L,second:O,day:$,year:this._getYear(U,Y,0),month:oe.monthMod(Y)}),ae+=E,O++}},{key:"createRawDateString",value:function(o,a){var c=o.year;return o.month===0&&(o.month=1),c+="-"+("0"+o.month.toString()).slice(-2),o.unit==="day"?c+=o.unit==="day"?"-"+("0"+a).slice(-2):"-01":c+="-"+("0"+(o.day?o.day:"1")).slice(-2),o.unit==="hour"?c+=o.unit==="hour"?"T"+("0"+a).slice(-2):"T00":c+="T"+("0"+(o.hour?o.hour:"0")).slice(-2),o.unit==="minute"?c+=":"+("0"+a).slice(-2):c+=":"+(o.minute?("0"+o.minute).slice(-2):"00"),o.unit==="second"?c+=":"+("0"+a).slice(-2):c+=":00",this.utc&&(c+=".000Z"),c}},{key:"formatDates",value:function(o){var a=this,c=this.w;return o.map(function(d){var m=d.value.toString(),b=new ja(a.ctx),w=a.createRawDateString(d,m),A=b.getDate(b.parseDate(w));if(a.utc||(A=b.getDate(b.parseDateWithTimezone(w))),c.config.xaxis.labels.format===void 0){var E="dd MMM",M=c.config.xaxis.labels.datetimeFormatter;d.unit==="year"&&(E=M.year),d.unit==="month"&&(E=M.month),d.unit==="day"&&(E=M.day),d.unit==="hour"&&(E=M.hour),d.unit==="minute"&&(E=M.minute),d.unit==="second"&&(E=M.second),m=b.formatDate(A,E)}else m=b.formatDate(A,c.config.xaxis.labels.format);return{dateString:w,position:d.position,value:m,unit:d.unit,year:d.year,month:d.month}})}},{key:"removeOverlappingTS",value:function(o){var a,c=this,d=new tn(this.ctx),m=!1;o.length>0&&o[0].value&&o.every(function(A){return A.value.length===o[0].value.length})&&(m=!0,a=d.getTextRects(o[0].value).width);var b=0,w=o.map(function(A,E){if(E>0&&c.w.config.xaxis.labels.hideOverlappingLabels){var M=m?a:d.getTextRects(o[b].value).width,O=o[b].position;return A.position>O+M+10?(b=E,A):null}return A});return w=w.filter(function(A){return A!==null})}},{key:"_getYear",value:function(o,a,c){return o+Math.floor(a/12)+c}}]),C}(),Qh=function(){function C(o,a){gn(this,C),this.ctx=a,this.w=a.w,this.el=o}return rn(C,[{key:"setupElements",value:function(){var o=this.w,a=o.globals,c=o.config,d=c.chart.type;a.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(d),a.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(d),a.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(d)&&c.plotOptions.bar.horizontal,a.chartClass=".apexcharts".concat(a.chartID),a.dom.baseEl=this.el,a.dom.elWrap=document.createElement("div"),tn.setAttrs(a.dom.elWrap,{id:a.chartClass.substring(1),class:"apexcharts-canvas ".concat(a.chartClass.substring(1))}),this.el.appendChild(a.dom.elWrap),a.dom.Paper=window.SVG().addTo(a.dom.elWrap),a.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(c.chart.offsetX,", ").concat(c.chart.offsetY,")")}),a.dom.Paper.node.style.background=c.theme.mode!=="dark"||c.chart.background?c.theme.mode!=="light"||c.chart.background?c.chart.background:"#fff":"#424242",this.setSVGDimensions(),a.dom.elLegendForeign=document.createElementNS(a.SVGNS,"foreignObject"),tn.setAttrs(a.dom.elLegendForeign,{x:0,y:0,width:a.svgWidth,height:a.svgHeight}),a.dom.elLegendWrap=document.createElement("div"),a.dom.elLegendWrap.classList.add("apexcharts-legend"),a.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),a.dom.elLegendForeign.appendChild(a.dom.elLegendWrap),a.dom.Paper.node.appendChild(a.dom.elLegendForeign),a.dom.elGraphical=a.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),a.dom.elDefs=a.dom.Paper.defs(),a.dom.Paper.add(a.dom.elGraphical),a.dom.elGraphical.add(a.dom.elDefs)}},{key:"plotChartType",value:function(o,a){var c=this.w,d=this.ctx,m=c.config,b=c.globals,w={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},column:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},A=m.chart.type||"line",E=null,M=0;b.series.forEach(function(Ve,ve){var Pe=o[ve].type||A;w[Pe]?(Pe==="rangeArea"?(w[Pe].series.push(b.seriesRangeStart[ve]),w[Pe].seriesRangeEnd.push(b.seriesRangeEnd[ve])):w[Pe].series.push(Ve),w[Pe].i.push(ve),Pe!=="column"&&Pe!=="bar"||(c.globals.columnSeries=w.column)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(Pe)?E=Pe:Pe==="bar"?(w.column.series.push(Ve),w.column.i.push(ve)):console.warn("You have specified an unrecognized series type (".concat(Pe,").")),A!==Pe&&Pe!=="scatter"&&M++}),M>0&&(E&&console.warn("Chart or series type ".concat(E," cannot appear with other chart or series types.")),w.column.series.length>0&&m.plotOptions.bar.horizontal&&(M-=w.column.series.length,w.column={series:[],i:[]},c.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),b.comboCharts||(b.comboCharts=M>0);var O=new Vl(d,a),L=new mc(d,a);d.pie=new qh(d);var $=new li(d);d.rangeBar=new wl(d,a);var Y=new td(d),U=[];if(b.comboCharts){var ne,ae,le=new bs(d);if(w.area.series.length>0&&(ne=U).push.apply(ne,vn(le.drawSeriesByGroup(w.area,b.areaGroups,"area",O))),w.column.series.length>0)if(m.chart.stacked){var me=new Qu(d,a);U.push(me.draw(w.column.series,w.column.i))}else d.bar=new Za(d,a),U.push(d.bar.draw(w.column.series,w.column.i));if(w.rangeArea.series.length>0&&U.push(O.draw(w.rangeArea.series,"rangeArea",w.rangeArea.i,w.rangeArea.seriesRangeEnd)),w.line.series.length>0&&(ae=U).push.apply(ae,vn(le.drawSeriesByGroup(w.line,b.lineGroups,"line",O))),w.candlestick.series.length>0&&U.push(L.draw(w.candlestick.series,"candlestick",w.candlestick.i)),w.boxPlot.series.length>0&&U.push(L.draw(w.boxPlot.series,"boxPlot",w.boxPlot.i)),w.rangeBar.series.length>0&&U.push(d.rangeBar.draw(w.rangeBar.series,w.rangeBar.i)),w.scatter.series.length>0){var Oe=new Vl(d,a,!0);U.push(Oe.draw(w.scatter.series,"scatter",w.scatter.i))}if(w.bubble.series.length>0){var Te=new Vl(d,a,!0);U.push(Te.draw(w.bubble.series,"bubble",w.bubble.i))}}else switch(m.chart.type){case"line":U=O.draw(b.series,"line");break;case"area":U=O.draw(b.series,"area");break;case"bar":m.chart.stacked?U=new Qu(d,a).draw(b.series):(d.bar=new Za(d,a),U=d.bar.draw(b.series));break;case"candlestick":U=new mc(d,a).draw(b.series,"candlestick");break;case"boxPlot":U=new mc(d,a).draw(b.series,m.chart.type);break;case"rangeBar":U=d.rangeBar.draw(b.series);break;case"rangeArea":U=O.draw(b.seriesRangeStart,"rangeArea",void 0,b.seriesRangeEnd);break;case"heatmap":U=new Fc(d,a).draw(b.series);break;case"treemap":U=new od(d,a).draw(b.series);break;case"pie":case"donut":case"polarArea":U=d.pie.draw(b.series);break;case"radialBar":U=$.draw(b.series);break;case"radar":U=Y.draw(b.series);break;default:U=O.draw(b.series)}return U}},{key:"setSVGDimensions",value:function(){var o=this.w,a=o.globals,c=o.config;c.chart.width=c.chart.width||"100%",c.chart.height=c.chart.height||"auto",a.svgWidth=c.chart.width,a.svgHeight=c.chart.height;var d=oe.getDimensions(this.el),m=c.chart.width.toString().split(/[0-9]+/g).pop();m==="%"?oe.isNumber(d[0])&&(d[0].width===0&&(d=oe.getDimensions(this.el.parentNode)),a.svgWidth=d[0]*parseInt(c.chart.width,10)/100):m!=="px"&&m!==""||(a.svgWidth=parseInt(c.chart.width,10));var b=String(c.chart.height).toString().split(/[0-9]+/g).pop();if(a.svgHeight!=="auto"&&a.svgHeight!=="")if(b==="%"){var w=oe.getDimensions(this.el.parentNode);a.svgHeight=w[1]*parseInt(c.chart.height,10)/100}else a.svgHeight=parseInt(c.chart.height,10);else a.svgHeight=a.axisCharts?a.svgWidth/1.61:a.svgWidth/1.2;if(a.svgWidth=Math.max(a.svgWidth,0),a.svgHeight=Math.max(a.svgHeight,0),tn.setAttrs(a.dom.Paper.node,{width:a.svgWidth,height:a.svgHeight}),b!=="%"){var A=c.chart.sparkline.enabled?0:a.axisCharts?c.chart.parentHeightOffset:0;a.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(a.svgHeight+A,"px")}a.dom.elWrap.style.width="".concat(a.svgWidth,"px"),a.dom.elWrap.style.height="".concat(a.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var o=this.w.globals,a=o.translateY,c=o.translateX;tn.setAttrs(o.dom.elGraphical.node,{transform:"translate(".concat(c,", ").concat(a,")")})}},{key:"resizeNonAxisCharts",value:function(){var o=this.w,a=o.globals,c=0,d=o.config.chart.sparkline.enabled?1:15;d+=o.config.grid.padding.bottom,["top","bottom"].includes(o.config.legend.position)&&o.config.legend.show&&!o.config.legend.floating&&(c=new $e(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var m=o.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),b=2.05*o.globals.radialSize;if(m&&!o.config.chart.sparkline.enabled&&o.config.plotOptions.radialBar.startAngle!==0){var w=oe.getBoundingClientRect(m);b=w.bottom;var A=w.bottom-w.top;b=Math.max(2.05*o.globals.radialSize,A)}var E=Math.ceil(b+a.translateY+c+d);a.dom.elLegendForeign&&a.dom.elLegendForeign.setAttribute("height",E),o.config.chart.height&&String(o.config.chart.height).includes("%")||(a.dom.elWrap.style.height="".concat(E,"px"),tn.setAttrs(a.dom.Paper.node,{height:E}),a.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(E,"px"))}},{key:"coreCalculations",value:function(){new Ec(this.ctx).init()}},{key:"resetGlobals",value:function(){var o=this,a=function(){return o.w.config.series.map(function(){return[]})},c=new oa,d=this.w.globals;c.initGlobalVars(d),d.seriesXvalues=a(),d.seriesYvalues=a()}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var o=this.w,a=null;if(o.globals.axisCharts){if(o.config.xaxis.crosshairs.position==="back"&&new oc(this.ctx).drawXCrosshairs(),o.config.yaxis[0].crosshairs.position==="back"&&new oc(this.ctx).drawYCrosshairs(),o.config.xaxis.type==="datetime"&&o.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new Fg(this.ctx);var c=[];isFinite(o.globals.minX)&&isFinite(o.globals.maxX)&&!o.globals.isBarHorizontal?c=this.ctx.timeScale.calculateTimeScaleTicks(o.globals.minX,o.globals.maxX):o.globals.isBarHorizontal&&(c=this.ctx.timeScale.calculateTimeScaleTicks(o.globals.minY,o.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(c)}a=new bs(this.ctx).getCalculatedRatios()}return a}},{key:"updateSourceChart",value:function(o){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:o.w.globals.minX,max:o.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var o=this,a=this.w;if(a.config.chart.brush.enabled&&typeof a.config.chart.events.selection!="function"){var c=Array.isArray(a.config.chart.brush.targets)?a.config.chart.brush.targets:[a.config.chart.brush.target];c.forEach(function(d){var m=ApexCharts.getChartByID(d);m.w.globals.brushSource=o.ctx,typeof m.w.config.chart.events.zoomed!="function"&&(m.w.config.chart.events.zoomed=function(){return o.updateSourceChart(m)}),typeof m.w.config.chart.events.scrolled!="function"&&(m.w.config.chart.events.scrolled=function(){return o.updateSourceChart(m)})}),a.config.chart.events.selection=function(d,m){c.forEach(function(b){ApexCharts.getChartByID(b).ctx.updateHelpers._updateOptions({xaxis:{min:m.xaxis.min,max:m.xaxis.max}},!1,!1,!1,!1)})}}}}]),C}(),sd=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"_updateOptions",value:function(o){var a=this,c=arguments.length>1&&arguments[1]!==void 0&&arguments[1],d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(w){var A=[a.ctx];m&&(A=a.ctx.getSyncedCharts()),a.ctx.w.globals.isExecCalled&&(A=[a.ctx],a.ctx.w.globals.isExecCalled=!1),A.forEach(function(E,M){var O=E.w;if(O.globals.shouldAnimate=d,c||(O.globals.resized=!0,O.globals.dataChanged=!0,d&&E.series.getPreviousPaths()),o&&vo(o)==="object"&&(E.config=new $a(o),o=bs.extendArrayProps(E.config,o,O),E.w.globals.chartID!==a.ctx.w.globals.chartID&&delete o.series,O.config=oe.extend(O.config,o),b&&(O.globals.lastXAxis=o.xaxis?oe.clone(o.xaxis):[],O.globals.lastYAxis=o.yaxis?oe.clone(o.yaxis):[],O.globals.initialConfig=oe.extend({},O.config),O.globals.initialSeries=oe.clone(O.config.series),o.series))){for(var L=0;L<O.globals.collapsedSeriesIndices.length;L++){var $=O.config.series[O.globals.collapsedSeriesIndices[L]];O.globals.collapsedSeries[L].data=O.globals.axisCharts?$.data.slice():$}for(var Y=0;Y<O.globals.ancillaryCollapsedSeriesIndices.length;Y++){var U=O.config.series[O.globals.ancillaryCollapsedSeriesIndices[Y]];O.globals.ancillaryCollapsedSeries[Y].data=O.globals.axisCharts?U.data.slice():U}E.series.emptyCollapsedSeries(O.config.series)}return E.update(o).then(function(){M===A.length-1&&w(E)})})})}},{key:"_updateSeries",value:function(o,a){var c=this,d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(m){var b,w=c.w;return w.globals.shouldAnimate=a,w.globals.dataChanged=!0,a&&c.ctx.series.getPreviousPaths(),w.globals.axisCharts?((b=o.map(function(A,E){return c._extendSeries(A,E)})).length===0&&(b=[{data:[]}]),w.config.series=b):w.config.series=o.slice(),d&&(w.globals.initialConfig.series=oe.clone(w.config.series),w.globals.initialSeries=oe.clone(w.config.series)),c.ctx.update().then(function(){m(c.ctx)})})}},{key:"_extendSeries",value:function(o,a){var c=this.w,d=c.config.series[a];return Tt(Tt({},c.config.series[a]),{},{name:o.name?o.name:d==null?void 0:d.name,color:o.color?o.color:d==null?void 0:d.color,type:o.type?o.type:d==null?void 0:d.type,group:o.group?o.group:d==null?void 0:d.group,hidden:o.hidden!==void 0?o.hidden:d==null?void 0:d.hidden,data:o.data?o.data:d==null?void 0:d.data,zIndex:o.zIndex!==void 0?o.zIndex:a})}},{key:"toggleDataPointSelection",value:function(o,a){var c=this.w,d=null,m=".apexcharts-series[data\\:realIndex='".concat(o,"']");return c.globals.axisCharts?d=c.globals.dom.Paper.findOne("".concat(m," path[j='").concat(a,"'], ").concat(m," circle[j='").concat(a,"'], ").concat(m," rect[j='").concat(a,"']")):a===void 0&&(d=c.globals.dom.Paper.findOne("".concat(m," path[j='").concat(o,"']")),c.config.chart.type!=="pie"&&c.config.chart.type!=="polarArea"&&c.config.chart.type!=="donut"||this.ctx.pie.pieClicked(o)),d?(new tn(this.ctx).pathMouseDown(d,null),d.node?d.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(o){var a=this.w;if(["min","max"].forEach(function(d){o.xaxis[d]!==void 0&&(a.config.xaxis[d]=o.xaxis[d],a.globals.lastXAxis[d]=o.xaxis[d])}),o.xaxis.categories&&o.xaxis.categories.length&&(a.config.xaxis.categories=o.xaxis.categories),a.config.xaxis.convertedCatToNumeric){var c=new ei(o);o=c.convertCatToNumericXaxis(o,this.ctx)}return o}},{key:"forceYAxisUpdate",value:function(o){return o.chart&&o.chart.stacked&&o.chart.stackType==="100%"&&(Array.isArray(o.yaxis)?o.yaxis.forEach(function(a,c){o.yaxis[c].min=0,o.yaxis[c].max=100}):(o.yaxis.min=0,o.yaxis.max=100)),o}},{key:"revertDefaultAxisMinMax",value:function(o){var a=this,c=this.w,d=c.globals.lastXAxis,m=c.globals.lastYAxis;o&&o.xaxis&&(d=o.xaxis),o&&o.yaxis&&(m=o.yaxis),c.config.xaxis.min=d.min,c.config.xaxis.max=d.max;var b=function(w){m[w]!==void 0&&(c.config.yaxis[w].min=m[w].min,c.config.yaxis[w].max=m[w].max)};c.config.yaxis.map(function(w,A){c.globals.zoomed||m[A]!==void 0?b(A):a.ctx.opts.yaxis[A]!==void 0&&(w.min=a.ctx.opts.yaxis[A].min,w.max=a.ctx.opts.yaxis[A].max)})}}]),C}();(function(){function C(){for(var m=arguments.length>0&&arguments[0]!==O?arguments[0]:[],b=arguments.length>1?arguments[1]:O,w=arguments.length>2?arguments[2]:O,A=arguments.length>3?arguments[3]:O,E=arguments.length>4?arguments[4]:O,M=arguments.length>5?arguments[5]:O,O=arguments.length>6?arguments[6]:O,L=m.slice(b,w||O),$=A.slice(E,M||O),Y=0,U={pos:[0,0],start:[0,0]},ne={pos:[0,0],start:[0,0]};L[Y]=o.call(U,L[Y]),$[Y]=o.call(ne,$[Y]),L[Y][0]!=$[Y][0]||L[Y][0]=="M"||L[Y][0]=="A"&&(L[Y][4]!=$[Y][4]||L[Y][5]!=$[Y][5])?(Array.prototype.splice.apply(L,[Y,1].concat(c.call(U,L[Y]))),Array.prototype.splice.apply($,[Y,1].concat(c.call(ne,$[Y])))):(L[Y]=a.call(U,L[Y]),$[Y]=a.call(ne,$[Y])),!(++Y==L.length&&Y==$.length);)Y==L.length&&L.push(["C",U.pos[0],U.pos[1],U.pos[0],U.pos[1],U.pos[0],U.pos[1]]),Y==$.length&&$.push(["C",ne.pos[0],ne.pos[1],ne.pos[0],ne.pos[1],ne.pos[0],ne.pos[1]]);return{start:L,dest:$}}function o(m){switch(m[0]){case"z":case"Z":m[0]="L",m[1]=this.start[0],m[2]=this.start[1];break;case"H":m[0]="L",m[2]=this.pos[1];break;case"V":m[0]="L",m[2]=m[1],m[1]=this.pos[0];break;case"T":m[0]="Q",m[3]=m[1],m[4]=m[2],m[1]=this.reflection[1],m[2]=this.reflection[0];break;case"S":m[0]="C",m[6]=m[4],m[5]=m[3],m[4]=m[2],m[3]=m[1],m[2]=this.reflection[1],m[1]=this.reflection[0]}return m}function a(m){var b=m.length;return this.pos=[m[b-2],m[b-1]],"SCQT".indexOf(m[0])!=-1&&(this.reflection=[2*this.pos[0]-m[b-4],2*this.pos[1]-m[b-3]]),m}function c(m){var b=[m];switch(m[0]){case"M":return this.pos=this.start=[m[1],m[2]],b;case"L":m[5]=m[3]=m[1],m[6]=m[4]=m[2],m[1]=this.pos[0],m[2]=this.pos[1];break;case"Q":m[6]=m[4],m[5]=m[3],m[4]=1*m[4]/3+2*m[2]/3,m[3]=1*m[3]/3+2*m[1]/3,m[2]=1*this.pos[1]/3+2*m[2]/3,m[1]=1*this.pos[0]/3+2*m[1]/3;break;case"A":b=function(w,A){var E,M,O,L,$,Y,U,ne,ae,le,me,Oe,Te,Ve,ve,Pe,ht,P,W,q,ue,ye,nt,Ft,an,hn,Jt=Math.abs(A[1]),wo=Math.abs(A[2]),Ro=A[3]%360,sr=A[4],qr=A[5],$r=A[6],Ii=A[7],Vs=new qn(w),Ar=new qn($r,Ii),ma=[];if(Jt===0||wo===0||Vs.x===Ar.x&&Vs.y===Ar.y)return[["C",Vs.x,Vs.y,Ar.x,Ar.y,Ar.x,Ar.y]];for(E=new qn((Vs.x-Ar.x)/2,(Vs.y-Ar.y)/2).transform(new oo().rotate(Ro)),M=E.x*E.x/(Jt*Jt)+E.y*E.y/(wo*wo),M>1&&(Jt*=M=Math.sqrt(M),wo*=M),O=new oo().rotate(Ro).scale(1/Jt,1/wo).rotate(-Ro),Vs=Vs.transform(O),Ar=Ar.transform(O),L=[Ar.x-Vs.x,Ar.y-Vs.y],Y=L[0]*L[0]+L[1]*L[1],$=Math.sqrt(Y),L[0]/=$,L[1]/=$,U=Y<4?Math.sqrt(1-Y/4):0,sr===qr&&(U*=-1),ne=new qn((Ar.x+Vs.x)/2+U*-L[1],(Ar.y+Vs.y)/2+U*L[0]),ae=new qn(Vs.x-ne.x,Vs.y-ne.y),le=new qn(Ar.x-ne.x,Ar.y-ne.y),me=Math.acos(ae.x/Math.sqrt(ae.x*ae.x+ae.y*ae.y)),ae.y<0&&(me*=-1),Oe=Math.acos(le.x/Math.sqrt(le.x*le.x+le.y*le.y)),le.y<0&&(Oe*=-1),qr&&me>Oe&&(Oe+=2*Math.PI),!qr&&me<Oe&&(Oe-=2*Math.PI),Ve=Math.ceil(2*Math.abs(me-Oe)/Math.PI),Pe=[],ht=me,Te=(Oe-me)/Ve,ve=4*Math.tan(Te/4)/3,ue=0;ue<=Ve;ue++)W=Math.cos(ht),P=Math.sin(ht),q=new qn(ne.x+W,ne.y+P),Pe[ue]=[new qn(q.x+ve*P,q.y-ve*W),q,new qn(q.x-ve*P,q.y+ve*W)],ht+=Te;for(Pe[0][0]=Pe[0][1].clone(),Pe[Pe.length-1][2]=Pe[Pe.length-1][1].clone(),O=new oo().rotate(Ro).scale(Jt,wo).rotate(-Ro),ue=0,ye=Pe.length;ue<ye;ue++)Pe[ue][0]=Pe[ue][0].transform(O),Pe[ue][1]=Pe[ue][1].transform(O),Pe[ue][2]=Pe[ue][2].transform(O);for(ue=1,ye=Pe.length;ue<ye;ue++)nt=(q=Pe[ue-1][2]).x,Ft=q.y,an=(q=Pe[ue][0]).x,hn=q.y,$r=(q=Pe[ue][1]).x,Ii=q.y,ma.push(["C",nt,Ft,an,hn,$r,Ii]);return ma}(this.pos,m),m=b[0]}return m[0]="C",this.pos=[m[5],m[6]],this.reflection=[2*m[5]-m[3],2*m[6]-m[4]],b}function d(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=arguments.length>1?arguments[1]:void 0;if(b===!1)return!1;for(var w=b,A=m.length;w<A;++w)if(m[w][0]=="M")return w;return!1}Ie(ii,{morph:function(m,b,w,A,E){for(var M=this.parse(m),O=this.parse(b),L=0,$=0,Y=!1,U=!1;L!==!1||$!==!1;){var ne;Y=d(M,L!==!1&&L+1),U=d(O,$!==!1&&$+1),L===!1&&(L=(ne=new ii(ae.start).bbox()).height==0||ne.width==0?M.push(M[0])-1:M.push(["M",ne.x+ne.width/2,ne.y+ne.height/2])-1),$===!1&&($=(ne=new ii(ae.dest).bbox()).height==0||ne.width==0?O.push(O[0])-1:O.push(["M",ne.x+ne.width/2,ne.y+ne.height/2])-1);var ae=C(M,L,Y,O,$,U);M=M.slice(0,L).concat(ae.start,Y===!1?[]:M.slice(Y)),O=O.slice(0,$).concat(ae.dest,U===!1?[]:O.slice(U)),L=Y!==!1&&L+ae.start.length,$=U!==!1&&$+ae.dest.length}this._array=M,this.destination=new ii,this.destination._array=O;var le=this.fromArray(M.map(function(me,Oe){var Te=O[Oe].map(function(Ve,ve){return ve===0?Ve:A.step(me[ve],O[Oe][ve],w,E[Oe],E)});return Te}));return le}})})();const ru=C=>(C.changedTouches&&(C=C.changedTouches[0]),{x:C.clientX,y:C.clientY});class Ld{constructor(o){o.remember("_draggable",this),this.el=o,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(o){o?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(o){const a=!o.type.indexOf("mouse");if(a&&o.which!==1&&o.buttons!==0||this.el.dispatch("beforedrag",{event:o,handler:this}).defaultPrevented)return;o.preventDefault(),o.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(ru(o));const c=(a?"mouseup":"touchend")+".drag";da(window,(a?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),da(window,c,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:o,handler:this,box:this.box})}drag(o){const{box:a,lastClick:c}=this,d=this.el.point(ru(o)),m=d.x-c.x,b=d.y-c.y;if(!m&&!b)return a;const w=a.x+m,A=a.y+b;this.box=new uo(w,A,a.w,a.h),this.lastClick=d,this.el.dispatch("dragmove",{event:o,handler:this,box:this.box}).defaultPrevented||this.move(w,A)}move(o,a){this.el.type==="svg"?zt.prototype.move.call(this.el,o,a):this.el.move(o,a)}endDrag(o){this.drag(o),this.el.fire("dragend",{event:o,handler:this,box:this.box}),Dr(window,"mousemove.drag"),Dr(window,"touchmove.drag"),Dr(window,"mouseup.drag"),Dr(window,"touchend.drag"),this.init(!0)}}/*!
* @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
* @version 4.0.1
* https://github.com/svgdotjs/svg.select.js
*
* @copyright Ulrich-Matthias Schfer
* @license MIT
*
* BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
*/function Br(C,o,a,c=null){return function(d){d.preventDefault(),d.stopPropagation();var m=d.pageX||d.touches[0].pageX,b=d.pageY||d.touches[0].pageY;o.fire(C,{x:m,y:b,event:d,index:c,points:a})}}function Hr([C,o],{a,b:c,c:d,d:m,e:b,f:w}){return[C*a+o*d+b,C*c+o*m+w]}Ie(Ms,{draggable(C=!0){return(this.remember("_draggable")||new Ld(this)).init(C),this}});let Bc=class{constructor(C){this.el=C,C.remember("_selectHandler",this),this.selection=new zt,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const o=No();this.observer=new o.MutationObserver(this.mutationHandler)}init(C){this.createHandle=C.createHandle||this.createHandleFn,this.createRot=C.createRot||this.createRotFn,this.updateHandle=C.updateHandle||this.updateHandleFn,this.updateRot=C.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(C,o){if(!C)return this.selection.clear().remove(),void this.observer.disconnect();this.init(o)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((C,o,a)=>{const c=this.order[o];this.createHandle.call(this,this.selection,C,o,a,c),this.selection.get(o+1).addClass("svg_select_handle svg_select_handle_"+c).on("mousedown.selection touchstart.selection",Br(c,this.el,this.handlePoints,o))})}createHandleFn(C){C.polyline()}updateHandleFn(C,o,a,c){const d=c.at(a-1),m=c[(a+1)%c.length],b=o,w=[b[0]-d[0],b[1]-d[1]],A=[b[0]-m[0],b[1]-m[1]],E=Math.sqrt(w[0]*w[0]+w[1]*w[1]),M=Math.sqrt(A[0]*A[0]+A[1]*A[1]),O=[w[0]/E,w[1]/E],L=[A[0]/M,A[1]/M],$=[b[0]-10*O[0],b[1]-10*O[1]],Y=[b[0]-10*L[0],b[1]-10*L[1]];C.plot([$,b,Y])}updateResizeHandles(){this.handlePoints.forEach((C,o,a)=>{const c=this.order[o];this.updateHandle.call(this,this.selection.get(o+1),C,o,a,c)})}createRotFn(C){C.line(),C.circle(5)}getPoint(C){return this.handlePoints[this.order.indexOf(C)]}getPointHandle(C){return this.selection.get(this.order.indexOf(C)+1)}updateRotFn(C,o){const a=this.getPoint("t");C.get(0).plot(a[0],a[1],o[0],o[1]),C.get(1).center(o[0],o[1])}createRotationHandle(){const C=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",Br("rot",this.el,this.handlePoints));this.createRot.call(this,C)}updateRotationHandle(){const C=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(C,this.rotationPoint,this.handlePoints)}updatePoints(){const C=this.el.bbox(),o=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(C).map(a=>Hr(a,o)),this.rotationPoint=Hr(this.getRotationPoint(C),o)}getHandlePoints({x:C,x2:o,y:a,y2:c,cx:d,cy:m}=this.el.bbox()){return[[C,a],[d,a],[o,a],[o,m],[o,c],[d,c],[C,c],[C,m]]}getRotationPoint({y:C,cx:o}=this.el.bbox()){return[o,C-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const Wl=C=>function(o=!0,a={}){typeof o=="object"&&(a=o,o=!0);let c=this.remember("_"+C.name);return c||(o.prototype instanceof Bc?(c=new o(this),o=!0):c=new C(this),this.remember("_"+C.name,c)),c.active(o,a),this};/*!
* @svgdotjs/svg.resize.js - An extension for svg.js which allows to resize elements which are selected
* @version 2.0.4
* https://github.com/svgdotjs/svg.resize.js
*
* @copyright [object Object]
* @license MIT
*
* BUILT: Fri Sep 13 2024 12:43:14 GMT+0200 (Central European Summer Time)
*//*!
* @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
* @version 4.0.1
* https://github.com/svgdotjs/svg.select.js
*
* @copyright Ulrich-Matthias Schfer
* @license MIT
*
* BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
*/function Nd(C,o,a,c=null){return function(d){d.preventDefault(),d.stopPropagation();var m=d.pageX||d.touches[0].pageX,b=d.pageY||d.touches[0].pageY;o.fire(C,{x:m,y:b,event:d,index:c,points:a})}}function La([C,o],{a,b:c,c:d,d:m,e:b,f:w}){return[C*a+o*d+b,C*c+o*m+w]}Ie(Ms,{select:Wl(Bc)}),Ie([Ba,ta,so],{pointSelect:Wl(class{constructor(C){this.el=C,C.remember("_pointSelectHandler",this),this.selection=new zt,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const o=No();this.observer=new o.MutationObserver(this.mutationHandler)}init(C){this.createHandle=C.createHandle||this.createHandleFn,this.updateHandle=C.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(C,o){if(!C)return this.selection.clear().remove(),void this.observer.disconnect();this.init(o)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((C,o,a)=>{this.createHandle.call(this,this.selection,C,o,a),this.selection.get(o+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",Br("point",this.el,this.points,o))})}createHandleFn(C){C.circle(5)}updateHandleFn(C,o){C.center(o[0],o[1])}updatePointHandles(){this.points.forEach((C,o,a)=>{this.updateHandle.call(this,this.selection.get(o+1),C,o,a)})}updatePoints(){const C=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(o=>Hr(o,C))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class to{constructor(o){this.el=o,o.remember("_selectHandler",this),this.selection=new zt,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const a=No();this.observer=new a.MutationObserver(this.mutationHandler)}init(o){this.createHandle=o.createHandle||this.createHandleFn,this.createRot=o.createRot||this.createRotFn,this.updateHandle=o.updateHandle||this.updateHandleFn,this.updateRot=o.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(o,a){if(!o)return this.selection.clear().remove(),void this.observer.disconnect();this.init(a)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((o,a,c)=>{const d=this.order[a];this.createHandle.call(this,this.selection,o,a,c,d),this.selection.get(a+1).addClass("svg_select_handle svg_select_handle_"+d).on("mousedown.selection touchstart.selection",Nd(d,this.el,this.handlePoints,a))})}createHandleFn(o){o.polyline()}updateHandleFn(o,a,c,d){const m=d.at(c-1),b=d[(c+1)%d.length],w=a,A=[w[0]-m[0],w[1]-m[1]],E=[w[0]-b[0],w[1]-b[1]],M=Math.sqrt(A[0]*A[0]+A[1]*A[1]),O=Math.sqrt(E[0]*E[0]+E[1]*E[1]),L=[A[0]/M,A[1]/M],$=[E[0]/O,E[1]/O],Y=[w[0]-10*L[0],w[1]-10*L[1]],U=[w[0]-10*$[0],w[1]-10*$[1]];o.plot([Y,w,U])}updateResizeHandles(){this.handlePoints.forEach((o,a,c)=>{const d=this.order[a];this.updateHandle.call(this,this.selection.get(a+1),o,a,c,d)})}createRotFn(o){o.line(),o.circle(5)}getPoint(o){return this.handlePoints[this.order.indexOf(o)]}getPointHandle(o){return this.selection.get(this.order.indexOf(o)+1)}updateRotFn(o,a){const c=this.getPoint("t");o.get(0).plot(c[0],c[1],a[0],a[1]),o.get(1).center(a[0],a[1])}createRotationHandle(){const o=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",Nd("rot",this.el,this.handlePoints));this.createRot.call(this,o)}updateRotationHandle(){const o=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(o,this.rotationPoint,this.handlePoints)}updatePoints(){const o=this.el.bbox(),a=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(o).map(c=>La(c,a)),this.rotationPoint=La(this.getRotationPoint(o),a)}getHandlePoints({x:o,x2:a,y:c,y2:d,cx:m,cy:b}=this.el.bbox()){return[[o,c],[m,c],[a,c],[a,b],[a,d],[m,d],[o,d],[o,b]]}getRotationPoint({y:o,cx:a}=this.el.bbox()){return[a,o-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const Oc=C=>function(o=!0,a={}){typeof o=="object"&&(a=o,o=!0);let c=this.remember("_"+C.name);return c||(o.prototype instanceof to?(c=new o(this),o=!0):c=new C(this),this.remember("_"+C.name,c)),c.active(o,a),this};Ie(Ms,{select:Oc(to)}),Ie([Ba,ta,so],{pointSelect:Oc(class{constructor(C){this.el=C,C.remember("_pointSelectHandler",this),this.selection=new zt,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const o=No();this.observer=new o.MutationObserver(this.mutationHandler)}init(C){this.createHandle=C.createHandle||this.createHandleFn,this.updateHandle=C.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(C,o){if(!C)return this.selection.clear().remove(),void this.observer.disconnect();this.init(o)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((C,o,a)=>{this.createHandle.call(this,this.selection,C,o,a),this.selection.get(o+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",Nd("point",this.el,this.points,o))})}createHandleFn(C){C.circle(5)}updateHandleFn(C,o){C.center(o[0],o[1])}updatePointHandles(){this.points.forEach((C,o,a)=>{this.updateHandle.call(this,this.selection.get(o+1),C,o,a)})}updatePoints(){const C=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(o=>La(o,C))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const rd=C=>(C.changedTouches&&(C=C.changedTouches[0]),{x:C.clientX,y:C.clientY}),Pl=C=>{let o=1/0,a=1/0,c=-1/0,d=-1/0;for(let m=0;m<C.length;m++){const b=C[m];o=Math.min(o,b[0]),a=Math.min(a,b[1]),c=Math.max(c,b[0]),d=Math.max(d,b[1])}return new uo(o,a,c-o,d-a)};class zs{constructor(o){this.el=o,o.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(o,a){this.preserveAspectRatio=a.preserveAspectRatio??!1,this.aroundCenter=a.aroundCenter??!1,this.grid=a.grid??0,this.degree=a.degree??0,this.el.off(".resize"),o&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&(this.eventType==="rot"?this.rotate(this.lastEvent):this.eventType==="point"?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(o){this.eventType=o.type;const{event:a,index:c,points:d}=o.detail,m=!a.type.indexOf("mouse");if(m&&(a.which||a.buttons)!==1||this.el.dispatch("beforeresize",{event:o,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(rd(a)),this.index=c,this.points=d.slice();const b=(m?"mousemove":"touchmove")+".resize",w=(m?"mouseup":"touchcancel.resize touchend")+".resize";o.type==="point"?da(window,b,this.movePoint):o.type==="rot"?da(window,b,this.rotate):da(window,b,this.resize),da(window,w,this.endResize)}resize(o){this.lastEvent=o;const a=this.snapToGrid(this.el.point(rd(o)));let c=a.x-this.startPoint.x,d=a.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(c*=2,d*=2);const m=this.box.x+c,b=this.box.y+d,w=this.box.x2+c,A=this.box.y2+d;let E=new uo(this.box);if(this.eventType.includes("l")&&(E.x=Math.min(m,this.box.x2),E.x2=Math.max(m,this.box.x2)),this.eventType.includes("r")&&(E.x=Math.min(w,this.box.x),E.x2=Math.max(w,this.box.x)),this.eventType.includes("t")&&(E.y=Math.min(b,this.box.y2),E.y2=Math.max(b,this.box.y2)),this.eventType.includes("b")&&(E.y=Math.min(A,this.box.y),E.y2=Math.max(A,this.box.y)),E.width=E.x2-E.x,E.height=E.y2-E.y,this.preserveAspectRatio){const M=E.width/this.box.width,O=E.height/this.box.height,L=["lt","t","rt","r","rb","b","lb","l"],$=(L.indexOf(this.eventType)+4)%L.length,Y=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[$];let U=this.eventType.includes("t")||this.eventType.includes("b")?O:M;U=this.eventType.length===2?Math.max(M,O):U,E=function(ne,ae,le){const me=[[ne.x,ne.y],[ne.x+ne.width,ne.y],[ne.x+ne.width,ne.y+ne.height],[ne.x,ne.y+ne.height]].map(([Oe,Te])=>{const Ve=Oe-ae[0],ve=(Te-ae[1])*le;return[Ve*le+ae[0],ve+ae[1]]});return Pl(me)}(this.box,Y,U)}this.el.dispatch("resize",{box:new uo(E),angle:0,eventType:this.eventType,event:o,handler:this}).defaultPrevented||this.el.size(E.width,E.height).move(E.x,E.y)}movePoint(o){this.lastEvent=o;const{x:a,y:c}=this.snapToGrid(this.el.point(rd(o))),d=this.el.array().slice();d[this.index]=[a,c],this.el.dispatch("resize",{box:Pl(d),angle:0,eventType:this.eventType,event:o,handler:this}).defaultPrevented||this.el.plot(d)}rotate(o){this.lastEvent=o;const a=this.startPoint,c=this.el.point(rd(o)),{cx:d,cy:m}=this.box,b=a.x-d,w=a.y-m,A=c.x-d,E=c.y-m,M=Math.sqrt(b*b+w*w)*Math.sqrt(A*A+E*E);if(M===0)return;let O=Math.acos((b*A+w*E)/M)/Math.PI*180;if(!O)return;c.x<a.x&&(O=-O);const L=new oo(this.el),{x:$,y:Y}=new qn(d,m).transformO(L),{rotate:U}=L.decompose(),ne=this.snapToAngle(U+O)-U;this.el.dispatch("resize",{box:this.box,angle:ne,eventType:this.eventType,event:o,handler:this}).defaultPrevented||this.el.transform(L.rotateO(ne,$,Y))}endResize(o){this.eventType!=="rot"&&this.eventType!=="point"&&this.resize(o),this.lastEvent=null,this.eventType="",Dr(window,"mousemove.resize touchmove.resize"),Dr(window,"mouseup.resize touchend.resize")}snapToGrid(o){return this.grid&&(o.x=Math.round(o.x/this.grid)*this.grid,o.y=Math.round(o.y/this.grid)*this.grid),o}snapToAngle(o){return this.degree&&(o=Math.round(o/this.degree)*this.degree),o}}Ie(Ms,{resize:function(C=!0,o={}){typeof C=="object"&&(o=C,C=!0);let a=this.remember("_ResizeHandler");return a||(C.prototype instanceof zs?(a=new C(this),C=!0):a=new zs(this),this.remember("_resizeHandler",a)),a.active(C,o),this}}),window.SVG===void 0&&(window.SVG=Ma),window.Apex===void 0&&(window.Apex={});var Hc=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Wt(this.ctx),this.ctx.axes=new jh(this.ctx),this.ctx.core=new Qh(this.ctx.el,this.ctx),this.ctx.config=new $a({}),this.ctx.data=new $l(this.ctx),this.ctx.grid=new tu(this.ctx),this.ctx.graphics=new tn(this.ctx),this.ctx.coreUtils=new bs(this.ctx),this.ctx.crosshairs=new oc(this.ctx),this.ctx.events=new Dl(this.ctx),this.ctx.exports=new Lc(this.ctx),this.ctx.fill=new Mr(this.ctx),this.ctx.localization=new qi(this.ctx),this.ctx.options=new es,this.ctx.responsive=new mh(this.ctx),this.ctx.series=new er(this.ctx),this.ctx.theme=new Tu(this.ctx),this.ctx.formatters=new pe(this.ctx),this.ctx.titleSubtitle=new ph(this.ctx),this.ctx.legend=new $e(this.ctx),this.ctx.toolbar=new ou(this.ctx),this.ctx.tooltip=new Ic(this.ctx),this.ctx.dimensions=new fc(this.ctx),this.ctx.updateHelpers=new sd(this.ctx),this.ctx.zoomPanSelection=new Ml(this.ctx),this.ctx.w.globals.tooltip=new Ic(this.ctx)}}]),C}(),ad=function(){function C(o){gn(this,C),this.ctx=o,this.w=o.w}return rn(C,[{key:"clear",value:function(o){var a=o.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:a})}},{key:"killSVG",value:function(o){o.each(function(){this.removeClass("*"),this.off()},!0),o.clear()}},{key:"clearDomElements",value:function(o){var a=this,c=o.isUpdating,d=this.w.globals.dom.Paper.node;d.parentNode&&d.parentNode.parentNode&&!c&&(d.parentNode.parentNode.style.minHeight="unset");var m=this.w.globals.dom.baseEl;m&&this.ctx.eventList.forEach(function(w){m.removeEventListener(w,a.ctx.events.documentEvent)});var b=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(b.Paper),b.Paper.remove(),b.elWrap=null,b.elGraphical=null,b.elLegendWrap=null,b.elLegendForeign=null,b.baseEl=null,b.elGridRect=null,b.elGridRectMask=null,b.elGridRectBarMask=null,b.elGridRectMarkerMask=null,b.elForecastMask=null,b.elNonForecastMask=null,b.elDefs=null}}]),C}(),id=new WeakMap,eg=function(){function C(o,a){gn(this,C),this.opts=a,this.ctx=this,this.w=new fa(a).init(),this.el=o,this.w.globals.cuid=oe.randomId(),this.w.globals.chartID=this.w.config.chart.id?oe.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Hc(this).initModules(),this.create=oe.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return rn(C,[{key:"render",value:function(){var o=this;return new Promise(function(a,c){if(oe.elementExists(o.el)){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),o.w.config.chart.id&&Apex._chartInstances.push({id:o.w.globals.chartID,group:o.w.config.chart.group,chart:o}),o.setLocale(o.w.config.chart.defaultLocale);var d=o.w.config.chart.events.beforeMount;typeof d=="function"&&d(o,o.w),o.events.fireEvent("beforeMount",[o,o.w]),window.addEventListener("resize",o.windowResizeHandler),function(L,$){var Y=!1;if(L.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var U=L.getBoundingClientRect();L.style.display!=="none"&&U.width!==0||(Y=!0)}var ne=new ResizeObserver(function(ae){Y&&$.call(L,ae),Y=!0});L.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(L.children).forEach(function(ae){return ne.observe(ae)}):ne.observe(L),id.set($,ne)}(o.el.parentNode,o.parentResizeHandler);var m=o.el.getRootNode&&o.el.getRootNode(),b=oe.is("ShadowRoot",m),w=o.el.ownerDocument,A=b?m.getElementById("apexcharts-css"):w.getElementById("apexcharts-css");if(!A){var E;(A=document.createElement("style")).id="apexcharts-css",A.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  direction: ltr !important;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  width: 12px;
  height: 12px;
  position: relative;
  top: 0;
  margin-right: 10px;
  border-radius: 50%
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_shape {
  stroke-width: 1;
  stroke-dasharray: 10 10;
  stroke: black;
  stroke-opacity: 0.1;
  pointer-events: none;
  fill: none;
}

.svg_select_handle {
  stroke-width: 3;
  stroke: black;
  fill: none;
}

.svg_select_handle_r {
  cursor: e-resize;
}

.svg_select_handle_l {
  cursor: w-resize;
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect,
.no-pointer-events {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}`;var M=((E=o.opts.chart)===null||E===void 0?void 0:E.nonce)||o.w.config.chart.nonce;M&&A.setAttribute("nonce",M),b?m.prepend(A):w.head.appendChild(A)}var O=o.create(o.w.config.series,{});if(!O)return a(o);o.mount(O).then(function(){typeof o.w.config.chart.events.mounted=="function"&&o.w.config.chart.events.mounted(o,o.w),o.events.fireEvent("mounted",[o,o.w]),a(O)}).catch(function(L){c(L)})}else c(new Error("Element not found"))})}},{key:"create",value:function(o,a){var c=this,d=this.w;new Hc(this).initModules();var m=this.w.globals;if(m.noData=!1,m.animationEnded=!1,!oe.elementExists(this.el))return m.animationEnded=!0,this.destroy(),null;if(this.responsive.checkResponsiveConfig(a),d.config.xaxis.convertedCatToNumeric&&new ei(d.config).convertCatToNumericXaxis(d.config,this.ctx),this.core.setupElements(),d.config.chart.type==="treemap"&&(d.config.grid.show=!1,d.config.yaxis[0].show=!1),m.svgWidth===0)return m.animationEnded=!0,null;var b=o;o.forEach(function(L,$){L.hidden&&(b=c.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:$}))});var w=bs.checkComboSeries(b,d.config.chart.type);m.comboCharts=w.comboCharts,m.comboBarCount=w.comboBarCount;var A=b.every(function(L){return L.data&&L.data.length===0});(b.length===0||A&&m.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(b),this.theme.init(),new Pa(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),m.noData&&m.collapsedSeries.length!==m.series.length&&!d.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),m.axisCharts&&(this.core.coreCalculations(),d.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=d.globals.minX,this.ctx.toolbar.maxX=d.globals.maxX),this.formatters.heatmapLabelFormatters(),new bs(this).getLargestMarkerSize(),this.dimensions.plotCoords();var E=this.core.xySettings();this.grid.createGridMask();var M=this.core.plotChartType(b,E),O=new Nr(this);return O.bringForward(),d.config.dataLabels.background.enabled&&O.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:M,xyRatios:E,dimensions:{plot:{left:d.globals.translateX,top:d.globals.translateY,width:d.globals.gridWidth,height:d.globals.gridHeight}}}}},{key:"mount",value:function(){var o=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,c=this,d=c.w;return new Promise(function(m,b){if(c.el===null)return b(new Error("Not enough data to display or target element not found"));(a===null||d.globals.allSeriesCollapsed)&&c.series.handleNoData(),c.grid=new tu(c);var w,A,E=c.grid.drawGrid();if(c.annotations=new Jo(c),c.annotations.drawImageAnnos(),c.annotations.drawTextAnnos(),d.config.grid.position==="back"&&(E&&d.globals.dom.elGraphical.add(E.el),E!=null&&(w=E.elGridBorders)!==null&&w!==void 0&&w.node&&d.globals.dom.elGraphical.add(E.elGridBorders)),Array.isArray(a.elGraph))for(var M=0;M<a.elGraph.length;M++)d.globals.dom.elGraphical.add(a.elGraph[M]);else d.globals.dom.elGraphical.add(a.elGraph);d.config.grid.position==="front"&&(E&&d.globals.dom.elGraphical.add(E.el),E!=null&&(A=E.elGridBorders)!==null&&A!==void 0&&A.node&&d.globals.dom.elGraphical.add(E.elGridBorders)),d.config.xaxis.crosshairs.position==="front"&&c.crosshairs.drawXCrosshairs(),d.config.yaxis[0].crosshairs.position==="front"&&c.crosshairs.drawYCrosshairs(),d.config.chart.type!=="treemap"&&c.axes.drawAxis(d.config.chart.type,E);var O=new zl(o.ctx,E),L=new _c(o.ctx,E);if(E!==null&&(O.xAxisLabelCorrections(E.xAxisTickWidth),L.setYAxisTextAlignments(),d.config.yaxis.map(function(Y,U){d.globals.ignoreYAxisIndexes.indexOf(U)===-1&&L.yAxisTitleRotate(U,Y.opposite)})),c.annotations.drawAxesAnnotations(),!d.globals.noData){if(d.config.tooltip.enabled&&!d.globals.noData&&c.w.globals.tooltip.drawTooltip(a.xyRatios),d.globals.axisCharts&&(d.globals.isXNumeric||d.config.xaxis.convertedCatToNumeric||d.globals.isRangeBar))(d.config.chart.zoom.enabled||d.config.chart.selection&&d.config.chart.selection.enabled||d.config.chart.pan&&d.config.chart.pan.enabled)&&c.zoomPanSelection.init({xyRatios:a.xyRatios});else{var $=d.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(Y){$[Y]=!1})}d.config.chart.toolbar.show&&!d.globals.allSeriesCollapsed&&c.toolbar.createToolbar()}d.globals.memory.methodsToExec.length>0&&d.globals.memory.methodsToExec.forEach(function(Y){Y.method(Y.params,!1,Y.context)}),d.globals.axisCharts||d.globals.noData||c.core.resizeNonAxisCharts(),m(c)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),function(a,c){var d=id.get(c);d&&(d.disconnect(),id.delete(c))}(this.el.parentNode,this.parentResizeHandler);var o=this.w.config.chart.id;o&&Apex._chartInstances.forEach(function(a,c){a.id===oe.escapeString(o)&&Apex._chartInstances.splice(c,1)}),new ad(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(o){var a=this,c=arguments.length>1&&arguments[1]!==void 0&&arguments[1],d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],m=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],w=this.w;return w.globals.selection=void 0,o.series&&(this.series.resetSeries(!1,!0,!1),o.series.length&&o.series[0].data&&(o.series=o.series.map(function(A,E){return a.updateHelpers._extendSeries(A,E)})),this.updateHelpers.revertDefaultAxisMinMax()),o.xaxis&&(o=this.updateHelpers.forceXAxisUpdate(o)),o.yaxis&&(o=this.updateHelpers.forceYAxisUpdate(o)),w.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),o.theme&&(o=this.theme.updateThemeOptions(o)),this.updateHelpers._updateOptions(o,c,d,m,b)}},{key:"updateSeries",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],c=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(o,a,c)}},{key:"appendSeries",value:function(o){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],c=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],d=this.w.config.series.slice();return d.push(o),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(d,a,c)}},{key:"appendData",value:function(o){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],c=this;c.w.globals.dataChanged=!0,c.series.getPreviousPaths();for(var d=c.w.config.series.slice(),m=0;m<d.length;m++)if(o[m]!==null&&o[m]!==void 0)for(var b=0;b<o[m].data.length;b++)d[m].data.push(o[m].data[b]);return c.w.config.series=d,a&&(c.w.globals.initialSeries=oe.clone(c.w.config.series)),this.update()}},{key:"update",value:function(o){var a=this;return new Promise(function(c,d){new ad(a.ctx).clear({isUpdating:!0});var m=a.create(a.w.config.series,o);if(!m)return c(a);a.mount(m).then(function(){typeof a.w.config.chart.events.updated=="function"&&a.w.config.chart.events.updated(a,a.w),a.events.fireEvent("updated",[a,a.w]),a.w.globals.isDirty=!0,c(a)}).catch(function(b){d(b)})})}},{key:"getSyncedCharts",value:function(){var o=this.getGroupedCharts(),a=[this];return o.length&&(a=[],o.forEach(function(c){a.push(c)})),a}},{key:"getGroupedCharts",value:function(){var o=this;return Apex._chartInstances.filter(function(a){if(a.group)return!0}).map(function(a){return o.w.config.chart.group===a.group?a.chart:o})}},{key:"toggleSeries",value:function(o){return this.series.toggleSeries(o)}},{key:"highlightSeriesOnLegendHover",value:function(o,a){return this.series.toggleSeriesOnHover(o,a)}},{key:"showSeries",value:function(o){this.series.showSeries(o)}},{key:"hideSeries",value:function(o){this.series.hideSeries(o)}},{key:"highlightSeries",value:function(o){this.series.highlightSeries(o)}},{key:"isSeriesHidden",value:function(o){this.series.isSeriesHidden(o)}},{key:"resetSeries",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(o,a)}},{key:"addEventListener",value:function(o,a){this.events.addEventListener(o,a)}},{key:"removeEventListener",value:function(o,a){this.events.removeEventListener(o,a)}},{key:"addXaxisAnnotation",value:function(o){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,d=this;c&&(d=c),d.annotations.addXaxisAnnotationExternal(o,a,d)}},{key:"addYaxisAnnotation",value:function(o){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,d=this;c&&(d=c),d.annotations.addYaxisAnnotationExternal(o,a,d)}},{key:"addPointAnnotation",value:function(o){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,d=this;c&&(d=c),d.annotations.addPointAnnotationExternal(o,a,d)}},{key:"clearAnnotations",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,a=this;o&&(a=o),a.annotations.clearAnnotations(a)}},{key:"removeAnnotation",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,c=this;a&&(c=a),c.annotations.removeAnnotation(c,o)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(o,a){return this.coreUtils.getSeriesTotalsXRange(o,a)}},{key:"getHighestValueInSeries",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Ec(this.ctx).getMinYMaxY(o).highestY}},{key:"getLowestValueInSeries",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Ec(this.ctx).getMinYMaxY(o).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(o,a){return this.updateHelpers.toggleDataPointSelection(o,a)}},{key:"zoomX",value:function(o,a){this.ctx.toolbar.zoomUpdateOptions(o,a)}},{key:"setLocale",value:function(o){this.localization.setCurrentLocaleValues(o)}},{key:"dataURI",value:function(o){return new Lc(this.ctx).dataURI(o)}},{key:"exportToCSV",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Lc(this.ctx).exportToCSV(o)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var o=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){o.w.globals.resized=!0,o.w.globals.dataChanged=!1,o.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var o=this.w.config.chart.redrawOnWindowResize;typeof o=="function"&&(o=o()),o&&this._windowResize()}}],[{key:"getChartByID",value:function(o){var a=oe.escapeString(o);if(Apex._chartInstances){var c=Apex._chartInstances.filter(function(d){return d.id===a})[0];return c&&c.chart}}},{key:"initOnLoad",value:function(){for(var o=document.querySelectorAll("[data-apexcharts]"),a=0;a<o.length;a++)new C(o[a],JSON.parse(o[a].getAttribute("data-options"))).render()}},{key:"exec",value:function(o,a){var c=this.getChartByID(o);if(c){c.w.globals.isExecCalled=!0;var d=null;if(c.publicMethods.indexOf(a)!==-1){for(var m=arguments.length,b=new Array(m>2?m-2:0),w=2;w<m;w++)b[w-2]=arguments[w];d=c[a].apply(c,b)}return d}}},{key:"merge",value:function(o,a){return oe.extend(o,a)}}]),C}();return _Y=eg,_Y}var WG=VG();const aZ=RG(WG);var OY={exports:{}},iZ;function UG(){return iZ||(iZ=1,function(cs){(function(){var Rs=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},gn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},ys=function(e,n){var s=Array.prototype.slice.call(e);return s.sort(n)},rn=function(e,n){return gs(function(s,i){return e.eq(n(s),n(i))})},gs=function(e){return{eq:e}},Fo=gs(function(e,n){return e===n}),Ot=Fo,lo=function(e){return gs(function(n,s){if(n.length!==s.length)return!1;for(var i=n.length,u=0;u<i;u++)if(!e.eq(n[u],s[u]))return!1;return!0})},ns=function(e,n){return rn(lo(e),function(s){return ys(s,n)})},Bo=function(e){return gs(function(n,s){var i=Object.keys(n),u=Object.keys(s);if(!ns(Ot).eq(i,u))return!1;for(var f=i.length,x=0;x<f;x++){var T=i[x];if(!e.eq(n[T],s[T]))return!1}return!0})},fs=gs(function(e,n){if(e===n)return!0;var s=Rs(e),i=Rs(n);return s!==i?!1:gn(s)?e===n:s==="array"?lo(fs).eq(e,n):s==="object"?Bo(fs).eq(e,n):!1});const Tt=Object.getPrototypeOf,Ln=(e,n,s)=>{var i;return s(e,n.prototype)?!0:((i=e.constructor)===null||i===void 0?void 0:i.name)===n.name},Lo=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Ln(e,String,(s,i)=>i.isPrototypeOf(s))?"string":n},vn=e=>n=>Lo(n)===e,Bt=e=>n=>typeof n===e,vo=e=>n=>e===n,xn=(e,n)=>Wt(e)&&Ln(e,n,(s,i)=>Tt(s)===i),oe=vn("string"),Wt=vn("object"),Yo=e=>xn(e,Object),jt=vn("array"),ce=vo(null),Gt=Bt("boolean"),Wn=vo(void 0),no=e=>e==null,ut=e=>!no(e),Be=Bt("function"),Qo=Bt("number"),Je=(e,n)=>{if(jt(e)){for(let s=0,i=e.length;s<i;++s)if(!n(e[s]))return!1;return!0}return!1},ot=()=>{},V=(e,n)=>(...s)=>e(n.apply(null,s)),Zn=(e,n)=>s=>e(n(s)),Dt=e=>()=>e,Ao=e=>e,Rn=(e,n)=>e===n;function it(e,...n){return(...s)=>{const i=n.concat(s);return e.apply(null,i)}}const No=e=>n=>!e(n),qs=e=>()=>{throw new Error(e)},Ht=e=>e(),Gn=e=>{e()},dt=Dt(!1),wt=Dt(!0);class te{constructor(n,s){this.tag=n,this.value=s}static some(n){return new te(!0,n)}static none(){return te.singletonNone}fold(n,s){return this.tag?s(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?te.some(n(this.value)):te.none()}bind(n){return this.tag?n(this.value):te.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:te.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return ut(n)?te.some(n):te.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}te.singletonNone=new te(!1);const As=Array.prototype.slice,zo=Array.prototype.indexOf,Un=Array.prototype.push,ms=(e,n)=>zo.call(e,n),Ka=(e,n)=>{const s=ms(e,n);return s===-1?te.none():te.some(s)},We=(e,n)=>ms(e,n)>-1,Ie=(e,n)=>{for(let s=0,i=e.length;s<i;s++){const u=e[s];if(n(u,s))return!0}return!1},Ze=(e,n)=>{const s=e.length,i=new Array(s);for(let u=0;u<s;u++){const f=e[u];i[u]=n(f,u)}return i},De=(e,n)=>{for(let s=0,i=e.length;s<i;s++){const u=e[s];n(u,s)}},Xn=(e,n)=>{for(let s=e.length-1;s>=0;s--){const i=e[s];n(i,s)}},Mo=(e,n)=>{const s=[],i=[];for(let u=0,f=e.length;u<f;u++){const x=e[u];(n(x,u)?s:i).push(x)}return{pass:s,fail:i}},Cn=(e,n)=>{const s=[];for(let i=0,u=e.length;i<u;i++){const f=e[i];n(f,i)&&s.push(f)}return s},Qs=(e,n,s)=>(Xn(e,(i,u)=>{s=n(s,i,u)}),s),Vo=(e,n,s)=>(De(e,(i,u)=>{s=n(s,i,u)}),s),Cr=(e,n,s)=>{for(let i=0,u=e.length;i<u;i++){const f=e[i];if(n(f,i))return te.some(f);if(s(f,i))break}return te.none()},us=(e,n)=>Cr(e,n,dt),ur=(e,n)=>{for(let s=0,i=e.length;s<i;s++){const u=e[s];if(n(u,s))return te.some(s)}return te.none()},ri=e=>{const n=[];for(let s=0,i=e.length;s<i;++s){if(!jt(e[s]))throw new Error("Arr.flatten item "+s+" was not an array, input: "+e);Un.apply(n,e[s])}return n},vr=(e,n)=>ri(Ze(e,n)),qo=(e,n)=>{for(let s=0,i=e.length;s<i;++s){const u=e[s];if(n(u,s)!==!0)return!1}return!0},ds=e=>{const n=As.call(e,0);return n.reverse(),n},jr=(e,n)=>Cn(e,s=>!We(n,s)),$s=(e,n)=>{const s={};for(let i=0,u=e.length;i<u;i++){const f=e[i];s[String(f)]=n(f,i)}return s},Go=(e,n)=>{const s=As.call(e,0);return s.sort(n),s},Xs=(e,n)=>n>=0&&n<e.length?te.some(e[n]):te.none(),qn=e=>Xs(e,0),Ns=e=>Xs(e,e.length-1),oo=Be(Array.from)?Array.from:e=>As.call(e),Wr=(e,n)=>{for(let s=0;s<e.length;s++){const i=n(e[s],s);if(i.isSome())return i}return te.none()},yi=(e,n)=>{const s=[],i=Be(n)?u=>Ie(s,f=>n(f,u)):u=>We(s,u);for(let u=0,f=e.length;u<f;u++){const x=e[u];i(x)||s.push(x)}return s},uo=Object.keys,Ri=Object.hasOwnProperty,Yt=(e,n)=>{const s=uo(e);for(let i=0,u=s.length;i<u;i++){const f=s[i],x=e[f];n(x,f)}},os=(e,n)=>Lr(e,(s,i)=>({k:i,v:n(s,i)})),Lr=(e,n)=>{const s={};return Yt(e,(i,u)=>{const f=n(i,u);s[f.k]=f.v}),s},Zr=e=>(n,s)=>{e[s]=n},Fa=(e,n,s,i)=>{Yt(e,(u,f)=>{(n(u,f)?s:i)(u,f)})},Xa=(e,n)=>{const s={},i={};return Fa(e,n,Zr(s),Zr(i)),{t:s,f:i}},Is=(e,n)=>{const s={};return Fa(e,n,Zr(s),ot),s},da=(e,n)=>{const s=[];return Yt(e,(i,u)=>{s.push(n(i,u))}),s},Dr=e=>da(e,Ao),Ts=(e,n)=>Qn(e,n)?te.from(e[n]):te.none(),Qn=(e,n)=>Ri.call(e,n),hr=(e,n)=>Qn(e,n)&&e[n]!==void 0&&e[n]!==null,Ta=(e,n,s=fs)=>Bo(s).eq(e,n),vl=e=>{const n={};return De(e,s=>{n[s]={}}),uo(n)},Ol=e=>e.length!==void 0,Ds=Array.isArray,yo=e=>{if(Ds(e))return e;{const n=[];for(let s=0,i=e.length;s<i;s++)n[s]=e[s];return n}},mr=(e,n,s)=>{if(!e)return!1;if(s=s||e,Ol(e)){for(let i=0,u=e.length;i<u;i++)if(n.call(s,e[i],i,e)===!1)return!1}else for(const i in e)if(Qn(e,i)&&n.call(s,e[i],i,e)===!1)return!1;return!0},Ea=(e,n)=>{const s=[];return mr(e,(i,u)=>{s.push(n(i,u,e))}),s},va=(e,n)=>{const s=[];return mr(e,(i,u)=>{(!n||n(i,u,e))&&s.push(i)}),s},Ms=(e,n)=>{if(e){for(let s=0,i=e.length;s<i;s++)if(e[s]===n)return s}return-1},Ne=(e,n,s,i)=>{let u=Wn(s)?e[0]:s;for(let f=0;f<e.length;f++)u=n.call(i,u,e[f],f);return u},Re=(e,n,s)=>{for(let i=0,u=e.length;i<u;i++)if(n.call(s,e[i],i,e))return i;return-1},gt=e=>e[e.length-1],ft=e=>{let n=!1,s;return(...i)=>(n||(n=!0,s=e.apply(null,i)),s)},Yn=(e,n,s,i)=>{const u=e.isiOS()&&/ipad/i.test(s)===!0,f=e.isiOS()&&!u,x=e.isiOS()||e.isAndroid(),T=x||i("(pointer:coarse)"),D=u||!f&&x&&i("(min-device-width:768px)"),F=f||x&&!D,G=n.isSafari()&&e.isiOS()&&/safari/i.test(s)===!1,J=!F&&!D&&!G;return{isiPad:Dt(u),isiPhone:Dt(f),isTablet:Dt(D),isPhone:Dt(F),isTouch:Dt(T),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Dt(G),isDesktop:Dt(J)}},go=(e,n)=>{for(let s=0;s<e.length;s++){const i=e[s];if(i.test(n))return i}},To=(e,n)=>{const s=go(e,n);if(!s)return{major:0,minor:0};const i=u=>Number(n.replace(s,"$"+u));return Eo(i(1),i(2))},Sr=(e,n)=>{const s=String(n).toLowerCase();return e.length===0?Xe():To(e,s)},Xe=()=>Eo(0,0),Eo=(e,n)=>({major:e,minor:n}),He={nu:Eo,detect:Sr,unknown:Xe},ze=(e,n)=>Wr(n.brands,s=>{const i=s.brand.toLowerCase();return us(e,u=>{var f;return i===((f=u.brand)===null||f===void 0?void 0:f.toLowerCase())}).map(u=>({current:u.name,version:He.nu(parseInt(s.version,10),0)}))}),It=(e,n)=>{const s=String(n).toLowerCase();return us(e,i=>i.search(s))},Vt=(e,n)=>It(e,n).map(s=>{const i=He.detect(s.versionRegexes,n);return{current:s.name,version:i}}),bn=(e,n)=>It(e,n).map(s=>{const i=He.detect(s.versionRegexes,n);return{current:s.name,version:i}}),Hn=(e,n)=>e.substring(n),$n=(e,n,s)=>n===""||e.length>=n.length&&e.substr(s,s+n.length)===n,Mn=(e,n)=>co(e,n)?Hn(e,n.length):e,eo=(e,n,s=0,i)=>{const u=e.indexOf(n,s);return u!==-1?Wn(i)?!0:u+n.length<=i:!1},co=(e,n)=>$n(e,n,0),ps=(e,n)=>$n(e,n,e.length-n.length),Ks=e=>n=>n.replace(e,""),Ys=Ks(/^\s+|\s+$/g),hi=Ks(/^\s+/g),Ja=Ks(/\s+$/g),so=e=>e.length>0,ls=e=>!so(e),ss=(e,n)=>n<=0?"":new Array(n+1).join(e),_a=(e,n=10)=>{const s=parseInt(e,n);return isNaN(s)?te.none():te.some(s)},xa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ea=e=>n=>eo(n,e),pr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>eo(e,"edge/")&&eo(e,"chrome")&&eo(e,"safari")&&eo(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,xa],search:e=>eo(e,"chrome")&&!eo(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>eo(e,"msie")||eo(e,"trident")},{name:"Opera",versionRegexes:[xa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ea("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ea("firefox")},{name:"Safari",versionRegexes:[xa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(eo(e,"safari")||eo(e,"mobile/"))&&eo(e,"applewebkit")}],eu=[{name:"Windows",search:ea("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>eo(e,"iphone")||eo(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ea("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ea("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ea("linux"),versionRegexes:[]},{name:"Solaris",search:ea("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ea("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ea("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ji={browsers:Dt(pr),oses:Dt(eu)},Fs="Edge",Oa="Chromium",Ra="IE",ya="Opera",Di="Firefox",Qa="Safari",ai=()=>Zi({current:void 0,version:He.unknown()}),Zi=e=>{const n=e.current,s=e.version,i=u=>()=>n===u;return{current:n,version:s,isEdge:i(Fs),isChromium:i(Oa),isIE:i(Ra),isOpera:i(ya),isFirefox:i(Di),isSafari:i(Qa)}},Mi={unknown:ai,nu:Zi,edge:Dt(Fs),chromium:Dt(Oa),ie:Dt(Ra),opera:Dt(ya),firefox:Dt(Di),safari:Dt(Qa)},ii="Windows",Ql="iOS",wi="Android",gi="Linux",ha="macOS",ec="Solaris",sl="FreeBSD",tc="ChromeOS",Ci=()=>ga({current:void 0,version:He.unknown()}),ga=e=>{const n=e.current,s=e.version,i=u=>()=>n===u;return{current:n,version:s,isWindows:i(ii),isiOS:i(Ql),isAndroid:i(wi),isMacOS:i(ha),isLinux:i(gi),isSolaris:i(ec),isFreeBSD:i(sl),isChromeOS:i(tc)}},Ba={unknown:Ci,nu:ga,windows:Dt(ii),ios:Dt(Ql),android:Dt(wi),linux:Dt(gi),macos:Dt(ha),solaris:Dt(ec),freebsd:Dt(sl),chromeos:Dt(tc)},Ha={detect:(e,n,s)=>{const i=ji.browsers(),u=ji.oses(),f=n.bind(D=>ze(i,D)).orThunk(()=>Vt(i,e)).fold(Mi.unknown,Mi.nu),x=bn(u,e).fold(Ba.unknown,Ba.nu),T=Yn(x,f,e,s);return{browser:f,os:x,deviceType:T}}},nc=e=>window.matchMedia(e).matches;let gr=ft(()=>Ha.detect(window.navigator.userAgent,te.from(window.navigator.userAgentData),nc));const he=()=>gr(),Me=window.navigator.userAgent,Ge=he(),mt=Ge.browser,Qt=Ge.os,kt=Ge.deviceType,Ps=Me.indexOf("Windows Phone")!==-1,In={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:mt.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!mt.isIE(),windowsPhone:Ps,browser:{current:mt.current,version:mt.version,isChromium:mt.isChromium,isEdge:mt.isEdge,isFirefox:mt.isFirefox,isIE:mt.isIE,isOpera:mt.isOpera,isSafari:mt.isSafari},os:{current:Qt.current,version:Qt.version,isAndroid:Qt.isAndroid,isChromeOS:Qt.isChromeOS,isFreeBSD:Qt.isFreeBSD,isiOS:Qt.isiOS,isLinux:Qt.isLinux,isMacOS:Qt.isMacOS,isSolaris:Qt.isSolaris,isWindows:Qt.isWindows},deviceType:{isDesktop:kt.isDesktop,isiPad:kt.isiPad,isiPhone:kt.isiPhone,isPhone:kt.isPhone,isTablet:kt.isTablet,isTouch:kt.isTouch,isWebView:kt.isWebView}},_o=/^\s*|\s*$/g,kr=e=>no(e)?"":(""+e).replace(_o,""),Q=(e,n)=>n?n==="array"&&Ds(e)?!0:typeof e===n:e!==void 0,xe=(e,n,s={})=>{const i=oe(e)?e.split(n||","):e||[];let u=i.length;for(;u--;)s[i[u]]={};return s},Le=Qn,st=(e,...n)=>{for(let s=0;s<n.length;s++){const i=n[s];for(const u in i)if(Qn(i,u)){const f=i[u];f!==void 0&&(e[u]=f)}}return e},Mt=function(e,n,s,i){i=i||this,e&&(s&&(e=e[s]),mr(e,(u,f)=>n.call(i,u,f,s)===!1?!1:(Mt(u,n,s,i),!0)))},zt={trim:kr,isArray:Ds,is:Q,toArray:yo,makeMap:xe,each:mr,map:Ea,grep:va,inArray:Ms,hasOwn:Le,extend:st,walk:Mt,resolve:(e,n=window)=>{const s=e.split(".");for(let i=0,u=s.length;i<u&&(n=n[s[i]],!!n);i++);return n},explode:(e,n)=>jt(e)?e:e===""?[]:Ea(e.split(n||","),kr),_addCacheSuffix:e=>{const n=In.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},or=(e,n,s=Rn)=>e.exists(i=>s(i,n)),Da=(e,n,s=Rn)=>Oo(e,n,s).getOr(e.isNone()&&n.isNone()),Rl=e=>{const n=[],s=i=>{n.push(i)};for(let i=0;i<e.length;i++)e[i].each(s);return n},Oo=(e,n,s)=>e.isSome()&&n.isSome()?te.some(s(e.getOrDie(),n.getOrDie())):te.none(),Si=(e,n,s,i)=>e.isSome()&&n.isSome()&&s.isSome()?te.some(i(e.getOrDie(),n.getOrDie(),s.getOrDie())):te.none(),rl=(e,n)=>e?te.some(n):te.none(),Ma=typeof window<"u"?window:Function("return this;")(),Xo=(e,n)=>{let s=n??Ma;for(let i=0;i<e.length&&s!==void 0&&s!==null;++i)s=s[e[i]];return s},xl=(e,n)=>{const s=e.split(".");return Xo(s,n)},yl=(e,n)=>xl(e,n),Ku=(e,n)=>{const s=yl(e,n);if(s==null)throw new Error(e+" not available on this browser");return s},Gr=Object.getPrototypeOf,Ya=e=>Ku("HTMLElement",e),tn=e=>{const n=xl("ownerDocument.defaultView",e);return Wt(e)&&(Ya(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Gr(e).constructor.name))},bs=8,Gi=9,Pi=11,ja=1,pe=3,Se=e=>e.dom.nodeName.toLowerCase(),at=e=>e.dom.nodeType,Et=e=>n=>at(n)===e,ro=e=>at(e)===bs||Se(e)==="#comment",es=e=>Jo(e)&&tn(e.dom),Jo=Et(ja),fr=Et(pe),na=Et(Gi),ei=Et(Pi),$a=e=>n=>Jo(n)&&Se(n)===e,oa=(e,n,s)=>{if(oe(s)||Gt(s)||Qo(s))e.setAttribute(n,s+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",s,":: Element ",e),new Error("Attribute value was not simple")},fa=(e,n,s)=>{oa(e.dom,n,s)},Mr=(e,n)=>{const s=e.dom;Yt(n,(i,u)=>{oa(s,u,i)})},Pa=(e,n)=>{const s=e.dom.getAttribute(n);return s===null?void 0:s},Fr=(e,n)=>te.from(Pa(e,n)),Nr=(e,n)=>{const s=e.dom;return s&&s.hasAttribute?s.hasAttribute(n):!1},er=(e,n)=>{e.dom.removeAttribute(n)},$l=e=>{const n=e.dom.attributes;return n==null||n.length===0},Lc=e=>Vo(e.dom.attributes,(n,s)=>(n[s.name]=s.value,n),{}),zl=(e,n)=>{const s=Pa(e,n);return s===void 0||s===""?[]:s.split(" ")},tu=(e,n,s)=>{const u=zl(e,n).concat([s]);return fa(e,n,u.join(" ")),!0},nu=(e,n,s)=>{const i=Cn(zl(e,n),u=>u!==s);return i.length>0?fa(e,n,i.join(" ")):er(e,n),!1},Ec=e=>e.dom.classList!==void 0,_c=e=>zl(e,"class"),Dl=(e,n)=>tu(e,"class",n),qi=(e,n)=>nu(e,"class",n),jh=(e,n)=>We(_c(e),n)?qi(e,n):Dl(e,n),oc=(e,n)=>{Ec(e)?e.dom.classList.add(n):Dl(e,n)},mh=e=>{(Ec(e)?e.dom.classList:_c(e)).length===0&&er(e,"class")},Tu=(e,n)=>{Ec(e)?e.dom.classList.remove(n):qi(e,n),mh(e)},ph=(e,n)=>{const s=Ec(e)?e.dom.classList.toggle(n):jh(e,n);return mh(e),s},Md=(e,n)=>Ec(e)&&e.dom.classList.contains(n),Eu=(e,n)=>{const i=(n||document).createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1){const u="HTML does not have a single root node";throw console.error(u,e),new Error(u)}return fc(i.childNodes[0])},Pd=(e,n)=>{const i=(n||document).createElement(e);return fc(i)},bh=(e,n)=>{const i=(n||document).createTextNode(e);return fc(i)},fc=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},$e={fromHtml:Eu,fromTag:Pd,fromText:bh,fromDom:fc,fromPoint:(e,n,s)=>te.from(e.dom.elementFromPoint(n,s)).map(fc)},ou=(e,n)=>{const s=[],i=f=>(s.push(f),n(f));let u=n(e);do u=u.bind(i);while(u.isSome());return s},Ml=(e,n)=>{const s=e.dom;if(s.nodeType!==ja)return!1;{const i=s;if(i.matches!==void 0)return i.matches(n);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(n);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(n);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Gh=e=>e.nodeType!==ja&&e.nodeType!==Gi&&e.nodeType!==Pi||e.childElementCount===0,Ng=(e,n)=>{const s=n===void 0?document:n.dom;return Gh(s)?[]:Ze(s.querySelectorAll(e),$e.fromDom)},Nc=(e,n)=>{const s=n===void 0?document:n.dom;return Gh(s)?te.none():te.from(s.querySelector(e)).map($e.fromDom)},rs=(e,n)=>e.dom===n.dom,Li=(e,n)=>{const s=e.dom,i=n.dom;return s===i?!1:s.contains(i)},fi=e=>$e.fromDom(e.dom.ownerDocument),Ic=e=>na(e)?e:fi(e),vh=e=>$e.fromDom(Ic(e).dom.documentElement),Ju=e=>$e.fromDom(Ic(e).dom.defaultView),Za=e=>te.from(e.dom.parentNode).map($e.fromDom),Qu=e=>te.from(e.dom.parentElement).map($e.fromDom),mc=(e,n)=>{const s=Be(n)?n:dt;let i=e.dom;const u=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const f=i.parentNode,x=$e.fromDom(f);if(u.push(x),s(x)===!0)break;i=f}return u},ed=e=>{const n=s=>Cn(s,i=>!rs(e,i));return Za(e).map(li).map(n).getOr([])},Fc=e=>te.from(e.dom.previousSibling).map($e.fromDom),Ni=e=>te.from(e.dom.nextSibling).map($e.fromDom),qh=e=>ds(ou(e,Fc)),td=e=>ou(e,Ni),li=e=>Ze(e.dom.childNodes,$e.fromDom),wl=(e,n)=>{const s=e.dom.childNodes;return te.from(s[n]).map($e.fromDom)},Ki=e=>wl(e,0),_u=e=>wl(e,e.dom.childNodes.length-1),nd=e=>e.dom.childNodes.length,Kh=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return $e.fromDom(n)},su=e=>ei(e)&&ut(e.dom.host),Vl=e=>$e.fromDom(e.dom.getRootNode()),od=e=>su(e)?e:Kh(Ic(e)),Ig=e=>su(e)?e:$e.fromDom(Ic(e).dom.body),Jh=e=>{const n=Vl(e);return su(n)?te.some(n):te.none()},Fg=e=>$e.fromDom(e.dom.host),Qh=e=>{if(ut(e.target)){const n=$e.fromDom(e.target);if(Jo(n)&&sd(n)&&e.composed&&e.composedPath){const s=e.composedPath();if(s)return qn(s)}}return te.from(e.target)},sd=e=>ut(e.dom.shadowRoot),ru=e=>{const n=fr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const s=n.ownerDocument;return Jh($e.fromDom(n)).fold(()=>s.body.contains(n),Zn(ru,Fg))};var Ld=(e,n,s,i,u)=>e(s,i)?te.some(s):Be(u)&&u(s)?te.none():n(s,i,u);const Br=(e,n,s)=>{let i=e.dom;const u=Be(s)?s:dt;for(;i.parentNode;){i=i.parentNode;const f=$e.fromDom(i);if(n(f))return te.some(f);if(u(f))break}return te.none()},Hr=(e,n,s)=>Ld((u,f)=>f(u),Br,e,n,s),Bc=(e,n)=>{const s=e.dom;return s.parentNode?Wl($e.fromDom(s.parentNode),i=>!rs(e,i)&&n(i)):te.none()},Wl=(e,n)=>{const s=u=>n($e.fromDom(u));return us(e.dom.childNodes,s).map($e.fromDom)},Nd=(e,n)=>{const s=i=>{for(let u=0;u<i.childNodes.length;u++){const f=$e.fromDom(i.childNodes[u]);if(n(f))return te.some(f);const x=s(i.childNodes[u]);if(x.isSome())return x}return te.none()};return s(e.dom)},La=(e,n,s)=>Br(e,i=>Ml(i,n),s),to=(e,n)=>Nc(n,e),Oc=(e,n,s)=>Ld((u,f)=>Ml(u,f),La,e,n,s),rd=e=>Oc(e,"[contenteditable]"),Pl=(e,n=!1)=>ru(e)?e.dom.isContentEditable:rd(e).fold(Dt(n),s=>zs(s)==="true"),zs=e=>e.dom.contentEditable,Hc=e=>e.style!==void 0&&Be(e.style.getPropertyValue),ad=(e,n,s)=>{if(!oe(s))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",s,":: Element ",e),new Error("CSS value must be a string: "+s);Hc(e)&&e.style.setProperty(n,s)},id=(e,n)=>{Hc(e)&&e.style.removeProperty(n)},eg=(e,n,s)=>{const i=e.dom;ad(i,n,s)},C=(e,n)=>{const s=e.dom;Yt(n,(i,u)=>{ad(s,u,i)})},o=(e,n)=>{const s=e.dom,u=window.getComputedStyle(s).getPropertyValue(n);return u===""&&!ru(e)?a(s,n):u},a=(e,n)=>Hc(e)?e.style.getPropertyValue(n):"",c=(e,n)=>{const s=e.dom,i=a(s,n);return te.from(i).filter(u=>u.length>0)},d=e=>{const n={},s=e.dom;if(Hc(s))for(let i=0;i<s.style.length;i++){const u=s.style.item(i);n[u]=s.style[u]}return n},m=(e,n)=>{const s=e.dom;id(s,n),or(Fr(e,"style").map(Ys),"")&&er(e,"style")},b=e=>e.dom.offsetWidth,w=(e,n)=>{Za(e).each(i=>{i.dom.insertBefore(n.dom,e.dom)})},A=(e,n)=>{Ni(e).fold(()=>{Za(e).each(u=>{M(u,n)})},i=>{w(i,n)})},E=(e,n)=>{Ki(e).fold(()=>{M(e,n)},i=>{e.dom.insertBefore(n.dom,i.dom)})},M=(e,n)=>{e.dom.appendChild(n.dom)},O=(e,n)=>{w(e,n),M(n,e)},L=(e,n)=>{De(n,(s,i)=>{const u=i===0?e:n[i-1];A(u,s)})},$=(e,n)=>{De(n,s=>{M(e,s)})},Y=e=>{e.dom.textContent="",De(li(e),n=>{U(n)})},U=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},ne=e=>{const n=li(e);n.length>0&&L(e,n),U(e)},ae=(e,n)=>{const i=(n||document).createElement("div");return i.innerHTML=e,li($e.fromDom(i))},le=e=>Ze(e,$e.fromDom),me=e=>e.dom.innerHTML,Oe=(e,n)=>{const i=fi(e).dom,u=$e.fromDom(i.createDocumentFragment()),f=ae(n,i);$(u,f),Y(e),M(e,u)},Te=e=>{const n=$e.fromTag("div"),s=$e.fromDom(e.dom.cloneNode(!0));return M(n,s),me(n)},Ve=(e,n,s,i,u,f,x)=>({target:e,x:n,y:s,stop:i,prevent:u,kill:f,raw:x}),ve=e=>{const n=$e.fromDom(Qh(e).getOr(e.target)),s=()=>e.stopPropagation(),i=()=>e.preventDefault(),u=V(i,s);return Ve(n,e.clientX,e.clientY,s,i,u,e)},Pe=(e,n)=>s=>{e(s)&&n(ve(s))},ht=(e,n,s,i,u)=>{const f=Pe(s,i);return e.dom.addEventListener(n,f,u),{unbind:it(W,e,n,f,u)}},P=(e,n,s,i)=>ht(e,n,s,i,!1),W=(e,n,s,i)=>{e.dom.removeEventListener(n,s,i)},q=(e,n)=>({left:e,top:n,translate:(i,u)=>q(e+i,n+u)}),ue=q,ye=e=>{const n=e.getBoundingClientRect();return ue(n.left,n.top)},nt=(e,n)=>e!==void 0?e:n!==void 0?n:0,Ft=e=>{const n=e.dom.ownerDocument,s=n.body,i=n.defaultView,u=n.documentElement;if(s===e.dom)return ue(s.offsetLeft,s.offsetTop);const f=nt(i==null?void 0:i.pageYOffset,u.scrollTop),x=nt(i==null?void 0:i.pageXOffset,u.scrollLeft),T=nt(u.clientTop,s.clientTop),D=nt(u.clientLeft,s.clientLeft);return an(e).translate(x-D,f-T)},an=e=>{const n=e.dom,i=n.ownerDocument.body;return i===n?ue(i.offsetLeft,i.offsetTop):ru(e)?ye(n):ue(0,0)},hn=e=>{const n=e!==void 0?e.dom:document,s=n.body.scrollLeft||n.documentElement.scrollLeft,i=n.body.scrollTop||n.documentElement.scrollTop;return ue(s,i)},Jt=(e,n,s)=>{const u=(s!==void 0?s.dom:document).defaultView;u&&u.scrollTo(e,n)},wo=(e,n)=>{he().browser.isSafari()&&Be(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Ro=e=>{const n=e===void 0?window:e;return he().browser.isFirefox()?te.none():te.from(n.visualViewport)},sr=(e,n,s,i)=>({x:e,y:n,width:s,height:i,right:e+s,bottom:n+i}),qr=e=>{const n=e===void 0?window:e,s=n.document,i=hn($e.fromDom(s));return Ro(n).fold(()=>{const u=n.document.documentElement,f=u.clientWidth,x=u.clientHeight;return sr(i.left,i.top,f,x)},u=>sr(Math.max(u.pageLeft,i.left),Math.max(u.pageTop,i.top),u.width,u.height))},$r=(e,n)=>Cn(li(e),n),Ii=(e,n)=>{let s=[];return De(li(e),i=>{n(i)&&(s=s.concat([i])),s=s.concat(Ii(i,n))}),s},Vs=(e,n)=>Ng(n,e),Ar=(e,n,s)=>Br(e,n,s).isSome(),ma=(e,n)=>Bc(e,n).isSome(),al=(e,n)=>Nd(e,n).isSome();class Tr{constructor(n,s){this.node=n,this.rootNode=s,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,s,i,u){if(n){if(!u&&n[s])return n[s];if(n!==this.rootNode){let f=n[i];if(f)return f;for(let x=n.parentNode;x&&x!==this.rootNode;x=x.parentNode)if(f=x[i],f)return f}}}findPreviousNode(n,s){if(n){const i=n.previousSibling;if(this.rootNode&&i===this.rootNode)return;if(i){if(!s){for(let f=i.lastChild;f;f=f.lastChild)if(!f.lastChild)return f}return i}const u=n.parentNode;if(u&&u!==this.rootNode)return u}}}const pc="\uFEFF",za="",il=e=>e===pc,mi=e=>e.replace(/\uFEFF/g,""),fo=/^[ \t\r\n]*$/,Rc=e=>fo.test(e),fb=e=>{for(const n of e)if(!il(n))return!1;return!0},$m=e=>" \f	\v".indexOf(e)!==-1,tg=e=>e===`
`||e==="\r",mb=(e,n)=>n<e.length&&n>=0?tg(e[n]):!1,au=(e,n=4,s=!0,i=!0)=>{const u=ss(" ",n),f=e.replace(/\t/g,u);return Vo(f,(T,D)=>$m(D)||D===za?T.pcIsSpace||T.str===""&&s||T.str.length===f.length-1&&i||mb(f,T.str.length+1)?{pcIsSpace:!1,str:T.str+za}:{pcIsSpace:!0,str:T.str+" "}:{pcIsSpace:tg(D),str:T.str+D},{pcIsSpace:!1,str:""}).str},ld=e=>n=>!!n&&n.nodeType===e,ng=e=>!!e&&!Object.getPrototypeOf(e),An=ld(1),iu=e=>An(e)&&es($e.fromDom(e)),zm=e=>An(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Bg=e=>{const n=e.toLowerCase();return s=>ut(s)&&s.nodeName.toLowerCase()===n},lu=e=>{const n=e.map(s=>s.toLowerCase());return s=>{if(s&&s.nodeName){const i=s.nodeName.toLowerCase();return We(n,i)}return!1}},Rf=(e,n)=>{const s=n.toLowerCase().split(" ");return i=>{if(An(i)){const u=i.ownerDocument.defaultView;if(u)for(let f=0;f<s.length;f++){const x=u.getComputedStyle(i,null);if((x?x.getPropertyValue(e):null)===s[f])return!0}}return!1}},og=e=>n=>An(n)&&n.hasAttribute(e),Id=e=>An(e)&&e.hasAttribute("data-mce-bogus"),Df=e=>An(e)&&e.getAttribute("data-mce-bogus")==="all",Ou=e=>An(e)&&e.tagName==="TABLE",l0=e=>n=>!!(iu(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ka=lu(["textarea","input"]),qt=ld(3),Ul=ld(4),sg=ld(7),Ga=ld(8),Hg=ld(9),Fi=ld(11),rr=Bg("br"),Mf=Bg("img"),Lt=l0("true"),ar=l0("false"),Pf=lu(["td","th"]),ki=lu(["td","th","caption"]),Cl=lu(["video","audio","object","embed"]),$c=Bg("li"),pb=Bg("details"),xh=Bg("summary"),bb={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Dc=(e,n,s)=>{const i=$e.fromDom(n),u=$e.fromDom(e),f=s.getWhitespaceElements();return Ar(u,T=>Qn(f,Se(T)),it(rs,i))},tr=e=>An(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),cd=(e,n)=>An(e)&&Qn(n.getNonEmptyElements(),e.nodeName),Lf=og("data-mce-bookmark"),Ai=e=>Qu($e.fromDom(e)).exists(n=>!Pl(n)),Vm=(e,n,s)=>Rc(e.data)&&!Dc(e,n,s),Ru=(e,n,s,i)=>qt(e)&&!Vm(e,n,s)&&(!i.includeZwsp||!fb(e.data)),Nf=(e,n,s,i)=>Be(i.isContent)&&i.isContent(n)||cd(n,e)||Lf(n)||tr(n)||Ru(n,s,e,i)||ar(n)||Lt(n)&&Ai(n),Bi=(e,n,s)=>{const i={...bb,...s};if(i.checkRootAsContent&&Nf(e,n,n,i))return!1;let u=n.firstChild,f=0;if(!u)return!0;const x=new Tr(u,n);do{if(i.skipBogus&&An(u)){const T=u.getAttribute("data-mce-bogus");if(T){u=x.next(T==="all");continue}}if(Ga(u)){u=x.next(!0);continue}if(rr(u)){f++,u=x.next();continue}if(Nf(e,u,n,i))return!1;u=x.next()}while(u);return f<=1},Sl=(e,n,s)=>Bi(e,n.dom,{checkRootAsContent:!0,...s}),rt=(e,n,s)=>Nf(e,n,n,{includeZwsp:bb.includeZwsp,...s}),Ir=e=>{let n=e;return{get:()=>n,set:u=>{n=u}}},Wm=e=>{const n=Ir(te.none()),s=()=>n.get().each(e);return{clear:()=>{s(),n.set(te.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:T=>{s(),n.set(te.some(T))}}},ti=e=>{const n=Ir(te.none()),s=()=>n.get().each(T=>clearInterval(T));return{clear:()=>{s(),n.set(te.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:T=>{s(),n.set(te.some(setInterval(T,e)))}}},Ji=()=>{const e=Wm(ot);return{...e,on:s=>e.get().each(s)}},Ti=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},sa=e=>Ti(e)!=="html",Um=e=>sa(e.nodeName),yh=e=>Ti(e.nodeName),N=["svg","math"],z=()=>{const e=Ji(),n=()=>e.get().map(yh).getOr("html");return{track:u=>(Um(u)?e.set(u):e.get().exists(f=>!f.contains(u))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},re="data-mce-block",we=e=>Cn(uo(e),n=>!/[A-Z]/.test(n)),je=e=>Ze(we(e),n=>{const s=CSS.escape(n);return`${s}:`+Ze(N,i=>`not(${i} ${s})`).join(":")}).join(","),Pt=(e,n)=>ut(n.querySelector(e))?(n.setAttribute(re,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(re),!1),on=(e,n)=>{const s=je(e.getTransparentElements()),i=je(e.getBlockElements());return Cn(n.querySelectorAll(s),u=>Pt(i,u))},zn=(e,n,s)=>{var i;const u=s?"lastChild":"firstChild";for(let f=n[u];f;f=f[u])if(Bi(e,f,{checkRootAsContent:!0})){(i=f.parentNode)===null||i===void 0||i.removeChild(f);return}},Po=(e,n,s)=>{const i=document.createRange(),u=n.parentNode;if(u){i.setStartBefore(n),i.setEndBefore(s);const f=i.extractContents();zn(e,f,!0),i.setStartAfter(s),i.setEndAfter(n);const x=i.extractContents();zn(e,x,!1),Bi(e,f,{checkRootAsContent:!0})||u.insertBefore(f,n),Bi(e,s,{checkRootAsContent:!0})||u.insertBefore(s,n),Bi(e,x,{checkRootAsContent:!0})||u.insertBefore(x,n),u.removeChild(n)}},ts=(e,n,s)=>{const i=e.getBlockElements(),u=$e.fromDom(n),f=T=>Se(T)in i,x=T=>rs(T,u);De(le(s),T=>{Br(T,f,x).each(D=>{const F=$r(T,G=>f(G)&&!e.isValidChild(Se(D),Se(G)));if(F.length>0){const G=Qu(D);De(F,J=>{Br(J,f,x).each(ee=>{Po(e,ee.dom,J.dom)})}),G.each(J=>on(e,J.dom))}})})},Kr=(e,n,s)=>{De([...s,...Fd(e,n)?[n]:[]],i=>De(Vs($e.fromDom(i),i.nodeName.toLowerCase()),u=>{Bd(e,u.dom)&&ne(u)}))},br=(e,n)=>{const s=on(e,n);ts(e,n,s),Kr(e,n,s)},pa=(e,n)=>{if(ud(e,n)){const s=je(e.getBlockElements());Pt(s,n)}},sc=(e,n,s)=>{const i=f=>rs(f,$e.fromDom(n)),u=mc($e.fromDom(s),i);Xs(u,u.length-2).filter(Jo).fold(()=>br(e,n),f=>br(e,f.dom))},zc=e=>e.hasAttribute(re),ll=(e,n)=>Qn(e.getTransparentElements(),n),ud=(e,n)=>An(n)&&ll(e,n.nodeName),Fd=(e,n)=>ud(e,n)&&zc(n),Bd=(e,n)=>ud(e,n)&&!zc(n),wh=(e,n)=>n.type===1&&ll(e,n.name)&&oe(n.attr(re)),$g=he().browser,If=e=>us(e,Jo),Xm=e=>$g.isFirefox()&&Se(e)==="table"?If(li(e)).filter(n=>Se(n)==="caption").bind(n=>If(td(n)).map(s=>{const i=s.dom.offsetTop,u=n.dom.offsetTop,f=n.dom.offsetHeight;return i<=u?-f:0})).getOr(0):0,pi=(e,n)=>e.children&&We(e.children,n),Du=(e,n,s)=>{let i=0,u=0;const f=e.ownerDocument;if(s=s||e,n){if(s===e&&n.getBoundingClientRect&&o($e.fromDom(e),"position")==="static"){const T=n.getBoundingClientRect();return i=T.left+(f.documentElement.scrollLeft||e.scrollLeft)-f.documentElement.clientLeft,u=T.top+(f.documentElement.scrollTop||e.scrollTop)-f.documentElement.clientTop,{x:i,y:u}}let x=n;for(;x&&x!==s&&x.nodeType&&!pi(x,s);){const T=x;i+=T.offsetLeft||0,u+=T.offsetTop||0,x=T.offsetParent}for(x=n.parentNode;x&&x!==s&&x.nodeType&&!pi(x,s);)i-=x.scrollLeft||0,u-=x.scrollTop||0,x=x.parentNode;u+=Xm($e.fromDom(n))}return{x:i,y:u}},Ch=(e,n={})=>{let s=0;const i={},u=$e.fromDom(e),f=Ic(u),x=Ye=>{n.referrerPolicy=Ye},T=Ye=>{n.contentCssCors=Ye},D=Ye=>{M(od(u),Ye)},F=Ye=>{const qe=od(u);to(qe,"#"+Ye).each(U)},G=Ye=>Ts(i,Ye).getOrThunk(()=>({id:"mce-u"+s++,passed:[],failed:[],count:0})),J=Ye=>new Promise((qe,tt)=>{let lt;const $t=zt._addCacheSuffix(Ye),nn=G($t);i[$t]=nn,nn.count++;const On=(Dn,ho)=>{De(Dn,Gn),nn.status=ho,nn.passed=[],nn.failed=[],lt&&(lt.onload=null,lt.onerror=null,lt=null)},_t=()=>On(nn.passed,2),vt=()=>On(nn.failed,3);if(qe&&nn.passed.push(qe),tt&&nn.failed.push(tt),nn.status===1)return;if(nn.status===2){_t();return}if(nn.status===3){vt();return}nn.status=1;const Ut=$e.fromTag("link",f.dom);Mr(Ut,{rel:"stylesheet",type:"text/css",id:nn.id}),n.contentCssCors&&fa(Ut,"crossOrigin","anonymous"),n.referrerPolicy&&fa(Ut,"referrerpolicy",n.referrerPolicy),lt=Ut.dom,lt.onload=_t,lt.onerror=vt,D(Ut),fa(Ut,"href",$t)}),ee=(Ye,qe)=>{const tt=G(Ye);i[Ye]=tt,tt.count++;const lt=$e.fromTag("style",f.dom);Mr(lt,{rel:"stylesheet",type:"text/css",id:tt.id}),lt.dom.innerHTML=qe,D(lt)},fe=Ye=>Promise.allSettled(Ze(Ye,tt=>J(tt).then(Dt(tt)))).then(tt=>{const lt=Mo(tt,$t=>$t.status==="fulfilled");return lt.fail.length>0?Promise.reject(Ze(lt.fail,$t=>$t.reason)):Ze(lt.pass,$t=>$t.value)}),ke=Ye=>{const qe=zt._addCacheSuffix(Ye);Ts(i,qe).each(tt=>{--tt.count===0&&(delete i[qe],F(tt.id))})};return{load:J,loadRawCss:ee,loadAll:fe,unload:ke,unloadRawCss:Ye=>{Ts(i,Ye).each(qe=>{--qe.count===0&&(delete i[Ye],F(qe.id))})},unloadAll:Ye=>{De(Ye,qe=>{ke(qe)})},_setReferrerPolicy:x,_setContentCssCors:T}},wa=(()=>{const e=new WeakMap;return{forElement:(s,i)=>{const f=Vl(s).dom;return te.from(e.get(f)).getOrThunk(()=>{const x=Ch(f,i);return e.set(f,x),x})}}})(),Na=e=>e.nodeName.toLowerCase()==="span",Xl=(e,n)=>ut(e)&&(rt(n,e)||n.isInline(e.nodeName.toLowerCase())),Ym=(e,n,s)=>{const i=new Tr(e,n).prev(!1),u=new Tr(e,n).next(!1),f=Wn(i)||Xl(i,s),x=Wn(u)||Xl(u,s);return f&&x},jm=e=>Na(e)&&e.getAttribute("data-mce-type")==="bookmark",bc=(e,n,s)=>qt(e)&&e.data.length>0&&Ym(e,n,s),vc=e=>An(e)?e.childNodes.length>0:!1,NC=e=>Fi(e)||Hg(e),Mu=(e,n,s,i)=>{var u;const f=i||n;if(An(n)&&jm(n))return n;const x=n.childNodes;for(let T=x.length-1;T>=0;T--)Mu(e,x[T],s,f);if(An(n)){const T=n.childNodes;T.length===1&&jm(T[0])&&((u=n.parentNode)===null||u===void 0||u.insertBefore(T[0],n))}return!NC(n)&&!rt(s,n)&&!vc(n)&&!bc(n,f,s)&&e.remove(n),n},Ff=zt.makeMap,Hd=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sh=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bf=/[<>&\"\']/g,BT=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,vb={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},zg={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},HT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ci=e=>{const n=$e.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},c0=(e,n)=>{const s={};if(e){const i=e.split(",");n=n||10;for(let u=0;u<i.length;u+=2){const f=String.fromCharCode(parseInt(i[u],n));if(!zg[f]){const x="&"+i[u+1]+";";s[f]=x,s[x]=f}}return s}else return},$d=c0("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Hf=(e,n)=>e.replace(n?Hd:Sh,s=>zg[s]||s),xb=e=>(""+e).replace(Bf,n=>zg[n]||n),zd=(e,n)=>e.replace(n?Hd:Sh,s=>s.length>1?"&#"+((s.charCodeAt(0)-55296)*1024+(s.charCodeAt(1)-56320)+65536)+";":zg[s]||"&#"+s.charCodeAt(0)+";"),kl=(e,n,s)=>{const i=s||$d;return e.replace(n?Hd:Sh,u=>zg[u]||i[u]||u)},Wg={encodeRaw:Hf,encodeAllRaw:xb,encodeNumeric:zd,encodeNamed:kl,getEncodeFunc:(e,n)=>{const s=c0(n)||$d,i=(x,T)=>x.replace(T?Hd:Sh,D=>zg[D]!==void 0?zg[D]:s[D]!==void 0?s[D]:D.length>1?"&#"+((D.charCodeAt(0)-55296)*1024+(D.charCodeAt(1)-56320)+65536)+";":"&#"+D.charCodeAt(0)+";"),u=(x,T)=>kl(x,T,s),f=Ff(e.replace(/\+/g,","));return f.named&&f.numeric?i:f.named?n?u:kl:f.numeric?zd:Hf},decode:e=>e.replace(BT,(n,s)=>s?(s.charAt(0).toLowerCase()==="x"?s=parseInt(s.substr(1),16):s=parseInt(s,10),s>65535?(s-=65536,String.fromCharCode(55296+(s>>10),56320+(s&1023))):vb[s]||String.fromCharCode(s)):HT[n]||$d[n]||ci(n))},cl=(e,n)=>(e=zt.trim(e),e?e.split(n||" "):[]),d0=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),h0=e=>Wt(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",$T=e=>{const n=s=>jt(s)?Ze(s,n):h0(s)?new RegExp(s.source,s.flags):Wt(s)?os(s,n):s;return n(e)},IC=e=>{const n=/^(~)?(.+)$/;return vr(cl(e,","),s=>{const i=n.exec(s);if(i){const f=i[1]==="~"?"span":"div",x=i[2];return[{cloneName:f,name:x}]}else return[]})},Ug=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),$f=e=>{let n,s;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",s+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(s=[s,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const i=[n,s].join(" ");return{blockContent:n,phrasingContent:s,flowContent:i}},Mc=e=>{const{blockContent:n,phrasingContent:s,flowContent:i}=$f(e),u=f=>Object.freeze(f.split(" "));return Object.freeze({blockContent:u(n),phrasingContent:u(s),flowContent:u(i)})},cu={html4:ft(()=>Mc("html4")),html5:ft(()=>Mc("html5")),"html5-strict":ft(()=>Mc("html5-strict"))},uu=(e,n)=>{const{blockContent:s,phrasingContent:i,flowContent:u}=cu[e]();return n==="blocks"?te.some(s):n==="phrasing"?te.some(i):n==="flow"?te.some(u):te.none()},yb=e=>{const n=Ug(e),{phrasingContent:s,flowContent:i}=$f(e),u={},f=(D,F,G)=>{u[D]={attributes:$s(F,Dt({})),attributesOrder:F,children:$s(G,Dt({}))}},x=(D,F="",G="")=>{const J=cl(G),ee=cl(D);let fe=ee.length;const ke=[...n,...cl(F)];for(;fe--;)f(ee[fe],ke.slice(),J)},T=(D,F)=>{const G=cl(D),J=cl(F);let ee=G.length;for(;ee--;){const fe=u[G[ee]];for(let ke=0,be=J.length;ke<be;ke++)fe.attributes[J[ke]]={},fe.attributesOrder.push(J[ke])}};return e!=="html5-strict"&&(De(cl("acronym applet basefont big font strike tt"),G=>{x(G,"",s)}),De(cl("center dir isindex noframes"),G=>{x(G,"",i)})),x("html","manifest","head body"),x("head","","base command link meta noscript script style title"),x("title hr noscript br"),x("base","href target"),x("link","href rel media hreflang type sizes hreflang"),x("meta","name http-equiv content charset"),x("style","media type scoped"),x("script","src async defer type charset"),x("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),x("dd div","",i),x("address dt caption","",e==="html4"?s:i),x("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s),x("blockquote","cite",i),x("ol","reversed start type","li"),x("ul","","li"),x("li","value",i),x("dl","","dt dd"),x("a","href target rel media hreflang type",e==="html4"?s:i),x("q","cite",s),x("ins del","cite datetime",i),x("img","src sizes srcset alt usemap ismap width height"),x("iframe","src name width height",i),x("embed","src type width height"),x("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),x("param","name value"),x("map","name",[i,"area"].join(" ")),x("area","alt coords shape href target rel media hreflang type"),x("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),x("colgroup","span","col"),x("col","span"),x("tbody thead tfoot","","tr"),x("tr","","td th"),x("td","colspan rowspan headers",i),x("th","colspan rowspan headers scope abbr",i),x("form","accept-charset action autocomplete enctype method name novalidate target",i),x("fieldset","disabled form name",[i,"legend"].join(" ")),x("label","form for",s),x("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),x("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?i:s),x("select","disabled form multiple name required size","option optgroup"),x("optgroup","disabled label","option"),x("option","disabled label selected value"),x("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),x("menu","type label",[i,"li"].join(" ")),x("noscript","",i),e!=="html4"&&(x("wbr"),x("ruby","",[s,"rt rp"].join(" ")),x("figcaption","",i),x("mark rt rp bdi","",s),x("summary","",[s,"h1 h2 h3 h4 h5 h6"].join(" ")),x("canvas","width height",i),x("data","value",s),x("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),x("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),x("picture","","img source"),x("source","src srcset type media sizes"),x("track","kind src srclang label default"),x("datalist","",[s,"option"].join(" ")),x("article section nav aside main header footer","",i),x("hgroup","","h1 h2 h3 h4 h5 h6"),x("figure","",[i,"figcaption"].join(" ")),x("time","datetime",s),x("dialog","open",i),x("command","type label icon disabled checked radiogroup command"),x("output","for form name",s),x("progress","value max",s),x("meter","value min max low high optimum",s),x("details","open",[i,"summary"].join(" ")),x("keygen","autofocus challenge disabled form keytype name"),f("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(T("script","language xml:space"),T("style","xml:space"),T("object","declare classid code codebase codetype archive standby align border hspace vspace"),T("embed","align name hspace vspace"),T("param","valuetype type"),T("a","charset name rev shape coords"),T("br","clear"),T("applet","codebase archive code object alt name width height align hspace vspace"),T("img","name longdesc align border hspace vspace"),T("iframe","longdesc frameborder marginwidth marginheight scrolling align"),T("font basefont","size color face"),T("input","usemap align"),T("select"),T("textarea"),T("h1 h2 h3 h4 h5 h6 div p legend caption","align"),T("ul","type compact"),T("li","type"),T("ol dl menu dir","compact"),T("pre","width xml:space"),T("hr","align noshade size width"),T("isindex","prompt"),T("table","summary width frame rules cellspacing cellpadding align bgcolor"),T("col","width align char charoff valign"),T("colgroup","width align char charoff valign"),T("thead","align char charoff valign"),T("tr","align char charoff valign bgcolor"),T("th","axis align char charoff valign nowrap bgcolor width height"),T("form","accept"),T("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),T("tfoot","align char charoff valign"),T("tbody","align char charoff valign"),T("area","nohref"),T("body","background bgcolor text link vlink alink")),e!=="html4"&&(T("input button select textarea","autofocus"),T("input textarea","placeholder"),T("a","download"),T("link script img","crossorigin"),T("img","loading"),T("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&De([u.video,u.audio],D=>{delete D.children.audio,delete D.children.video}),De(cl("a form meter progress dfn"),D=>{u[D]&&delete u[D].children[D]}),delete u.caption.children.table,delete u.script,u},wb=e=>e==="-"?"remove":"add",Zm=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return te.from(n.exec(e)).map(s=>({preset:s[1]==="@",name:s[2]}))},kx=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return vr(cl(e,","),s=>{const i=n.exec(s);if(i){const u=i[1],f=u?wb(u):"replace",x=i[2],T=vr(cl(i[3],"|"),D=>Zm(D).toArray());return[{operation:f,name:x,validChildren:T}]}else return[]})},FC=(e,n)=>{const s=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,i=/[*?+]/,{attributes:u,attributesOrder:f}=n;return De(cl(e,"|"),x=>{const T=s.exec(x);if(T){const D={},F=T[1],G=T[2].replace(/[\\:]:/g,":"),J=T[3],ee=T[4];if(F==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(G),D.required=!0),F==="-"){delete u[G],f.splice(zt.inArray(f,G),1);return}if(J&&(J==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:G,value:ee}),D.defaultValue=ee):J==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:G,value:ee}),D.forcedValue=ee):J==="<"&&(D.validValues=zt.makeMap(ee,"?"))),i.test(G)){const fe=D;n.attributePatterns=n.attributePatterns||[],fe.pattern=d0(G),n.attributePatterns.push(fe)}else u[G]||f.push(G),u[G]=D}})},BC=(e,n)=>{Yt(e.attributes,(s,i)=>{n.attributes[i]=s}),n.attributesOrder.push(...e.attributesOrder)},Ax=(e,n)=>{const s=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return vr(cl(n,","),i=>{const u=s.exec(i);if(u){const f=u[1],x=u[2],T=u[3],D=u[4],F=u[5],G={attributes:{},attributesOrder:[]};if(e.each(J=>BC(J,G)),f==="#"?G.paddEmpty=!0:f==="-"&&(G.removeEmpty=!0),D==="!"&&(G.removeEmptyAttrs=!0),F&&FC(F,G),T&&(G.outputName=x),x==="@")if(e.isNone())e=te.some(G);else return[];return[T?{name:x,element:G,aliasName:T}:{name:x,element:G}]}else return[]})},Gm={},ws=zt.makeMap,Jn=zt.each,Xg=zt.extend,g0=zt.explode,f0=(e,n={})=>{const s=ws(e," ",ws(e.toUpperCase()," "));return Xg(s,n)},Tx=e=>f0("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),m0=(e,n)=>{if(e){const s={};return oe(e)&&(e={"*":e}),Jn(e,(i,u)=>{s[u]=s[u.toUpperCase()]=n==="map"?ws(i,/[, ]/):g0(i,/[, ]/)}),s}else return},Er=(e={})=>{var n;const s={},i={};let u=[];const f={},x={},T=(ao,Js,oi)=>{const Xi=e[ao];if(Xi)return ws(Xi,/[, ]/,ws(Xi.toUpperCase(),/[, ]/));{let pl=Gm[ao];return pl||(pl=f0(Js,oi),Gm[ao]=pl),pl}},D=(n=e.schema)!==null&&n!==void 0?n:"html5",F=yb(D);e.verify_html===!1&&(e.valid_elements="*[*]");const G=m0(e.valid_styles),J=m0(e.invalid_styles,"map"),ee=m0(e.valid_classes,"map"),fe=T("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ke=T("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),be=T("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Ee=T("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Ye="td th iframe video audio object script code",qe=T("non_empty_elements",Ye+" pre svg textarea summary",be),tt=T("move_caret_before_on_enter_elements",Ye+" table",be),lt="h1 h2 h3 h4 h5 h6",$t=T("text_block_elements",lt+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),nn=T("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",$t),On=T("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),_t=T("transparent_elements","a ins del canvas map"),vt=T("wrap_block_elements","pre "+lt);Jn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ao=>{x[ao]=new RegExp("</"+ao+"[^>]*>","gi")});const Ut=ao=>{const Js=te.from(s["@"]),oi=/[*?+]/;De(Ax(Js,ao??""),({name:Xi,element:pl,aliasName:Yi})=>{if(Yi&&(s[Yi]=pl),oi.test(Xi)){const Wa=pl;Wa.pattern=d0(Xi),u.push(Wa)}else s[Xi]=pl})},Dn=ao=>{u=[],De(uo(s),Js=>{delete s[Js]}),Ut(ao)},ho=(ao,Js)=>{var oi,Xi;delete Gm.text_block_elements,delete Gm.block_elements;const pl=Js.extends?!Ed(Js.extends):!1,Yi=Js.extends;if(i[ao]=Yi?i[Yi]:{},f[ao]=Yi??ao,qe[ao.toUpperCase()]={},qe[ao]={},pl||(nn[ao.toUpperCase()]={},nn[ao]={}),Yi&&!s[ao]&&s[Yi]){const Wa=$T(s[Yi]);delete Wa.removeEmptyAttrs,delete Wa.removeEmpty,s[ao]=Wa}else s[ao]={attributesOrder:[],attributes:{}};if(jt(Js.attributes)){const Wa=Qc=>{qa.attributesOrder.push(Qc),qa.attributes[Qc]={}},qa=(oi=s[ao])!==null&&oi!==void 0?oi:{};delete qa.attributesDefault,delete qa.attributesForced,delete qa.attributePatterns,delete qa.attributesRequired,qa.attributesOrder=[],qa.attributes={},De(Js.attributes,Qc=>{const hh=Ug(D);Zm(Qc).each(({preset:Pg,name:Uh})=>{Pg?Uh==="global"&&De(hh,Wa):Wa(Uh)})}),s[ao]=qa}if(Gt(Js.padEmpty)){const Wa=(Xi=s[ao])!==null&&Xi!==void 0?Xi:{};Wa.paddEmpty=Js.padEmpty,s[ao]=Wa}if(jt(Js.children)){const Wa={},qa=hh=>{Wa[hh]={}},Qc=hh=>{uu(D,hh).each(Pg=>{De(Pg,qa)})};De(Js.children,hh=>{Zm(hh).each(({preset:Pg,name:Uh})=>{Pg?Qc(Uh):qa(Uh)})}),i[ao]=Wa}Yi&&Yt(i,(Wa,qa)=>{Wa[Yi]&&(i[qa]=Wa=Xg({},i[qa]),Wa[ao]=Wa[Yi])})},Cs=ao=>{De(IC(ao??""),({name:Js,cloneName:oi})=>{ho(Js,{extends:oi})})},Ss=ao=>{Wt(ao)?Yt(ao,(Js,oi)=>ho(oi,Js)):oe(ao)&&Cs(ao)},xr=ao=>{De(kx(ao??""),({operation:Js,name:oi,validChildren:Xi})=>{const pl=Js==="replace"?{"#comment":{}}:i[oi],Yi=qa=>{Js==="remove"?delete pl[qa]:pl[qa]={}},Wa=qa=>{uu(D,qa).each(Qc=>{De(Qc,Yi)})};De(Xi,({preset:qa,name:Qc})=>{qa?Wa(Qc):Yi(Qc)}),i[oi]=pl})},Pr=ao=>{const Js=s[ao];if(Js)return Js;let oi=u.length;for(;oi--;){const Xi=u[oi];if(Xi.pattern.test(ao))return Xi}},di=()=>{e.valid_elements?(Dn(e.valid_elements),Jn(F,(ao,Js)=>{i[Js]=ao.children})):(Jn(F,(ao,Js)=>{s[Js]={attributes:ao.attributes,attributesOrder:ao.attributesOrder},i[Js]=ao.children}),Jn(cl("strong/b em/i"),ao=>{const Js=cl(ao,"/");s[Js[1]].outputName=Js[0]}),Jn(On,(ao,Js)=>{s[Js]&&(e.padd_empty_block_inline_children&&(s[Js].paddInEmptyBlock=!0),s[Js].removeEmpty=!0)}),Jn(cl("ol ul blockquote a table tbody"),ao=>{s[ao]&&(s[ao].removeEmpty=!0)}),Jn(cl("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ao=>{s[ao]&&(s[ao].paddEmpty=!0)}),Jn(cl("span"),ao=>{s[ao].removeEmptyAttrs=!0})),delete s.svg,Ss(e.custom_elements),xr(e.valid_children),Ut(e.extended_valid_elements),xr("+ol[ul|ol],+ul[ul|ol]"),Jn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ao,Js)=>{s[Js]&&(s[Js].parentsRequired=cl(ao))}),e.invalid_elements&&Jn(g0(e.invalid_elements),ao=>{s[ao]&&delete s[ao]}),Pr("span")||Ut("span[!data-mce-type|*]")},Kl=Dt(G),xi=Dt(J),fn=Dt(ee),io=Dt(Ee),ir=Dt(nn),Tn=Dt($t),So=Dt(On),ko=Dt(Object.seal(be)),yn=Dt(ke),ks=Dt(qe),Os=Dt(tt),Ui=Dt(fe),Yr=Dt(_t),Jl=Dt(vt),wu=Dt(Object.seal(x)),Mg=(ao,Js)=>{const oi=i[ao.toLowerCase()];return!!(oi&&oi[Js.toLowerCase()])},Tc=(ao,Js)=>{const oi=Pr(ao);if(oi)if(Js){if(oi.attributes[Js])return!0;const Xi=oi.attributePatterns;if(Xi){let pl=Xi.length;for(;pl--;)if(Xi[pl].pattern.test(Js))return!0}}else return!0;return!1},Ed=ao=>Qn(ir(),ao),dh=ao=>!co(ao,"#")&&Tc(ao)&&!Ed(ao),dc=ao=>Qn(Jl(),ao)||dh(ao),Cu=Dt(f);return di(),{type:D,children:i,elements:s,getValidStyles:Kl,getValidClasses:fn,getBlockElements:ir,getInvalidStyles:xi,getVoidElements:ko,getTextBlockElements:Tn,getTextInlineElements:So,getBoolAttrs:io,getElementRule:Pr,getSelfClosingElements:yn,getNonEmptyElements:ks,getMoveCaretBeforeOnEnterElements:Os,getWhitespaceElements:Ui,getTransparentElements:Yr,getSpecialElements:wu,isValidChild:Mg,isValid:Tc,isBlock:Ed,isInline:dh,isWrapper:dc,getCustomElements:Cu,addValidElements:Ut,setValidElements:Dn,addCustomElements:Ss,addValidChildren:xr}},Ex=e=>({value:HC(e)}),HC=e=>Mn(e,"#").toUpperCase(),_x=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Nt=e=>{const n=_x(e.red)+_x(e.green)+_x(e.blue);return Ex(n)},qm=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,$C=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,zf=(e,n,s,i)=>({red:e,green:n,blue:s,alpha:i}),zC=(e,n,s,i)=>{const u=parseInt(e,10),f=parseInt(n,10),x=parseInt(s,10),T=parseFloat(i);return zf(u,f,x,T)},rg=e=>qm.test(e)?"rgb":$C.test(e)?"rgba":"other",p0=e=>{const n=qm.exec(e);if(n!==null)return te.some(zC(n[1],n[2],n[3],"1"));const s=$C.exec(e);return s!==null?te.some(zC(s[1],s[2],s[3],s[4])):te.none()},Vf=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Cb=e=>p0(e).map(Nt).map(n=>"#"+n.value).getOr(e),Yg=(e={},n)=>{const s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,f={};let x,T;const D=pc;n&&(x=n.getValidStyles(),T=n.getInvalidStyles());const F=(`\\" \\' \\; \\: ; : `+D).split(" ");for(let J=0;J<F.length;J++)f[F[J]]=D+J,f[D+J]=F[J];const G={parse:J=>{const ee={};let fe=!1;const ke=e.url_converter,be=e.url_converter_scope||G,Ee=(_t,vt,Ut)=>{const Dn=ee[_t+"-top"+vt];if(!Dn)return;const ho=ee[_t+"-right"+vt];if(!ho)return;const Cs=ee[_t+"-bottom"+vt];if(!Cs)return;const Ss=ee[_t+"-left"+vt];if(!Ss)return;const xr=[Dn,ho,Cs,Ss];let Pr=xr.length-1;for(;Pr--&&xr[Pr]===xr[Pr+1];);Pr>-1&&Ut||(ee[_t+vt]=Pr===-1?xr[0]:xr.join(" "),delete ee[_t+"-top"+vt],delete ee[_t+"-right"+vt],delete ee[_t+"-bottom"+vt],delete ee[_t+"-left"+vt])},Ye=_t=>{const vt=ee[_t];if(!vt)return;const Ut=vt.indexOf(",")>-1?[vt]:vt.split(" ");let Dn=Ut.length;for(;Dn--;)if(Ut[Dn]!==Ut[0])return!1;return ee[_t]=Ut[0],!0},qe=(_t,vt,Ut,Dn)=>{Ye(vt)&&Ye(Ut)&&Ye(Dn)&&(ee[_t]=ee[vt]+" "+ee[Ut]+" "+ee[Dn],delete ee[vt],delete ee[Ut],delete ee[Dn])},tt=_t=>(fe=!0,f[_t]),lt=(_t,vt)=>(fe&&(_t=_t.replace(/\uFEFF[0-9]/g,Ut=>f[Ut])),vt||(_t=_t.replace(/\\([\'\";:])/g,"$1")),_t),$t=_t=>String.fromCharCode(parseInt(_t.slice(1),16)),nn=_t=>_t.replace(/\\[0-9a-f]+/gi,$t),On=(_t,vt,Ut,Dn,ho,Cs)=>{if(ho=ho||Cs,ho)return ho=lt(ho),"'"+ho.replace(/\'/g,"\\'")+"'";if(vt=lt(vt||Ut||Dn||""),!e.allow_script_urls){const Ss=vt.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Ss)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Ss))return""}return ke&&(vt=ke.call(be,vt,"style")),"url('"+vt.replace(/\'/g,"\\'")+"')"};if(J){J=J.replace(/[\u0000-\u001F]/g,""),J=J.replace(/\\[\"\';:\uFEFF]/g,tt).replace(/\"[^\"]+\"|\'[^\']+\'/g,vt=>vt.replace(/[;:]/g,tt));let _t;for(;_t=i.exec(J);){i.lastIndex=_t.index+_t[0].length;let vt=_t[1].replace(u,"").toLowerCase(),Ut=_t[2].replace(u,"");if(vt&&Ut){if(vt=nn(vt),Ut=nn(Ut),vt.indexOf(D)!==-1||vt.indexOf('"')!==-1||!e.allow_script_urls&&(vt==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ut)))continue;vt==="font-weight"&&Ut==="700"?Ut="bold":(vt==="color"||vt==="background-color")&&(Ut=Ut.toLowerCase()),rg(Ut)==="rgb"&&p0(Ut).each(Dn=>{Ut=Cb(Vf(Dn)).toLowerCase()}),Ut=Ut.replace(s,On),ee[vt]=fe?lt(Ut,!0):Ut}}Ee("border","",!0),Ee("border","-width"),Ee("border","-color"),Ee("border","-style"),Ee("padding",""),Ee("margin",""),qe("border","border-width","border-style","border-color"),ee.border==="medium none"&&delete ee.border,ee["border-image"]==="none"&&delete ee["border-image"]}return ee},serialize:(J,ee)=>{let fe="";const ke=(Ee,Ye)=>{const qe=Ye[Ee];if(qe)for(let tt=0,lt=qe.length;tt<lt;tt++){const $t=qe[tt],nn=J[$t];nn&&(fe+=(fe.length>0?" ":"")+$t+": "+nn+";")}},be=(Ee,Ye)=>{if(!T||!Ye)return!0;let qe=T["*"];return qe&&qe[Ee]?!1:(qe=T[Ye],!(qe&&qe[Ee]))};return ee&&x?(ke("*",x),ke(ee,x)):Yt(J,(Ee,Ye)=>{Ee&&be(Ye,ee)&&(fe+=(fe.length>0?" ":"")+Ye+": "+Ee+";")}),fe}};return G},ba={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},kh=e=>e instanceof Event||Be(e.initEvent),VC=e=>e.isDefaultPrevented===wt||e.isDefaultPrevented===dt,ag=e=>no(e.preventDefault)||kh(e),Ox=(e,n)=>{const s=n??{};for(const i in e)Qn(ba,i)||(s[i]=e[i]);return ut(e.composedPath)&&(s.composedPath=()=>e.composedPath()),ut(e.getModifierState)&&(s.getModifierState=i=>e.getModifierState(i)),ut(e.getTargetRanges)&&(s.getTargetRanges=()=>e.getTargetRanges()),s},Wf=(e,n,s,i)=>{var u;const f=Ox(n,i);return f.type=e,no(f.target)&&(f.target=(u=f.srcElement)!==null&&u!==void 0?u:s),ag(n)&&(f.preventDefault=()=>{f.defaultPrevented=!0,f.isDefaultPrevented=wt,Be(n.preventDefault)&&n.preventDefault()},f.stopPropagation=()=>{f.cancelBubble=!0,f.isPropagationStopped=wt,Be(n.stopPropagation)&&n.stopPropagation()},f.stopImmediatePropagation=()=>{f.isImmediatePropagationStopped=wt,f.stopPropagation()},VC(f)||(f.isDefaultPrevented=f.defaultPrevented===!0?wt:dt,f.isPropagationStopped=f.cancelBubble===!0?wt:dt,f.isImmediatePropagationStopped=dt)),f},Rx="mce-data-",Dx=/^(?:mouse|contextmenu)|click/,xc=(e,n,s,i)=>{e.addEventListener(n,s,i||!1)},Km=(e,n,s,i)=>{e.removeEventListener(n,s,i||!1)},zT=e=>ut(e)&&Dx.test(e.type),jg=(e,n)=>{const s=Wf(e.type,e,document,n);if(zT(e)&&Wn(e.pageX)&&!Wn(e.clientX)){const i=s.target.ownerDocument||document,u=i.documentElement,f=i.body,x=s;x.pageX=e.clientX+(u&&u.scrollLeft||f&&f.scrollLeft||0)-(u&&u.clientLeft||f&&f.clientLeft||0),x.pageY=e.clientY+(u&&u.scrollTop||f&&f.scrollTop||0)-(u&&u.clientTop||f&&f.clientTop||0)}return s},VT=(e,n,s)=>{const i=e.document,u={type:"ready"};if(s.domLoaded){n(u);return}const f=()=>i.readyState==="complete"||i.readyState==="interactive"&&i.body,x=()=>{Km(e,"DOMContentLoaded",x),Km(e,"load",x),s.domLoaded||(s.domLoaded=!0,n(u)),e=null};f()?x():xc(e,"DOMContentLoaded",x),s.domLoaded||xc(e,"load",x)};class Uf{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Rx+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,s,i,u){const f=this;let x;const T=window,D=ee=>{f.executeHandlers(jg(ee||T.event),F)};if(!n||qt(n)||Ga(n))return i;let F;n[f.expando]?F=n[f.expando]:(F=f.count++,n[f.expando]=F,f.events[F]={}),u=u||n;const G=s.split(" ");let J=G.length;for(;J--;){let ee=G[J],fe=D,ke=!1,be=!1;if(ee==="DOMContentLoaded"&&(ee="ready"),f.domLoaded&&ee==="ready"&&n.readyState==="complete"){i.call(u,jg({type:ee}));continue}!f.hasFocusIn&&(ee==="focusin"||ee==="focusout")&&(ke=!0,be=ee==="focusin"?"focus":"blur",fe=Ee=>{const Ye=jg(Ee||T.event);Ye.type=Ye.type==="focus"?"focusin":"focusout",f.executeHandlers(Ye,F)}),x=f.events[F][ee],x?ee==="ready"&&f.domLoaded?i(jg({type:ee})):x.push({func:i,scope:u}):(f.events[F][ee]=x=[{func:i,scope:u}],x.fakeName=be,x.capture=ke,x.nativeHandler=fe,ee==="ready"?VT(n,fe,f):xc(n,be||ee,fe,ke))}return n=x=null,i}unbind(n,s,i){if(!n||qt(n)||Ga(n))return this;const u=n[this.expando];if(u){let f=this.events[u];if(s){const x=s.split(" ");let T=x.length;for(;T--;){const D=x[T],F=f[D];if(F){if(i){let G=F.length;for(;G--;)if(F[G].func===i){const J=F.nativeHandler,ee=F.fakeName,fe=F.capture,ke=F.slice(0,G).concat(F.slice(G+1));ke.nativeHandler=J,ke.fakeName=ee,ke.capture=fe,f[D]=ke}}(!i||F.length===0)&&(delete f[D],Km(n,F.fakeName||D,F.nativeHandler,F.capture))}}}else Yt(f,(x,T)=>{Km(n,x.fakeName||T,x.nativeHandler,x.capture)}),f={};for(const x in f)if(Qn(f,x))return this;delete this.events[u];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,s,i){return this.dispatch(n,s,i)}dispatch(n,s,i){if(!n||qt(n)||Ga(n))return this;const u=jg({type:s,target:n},i);do{const f=n[this.expando];f&&this.executeHandlers(u,f),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!u.isPropagationStopped());return this}clean(n){if(!n||qt(n)||Ga(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const s=n.getElementsByTagName("*");let i=s.length;for(;i--;)n=s[i],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,s){const i=this.events[s],u=i&&i[n.type];if(u)for(let f=0,x=u.length;f<x;f++){const T=u[f];if(T&&T.func.call(T.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Uf.Event=new Uf;const b0=zt.each,WT=zt.grep,Sb="data-mce-style",Vd=zt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),rc=(e,n,s)=>{no(s)||s===""?er(e,n):fa(e,n,s)},en=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Jm=(e,n)=>{let s=0;if(e)for(let i=e.nodeType,u=e.previousSibling;u;u=u.previousSibling){const f=u.nodeType;n&&qt(u)&&(f===i||!u.data.length)||(s++,i=f)}return s},ul=(e,n)=>{const s=Pa(n,"style"),i=e.serialize(e.parse(s),Se(n));rc(n,Sb,i)},Mx=(e,n)=>Qo(e)?Qn(Vd,n)?e+"":e+"px":e,Px=(e,n,s)=>{const i=en(n);no(s)||s===""?m(e,i):eg(e,i,Mx(s,i))},Lx=(e,n,s)=>{const i=n.keep_values,u={set:(x,T,D)=>{const F=$e.fromDom(x);Be(n.url_converter)&&ut(T)&&(T=n.url_converter.call(n.url_converter_scope||s(),String(T),D,x));const G="data-mce-"+D;rc(F,G,T),rc(F,D,T)},get:(x,T)=>{const D=$e.fromDom(x);return Pa(D,"data-mce-"+T)||Pa(D,T)}},f={style:{set:(x,T)=>{const D=$e.fromDom(x);i&&rc(D,Sb,T),er(D,"style"),oe(T)&&C(D,e.parse(T))},get:x=>{const T=$e.fromDom(x),D=Pa(T,Sb)||Pa(T,"style");return e.serialize(e.parse(D),Se(T))}}};return i&&(f.href=f.src=u),f},Jr=(e,n={})=>{const s={},i=window,u={};let f=0;const x=!0,T=!0,D=wa.forElement($e.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),F=[],G=n.schema?n.schema:Er({}),J=Yg({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),ee=n.ownEvents?new Uf:Uf.Event,fe=G.getBlockElements(),ke=bt=>oe(bt)?Qn(fe,bt):An(bt)&&(Qn(fe,bt.nodeName)||Fd(G,bt)),be=bt=>bt&&e&&oe(bt)?e.getElementById(bt):bt,Ee=bt=>{const pt=be(bt);return ut(pt)?$e.fromDom(pt):null},Ye=(bt,pt,mn="")=>{let sn;const Co=Ee(bt);if(ut(Co)&&Jo(Co)){const lr=MT[pt];lr&&lr.get?sn=lr.get(Co.dom,pt):sn=Pa(Co,pt)}return ut(sn)?sn:mn},qe=bt=>{const pt=be(bt);return no(pt)?[]:pt.attributes},tt=(bt,pt,mn)=>{io(bt,sn=>{if(An(sn)){const Co=$e.fromDom(sn),lr=mn===""?null:mn,si=Pa(Co,pt),Lg=MT[pt];Lg&&Lg.set?Lg.set(Co.dom,lr,pt):rc(Co,pt,lr),si!==lr&&n.onSetAttrib&&n.onSetAttrib({attrElm:Co.dom,attrName:pt,attrValue:lr})}})},lt=(bt,pt)=>bt.cloneNode(pt),$t=()=>n.root_element||e.body,nn=bt=>{const pt=qr(bt);return{x:pt.x,y:pt.y,w:pt.width,h:pt.height}},On=(bt,pt)=>Du(e.body,be(bt),pt),_t=(bt,pt,mn)=>{io(bt,sn=>{const Co=$e.fromDom(sn);Px(Co,pt,mn),n.update_styles&&ul(J,Co)})},vt=(bt,pt)=>{io(bt,mn=>{const sn=$e.fromDom(mn);Yt(pt,(Co,lr)=>{Px(sn,lr,Co)}),n.update_styles&&ul(J,sn)})},Ut=(bt,pt,mn)=>{const sn=be(bt);if(!(no(sn)||!iu(sn)&&!zm(sn)))return mn?o($e.fromDom(sn),en(pt)):(pt=pt.replace(/-(\D)/g,(Co,lr)=>lr.toUpperCase()),pt==="float"&&(pt="cssFloat"),sn.style?sn.style[pt]:void 0)},Dn=bt=>{const pt=be(bt);if(!pt)return{w:0,h:0};let mn=Ut(pt,"width"),sn=Ut(pt,"height");return(!mn||mn.indexOf("px")===-1)&&(mn="0"),(!sn||sn.indexOf("px")===-1)&&(sn="0"),{w:parseInt(mn,10)||pt.offsetWidth||pt.clientWidth,h:parseInt(sn,10)||pt.offsetHeight||pt.clientHeight}},ho=bt=>{const pt=be(bt),mn=On(pt),sn=Dn(pt);return{x:mn.x,y:mn.y,w:sn.w,h:sn.h}},Cs=(bt,pt)=>{if(!bt)return!1;const mn=jt(bt)?bt:[bt];return Ie(mn,sn=>Ml($e.fromDom(sn),pt))},Ss=(bt,pt,mn,sn)=>{const Co=[];let lr=be(bt);sn=sn===void 0;const si=mn||($t().nodeName!=="BODY"?$t().parentNode:null);if(oe(pt))if(pt==="*")pt=An;else{const Lg=pt;pt=fh=>Cs(fh,Lg)}for(;lr&&!(lr===si||no(lr.nodeType)||Hg(lr)||Fi(lr));){if(!pt||pt(lr))if(sn)Co.push(lr);else return[lr];lr=lr.parentNode}return sn?Co:null},xr=(bt,pt,mn)=>{const sn=Ss(bt,pt,mn,!1);return sn&&sn.length>0?sn[0]:null},Pr=(bt,pt,mn)=>{let sn=pt;if(bt){oe(pt)&&(sn=Co=>Cs(Co,pt));for(let Co=bt[mn];Co;Co=Co[mn])if(Be(sn)&&sn(Co))return Co}return null},di=(bt,pt)=>Pr(bt,pt,"nextSibling"),Kl=(bt,pt)=>Pr(bt,pt,"previousSibling"),xi=bt=>Be(bt.querySelectorAll),fn=(bt,pt)=>{var mn,sn;const Co=(sn=(mn=be(pt))!==null&&mn!==void 0?mn:n.root_element)!==null&&sn!==void 0?sn:e;return xi(Co)?oo(Co.querySelectorAll(bt)):[]},io=function(bt,pt,mn){const sn=mn??this;if(jt(bt)){const Co=[];return b0(bt,(lr,si)=>{const Lg=be(lr);Lg&&Co.push(pt.call(sn,Lg,si))}),Co}else{const Co=be(bt);return Co?pt.call(sn,Co):!1}},ir=(bt,pt)=>{io(bt,mn=>{Yt(pt,(sn,Co)=>{tt(mn,Co,sn)})})},Tn=(bt,pt)=>{io(bt,mn=>{const sn=$e.fromDom(mn);Oe(sn,pt)})},So=(bt,pt,mn,sn,Co)=>io(bt,lr=>{const si=oe(pt)?e.createElement(pt):pt;return ut(mn)&&ir(si,mn),sn&&(!oe(sn)&&sn.nodeType?si.appendChild(sn):oe(sn)&&Tn(si,sn)),Co?si:lr.appendChild(si)}),ko=(bt,pt,mn)=>So(e.createElement(bt),bt,pt,mn,!0),yn=Wg.decode,ks=Wg.encodeAllRaw,Os=(bt,pt,mn="")=>{let sn="<"+bt;for(const Co in pt)hr(pt,Co)&&(sn+=" "+Co+'="'+ks(pt[Co])+'"');return ls(mn)&&Qn(G.getVoidElements(),bt)?sn+" />":sn+">"+mn+"</"+bt+">"},Ui=bt=>{const pt=e.createElement("div"),mn=e.createDocumentFragment();mn.appendChild(pt),bt&&(pt.innerHTML=bt);let sn;for(;sn=pt.firstChild;)mn.appendChild(sn);return mn.removeChild(pt),mn},Yr=(bt,pt)=>io(bt,mn=>{const sn=$e.fromDom(mn);return pt&&De(li(sn),Co=>{fr(Co)&&Co.dom.length===0?U(Co):w(sn,Co)}),U(sn),sn.dom}),Jl=bt=>io(bt,pt=>{const mn=pt.attributes;for(let sn=mn.length-1;sn>=0;sn--)pt.removeAttributeNode(mn.item(sn))}),wu=bt=>J.parse(bt),Mg=(bt,pt)=>J.serialize(bt,pt),Tc=bt=>{if(gh!==Jr.DOM&&e===document){if(s[bt])return;s[bt]=!0}let pt=e.getElementById("mceDefaultStyles");if(!pt){pt=e.createElement("style"),pt.id="mceDefaultStyles",pt.type="text/css";const mn=e.head;mn.firstChild?mn.insertBefore(pt,mn.firstChild):mn.appendChild(pt)}pt.styleSheet?pt.styleSheet.cssText+=bt:pt.appendChild(e.createTextNode(bt))},Ed=bt=>{bt||(bt=""),De(bt.split(","),pt=>{u[pt]=!0,D.load(pt).catch(ot)})},dh=(bt,pt,mn)=>{io(bt,sn=>{if(An(sn)){const Co=$e.fromDom(sn),lr=pt.split(" ");De(lr,si=>{ut(mn)?(mn?oc:Tu)(Co,si):ph(Co,si)})}})},dc=(bt,pt)=>{dh(bt,pt,!0)},Cu=(bt,pt)=>{dh(bt,pt,!1)},ao=(bt,pt)=>{const mn=Ee(bt),sn=pt.split(" ");return ut(mn)&&qo(sn,Co=>Md(mn,Co))},Js=bt=>{io(bt,pt=>m($e.fromDom(pt),"display"))},oi=bt=>{io(bt,pt=>eg($e.fromDom(pt),"display","none"))},Xi=bt=>{const pt=Ee(bt);return ut(pt)&&or(c(pt,"display"),"none")},pl=bt=>(bt||"mce_")+f++,Yi=bt=>{const pt=Ee(bt);return ut(pt)?An(pt.dom)?pt.dom.outerHTML:Te(pt):""},Wa=(bt,pt)=>{io(bt,mn=>{An(mn)&&(mn.outerHTML=pt)})},qa=(bt,pt)=>{const mn=be(pt);return io(bt,sn=>{const Co=mn==null?void 0:mn.parentNode,lr=mn==null?void 0:mn.nextSibling;return Co&&(lr?Co.insertBefore(sn,lr):Co.appendChild(sn)),sn})},Qc=(bt,pt,mn)=>io(pt,sn=>{var Co;const lr=jt(pt)?bt.cloneNode(!0):bt;return mn&&b0(WT(sn.childNodes),si=>{lr.appendChild(si)}),(Co=sn.parentNode)===null||Co===void 0||Co.replaceChild(lr,sn),sn}),hh=(bt,pt)=>{if(bt.nodeName!==pt.toUpperCase()){const mn=ko(pt);return b0(qe(bt),sn=>{tt(mn,sn.nodeName,Ye(bt,sn.nodeName))}),Qc(mn,bt,!0),mn}else return bt},Pg=(bt,pt)=>{let mn=bt;for(;mn;){let sn=pt;for(;sn&&mn!==sn;)sn=sn.parentNode;if(mn===sn)break;mn=mn.parentNode}return!mn&&bt.ownerDocument?bt.ownerDocument.documentElement:mn},Uh=(bt,pt,mn)=>Yo(pt)?Bi(G,bt,{...mn,isContent:Co=>{const lr=Co.nodeName.toLowerCase();return!!pt[lr]}}):Bi(G,bt,mn),t0=()=>e.createRange(),db=(bt,pt,mn)=>{let sn=t0(),Co,lr;if(bt&&pt&&bt.parentNode&&pt.parentNode){const si=bt.parentNode;return sn.setStart(si,Jm(bt)),sn.setEnd(pt.parentNode,Jm(pt)),Co=sn.extractContents(),sn=t0(),sn.setStart(pt.parentNode,Jm(pt)+1),sn.setEnd(si,Jm(bt)+1),lr=sn.extractContents(),si.insertBefore(Mu(gh,Co,G),bt),mn?si.insertBefore(mn,bt):si.insertBefore(pt,bt),si.insertBefore(Mu(gh,lr,G),bt),Yr(bt),mn||pt}else return},Fm=(bt,pt,mn,sn)=>{if(jt(bt)){let Co=bt.length;const lr=[];for(;Co--;)lr[Co]=Fm(bt[Co],pt,mn,sn);return lr}else return n.collect&&(bt===e||bt===i)&&F.push([bt,pt,mn,sn]),ee.bind(bt,pt,mn,sn||gh)},Gu=(bt,pt,mn)=>{if(jt(bt)){let sn=bt.length;const Co=[];for(;sn--;)Co[sn]=Gu(bt[sn],pt,mn);return Co}else{if(F.length>0&&(bt===e||bt===i)){let sn=F.length;for(;sn--;){const[Co,lr,si]=F[sn];bt===Co&&(!pt||pt===lr)&&(!mn||mn===si)&&ee.unbind(Co,lr,si)}}return ee.unbind(bt,pt,mn)}},Bm=(bt,pt,mn)=>ee.dispatch(bt,pt,mn),Sx=(bt,pt,mn)=>ee.dispatch(bt,pt,mn),n0=bt=>{if(bt&&iu(bt)){const pt=bt.getAttribute("data-mce-contenteditable");return pt&&pt!=="inherit"?pt:bt.contentEditable!=="inherit"?bt.contentEditable:null}else return null},gh={doc:e,settings:n,win:i,files:u,stdMode:x,boxModel:T,styleSheetLoader:D,boundEvents:F,styles:J,schema:G,events:ee,isBlock:ke,root:null,clone:lt,getRoot:$t,getViewPort:nn,getRect:ho,getSize:Dn,getParent:xr,getParents:Ss,get:be,getNext:di,getPrev:Kl,select:fn,is:Cs,add:So,create:ko,createHTML:Os,createFragment:Ui,remove:Yr,setStyle:_t,getStyle:Ut,setStyles:vt,removeAllAttribs:Jl,setAttrib:tt,setAttribs:ir,getAttrib:Ye,getPos:On,parseStyle:wu,serializeStyle:Mg,addStyle:Tc,loadCSS:Ed,addClass:dc,removeClass:Cu,hasClass:ao,toggleClass:dh,show:Js,hide:oi,isHidden:Xi,uniqueId:pl,setHTML:Tn,getOuterHTML:Yi,setOuterHTML:Wa,decode:yn,encode:ks,insertAfter:qa,replace:Qc,rename:hh,findCommonAncestor:Pg,run:io,getAttribs:qe,isEmpty:Uh,createRng:t0,nodeIndex:Jm,split:db,bind:Fm,unbind:Gu,fire:Sx,dispatch:Bm,getContentEditable:n0,getContentEditableParent:bt=>{const pt=$t();let mn=null;for(let sn=bt;sn&&sn!==pt&&(mn=n0(sn),mn===null);sn=sn.parentNode);return mn},isEditable:bt=>{if(ut(bt)){const pt=An(bt)?bt:bt.parentElement;return ut(pt)&&iu(pt)&&Pl($e.fromDom(pt))}else return!1},destroy:()=>{if(F.length>0){let bt=F.length;for(;bt--;){const[pt,mn,sn]=F[bt];ee.unbind(pt,mn,sn)}}Yt(u,(bt,pt)=>{D.unload(pt),delete u[pt]})},isChildOf:(bt,pt)=>bt===pt||pt.contains(bt),dumpRng:bt=>"startContainer: "+bt.startContainer.nodeName+", startOffset: "+bt.startOffset+", endContainer: "+bt.endContainer.nodeName+", endOffset: "+bt.endOffset},MT=Lx(J,n,Dt(gh));return gh};Jr.DOM=Jr(document),Jr.nodeIndex=Jm;const UT=Jr.DOM,Xf=0,ig=1,Qm=2,Nx=3;class Ah{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((s,i)=>{const u=UT;let f;const x=()=>{u.remove(F),f&&(f.onerror=f.onload=f=null)},T=()=>{x(),s()},D=()=>{x(),i("Failed to load script: "+n)},F=u.uniqueId();f=document.createElement("script"),f.id=F,f.type="text/javascript",f.src=zt._addCacheSuffix(n),this.settings.referrerPolicy&&u.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy),f.onload=T,f.onerror=D,(document.getElementsByTagName("head")[0]||document.body).appendChild(f)})}isDone(n){return this.states[n]===Qm}markDone(n){this.states[n]=Qm}add(n){const s=this;return s.queue.push(n),s.states[n]===void 0&&(s.states[n]=Xf),new Promise((u,f)=>{s.scriptLoadedCallbacks[n]||(s.scriptLoadedCallbacks[n]=[]),s.scriptLoadedCallbacks[n].push({resolve:u,reject:f})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const s=this,i=(D,F)=>{Ts(s.scriptLoadedCallbacks,F).each(G=>{De(G,J=>J[D](F))}),delete s.scriptLoadedCallbacks[F]},u=D=>{const F=Cn(D,G=>G.status==="rejected");return F.length>0?Promise.reject(vr(F,({reason:G})=>jt(G)?G:[G])):Promise.resolve()},f=D=>Promise.allSettled(Ze(D,F=>s.states[F]===Qm?(i("resolve",F),Promise.resolve()):s.states[F]===Nx?(i("reject",F),Promise.reject(F)):(s.states[F]=ig,s.loadScript(F).then(()=>{s.states[F]=Qm,i("resolve",F);const G=s.queue;return G.length>0?(s.queue=[],f(G).then(u)):Promise.resolve()},()=>(s.states[F]=Nx,i("reject",F),Promise.reject(F)))))),x=D=>(s.loading=!0,f(D).then(F=>{s.loading=!1;const G=s.queueLoadedCallbacks.shift();return te.from(G).each(Gn),u(F)})),T=vl(n);return s.loading?new Promise((D,F)=>{s.queueLoadedCallbacks.push(()=>{x(T).then(D,F)})}):x(T)}}Ah.ScriptLoader=new Ah;const WC=(e,n)=>{const s=e.indexOf(n);return s!==-1&&e.indexOf(n,s+1)>s},bi=e=>Wt(e)&&Qn(e,"raw"),v0=e=>jt(e)&&e.length>1,_r={},Ix=Ir("en"),yc=()=>Ts(_r,Ix.get()),Ud={getData:()=>os(_r,e=>({...e})),setCode:e=>{e&&Ix.set(e)},getCode:()=>Ix.get(),add:(e,n)=>{let s=_r[e];s||(_r[e]=s={});const i=Ze(uo(n),u=>u.toLowerCase());Yt(n,(u,f)=>{const x=f.toLowerCase();x!==f&&WC(i,x)?(Qn(n,x)||(s[x]=u),s[f]=u):s[x]=u})},translate:e=>{const n=yc().getOr({}),s=x=>Be(x)?Object.prototype.toString.call(x):i(x)?"":""+x,i=x=>x===""||x===null||x===void 0,u=x=>{const T=s(x);return Qn(n,T)?s(n[T]):Ts(n,T.toLowerCase()).map(s).getOr(T)},f=x=>x.replace(/{context:\w+}$/,"");if(i(e))return"";if(bi(e))return s(e.raw);if(v0(e)){const x=e.slice(1),T=u(e[0]).replace(/\{([0-9]+)\}/g,(D,F)=>Qn(x,F)?s(x[F]):D);return f(T)}return f(u(e))},isRtl:()=>yc().bind(e=>Ts(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Qn(_r,e)},ac=()=>{const e=[],n={},s={},i=[],u=(be,Ee)=>{const Ye=Cn(i,qe=>qe.name===be&&qe.state===Ee);De(Ye,qe=>qe.resolve())},f=be=>Qn(n,be),x=be=>Qn(s,be),T=be=>{if(s[be])return s[be].instance},D=(be,Ee)=>{const Ye=Ud.getCode(),qe=","+(Ee||"")+",";!Ye||Ee&&qe.indexOf(","+Ye+",")===-1||Ah.ScriptLoader.add(n[be]+"/langs/"+Ye+".js")},F=(be,Ee)=>{ac.languageLoad!==!1&&(f(be)?D(be,Ee):ke(be,"loaded").then(()=>D(be,Ee)))},G=(be,Ee)=>(e.push(Ee),s[be]={instance:Ee},u(be,"added"),Ee),J=be=>{delete n[be],delete s[be]},ee=(be,Ee)=>oe(Ee)?oe(be)?{prefix:"",resource:Ee,suffix:""}:{prefix:be.prefix,resource:Ee,suffix:be.suffix}:Ee,fe=(be,Ee)=>{if(n[be])return Promise.resolve();let Ye=oe(Ee)?Ee:Ee.prefix+Ee.resource+Ee.suffix;Ye.indexOf("/")!==0&&Ye.indexOf("://")===-1&&(Ye=ac.baseURL+"/"+Ye),n[be]=Ye.substring(0,Ye.lastIndexOf("/"));const qe=()=>(u(be,"loaded"),Promise.resolve());return s[be]?qe():Ah.ScriptLoader.add(Ye).then(qe)},ke=(be,Ee="added")=>Ee==="added"&&x(be)||Ee==="loaded"&&f(be)?Promise.resolve():new Promise(Ye=>{i.push({name:be,state:Ee,resolve:Ye})});return{items:e,urls:n,lookup:s,get:T,requireLangPack:F,add:G,remove:J,createUrl:ee,load:fe,waitFor:ke}};ac.languageLoad=!0,ac.baseURL="",ac.PluginManager=ac(),ac.ThemeManager=ac(),ac.ModelManager=ac();const tp=(e,n)=>{let s=null;return{cancel:()=>{ce(s)||(clearTimeout(s),s=null)},throttle:(...f)=>{ce(s)&&(s=setTimeout(()=>{s=null,e.apply(null,f)},n))}}},y0=(e,n)=>{let s=null;const i=()=>{ce(s)||(clearTimeout(s),s=null)};return{cancel:i,throttle:(...f)=>{i(),s=setTimeout(()=>{s=null,e.apply(null,f)},n)}}},w0=(e,n,s)=>La(e,n,s).isSome(),np=Dt("mce-annotation"),Zg=Dt("data-mce-annotation"),Th=Dt("data-mce-annotation-uid"),op=Dt("data-mce-annotation-active"),Gg=Dt("data-mce-annotation-classes"),lg=Dt("data-mce-annotation-attrs"),Yf=e=>n=>rs(n,e),kb=(e,n)=>{const s=e.selection.getRng(),i=$e.fromDom(s.startContainer),u=$e.fromDom(e.getBody()),f=n.fold(()=>"."+np(),D=>`[${Zg()}="${D}"]`),x=wl(i,s.startOffset).getOr(i);return Oc(x,f,Yf(u)).bind(D=>Fr(D,`${Th()}`).bind(F=>Fr(D,`${Zg()}`).map(G=>{const J=Fx(e,F);return{uid:F,name:G,elements:J}})))},C0=e=>Jo(e)&&Md(e,np()),XC=(e,n)=>Nr(e,"data-mce-bogus")||w0(e,'[data-mce-bogus="all"]',Yf(n)),Fx=(e,n)=>{const s=$e.fromDom(e.getBody()),i=Vs(s,`[${Th()}="${n}"]`);return Cn(i,u=>!XC(u,s))},sp=(e,n)=>{const s=$e.fromDom(e.getBody()),i=Vs(s,`[${Zg()}="${n}"]`),u={};return De(i,f=>{if(!XC(f,s)){const x=Pa(f,Th()),T=Ts(u,x).getOr([]);u[x]=T.concat([f])}}),u},YC=(e,n)=>{const s=Ir({}),i=()=>({listeners:[],previous:Ji()}),u=(J,ee)=>{f(J,fe=>(ee(fe),fe))},f=(J,ee)=>{const fe=s.get(),ke=Ts(fe,J).getOrThunk(i),be=ee(ke);fe[J]=be,s.set(fe)},x=(J,ee,fe)=>{u(J,ke=>{De(ke.listeners,be=>be(!0,J,{uid:ee,nodes:Ze(fe,Ee=>Ee.dom)}))})},T=J=>{u(J,ee=>{De(ee.listeners,fe=>fe(!1,J))})},D=(J,ee)=>{De(Fx(e,J),fe=>{ee?fa(fe,op(),"true"):er(fe,op())})},F=y0(()=>{const J=Go(n.getNames());De(J,ee=>{f(ee,fe=>{const ke=fe.previous.get();return kb(e,te.some(ee)).fold(()=>{ke.each(be=>{T(ee),fe.previous.clear(),D(be,!1)})},({uid:be,name:Ee,elements:Ye})=>{or(ke,be)||(ke.each(qe=>D(qe,!1)),x(Ee,be,Ye),fe.previous.set(be),D(be,!0))}),{previous:fe.previous,listeners:fe.listeners}})})},30);return e.on("remove",()=>{F.cancel()}),e.on("NodeChange",()=>{F.throttle()}),{addListener:(J,ee)=>{f(J,fe=>({previous:fe.previous,listeners:fe.listeners.concat([ee])}))}}},YT=(e,n)=>{const s=Zg(),i=f=>te.from(f.attr(s)).bind(n.lookup),u=f=>{var x,T;f.attr(Th(),null),f.attr(Zg(),null),f.attr(op(),null);const D=te.from(f.attr(lg())).map(ee=>ee.split(",")).getOr([]),F=te.from(f.attr(Gg())).map(ee=>ee.split(",")).getOr([]);De(D,ee=>f.attr(ee,null));const G=(T=(x=f.attr("class"))===null||x===void 0?void 0:x.split(" "))!==null&&T!==void 0?T:[],J=jr(G,[np()].concat(F));f.attr("class",J.length>0?J.join(" "):null),f.attr(Gg(),null),f.attr(lg(),null)};e.serializer.addTempAttr(op()),e.serializer.addAttributeFilter(s,f=>{for(const x of f)i(x).each(T=>{T.persistent===!1&&(x.name==="span"?x.unwrap():u(x))})})},S0=()=>{const e={};return{register:(u,f)=>{e[u]={name:u,settings:f}},lookup:u=>Ts(e,u).map(f=>f.settings),getNames:()=>uo(e)}},Bx=(e,n,s)=>Math.min(Math.max(e,n),s),Ab=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Hx=0;const rp=e=>{const s=new Date().getTime(),i=Math.floor(Ab()*1e9);return Hx++,e+"_"+i+Hx+String(s)},D4=(e,n)=>{De(n,s=>{oc(e,s)})},M4=(e,n)=>{De(n,s=>{Tu(e,s)})},ap=(e,n)=>$e.fromDom(e.dom.cloneNode(n)),hd=e=>ap(e,!1),Tb=e=>ap(e,!0),jC=(e,n)=>{const s=$e.fromTag(n),i=Lc(e);return Mr(s,i),s},ZC=(e,n)=>{const s=jC(e,n);A(e,s);const i=li(e);return $(s,i),U(e),s},GC=(e,n,s=dt)=>{const i=new Tr(e,n),u=f=>{let x;do x=i[f]();while(x&&!qt(x)&&!s(x));return te.from(x).filter(qt)};return{current:()=>te.from(i.current()).filter(qt),next:()=>u("next"),prev:()=>u("prev"),prev2:()=>u("prev2")}},jf=(e,n)=>{const s=n||(x=>e.isBlock(x)||rr(x)||ar(x)),i=(x,T,D,F)=>{if(qt(x)){const G=F(x,T,x.data);if(G!==-1)return te.some({container:x,offset:G})}return D().bind(G=>i(G.container,G.offset,D,F))};return{backwards:(x,T,D,F)=>{const G=GC(x,F??e.getRoot(),s);return i(x,T,()=>G.prev().map(J=>({container:J,offset:J.length})),D).getOrNull()},forwards:(x,T,D,F)=>{const G=GC(x,F??e.getRoot(),s);return i(x,T,()=>G.next().map(J=>({container:J,offset:0})),D).getOrNull()}}},Zf=((e,n)=>{const s=f=>{if(!e(f))throw new Error("Can only get "+n+" value of a "+n+" node");return i(f).getOr("")},i=f=>e(f)?te.from(f.dom.nodeValue):te.none();return{get:s,getOption:i,set:(f,x)=>{if(!e(f))throw new Error("Can only set raw "+n+" value of a "+n+" node");f.dom.nodeValue=x}}})(fr,"text"),ip=e=>Zf.get(e),qC=e=>Zf.getOption(e),lp=(e,n)=>Zf.set(e,n),jT=["td","th"],$x=["thead","tbody","tfoot"],KC=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],JC=["li","dd","dt"],Ll=["ul","ol","dl"],L4=["pre","script","textarea","style"],qg=e=>{let n;return s=>(n=n||$s(e,wt),Qn(n,Se(s)))},ZT=e=>Se(e)==="table",cg=e=>Jo(e)&&Se(e)==="br",Vc=qg(KC),Xd=qg(Ll),Gf=qg(JC),QC=qg($x),Eb=qg(jT),k0=qg(L4),Kg=e=>{const n=[];let s=e.dom;for(;s;)n.push($e.fromDom(s)),s=s.lastChild;return n},zx=e=>{const n=Vs(e,"br"),s=Cn(Kg(e).slice(-1),cg);n.length===s.length&&De(s,U)},Yd=()=>{const e=$e.fromTag("br");return fa(e,"data-mce-bogus","1"),e},Eh=e=>{Y(e),M(e,Yd())},GT=(e,n)=>{_u(e).each(s=>{Fc(s).each(i=>{n.isBlock(Se(e))&&cg(s)&&n.isBlock(Se(i))&&U(s)})})},Qi=pc,_b=il,Pu=mi,A0=e=>e.insertContent(Qi,{preserve_zwsp:!0}),Vx=An,qf=qt,Jg=e=>(qf(e)&&(e=e.parentNode),Vx(e)&&e.hasAttribute("data-mce-caret")),gd=e=>qf(e)&&_b(e.data),Lu=e=>Jg(e)||gd(e),e2=e=>e.firstChild!==e.lastChild||!rr(e.firstChild),qT=(e,n)=>{var s;const u=((s=e.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Qi),f=e.parentNode;if(n){const x=e.previousSibling;if(qf(x)){if(Lu(x))return x;if(Yl(x))return x.splitText(x.data.length-1)}f==null||f.insertBefore(u,e)}else{const x=e.nextSibling;if(qf(x)){if(Lu(x))return x;if(Ws(x))return x.splitText(1),x}e.nextSibling?f==null||f.insertBefore(u,e.nextSibling):f==null||f.appendChild(u)}return u},_h=e=>{const n=e.container();return qt(n)?n.data.charAt(e.offset())===Qi||e.isAtStart()&&gd(n.previousSibling):!1},ug=e=>{const n=e.container();return qt(n)?n.data.charAt(e.offset()-1)===Qi||e.isAtEnd()&&gd(n.nextSibling):!1},T0=(e,n,s)=>{var i;const f=((i=n.ownerDocument)!==null&&i!==void 0?i:document).createElement(e);f.setAttribute("data-mce-caret",s?"before":"after"),f.setAttribute("data-mce-bogus","all"),f.appendChild(Yd().dom);const x=n.parentNode;return s?x==null||x.insertBefore(f,n):n.nextSibling?x==null||x.insertBefore(f,n.nextSibling):x==null||x.appendChild(f),f},Ws=e=>qf(e)&&e.data[0]===Qi,Yl=e=>qf(e)&&e.data[e.data.length-1]===Qi,Kf=e=>{var n;const s=e.getElementsByTagName("br"),i=s[s.length-1];Id(i)&&((n=i.parentNode)===null||n===void 0||n.removeChild(i))},cp=e=>e&&e.hasAttribute("data-mce-caret")?(Kf(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,ra=e=>Jg(e.startContainer),Jf=Math.round,dg=e=>e?{left:Jf(e.left),top:Jf(e.top),bottom:Jf(e.bottom),right:Jf(e.right),width:Jf(e.width),height:Jf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},t2=(e,n)=>(e=dg(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),KT=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,n2=(e,n,s)=>e>=0&&e<=Math.min(n.height,s.height)/2,aa=(e,n)=>{const s=Math.min(n.height/2,e.height/2);return e.bottom-s<n.top?!0:e.top>n.bottom?!1:n2(n.top-e.bottom,e,n)},Ob=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:n2(n.bottom-e.top,e,n),JT=(e,n,s)=>n>=e.left&&n<=e.right&&s>=e.top&&s<=e.bottom,o2=e=>Vo(e,(n,s)=>n.fold(()=>te.some(s),i=>{const u=Math.min(s.left,i.left),f=Math.min(s.top,i.top),x=Math.max(s.right,i.right),T=Math.max(s.bottom,i.bottom);return te.some({top:f,right:x,bottom:T,left:u,width:x-u,height:T-f})}),te.none()),Qf=(e,n,s)=>{const i=Math.max(Math.min(n,e.left+e.width),e.left),u=Math.max(Math.min(s,e.top+e.height),e.top);return Math.sqrt((n-i)*(n-i)+(s-u)*(s-u))},fd=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Rb=e=>{const n=e.startContainer,s=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===s+1?n.childNodes[s]:null},hg=(e,n)=>{if(An(e)&&e.hasChildNodes()){const s=e.childNodes,i=Bx(n,0,s.length-1);return s[i]}else return e},Fn=(e,n)=>{if(!(n<0&&An(e)&&e.hasChildNodes()))return hg(e,n)},s2=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),E0=e=>oe(e)&&e.charCodeAt(0)>=768&&s2.test(e),r2=(...e)=>n=>{for(let s=0;s<e.length;s++)if(e[s](n))return!0;return!1},a2=(...e)=>n=>{for(let s=0;s<e.length;s++)if(!e[s](n))return!1;return!0},Wx=Lt,Ux=ar,up=rr,Db=qt,em=lu(["script","style","textarea"]),_0=lu(["img","input","textarea","hr","iframe","video","audio","object","embed"]),dp=lu(["table"]),O0=Lu,md=e=>O0(e)?!1:Db(e)?!em(e.parentNode):_0(e)||up(e)||dp(e)||R0(e),QT=e=>An(e)&&e.getAttribute("unselectable")==="true",R0=e=>!QT(e)&&Ux(e),D0=(e,n)=>{for(let s=e.parentNode;s&&s!==n;s=s.parentNode){if(R0(s))return!1;if(Wx(s))return!0}return!0},eE=e=>R0(e)?!Vo(oo(e.getElementsByTagName("*")),(n,s)=>n||Wx(s),!1):!1,tE=e=>_0(e)||eE(e),i2=(e,n)=>md(e)&&D0(e,n),Mb=An,l2=md,Xx=Rf("display","block table"),nE=Rf("float","left right"),Pb=a2(Mb,l2,No(nE)),hp=No(Rf("white-space","pre pre-line pre-wrap")),Qg=qt,M0=rr,Yx=Jr.nodeIndex,P0=Fn,jx=e=>e?e.createRange():Jr.DOM.createRng(),Zx=e=>oe(e)&&/[\r\n\t ]/.test(e),Gx=e=>!!e.setStart&&!!e.setEnd,c2=e=>{const n=e.startContainer,s=e.startOffset;if(Zx(e.toString())&&hp(n.parentNode)&&qt(n)){const i=n.data;if(Zx(i[s-1])||Zx(i[s+1]))return!0}return!1},Wc=e=>{const n=e.ownerDocument,s=jx(n),i=n.createTextNode(za),u=e.parentNode;u.insertBefore(i,e),s.setStart(i,0),s.setEnd(i,1);const f=dg(s.getBoundingClientRect());return u.removeChild(i),f},tm=e=>{const n=e.startContainer,s=e.endContainer,i=e.startOffset,u=e.endOffset;if(n===s&&qt(s)&&i===0&&u===1){const f=e.cloneRange();return f.setEndAfter(s),ef(f)}else return null},u2=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ef=e=>{var n;let s;const i=e.getClientRects();return i.length>0?s=dg(i[0]):s=dg(e.getBoundingClientRect()),!Gx(e)&&M0(e)&&u2(s)?Wc(e):u2(s)&&Gx(e)&&(n=tm(e))!==null&&n!==void 0?n:s},nm=(e,n)=>{const s=t2(e,n);return s.width=1,s.right=s.left+1,s},qx=e=>{const n=[],s=x=>{x.height!==0&&(n.length>0&&KT(x,n[n.length-1])||n.push(x))},i=(x,T)=>{const D=jx(x.ownerDocument);if(T<x.data.length){if(E0(x.data[T]))return;if(E0(x.data[T-1])&&(D.setStart(x,T),D.setEnd(x,T+1),!c2(D))){s(nm(ef(D),!1));return}}T>0&&(D.setStart(x,T-1),D.setEnd(x,T),c2(D)||s(nm(ef(D),!1))),T<x.data.length&&(D.setStart(x,T),D.setEnd(x,T+1),c2(D)||s(nm(ef(D),!0)))},u=e.container(),f=e.offset();if(Qg(u))return i(u,f),n;if(Mb(u))if(e.isAtEnd()){const x=P0(u,f);Qg(x)&&i(x,x.data.length),Pb(x)&&!M0(x)&&s(nm(ef(x),!1))}else{const x=P0(u,f);if(Qg(x)&&i(x,0),Pb(x)&&e.isAtEnd())return s(nm(ef(x),!1)),n;const T=P0(e.container(),e.offset()-1);Pb(T)&&!M0(T)&&(Xx(T)||Xx(x)||!Pb(x))&&s(nm(ef(T),!1)),Pb(x)&&s(nm(ef(x),!0))}return n},At=(e,n,s)=>{const i=()=>(Qg(e),n===0),u=()=>Qg(e)?n>=e.data.length:n>=e.childNodes.length,f=()=>{const G=jx(e.ownerDocument);return G.setStart(e,n),G.setEnd(e,n),G},x=()=>(s||(s=qx(At(e,n))),s),T=()=>x().length>0,D=G=>G&&e===G.container()&&n===G.offset(),F=G=>P0(e,G?n-1:n);return{container:Dt(e),offset:Dt(n),toRange:f,getClientRects:x,isVisible:T,isAtStart:i,isAtEnd:u,isEqual:D,getNode:F}};At.fromRangeStart=e=>At(e.startContainer,e.startOffset),At.fromRangeEnd=e=>At(e.endContainer,e.endOffset),At.after=e=>At(e.parentNode,Yx(e)+1),At.before=e=>At(e.parentNode,Yx(e)),At.isAbove=(e,n)=>Oo(qn(n.getClientRects()),Ns(e.getClientRects()),aa).getOr(!1),At.isBelow=(e,n)=>Oo(Ns(n.getClientRects()),qn(e.getClientRects()),Ob).getOr(!1),At.isAtStart=e=>e?e.isAtStart():!1,At.isAtEnd=e=>e?e.isAtEnd():!1,At.isTextPosition=e=>e?qt(e.container()):!1,At.isElementPosition=e=>!At.isTextPosition(e);const pd=(e,n)=>{qt(n)&&n.data.length===0&&e.remove(n)},om=(e,n,s)=>{n.insertNode(s),pd(e,s.previousSibling),pd(e,s.nextSibling)},oE=(e,n,s)=>{const i=te.from(s.firstChild),u=te.from(s.lastChild);n.insertNode(s),i.each(f=>pd(e,f.previousSibling)),u.each(f=>pd(e,f.nextSibling))},Lb=(e,n,s)=>{Fi(s)?oE(e,n,s):om(e,n,s)},Nu=qt,gp=Id,d2=Jr.nodeIndex,h2=e=>{const n=e.parentNode;return gp(n)?h2(n):n},jl=e=>e?Ne(e.childNodes,(n,s)=>(gp(s)&&s.nodeName!=="BR"?n=n.concat(jl(s)):n.push(s),n),[]):[],L0=(e,n)=>{let s=e;for(;(s=s.previousSibling)&&Nu(s);)n+=s.data.length;return n},g2=e=>n=>e===n,sE=e=>{let n,s;n=jl(h2(e)),s=Re(n,g2(e),e),n=n.slice(0,s+1);const i=Ne(n,(u,f,x)=>(Nu(f)&&Nu(n[x-1])&&u++,u),0);return n=va(n,lu([e.nodeName])),s=Re(n,g2(e),e),s-i},f2=e=>(Nu(e)?"text()":e.nodeName.toLowerCase())+"["+sE(e)+"]",rE=(e,n,s)=>{const i=[];for(let u=n.parentNode;u&&u!==e;u=u.parentNode)i.push(u);return i},m2=(e,n)=>{let s=[],i=n.container(),u=n.offset(),f;if(Nu(i))f=L0(i,u);else{const T=i.childNodes;u>=T.length?(f="after",u=T.length-1):f="before",i=T[u]}s.push(f2(i));let x=rE(e,i);return x=va(x,No(Id)),s=s.concat(Ea(x,T=>f2(T))),s.reverse().join("/")+","+f},aE=(e,n,s)=>{let i=jl(e);return i=va(i,(u,f)=>!Nu(u)||!Nu(i[f-1])),i=va(i,lu([n])),i[s]},iE=(e,n)=>{let s=e,i=0;for(;Nu(s);){const u=s.data.length;if(n>=i&&n<=i+u){e=s,n=n-i;break}if(!Nu(s.nextSibling)){e=s,n=u;break}i+=u,s=s.nextSibling}return Nu(e)&&n>e.data.length&&(n=e.data.length),At(e,n)},p2=(e,n)=>{if(!n)return null;const s=n.split(","),i=s[0].split("/"),u=s.length>1?s[1]:"before",f=Ne(i,(x,T)=>{const D=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(T);return D?(D[1]==="text()"&&(D[1]="#text"),aE(x,D[1],parseInt(D[2],10))):null},e);if(!f)return null;if(!Nu(f)&&f.parentNode){let x;return u==="after"?x=d2(f)+1:x=d2(f),At(f.parentNode,x)}return iE(f,parseInt(u,10))},fp=ar,lE=(e,n,s)=>{let i=e(n.data.slice(0,s)).length;for(let u=n.previousSibling;u&&qt(u);u=u.previousSibling)i+=e(u.data).length;return i},b2=(e,n,s,i,u)=>{const f=u?i.startContainer:i.endContainer;let x=u?i.startOffset:i.endOffset;const T=[],D=e.getRoot();if(qt(f))T.push(s?lE(n,f,x):x);else{let F=0;const G=f.childNodes;x>=G.length&&G.length&&(F=1,x=Math.max(0,G.length-1)),T.push(e.nodeIndex(G[x],s)+F)}for(let F=f;F&&F!==D;F=F.parentNode)T.push(e.nodeIndex(F,s));return T},cE=(e,n,s,i)=>{const u=n.dom,f=b2(u,e,s,i,!0),x=n.isForward(),T=ra(i)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:f,forward:x,...T};{const D=b2(u,e,s,i,!1);return{start:f,end:D,forward:x,...T}}},Ia=(e,n,s)=>{let i=0;return zt.each(e.select(n),u=>{if(u.getAttribute("data-mce-bogus")!=="all"){if(u===s)return!1;i++;return}}),i},Kx=(e,n)=>{let s=n?e.startContainer:e.endContainer,i=n?e.startOffset:e.endOffset;if(An(s)&&s.nodeName==="TR"){const u=s.childNodes;s=u[Math.min(n?i:i-1,u.length-1)],s&&(i=n?0:s.childNodes.length,n?e.setStart(s,i):e.setEnd(s,i))}},v2=e=>(Kx(e,!0),Kx(e,!1),e),x2=(e,n)=>{if(An(e)&&(e=hg(e,n),fp(e)))return e;if(Lu(e)){qt(e)&&Jg(e)&&(e=e.parentNode);let s=e.previousSibling;if(fp(s)||(s=e.nextSibling,fp(s)))return s}},Jx=e=>x2(e.startContainer,e.startOffset)||x2(e.endContainer,e.endOffset),el=(e,n,s)=>{const i=s.getNode(),u=s.getRng();if(i.nodeName==="IMG"||fp(i)){const x=i.nodeName;return{name:x,index:Ia(s.dom,x,i)}}const f=Jx(u);if(f){const x=f.tagName;return{name:x,index:Ia(s.dom,x,f)}}return cE(e,s,n,u)},du=e=>{const n=e.getRng();return{start:m2(e.dom.getRoot(),At.fromRangeStart(n)),end:m2(e.dom.getRoot(),At.fromRangeEnd(n)),forward:e.isForward()}},y2=e=>({rng:e.getRng(),forward:e.isForward()}),Qx=(e,n,s)=>{const i={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return s?e.create("span",i,"&#xFEFF;"):e.create("span",i)},ey=(e,n)=>{const s=e.dom;let i=e.getRng();const u=s.uniqueId(),f=e.isCollapsed(),x=e.getNode(),T=x.nodeName,D=e.isForward();if(T==="IMG")return{name:T,index:Ia(s,T,x)};const F=v2(i.cloneRange());if(!f){F.collapse(!1);const J=Qx(s,u+"_end",n);Lb(s,F,J)}i=v2(i),i.collapse(!0);const G=Qx(s,u+"_start",n);return Lb(s,i,G),e.moveToBookmark({id:u,keep:!0,forward:D}),{id:u,forward:D}},uE=(e,n,s=!1)=>n===2?el(Pu,s,e):n===3?du(e):n?y2(e):ey(e,!1),N0=it(el,Ao,!0),w2=e=>{const n=f=>f(e),s=Dt(e),i=()=>u,u={tag:!0,inner:e,fold:(f,x)=>x(e),isValue:wt,isError:dt,map:f=>Hi.value(f(e)),mapError:i,bind:n,exists:n,forall:n,getOr:s,or:i,getOrThunk:s,orThunk:i,getOrDie:s,each:f=>{f(e)},toOptional:()=>te.some(e)};return u},Nb=e=>{const n=()=>s,s={tag:!1,inner:e,fold:(i,u)=>i(e),isValue:dt,isError:wt,map:n,mapError:i=>Hi.error(i(e)),bind:n,exists:dt,forall:wt,getOr:Ao,or:Ao,getOrThunk:Ht,orThunk:Ht,getOrDie:qs(String(e)),each:ot,toOptional:te.none};return s},Hi={value:w2,error:Nb,fromOption:(e,n)=>e.fold(()=>Nb(n),w2)},Iu={generate:e=>{if(!jt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],s={};return De(e,(i,u)=>{const f=uo(i);if(f.length!==1)throw new Error("one and only one name per case");const x=f[0],T=i[x];if(s[x]!==void 0)throw new Error("duplicate key detected:"+x);if(x==="cata")throw new Error("cannot have a case named cata (sorry)");if(!jt(T))throw new Error("case arguments must be an array");n.push(x),s[x]=(...D)=>{const F=D.length;if(F!==T.length)throw new Error("Wrong number of arguments to case "+x+". Expected "+T.length+" ("+T+"), got "+F);return{fold:(...J)=>{if(J.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+J.length);return J[u].apply(null,D)},match:J=>{const ee=uo(J);if(n.length!==ee.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+ee.join(","));if(!qo(n,ke=>We(ee,ke)))throw new Error("Not all branches were specified when using match. Specified: "+ee.join(", ")+`
Required: `+n.join(", "));return J[x].apply(null,D)},log:J=>{console.log(J,{constructors:n,constructor:x,params:D})}}}}),s}};Iu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ca=e=>{const n=[],s=[];return De(e,i=>{i.fold(u=>{n.push(u)},u=>{s.push(u)})}),{errors:n,values:s}},Oh=e=>e.type==="inline-command"||e.type==="inline-format",mp=e=>e.type==="block-command"||e.type==="block-format",ty=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,Ib=e=>{var n;const s=u=>Hi.error({message:u,pattern:e}),i=(u,f,x)=>{if(e.format!==void 0){let T;if(jt(e.format)){if(!qo(e.format,oe))return s(u+" pattern has non-string items in the `format` array");T=e.format}else if(oe(e.format))T=[e.format];else return s(u+" pattern has non-string `format` parameter");return Hi.value(f(T))}else return e.cmd!==void 0?oe(e.cmd)?Hi.value(x(e.cmd,e.value)):s(u+" pattern has non-string `cmd` parameter"):s(u+" pattern is missing both `format` and `cmd` parameters")};if(!Wt(e))return s("Raw pattern is not an object");if(!oe(e.start))return s("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!oe(e.end))return s("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return s("Inline pattern has empty `start` and `end` parameters");let u=e.start,f=e.end;return f.length===0&&(f=u,u=""),i("Inline",x=>({type:"inline-format",start:u,end:f,format:x}),(x,T)=>({type:"inline-command",start:u,end:f,cmd:x,value:T}))}else{if(e.replacement!==void 0)return oe(e.replacement)?e.start.length===0?s("Replacement pattern has empty `start` parameter"):Hi.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):s("Replacement pattern has non-string `replacement` parameter");{const u=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?s("Block pattern has empty `start` parameter"):i("Block",f=>({type:"block-format",start:e.start,format:f[0],trigger:u}),(f,x)=>({type:"block-command",start:e.start,cmd:f,value:x,trigger:u}))}}},S2=e=>Cn(e,mp),tf=e=>Cn(e,Oh),Nl=(e,n)=>({inlinePatterns:tf(e),blockPatterns:S2(e),dynamicPatternsLookup:n}),Rh=(e,n)=>({...e,blockPatterns:Cn(e.blockPatterns,s=>ty(s,n))}),k2=e=>{const n=Ca(Ze(e,Ib));return De(n.errors,s=>console.error(s.message,s.pattern)),n.values},hE=e=>n=>{const s=e(n);return k2(s)},ny=he().deviceType,I0=ny.isTouch(),oy=Jr.DOM,sy=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Vo(n,(s,i)=>{const u=i.split("="),f=u[0],x=u.length>1?u[1]:f;return s[Ys(f)]=Ys(x),s},{})},F0=e=>xn(e,RegExp),Bn=e=>n=>n.options.get(e),Fb=e=>oe(e)||Wt(e),ry=(e,n="")=>s=>{const i=oe(s);if(i)if(s.indexOf("=")!==-1){const u=sy(s);return{value:Ts(u,e.id).getOr(n),valid:i}}else return{value:s,valid:i};else return{valid:!1,message:"Must be a string."}},A2=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:ry(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:ry(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:s=>{const i=oe(s)&&so(s);return i?{value:s,valid:i}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:s=>{const i=We(["block","linebreak","invert","default"],s);return i?{value:s,valid:i}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:s=>Gt(s)?{valid:!0,value:s}:oe(s)?{valid:!0,value:s}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:s=>{const i=s===!1||oe(s)||Je(s,oe);return i?oe(s)?{value:Ze(s.split(","),Ys),valid:i}:jt(s)?{value:s,valid:i}:s===!1?{value:[],valid:i}:{value:s,valid:i}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:im(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:s=>{const i=oe(s)||Je(s,oe);return i?{value:jt(s)?s:Ze(s.split(","),Ys),valid:i}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:s=>{const i=Gt(s)||oe(s);return i?s===!1||ny.isiPhone()||ny.isiPad()?{value:"",valid:i}:{value:s===!0?"table,img,figure.image,div,video,iframe":s,valid:i}:{valid:!1,message:"Must be boolean or a string"}},default:!I0}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:s=>s===!1||oe(s)||Be(s),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:s=>{const i=s===!1||oe(s);return i?{value:s===!1?"":s,valid:i}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:s=>{const i=Je(s,oe);return i?{value:s,valid:i}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Fb}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Fb}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Fb}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Fb}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:s=>oe(s)||s===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:s=>Je(s,Wt)||s===!1?{value:k2(s===!1?[]:s),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:s=>Be(s)?{value:hE(s),valid:!0}:{valid:!1,message:"Must be a single function"},default:s=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:s=>Je(s,F0)?{value:s,valid:!0}:F0(s)?{value:[s],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:s=>{const i=We(["inherited","collapsed","expanded"],s);return i?{value:s,valid:i}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:s=>{const i=We(["inherited","collapsed","expanded"],s);return i?{value:s,valid:i}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ud.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:oy.getAttrib(e.getElement(),"placeholder")})})},gE=Bn("iframe_attrs"),Il=Bn("doctype"),T2=Bn("document_base_url"),nf=Bn("body_id"),E2=Bn("body_class"),ay=Bn("content_security_policy"),_2=Bn("br_in_pre"),Fl=Bn("forced_root_block"),of=Bn("forced_root_block_attrs"),iy=Bn("newline_behavior"),sm=Bn("br_newline_selector"),fE=Bn("no_newline_selector"),$i=Bn("keep_styles"),zi=Bn("end_container_on_empty_block"),Al=Bn("automatic_uploads"),Vi=Bn("images_reuse_filename"),yr=Bn("images_replace_blob_uris"),Ei=Bn("icons"),B0=Bn("icons_url"),ly=Bn("images_upload_url"),cy=Bn("images_upload_base_path"),uy=Bn("images_upload_credentials"),O2=Bn("images_upload_handler"),R2=Bn("content_css_cors"),Bb=Bn("referrer_policy"),H0=Bn("language"),Hb=Bn("language_url"),D2=Bn("indent_use_margin"),N4=Bn("indentation"),rm=Bn("content_css"),Uc=Bn("content_style"),mE=Bn("font_css"),pE=Bn("directionality"),Fu=Bn("inline_boundaries_selector"),pp=Bn("object_resizing"),am=Bn("resize_img_proportional"),Dh=Bn("placeholder"),ic=Bn("event_root"),dy=Bn("service_message"),sf=Bn("theme"),M2=Bn("theme_url"),$0=Bn("model"),hy=Bn("model_url"),$b=Bn("inline_boundaries"),z0=Bn("formats"),P2=Bn("preview_styles"),L2=Bn("format_empty_lines"),N2=Bn("format_noneditable_selector"),zb=Bn("custom_ui_selector"),im=Bn("inline"),Vb=Bn("hidden_input"),bE=Bn("submit_patch"),gy=Bn("add_form_submit_trigger"),vE=Bn("add_unload_trigger"),V0=Bn("custom_undo_redo_levels"),xE=Bn("disable_nodechange"),I2=Bn("readonly"),yE=Bn("editable_root"),F2=Bn("content_css_cors"),Wb=Bn("plugins"),B2=Bn("external_plugins"),wc=Bn("block_unsupported_drop"),fy=Bn("visual"),H2=Bn("visual_table_class"),my=Bn("visual_anchor_class"),Ub=Bn("iframe_aria_text"),wE=Bn("setup"),CE=Bn("init_instance_callback"),SE=Bn("urlconverter_callback"),W0=Bn("auto_focus"),$2=Bn("browser_spellcheck"),py=Bn("protect"),by=Bn("paste_block_drop"),Xb=Bn("paste_data_images"),vy=Bn("paste_preprocess"),z2=Bn("paste_postprocess"),V2=Bn("newdocument_content"),W2=Bn("paste_webkit_styles"),kE=Bn("paste_remove_styles_if_webkit"),U2=Bn("paste_merge_formats"),xy=Bn("smart_paste"),X2=Bn("paste_as_text"),rf=Bn("paste_tab_spaces"),Y2=Bn("allow_html_data_urls"),AE=Bn("text_patterns"),TE=Bn("text_patterns_lookup"),U0=Bn("noneditable_class"),bd=Bn("editable_class"),X0=Bn("noneditable_regexp"),Y0=Bn("preserve_cdata"),yy=Bn("highlight_on_focus"),j2=Bn("xss_sanitization"),_i=Bn("init_content_sync"),Z2=e=>e.options.isSet("text_patterns_lookup"),bp=e=>zt.explode(e.options.get("font_size_style_values")),af=e=>zt.explode(e.options.get("font_size_classes")),j0=e=>e.options.get("encoding")==="xml",G2=e=>zt.explode(e.options.get("images_file_types")),EE=Bn("table_tab_navigation"),_E=Bn("details_initial_state"),q2=Bn("details_serialized_state"),Yb=Bn("sandbox_iframes"),wy=e=>e.options.get("sandbox_iframes_exclusions"),OE=Bn("convert_unsafe_embeds"),vp=Bn("license_key"),K2=Bn("api_key"),J2=An,Q2=qt,Cy=e=>{const n=e.parentNode;n&&n.removeChild(e)},Z0=e=>{const n=Pu(e);return{count:e.length-n.length,text:n}},eS=e=>{let n;for(;(n=e.data.lastIndexOf(Qi))!==-1;)e.deleteData(n,1)},lf=(e,n)=>(lm(e),n),RE=(e,n)=>{const s=Z0(e.data.substr(0,n.offset())),i=Z0(e.data.substr(n.offset()));return(s.text+i.text).length>0?(eS(e),At(e,n.offset()-s.count)):n},tS=(e,n)=>{const s=n.container(),i=Ka(oo(s.childNodes),e).map(u=>u<n.offset()?At(s,n.offset()-1):n).getOr(n);return lm(e),i},nS=(e,n)=>Q2(e)&&n.container()===e?RE(e,n):lf(e,n),G0=(e,n)=>n.container()===e.parentNode?tS(e,n):lf(e,n),DE=(e,n)=>At.isTextPosition(n)?nS(e,n):G0(e,n),lm=e=>{J2(e)&&Lu(e)&&(e2(e)?e.removeAttribute("data-mce-caret"):Cy(e)),Q2(e)&&(eS(e),e.data.length===0&&Cy(e))},q0=ar,jb=Cl,oS=Pf,xp="*[contentEditable=false],video,audio,embed,object",yp=(e,n,s)=>{const i=t2(n.getBoundingClientRect(),s);let u,f;if(e.tagName==="BODY"){const T=e.ownerDocument.documentElement;u=e.scrollLeft||T.scrollLeft,f=e.scrollTop||T.scrollTop}else{const T=e.getBoundingClientRect();u=e.scrollLeft-T.left,f=e.scrollTop-T.top}i.left+=u,i.right+=u,i.top+=f,i.bottom+=f,i.width=1;let x=n.offsetWidth-n.clientWidth;return x>0&&(s&&(x*=-1),i.left+=x,i.right+=x),i},ME=e=>{var n,s;const i=Vs($e.fromDom(e),xp);for(let u=0;u<i.length;u++){const f=i[u].dom;let x=f.previousSibling;if(Yl(x)){const T=x.data;T.length===1?(n=x.parentNode)===null||n===void 0||n.removeChild(x):x.deleteData(T.length-1,1)}x=f.nextSibling,Ws(x)&&(x.data.length===1?(s=x.parentNode)===null||s===void 0||s.removeChild(x):x.deleteData(0,1))}},sS=(e,n,s,i)=>{const u=Ji();let f,x;const T=Fl(e),D=e.dom,F=(be,Ee)=>{let Ye;if(G(),oS(Ee))return null;if(s(Ee)){const qe=T0(T,Ee,be),tt=yp(n,Ee,be);D.setStyle(qe,"top",tt.top),D.setStyle(qe,"caret-color","transparent"),x=qe;const lt=D.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});D.setStyles(lt,{...tt}),D.add(n,lt),u.set({caret:lt,element:Ee,before:be}),be&&D.addClass(lt,"mce-visual-caret-before"),J(),Ye=Ee.ownerDocument.createRange(),Ye.setStart(qe,0),Ye.setEnd(qe,0)}else return x=qT(Ee,be),Ye=Ee.ownerDocument.createRange(),cm(x.nextSibling)?(Ye.setStart(x,0),Ye.setEnd(x,0)):(Ye.setStart(x,1),Ye.setEnd(x,1)),Ye;return Ye},G=()=>{ME(n),x&&(lm(x),x=null),u.on(be=>{D.remove(be.caret),u.clear()}),f&&(clearInterval(f),f=void 0)},J=()=>{f=setInterval(()=>{u.on(be=>{i()?D.toggleClass(be.caret,"mce-visual-caret-hidden"):D.addClass(be.caret,"mce-visual-caret-hidden")})},500)};return{show:F,hide:G,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{u.on(be=>{const Ee=yp(n,be.element,be.before);D.setStyles(be.caret,{...Ee})})},destroy:()=>clearInterval(f)}},PE=()=>In.browser.isFirefox(),cm=e=>q0(e)||jb(e),wp=e=>(cm(e)||Ou(e)&&PE())&&Qu($e.fromDom(e)).exists(Pl),Sy=Lt,ky=ar,LE=Cl,Ay=Rf("display","block table table-cell table-row table-caption list-item"),rS=Lu,aS=Jg,Cp=An,iS=qt,K0=md,cf=e=>e>0,gg=e=>e<0,Zb=(e,n)=>{let s;for(;s=e(n);)if(!aS(s))return s;return null},Gb=(e,n,s,i,u)=>{const f=new Tr(e,i),x=ky(e)||aS(e);let T;if(gg(n)){if(x&&(T=Zb(f.prev.bind(f),!0),s(T)))return T;for(;T=Zb(f.prev.bind(f),u);)if(s(T))return T}if(cf(n)){if(x&&(T=Zb(f.next.bind(f),!0),s(T)))return T;for(;T=Zb(f.next.bind(f),u);)if(s(T))return T}return null},NE=(e,n)=>{const s=u=>Sy(u.dom),i=u=>u.dom===n;return Br($e.fromDom(e),s,i).map(u=>u.dom).getOr(n)},Xc=(e,n)=>{for(;e&&e!==n;){if(Ay(e))return e;e=e.parentNode}return null},jd=(e,n,s)=>Xc(e.container(),s)===Xc(n.container(),s),Ty=(e,n)=>{if(!n)return te.none();const s=n.container(),i=n.offset();return Cp(s)?te.from(s.childNodes[i+e]):te.none()},IE=(e,n)=>{var s;const u=((s=n.ownerDocument)!==null&&s!==void 0?s:document).createRange();return e?(u.setStartBefore(n),u.setEndBefore(n)):(u.setStartAfter(n),u.setEndAfter(n)),u},I4=(e,n,s)=>Xc(n,e)===Xc(s,e),uf=(e,n,s)=>{const i=e?"previousSibling":"nextSibling";let u=s;for(;u&&u!==n;){let f=u[i];if(f&&rS(f)&&(f=f[i]),ky(f)||LE(f)){if(I4(n,f,u))return f;break}if(K0(f))break;u=u.parentNode}return null},Sp=it(IE,!0),Tl=it(IE,!1),Ey=(e,n,s)=>{let i;const u=it(uf,!0,n),f=it(uf,!1,n),x=s.startContainer,T=s.startOffset;if(Jg(x)){const D=iS(x)?x.parentNode:x,F=D.getAttribute("data-mce-caret");if(F==="before"&&(i=D.nextSibling,wp(i)))return Sp(i);if(F==="after"&&(i=D.previousSibling,wp(i)))return Tl(i)}if(!s.collapsed)return s;if(qt(x)){if(rS(x)){if(e===1){if(i=f(x),i)return Sp(i);if(i=u(x),i)return Tl(i)}if(e===-1){if(i=u(x),i)return Tl(i);if(i=f(x),i)return Sp(i)}return s}if(Yl(x)&&T>=x.data.length-1)return e===1&&(i=f(x),i)?Sp(i):s;if(Ws(x)&&T<=1)return e===-1&&(i=u(x),i)?Tl(i):s;if(T===x.data.length)return i=f(x),i?Sp(i):s;if(T===0)return i=u(x),i?Tl(i):s}return s},J0=(e,n)=>Ty(e?0:-1,n).filter(ky),um=(e,n,s)=>{const i=Ey(e,n,s);return e===-1?At.fromRangeStart(i):At.fromRangeEnd(i)},qb=e=>te.from(e.getNode()).map($e.fromDom),FE=e=>te.from(e.getNode(!0)).map($e.fromDom),_y=(e,n)=>{let s=n;for(;s=e(s);)if(s.isVisible())return s;return s},Kb=(e,n)=>{const s=jd(e,n);return!s&&rr(e.getNode())?!0:s};var El;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(El||(El={}));const Oy=ar,Bu=qt,Ry=An,kp=rr,Ap=md,Dy=tE,fg=i2,My=(e,n)=>{const s=[];let i=e;for(;i&&i!==n;)s.push(i),i=i.parentNode;return s},Py=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Ly=(e,n)=>{if(cf(e)){if(Ap(n.previousSibling)&&!Bu(n.previousSibling))return At.before(n);if(Bu(n))return At(n,0)}if(gg(e)){if(Ap(n.nextSibling)&&!Bu(n.nextSibling))return At.after(n);if(Bu(n))return At(n,n.data.length)}return gg(e)?kp(n)?At.before(n):At.after(n):At.before(n)},Mh=(e,n)=>{const s=n.nextSibling;return s&&Ap(s)?Bu(s)?At(s,0):At.before(s):Q0(El.Forwards,At.after(n),e)},Q0=(e,n,s)=>{let i,u,f,x;if(!Ry(s)||!n)return null;if(n.isEqual(At.after(s))&&s.lastChild){if(x=At.after(s.lastChild),gg(e)&&Ap(s.lastChild)&&Ry(s.lastChild))return kp(s.lastChild)?At.before(s.lastChild):x}else x=n;const T=x.container();let D=x.offset();if(Bu(T)){if(gg(e)&&D>0)return At(T,--D);if(cf(e)&&D<T.length)return At(T,++D);i=T}else{if(gg(e)&&D>0&&(u=Py(T,D-1),Ap(u)))return!Dy(u)&&(f=Gb(u,e,fg,u),f)?Bu(f)?At(f,f.data.length):At.after(f):Bu(u)?At(u,u.data.length):At.before(u);if(cf(e)&&D<T.childNodes.length&&(u=Py(T,D),Ap(u)))return kp(u)?Mh(s,u):!Dy(u)&&(f=Gb(u,e,fg,u),f)?Bu(f)?At(f,0):At.before(f):Bu(u)?At(u,0):At.after(u);i=u||x.getNode()}if(i&&(cf(e)&&x.isAtEnd()||gg(e)&&x.isAtStart())&&(i=Gb(i,e,wt,s,!0),fg(i,s)))return Ly(e,i);u=i&&Gb(i,e,fg,s);const F=gt(Cn(My(T,s),Oy));return F&&(!u||!F.contains(u))?(cf(e)?x=At.after(F):x=At.before(F),x):u?Ly(e,u):null},Bl=e=>({next:n=>Q0(El.Forwards,n,e),prev:n=>Q0(El.Backwards,n,e)}),lS=(e,n,s)=>{const i=e?At.before(s):At.after(s);return hu(e,n,i)},Ny=e=>rr(e)?At.before(e):At.after(e),Iy=e=>At.isTextPosition(e)?e.offset()===0:md(e.getNode()),cS=e=>{if(At.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return md(e.getNode(!0))},Fy=(e,n)=>!At.isTextPosition(e)&&!At.isTextPosition(n)&&e.getNode()===n.getNode(!0),uS=e=>!At.isTextPosition(e)&&rr(e.getNode()),dS=(e,n,s)=>e?!Fy(n,s)&&!uS(n)&&cS(n)&&Iy(s):!Fy(s,n)&&Iy(n)&&cS(s),hu=(e,n,s)=>{const i=Bl(n);return te.from(e?i.next(s):i.prev(s))},df=(e,n,s)=>hu(e,n,s).bind(i=>jd(s,i,n)&&dS(e,s,i)?hu(e,n,i):te.some(i)),hS=(e,n,s,i)=>df(e,n,s).bind(u=>i(u)?hS(e,n,u,i):te.some(u)),dm=(e,n)=>{const s=e?n.firstChild:n.lastChild;return qt(s)?te.some(At(s,e?0:s.data.length)):s?md(s)?te.some(e?At.before(s):Ny(s)):lS(e,n,s):te.none()},lc=it(hu,!0),Yc=it(hu,!1),cc=it(dm,!0),gu=it(dm,!1),e1="_mce_caret",fu=e=>An(e)&&e.id===e1,hm=(e,n)=>{let s=n;for(;s&&s!==e;){if(fu(s))return s;s=s.parentNode}return null},gS=e=>oe(e.start),F4=e=>Qn(e,"rng"),BE=e=>Qn(e,"id"),By=e=>Qn(e,"name"),HE=e=>zt.isArray(e.start),t1=e=>!By(e)&&Gt(e.forward)?e.forward:!0,_l=(e,n)=>(An(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Jb=(e,n)=>{const s=te.from(p2(e.getRoot(),n.start)),i=te.from(p2(e.getRoot(),n.end));return Oo(s,i,(u,f)=>{const x=e.createRng();return x.setStart(u.container(),u.offset()),x.setEnd(f.container(),f.offset()),{range:x,forward:t1(n)}})},Qb=(e,n)=>{var s;const u=((s=e.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Qi);e.appendChild(u),n.setStart(u,0),n.setEnd(u,0)},hf=e=>!e.hasChildNodes(),Hy=(e,n)=>gu(e).fold(dt,s=>(n.setStart(s.container(),s.offset()),n.setEnd(s.container(),s.offset()),!0)),n1=(e,n,s)=>hf(n)&&hm(e,n)?(Qb(n,s),!0):!1,$y=(e,n,s,i)=>{const u=s[n?"start":"end"],f=e.getRoot();if(u){let x=f,T=u[0];for(let D=u.length-1;x&&D>=1;D--){const F=x.childNodes;if(n1(f,x,i))return!0;if(u[D]>F.length-1)return n1(f,x,i)?!0:Hy(x,i);x=F[u[D]]}qt(x)&&(T=Math.min(u[0],x.data.length)),An(x)&&(T=Math.min(u[0],x.childNodes.length)),n?i.setStart(x,T):i.setEnd(x,T)}return!0},o1=e=>qt(e)&&e.data.length>0,zy=(e,n,s)=>{const i=e.get(s.id+"_"+n),u=i==null?void 0:i.parentNode,f=s.keep;if(i&&u){let x,T;if(n==="start"?f?i.hasChildNodes()?(x=i.firstChild,T=1):o1(i.nextSibling)?(x=i.nextSibling,T=0):o1(i.previousSibling)?(x=i.previousSibling,T=i.previousSibling.data.length):(x=u,T=e.nodeIndex(i)+1):(x=u,T=e.nodeIndex(i)):f?i.hasChildNodes()?(x=i.firstChild,T=1):o1(i.previousSibling)?(x=i.previousSibling,T=i.previousSibling.data.length):(x=u,T=e.nodeIndex(i)):(x=u,T=e.nodeIndex(i)),!f){const D=i.previousSibling,F=i.nextSibling;zt.each(zt.grep(i.childNodes),J=>{qt(J)&&(J.data=J.data.replace(/\uFEFF/g,""))});let G;for(;G=e.get(s.id+"_"+n);)e.remove(G,!0);if(qt(F)&&qt(D)&&!In.browser.isOpera()){const J=D.data.length;D.appendData(F.data),e.remove(F),x=D,T=J}}return te.some(At(x,T))}else return te.none()},Tp=(e,n)=>{const s=e.createRng();return $y(e,!0,n,s)&&$y(e,!1,n,s)?te.some({range:s,forward:t1(n)}):te.none()},mg=(e,n)=>{const s=zy(e,"start",n),i=zy(e,"end",n);return Oo(s,i.or(s),(u,f)=>{const x=e.createRng();return x.setStart(_l(e,u.container()),u.offset()),x.setEnd(_l(e,f.container()),f.offset()),{range:x,forward:t1(n)}})},ev=(e,n)=>te.from(e.select(n.name)[n.index]).map(s=>{const i=e.createRng();return i.selectNode(s),{range:i,forward:!0}}),gm=(e,n)=>{const s=e.dom;if(n){if(HE(n))return Tp(s,n);if(gS(n))return Jb(s,n);if(BE(n))return mg(s,n);if(By(n))return ev(s,n);if(F4(n))return te.some({range:n.rng,forward:t1(n)})}return te.none()},pg=(e,n,s)=>uE(e,n,s),fS=(e,n)=>{gm(e,n).each(({range:s,forward:i})=>{e.setRng(s,i)})},jc=e=>An(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",gf=(e=>n=>e===n)(za),fm=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,s1=e=>!fm(e)&&!gf(e)&&!il(e),r1=e=>{const n=[];if(e)for(let s=0;s<e.rangeCount;s++)n.push(e.getRangeAt(s));return n},$E=e=>vr(e,n=>{const s=Rb(n);return s?[$e.fromDom(s)]:[]}),zE=e=>r1(e).length>1,mS=e=>Cn($E(e),Eb),pS=e=>Vs(e,"td[data-mce-selected],th[data-mce-selected]"),mm=(e,n)=>{const s=pS(n);return s.length>0?s:mS(e)},Ep=e=>mm(r1(e.selection.getSel()),$e.fromDom(e.getBody())),tv=(e,n)=>La(e,"table",n),VE=e=>{const n=e.startContainer,s=e.startOffset;return qt(n)?s===0?te.some($e.fromDom(n)):te.none():te.from(n.childNodes[s]).map($e.fromDom)},bS=e=>{const n=e.endContainer,s=e.endOffset;return qt(n)?s===n.data.length?te.some($e.fromDom(n)):te.none():te.from(n.childNodes[s-1]).map($e.fromDom)},nv=e=>Ki(e).fold(Dt([e]),n=>[e].concat(nv(n))),a1=e=>_u(e).fold(Dt([e]),n=>Se(n)==="br"?Fc(n).map(s=>[e].concat(a1(s))).getOr([]):[e].concat(a1(n))),Wy=(e,n)=>Oo(VE(n),bS(n),(s,i)=>{const u=us(nv(e),it(rs,s)),f=us(a1(e),it(rs,i));return u.isSome()&&f.isSome()}).getOr(!1),vS=(e,n,s,i)=>{const u=s,f=new Tr(s,u),x=Is(e.schema.getMoveCaretBeforeOnEnterElements(),(D,F)=>!We(["td","th","table"],F.toLowerCase()));let T=s;do{if(qt(T)&&zt.trim(T.data).length!==0){i?n.setStart(T,0):n.setEnd(T,T.data.length);return}if(x[T.nodeName]){i?n.setStartBefore(T):T.nodeName==="BR"?n.setEndBefore(T):n.setEndAfter(T);return}}while(T=i?f.next():f.prev());u.nodeName==="BODY"&&(i?n.setStart(u,0):n.setEnd(u,u.childNodes.length))},i1=e=>{const n=e.selection.getSel();return ut(n)&&n.rangeCount>0},_p=(e,n)=>{const s=Ep(e);s.length>0?De(s,i=>{const u=i.dom,f=e.dom.createRng();f.setStartBefore(u),f.setEndAfter(u),n(f,!0)}):n(e.selection.getRng(),!1)},xS=(e,n,s)=>{const i=ey(e,n);s(i),e.moveToBookmark(i)},pm=e=>Qo(e==null?void 0:e.nodeType),Gs=e=>An(e)&&!jc(e)&&!fu(e)&&!Id(e),bg=(e,n)=>{if(Gs(n)&&!/^(TD|TH)$/.test(n.nodeName)){const s=e.getAttrib(n,"data-mce-selected"),i=parseInt(s,10);return!isNaN(i)&&i>0}else return!1},ff=(e,n,s)=>{const{selection:i,dom:u}=e,f=i.getNode(),x=ar(f);xS(i,!0,()=>{n()}),x&&ar(f)&&u.isChildOf(f,e.getBody())?e.selection.select(f):s(i.getStart())&&l1(u,i)},l1=(e,n)=>{var s,i;const u=n.getRng(),{startContainer:f,startOffset:x}=u,T=n.getNode();if(!bg(e,T)&&An(f)){const D=f.childNodes,F=e.getRoot();let G;if(x<D.length){const J=D[x];G=new Tr(J,(s=e.getParent(J,e.isBlock))!==null&&s!==void 0?s:F)}else{const J=D[D.length-1];G=new Tr(J,(i=e.getParent(J,e.isBlock))!==null&&i!==void 0?i:F),G.next(!0)}for(let J=G.current();J;J=G.next()){if(e.getContentEditable(J)==="false")return;if(qt(J)&&!sv(J)){u.setStart(J,0),n.setRng(u);return}}}},Uy=(e,n,s)=>{if(e){const i=n?"nextSibling":"previousSibling";for(e=e[i];e;e=e[i])if(An(e)||!sv(e))return e}},ov=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Fd(e,n),bm=(e,n,s)=>e.schema.isValidChild(n,s),sv=(e,n=!1)=>{if(ut(e)&&qt(e)){const s=n?e.data.replace(/ /g,""):e.data;return Rc(s)}else return!1},c1=e=>ut(e)&&qt(e)&&e.length===0,yS=(e,n)=>{const s="[data-mce-cef-wrappable]",i=N2(e),u=ls(i)?s:`${s},${i}`;return Ml($e.fromDom(n),u)},WE=(e,n)=>{const s=e.dom;return Gs(n)&&s.getContentEditable(n)==="false"&&yS(e,n)&&s.select('[contenteditable="true"]',n).length===0},vm=(e,n)=>Be(e)?e(n):(ut(n)&&(e=e.replace(/%(\w+)/g,(s,i)=>n[i]||s)),e),u1=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),mf=(e,n)=>{if(no(e))return null;{let s=String(e);return(n==="color"||n==="backgroundColor")&&(s=Cb(s)),n==="fontWeight"&&e===700&&(s="bold"),n==="fontFamily"&&(s=s.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),s}},Xy=(e,n,s)=>{const i=e.getStyle(n,s);return mf(i,s)},Yy=(e,n)=>{let s;return e.getParent(n,i=>An(i)?(s=e.getStyle(i,"text-decoration"),!!s&&s!=="none"):!1),s},xm=(e,n,s)=>e.getParents(n,s,e.getRoot()),jy=(e,n,s)=>{const i=e.formatter.get(n);return ut(i)&&Ie(i,s)},wS=(e,n)=>jy(e,n,i=>{const u=f=>Be(f)||f.length>1&&f.charAt(0)==="%";return Ie(["styles","attributes"],f=>Ts(i,f).exists(x=>{const T=jt(x)?x:Dr(x);return Ie(T,u)}))}),CS=(e,n,s)=>{const i=["inline","block","selector","attributes","styles","classes"],u=f=>Is(f,(x,T)=>Ie(i,D=>D===T));return jy(e,n,f=>{const x=u(f);return jy(e,s,T=>{const D=u(T);return Ta(x,D)})})},Ph=e=>hr(e,"block"),SS=e=>Ph(e)&&e.wrapper===!0,d1=e=>Ph(e)&&e.wrapper!==!0,Hu=e=>hr(e,"selector"),dl=e=>hr(e,"inline"),UE=e=>Hu(e)&&dl(e)&&or(Ts(e,"mixed"),!0),Zd=e=>Hu(e)&&e.expand!==!1&&!dl(e),XE=e=>{const n=[];let s=e;for(;s;){if(qt(s)&&s.data!==Qi||s.childNodes.length>1)return[];An(s)&&n.push(s),s=s.firstChild}return n},kS=e=>XE(e).length>0,rv=e=>fu(e.dom)&&kS(e.dom),Op=jc,AS=xm,TS=sv,B4=ov,H4=e=>rr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,ES=(e,n)=>{let s=n;for(;s;){if(An(s)&&e.getContentEditable(s))return e.getContentEditable(s)==="false"?s:n;s=s.parentNode}return n},En=(e,n,s,i)=>{const u=n.data;if(e){for(let f=s;f>0;f--)if(i(u.charAt(f-1)))return f}else for(let f=s;f<u.length;f++)if(i(u.charAt(f)))return f;return-1},hl=(e,n,s)=>En(e,n,s,i=>gf(i)||fm(i)),h1=(e,n,s)=>En(e,n,s,s1),gl=(e,n,s,i,u,f)=>{let x;const T=e.getParent(s,e.isBlock)||n,D=(G,J,ee)=>{const fe=jf(e),ke=u?fe.backwards:fe.forwards;return te.from(ke(G,J,(be,Ee)=>Op(be.parentNode)?-1:(x=be,ee(u,be,Ee)),T))};return D(s,i,hl).bind(G=>f?D(G.container,G.offset+(u?-1:0),h1):te.some(G)).orThunk(()=>x?te.some({container:x,offset:u?0:x.length}):te.none())},$u=(e,n,s,i,u)=>{const f=i[u];qt(i)&&ls(i.data)&&f&&(i=f);const x=AS(e,i);for(let T=0;T<x.length;T++)for(let D=0;D<n.length;D++){const F=n[D];if(!(ut(F.collapsed)&&F.collapsed!==s.collapsed)&&Hu(F)&&e.is(x[T],F.selector))return x[T]}return i},Zy=(e,n,s,i)=>{var u;let f=s;const x=e.getRoot(),T=n[0];if(Ph(T)&&(f=T.wrapper?null:e.getParent(s,T.block,x)),!f){const D=(u=e.getParent(s,"LI,TD,TH,SUMMARY"))!==null&&u!==void 0?u:x;f=e.getParent(qt(s)?s.parentNode:s,F=>F!==x&&B4(e.schema,F),D)}if(f&&Ph(T)&&T.wrapper&&(f=AS(e,f,"ul,ol").reverse()[0]||f),!f)for(f=s;f&&f[i]&&!e.isBlock(f[i])&&(f=f[i],!u1(f,"br")););return f||s},av=(e,n,s,i)=>{const u=s.parentNode;return ut(s[i])?!1:u===n||no(u)||e.isBlock(u)?!0:av(e,n,u,i)},Rp=(e,n,s,i,u)=>{let f=s;const x=u?"previousSibling":"nextSibling",T=e.getRoot();if(qt(s)&&!TS(s)&&(u?i>0:i<s.data.length))return s;for(;f;){if(!n[0].block_expand&&e.isBlock(f))return f;for(let D=f[x];D;D=D[x]){const F=qt(D)&&!av(e,T,D,x);if(!Op(D)&&!H4(D)&&!TS(D,F))return f}if(f===T||f.parentNode===T){s=f;break}f=f.parentNode}return s},_S=e=>Op(e.parentNode)||Op(e),pf=(e,n,s,i=!1)=>{let{startContainer:u,startOffset:f,endContainer:x,endOffset:T}=n;const D=s[0];return An(u)&&u.hasChildNodes()&&(u=hg(u,f),qt(u)&&(f=0)),An(x)&&x.hasChildNodes()&&(x=hg(x,n.collapsed?T:T-1),qt(x)&&(T=x.data.length)),u=ES(e,u),x=ES(e,x),_S(u)&&(u=Op(u)?u:u.parentNode,n.collapsed?u=u.previousSibling||u:u=u.nextSibling||u,qt(u)&&(f=n.collapsed?u.length:0)),_S(x)&&(x=Op(x)?x:x.parentNode,n.collapsed?x=x.nextSibling||x:x=x.previousSibling||x,qt(x)&&(T=n.collapsed?0:x.length)),n.collapsed&&(gl(e,e.getRoot(),u,f,!0,i).each(({container:J,offset:ee})=>{u=J,f=ee}),gl(e,e.getRoot(),x,T,!1,i).each(({container:J,offset:ee})=>{x=J,T=ee})),(dl(D)||D.block_expand)&&((!dl(D)||!qt(u)||f===0)&&(u=Rp(e,s,u,f,!0)),(!dl(D)||!qt(x)||T===x.data.length)&&(x=Rp(e,s,x,T,!1))),Zd(D)&&(u=$u(e,s,n,u,"previousSibling"),x=$u(e,s,n,x,"nextSibling")),(Ph(D)||Hu(D))&&(u=Zy(e,s,u,"previousSibling"),x=Zy(e,s,x,"nextSibling"),Ph(D)&&(e.isBlock(u)||(u=Rp(e,s,u,f,!0),qt(u)&&(f=0)),e.isBlock(x)||(x=Rp(e,s,x,T,!1),qt(x)&&(T=x.data.length)))),An(u)&&u.parentNode&&(f=e.nodeIndex(u),u=u.parentNode),An(x)&&x.parentNode&&(T=e.nodeIndex(x)+1,x=x.parentNode),{startContainer:u,startOffset:f,endContainer:x,endOffset:T}},Dp=(e,n,s)=>{var i;const u=n.startOffset,f=hg(n.startContainer,u),x=n.endOffset,T=hg(n.endContainer,x-1),D=Ee=>{const Ye=Ee[0];qt(Ye)&&Ye===f&&u>=Ye.data.length&&Ee.splice(0,1);const qe=Ee[Ee.length-1];return x===0&&Ee.length>0&&qe===T&&qt(qe)&&Ee.splice(Ee.length-1,1),Ee},F=(Ee,Ye,qe)=>{const tt=[];for(;Ee&&Ee!==qe;Ee=Ee[Ye])tt.push(Ee);return tt},G=(Ee,Ye)=>e.getParent(Ee,qe=>qe.parentNode===Ye,Ye),J=(Ee,Ye,qe)=>{const tt=qe?"nextSibling":"previousSibling";for(let lt=Ee,$t=lt.parentNode;lt&&lt!==Ye;lt=$t){$t=lt.parentNode;const nn=F(lt===Ee?lt:lt[tt],tt);nn.length&&(qe||nn.reverse(),s(D(nn)))}};if(f===T)return s(D([f]));const ee=(i=e.findCommonAncestor(f,T))!==null&&i!==void 0?i:e.getRoot();if(e.isChildOf(f,T))return J(f,ee,!0);if(e.isChildOf(T,f))return J(T,ee);const fe=G(f,ee)||f,ke=G(T,ee)||T;J(f,fe,!0);const be=F(fe===f?fe:fe.nextSibling,"nextSibling",ke===T?ke.nextSibling:ke);be.length&&s(D(be)),J(T,ke)},YE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],jE=e=>fr(e)&&ip(e)===Qi,ZE=(e,n,s,i)=>Za(n).fold(()=>"skipping",u=>i==="br"||jE(n)?"valid":C0(n)?"existing":fu(n.dom)?"caret":Ie(YE,f=>Ml(n,f))?"valid-block":!bm(e,s,i)||!bm(e,Se(u),s)?"invalid-child":"valid"),OS=(e,n)=>{const s=pf(e.dom,n,[{inline:"span"}]);n.setStart(s.startContainer,s.startOffset),n.setEnd(s.endContainer,s.endOffset),e.selection.setRng(n)},ym=(e,n,s,i,u,f)=>{const{uid:x=n,...T}=s;oc(e,np()),fa(e,`${Th()}`,x),fa(e,`${Zg()}`,i);const{attributes:D={},classes:F=[]}=u(x,T);if(Mr(e,D),D4(e,F),f){F.length>0&&fa(e,`${Gg()}`,F.join(","));const G=uo(D);G.length>0&&fa(e,`${lg()}`,G.join(","))}},Mp=e=>{Tu(e,np()),er(e,`${Th()}`),er(e,`${Zg()}`),er(e,`${op()}`);const n=Fr(e,`${lg()}`).map(i=>i.split(",")).getOr([]),s=Fr(e,`${Gg()}`).map(i=>i.split(",")).getOr([]);De(n,i=>er(e,i)),M4(e,s),er(e,`${Gg()}`),er(e,`${lg()}`)},wm=(e,n,s,i,u)=>{const f=$e.fromTag("span",e);return ym(f,n,s,i,u,!1),f},g1=(e,n,s,i,u,f)=>{const x=[],T=wm(e.getDoc(),s,f,i,u),D=Ji(),F=()=>{D.clear()},G=()=>D.get().getOrThunk(()=>{const ke=hd(T);return x.push(ke),D.set(ke),ke}),J=ke=>{De(ke,ee)},ee=ke=>{switch(ZE(e,ke,"span",Se(ke))){case"invalid-child":{F();const Ee=li(ke);J(Ee),F();break}case"valid-block":{F(),ym(ke,s,f,i,u,!0);break}case"valid":{const Ee=G();O(ke,Ee);break}}},fe=ke=>{const be=Ze(ke,$e.fromDom);J(be)};return Dp(e.dom,n,ke=>{F(),fe(ke)}),x},mu=(e,n,s,i)=>{e.undoManager.transact(()=>{const u=e.selection,f=u.getRng(),x=Ep(e).length>0,T=rp("mce-annotation");if(f.collapsed&&!x&&OS(e,f),u.getRng().collapsed&&!x){const D=wm(e.getDoc(),T,i,n,s.decorate);Oe(D,za),u.getRng().insertNode(D.dom),u.select(D.dom)}else xS(u,!1,()=>{_p(e,D=>{g1(e,D,T,n,s.decorate,i)})})})},Gd=e=>{const n=S0();YT(e,n);const s=YC(e,n),i=$a("span"),u=f=>{De(f,x=>{i(x)?ne(x):Mp(x)})};return{register:(f,x)=>{n.register(f,x)},annotate:(f,x)=>{n.lookup(f).each(T=>{mu(e,f,T,x)})},annotationChanged:(f,x)=>{s.addListener(f,x)},remove:f=>{kb(e,te.some(f)).each(({elements:x})=>{const T=e.selection.getBookmark();u(x),e.selection.moveToBookmark(T)})},removeAll:f=>{const x=e.selection.getBookmark();Yt(sp(e,f),(T,D)=>{u(T)}),e.selection.moveToBookmark(x)},getAll:f=>{const x=sp(e,f);return os(x,T=>Ze(T,D=>D.dom))}}},Cm=e=>({getBookmark:it(pg,e),moveToBookmark:it(fS,e)});Cm.isBookmarkNode=jc;const Pp=(e,n,s)=>s.collapsed?!1:Ie(s.getClientRects(),i=>JT(i,e,n)),f1=(e,n)=>e.dispatch("PreProcess",n),m1=(e,n)=>e.dispatch("PostProcess",n),GE=e=>{e.dispatch("remove")},qE=e=>{e.dispatch("detach")},KE=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},JE=(e,n,s,i,u)=>{e.dispatch("ObjectResizeStart",{target:n,width:s,height:i,origin:u})},RS=(e,n,s,i,u)=>{e.dispatch("ObjectResized",{target:n,width:s,height:i,origin:u})},DS=e=>{e.dispatch("PreInit")},Gy=e=>{e.dispatch("PostRender")},p1=e=>{e.dispatch("Init")},Zl=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},zu=(e,n,s)=>{e.dispatch(n,s)},pu=(e,n,s,i)=>{e.dispatch("FormatApply",{format:n,node:s,vars:i})},iv=(e,n,s,i)=>{e.dispatch("FormatRemove",{format:n,node:s,vars:i})},qy=(e,n)=>e.dispatch("BeforeSetContent",n),MS=(e,n)=>e.dispatch("SetContent",n),b1=(e,n)=>e.dispatch("BeforeGetContent",n),QE=(e,n)=>e.dispatch("GetContent",n),v1=(e,n)=>{e.dispatch("AutocompleterStart",n)},e_=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},x1=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},t_=e=>{e.dispatch("AutocompleterEnd")},n_=(e,n,s)=>e.dispatch("PastePreProcess",{content:n,internal:s}),PS=(e,n,s)=>e.dispatch("PastePostProcess",{node:n,internal:s}),y1=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Ur=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),_n={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||_n.metaKeyPressed(e),metaKeyPressed:e=>In.os.isMacOS()||In.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},qd="data-mce-selected",LS="table,img,figure.image,hr,video,span.mce-preview-object,details",Ky=Math.abs,Lp=Math.round,w1={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},lv=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Jy=(e,n)=>{const s=n.dom,i=n.getDoc(),u=document,f=n.getBody();let x,T,D,F,G,J,ee,fe,ke,be,Ee,Ye,qe,tt,lt,$t,nn;const On=yn=>ut(yn)&&(Mf(yn)||s.is(yn,"figure.image")),_t=yn=>Cl(yn)||s.hasClass(yn,"mce-preview-object"),vt=(yn,ks)=>{if(lv(yn)){const Os=yn.touches[0];return On(yn.target)&&!Pp(Os.clientX,Os.clientY,ks)}else return On(yn.target)&&!Pp(yn.clientX,yn.clientY,ks)},Ut=yn=>{const ks=yn.target;vt(yn,n.selection.getRng())&&!yn.isDefaultPrevented()&&n.selection.select(ks)},Dn=yn=>s.hasClass(yn,"mce-preview-object")&&ut(yn.firstElementChild)?[yn,yn.firstElementChild]:s.is(yn,"figure.image")?[yn.querySelector("img")]:[yn],ho=yn=>{const ks=pp(n);return!ks||n.mode.isReadOnly()||yn.getAttribute("data-mce-resize")==="false"||yn===n.getBody()?!1:s.hasClass(yn,"mce-preview-object")&&ut(yn.firstElementChild)?Ml($e.fromDom(yn.firstElementChild),ks):Ml($e.fromDom(yn),ks)},Cs=(yn,ks)=>{if(_t(ks))return yn.create("img",{src:In.transparentSrc});if(Ou(ks)){const Ui=co(F.name,"n")?qn:Ns,Yr=ks.cloneNode(!0);return Ui(yn.select("tr",Yr)).each(Jl=>{const wu=yn.select("td,th",Jl);yn.setStyle(Jl,"height",null),De(wu,Mg=>yn.setStyle(Mg,"height",null))}),Yr}else return ks.cloneNode(!0)},Ss=(yn,ks,Os)=>{if(ut(Os)){const Ui=Dn(yn);De(Ui,Yr=>{Yr.style[ks]||!n.schema.isValid(Yr.nodeName.toLowerCase(),ks)?s.setStyle(Yr,ks,Os):s.setAttrib(Yr,ks,""+Os)})}},xr=(yn,ks,Os)=>{Ss(yn,"width",ks),Ss(yn,"height",Os)},Pr=yn=>{let ks,Os,Ui,Yr,Jl;ks=yn.screenX-J,Os=yn.screenY-ee,tt=ks*F[2]+be,lt=Os*F[3]+Ee,tt=tt<5?5:tt,lt=lt<5?5:lt,(On(x)||_t(x))&&am(n)!==!1?Ui=!_n.modifierPressed(yn):Ui=_n.modifierPressed(yn),Ui&&(Ky(ks)>Ky(Os)?(lt=Lp(tt*Ye),tt=Lp(lt/Ye)):(tt=Lp(lt/Ye),lt=Lp(tt*Ye))),xr(T,tt,lt),Yr=F.startPos.x+ks,Jl=F.startPos.y+Os,Yr=Yr>0?Yr:0,Jl=Jl>0?Jl:0,s.setStyles(D,{left:Yr,top:Jl,display:"block"}),D.innerHTML=tt+" &times; "+lt,F[2]<0&&T.clientWidth<=tt&&s.setStyle(T,"left",fe+(be-tt)),F[3]<0&&T.clientHeight<=lt&&s.setStyle(T,"top",ke+(Ee-lt)),ks=f.scrollWidth-$t,Os=f.scrollHeight-nn,ks+Os!==0&&s.setStyles(D,{left:Yr-ks,top:Jl-Os}),qe||(JE(n,x,be,Ee,"corner-"+F.name),qe=!0)},di=()=>{const yn=qe;qe=!1,yn&&(Ss(x,"width",tt),Ss(x,"height",lt)),s.unbind(i,"mousemove",Pr),s.unbind(i,"mouseup",di),u!==i&&(s.unbind(u,"mousemove",Pr),s.unbind(u,"mouseup",di)),s.remove(T),s.remove(D),s.remove(G),Kl(x),yn&&(RS(n,x,tt,lt,"corner-"+F.name),s.setAttrib(x,"style",s.getAttrib(x,"style"))),n.nodeChanged()},Kl=yn=>{Tn();const ks=s.getPos(yn,f),Os=ks.x,Ui=ks.y,Yr=yn.getBoundingClientRect(),Jl=Yr.width||Yr.right-Yr.left,wu=Yr.height||Yr.bottom-Yr.top;x!==yn&&(fn(),x=yn,tt=lt=0);const Mg=n.dispatch("ObjectSelected",{target:yn});ho(yn)&&!Mg.isDefaultPrevented()?Yt(w1,(Tc,Ed)=>{const dh=Cu=>{const ao=Dn(x)[0];J=Cu.screenX,ee=Cu.screenY,be=ao.clientWidth,Ee=ao.clientHeight,Ye=Ee/be,F=Tc,F.name=Ed,F.startPos={x:Jl*Tc[0]+Os,y:wu*Tc[1]+Ui},$t=f.scrollWidth,nn=f.scrollHeight,G=s.add(f,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(G,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),T=Cs(s,x),s.addClass(T,"mce-clonedresizable"),s.setAttrib(T,"data-mce-bogus","all"),T.contentEditable="false",s.setStyles(T,{left:Os,top:Ui,margin:0}),xr(T,Jl,wu),T.removeAttribute(qd),f.appendChild(T),s.bind(i,"mousemove",Pr),s.bind(i,"mouseup",di),u!==i&&(s.bind(u,"mousemove",Pr),s.bind(u,"mouseup",di)),D=s.add(f,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},be+" &times; "+Ee)};let dc=s.get("mceResizeHandle"+Ed);dc&&s.remove(dc),dc=s.add(f,"div",{id:"mceResizeHandle"+Ed,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ed+"-resize; margin:0; padding:0"}),s.bind(dc,"mousedown",Cu=>{Cu.stopImmediatePropagation(),Cu.preventDefault(),dh(Cu)}),Tc.elm=dc,s.setStyles(dc,{left:Jl*Tc[0]+Os-dc.offsetWidth/2,top:wu*Tc[1]+Ui-dc.offsetHeight/2})}):fn(!1)},xi=tp(Kl,0),fn=(yn=!0)=>{xi.cancel(),Tn(),x&&yn&&x.removeAttribute(qd),Yt(w1,(ks,Os)=>{const Ui=s.get("mceResizeHandle"+Os);Ui&&(s.unbind(Ui),s.remove(Ui))})},io=(yn,ks)=>s.isChildOf(yn,ks),ir=yn=>{if(qe||n.removed||n.composing)return;const ks=yn.type==="mousedown"?yn.target:e.getNode(),Os=Oc($e.fromDom(ks),LS).map(Yr=>Yr.dom).filter(Yr=>s.isEditable(Yr.parentElement)||Yr.nodeName==="IMG"&&s.isEditable(Yr)).getOrUndefined(),Ui=ut(Os)?s.getAttrib(Os,qd,"1"):"1";if(De(s.select(`img[${qd}],hr[${qd}]`),Yr=>{Yr.removeAttribute(qd)}),ut(Os)&&io(Os,f)&&n.hasFocus()){So();const Yr=e.getStart(!0);if(io(Yr,Os)&&io(e.getEnd(!0),Os)){s.setAttrib(Os,qd,Ui),xi.throttle(Os);return}}fn()},Tn=()=>{Yt(w1,yn=>{yn.elm&&(s.unbind(yn.elm),delete yn.elm)})},So=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{So(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ir),n.on("keyup compositionend",yn=>{x&&x.nodeName==="TABLE"&&ir(yn)}),n.on("hide blur",fn),n.on("contextmenu longpress",Ut,!0)}),n.on("remove",Tn),{isResizable:ho,showResizeRect:Kl,hideResizeRect:fn,updateResizeRect:ir,destroy:()=>{xi.cancel(),x=T=G=null}}},NS=(e,n)=>{n.fold(s=>{e.setStartBefore(s.dom)},(s,i)=>{e.setStart(s.dom,i)},s=>{e.setStartAfter(s.dom)})},Qy=(e,n)=>{n.fold(s=>{e.setEndBefore(s.dom)},(s,i)=>{e.setEnd(s.dom,i)},s=>{e.setEndAfter(s.dom)})},IS=(e,n,s)=>{const i=e.document.createRange();return NS(i,n),Qy(i,s),i},cv=(e,n,s,i,u)=>{const f=e.document.createRange();return f.setStart(n.dom,s),f.setEnd(i.dom,u),f},Sm=Iu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),C1=(e,n,s)=>n($e.fromDom(s.startContainer),s.startOffset,$e.fromDom(s.endContainer),s.endOffset),o_=(e,n)=>n.match({domRange:s=>({ltr:Dt(s),rtl:te.none}),relative:(s,i)=>({ltr:ft(()=>IS(e,s,i)),rtl:ft(()=>te.some(IS(e,i,s)))}),exact:(s,i,u,f)=>({ltr:ft(()=>cv(e,s,i,u,f)),rtl:ft(()=>te.some(cv(e,u,f,s,i)))})}),s_=(e,n)=>{const s=n.ltr();return s.collapsed?n.rtl().filter(u=>u.collapsed===!1).map(u=>Sm.rtl($e.fromDom(u.endContainer),u.endOffset,$e.fromDom(u.startContainer),u.startOffset)).getOrThunk(()=>C1(e,Sm.ltr,s)):C1(e,Sm.ltr,s)},r_=(e,n)=>{const s=o_(e,n);return s_(e,s)};Sm.ltr,Sm.rtl;const Hl={create:(e,n,s,i)=>({start:e,soffset:n,finish:s,foffset:i})},Np=(e,n,s)=>{var i;return te.from((i=e.caretPositionFromPoint)===null||i===void 0?void 0:i.call(e,n,s)).bind(u=>{if(u.offsetNode===null)return te.none();const f=e.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),te.some(f)})},$4=(e,n,s)=>{var i;return te.from((i=e.caretRangeFromPoint)===null||i===void 0?void 0:i.call(e,n,s))},a_=(e,n,s)=>e.caretPositionFromPoint?Np(e,n,s):e.caretRangeFromPoint?$4(e,n,s):te.none(),i_=(e,n,s)=>{const i=e.document;return a_(i,n,s).map(u=>Hl.create($e.fromDom(u.startContainer),u.startOffset,$e.fromDom(u.endContainer),u.endOffset))},Bs=Iu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),l_=(e,n,s,i)=>e.fold(n,s,i),c_=e=>e.fold(Ao,Ao,Ao),ew=Bs.before,z4=Bs.on,V4=Bs.after,bf={before:ew,on:z4,after:V4,cata:l_,getStart:c_},uv=Iu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),u_=e=>uv.exact(e.start,e.soffset,e.finish,e.foffset),d_=e=>e.match({domRange:n=>$e.fromDom(n.startContainer),relative:(n,s)=>bf.getStart(n),exact:(n,s,i,u)=>n}),tw=uv.domRange,S1=uv.relative,k1=uv.exact,W4=e=>{const n=d_(e);return Ju(n)},h_=Hl.create,dv={domRange:tw,relative:S1,exact:k1,exactFromRange:u_,getWin:W4,range:h_},nw=(e,n)=>{const s=Se(e);return s==="input"?bf.after(e):We(["br","img"],s)?n===0?bf.before(e):bf.after(e):bf.on(e,n)},g_=(e,n)=>{const s=e.fold(bf.before,nw,bf.after),i=n.fold(bf.before,nw,bf.after);return dv.relative(s,i)},FS=(e,n,s,i)=>{const u=nw(e,n),f=nw(s,i);return dv.relative(u,f)},Do=e=>e.match({domRange:n=>{const s=$e.fromDom(n.startContainer),i=$e.fromDom(n.endContainer);return FS(s,n.startOffset,i,n.endOffset)},relative:g_,exact:FS}),A1=(e,n)=>{const i=document.createDocumentFragment();return De(e,u=>{i.appendChild(u.dom)}),$e.fromDom(i)},g=e=>{const n=dv.getWin(e).dom,s=(u,f,x,T)=>cv(n,u,f,x,T),i=Do(e);return r_(n,i).match({ltr:s,rtl:s})},v=(e,n,s)=>i_(e,n,s),k=(e,n,s)=>{const i=Ju($e.fromDom(s));return v(i.dom,e,n).map(u=>{const f=s.createRange();return f.setStart(u.start.dom,u.soffset),f.setEnd(u.finish.dom,u.foffset),f}).getOrUndefined()},_=(e,n)=>ut(e)&&ut(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,B=(e,n,s)=>{let i=e;for(;i&&i!==n;){if(s(i))return i;i=i.parentNode}return null},Z=(e,n,s)=>B(e,n,s)!==null,se=(e,n,s)=>Z(e,n,i=>i.nodeName===s),ge=(e,n)=>Lu(e)&&!Z(e,n,fu),Ae=(e,n,s)=>{const i=n.parentNode;if(i){const u=new Tr(n,e.getParent(i,e.isBlock)||e.getRoot());let f;for(;f=u[s?"prev":"next"]();)if(rr(f))return!0}return!1},Ue=(e,n)=>{var s;return((s=e.previousSibling)===null||s===void 0?void 0:s.nodeName)===n},ct=(e,n)=>{let s=n;for(;s&&s!==e;){if(ar(s))return!0;s=s.parentNode}return!1},Kt=(e,n,s,i,u)=>{const f=e.getRoot(),x=e.schema.getNonEmptyElements(),T=u.parentNode;let D,F;if(!T)return te.none();const G=e.getParent(T,e.isBlock)||f;if(i&&rr(u)&&n&&e.isEmpty(G))return te.some(At(T,e.nodeIndex(u)));const J=new Tr(u,G);for(;F=J[i?"prev":"next"]();){if(e.getContentEditableParent(F)==="false"||ge(F,f))return te.none();if(qt(F)&&F.data.length>0)return se(F,f,"A")?te.none():te.some(At(F,i?F.data.length:0));if(e.isBlock(F)||x[F.nodeName.toLowerCase()])return te.none();D=F}return Ga(D)?te.none():s&&D?te.some(At(D,0)):te.none()},Sn=(e,n,s,i)=>{const u=e.getRoot();let f,x=!1,T=s?i.startContainer:i.endContainer,D=s?i.startOffset:i.endOffset;const F=An(T)&&D===T.childNodes.length,G=e.schema.getNonEmptyElements();let J=s;if(Lu(T))return te.none();if(An(T)&&D>T.childNodes.length-1&&(J=!1),Hg(T)&&(T=u,D=0),T===u){if(J&&(f=T.childNodes[D>0?D-1:0],f&&(Lu(f)||G[f.nodeName]||Ou(f))))return te.none();if(T.hasChildNodes()){if(D=Math.min(!J&&D>0?D-1:D,T.childNodes.length-1),T=T.childNodes[D],D=qt(T)&&F?T.data.length:0,!n&&T===u.lastChild&&Ou(T)||ct(u,T)||Lu(T)||pb(T))return te.none();if(T.hasChildNodes()&&!Ou(T)){f=T;const ee=new Tr(T,u);do{if(ar(f)||Lu(f)){x=!1;break}if(qt(f)&&f.data.length>0){D=J?0:f.data.length,T=f,x=!0;break}if(G[f.nodeName.toLowerCase()]&&!ki(f)){D=e.nodeIndex(f),T=f.parentNode,J||D++,x=!0;break}}while(f=J?ee.next():ee.prev())}}}return n&&(qt(T)&&D===0&&Kt(e,F,n,!0,T).each(ee=>{T=ee.container(),D=ee.offset(),x=!0}),An(T)&&(f=T.childNodes[D],f||(f=T.childNodes[D-1]),f&&rr(f)&&!Ue(f,"A")&&!Ae(e,f,!1)&&!Ae(e,f,!0)&&Kt(e,F,n,!0,f).each(ee=>{T=ee.container(),D=ee.offset(),x=!0}))),J&&!n&&qt(T)&&D===T.data.length&&Kt(e,F,n,!1,T).each(ee=>{T=ee.container(),D=ee.offset(),x=!0}),x&&T?te.some(At(T,D)):te.none()},pn=(e,n)=>{const s=n.collapsed,i=n.cloneRange(),u=At.fromRangeStart(n);return Sn(e,s,!0,i).each(f=>{(!s||!At.isAbove(u,f))&&i.setStart(f.container(),f.offset())}),s||Sn(e,s,!1,i).each(f=>{i.setEnd(f.container(),f.offset())}),s&&i.collapse(!0),_(n,i)?te.none():te.some(i)},ln=(e,n)=>e.splitText(n),jn=e=>{let n=e.startContainer,s=e.startOffset,i=e.endContainer,u=e.endOffset;if(n===i&&qt(n)){if(s>0&&s<n.data.length)if(i=ln(n,s),n=i.previousSibling,u>s){u=u-s;const f=ln(i,u).previousSibling;n=i=f,u=f.data.length,s=0}else u=0}else if(qt(n)&&s>0&&s<n.data.length&&(n=ln(n,s),s=0),qt(i)&&u>0&&u<i.data.length){const f=ln(i,u).previousSibling;i=f,u=f.data.length}return{startContainer:n,startOffset:s,endContainer:i,endOffset:u}},Xt=e=>({walk:(f,x)=>Dp(e,f,x),split:jn,expand:(f,x={type:"word"})=>{if(x.type==="word"){const T=pf(e,f,[{inline:"span"}]),D=e.createRng();return D.setStart(T.startContainer,T.startOffset),D.setEnd(T.endContainer,T.endOffset),D}return f},normalize:f=>pn(e,f).fold(dt,x=>(f.setStart(x.startContainer,x.startOffset),f.setEnd(x.endContainer,x.endOffset),!0))});Xt.compareRanges=_,Xt.getCaretRangeFromPoint=k,Xt.getSelectedNode=Rb,Xt.getNode=hg;const dn=((e,n)=>{const s=(T,D)=>{if(!Qo(D)&&!D.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+D);const F=T.dom;Hc(F)&&(F.style[e]=D+"px")},i=T=>{const D=n(T);if(D<=0||D===null){const F=o(T,e);return parseFloat(F)||0}return D},u=i,f=(T,D)=>Vo(D,(F,G)=>{const J=o(T,G),ee=J===void 0?0:parseInt(J,10);return isNaN(ee)?F:F+ee},0);return{set:s,get:i,getOuter:u,aggregate:f,max:(T,D,F)=>{const G=f(T,F);return D>G?D-G:0}}})("height",e=>{const n=e.dom;return ru(e)?n.getBoundingClientRect().height:n.offsetHeight}),Ho=e=>dn.get(e),Hs=()=>$e.fromDom(document),Or=(e,n)=>e.view(n).fold(Dt([]),i=>{const u=e.owner(i),f=Or(e,u);return[i].concat(f)}),ia=(e,n)=>{const s=n.owner(e);return Or(n,s)};var Kd=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?te.none():te.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map($e.fromDom)},owner:e=>Ic(e)});const km=e=>{const n=Hs(),s=hn(n),i=ia(e,Kd),u=an(e),f=Qs(i,(x,T)=>{const D=an(T);return{left:x.left+D.left,top:x.top+D.top}},{left:0,top:0});return ue(f.left+u.left+s.left,f.top+u.top+s.top)},Lh=e=>Se(e)==="textarea",Xr=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Cc=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Sc=(e,n)=>{const s=li(e);if(s.length===0||Lh(e))return{element:e,offset:n};if(n<s.length&&!Lh(s[n]))return{element:s[n],offset:0};{const i=s[s.length-1];return Lh(i)?{element:e,offset:n}:Se(i)==="img"?{element:i,offset:1}:fr(i)?{element:i,offset:ip(i).length}:{element:i,offset:li(i).length}}},Vu=(e,n)=>{const s=Ft(e),i=Ho(e);return{element:e,bottom:s.top+i,height:i,pos:s,cleanup:n}},as=(e,n)=>{const s=Sc(e,n),i=$e.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Qi+"</span>");return w(s.element,i),Vu(i,()=>U(i))},Pc=e=>Vu($e.fromDom(e),ot),Wi=(e,n,s,i)=>{Gl(e,(u,f)=>vg(e,n,s,i),s)},T1=(e,n,s,i,u)=>{const f={elm:i.element.dom,alignToTop:u};if(Xr(e,f))return;const x=hn(n).top;s(e,n,x,i,u),Cc(e,f)},vg=(e,n,s,i)=>{const u=$e.fromDom(e.getBody()),f=$e.fromDom(e.getDoc());b(u);const x=as($e.fromDom(s.startContainer),s.startOffset);T1(e,f,n,x,i),x.cleanup()},vs=(e,n,s,i)=>{const u=$e.fromDom(e.getDoc());T1(e,u,s,Pc(n),i)},Gl=(e,n,s)=>{const i=s.startContainer,u=s.startOffset,f=s.endContainer,x=s.endOffset;n($e.fromDom(i),$e.fromDom(f));const T=e.dom.createRng();T.setStart(i,u),T.setEnd(f,x),e.selection.setRng(s)},E1=(e,n,s,i,u)=>{const f=n.pos;if(i)Jt(f.left,f.top,u);else{const x=f.top-s+n.height;Jt(-e.getBody().getBoundingClientRect().left,x,u)}},_1=(e,n,s,i,u,f)=>{const x=i+s,T=u.pos.top,D=u.bottom,F=D-T>=i;T<s?E1(e,u,i,f!==!1,n):T>x?E1(e,u,i,F?f!==!1:f===!0,n):D>x&&!F&&E1(e,u,i,f===!0,n)},BS=(e,n,s,i,u)=>{const f=Ju(n).dom.innerHeight;_1(e,n,s,f,i,u)},vf=(e,n,s,i,u)=>{const f=Ju(n).dom.innerHeight;_1(e,n,s,f,i,u);const x=km(i.element),T=qr(window);x.top<T.y?wo(i.element,u!==!1):x.top>T.bottom&&wo(i.element,u===!0)},Am=(e,n,s)=>Wi(e,BS,n,s),O1=(e,n,s)=>vs(e,n,BS,s),f_=(e,n,s)=>Wi(e,vf,n,s),hv=(e,n,s)=>vs(e,n,vf,s),SH=(e,n,s)=>{(e.inline?O1:hv)(e,n,s)},Tm=(e,n,s)=>{(e.inline?Am:f_)(e,n,s)},gv=(e,n=!1)=>e.dom.focus({preventScroll:n}),U4=e=>{const n=Vl(e).dom;return e.dom===n.activeElement},HS=(e=Hs())=>te.from(e.dom.activeElement).map($e.fromDom),kH=e=>HS(Vl(e)).filter(n=>e.dom.contains(n.dom)),X4=(e,n)=>{const s=fr(n)?ip(n).length:li(n).length+1;return e>s?s:e<0?0:e},AH=e=>dv.range(e.start,X4(e.soffset,e.start),e.finish,X4(e.foffset,e.finish)),m_=(e,n)=>!ng(n.dom)&&(Li(e,n)||rs(e,n)),TH=e=>n=>m_(e,n.start)&&m_(e,n.finish),EH=e=>e.inline||In.browser.isFirefox(),Y4=e=>dv.range($e.fromDom(e.startContainer),e.startOffset,$e.fromDom(e.endContainer),e.endOffset),p_=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?te.none():te.from(n.getRangeAt(0))).map(Y4)},b_=e=>{const n=Ju(e);return p_(n.dom).filter(TH(e))},v_=(e,n)=>te.from(n).filter(TH(e)).map(AH),j4=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),te.some(n)}catch{return te.none()}},ow=e=>{const n=EH(e)?b_($e.fromDom(e.getBody())):te.none();e.bookmark=n.isSome()?n:e.bookmark},$S=e=>(e.bookmark?e.bookmark:te.none()).bind(s=>v_($e.fromDom(e.getBody()),s)).bind(j4),zS=e=>{$S(e).each(n=>e.selection.setRng(n))},x_={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},_H=(e,n)=>(Qo(n)||(n=0),setTimeout(e,n)),Z4=(e,n)=>(Qo(n)||(n=0),setInterval(e,n)),vd={setEditorTimeout:(e,n,s)=>_H(()=>{e.removed||n()},s),setEditorInterval:(e,n,s)=>{const i=Z4(()=>{e.removed?clearInterval(i):n()},s);return i}},G4=e=>e.type==="nodechange"&&e.selectionChange,q4=(e,n)=>{const s=()=>{n.throttle()};Jr.DOM.bind(document,"mouseup",s),e.on("remove",()=>{Jr.DOM.unbind(document,"mouseup",s)})},K4=(e,n)=>{e.on("mouseup touchend",s=>{n.throttle()})},OH=(e,n)=>{K4(e,n),e.on("keyup NodeChange AfterSetSelectionRange",s=>{G4(s)||ow(e)})},RH=e=>{const n=tp(()=>{ow(e)},0);e.on("init",()=>{e.inline&&q4(e,n),OH(e,n)}),e.on("remove",()=>{n.cancel()})};let R1;const y_=Jr.DOM,DH=e=>An(e)&&x_.isEditorUIElement(e),w_=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},VS=(e,n)=>{const s=zb(e);return y_.getParent(n,u=>DH(u)||(s?e.dom.is(u,s):!1))!==null},C_=e=>{try{const n=Vl($e.fromDom(e.getElement()));return HS(n).fold(()=>document.body,s=>s.dom)}catch{return document.body}},WS=(e,n)=>{const s=n.editor;RH(s);const i=(u,f)=>{if(yy(u)&&u.inline!==!0){const x=$e.fromDom(u.getContainer());f(x,"tox-edit-focus")}};s.on("focusin",()=>{const u=e.focusedEditor;w_(C_(s))&&i(s,oc),u!==s&&(u&&u.dispatch("blur",{focusedEditor:s}),e.setActive(s),e.focusedEditor=s,s.dispatch("focus",{blurredEditor:u}),s.focus(!0))}),s.on("focusout",()=>{vd.setEditorTimeout(s,()=>{const u=e.focusedEditor;(!w_(C_(s))||u!==s)&&i(s,Tu),!VS(s,C_(s))&&u===s&&(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),R1||(R1=u=>{const f=e.activeEditor;f&&Qh(u).each(x=>{const T=x;T.ownerDocument===document&&T!==document.body&&!VS(f,T)&&e.focusedEditor===f&&(f.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},y_.bind(document,"focusin",R1))},J4=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&R1&&(y_.unbind(document,"focusin",R1),R1=null)},MH=e=>{e.on("AddEditor",it(WS,e)),e.on("RemoveEditor",it(J4,e))},Q4=(e,n)=>e.dom.getParent(n,s=>e.dom.getContentEditable(s)==="true"),e3=(e,n)=>e.dom.getParent(n,s=>e.dom.getContentEditable(s)==="false")!==null,PH=e=>e.collapsed?te.from(hg(e.startContainer,e.startOffset)).map($e.fromDom):te.none(),LH=(e,n)=>PH(n).bind(s=>QC(s)?te.some(s):Li(e,s)?te.none():te.some(e)),t3=(e,n)=>{LH($e.fromDom(e.getBody()),n).bind(s=>cc(s.dom)).fold(()=>{e.selection.normalize()},s=>e.selection.setRng(s.toRange()))},US=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},NH=e=>U4(e)||kH(e).isSome(),n3=e=>ut(e.iframeElement)&&U4($e.fromDom(e.iframeElement)),o3=e=>{const n=e.getBody();return n&&NH($e.fromDom(n))},XS=e=>{const n=Vl($e.fromDom(e.getElement()));return HS(n).filter(s=>!w_(s.dom)&&VS(e,s.dom)).isSome()},D1=e=>e.inline?o3(e):n3(e),s3=e=>D1(e)||XS(e),S_=e=>{const n=e.selection,s=e.getBody();let i=n.getRng();e.quirks.refreshContentEditable();const u=x=>{$S(x).each(T=>{x.selection.setRng(T),i=T})};!D1(e)&&e.hasEditableRoot()&&u(e);const f=Q4(e,n.getNode());if(f&&e.dom.isChildOf(f,s)){e3(e,f)||US(s),US(f),e.hasEditableRoot()||u(e),t3(e,i),k_(e);return}e.inline||(In.browser.isOpera()||US(s),e.getWin().focus()),(In.browser.isFirefox()||e.inline)&&(US(s),t3(e,i)),k_(e)},k_=e=>e.editorManager.setActive(e),r3=(e,n)=>{e.removed||(n?k_(e):S_(e))},A_=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),T_=(e,n,s,i,u)=>{const f=s?n.startContainer:n.endContainer,x=s?n.startOffset:n.endOffset;return te.from(f).map($e.fromDom).map(T=>!i||!n.collapsed?wl(T,u(T,x)).getOr(T):T).bind(T=>Jo(T)?te.some(T):Za(T).filter(Jo)).map(T=>T.dom).getOr(e)},a3=(e,n,s=!1)=>T_(e,n,!0,s,(i,u)=>Math.min(nd(i),u)),i3=(e,n,s=!1)=>T_(e,n,!1,s,(i,u)=>u>0?u-1:u),l3=(e,n)=>{const s=e;for(;e&&qt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||s},IH=(e,n)=>{if(!n)return e;let s=n.startContainer,i=n.endContainer;const u=n.startOffset,f=n.endOffset;let x=n.commonAncestorContainer;n.collapsed||(s===i&&f-u<2&&s.hasChildNodes()&&(x=s.childNodes[u]),qt(s)&&qt(i)&&(s.length===u?s=l3(s.nextSibling,!0):s=s.parentNode,f===0?i=l3(i.previousSibling,!1):i=i.parentNode,s&&s===i&&(x=s)));const T=qt(x)?x.parentNode:x;return iu(T)?T:e},YS=(e,n,s,i)=>{const u=[],f=e.getRoot(),x=e.getParent(s||a3(f,n,n.collapsed),e.isBlock),T=e.getParent(i||i3(f,n,n.collapsed),e.isBlock);if(x&&x!==f&&u.push(x),x&&T&&x!==T){let D;const F=new Tr(x,f);for(;(D=F.next())&&D!==T;)e.isBlock(D)&&u.push(D)}return T&&x!==T&&T!==f&&u.push(T),u},c3=(e,n,s)=>te.from(n).bind(i=>te.from(i.parentNode).map(u=>{const f=e.nodeIndex(i),x=e.createRng();return x.setStart(u,f),x.setEnd(u,f+1),s&&(vS(e,x,i,!0),vS(e,x,i,!1)),x})),jS=(e,n)=>Ze(n,s=>{const i=e.dispatch("GetSelectionRange",{range:s});return i.range!==s?i.range:s}),u3={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},sw=(e,n,s)=>{const i=s?"lastChild":"firstChild",u=s?"prev":"next";if(e[i])return e[i];if(e!==n){let f=e[u];if(f)return f;for(let x=e.parent;x&&x!==n;x=x.parent)if(f=x[u],f)return f}},FH=e=>{var n;const s=(n=e.value)!==null&&n!==void 0?n:"";if(!Rc(s))return!1;const i=e.parent;return!(i&&(i.name!=="span"||i.attr("style"))&&/^[ ]+$/.test(s))},d3=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Gc{static create(n,s){const i=new Gc(n,u3[n]||1);return s&&Yt(s,(u,f)=>{i.attr(f,u)}),i}constructor(n,s){this.name=n,this.type=s,s===1&&(this.attributes=[],this.attributes.map={})}replace(n){const s=this;return n.parent&&n.remove(),s.insert(n,s),s.remove(),s}attr(n,s){const i=this;if(!oe(n))return ut(n)&&Yt(n,(f,x)=>{i.attr(x,f)}),i;const u=i.attributes;if(u){if(s!==void 0){if(s===null){if(n in u.map){delete u.map[n];let f=u.length;for(;f--;)if(u[f].name===n)return u.splice(f,1),i}return i}if(n in u.map){let f=u.length;for(;f--;)if(u[f].name===n){u[f].value=s;break}}else u.push({name:n,value:s});return u.map[n]=s,i}return u.map[n]}}clone(){const n=this,s=new Gc(n.name,n.type),i=n.attributes;if(i){const u=[];u.map={};for(let f=0,x=i.length;f<x;f++){const T=i[f];T.name!=="id"&&(u[u.length]={name:T.name,value:T.value},u.map[T.name]=T.value)}s.attributes=u}return s.value=n.value,s}wrap(n){const s=this;return s.parent&&(s.parent.insert(n,s),n.append(s)),s}unwrap(){const n=this;for(let s=n.firstChild;s;){const i=s.next;n.insert(s,n,!0),s=i}n.remove()}remove(){const n=this,s=n.parent,i=n.next,u=n.prev;return s&&(s.firstChild===n?(s.firstChild=i,i&&(i.prev=null)):u&&(u.next=i),s.lastChild===n?(s.lastChild=u,u&&(u.next=null)):i&&(i.prev=u),n.parent=n.next=n.prev=null),n}append(n){const s=this;n.parent&&n.remove();const i=s.lastChild;return i?(i.next=n,n.prev=i,s.lastChild=n):s.lastChild=s.firstChild=n,n.parent=s,n}insert(n,s,i){n.parent&&n.remove();const u=s.parent||this;return i?(s===u.firstChild?u.firstChild=n:s.prev&&(s.prev.next=n),n.prev=s.prev,n.next=s,s.prev=n):(s===u.lastChild?u.lastChild=n:s.next&&(s.next.prev=n),n.next=s.next,n.prev=s,s.next=n),n.parent=u,n}getAll(n){const s=this,i=[];for(let u=s.firstChild;u;u=sw(u,s))u.name===n&&i.push(u);return i}children(){const n=this,s=[];for(let i=n.firstChild;i;i=i.next)s.push(i);return s}empty(){const n=this;if(n.firstChild){const s=[];for(let u=n.firstChild;u;u=sw(u,n))s.push(u);let i=s.length;for(;i--;){const u=s[i];u.parent=u.firstChild=u.lastChild=u.next=u.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,s={},i){var u;const f=this;let x=f.firstChild;if(d3(f))return!1;if(x)do{if(x.type===1){if(x.attr("data-mce-bogus"))continue;if(n[x.name]||d3(x))return!1}if(x.type===8||x.type===3&&!FH(x)||x.type===3&&x.parent&&s[x.parent.name]&&Rc((u=x.value)!==null&&u!==void 0?u:"")||i&&i(x))return!1}while(x=sw(x,f));return!0}walk(n){return sw(this,null,n)}}const BH=zt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),h3=e=>oe(e.nodeValue)&&e.nodeValue.includes(Qi),g3=e=>`${e.length===0?"":`${Ze(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,HH=(e,n)=>n.querySelectorAll(g3(e)),f3=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>h3(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),m3=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(h3(n)){const s=n.parentNode;return s&&Qn(BH,s.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),$H=e=>f3(e).nextNode()!==null,zH=e=>m3(e).nextNode()!==null,VH=(e,n)=>n.querySelector(g3(e))!==null,ZS=(e,n)=>{De(HH(e,n),s=>{const i=$e.fromDom(s);Pa(i,"data-mce-bogus")==="all"?U(i):De(e,u=>{Nr(i,u)&&er(i,u)})})},E_=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},p3=V(E_,f3),WH=V(E_,m3),b3=(e,n)=>{const s=[{condition:it(VH,n),action:it(ZS,n)},{condition:$H,action:p3},{condition:zH,action:WH}];let i=e,u=!1;return De(s,({condition:f,action:x})=>{f(i)&&(u||(i=e.cloneNode(!0),u=!0),x(i))}),i},v3=e=>{const n=Vs(e,"[data-mce-bogus]");De(n,s=>{Pa(s,"data-mce-bogus")==="all"?U(s):cg(s)?(w(s,$e.fromText(pc)),U(s)):ne(s)})},x3=e=>{const n=Vs(e,"input");De(n,s=>{er(s,"name")})},UH=(e,n)=>{const s=Fl(e),i=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${s}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(i,"")},XH=(e,n)=>{const s=e.getDoc(),i=Vl($e.fromDom(e.getBody())),u=$e.fromTag("div",s);fa(u,"data-mce-bogus","all"),C(u,{position:"fixed",left:"-9999999px",top:"0"}),Oe(u,n.innerHTML),v3(u),x3(u);const f=Ig(i);M(f,u);const x=Pu(u.dom.innerText);return U(u),x},y3=(e,n,s)=>{let i;return n.format==="raw"?i=zt.trim(Pu(b3(s,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?i=XH(e,s):n.format==="tree"?i=e.serializer.serialize(s,n):i=UH(e,e.serializer.serialize(s,n)),n.format!=="text"&&!k0($e.fromDom(s))&&oe(i)?zt.trim(i):i},YH=(e,n)=>te.from(e.getBody()).fold(Dt(n.format==="tree"?new Gc("body",11):""),s=>y3(e,n,s)),__=zt.makeMap,O_=e=>{const n=[];e=e||{};const s=e.indent,i=__(e.indent_before||""),u=__(e.indent_after||""),f=Wg.getEncodeFunc(e.entity_encoding||"raw",e.entities),x=e.element_format!=="xhtml";return{start:(T,D,F)=>{if(s&&i[T]&&n.length>0){const G=n[n.length-1];G.length>0&&G!==`
`&&n.push(`
`)}if(n.push("<",T),D)for(let G=0,J=D.length;G<J;G++){const ee=D[G];n.push(" ",ee.name,'="',f(ee.value,!0),'"')}if(!F||x?n[n.length]=">":n[n.length]=" />",F&&s&&u[T]&&n.length>0){const G=n[n.length-1];G.length>0&&G!==`
`&&n.push(`
`)}},end:T=>{let D;n.push("</",T,">"),s&&u[T]&&n.length>0&&(D=n[n.length-1],D.length>0&&D!==`
`&&n.push(`
`))},text:(T,D)=>{T.length>0&&(n[n.length]=D?T:f(T))},cdata:T=>{n.push("<![CDATA[",T,"]]>")},comment:T=>{n.push("<!--",T,"-->")},pi:(T,D)=>{D?n.push("<?",T," ",f(D),"?>"):n.push("<?",T,"?>"),s&&n.push(`
`)},doctype:T=>{n.push("<!DOCTYPE",T,">",s?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Ip=(e={},n=Er())=>{const s=O_(e);return e.validate="validate"in e?e.validate:!0,{serialize:u=>{const f=e.validate,x={3:D=>{var F;s.text((F=D.value)!==null&&F!==void 0?F:"",D.raw)},8:D=>{var F;s.comment((F=D.value)!==null&&F!==void 0?F:"")},7:D=>{s.pi(D.name,D.value)},10:D=>{var F;s.doctype((F=D.value)!==null&&F!==void 0?F:"")},4:D=>{var F;s.cdata((F=D.value)!==null&&F!==void 0?F:"")},11:D=>{let F=D;if(F=F.firstChild)do T(F);while(F=F.next)}};s.reset();const T=D=>{var F;const G=x[D.type];if(G)G(D);else{const J=D.name,ee=J in n.getVoidElements();let fe=D.attributes;if(f&&fe&&fe.length>1){const ke=[];ke.map={};const be=n.getElementRule(D.name);if(be){for(let Ee=0,Ye=be.attributesOrder.length;Ee<Ye;Ee++){const qe=be.attributesOrder[Ee];if(qe in fe.map){const tt=fe.map[qe];ke.map[qe]=tt,ke.push({name:qe,value:tt})}}for(let Ee=0,Ye=fe.length;Ee<Ye;Ee++){const qe=fe[Ee].name;if(!(qe in ke.map)){const tt=fe.map[qe];ke.map[qe]=tt,ke.push({name:qe,value:tt})}}fe=ke}}if(s.start(J,fe,ee),sa(J))oe(D.value)&&s.text(D.value,!0),s.end(J);else if(!ee){let ke=D.firstChild;if(ke){(J==="pre"||J==="textarea")&&ke.type===3&&((F=ke.value)===null||F===void 0?void 0:F[0])===`
`&&s.text(`
`,!0);do T(ke);while(ke=ke.next)}s.end(J)}}};return u.type===1&&!e.inner?T(u):u.type===3?x[3](u):x[11](u),s.getContent()}}},w3=new Set;De(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{w3.add(n)});const C3=new Set;De(["background-color"],n=>{C3.add(n)});const S3=["font","text-decoration","text-emphasis"],jH=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),M1=(e,n)=>uo(jH(e,n)),ZH=e=>w3.has(e),GH=e=>C3.has(e),k3=(e,n)=>Ie(M1(e,n),s=>ZH(s)),qH=(e,n)=>k3(e,n)&&Ie(M1(e,n),s=>GH(s)),KH=e=>Cn(e,n=>Ie(S3,s=>co(n,s))),JH=(e,n,s)=>{const i=M1(e,n),u=M1(e,s),f=x=>{var T,D;const F=(T=e.getStyle(n,x))!==null&&T!==void 0?T:"",G=(D=e.getStyle(s,x))!==null&&D!==void 0?D:"";return so(F)&&so(G)&&F!==G};return Ie(i,x=>{const T=D=>Ie(D,F=>F===x);if(!T(u)&&T(S3)){const D=KH(u);return Ie(D,f)}else return f(x)})},A3=(e,n,s)=>te.from(s.container()).filter(qt).exists(i=>{const u=e?0:-1;return n(i.data.charAt(s.offset()+u))}),R_=it(A3,!0,fm),D_=it(A3,!1,fm),QH=e=>{const n=e.container();return qt(n)&&(n.data.length===0||_b(n.data)&&Cm.isBookmarkNode(n.parentNode))},Fp=(e,n)=>s=>Ty(e?0:-1,s).filter(n).isSome(),T3=e=>Mf(e)&&o($e.fromDom(e),"display")==="block",E3=e=>ar(e)&&!Df(e),po=Fp(!0,T3),_3=Fp(!1,T3),P1=Fp(!0,Cl),rw=Fp(!1,Cl),GS=Fp(!0,Ou),M_=Fp(!1,Ou),Bp=Fp(!0,E3),Hp=Fp(!1,E3),e6=e=>e.slice(0,-1),t6=(e,n,s)=>Li(n,e)?e6(mc(e,i=>s(i)||rs(i,n))):[],aw=(e,n)=>t6(e,n,dt),xf=(e,n)=>[e].concat(aw(e,n)),O3=(e,n,s)=>hS(e,n,s,QH),n6=e=>n=>e.isBlock(Se(n)),Wo=(e,n,s)=>us(xf($e.fromDom(n.container()),e),n6(s)),R3=(e,n,s,i)=>O3(e,n.dom,s).forall(u=>Wo(n,s,i).fold(()=>!jd(u,s,n.dom),f=>!jd(u,s,n.dom)&&Li(f,$e.fromDom(u.container())))),Ko=(e,n,s,i)=>Wo(n,s,i).fold(()=>O3(e,n.dom,s).forall(u=>!jd(u,s,n.dom)),u=>O3(e,u.dom,s).isNone()),qS=it(Ko,!1),o6=it(Ko,!0),DY=it(R3,!1),s6=it(R3,!0),MY=e=>qb(e).exists(cg),P_=(e,n,s,i)=>{const u=Cn(xf($e.fromDom(s.container()),n),x=>i.isBlock(Se(x))),f=qn(u).getOr(n);return hu(e,f.dom,s).filter(MY)},L_=(e,n,s)=>qb(n).exists(cg)||P_(!0,e,n,s).isSome(),KS=(e,n,s)=>FE(n).exists(cg)||P_(!1,e,n,s).isSome(),Io=it(P_,!1),r6=it(P_,!0),D3=e=>At.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),M3=(e,n,s)=>{const i=Cn(xf($e.fromDom(n.container()),e),u=>s.isBlock(Se(u)));return qn(i).getOr(e)},L1=(e,n,s)=>D3(n)?D_(n):D_(n)||Yc(M3(e,n,s).dom,n).exists(D_),N_=(e,n,s)=>D3(n)?R_(n):R_(n)||lc(M3(e,n,s).dom,n).exists(R_),a6=e=>We(["pre","pre-wrap"],e),I_=e=>qb(e).bind(n=>Hr(n,Jo)).exists(n=>a6(o(n,"white-space"))),i6=(e,n)=>Yc(e.dom,n).isNone(),P3=(e,n)=>lc(e.dom,n).isNone(),l6=(e,n,s)=>i6(e,n)||P3(e,n)||qS(e,n,s)||o6(e,n,s)||KS(e,n,s)||L_(e,n,s),PY=e=>ut(e)&&ar(e)&&Ay(e),c6=(e,n)=>s=>PY(new Tr(s,e)[n]()),u6=(e,n)=>{const s=lc(e.dom,n).getOr(n),i=c6(e.dom,"next");return n.isAtEnd()&&(i(n.container())||i(s.container()))},d6=(e,n)=>{const s=Yc(e.dom,n).getOr(n),i=c6(e.dom,"prev");return n.isAtStart()&&(i(n.container())||i(s.container()))},L3=(e,n,s)=>I_(n)?!1:l6(e,n,s)||L1(e,n,s)||N_(e,n,s),iw=(e,n,s)=>I_(n)?!1:qS(e,n,s)||DY(e,n,s)||KS(e,n,s)||L1(e,n,s)||d6(e,n),N3=e=>{const n=e.container(),s=e.offset();return qt(n)&&s<n.data.length?At(n,s+1):e},lw=(e,n,s)=>I_(n)?!1:o6(e,n,s)||s6(e,n,s)||L_(e,n,s)||N_(e,n,s)||u6(e,n),hs=(e,n,s)=>iw(e,n,s)||lw(e,N3(n),s),F_=(e,n)=>gf(e.charAt(n)),cw=(e,n)=>fm(e.charAt(n)),I3=e=>{const n=e.container();return qt(n)&&eo(n.data,za)},F3=e=>{const n=e.split("");return Ze(n,(s,i)=>gf(s)&&i>0&&i<n.length-1&&s1(n[i-1])&&s1(n[i+1])?" ":s).join("")},B_=(e,n,s,i)=>{const u=n.data,f=At(n,0);return!s&&F_(u,0)&&!hs(e,f,i)?(n.data=" "+u.slice(1),!0):s&&cw(u,0)&&iw(e,f,i)?(n.data=za+u.slice(1),!0):!1},B3=e=>{const n=e.data,s=F3(n);return s!==n?(e.data=s,!0):!1},H_=(e,n,s,i)=>{const u=n.data,f=At(n,u.length-1);return!s&&F_(u,u.length-1)&&!hs(e,f,i)?(n.data=u.slice(0,-1)+" ",!0):s&&cw(u,u.length-1)&&lw(e,f,i)?(n.data=u.slice(0,-1)+za,!0):!1},h6=(e,n,s)=>{const i=n.container();if(!qt(i))return te.none();if(I3(n)){const u=B_(e,i,!1,s)||B3(i)||H_(e,i,!1,s);return rl(u,n)}else if(hs(e,n,s)){const u=B_(e,i,!0,s)||H_(e,i,!0,s);return rl(u,n)}else return te.none()},H3=e=>{const n=$e.fromDom(e.getBody());e.selection.isCollapsed()&&h6(n,At.fromRangeStart(e.selection.getRng()),e.schema).each(s=>{e.selection.setRng(s.toRange())})},$3=(e,n,s,i)=>{if(s===0)return;const u=$e.fromDom(e),f=Br(u,F=>i.isBlock(Se(F))).getOr(u),x=e.data.slice(n,n+s),T=n+s>=e.data.length&&lw(f,At(e,e.data.length),i),D=n===0&&iw(f,At(e,0),i);e.replaceData(n,s,au(x,4,D,T))},JS=(e,n,s)=>{const i=e.data.slice(n),u=i.length-hi(i).length;$3(e,n,u,s)},$_=(e,n,s)=>{const i=e.data.slice(0,n),u=i.length-Ja(i).length;$3(e,n-u,u,s)},z_=(e,n,s,i,u=!0)=>{const f=Ja(e.data).length,x=u?e:n,T=u?n:e;return u?x.appendData(T.data):x.insertData(0,T.data),U($e.fromDom(T)),i&&JS(x,f,s),x},g6=(e,n)=>{const s=e.container(),i=e.offset();return!At.isTextPosition(e)&&s===n.parentNode&&i>At.before(n).offset()},f6=(e,n)=>g6(n,e)?At(n.container(),n.offset()-1):n,m6=e=>qt(e)?At(e,0):At.before(e),p6=e=>qt(e)?At(e,e.data.length):At.after(e),QS=e=>md(e.previousSibling)?te.some(p6(e.previousSibling)):e.previousSibling?gu(e.previousSibling):te.none(),ek=e=>md(e.nextSibling)?te.some(m6(e.nextSibling)):e.nextSibling?cc(e.nextSibling):te.none(),b6=(e,n)=>te.from(n.previousSibling?n.previousSibling:n.parentNode).bind(s=>Yc(e,At.before(s))).orThunk(()=>lc(e,At.after(n))),v6=(e,n)=>lc(e,At.after(n)).orThunk(()=>Yc(e,At.before(n))),x6=(e,n)=>QS(n).orThunk(()=>ek(n)).orThunk(()=>b6(e,n)),y6=(e,n)=>ek(n).orThunk(()=>QS(n)).orThunk(()=>v6(e,n)),w6=(e,n,s)=>e?y6(n,s):x6(n,s),C6=(e,n,s)=>w6(e,n,s).map(it(f6,s)),z3=(e,n,s)=>{s.fold(()=>{e.focus()},i=>{e.selection.setRng(i.toRange(),n)})},S6=e=>n=>n.dom===e,V3=(e,n)=>n&&Qn(e.schema.getBlockElements(),Se(n)),k6=(e,n,s)=>{if(Sl(e,n)){const i=$e.fromHtml('<br data-mce-bogus="1">');return s?De(li(n),u=>{rv(u)||U(u)}):Y(n),M(n,i),te.some(At.before(i.dom))}else return te.none()},A6=(e,n,s,i)=>{const u=Fc(e).filter(fr),f=Ni(e).filter(fr);return U(e),Si(u,f,n,(x,T,D)=>{const F=x.dom,G=T.dom,J=F.data.length;return z_(F,G,s,i),D.container()===G?At(F,J):D}).orThunk(()=>(i&&(u.each(x=>$_(x.dom,x.dom.length,s)),f.each(x=>JS(x.dom,0,s))),n))},fv=(e,n)=>Qn(e.schema.getTextInlineElements(),Se(n)),mv=(e,n,s,i=!0,u=!1)=>{const f=C6(n,e.getBody(),s.dom),x=Br(s,it(V3,e),S6(e.getBody())),T=A6(s,f,e.schema,fv(e,s));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):x.bind(D=>k6(e.schema,D,u)).fold(()=>{i&&z3(e,n,T)},D=>{i&&z3(e,n,te.some(D))})},W3=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,T6=e=>W3.test(e),pv=(e,n)=>Ml($e.fromDom(n),Fu(e))&&!Fd(e.schema,n)&&e.dom.isEditable(n),V_=e=>{var n;return Jr.DOM.getStyle(e,"direction",!0)==="rtl"||T6((n=e.textContent)!==null&&n!==void 0?n:"")},U3=(e,n,s)=>Cn(Jr.DOM.getParents(s.container(),"*",n),e),Em=(e,n,s)=>{const i=U3(e,n,s);return te.from(i[i.length-1])},X3=(e,n,s)=>{const i=Xc(n,e),u=Xc(s,e);return ut(i)&&i===u},qc=e=>_h(e)||ug(e),Jd=(e,n)=>{const s=n.container(),i=n.offset();return e?gd(s)?qt(s.nextSibling)?At(s.nextSibling,0):At.after(s):_h(n)?At(s,i+1):n:gd(s)?qt(s.previousSibling)?At(s.previousSibling,s.previousSibling.data.length):At.before(s):ug(n)?At(s,i-1):n},Y3=it(Jd,!0),j3=it(Jd,!1),Z3=(e,n)=>{const s=i=>i.stopImmediatePropagation();e.on("beforeinput input",s,!0),e.getDoc().execCommand(n),e.off("beforeinput input",s)},E6=e=>{e.execCommand("delete")},yf=e=>Z3(e,"Delete"),G3=e=>Z3(e,"ForwardDelete"),_6=e=>n=>or(Za(n),e,rs),Va=e=>Vc(e)||Gf(e),bv=(e,n)=>Li(e,n)?Hr(n,Va,_6(e)):te.none(),$p=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},q3=(e,n,s)=>Oo(cc(s),gu(s),(i,u)=>{const f=Jd(!0,i),x=Jd(!1,u),T=Jd(!1,n);return e?lc(s,T).exists(D=>D.isEqual(x)&&n.isEqual(f)):Yc(s,T).exists(D=>D.isEqual(f)&&n.isEqual(x))}).getOr(!0),vv=e=>(ro(e)?Fc(e):_u(e)).bind(vv).orThunk(()=>te.some(e)),xd=(e,n,s,i=!0)=>{var u;n.deleteContents();const f=vv(s).getOr(s),x=$e.fromDom((u=e.dom.getParent(f.dom,e.dom.isBlock))!==null&&u!==void 0?u:s.dom);if(x.dom===e.getBody()?$p(e,i):Sl(e.schema,x,{checkRootAsContent:!1})&&(Eh(x),i&&e.selection.setCursorLocation(x.dom,0)),!rs(s,x)){const T=or(Za(x),s)?[]:ed(x);De(T.concat(li(s)),D=>{!rs(D,x)&&!Li(D,x)&&Sl(e.schema,D)&&U(D)})}},uw=e=>n=>rs(e,n),zr=e=>Vs(e,"td,th"),N1=(e,n)=>tv($e.fromDom(e),n),K3=e=>Oo(e.startTable,e.endTable,(n,s)=>{const i=al(n,f=>rs(f,s)),u=al(s,f=>rs(f,n));return!i&&!u?e:{...e,startTable:i?te.none():e.startTable,endTable:u?te.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),J3=e=>K3(e),W_=(e,n)=>{const s=N1(e.startContainer,n),i=N1(e.endContainer,n),u=s.isSome(),f=i.isSome(),x=Oo(s,i,rs).getOr(!1);return J3({startTable:s,endTable:i,isStartInTable:u,isEndInTable:f,isSameTable:x,isMultiTable:!x&&u&&f})},dw=(e,n)=>({start:e,end:n}),U_=(e,n,s)=>({rng:e,table:n,cells:s}),xv=Iu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),yv=(e,n)=>Oc($e.fromDom(e),"td,th",n),tk=e=>!rs(e.start,e.end),X_=(e,n)=>tv(e.start,n).bind(s=>tv(e.end,n).bind(i=>rl(rs(s,i),s))),Q3=(e,n)=>!tk(e)&&X_(e,n).exists(s=>{const i=s.dom.rows;return i.length===1&&i[0].cells.length===1}),eP=(e,n)=>{const s=yv(e.startContainer,n),i=yv(e.endContainer,n);return Oo(s,i,dw)},tP=e=>n=>tv(n,e).bind(s=>Ns(zr(s)).map(i=>dw(n,i))),nP=e=>n=>tv(n,e).bind(s=>qn(zr(s)).map(i=>dw(i,n))),zp=e=>n=>X_(n,e).map(s=>U_(n,s,zr(s))),Y_=(e,n,s,i)=>{if(s.collapsed||!e.forall(tk))return te.none();if(n.isSameTable){const u=e.bind(zp(i));return te.some({start:u,end:u})}else{const u=yv(s.startContainer,i),f=yv(s.endContainer,i),x=u.bind(tP(i)).bind(zp(i)),T=f.bind(nP(i)).bind(zp(i));return te.some({start:x,end:T})}},nk=(e,n)=>ur(e,s=>rs(s,n)),j_=e=>Oo(nk(e.cells,e.rng.start),nk(e.cells,e.rng.end),(n,s)=>e.cells.slice(n,s+1)),O6=(e,n,s)=>e.exists(i=>Q3(i,s)&&Wy(i.start,n)),Z_=(e,n)=>{const{startTable:s,endTable:i}=n,u=e.cloneRange();return s.each(f=>u.setStartAfter(f.dom)),i.each(f=>u.setEndBefore(f.dom)),u},oP=(e,n,s,i)=>Y_(e,n,s,i).bind(({start:u,end:f})=>u.or(f)).bind(u=>{const{isSameTable:f}=n,x=j_(u).getOr([]);if(f&&u.cells.length===x.length)return te.some(xv.fullTable(u.table));if(x.length>0){if(f)return te.some(xv.partialTable(x,te.none()));{const T=Z_(s,n);return te.some(xv.partialTable(x,te.some({...n,rng:T})))}}else return te.none()}),sP=(e,n,s,i)=>Y_(e,n,s,i).bind(({start:u,end:f})=>{const x=u.bind(j_).getOr([]),T=f.bind(j_).getOr([]);if(x.length>0&&T.length>0){const D=Z_(s,n);return te.some(xv.multiTable(x,T,D))}else return te.none()}),ok=(e,n)=>{const s=uw(e),i=eP(n,s),u=W_(n,s);return O6(i,n,s)?i.map(f=>xv.singleCellTable(n,f.start)):u.isMultiTable?sP(i,u,n,s):oP(i,u,n,s)},G_=e=>De(e,n=>{er(n,"contenteditable"),Eh(n)}),rP=(e,n)=>te.from(e.dom.getParent(n,e.dom.isBlock)).map($e.fromDom),aP=(e,n,s)=>{s.each(i=>{n?U(i):(Eh(i),e.selection.setCursorLocation(i.dom,0))})},sk=(e,n,s,i)=>{const u=s.cloneRange();i?(u.setStart(s.startContainer,s.startOffset),u.setEndAfter(n.dom.lastChild)):(u.setStartBefore(n.dom.firstChild),u.setEnd(s.endContainer,s.endOffset)),rk(e,u,n,!1).each(f=>f())},q_=e=>{const n=Ep(e),s=$e.fromDom(e.selection.getNode());Pf(s.dom)&&Sl(e.schema,s)?e.selection.setCursorLocation(s.dom,0):e.selection.collapse(!0),n.length>1&&Ie(n,i=>rs(i,s))&&fa(s,"data-mce-selected","1")},K_=(e,n,s)=>te.some(()=>{const i=e.selection.getRng(),u=s.bind(({rng:f,isStartInTable:x})=>{const T=rP(e,x?f.endContainer:f.startContainer);f.deleteContents(),aP(e,x,T.filter(it(Sl,e.schema)));const D=x?n[0]:n[n.length-1];return sk(e,D,i,x),Sl(e.schema,D)?te.none():te.some(x?n.slice(1):n.slice(0,-1))}).getOr(n);G_(u),q_(e)}),iP=(e,n,s,i)=>te.some(()=>{const u=e.selection.getRng(),f=n[0],x=s[s.length-1];sk(e,f,u,!0),sk(e,x,u,!1);const T=Sl(e.schema,f)?n:n.slice(1),D=Sl(e.schema,x)?s:s.slice(0,-1);G_(T.concat(D)),i.deleteContents(),q_(e)}),rk=(e,n,s,i=!0)=>te.some(()=>{xd(e,n,s,i)}),lP=(e,n)=>te.some(()=>mv(e,!1,n)),cP=(e,n,s)=>ok(n,s).bind(i=>i.fold(it(rk,e),it(lP,e),it(K_,e),it(iP,e))),J_=(e,n)=>hw(e,n),uP=(e,n,s,i)=>ak(n,i).fold(()=>cP(e,n,s),u=>J_(e,u)),dP=(e,n,s)=>{const i=$e.fromDom(e.getBody()),u=e.selection.getRng();return s.length!==0?K_(e,s,te.none()):uP(e,i,u,n)},Q_=(e,n)=>us(xf(n,e),Eb),ak=(e,n)=>us(xf(n,e),$a("caption")),hP=(e,n,s,i,u)=>df(s,e.getBody(),u).bind(f=>Q_(n,$e.fromDom(f.getNode())).bind(x=>rs(x,i)?te.none():te.some(ot))),hw=(e,n)=>te.some(()=>{Eh(n),e.selection.setCursorLocation(n.dom,0)}),eO=(e,n,s,i)=>cc(e.dom).bind(u=>gu(e.dom).map(f=>n?s.isEqual(u)&&i.isEqual(f):s.isEqual(f)&&i.isEqual(u))).getOr(!0),ik=(e,n)=>hw(e,n),tO=(e,n,s)=>ak(e,$e.fromDom(s.getNode())).fold(()=>te.some(ot),i=>rl(!rs(i,n),ot)),lk=(e,n,s,i,u)=>df(s,e.getBody(),u).fold(()=>te.some(ot),f=>eO(i,s,u,f)?ik(e,i):tO(n,i,f)),gP=(e,n,s,i)=>{const u=At.fromRangeStart(e.selection.getRng());return Q_(s,i).bind(f=>Sl(e.schema,f,{checkRootAsContent:!1})?hw(e,f):hP(e,s,n,f,u))},ck=(e,n,s,i)=>{const u=At.fromRangeStart(e.selection.getRng());return Sl(e.schema,i)?hw(e,i):lk(e,s,n,i,u)},uk=(e,n)=>e?GS(n):M_(n),gw=(e,n)=>{const s=At.fromRangeStart(e.selection.getRng());return uk(n,s)||hu(n,e.getBody(),s).exists(i=>uk(n,i))},nO=(e,n,s)=>{const i=$e.fromDom(e.getBody());return ak(i,s).fold(()=>gP(e,n,i,s).orThunk(()=>rl(gw(e,n),ot)),u=>ck(e,n,i,u))},dk=(e,n)=>{const s=$e.fromDom(e.selection.getStart(!0)),i=Ep(e);return e.selection.isCollapsed()&&i.length===0?nO(e,n,s):dP(e,s,i)},Nh=(e,n)=>{let s=n;for(;s&&s!==e;){if(Lt(s)||ar(s))return s;s=s.parentNode}return null},oO=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],sO=zt.each,Vp=e=>{const n=e.dom,s=new Set(e.serializer.getTempAttrs()),i=(f,x)=>{if(f.nodeName!==x.nodeName||f.nodeType!==x.nodeType)return!1;const T=F=>{const G={};return sO(n.getAttribs(F),J=>{const ee=J.nodeName.toLowerCase();ee!=="style"&&!u(ee)&&(G[ee]=n.getAttrib(F,ee))}),G},D=(F,G)=>{for(const J in F)if(Qn(F,J)){const ee=G[J];if(Wn(ee)||F[J]!==ee)return!1;delete G[J]}for(const J in G)if(Qn(G,J))return!1;return!0};return An(f)&&An(x)&&(!D(T(f),T(x))||!D(n.parseStyle(n.getAttrib(f,"style")),n.parseStyle(n.getAttrib(x,"style"))))?!1:!jc(f)&&!jc(x)},u=f=>Ie(oO,x=>co(f,x))||s.has(f);return{compare:i,isAttributeInternal:u}},_m=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),fP=e=>e.name==="summary",R6=(e,n)=>{let s=e;for(;s=s.walk();)n(s)},mP=(e,n,s,i)=>{const u=s.name;for(let f=0,x=e.length;f<x;f++){const T=e[f];if(T.name===u){const D=i.nodes[u];D?D.nodes.push(s):i.nodes[u]={filter:T,nodes:[s]}}}if(s.attributes)for(let f=0,x=n.length;f<x;f++){const T=n[f],D=T.name;if(D in s.attributes.map){const F=i.attributes[D];F?F.nodes.push(s):i.attributes[D]={filter:T,nodes:[s]}}}},pP=(e,n,s)=>{const i={nodes:{},attributes:{}};return s.firstChild&&R6(s,u=>{mP(e,n,u,i)}),i},rO=(e,n)=>{const s=(i,u)=>{Yt(i,f=>{const x=oo(f.nodes);De(f.filter.callbacks,T=>{for(let D=x.length-1;D>=0;D--){const F=x[D];(!(u?F.attr(f.filter.name)!==void 0:F.name===f.filter.name)||no(F.parent))&&x.splice(D,1)}x.length>0&&T(x,f.filter.name,n)})})};s(e.nodes,!1),s(e.attributes,!0)},aO=(e,n,s,i={})=>{const u=pP(e,n,s);rO(u,i)},iO=(e,n,s,i)=>{if((e.pad_empty_with_br||n.insert)&&s(i)){const f=new Gc("br",1);n.insert&&f.attr("data-mce-bogus","1"),i.empty().append(f)}else i.empty().append(new Gc("#text",3)).value=za},Wp=e=>{var n;return Up(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===za},Up=(e,n)=>{const s=e==null?void 0:e.firstChild;return ut(s)&&s===e.lastChild&&s.name===n},LY=(e,n)=>{const s=e.getElementRule(n.name);return(s==null?void 0:s.paddEmpty)===!0},tl=(e,n,s,i)=>i.isEmpty(n,s,u=>LY(e,u)),D6=(e,n)=>ut(e)&&(n(e)||e.name==="br"),M6=e=>{let n;for(let s=e;s;s=s.parent){const i=s.attr("contenteditable");if(i==="false")break;i==="true"&&(n=s)}return te.from(n)},xg=(e,n,s=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const i=e.children();for(const u of i)s&&!n.isValidChild(s.name,u.name)&&xg(u,n,s);e.unwrap()}},dr=(e,n,s,i=ot)=>{const u=n.getTextBlockElements(),f=n.getNonEmptyElements(),x=n.getWhitespaceElements(),T=zt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),D=new Set,F=G=>G!==s&&!T[G.name];for(let G=0;G<e.length;G++){const J=e[G];let ee,fe,ke;if(!J.parent||D.has(J))continue;if(u[J.name]&&J.parent.name==="li"){let Ee=J.next;for(;Ee&&u[Ee.name];){Ee.name="li",D.add(Ee),J.parent.insert(Ee,J.parent);Ee=Ee.next}J.unwrap();continue}const be=[J];for(ee=J.parent;ee&&!n.isValidChild(ee.name,J.name)&&F(ee);ee=ee.parent)be.push(ee);if(ee&&be.length>1)if(lO(n,J,ee))xg(J,n);else{be.reverse(),fe=be[0].clone(),i(fe);let Ee=fe;for(let Ye=0;Ye<be.length-1;Ye++){n.isValidChild(Ee.name,be[Ye].name)&&Ye>0?(ke=be[Ye].clone(),i(ke),Ee.append(ke)):ke=Ee;for(let qe=be[Ye].firstChild;qe&&qe!==be[Ye+1];){const tt=qe.next;ke.append(qe),qe=tt}Ee=ke}tl(n,f,x,fe)?ee.insert(J,be[0],!0):(ee.insert(fe,be[0],!0),ee.insert(J,fe)),ee=be[0],(tl(n,f,x,ee)||Up(ee,"br"))&&ee.empty().remove()}else if(J.parent){if(J.name==="li"){let Ee=J.prev;if(Ee&&(Ee.name==="ul"||Ee.name==="ol")){Ee.append(J);continue}if(Ee=J.next,Ee&&(Ee.name==="ul"||Ee.name==="ol")&&Ee.firstChild){Ee.insert(J,Ee.firstChild,!0);continue}const Ye=new Gc("ul",1);i(Ye),J.wrap(Ye);continue}if(n.isValidChild(J.parent.name,"div")&&n.isValidChild("div",J.name)){const Ee=new Gc("div",1);i(Ee),J.wrap(Ee)}else xg(J,n)}}},NY=(e,n)=>{let s=e;for(;s;){if(s.name===n)return!0;s=s.parent}return!1},lO=(e,n,s=n.parent)=>s?e.children[n.name]&&!e.isValidChild(s.name,n.name)||n.name==="a"&&NY(s,"a")?!0:fP(s)&&_m(n)?!((s==null?void 0:s.firstChild)===n&&(s==null?void 0:s.lastChild)===n):!1:!1,P6=(e,n,s,i)=>{const u=document.createRange();return u.setStart(e,n),u.setEnd(s,i),u},Sa=e=>{const n=At.fromRangeStart(e),s=At.fromRangeEnd(e),i=e.commonAncestorContainer;return hu(!1,i,s).map(u=>!jd(n,s,i)&&jd(n,u,i)?P6(n.container(),n.offset(),u.container(),u.offset()):e).getOr(e)},hk=e=>e.collapsed?e:Sa(e),fw=e=>ut(e.firstChild)&&e.firstChild===e.lastChild,mw=e=>e.name==="br"||e.value===za,pw=(e,n)=>e.getBlockElements()[n.name]&&fw(n)&&mw(n.firstChild),bw=(e,n)=>{const s=e.getNonEmptyElements();return ut(n)&&(n.isEmpty(s)||pw(e,n))},bP=(e,n)=>{let s=n.firstChild,i=n.lastChild;return s&&s.name==="meta"&&(s=s.next),i&&i.attr("id")==="mce_marker"&&(i=i.prev),bw(e,i)&&(i=i==null?void 0:i.prev),!s||s!==i?!1:s.name==="ul"||s.name==="ol"},IY=e=>{var n,s;const i=e.firstChild,u=e.lastChild;return i&&i.nodeName==="META"&&((n=i.parentNode)===null||n===void 0||n.removeChild(i)),u&&u.id==="mce_marker"&&((s=u.parentNode)===null||s===void 0||s.removeChild(u)),e},FY=(e,n,s)=>{const i=n.serialize(s),u=e.createFragment(i);return IY(u)},BY=e=>{var n;return Cn((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],s=>s.nodeName==="LI")},HY=e=>e.data===za||rr(e),L6=e=>ut(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&HY(e.firstChild),$Y=e=>!e.firstChild||L6(e),N6=e=>e.length>0&&$Y(e[e.length-1])?e.slice(0,-1):e,cO=(e,n)=>{const s=e.getParent(n,e.isBlock);return s&&s.nodeName==="LI"?s:null},zY=(e,n)=>!!cO(e,n),I6=(e,n)=>{const s=n.cloneRange(),i=n.cloneRange();return s.setStartBefore(e),i.setEndAfter(e),[s.cloneContents(),i.cloneContents()]},ni=(e,n)=>{const s=At.before(e),u=Bl(n).next(s);return u?u.toRange():null},uO=(e,n)=>{const s=At.after(e),u=Bl(n).prev(s);return u?u.toRange():null},vP=(e,n,s,i)=>{const u=I6(e,i),f=e.parentNode;return f&&(f.insertBefore(u[0],e),zt.each(n,x=>{f.insertBefore(x,e)}),f.insertBefore(u[1],e),f.removeChild(e)),uO(n[n.length-1],s)},F6=(e,n,s)=>{const i=e.parentNode;return i&&zt.each(n,u=>{i.insertBefore(u,e)}),ni(e,s)},B6=(e,n,s,i)=>(i.insertAfter(n.reverse(),e),uO(n[0],s)),H6=(e,n,s,i)=>{const u=FY(n,e,i),f=cO(n,s.startContainer),x=N6(BY(u.firstChild)),T=1,D=2,F=n.getRoot(),G=J=>{const ee=At.fromRangeStart(s),fe=Bl(n.getRoot()),ke=J===T?fe.prev(ee):fe.next(ee),be=ke==null?void 0:ke.getNode();return be?cO(n,be)!==f:!0};return f?G(T)?F6(f,x,F):G(D)?B6(f,x,F,n):vP(f,x,F,s):null},Wu=["pre"],Ih=(e,n,s,i)=>{var u;const f=n.firstChild,x=n.lastChild,T=x.attr("data-mce-type")==="bookmark"?x.prev:x,D=f===T,F=We(Wu,f.name);if(D&&F){const G=f.attr("contenteditable")!=="false",J=((u=e.getParent(s,e.isBlock))===null||u===void 0?void 0:u.nodeName.toLowerCase())===f.name,ee=te.from(Nh(i,s)).forall(Lt);return G&&J&&ee}else return!1},gk=Pf,dO=(e,n,s)=>{if(ut(s)){const i=e.getParent(n.endContainer,gk);return s===i&&Wy($e.fromDom(s),n)}else return!1},hO=(e,n,s)=>{var i;if(s.getAttribute("data-mce-bogus")==="all")(i=s.parentNode)===null||i===void 0||i.insertBefore(e.dom.createFragment(n),s);else{const u=s.firstChild,f=s.lastChild;!u||u===f&&u.nodeName==="BR"?e.dom.setHTML(s,n):e.selection.setContent(n,{no_events:!0})}},fk=(e,n,s)=>{te.from(e.getParent(n,"td,th")).map($e.fromDom).each(i=>GT(i,s))},xP=(e,n)=>{const s=e.schema.getTextInlineElements(),i=e.dom;if(n){const u=e.getBody(),f=Vp(e),x="*[data-mce-fragment]",T=i.select(x);zt.each(T,D=>{const F=ee=>ut(s[ee.nodeName.toLowerCase()]),G=ee=>ee.childNodes.length===1;if((ee=>!(k3(i,ee)||qH(i,ee)))(D)&&F(D)&&G(D)){const ee=M1(i,D),fe=(Ye,qe)=>qo(Ye,tt=>We(qe,tt)),ke=Ye=>G(D)&&i.is(Ye,x)&&F(Ye)&&(Ye.nodeName===D.nodeName&&fe(ee,M1(i,Ye))||ke(Ye.children[0])),be=Ye=>ut(Ye)&&Ye!==u&&(f.compare(D,Ye)||be(Ye.parentElement)),Ee=Ye=>ut(Ye)&&Ye!==u&&i.is(Ye,x)&&(JH(i,D,Ye)||Ee(Ye.parentElement));(ke(D.children[0])||be(D.parentElement)&&!Ee(D.parentElement))&&i.remove(D,!0)}})}},vw=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},mk=e=>{zt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},gO=e=>!!e.getAttribute("data-mce-fragment"),yP=(e,n)=>ut(n)&&!e.schema.getVoidElements()[n.nodeName],xw=(e,n)=>{var s,i,u;let f;const x=e.dom,T=e.selection;if(!n)return;T.scrollIntoView(n);const D=Nh(e.getBody(),n);if(D&&x.getContentEditable(D)==="false"){x.remove(n),T.select(D);return}let F=x.createRng();const G=n.previousSibling;if(qt(G)){F.setStart(G,(i=(s=G.nodeValue)===null||s===void 0?void 0:s.length)!==null&&i!==void 0?i:0);const fe=n.nextSibling;qt(fe)&&(G.appendData(fe.data),(u=fe.parentNode)===null||u===void 0||u.removeChild(fe))}else F.setStartBefore(n),F.setEndBefore(n);const J=fe=>{let ke=At.fromRangeStart(fe);return ke=Bl(e.getBody()).next(ke),ke==null?void 0:ke.toRange()},ee=x.getParent(n,x.isBlock);if(x.remove(n),ee&&x.isEmpty(ee)){const fe=gk(ee);Y($e.fromDom(ee)),F.setStart(ee,0),F.setEnd(ee,0),!fe&&!gO(ee)&&(f=J(F))?(F=f,x.remove(ee)):x.add(ee,x.create("br",fe?{}:{"data-mce-bogus":"1"}))}T.setRng(F)},$6=e=>{const n=e.dom,s=hk(e.selection.getRng());e.selection.setRng(s);const i=n.getParent(s.startContainer,gk);dO(n,s,i)?rk(e,s,$e.fromDom(i)):s.startContainer===s.endContainer&&s.endOffset-s.startOffset===1&&qt(s.startContainer.childNodes[s.startOffset])?s.deleteContents():e.getDoc().execCommand("Delete",!1)},z6=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return te.some(n);return te.none()},yg=(e,n,s)=>{var i;return Ie(s.children(),_m)&&((i=e.getParent(n,e.isBlock))===null||i===void 0?void 0:i.nodeName)==="SUMMARY"},Uu=(e,n,s)=>{var i,u;const f=e.selection,x=e.dom,T=e.parser,D=s.merge,F=Ip({validate:!0},e.schema),G='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';s.preserve_zwsp||(n=Pu(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,G);let J=f.getRng();const ee=J.startContainer,fe=e.getBody();ee===fe&&f.isCollapsed()&&x.isBlock(fe.firstChild)&&yP(e,fe.firstChild)&&x.isEmpty(fe.firstChild)&&(J=x.createRng(),J.setStart(fe.firstChild,0),J.setEnd(fe.firstChild,0),f.setRng(J)),f.isCollapsed()||$6(e);const ke=f.getNode(),be={context:ke.nodeName.toLowerCase(),data:s.data,insert:!0},Ee=T.parse(n,be);if(s.paste===!0&&bP(e.schema,Ee)&&zY(x,ke))return J=H6(F,x,f.getRng(),Ee),J&&f.setRng(J),n;s.paste===!0&&Ih(x,Ee,ke,e.getBody())&&((i=Ee.firstChild)===null||i===void 0||i.unwrap()),vw(Ee);let Ye=Ee.lastChild;if(Ye&&Ye.attr("id")==="mce_marker"){const qe=Ye;for(Ye=Ye.prev;Ye&&Ye.name!=="table";Ye=Ye.walk(!0))if(Ye.type===3||!x.isBlock(Ye.name)){Ye.parent&&e.schema.isValidChild(Ye.parent.name,"span")&&Ye.parent.insert(qe,Ye,Ye.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ke),!be.invalid&&!yg(x,ke,Ee))n=F.serialize(Ee),hO(e,n,ke);else{e.selection.setContent(G);let qe=f.getNode(),tt;const lt=e.getBody();for(Hg(qe)?qe=tt=lt:tt=qe;tt&&tt!==lt;)qe=tt,tt=tt.parentNode;n=qe===lt?lt.innerHTML:x.getOuterHTML(qe);const $t=T.parse(n),nn=z6($t),On=nn.bind(M6).getOr($t);nn.each(Dn=>Dn.replace(Ee));const _t=Ee.children(),vt=(u=Ee.parent)!==null&&u!==void 0?u:$t;Ee.unwrap();const Ut=Cn(_t,Dn=>lO(e.schema,Dn,vt));dr(Ut,e.schema,On),aO(T.getNodeFilters(),T.getAttributeFilters(),$t),n=F.serialize($t),qe===lt?x.setHTML(lt,n):x.setOuterHTML(qe,n)}return xP(e,D),xw(e,x.get("mce_marker")),mk(e.getBody()),fk(x,f.getStart(),e.schema),sc(e.schema,e.getBody(),f.getStart()),n},Xp=e=>e instanceof Gc,Qd=e=>{D1(e)&&cc(e.getBody()).each(n=>{const s=n.getNode(),i=Ou(s)?cc(s).getOr(n):n;e.selection.setRng(i.toRange())})},fO=(e,n,s)=>{e.dom.setHTML(e.getBody(),n),s!==!0&&Qd(e)},la=(e,n,s,i)=>{if(s=Pu(s),s.length===0||/^\s+$/.test(s)){const u='<br data-mce-bogus="1">';n.nodeName==="TABLE"?s="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(s="<li>"+u+"</li>");const f=Fl(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),f.toLowerCase())?(s=u,s=e.dom.createHTML(f,of(e),s)):s||(s=u),fO(e,s,i.no_selection),{content:s,html:s}}else{i.format!=="raw"&&(s=Ip({validate:!1},e.schema).serialize(e.parser.parse(s,{isRootContent:!0,insert:!0})));const u=k0($e.fromDom(n))?s:zt.trim(s);return fO(e,u,i.no_selection),{content:u,html:u}}},V6=(e,n,s,i)=>{aO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),s);const u=Ip({validate:!1},e.schema).serialize(s),f=Pu(k0($e.fromDom(n))?u:zt.trim(u));return fO(e,f,i.no_selection),{content:s,html:f}},wv=(e,n,s)=>te.from(e.getBody()).map(i=>Xp(n)?V6(e,i,n,s):la(e,i,n,s)).getOr({content:n,html:Xp(s.content)?"":s.content}),I1=e=>Be(e)?e:dt,wP=(e,n,s)=>{let i=e.dom;const u=I1(s);for(;i.parentNode;){i=i.parentNode;const f=$e.fromDom(i),x=n(f);if(x.isSome())return x;if(u(f))break}return te.none()},yw=(e,n,s)=>{const i=n(e),u=I1(s);return i.orThunk(()=>u(e)?te.none():wP(e,n,u))},ww=u1,CP=(e,n,s)=>{const i=e.formatter.get(s);if(i)for(let u=0;u<i.length;u++){const f=i[u];if(Hu(f)&&f.inherit===!1&&e.dom.is(n,f.selector))return!0}return!1},Cw=(e,n,s,i,u)=>{const f=e.dom.getRoot();if(n===f)return!1;const x=e.dom.getParent(n,T=>CP(e,T,s)?!0:T.parentNode===f||!!wg(e,T,s,i,!0));return!!wg(e,x,s,i,u)},pk=(e,n,s)=>dl(s)&&ww(n,s.inline)||Ph(s)&&ww(n,s.block)?!0:Hu(s)?An(n)&&e.is(n,s.selector):!1,mO=(e,n,s,i,u,f)=>{const x=s[i],T=i==="attributes";if(Be(s.onmatch))return s.onmatch(n,s,i);if(x){if(Ol(x)){for(let D=0;D<x.length;D++)if(T?e.getAttrib(n,x[D]):Xy(e,n,x[D]))return!0}else for(const D in x)if(Qn(x,D)){const F=T?e.getAttrib(n,D):Xy(e,n,D),G=vm(x[D],f),J=no(F)||ls(F);if(J&&no(G))continue;if(u&&J&&!s.exact||(!u||s.exact)&&!ww(F,mf(G,D)))return!1}}return!0},wg=(e,n,s,i,u)=>{const f=e.formatter.get(s),x=e.dom;if(f&&An(n))for(let T=0;T<f.length;T++){const D=f[T];if(pk(e.dom,n,D)&&mO(x,n,D,"attributes",u,i)&&mO(x,n,D,"styles",u,i)){const F=D.classes;if(F){for(let G=0;G<F.length;G++)if(!e.dom.hasClass(n,vm(F[G],i)))return}return D}}},Sw=(e,n,s,i,u)=>{if(i)return Cw(e,i,n,s,u);if(i=e.selection.getNode(),Cw(e,i,n,s,u))return!0;const f=e.selection.getStart();return!!(f!==i&&Cw(e,f,n,s,u))},SP=(e,n,s)=>{const i=[],u={},f=e.selection.getStart();return e.dom.getParent(f,x=>{for(let T=0;T<n.length;T++){const D=n[T];!u[D]&&wg(e,x,D,s)&&(u[D]=!0,i.push(D))}},e.dom.getRoot()),i},bk=(e,n)=>{const s=u=>rs(u,$e.fromDom(e.getBody())),i=(u,f)=>wg(e,u.dom,f)?te.some(f):te.none();return te.from(e.selection.getStart(!0)).bind(u=>yw($e.fromDom(u),f=>Wr(n,x=>i(f,x)),s)).getOrNull()},W6=(e,n)=>{const s=e.formatter.get(n),i=e.dom;if(s&&e.selection.isEditable()){const u=e.selection.getStart(),f=xm(i,u);for(let x=s.length-1;x>=0;x--){const T=s[x];if(!Hu(T))return!0;for(let D=f.length-1;D>=0;D--)if(i.is(f[D],T.selector))return!0}}return!1},U6=(e,n,s)=>Vo(s,(i,u)=>{const f=wS(e,u);return e.formatter.matchNode(n,u,{},f)?i.concat([u]):i},[]),kw=Qi,X6=(e,n)=>e.importNode(n,!0),kP=e=>{if(e){const n=new Tr(e,e);for(let s=n.current();s;s=n.next())if(qt(s))return s}return null},vk=e=>{const n=$e.fromTag("span");return Mr(n,{id:e1,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&M(n,$e.fromText(kw)),n},Y6=e=>{const n=kP(e);return n&&n.data.charAt(0)===kw&&n.deleteData(0,1),n},pO=(e,n,s)=>{const i=e.dom,u=e.selection;if(kS(n))mv(e,!1,$e.fromDom(n),s,!0);else{const f=u.getRng(),x=i.getParent(n,i.isBlock),T=f.startContainer,D=f.startOffset,F=f.endContainer,G=f.endOffset,J=Y6(n);i.remove(n,!0),T===J&&D>0&&f.setStart(J,D-1),F===J&&G>0&&f.setEnd(J,G-1),x&&i.isEmpty(x)&&Eh($e.fromDom(x)),u.setRng(f)}},xk=(e,n,s)=>{const i=e.dom,u=e.selection;if(n)pO(e,n,s);else if(n=hm(e.getBody(),u.getStart()),!n)for(;n=i.get(e1);)pO(e,n,s)},j6=(e,n,s)=>{var i,u;const f=e.dom,x=f.getParent(s,it(ov,e.schema));x&&f.isEmpty(x)?(i=s.parentNode)===null||i===void 0||i.replaceChild(n,s):(zx($e.fromDom(s)),f.isEmpty(s)?(u=s.parentNode)===null||u===void 0||u.replaceChild(n,s):f.insertAfter(n,s))},bO=(e,n)=>(e.appendChild(n),n),F1=(e,n)=>{var s;const i=Qs(e,(f,x)=>bO(f,x.cloneNode(!1)),n),u=(s=i.ownerDocument)!==null&&s!==void 0?s:document;return bO(i,u.createTextNode(kw))},Z6=(e,n,s,i,u,f)=>{const x=e.formatter,T=e.dom,D=Cn(uo(x.get()),J=>J!==i&&!eo(J,"removeformat")),F=U6(e,s,D);if(Cn(F,J=>!CS(e,J,i)).length>0){const J=s.cloneNode(!1);return T.add(n,J),x.remove(i,u,J,f),T.remove(J),te.some(J)}else return te.none()},AP=e=>lp(e,ip(e).replace(new RegExp(`${za}$`)," ")),vO=(e,n)=>{const s=()=>{n!==null&&!e.dom.isEmpty(n)&&Fc($e.fromDom(n)).each(i=>{fr(i)?AP(i):Nd(i,u=>fr(u)).each(u=>{fr(u)&&AP(u)})})};e.once("input",i=>{i.data&&!fm(i.data)&&(i.isComposing?e.once("compositionend",()=>{s()}):s())})},G6=(e,n,s)=>{let i;const u=e.selection,f=e.formatter.get(n);if(!f)return;const x=u.getRng();let T=x.startOffset;const F=x.startContainer.nodeValue;i=hm(e.getBody(),u.getStart());const G=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(F&&T>0&&T<F.length&&G.test(F.charAt(T))&&G.test(F.charAt(T-1))){const J=u.getBookmark();x.collapse(!0);let ee=pf(e.dom,x,f);ee=jn(ee),e.formatter.apply(n,s,ee),u.moveToBookmark(J)}else{let J=i?kP(i):null;(!i||(J==null?void 0:J.data)!==kw)&&(i=X6(e.getDoc(),vk(!0).dom),J=i.firstChild,x.insertNode(i),T=1,vO(e,i)),e.formatter.apply(n,s,i),u.setCursorLocation(J,T)}},TP=(e,n,s,i)=>{const u=e.dom,f=e.selection;let x=!1;const T=e.formatter.get(n);if(!T)return;const D=f.getRng(),F=D.startContainer,G=D.startOffset;let J=F;qt(F)&&(G!==F.data.length&&(x=!0),J=J.parentNode);const ee=[];let fe;for(;J;){if(wg(e,J,n,s,i)){fe=J;break}J.nextSibling&&(x=!0),ee.push(J),J=J.parentNode}if(fe)if(x){const ke=f.getBookmark();D.collapse(!0);let be=pf(u,D,T,!0);be=jn(be),e.formatter.remove(n,s,be,i),f.moveToBookmark(ke)}else{const ke=hm(e.getBody(),fe),be=ut(ke)?u.getParents(fe.parentNode,wt,ke):[],Ee=vk(!1).dom;j6(e,Ee,ke??fe);const Ye=Z6(e,Ee,fe,n,s,i),qe=F1([...ee,...Ye.toArray(),...be],Ee);ke&&pO(e,ke,ut(ke)),f.setCursorLocation(qe,1),vO(e,Ee),u.isEmpty(fe)&&u.remove(fe)}},eh=(e,n,s)=>{const i=e.selection,u=e.getBody();xk(e,null,s),(n===8||n===46)&&i.isCollapsed()&&i.getStart().innerHTML===kw&&xk(e,hm(u,i.getStart()),!0),(n===37||n===39)&&xk(e,hm(u,i.getStart()),!0)},q6=e=>qt(e)&&ps(e.data,za),EP=e=>{e.on("mouseup keydown",n=>{eh(e,n.keyCode,q6(e.selection.getRng().endContainer))})},yk=e=>{const n=vk(!1),s=F1(e,n.dom);return{caretContainer:n,caretPosition:At(s,0)}},wk=(e,n)=>{const{caretContainer:s,caretPosition:i}=yk(n);return w($e.fromDom(e),s),U($e.fromDom(e)),i},_P=(e,n)=>{const{caretContainer:s,caretPosition:i}=yk(n);return e.insertNode(s.dom),i},xO=(e,n)=>{if(fu(n.dom))return!1;const s=e.schema.getTextInlineElements();return Qn(s,Se(n))&&!fu(n.dom)&&!Id(n.dom)},Aw={},OP=lu(["pre"]),RP=(e,n)=>{Aw[e]||(Aw[e]=[]),Aw[e].push(n)},DP=(e,n)=>{Qn(Aw,e)&&De(Aw[e],s=>{s(n)})};RP("pre",e=>{const n=e.selection.getRng(),s=u=>f=>{const x=f.previousSibling;return OP(x)&&We(u,x)},i=(u,f)=>{const x=$e.fromDom(f),T=Ic(x).dom;U(x),$($e.fromDom(u),[$e.fromTag("br",T),$e.fromTag("br",T),...li(x)])};if(!n.collapsed){const u=e.selection.getSelectedBlocks(),f=Cn(Cn(u,OP),s(u));De(f,x=>{i(x.previousSibling,x)})}});const yd=["fontWeight","fontStyle","color","fontSize","fontFamily"],K6=e=>Wt(e.styles)&&Ie(uo(e.styles),n=>We(yd,n)),J6=e=>us(e,n=>dl(n)&&n.inline==="span"&&K6(n)),Q6=(e,n)=>{const s=e.get(n);return jt(s)?J6(s):te.none()},Ck=(e,n)=>Yc(n,At.fromRangeStart(e)).isNone(),MP=(e,n)=>lc(n,At.fromRangeEnd(e)).exists(s=>!rr(s.getNode())||lc(n,s).isSome())===!1,e$=e=>n=>$c(n)&&e.isEditable(n),t$=e=>{const n=e.getSelectedBlocks(),s=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return Ck(s,n[0])&&MP(s,n[0])?n:[];{const i=qn(n).filter(x=>Ck(s,x)).toArray(),u=Ns(n).filter(x=>MP(s,x)).toArray(),f=n.slice(1,-1);return i.concat(f).concat(u)}},yO=e=>Cn(t$(e),e$(e.dom)),Fh=e=>Cn(e.getSelectedBlocks(),e$(e.dom)),Tw=zt.each,B1=e=>An(e)&&!jc(e)&&!fu(e)&&!Id(e),Sk=(e,n)=>{for(let s=e;s;s=s[n]){if(qt(s)&&so(s.data))return e;if(An(s)&&!jc(s))return s}return e},PP=(e,n,s)=>{const i=Vp(e),u=iu(n)&&e.dom.isEditable(n),f=iu(s)&&e.dom.isEditable(s);if(u&&f){const x=Sk(n,"previousSibling"),T=Sk(s,"nextSibling");if(i.compare(x,T)){for(let D=x.nextSibling;D&&D!==T;){const F=D;D=D.nextSibling,x.appendChild(F)}return e.dom.remove(T),zt.each(zt.grep(T.childNodes),D=>{x.appendChild(D)}),x}}return s},wO=(e,n,s,i)=>{var u;if(i&&n.merge_siblings!==!1){const f=(u=PP(e,Uy(i),i))!==null&&u!==void 0?u:i;PP(e,f,Uy(f,!0))}},n$=(e,n,s)=>{if(n.clear_child_styles){const i=n.links?"*:not(a)":"*";Tw(e.select(i,s),u=>{B1(u)&&e.isEditable(u)&&Tw(n.styles,(f,x)=>{e.setStyle(u,x,"")})})}},kk=(e,n,s)=>{Tw(e.childNodes,i=>{B1(i)&&(n(i)&&s(i),i.hasChildNodes()&&kk(i,n,s))})},CO=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},LP=(e,n)=>s=>!!(s&&Xy(e,s,n)),SO=(e,n,s)=>i=>{e.setStyle(i,n,s),i.getAttribute("style")===""&&i.removeAttribute("style"),CO(e,i)},Cv=Iu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Sv=/^(src|href|style)$/,Ak=zt.each,Tk=u1,NP=e=>/^(TR|TH|TD)$/.test(e.nodeName),IP=(e,n,s)=>e.isChildOf(n,s)&&n!==s&&!e.isBlock(s),FP=(e,n,s)=>{let i=n[s?"startContainer":"endContainer"],u=n[s?"startOffset":"endOffset"];if(An(i)){const f=i.childNodes.length-1;!s&&u&&u--,i=i.childNodes[u>f?f:u]}return qt(i)&&s&&u>=i.data.length&&(i=new Tr(i,e.getBody()).next()||i),qt(i)&&!s&&u===0&&(i=new Tr(i,e.getBody()).prev()||i),i},BP=(e,n)=>{const s=n?"firstChild":"lastChild",i=e[s];return NP(e)&&i?e.nodeName==="TR"&&i[s]||i:e},kO=(e,n,s,i)=>{var u;const f=e.create(s,i);return(u=n.parentNode)===null||u===void 0||u.insertBefore(f,n),f.appendChild(n),f},HP=(e,n,s,i,u)=>{const f=$e.fromDom(n),x=$e.fromDom(e.create(i,u)),T=s?td(f):qh(f);return $(x,T),s?(w(f,x),E(x,f)):(A(f,x),M(x,f)),x.dom},$P=(e,n)=>n.links&&e.nodeName==="A",zP=(e,n,s)=>{const i=n.parentNode;let u;const f=e.dom,x=Fl(e);Ph(s)&&i===f.getRoot()&&(!s.list_block||!Tk(n,s.list_block))&&De(oo(n.childNodes),T=>{bm(e,x,T.nodeName.toLowerCase())?u?u.appendChild(T):(u=kO(f,T,x),f.setAttribs(u,of(e))):u=null}),!(UE(s)&&!Tk(s.inline,n))&&f.remove(n,!0)},Ek=(e,n,s)=>Qo(e)?{name:n,value:null}:{name:e,value:vm(n,s)},Yp=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},VP=(e,n,s,i,u)=>{let f=!1;Ak(s.styles,(x,T)=>{const{name:D,value:F}=Ek(T,x,i),G=mf(F,D);(s.remove_similar||ce(F)||!An(u)||Tk(Xy(e,u,D),G))&&e.setStyle(n,D,""),f=!0}),f&&Yp(e,n)},o$=(e,n,s)=>{n==="removeformat"?De(Fh(e.selection),i=>{De(yd,u=>e.dom.setStyle(i,u,"")),Yp(e.dom,i)}):Q6(e.formatter,n).each(i=>{De(Fh(e.selection),u=>VP(e.dom,u,i,s,null))})},Ew=(e,n,s,i,u)=>{const f=e.dom,x=Vp(e),T=e.schema;if(dl(n)&&ll(T,n.inline)&&Fd(T,i)&&i.parentElement===e.getBody())return zP(e,i,n),Cv.removed();if(!n.ceFalseOverride&&i&&f.getContentEditableParent(i)==="false"||i&&!pk(f,i,n)&&!$P(i,n))return Cv.keep();const D=i,F=n.preserve_attributes;if(dl(n)&&n.remove==="all"&&jt(F)){const G=Cn(f.getAttribs(D),J=>We(F,J.name.toLowerCase()));if(f.removeAllAttribs(D),De(G,J=>f.setAttrib(D,J.name,J.value)),G.length>0)return Cv.rename("span")}if(n.remove!=="all"){VP(f,D,n,s,u),Ak(n.attributes,(J,ee)=>{const{name:fe,value:ke}=Ek(ee,J,s);if(n.remove_similar||ce(ke)||!An(u)||Tk(f.getAttrib(u,fe),ke)){if(fe==="class"){const be=f.getAttrib(D,fe);if(be){let Ee="";if(De(be.split(/\s+/),Ye=>{/mce\-\w+/.test(Ye)&&(Ee+=(Ee?" ":"")+Ye)}),Ee){f.setAttrib(D,fe,Ee);return}}}if(Sv.test(fe)&&D.removeAttribute("data-mce-"+fe),fe==="style"&&lu(["li"])(D)&&f.getStyle(D,"list-style-type")==="none"){D.removeAttribute(fe),f.setStyle(D,"list-style-type","none");return}fe==="class"&&D.removeAttribute("className"),D.removeAttribute(fe)}}),Ak(n.classes,J=>{J=vm(J,s),(!An(u)||f.hasClass(u,J))&&f.removeClass(D,J)});const G=f.getAttribs(D);for(let J=0;J<G.length;J++){const ee=G[J].nodeName;if(!x.isAttributeInternal(ee))return Cv.keep()}}return n.remove!=="none"?(zP(e,D,n),Cv.removed()):Cv.keep()},WP=(e,n,s,i,u)=>{let f;return n.parentNode&&De(xm(e.dom,n.parentNode).reverse(),x=>{if(!f&&An(x)&&x.id!=="_start"&&x.id!=="_end"){const T=wg(e,x,s,i,u);T&&T.split!==!1&&(f=x)}}),f},UP=(e,n,s,i)=>Ew(e,n,s,i,i).fold(Dt(i),u=>(e.dom.createFragment().appendChild(i),e.dom.rename(i,u)),Dt(null)),s$=(e,n,s,i,u,f,x,T)=>{var D,F;let G,J;const ee=e.dom;if(s){const fe=s.parentNode;for(let ke=i.parentNode;ke&&ke!==fe;ke=ke.parentNode){let be=ee.clone(ke,!1);for(let Ee=0;Ee<n.length&&(be=UP(e,n[Ee],T,be),be!==null);Ee++);be&&(G&&be.appendChild(G),J||(J=be),G=be)}(!x.mixed||!ee.isBlock(s))&&(i=(D=ee.split(s,i))!==null&&D!==void 0?D:i),G&&J&&((F=u.parentNode)===null||F===void 0||F.insertBefore(G,u),J.appendChild(u),dl(x)&&wO(e,x,T,G))}return i},XP=(e,n,s,i,u)=>{const f=e.formatter.get(n),x=f[0],T=e.dom,D=e.selection,F=be=>{const Ee=WP(e,be,n,s,u);return s$(e,f,Ee,be,be,!0,x,s)},G=be=>jc(be)&&An(be)&&(be.id==="_start"||be.id==="_end"),J=be=>Ie(f,Ee=>Cg(e,Ee,s,be,be)),ee=be=>{const Ee=oo(be.childNodes),qe=J(be)||Ie(f,$t=>pk(T,be,$t)),tt=be.parentNode;if(!qe&&ut(tt)&&Zd(x)&&J(tt),x.deep&&Ee.length)for(let $t=0;$t<Ee.length;$t++)ee(Ee[$t]);De(["underline","line-through","overline"],$t=>{An(be)&&e.dom.getStyle(be,"text-decoration")===$t&&be.parentNode&&Yy(T,be.parentNode)===$t&&Cg(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:$t}},void 0,be)})},fe=be=>{const Ee=T.get(be?"_start":"_end");if(Ee){let Ye=Ee[be?"firstChild":"lastChild"];return G(Ye)&&(Ye=Ye[be?"firstChild":"lastChild"]),qt(Ye)&&Ye.data.length===0&&(Ye=be?Ee.previousSibling||Ee.nextSibling:Ee.nextSibling||Ee.previousSibling),T.remove(Ee,!0),Ye}else return null},ke=be=>{let Ee,Ye,qe=pf(T,be,f,be.collapsed);if(x.split){if(qe=jn(qe),Ee=FP(e,qe,!0),Ye=FP(e,qe),Ee!==Ye){if(Ee=BP(Ee,!0),Ye=BP(Ye,!1),IP(T,Ee,Ye)){const lt=te.from(Ee.firstChild).getOr(Ee);F(HP(T,lt,!0,"span",{id:"_start","data-mce-type":"bookmark"})),fe(!0);return}if(IP(T,Ye,Ee)){const lt=te.from(Ye.lastChild).getOr(Ye);F(HP(T,lt,!1,"span",{id:"_end","data-mce-type":"bookmark"})),fe(!1);return}Ee=kO(T,Ee,"span",{id:"_start","data-mce-type":"bookmark"}),Ye=kO(T,Ye,"span",{id:"_end","data-mce-type":"bookmark"});const tt=T.createRng();tt.setStartAfter(Ee),tt.setEndBefore(Ye),Dp(T,tt,lt=>{De(lt,$t=>{!jc($t)&&!jc($t.parentNode)&&F($t)})}),F(Ee),F(Ye),Ee=fe(!0),Ye=fe()}else Ee=Ye=F(Ee);qe.startContainer=Ee.parentNode?Ee.parentNode:Ee,qe.startOffset=T.nodeIndex(Ee),qe.endContainer=Ye.parentNode?Ye.parentNode:Ye,qe.endOffset=T.nodeIndex(Ye)+1}Dp(T,qe,tt=>{De(tt,ee)})};if(i){if(pm(i)){const be=T.createRng();be.setStartBefore(i),be.setEndAfter(i),ke(be)}else ke(i);iv(e,n,i,s);return}!D.isCollapsed()||!dl(x)||Ep(e).length?(ff(e,()=>_p(e,ke),be=>dl(x)&&Sw(e,n,s,be)),e.nodeChanged()):TP(e,n,s,u),o$(e,n,s),iv(e,n,i,s)},YP=(e,n,s,i,u)=>{(i||e.selection.isEditable())&&XP(e,n,s,i,u)},Cg=(e,n,s,i,u)=>Ew(e,n,s,i,u).fold(dt,f=>(e.dom.rename(i,f),!0),wt),AO=zt.each,jP=(e,n,s,i)=>{const u=f=>{if(iu(f)&&An(f.parentNode)&&e.isEditable(f)){const x=Yy(e,f.parentNode);e.getStyle(f,"color")&&x?e.setStyle(f,"text-decoration",x):e.getStyle(f,"text-decoration")===x&&e.setStyle(f,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(zt.walk(i,u,"childNodes"),u(i))},ZP=(e,n,s,i)=>{if(n.styles&&n.styles.backgroundColor){const u=LP(e,"fontSize");kk(i,f=>u(f)&&e.isEditable(f),SO(e,"backgroundColor",vm(n.styles.backgroundColor,s)))}},_k=(e,n,s,i)=>{if(dl(n)&&(n.inline==="sub"||n.inline==="sup")){const u=LP(e,"fontSize");kk(i,x=>u(x)&&e.isEditable(x),SO(e,"fontSize",""));const f=Cn(e.select(n.inline==="sup"?"sub":"sup",i),e.isEditable);e.remove(f,!0)}},GP=(e,n,s,i)=>{AO(n,u=>{dl(u)&&AO(e.dom.select(u.inline,i),f=>{B1(f)&&Cg(e,u,s,f,u.exact?f:null)}),n$(e.dom,u,i)})},r$=(e,n,s,i,u)=>{const f=u.parentNode;wg(e,f,s,i)&&Cg(e,n,i,u)||n.merge_with_parents&&f&&e.dom.getParent(f,x=>wg(e,x,s,i)?(Cg(e,n,i,u),!0):!1)},_w=zt.each,a$=(e,n,s,i)=>{if(L2(e)&&dl(n)&&s.parentNode){const u=Tx(e.schema),f=ma($e.fromDom(s),x=>fu(x.dom));return hr(u,i)&&Bi(e.schema,s.parentNode,{skipBogus:!1,includeZwsp:!0})&&!f}else return!1},qP=(e,n,s,i)=>{if(_w(s.styles,(u,f)=>{e.setStyle(n,f,vm(u,i))}),s.styles){const u=e.getAttrib(n,"style");u&&e.setAttrib(n,"data-mce-style",u)}},Ok=(e,n,s,i)=>{const u=e.formatter.get(n),f=u[0],x=!i&&e.selection.isCollapsed(),T=e.dom,D=e.selection,F=(ke,be=f)=>{Be(be.onformat)&&be.onformat(ke,be,s,i),qP(T,ke,be,s),_w(be.attributes,(Ee,Ye)=>{T.setAttrib(ke,Ye,vm(Ee,s))}),_w(be.classes,Ee=>{const Ye=vm(Ee,s);T.hasClass(ke,Ye)||T.addClass(ke,Ye)})},G=(ke,be)=>{let Ee=!1;return _w(ke,Ye=>Hu(Ye)?T.getContentEditable(be)==="false"&&!Ye.ceFalseOverride||ut(Ye.collapsed)&&Ye.collapsed!==x?!0:T.is(be,Ye.selector)&&!fu(be)?(F(be,Ye),Ee=!0,!1):!0:!1),Ee},J=ke=>{if(oe(ke)){const be=T.create(ke);return F(be),be}else return null},ee=(ke,be,Ee)=>{const Ye=[];let qe=!0;const tt=f.inline||f.block,lt=J(tt),$t=_t=>SS(f)&&wg(e,_t,n,s),nn=(_t,vt,Ut)=>{const Dn=d1(f)&&ov(e.schema,_t)&&bm(e,vt,tt);return Ut&&Dn},On=(_t,vt,Ut,Dn)=>{const ho=_t.nodeName.toLowerCase(),Cs=bm(e,tt,ho)&&bm(e,vt,tt),Ss=!Ee&&qt(_t)&&_b(_t.data),xr=fu(_t),Pr=!dl(f)||!ke.isBlock(_t);return(Ut||Dn)&&Cs&&!Ss&&!xr&&Pr};Dp(ke,be,_t=>{let vt;const Ut=Dn=>{let ho=!1,Cs=qe,Ss=!1;const xr=Dn.parentNode,Pr=xr.nodeName.toLowerCase(),di=ke.getContentEditable(Dn);ut(di)&&(Cs=qe,qe=di==="true",ho=!0,Ss=WE(e,Dn));const Kl=qe&&!ho;if(rr(Dn)&&!a$(e,f,Dn,Pr)){vt=null,Ph(f)&&ke.remove(Dn);return}if($t(Dn)){vt=null;return}if(nn(Dn,Pr,Kl)){const xi=ke.rename(Dn,tt);F(xi),Ye.push(xi),vt=null;return}if(Hu(f)){let xi=G(u,Dn);if(!xi&&ut(xr)&&Zd(f)&&(xi=G(u,xr)),!dl(f)||xi){vt=null;return}}ut(lt)&&On(Dn,Pr,Kl,Ss)?(vt||(vt=ke.clone(lt,!1),xr.insertBefore(vt,Dn),Ye.push(vt)),Ss&&ho&&(qe=Cs),vt.appendChild(Dn)):(vt=null,De(oo(Dn.childNodes),Ut),ho&&(qe=Cs),vt=null)};De(_t,Ut)}),f.links===!0&&De(Ye,_t=>{const vt=Ut=>{Ut.nodeName==="A"&&F(Ut,f),De(oo(Ut.childNodes),vt)};vt(_t)}),De(Ye,_t=>{const vt=ho=>{let Cs=0;return De(ho.childNodes,Ss=>{!c1(Ss)&&!jc(Ss)&&Cs++}),Cs},Ut=ho=>us(ho.childNodes,Gs).filter(Ss=>ke.getContentEditable(Ss)!=="false"&&pk(ke,Ss,f)).map(Ss=>{const xr=ke.clone(Ss,!1);return F(xr),ke.replace(xr,ho,!0),ke.remove(Ss,!0),xr}).getOr(ho),Dn=vt(_t);if((Ye.length>1||!ke.isBlock(_t))&&Dn===0){ke.remove(_t,!0);return}(dl(f)||Ph(f)&&f.wrapper)&&(!f.exact&&Dn===1&&(_t=Ut(_t)),GP(e,u,s,_t),r$(e,f,n,s,_t),ZP(ke,f,s,_t),jP(ke,f,s,_t),_k(ke,f,s,_t),wO(e,f,s,_t))})},fe=pm(i)?i:D.getNode();if(T.getContentEditable(fe)==="false"&&!WE(e,fe)){i=fe,G(u,i),pu(e,n,i,s);return}if(f){if(i)if(pm(i)){if(!G(u,i)){const ke=T.createRng();ke.setStartBefore(i),ke.setEndAfter(i),ee(T,pf(T,ke,u),!0)}}else ee(T,i,!0);else!x||!dl(f)||Ep(e).length?(D.setRng(hk(D.getRng())),ff(e,()=>{_p(e,(ke,be)=>{const Ee=be?ke:pf(T,ke,u);ee(T,Ee,!1)})},wt),e.nodeChanged()):G6(e,n,s),Q6(e.formatter,n).each(ke=>{De(yO(e.selection),be=>qP(T,be,ke,s))});DP(n,e)}pu(e,n,i,s)},TO=(e,n,s,i)=>{(i||e.selection.isEditable())&&Ok(e,n,s,i)},Rk=e=>Qn(e,"vars"),i$=(e,n)=>{e.set({}),n.on("NodeChange",s=>{_O(n,s.element,e.get())}),n.on("FormatApply FormatRemove",s=>{const i=te.from(s.node).map(u=>pm(u)?u:u.startContainer).bind(u=>An(u)?te.some(u):te.from(u.parentElement)).getOrThunk(()=>KP(n));_O(n,i,e.get())})},KP=e=>e.selection.getStart(),EO=(e,n,s,i,u)=>Cr(n,T=>{const D=e.formatter.matchNode(T,s,u??{},i);return!Wn(D)},T=>CP(e,T,s)?!0:i?!1:ut(e.formatter.matchNode(T,s,u,!0))),Dk=(e,n)=>{const s=n??KP(e);return Cn(xm(e.dom,s),i=>An(i)&&!Id(i))},_O=(e,n,s)=>{const i=Dk(e,n);Yt(s,(u,f)=>{const x=T=>{const D=EO(e,i,f,T.similar,Rk(T)?T.vars:void 0),F=D.isSome();if(T.state.get()!==F){T.state.set(F);const G=D.getOr(n);Rk(T)?T.callback(F,{node:G,format:f,parents:i}):De(T.callbacks,J=>J(F,{node:G,format:f,parents:i}))}};De([u.withSimilar,u.withoutSimilar],x),De(u.withVars,x)})},l$=(e,n,s,i,u,f)=>{const x=n.get();De(s.split(","),T=>{const D=Ts(x,T).getOrThunk(()=>{const G={withSimilar:{state:Ir(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ir(!1),similar:!1,callbacks:[]},withVars:[]};return x[T]=G,G}),F=()=>{const G=Dk(e);return EO(e,G,T,u,f).isSome()};if(Wn(f)){const G=u?D.withSimilar:D.withoutSimilar;G.callbacks.push(i),G.callbacks.length===1&&G.state.set(F())}else D.withVars.push({state:Ir(F()),similar:u,vars:f,callback:i})}),n.set(x)},c$=(e,n,s)=>{const i=e.get();De(n.split(","),u=>Ts(i,u).each(f=>{i[u]={withSimilar:{...f.withSimilar,callbacks:Cn(f.withSimilar.callbacks,x=>x!==s)},withoutSimilar:{...f.withoutSimilar,callbacks:Cn(f.withoutSimilar.callbacks,x=>x!==s)},withVars:Cn(f.withVars,x=>x.callback!==s)}})),e.set(i)},u$=(e,n,s,i,u,f)=>(l$(e,n,s,i,u,f),{unbind:()=>c$(n,s,i)}),Mk=(e,n,s,i)=>{const u=e.formatter.get(n);u&&(Sw(e,n,s,i)&&(!("toggle"in u[0])||u[0].toggle)?YP(e,n,s,i):TO(e,n,s,i))},wf=zt.explode,JP=()=>{const e={};return{addFilter:(u,f)=>{De(wf(u),x=>{Qn(e,x)||(e[x]={name:x,callbacks:[]}),e[x].callbacks.push(f)})},getFilters:()=>Dr(e),removeFilter:(u,f)=>{De(wf(u),x=>{if(Qn(e,x))if(ut(f)){const T=e[x],D=Cn(T.callbacks,F=>F!==f);D.length>0?T.callbacks=D:delete e[x]}else delete e[x]})}}},OO=(e,n)=>{De(n,s=>{e.attr(s,null)})},Oi=(e,n,s)=>{e.addNodeFilter("font",i=>{De(i,u=>{const f=n.parse(u.attr("style")),x=u.attr("color"),T=u.attr("face"),D=u.attr("size");x&&(f.color=x),T&&(f["font-family"]=T),D&&_a(D).each(F=>{f["font-size"]=s[F-1]}),u.name="span",u.attr("style",n.serialize(f)),OO(u,["color","face","size"])})})},RO=(e,n,s)=>{e.addNodeFilter("strike",i=>{const u=n.type!=="html4";De(i,f=>{if(u)f.name="s";else{const x=s.parse(f.attr("style"));x["text-decoration"]="line-through",f.name="span",f.attr("style",s.serialize(x))}})})},DO=(e,n,s)=>{var i;const u=Yg();n.convert_fonts_to_spans&&Oi(e,u,zt.explode((i=n.font_size_legacy_values)!==null&&i!==void 0?i:"")),RO(e,s,u)},Om=(e,n,s)=>{n.inline_styles&&DO(e,n,s)},QP=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),eL=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},kv=e=>{const[n,...s]=e.split(","),i=s.join(","),u=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(u){const f=u[2]===";base64",x=f?eL(i):decodeURIComponent(i);return te.some({type:u[1],data:x,base64Encoded:f})}else return te.none()},tL=(e,n,s=!0)=>{let i=n;if(s)try{i=atob(n)}catch{return te.none()}const u=new Uint8Array(i.length);for(let f=0;f<u.length;f++)u[f]=i.charCodeAt(f);return te.some(new Blob([u],{type:e}))},d$=e=>new Promise((n,s)=>{kv(e).bind(({type:i,data:u,base64Encoded:f})=>tL(i,u,f)).fold(()=>s("Invalid data URI"),n)}),H1=e=>co(e,"blob:")?QP(e):co(e,"data:")?d$(e):Promise.reject("Unknown URI format"),nL=e=>new Promise((n,s)=>{const i=new FileReader;i.onloadend=()=>{n(i.result)},i.onerror=()=>{var u;s((u=i.error)===null||u===void 0?void 0:u.message)},i.readAsDataURL(e)});let Av=0;const h$=e=>"blobid"+Av++,Rm=(e,n,s)=>kv(e).bind(({data:i,type:u,base64Encoded:f})=>{if(n&&!f)return te.none();{const x=f?i:btoa(i);return s(x,u)}}),oL=(e,n,s)=>{const i=e.create(h$(),n,s);return e.add(i),i},wd=(e,n,s=!1)=>Rm(n,s,(i,u)=>te.from(e.getByData(i,u)).orThunk(()=>tL(u,i).map(f=>oL(e,f,i)))),Ow=(e,n)=>{const s=()=>Promise.reject("Invalid data URI");if(co(n,"blob:")){const i=e.getByUri(n);return ut(i)?Promise.resolve(i):H1(n).then(u=>nL(u).then(f=>Rm(f,!1,x=>te.some(oL(e,u,x))).getOrThunk(s)))}else return co(n,"data:")?wd(e,n).fold(s,i=>Promise.resolve(i)):Promise.reject("Unknown image data format")},MO=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,PO=e=>te.from(e.match(MO)).bind(n=>Xs(n,1)).map(n=>co(n,"www.")?n.substring(4):n),sL=(e,n)=>{te.from(e.attr("src")).bind(PO).forall(s=>!We(n,s))&&e.attr("sandbox","")},$1=(e,n)=>co(e,`${n}/`),g$=e=>Wn(e)?"iframe":$1(e,"image")?"img":$1(e,"video")?"video":$1(e,"audio")?"audio":"iframe",Bh=({type:e,src:n,width:s,height:i}={},u,f)=>{const x=g$(e),T=new Gc(x,1);return T.attr(x==="audio"?{src:n}:{src:n,width:s,height:i}),(x==="audio"||x==="video")&&T.attr("controls",""),x==="iframe"&&u&&sL(T,f),T},Pk=e=>ut(e.attr("data-mce-bogus")),rL=e=>e.attr("src")===In.transparentSrc||ut(e.attr("data-mce-placeholder")),LO=(e,n)=>{const{blob_cache:s}=n;if(s){const i=u=>{const f=u.attr("src");rL(u)||Pk(u)||no(f)||wd(s,f,!0).each(x=>{u.attr("src",x.blobUri())})};e.addAttributeFilter("src",u=>De(u,i))}},NO=(e,n)=>{var s,i;const u=e.schema;e.addAttributeFilter("href",D=>{let F=D.length;const G=ee=>ee.split(" ").filter(ke=>ke.length>0).concat(["noopener"]).sort().join(" "),J=ee=>{const fe=ee?zt.trim(ee):"";return/\b(noopener)\b/g.test(fe)?fe:G(fe)};if(!n.allow_unsafe_link_target)for(;F--;){const ee=D[F];ee.name==="a"&&ee.attr("target")==="_blank"&&ee.attr("rel",J(ee.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",D=>{let F=D.length,G,J,ee,fe;for(;F--;)if(fe=D[F],fe.name==="a"&&fe.firstChild&&!fe.attr("href"))for(ee=fe.parent,G=fe.lastChild;G&&ee;)J=G.prev,ee.insert(G,fe),G=J}),n.fix_list_elements&&e.addNodeFilter("ul,ol",D=>{let F=D.length,G,J;for(;F--;)if(G=D[F],J=G.parent,J&&(J.name==="ul"||J.name==="ol"))if(G.prev&&G.prev.name==="li")G.prev.append(G);else{const ee=new Gc("li",1);ee.attr("style","list-style-type: none"),G.wrap(ee)}});const f=u.getValidClasses();n.validate&&f&&e.addAttributeFilter("class",D=>{var F;let G=D.length;for(;G--;){const J=D[G],ee=(F=J.attr("class"))!==null&&F!==void 0?F:"",fe=zt.explode(ee," ");let ke="";for(let be=0;be<fe.length;be++){const Ee=fe[be];let Ye=!1,qe=f["*"];qe&&qe[Ee]&&(Ye=!0),qe=f[J.name],!Ye&&qe&&qe[Ee]&&(Ye=!0),Ye&&(ke&&(ke+=" "),ke+=Ee)}ke.length||(ke=null),J.attr("class",ke)}}),LO(e,n);const x=(s=n.sandbox_iframes)!==null&&s!==void 0?s:!1,T=yi((i=n.sandbox_iframes_exclusions)!==null&&i!==void 0?i:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",D=>De(D,F=>{F.replace(Bh({type:F.attr("type"),src:F.name==="object"?F.attr("data"):F.attr("src"),width:F.attr("width"),height:F.attr("height")},x,T))})),x&&e.addNodeFilter("iframe",D=>De(D,F=>sL(F,T)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:jp,setPrototypeOf:Lk,isFrozen:f$,getPrototypeOf:aL,getOwnPropertyDescriptor:m$}=Object;let{freeze:Xu,seal:Hh,create:iL}=Object,{apply:Tv,construct:IO}=typeof Reflect<"u"&&Reflect;Xu||(Xu=function(n){return n}),Hh||(Hh=function(n){return n}),Tv||(Tv=function(n,s,i){return n.apply(s,i)}),IO||(IO=function(n,s){return new n(...s)});const Rw=th(Array.prototype.forEach),Nk=th(Array.prototype.pop),Dw=th(Array.prototype.push),Mw=th(String.prototype.toLowerCase),Ik=th(String.prototype.toString),lL=th(String.prototype.match),Pw=th(String.prototype.replace),p$=th(String.prototype.indexOf),b$=th(String.prototype.trim),Sg=th(Object.prototype.hasOwnProperty),Yu=th(RegExp.prototype.test),Lw=v$(TypeError);function th(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),u=1;u<s;u++)i[u-1]=arguments[u];return Tv(e,n,i)}}function v$(e){return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return IO(e,s)}}function ca(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mw;Lk&&Lk(e,null);let i=n.length;for(;i--;){let u=n[i];if(typeof u=="string"){const f=s(u);f!==u&&(f$(n)||(n[i]=f),u=f)}e[u]=!0}return e}function x$(e){for(let n=0;n<e.length;n++)Sg(e,n)||(e[n]=null);return e}function Ev(e){const n=iL(null);for(const[s,i]of jp(e))Sg(e,s)&&(Array.isArray(i)?n[s]=x$(i):i&&typeof i=="object"&&i.constructor===Object?n[s]=Ev(i):n[s]=i);return n}function Nw(e,n){for(;e!==null;){const i=m$(e,n);if(i){if(i.get)return th(i.get);if(typeof i.value=="function")return th(i.value)}e=aL(e)}function s(){return null}return s}const FO=Xu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),BO=Xu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Zp=Xu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),y$=Xu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),HO=Xu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),w$=Xu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cL=Xu(["#text"]),$O=Xu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),zO=Xu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),uL=Xu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Fk=Xu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),C$=Hh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),S$=Hh(/<%[\w\W]*|[\w\W]*%>/gm),k$=Hh(/\${[\w\W]*}/gm),A$=Hh(/^data-[\-\w.\u00B7-\uFFFF]/),T$=Hh(/^aria-[\-\w]+$/),dL=Hh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),E$=Hh(/^(?:\w+script|data):/i),VO=Hh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),WO=Hh(/^html$/i),VY=Hh(/^[a-z][.\w]*(-[.\w]+)+$/i);var z1=Object.freeze({__proto__:null,MUSTACHE_EXPR:C$,ERB_EXPR:S$,TMPLIT_EXPR:k$,DATA_ATTR:A$,ARIA_ATTR:T$,IS_ALLOWED_URI:dL,IS_SCRIPT_OR_DATA:E$,ATTR_WHITESPACE:VO,DOCTYPE_NAME:WO,CUSTOM_ELEMENT:VY});const Iw={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},WY=function(){return typeof window>"u"?null:window},UY=function(n,s){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let i=null;const u="data-tt-policy-suffix";s&&s.hasAttribute(u)&&(i=s.getAttribute(u));const f="dompurify"+(i?"#"+i:"");try{return n.createPolicy(f,{createHTML(x){return x},createScriptURL(x){return x}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}};function _$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WY();const n=Ls=>_$(Ls);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==Iw.document)return n.isSupported=!1,n;let{document:s}=e;const i=s,u=i.currentScript,{DocumentFragment:f,HTMLTemplateElement:x,Node:T,Element:D,NodeFilter:F,NamedNodeMap:G=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:J,DOMParser:ee,trustedTypes:fe}=e,ke=D.prototype,be=Nw(ke,"cloneNode"),Ee=Nw(ke,"remove"),Ye=Nw(ke,"nextSibling"),qe=Nw(ke,"childNodes"),tt=Nw(ke,"parentNode");if(typeof x=="function"){const Ls=s.createElement("template");Ls.content&&Ls.content.ownerDocument&&(s=Ls.content.ownerDocument)}let lt,$t="";const{implementation:nn,createNodeIterator:On,createDocumentFragment:_t,getElementsByTagName:vt}=s,{importNode:Ut}=i;let Dn={};n.isSupported=typeof jp=="function"&&typeof tt=="function"&&nn&&nn.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ho,ERB_EXPR:Cs,TMPLIT_EXPR:Ss,DATA_ATTR:xr,ARIA_ATTR:Pr,IS_SCRIPT_OR_DATA:di,ATTR_WHITESPACE:Kl,CUSTOM_ELEMENT:xi}=z1;let{IS_ALLOWED_URI:fn}=z1,io=null;const ir=ca({},[...FO,...BO,...Zp,...HO,...cL]);let Tn=null;const So=ca({},[...$O,...zO,...uL,...Fk]);let ko=Object.seal(iL(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yn=null,ks=null,Os=!0,Ui=!0,Yr=!1,Jl=!0,wu=!1,Mg=!0,Tc=!1,Ed=!1,dh=!1,dc=!1,Cu=!1,ao=!1,Js=!0,oi=!1;const Xi="user-content-";let pl=!0,Yi=!1,Wa={},qa=null;const Qc=ca({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let hh=null;const Pg=ca({},["audio","video","img","source","image","track"]);let Uh=null;const t0=ca({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),db="http://www.w3.org/1998/Math/MathML",Fm="http://www.w3.org/2000/svg",Gu="http://www.w3.org/1999/xhtml";let Bm=Gu,Sx=!1,n0=null;const DT=ca({},[db,Fm,Gu],Ik);let o0=null;const w4=["application/xhtml+xml","text/html"],dH="text/html";let hc=null,gh=null;const MT=s.createElement("form"),bt=function(xt){return xt instanceof RegExp||xt instanceof Function},pt=function(){let xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(gh&&gh===xt)){if((!xt||typeof xt!="object")&&(xt={}),xt=Ev(xt),o0=w4.indexOf(xt.PARSER_MEDIA_TYPE)===-1?dH:xt.PARSER_MEDIA_TYPE,hc=o0==="application/xhtml+xml"?Ik:Mw,io=Sg(xt,"ALLOWED_TAGS")?ca({},xt.ALLOWED_TAGS,hc):ir,Tn=Sg(xt,"ALLOWED_ATTR")?ca({},xt.ALLOWED_ATTR,hc):So,n0=Sg(xt,"ALLOWED_NAMESPACES")?ca({},xt.ALLOWED_NAMESPACES,Ik):DT,Uh=Sg(xt,"ADD_URI_SAFE_ATTR")?ca(Ev(t0),xt.ADD_URI_SAFE_ATTR,hc):t0,hh=Sg(xt,"ADD_DATA_URI_TAGS")?ca(Ev(Pg),xt.ADD_DATA_URI_TAGS,hc):Pg,qa=Sg(xt,"FORBID_CONTENTS")?ca({},xt.FORBID_CONTENTS,hc):Qc,yn=Sg(xt,"FORBID_TAGS")?ca({},xt.FORBID_TAGS,hc):{},ks=Sg(xt,"FORBID_ATTR")?ca({},xt.FORBID_ATTR,hc):{},Wa=Sg(xt,"USE_PROFILES")?xt.USE_PROFILES:!1,Os=xt.ALLOW_ARIA_ATTR!==!1,Ui=xt.ALLOW_DATA_ATTR!==!1,Yr=xt.ALLOW_UNKNOWN_PROTOCOLS||!1,Jl=xt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,wu=xt.SAFE_FOR_TEMPLATES||!1,Mg=xt.SAFE_FOR_XML!==!1,Tc=xt.WHOLE_DOCUMENT||!1,dc=xt.RETURN_DOM||!1,Cu=xt.RETURN_DOM_FRAGMENT||!1,ao=xt.RETURN_TRUSTED_TYPE||!1,dh=xt.FORCE_BODY||!1,Js=xt.SANITIZE_DOM!==!1,oi=xt.SANITIZE_NAMED_PROPS||!1,pl=xt.KEEP_CONTENT!==!1,Yi=xt.IN_PLACE||!1,fn=xt.ALLOWED_URI_REGEXP||dL,Bm=xt.NAMESPACE||Gu,ko=xt.CUSTOM_ELEMENT_HANDLING||{},xt.CUSTOM_ELEMENT_HANDLING&&bt(xt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ko.tagNameCheck=xt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),xt.CUSTOM_ELEMENT_HANDLING&&bt(xt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ko.attributeNameCheck=xt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),xt.CUSTOM_ELEMENT_HANDLING&&typeof xt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ko.allowCustomizedBuiltInElements=xt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),wu&&(Ui=!1),Cu&&(dc=!0),Wa&&(io=ca({},cL),Tn=[],Wa.html===!0&&(ca(io,FO),ca(Tn,$O)),Wa.svg===!0&&(ca(io,BO),ca(Tn,zO),ca(Tn,Fk)),Wa.svgFilters===!0&&(ca(io,Zp),ca(Tn,zO),ca(Tn,Fk)),Wa.mathMl===!0&&(ca(io,HO),ca(Tn,uL),ca(Tn,Fk))),xt.ADD_TAGS&&(io===ir&&(io=Ev(io)),ca(io,xt.ADD_TAGS,hc)),xt.ADD_ATTR&&(Tn===So&&(Tn=Ev(Tn)),ca(Tn,xt.ADD_ATTR,hc)),xt.ADD_URI_SAFE_ATTR&&ca(Uh,xt.ADD_URI_SAFE_ATTR,hc),xt.FORBID_CONTENTS&&(qa===Qc&&(qa=Ev(qa)),ca(qa,xt.FORBID_CONTENTS,hc)),pl&&(io["#text"]=!0),Tc&&ca(io,["html","head","body"]),io.table&&(ca(io,["tbody"]),delete yn.tbody),xt.TRUSTED_TYPES_POLICY){if(typeof xt.TRUSTED_TYPES_POLICY.createHTML!="function")throw Lw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof xt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Lw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');lt=xt.TRUSTED_TYPES_POLICY,$t=lt.createHTML("")}else lt===void 0&&(lt=UY(fe,u)),lt!==null&&typeof $t=="string"&&($t=lt.createHTML(""));Xu&&Xu(xt),gh=xt}},mn=ca({},["mi","mo","mn","ms","mtext"]),sn=ca({},["annotation-xml"]),Co=ca({},["title","style","font","a","script"]),lr=ca({},[...BO,...Zp,...y$]),si=ca({},[...HO,...w$]),Lg=function(xt){let bo=tt(xt);(!bo||!bo.tagName)&&(bo={namespaceURI:Bm,tagName:"template"});const xs=Mw(xt.tagName),t=Mw(bo.tagName);return n0[xt.namespaceURI]?xt.namespaceURI===Fm?bo.namespaceURI===Gu?xs==="svg":bo.namespaceURI===db?xs==="svg"&&(t==="annotation-xml"||mn[t]):!!lr[xs]:xt.namespaceURI===db?bo.namespaceURI===Gu?xs==="math":bo.namespaceURI===Fm?xs==="math"&&sn[t]:!!si[xs]:xt.namespaceURI===Gu?bo.namespaceURI===Fm&&!sn[t]||bo.namespaceURI===db&&!mn[t]?!1:!si[xs]&&(Co[xs]||!lr[xs]):!!(o0==="application/xhtml+xml"&&n0[xt.namespaceURI]):!1},fh=function(xt){Dw(n.removed,{element:xt});try{tt(xt).removeChild(xt)}catch{Ee(xt)}},s0=function(xt,bo){try{Dw(n.removed,{attribute:bo.getAttributeNode(xt),from:bo})}catch{Dw(n.removed,{attribute:null,from:bo})}if(bo.removeAttribute(xt),xt==="is"&&!Tn[xt])if(dc||Cu)try{fh(bo)}catch{}else try{bo.setAttribute(xt,"")}catch{}},hH=function(xt){let bo=null,xs=null;if(dh)xt="<remove></remove>"+xt;else{const l=lL(xt,/^[\r\n\t ]+/);xs=l&&l[0]}o0==="application/xhtml+xml"&&Bm===Gu&&(xt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+xt+"</body></html>");const t=lt?lt.createHTML(xt):xt;if(Bm===Gu)try{bo=new ee().parseFromString(t,o0)}catch{}if(!bo||!bo.documentElement){bo=nn.createDocument(Bm,"template",null);try{bo.documentElement.innerHTML=Sx?$t:t}catch{}}const r=bo.body||bo.documentElement;return xt&&xs&&r.insertBefore(s.createTextNode(xs),r.childNodes[0]||null),Bm===Gu?vt.call(bo,Tc?"html":"body")[0]:Tc?bo.documentElement:r},gH=function(xt){return On.call(xt.ownerDocument||xt,xt,F.SHOW_ELEMENT|F.SHOW_COMMENT|F.SHOW_TEXT|F.SHOW_PROCESSING_INSTRUCTION|F.SHOW_CDATA_SECTION,null)},C4=function(xt){return xt instanceof J&&(typeof xt.nodeName!="string"||typeof xt.textContent!="string"||typeof xt.removeChild!="function"||!(xt.attributes instanceof G)||typeof xt.removeAttribute!="function"||typeof xt.setAttribute!="function"||typeof xt.namespaceURI!="string"||typeof xt.insertBefore!="function"||typeof xt.hasChildNodes!="function")},fH=function(xt){return typeof T=="function"&&xt instanceof T},Hm=function(xt,bo,xs){Dn[xt]&&Rw(Dn[xt],t=>{t.call(n,bo,xs,gh)})},mH=function(xt){let bo=null;if(Hm("beforeSanitizeElements",xt,null),C4(xt))return fh(xt),!0;const xs=hc(xt.nodeName);if(Hm("uponSanitizeElement",xt,{tagName:xs,allowedTags:io}),xt.hasChildNodes()&&!fH(xt.firstElementChild)&&Yu(/<[/\w]/g,xt.innerHTML)&&Yu(/<[/\w]/g,xt.textContent)||xt.nodeType===Iw.progressingInstruction||Mg&&xt.nodeType===Iw.comment&&Yu(/<[/\w]/g,xt.data))return fh(xt),!0;if(!io[xs]||yn[xs]){if(!yn[xs]&&bH(xs)&&(ko.tagNameCheck instanceof RegExp&&Yu(ko.tagNameCheck,xs)||ko.tagNameCheck instanceof Function&&ko.tagNameCheck(xs)))return!1;if(pl&&!qa[xs]){const t=tt(xt)||xt.parentNode,r=qe(xt)||xt.childNodes;if(r&&t){const l=r.length;for(let h=l-1;h>=0;--h){const p=be(r[h],!0);p.__removalCount=(xt.__removalCount||0)+1,t.insertBefore(p,Ye(xt))}}}return fh(xt),!0}return xt instanceof D&&!Lg(xt)||(xs==="noscript"||xs==="noembed"||xs==="noframes")&&Yu(/<\/no(script|embed|frames)/i,xt.innerHTML)?(fh(xt),!0):(wu&&xt.nodeType===Iw.text&&(bo=xt.textContent,Rw([ho,Cs,Ss],t=>{bo=Pw(bo,t," ")}),xt.textContent!==bo&&(Dw(n.removed,{element:xt.cloneNode()}),xt.textContent=bo)),Hm("afterSanitizeElements",xt,null),!1)},pH=function(xt,bo,xs){if(Js&&(bo==="id"||bo==="name")&&(xs in s||xs in MT))return!1;if(!(Ui&&!ks[bo]&&Yu(xr,bo))){if(!(Os&&Yu(Pr,bo))){if(!Tn[bo]||ks[bo]){if(!(bH(xt)&&(ko.tagNameCheck instanceof RegExp&&Yu(ko.tagNameCheck,xt)||ko.tagNameCheck instanceof Function&&ko.tagNameCheck(xt))&&(ko.attributeNameCheck instanceof RegExp&&Yu(ko.attributeNameCheck,bo)||ko.attributeNameCheck instanceof Function&&ko.attributeNameCheck(bo))||bo==="is"&&ko.allowCustomizedBuiltInElements&&(ko.tagNameCheck instanceof RegExp&&Yu(ko.tagNameCheck,xs)||ko.tagNameCheck instanceof Function&&ko.tagNameCheck(xs))))return!1}else if(!Uh[bo]){if(!Yu(fn,Pw(xs,Kl,""))){if(!((bo==="src"||bo==="xlink:href"||bo==="href")&&xt!=="script"&&p$(xs,"data:")===0&&hh[xt])){if(!(Yr&&!Yu(di,Pw(xs,Kl,"")))){if(xs)return!1}}}}}}return!0},bH=function(xt){return xt!=="annotation-xml"&&lL(xt,xi)},S4=function(xt){Hm("beforeSanitizeAttributes",xt,null);const{attributes:bo}=xt;if(!bo)return;const xs={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Tn};let t=bo.length;for(;t--;){const r=bo[t],{name:l,namespaceURI:h,value:p}=r,y=hc(l);let S=l==="value"?p:b$(p);const R=S;if(xs.attrName=y,xs.attrValue=S,xs.keepAttr=!0,xs.forceKeepAttr=void 0,Hm("uponSanitizeAttribute",xt,xs),S=xs.attrValue,xs.forceKeepAttr)continue;if(!xs.keepAttr){s0(l,xt);continue}if(!Jl&&Yu(/\/>/i,S)){s0(l,xt);continue}wu&&Rw([ho,Cs,Ss],H=>{S=Pw(S,H," ")});const I=hc(xt.nodeName);if(!pH(I,y,S)){s0(l,xt);continue}if(oi&&(y==="id"||y==="name")&&(s0(l,xt),S=Xi+S),Mg&&Yu(/((--!?|])>)|<\/(style|title)/i,S)){s0(l,xt);continue}if(lt&&typeof fe=="object"&&typeof fe.getAttributeType=="function"&&!h)switch(fe.getAttributeType(I,y)){case"TrustedHTML":{S=lt.createHTML(S);break}case"TrustedScriptURL":{S=lt.createScriptURL(S);break}}if(S!==R)try{h?xt.setAttributeNS(h,l,S):xt.setAttribute(l,S),C4(xt)?fh(xt):Nk(n.removed)}catch{}}Hm("afterSanitizeAttributes",xt,null)},vH=function Ls(xt){let bo=null;const xs=gH(xt);for(Hm("beforeSanitizeShadowDOM",xt,null);bo=xs.nextNode();)Hm("uponSanitizeShadowNode",bo,null),!mH(bo)&&(bo.content instanceof f&&Ls(bo.content),S4(bo));Hm("afterSanitizeShadowDOM",xt,null)};return n.sanitize=function(Ls){let xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bo=null,xs=null,t=null,r=null;if(Sx=!Ls,Sx&&(Ls="<!-->"),typeof Ls!="string"&&!fH(Ls))if(typeof Ls.toString=="function"){if(Ls=Ls.toString(),typeof Ls!="string")throw Lw("dirty is not a string, aborting")}else throw Lw("toString is not a function");if(!n.isSupported)return Ls;if(Ed||pt(xt),n.removed=[],typeof Ls=="string"&&(Yi=!1),Yi){if(Ls.nodeName){const p=hc(Ls.nodeName);if(!io[p]||yn[p])throw Lw("root node is forbidden and cannot be sanitized in-place")}}else if(Ls instanceof T)bo=hH("<!---->"),xs=bo.ownerDocument.importNode(Ls,!0),xs.nodeType===Iw.element&&xs.nodeName==="BODY"||xs.nodeName==="HTML"?bo=xs:bo.appendChild(xs);else{if(!dc&&!wu&&!Tc&&Ls.indexOf("<")===-1)return lt&&ao?lt.createHTML(Ls):Ls;if(bo=hH(Ls),!bo)return dc?null:ao?$t:""}bo&&dh&&fh(bo.firstChild);const l=gH(Yi?Ls:bo);for(;t=l.nextNode();)mH(t)||(t.content instanceof f&&vH(t.content),S4(t));if(Yi)return Ls;if(dc){if(Cu)for(r=_t.call(bo.ownerDocument);bo.firstChild;)r.appendChild(bo.firstChild);else r=bo;return(Tn.shadowroot||Tn.shadowrootmode)&&(r=Ut.call(i,r,!0)),r}let h=Tc?bo.outerHTML:bo.innerHTML;return Tc&&io["!doctype"]&&bo.ownerDocument&&bo.ownerDocument.doctype&&bo.ownerDocument.doctype.name&&Yu(WO,bo.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+bo.ownerDocument.doctype.name+`>
`+h),wu&&Rw([ho,Cs,Ss],p=>{h=Pw(h,p," ")}),lt&&ao?lt.createHTML(h):h},n.setConfig=function(){let Ls=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pt(Ls),Ed=!0},n.clearConfig=function(){gh=null,Ed=!1},n.isValidAttribute=function(Ls,xt,bo){gh||pt({});const xs=hc(Ls),t=hc(xt);return pH(xs,t,bo)},n.addHook=function(Ls,xt){typeof xt=="function"&&(Dn[Ls]=Dn[Ls]||[],Dw(Dn[Ls],xt))},n.removeHook=function(Ls){if(Dn[Ls])return Nk(Dn[Ls])},n.removeHooks=function(Ls){Dn[Ls]&&(Dn[Ls]=[])},n.removeAllHooks=function(){Dn={}},n}var hL=_$();const Cd=zt.each,Bk=zt.trim,Gp=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],qp={ftp:21,http:80,https:443,mailto:25},gL=["img","video"],Fw=(e,n)=>ut(e)?!e:ut(n)?!We(gL,n):!0,fL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},vi=(e,n,s)=>{const i=fL(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(i)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(i)?Fw(e.allow_svg_data_urls,s)&&/^data:image\/svg\+xml/i.test(i):/^data:/i.test(i)};class $h{static parseDataUri(n){let s;const i=decodeURIComponent(n).split(","),u=/data:([^;]+)/.exec(i[0]);return u&&(s=u[1]),{type:s,data:i[1]}}static isDomSafe(n,s,i={}){if(i.allow_script_urls)return!0;{const u=Wg.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!vi(i,u,s)}}static getDocumentBaseUrl(n){var s;let i;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?i=(s=n.href)!==null&&s!==void 0?s:"":i=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(i)&&(i=i.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(i)||(i+="/")),i}constructor(n,s={}){this.path="",this.directory="",n=Bk(n),this.settings=s;const i=s.base_uri,u=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){u.source=n;return}const f=n.indexOf("//")===0;if(n.indexOf("/")===0&&!f&&(n=(i&&i.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const T=i?i.path:new $h(document.location.href).directory;if((i==null?void 0:i.protocol)==="")n="//mce_host"+u.toAbsPath(T,n);else{const D=/([^#?]*)([#?]?.*)/.exec(n);D&&(n=(i&&i.protocol||"http")+"://mce_host"+u.toAbsPath(T,D[1])+D[2])}}n=n.replace(/@@/g,"(mce_at)");const x=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);x&&Cd(Gp,(T,D)=>{let F=x[D];F&&(F=F.replace(/\(mce_at\)/g,"@@")),u[T]=F}),i&&(u.protocol||(u.protocol=i.protocol),u.userInfo||(u.userInfo=i.userInfo),!u.port&&u.host==="mce_host"&&(u.port=i.port),(!u.host||u.host==="mce_host")&&(u.host=i.host),u.source=""),f&&(u.protocol="")}setPath(n){const s=/^(.*?)\/?(\w+)?$/.exec(n);s&&(this.path=s[0],this.directory=s[1],this.file=s[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const s=new $h(n,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const i=this.getURI(),u=s.getURI();if(i===u||i.charAt(i.length-1)==="/"&&i.substr(0,i.length-1)===u)return i;let f=this.toRelPath(this.path,s.path);return s.query&&(f+="?"+s.query),s.anchor&&(f+="#"+s.anchor),f}toAbsolute(n,s){const i=new $h(n,{base_uri:this});return i.getURI(s&&this.isSameOrigin(i))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const s=this.protocol?qp[this.protocol]:null;if(s&&(this.port||s)==(n.port||s))return!0}return!1}toRelPath(n,s){let i=0,u="",f,x;const T=n.substring(0,n.lastIndexOf("/")).split("/"),D=s.split("/");if(T.length>=D.length){for(f=0,x=T.length;f<x;f++)if(f>=D.length||T[f]!==D[f]){i=f+1;break}}if(T.length<D.length){for(f=0,x=D.length;f<x;f++)if(f>=T.length||T[f]!==D[f]){i=f+1;break}}if(i===1)return s;for(f=0,x=T.length-(i-1);f<x;f++)u+="../";for(f=i-1,x=D.length;f<x;f++)f!==i-1?u+="/"+D[f]:u+=D[f];return u}toAbsPath(n,s){let i=0;const u=/\/$/.test(s)?"/":"",f=n.split("/"),x=s.split("/"),T=[];Cd(f,J=>{J&&T.push(J)});const D=[];for(let J=x.length-1;J>=0;J--)if(!(x[J].length===0||x[J]===".")){if(x[J]===".."){i++;continue}if(i>0){i--;continue}D.push(x[J])}const F=T.length-i;let G;return F<=0?G=ds(D).join("/"):G=T.slice(0,F).join("/")+"/"+ds(D).join("/"),G.indexOf("/")!==0&&(G="/"+G),u&&G.lastIndexOf("/")!==G.length-1&&(G+=u),G}getURI(n=!1){let s;return(!this.source||n)&&(s="",n||(this.protocol?s+=this.protocol+"://":s+="//",this.userInfo&&(s+=this.userInfo+"@"),this.host&&(s+=this.host),this.port&&(s+=":"+this.port)),this.path&&(s+=this.path),this.query&&(s+="?"+this.query),this.anchor&&(s+="#"+this.anchor),this.source=s),this.source}}const O$=zt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Kp="data-mce-type";let _v=0;const Ov=(e,n,s,i,u)=>{var f,x,T,D;const F=n.validate,G=s.getSpecialElements();e.nodeType===bs&&!n.allow_conditional_comments&&/^\[if/i.test((f=e.nodeValue)!==null&&f!==void 0?f:"")&&(e.nodeValue=" "+e.nodeValue);const J=(x=u==null?void 0:u.tagName)!==null&&x!==void 0?x:e.nodeName.toLowerCase();if(i!=="html"&&s.isValid(i)){ut(u)&&(u.allowedTags[J]=!0);return}if(e.nodeType!==ja||J==="body")return;const ee=$e.fromDom(e),fe=Nr(ee,Kp),ke=Pa(ee,"data-mce-bogus");if(!fe&&oe(ke)){ke==="all"?U(ee):ne(ee);return}const be=s.getElementRule(J);if(F&&!be){Qn(G,J)?U(ee):ne(ee);return}else ut(u)&&(u.allowedTags[J]=!0);if(F&&be&&!fe){if(De((T=be.attributesForced)!==null&&T!==void 0?T:[],Ee=>{fa(ee,Ee.name,Ee.value==="{$uid}"?`mce_${_v++}`:Ee.value)}),De((D=be.attributesDefault)!==null&&D!==void 0?D:[],Ee=>{Nr(ee,Ee.name)||fa(ee,Ee.name,Ee.value==="{$uid}"?`mce_${_v++}`:Ee.value)}),be.attributesRequired&&!Ie(be.attributesRequired,Ee=>Nr(ee,Ee))){ne(ee);return}if(be.removeEmptyAttrs&&$l(ee)){ne(ee);return}be.outputName&&be.outputName!==J&&ZC(ee,be.outputName)}},UO=(e,n,s,i,u)=>{const f=e.tagName.toLowerCase(),{attrName:x,attrValue:T}=u;u.keepAttr=Hk(n,s,i,f,x,T),u.keepAttr?(u.allowedAttributes[x]=!0,YO(x,s)&&(u.attrValue=x),n.allow_svg_data_urls&&co(T,"data:image/svg+xml")&&(u.forceKeepAttr=!0)):XO(e,x)&&(u.forceKeepAttr=!0)},Hk=(e,n,s,i,u,f)=>s!=="html"&&!sa(i)?!0:!(u in O$&&vi(e,f,i))&&(!e.validate||n.isValid(i,u)||co(u,"data-")||co(u,"aria-")),XO=(e,n)=>e.hasAttribute(Kp)&&(n==="id"||n==="class"||n==="style"),YO=(e,n)=>e in n.getBoolAttrs(),R$=(e,n,s,i)=>{const{attributes:u}=e;for(let f=u.length-1;f>=0;f--){const x=u[f],T=x.name,D=x.value;!Hk(n,s,i,e.tagName.toLowerCase(),T,D)&&!XO(e,T)?e.removeAttribute(T):YO(T,s)&&e.setAttribute(T,T)}},D$=(e,n,s)=>{const i=hL();return i.addHook("uponSanitizeElement",(u,f)=>{Ov(u,e,n,s.track(u),f)}),i.addHook("uponSanitizeAttribute",(u,f)=>{UO(u,e,n,s.current(),f)}),i},mL=(e,n)=>{const i={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return i.PARSER_MEDIA_TYPE=n,e.allow_script_urls?i.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(i.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),i},M$=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(i=>`xlink:${i}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};hL().sanitize(e,s)},P$=(e,n)=>{const s={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},i=hL();i.addHook("uponSanitizeElement",(u,f)=>{var x;const T=(x=f.tagName)!==null&&x!==void 0?x:u.nodeName.toLowerCase(),D=n.allow_mathml_annotation_encodings;if(T==="annotation"&&jt(D)&&D.length>0){const F=u.getAttribute("encoding");oe(F)&&We(D,F)&&(f.allowedTags[T]=!0)}}),i.sanitize(e,s)},L$=e=>n=>{const s=yh(n);if(s==="svg")M$(n);else if(s==="math")P$(n,e);else throw new Error("Not a namespace element")},N$=(e,n)=>{const s=z();if(e.sanitize){const i=D$(e,n,s);return{sanitizeHtmlElement:(f,x)=>{i.sanitize(f,mL(e,x)),i.removed=[],s.reset()},sanitizeNamespaceElement:L$(e)}}else return{sanitizeHtmlElement:(f,x)=>{const T=document.createNodeIterator(f,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let D;for(;D=T.nextNode();){const F=s.track(D);Ov(D,e,n,F),An(D)&&R$(D,e,n,F)}s.reset()},sanitizeNamespaceElement:ot}},pL=zt.makeMap,jO=zt.extend,bL=(e,n,s,i)=>{const u=e.name,f=u in s&&u!=="title"&&u!=="textarea"&&u!=="noscript",x=n.childNodes;for(let T=0,D=x.length;T<D;T++){const F=x[T],G=new Gc(F.nodeName.toLowerCase(),F.nodeType);if(An(F)){const J=F.attributes;for(let ee=0,fe=J.length;ee<fe;ee++){const ke=J[ee];G.attr(ke.name,ke.value)}sa(G.name)&&(i(F),G.value=F.innerHTML)}else qt(F)?(G.value=F.data,f&&(G.raw=!0)):(Ga(F)||Ul(F)||sg(F))&&(G.value=F.data);sa(G.name)||bL(G,F,s,i),e.append(G)}},Bw=(e,n,s)=>{const i=[];for(let u=e,f=u;u;f=u,u=u.walk()){const x=u;De(n,T=>T(x)),no(x.parent)&&x!==e?u=f:i.push(x)}for(let u=i.length-1;u>=0;u--){const f=i[u];De(s,x=>x(f))}},vL=(e,n,s,i)=>{const u=s.validate,f=n.getNonEmptyElements(),x=n.getWhitespaceElements(),T=jO(pL("script,style,head,html,body,title,meta,param"),n.getBlockElements()),D=Tx(n),F=/[ \t\r\n]+/g,G=/^[ \t\r\n]+/,J=/[ \t\r\n]+$/,ee=qe=>{let tt=qe.parent;for(;ut(tt);){if(tt.name in x)return!0;tt=tt.parent}return!1},fe=qe=>{let tt=qe;for(;ut(tt);){if(tt.name in D)return tl(n,f,x,tt);tt=tt.parent}return!1},ke=qe=>qe.name in T||wh(n,qe)||sa(qe.name)&&qe.parent===e,be=(qe,tt)=>{const lt=tt?qe.prev:qe.next;return ut(lt)||no(qe.parent)?!1:ke(qe.parent)&&(qe.parent!==e||i.isRootContent===!0)};return[qe=>{var tt;if(qe.type===3&&!ee(qe)){let lt=(tt=qe.value)!==null&&tt!==void 0?tt:"";lt=lt.replace(F," "),(D6(qe.prev,ke)||be(qe,!0))&&(lt=lt.replace(G,"")),lt.length===0||lt===" "&&qe.prev&&qe.prev.type===bs&&qe.next&&qe.next.type===bs?qe.remove():qe.value=lt}},qe=>{var tt;if(qe.type===1){const lt=n.getElementRule(qe.name);if(u&&lt){const $t=tl(n,f,x,qe);lt.paddInEmptyBlock&&$t&&fe(qe)?iO(s,i,ke,qe):lt.removeEmpty&&$t?ke(qe)?qe.remove():qe.unwrap():lt.paddEmpty&&($t||Wp(qe))&&iO(s,i,ke,qe)}}else if(qe.type===3&&!ee(qe)){let lt=(tt=qe.value)!==null&&tt!==void 0?tt:"";(qe.next&&ke(qe.next)||be(qe,!1))&&(lt=lt.replace(J,"")),lt.length===0?qe.remove():qe.value=lt}}]},I$=(e,n)=>{var s;const i=(s=n.forced_root_block)!==null&&s!==void 0?s:e.forced_root_block;return i===!1?"":i===!0?"p":i},Rv=(e={},n=Er())=>{const s=JP(),i=JP(),u={validate:!0,root_name:"body",sanitize:!0,...e},f=new DOMParser,x=N$(u,n),T=(tt,lt,$t="html")=>{const nn=$t==="xhtml"?"application/xhtml+xml":"text/html",On=Qn(n.getSpecialElements(),lt.toLowerCase()),_t=On?`<${lt}>${tt}</${lt}>`:tt,vt=()=>$t==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${_t}</body></html>`:/^[\s]*<head/i.test(tt)||/^[\s]*<html/i.test(tt)||/^[\s]*<!DOCTYPE/i.test(tt)?`<html>${_t}</html>`:`<body>${_t}</body>`,Ut=f.parseFromString(vt(),nn).body;return x.sanitizeHtmlElement(Ut,nn),On?Ut.firstChild:Ut},D=s.addFilter,F=s.getFilters,G=s.removeFilter,J=i.addFilter,ee=i.getFilters,fe=i.removeFilter,ke=(tt,lt)=>{lO(n,tt)&&lt.push(tt)},be=(tt,lt)=>{const $t=oe(lt.attr(Kp)),nn=lt.type===1&&!Qn(tt,lt.name)&&!wh(n,lt)&&!sa(lt.name);return lt.type===3||nn&&!$t},Ee=(tt,lt)=>{const $t=jO(pL("script,style,head,html,body,title,meta,param"),n.getBlockElements()),nn=/^[ \t\r\n]+/,On=/[ \t\r\n]+$/;let _t=tt.firstChild,vt=null;const Ut=Dn=>{var ho,Cs;Dn&&(_t=Dn.firstChild,_t&&_t.type===3&&(_t.value=(ho=_t.value)===null||ho===void 0?void 0:ho.replace(nn,"")),_t=Dn.lastChild,_t&&_t.type===3&&(_t.value=(Cs=_t.value)===null||Cs===void 0?void 0:Cs.replace(On,"")))};if(n.isValidChild(tt.name,lt.toLowerCase())){for(;_t;){const Dn=_t.next;be($t,_t)?(vt||(vt=new Gc(lt,1),vt.attr(u.forced_root_block_attrs),tt.insert(vt,_t)),vt.append(_t)):(Ut(vt),vt=null),_t=Dn}Ut(vt)}},qe={schema:n,addAttributeFilter:J,getAttributeFilters:ee,removeAttributeFilter:fe,addNodeFilter:D,getNodeFilters:F,removeNodeFilter:G,parse:(tt,lt={})=>{var $t;const nn=u.validate,On=($t=lt.context)!==null&&$t!==void 0?$t:u.root_name,_t=T(tt,On,lt.format);br(n,_t);const vt=new Gc(On,11);bL(vt,_t,n.getSpecialElements(),x.sanitizeNamespaceElement),_t.innerHTML="";const[Ut,Dn]=vL(vt,n,u,lt),ho=[],Cs=nn?di=>ke(di,ho):ot,Ss={nodes:{},attributes:{}},xr=di=>mP(F(),ee(),di,Ss);if(Bw(vt,[Ut,xr],[Dn,Cs]),ho.reverse(),nn&&ho.length>0)if(lt.context){const{pass:di,fail:Kl}=Mo(ho,xi=>xi.parent===vt);dr(Kl,n,vt,xr),lt.invalid=di.length>0}else dr(ho,n,vt,xr);const Pr=I$(u,lt);return Pr&&(vt.name==="body"||lt.isRootContent)&&Ee(vt,Pr),lt.invalid||rO(Ss,lt),vt}};return NO(qe,u),Om(qe,u,n),qe},F$=e=>Xp(e)?Ip({validate:!1}).serialize(e):e,ZO=(e,n,s)=>{const i=F$(e),u=n(i);if(u.isDefaultPrevented())return u;if(Xp(e))if(u.content!==i){const f=Rv({validate:!1,forced_root_block:!1,...s}).parse(u.content,{context:e.name});return{...u,content:f}}else return{...u,content:e};else return u},xL=e=>({sanitize:j2(e),sandbox_iframes:Yb(e),sandbox_iframes_exclusions:wy(e)}),yL=(e,n)=>{if(n.no_events)return Hi.value(n);{const s=b1(e,n);return s.isDefaultPrevented()?Hi.error(QE(e,{content:"",...s}).content):Hi.value(s)}},GO=(e,n,s)=>s.no_events?n:ZO(n,u=>QE(e,{...s,content:u}),xL(e)).content,$k=(e,n)=>{if(n.no_events)return Hi.value(n);{const s=ZO(n.content,i=>qy(e,{...n,content:i}),xL(e));return s.isDefaultPrevented()?(MS(e,s),Hi.error(void 0)):Hi.value(s)}},zk=(e,n,s)=>{s.no_events||MS(e,{...s,content:n})},Vk=(e,n,s)=>({element:e,width:n,rows:s}),qO=(e,n)=>({element:e,cells:n}),wL=(e,n)=>({x:e,y:n}),CL=(e,n)=>Fr(e,n).bind(_a).getOr(1),B$=(e,n,s,i,u)=>{const f=CL(u,"rowspan"),x=CL(u,"colspan"),T=e.rows;for(let D=s;D<s+f;D++){T[D]||(T[D]=qO(Tb(i),[]));for(let F=n;F<n+x;F++){const G=T[D].cells;G[F]=D===s&&F===n?u:hd(u)}}},H$=(e,n,s)=>{const i=e.rows;return!!(i[s]?i[s].cells:[])[n]},KO=(e,n,s)=>{for(;H$(e,n,s);)n++;return n},V1=e=>Vo(e,(n,s)=>s.cells.length>n?s.cells.length:n,0),JO=(e,n)=>{const s=e.rows;for(let i=0;i<s.length;i++){const u=s[i].cells;for(let f=0;f<u.length;f++)if(rs(u[f],n))return te.some(wL(f,i))}return te.none()},QO=(e,n,s,i,u)=>{const f=[],x=e.rows;for(let T=s;T<=u;T++){const D=x[T].cells,F=n<i?D.slice(n,i+1):D.slice(i,n+1);f.push(qO(x[T].element,F))}return f},Wk=(e,n,s)=>{const i=n.x,u=n.y,f=s.x,x=s.y,T=u<x?QO(e,i,u,f,x):QO(e,i,x,f,u);return Vk(e.element,V1(T),T)},$$=(e,n)=>{const s=hd(e.element),i=$e.fromTag("tbody");return $(i,n),M(s,i),s},z$=e=>Ze(e.rows,n=>{const s=Ze(n.cells,u=>{const f=Tb(u);return er(f,"colspan"),er(f,"rowspan"),f}),i=hd(n.element);return $(i,s),i}),Dv=e=>{const n=Vk(hd(e),0,[]);return De(Vs(e,"tr"),(s,i)=>{De(Vs(s,"td,th"),(u,f)=>{B$(n,KO(n,f,i),i,s,u)})}),Vk(n.element,V1(n.rows),n.rows)},eR=e=>$$(e,z$(e)),SL=(e,n,s)=>JO(e,n).bind(i=>JO(e,s).map(u=>Wk(e,i,u))),Hw=e=>us(e,n=>Se(n)==="ul"||Se(n)==="ol"),kL=(e,n)=>us(e,s=>Se(s)==="li"&&Wy(s,n)).fold(Dt([]),s=>Hw(e).map(i=>{const u=$e.fromTag(Se(i)),f=Is(d(i),(x,T)=>co(T,"list-style"));return C(u,f),[$e.fromTag("li"),u]}).getOr([])),tR=(e,n)=>{const s=Vo(n,(i,u)=>(M(u,i),u),e);return n.length>0?A1([s]):s},AL=e=>Gf(e)?Za(e).filter(Xd).fold(Dt([]),n=>[e,n]):Xd(e)?[e]:[],TL=(e,n,s)=>{const i=$e.fromDom(n.commonAncestorContainer),u=xf(i,e),f=Cn(u,D=>s.isWrapper(Se(D))),x=kL(u,n),T=f.concat(x.length?x:AL(i));return Ze(T,hd)},EL=()=>A1([]),V$=(e,n,s)=>tR($e.fromDom(n.cloneContents()),TL(e,n,s)),W$=(e,n)=>La(n,"table",it(rs,e)),nR=(e,n)=>W$(e,n[0]).bind(s=>{const i=n[0],u=n[n.length-1],f=Dv(s);return SL(f,i,u).map(x=>A1([eR(x)]))}).getOrThunk(EL),U$=(e,n,s)=>n.length>0&&n[0].collapsed?EL():V$(e,n[0],s),_L=(e,n,s)=>{const i=mm(n,e);return i.length>0?nR(e,i):U$(e,n,s)},Uk=(e,n)=>n>=0&&n<e.length&&fm(e.charAt(n)),OL=e=>Pu(e.innerText),X$=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),Y$=e=>te.from(e.selection.getRng()).map(n=>{var s;const i=te.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),u=e.getBody(),f=X$(i),x=$e.fromDom(n.cloneContents());v3(x),x3(x);const T=e.dom.add(u,f,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},x.dom),D=OL(T),F=Pu((s=T.textContent)!==null&&s!==void 0?s:"");if(e.dom.remove(T),Uk(F,0)||Uk(F,F.length-1)){const G=i.getOr(u),J=OL(G),ee=J.indexOf(D);if(ee===-1)return D;{const fe=Uk(J,ee-1),ke=Uk(J,ee+D.length);return(fe?" ":"")+D+(ke?" ":"")}}else return D}).getOr(""),j$=(e,n)=>{const s=e.selection.getRng(),i=e.dom.create("body"),u=e.selection.getSel(),f=jS(e,r1(u)),x=n.contextual?_L($e.fromDom(e.getBody()),f,e.schema).dom:s.cloneContents();return x&&i.appendChild(x),e.selection.serializer.serialize(i,n)},Z$=(e,n)=>{if(n.format==="text")return Y$(e);{const s=j$(e,n);return n.format==="tree"?s:e.selection.isCollapsed()?"":s}},G$=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),q$=(e,n,s={})=>{const i=G$(s,n);return yL(e,i).fold(Ao,u=>{const f=Z$(e,u);return GO(e,f,u)})},oR=0,RL=1,DL=2,Xk=(e,n)=>{const s=e.length+n.length+2,i=new Array(s),u=new Array(s),f=(G,J,ee)=>({start:G,end:J,diag:ee}),x=(G,J,ee,fe,ke)=>{const be=D(G,J,ee,fe);if(be===null||be.start===J&&be.diag===J-fe||be.end===G&&be.diag===G-ee){let Ee=G,Ye=ee;for(;Ee<J||Ye<fe;)Ee<J&&Ye<fe&&e[Ee]===n[Ye]?(ke.push([oR,e[Ee]]),++Ee,++Ye):J-G>fe-ee?(ke.push([DL,e[Ee]]),++Ee):(ke.push([RL,n[Ye]]),++Ye)}else{x(G,be.start,ee,be.start-be.diag,ke);for(let Ee=be.start;Ee<be.end;++Ee)ke.push([oR,e[Ee]]);x(be.end,J,be.end-be.diag,fe,ke)}},T=(G,J,ee,fe)=>{let ke=G;for(;ke-J<fe&&ke<ee&&e[ke]===n[ke-J];)++ke;return f(G,ke,J)},D=(G,J,ee,fe)=>{const ke=J-G,be=fe-ee;if(ke===0||be===0)return null;const Ee=ke-be,Ye=be+ke,qe=(Ye%2===0?Ye:Ye+1)/2;i[1+qe]=G,u[1+qe]=J+1;let tt,lt,$t,nn,On;for(tt=0;tt<=qe;++tt){for(lt=-tt;lt<=tt;lt+=2){for($t=lt+qe,lt===-tt||lt!==tt&&i[$t-1]<i[$t+1]?i[$t]=i[$t+1]:i[$t]=i[$t-1]+1,nn=i[$t],On=nn-G+ee-lt;nn<J&&On<fe&&e[nn]===n[On];)i[$t]=++nn,++On;if(Ee%2!==0&&Ee-tt<=lt&&lt<=Ee+tt&&u[$t-Ee]<=i[$t])return T(u[$t-Ee],lt+G-ee,J,fe)}for(lt=Ee-tt;lt<=Ee+tt;lt+=2){for($t=lt+qe-Ee,lt===Ee-tt||lt!==Ee+tt&&u[$t+1]<=u[$t-1]?u[$t]=u[$t+1]-1:u[$t]=u[$t-1],nn=u[$t]-1,On=nn-G+ee-lt;nn>=G&&On>=ee&&e[nn]===n[On];)u[$t]=nn--,On--;if(Ee%2===0&&-tt<=lt&&lt<=tt&&u[$t]<=i[$t+Ee])return T(u[$t],lt+G-ee,J,fe)}}return null},F=[];return x(0,e.length,0,n.length,F),F},kc=e=>An(e)?e.outerHTML:qt(e)?Wg.encodeRaw(e.data,!1):Ga(e)?"<!--"+e.data+"-->":"",K$=e=>{let n;const s=document.createElement("div"),i=document.createDocumentFragment();for(e&&(s.innerHTML=e);n=s.firstChild;)i.appendChild(n);return i},Yk=(e,n,s)=>{const i=K$(n);if(e.hasChildNodes()&&s<e.childNodes.length){const u=e.childNodes[s];e.insertBefore(i,u)}else e.appendChild(i)},Mv=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const s=e.childNodes[n];e.removeChild(s)}},ML=(e,n)=>{let s=0;De(e,i=>{i[0]===oR?s++:i[0]===RL?(Yk(n,i[1],s),s++):i[0]===DL&&Mv(n,s)})},ju=(e,n)=>Cn(Ze(oo(e.childNodes),V(Pu,kc)),s=>s.length>0),Pv=(e,n)=>{const s=Ze(oo(n.childNodes),kc);return ML(Xk(s,e),n),n},PL=ft(()=>document.implementation.createHTMLDocument("undo")),J$=e=>e.querySelector("iframe")!==null,LL=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Q$=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),$w=e=>{const n=e.serializer.getTempAttrs(),s=b3(e.getBody(),n);return J$(s)?LL(ju(s)):Q$(Pu(s.innerHTML))},Lv=(e,n,s)=>{const i=s?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Pv(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:ut(i)&&HE(i)?!i.isFakeCaret:!0}),i&&(e.selection.moveToBookmark(i),e.selection.scrollIntoView())},zw=e=>e.type==="fragmented"?e.fragments.join(""):e.content,NL=e=>{const n=$e.fromTag("body",PL());return Oe(n,zw(e)),De(Vs(n,"*[data-mce-bogus]"),ne),me(n)},IL=(e,n)=>zw(e)===zw(n),e8=(e,n)=>NL(e)===NL(n),Vw=(e,n)=>!e||!n?!1:IL(e,n)?!0:e8(e,n),Ww=e=>e.get()===0,jk=(e,n,s)=>{Ww(s)&&(e.typing=n)},FL=(e,n)=>{e.typing&&(jk(e,!1,n),e.add())},BL=e=>{e.typing&&(e.typing=!1,e.add())},kg=(e,n,s)=>{Ww(n)&&s.set(N0(e.selection))},sR=(e,n,s,i,u,f,x)=>{const T=$w(e),D=zt.extend(f||{},T);if(!Ww(i)||e.removed)return null;const F=n.data[s.get()];if(e.dispatch("BeforeAddUndo",{level:D,lastLevel:F,originalEvent:x}).isDefaultPrevented()||F&&Vw(F,D))return null;n.data[s.get()]&&u.get().each(ee=>{n.data[s.get()].beforeBookmark=ee});const G=V0(e);if(G&&n.data.length>G){for(let ee=0;ee<n.data.length-1;ee++)n.data[ee]=n.data[ee+1];n.data.length--,s.set(n.data.length)}D.bookmark=N0(e.selection),s.get()<n.data.length-1&&(n.data.length=s.get()+1),n.data.push(D),s.set(n.data.length-1);const J={level:D,lastLevel:F,originalEvent:x};return s.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",J),e.dispatch("change",J)):e.dispatch("AddUndo",J),D},t8=(e,n,s)=>{n.data=[],s.set(0),n.typing=!1,e.dispatch("ClearUndos")},Zk=(e,n,s,i,u)=>{if(n.transact(i)){const f=n.data[s.get()].bookmark,x=n.data[s.get()-1];Lv(e,x,!0),n.transact(u)&&(n.data[s.get()-1].beforeBookmark=f)}},rR=(e,n,s)=>{let i;return n.get()<s.length-1&&(n.set(n.get()+1),i=s[n.get()],Lv(e,i,!1),e.setDirty(!0),e.dispatch("Redo",{level:i})),i},HL=(e,n,s,i)=>{let u;return n.typing&&(n.add(),n.typing=!1,jk(n,!1,s)),i.get()>0&&(i.set(i.get()-1),u=n.data[i.get()],Lv(e,u,!0),e.setDirty(!0),e.dispatch("Undo",{level:u})),u},$L=e=>{e.clear(),e.add()},zL=(e,n,s)=>s.get()>0||n.typing&&n.data[0]&&!Vw($w(e),n.data[0]),n8=(e,n)=>n.get()<e.data.length-1&&!e.typing,o8=(e,n,s)=>(FL(e,n),e.beforeChange(),e.ignore(s),e.add()),s8=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},r8=(e,n)=>{const s=e.dom,i=ut(n)?n:e.getBody();De(s.select("table,a",i),u=>{switch(u.nodeName){case"TABLE":const f=H2(e),x=s.getAttrib(u,"border");(!x||x==="0")&&e.hasVisual?s.addClass(u,f):s.removeClass(u,f);break;case"A":if(!s.getAttrib(u,"href")){const T=s.getAttrib(u,"name")||u.id,D=my(e);T&&e.hasVisual?s.addClass(u,D):s.removeClass(u,D)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},VL=e=>({init:{bindEvents:ot},undoManager:{beforeChange:(n,s)=>kg(e,n,s),add:(n,s,i,u,f,x)=>sR(e,n,s,i,u,f,x),undo:(n,s,i)=>HL(e,n,s,i),redo:(n,s)=>rR(e,n,s),clear:(n,s)=>t8(e,n,s),reset:n=>$L(n),hasUndo:(n,s)=>zL(e,n,s),hasRedo:(n,s)=>n8(n,s),transact:(n,s,i)=>o8(n,s,i),ignore:(n,s)=>s8(n,s),extra:(n,s,i,u)=>Zk(e,n,s,i,u)},formatter:{match:(n,s,i,u)=>Sw(e,n,s,i,u),matchAll:(n,s)=>SP(e,n,s),matchNode:(n,s,i,u)=>wg(e,n,s,i,u),canApply:n=>W6(e,n),closest:n=>bk(e,n),apply:(n,s,i)=>TO(e,n,s,i),remove:(n,s,i,u)=>YP(e,n,s,i,u),toggle:(n,s,i)=>Mk(e,n,s,i),formatChanged:(n,s,i,u,f)=>u$(e,n,s,i,u,f)},editor:{getContent:n=>YH(e,n),setContent:(n,s)=>wv(e,n,s),insertContent:(n,s)=>Uu(e,n,s),addVisual:n=>r8(e,n)},selection:{getContent:(n,s)=>q$(e,n,s)},autocompleter:{addDecoration:ot,removeDecoration:ot},raw:{getModel:()=>te.none()}}),WL=e=>{const n=F=>Wt(F)?F:{},{init:s,undoManager:i,formatter:u,editor:f,selection:x,autocompleter:T,raw:D}=e;return{init:{bindEvents:s.bindEvents},undoManager:{beforeChange:i.beforeChange,add:i.add,undo:i.undo,redo:i.redo,clear:i.clear,reset:i.reset,hasUndo:i.hasUndo,hasRedo:i.hasRedo,transact:(F,G,J)=>i.transact(J),ignore:(F,G)=>i.ignore(G),extra:(F,G,J,ee)=>i.extra(J,ee)},formatter:{match:(F,G,J,ee)=>u.match(F,n(G),ee),matchAll:u.matchAll,matchNode:u.matchNode,canApply:F=>u.canApply(F),closest:F=>u.closest(F),apply:(F,G,J)=>u.apply(F,n(G)),remove:(F,G,J,ee)=>u.remove(F,n(G)),toggle:(F,G,J)=>u.toggle(F,n(G)),formatChanged:(F,G,J,ee,fe)=>u.formatChanged(G,J,ee,fe)},editor:{getContent:F=>f.getContent(F),setContent:(F,G)=>({content:f.setContent(F,G),html:""}),insertContent:(F,G)=>(f.insertContent(F),""),addVisual:f.addVisual},selection:{getContent:(F,G)=>x.getContent(G)},autocompleter:{addDecoration:T.addDecoration,removeDecoration:T.removeDecoration},raw:{getModel:()=>te.some(D.getRawModel())}}},a8=()=>{const e=Dt(null),n=Dt("");return{init:{bindEvents:ot},undoManager:{beforeChange:ot,add:e,undo:e,redo:e,clear:ot,reset:ot,hasUndo:dt,hasRedo:dt,transact:e,ignore:ot,extra:ot},formatter:{match:dt,matchAll:Dt([]),matchNode:Dt(void 0),canApply:dt,closest:n,apply:ot,remove:ot,toggle:ot,formatChanged:Dt({unbind:ot})},editor:{getContent:n,setContent:Dt({content:"",html:""}),insertContent:Dt(""),addVisual:ot},selection:{getContent:n},autocompleter:{addDecoration:ot,removeDecoration:ot},raw:{getModel:Dt(te.none())}}},Cf=e=>Qn(e.plugins,"rtc"),i8=e=>Ts(e.plugins,"rtc").bind(n=>te.from(n.setup)),UL=e=>{const n=e;return i8(e).fold(()=>(n.rtcInstance=VL(e),te.none()),s=>(n.rtcInstance=a8(),te.some(()=>s().then(i=>(n.rtcInstance=WL(i),i.rtc.isRemote)))))},Uw=e=>e.rtcInstance?e.rtcInstance:VL(e),nl=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},XL=(e,n,s)=>{nl(e).undoManager.beforeChange(n,s)},aR=(e,n,s,i,u,f,x)=>nl(e).undoManager.add(n,s,i,u,f,x),YL=(e,n,s,i)=>nl(e).undoManager.undo(n,s,i),jL=(e,n,s)=>nl(e).undoManager.redo(n,s),iR=(e,n,s)=>{nl(e).undoManager.clear(n,s)},ZL=(e,n)=>{nl(e).undoManager.reset(n)},GL=(e,n,s)=>nl(e).undoManager.hasUndo(n,s),qL=(e,n,s)=>nl(e).undoManager.hasRedo(n,s),l8=(e,n,s,i)=>nl(e).undoManager.transact(n,s,i),lR=(e,n,s)=>{nl(e).undoManager.ignore(n,s)},c8=(e,n,s,i,u)=>{nl(e).undoManager.extra(n,s,i,u)},Gk=(e,n,s,i,u)=>nl(e).formatter.match(n,s,i,u),u8=(e,n,s)=>nl(e).formatter.matchAll(n,s),d8=(e,n,s,i,u)=>nl(e).formatter.matchNode(n,s,i,u),h8=(e,n)=>nl(e).formatter.canApply(n),KL=(e,n)=>nl(e).formatter.closest(n),JL=(e,n,s,i)=>{nl(e).formatter.apply(n,s,i)},g8=(e,n,s,i,u)=>{nl(e).formatter.remove(n,s,i,u)},f8=(e,n,s,i)=>{nl(e).formatter.toggle(n,s,i)},m8=(e,n,s,i,u,f)=>nl(e).formatter.formatChanged(n,s,i,u,f),p8=(e,n)=>Uw(e).editor.getContent(n),b8=(e,n,s)=>Uw(e).editor.setContent(n,s),QL=(e,n,s)=>Uw(e).editor.insertContent(n,s),XY=(e,n,s)=>nl(e).selection.getContent(n,s),v8=(e,n)=>nl(e).editor.addVisual(n),eN=e=>nl(e).init.bindEvents(),x8=(e,n={})=>{const s=n.format?n.format:"html";return XY(e,s,n)},tN=e=>e.dom.length===0?(U(e),te.none()):te.some(e),y8=(e,n)=>e.filter(s=>Cm.isBookmarkNode(s.dom)).bind(n?Ni:Fc),w8=(e,n,s,i,u)=>{const f=e.dom,x=n.dom,T=i?f.length:x.length;i?(z_(f,x,u,!1,!i),s.setStart(x,T)):(z_(x,f,u,!1,!i),s.setEnd(x,T))},C8=(e,n,s)=>{Za(e).each(i=>{const u=e.dom;n&&iw(i,At(u,0),s)?JS(u,0,s):!n&&lw(i,At(u,u.length),s)&&$_(u,u.length,s)})},cR=(e,n,s,i,u)=>{e.bind(f=>((i?$_:JS)(f.dom,i?f.dom.length:0,u),n.filter(fr).map(T=>w8(f,T,s,i,u)))).orThunk(()=>y8(n,i).or(n).filter(fr).map(x=>C8(x,i,u)))},S8=(e,n,s)=>{const i=te.from(n.firstChild).map($e.fromDom),u=te.from(n.lastChild).map($e.fromDom);e.deleteContents(),e.insertNode(n);const f=i.bind(Fc).filter(fr).bind(tN),x=u.bind(Ni).filter(fr).bind(tN);cR(f,i,e,!0,s),cR(x,u,e,!1,s),e.collapse(!1)},k8=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),A8=(e,n)=>{if(n.format!=="raw"){const s=e.selection.getRng(),i=e.dom.getParent(s.commonAncestorContainer,e.dom.isBlock),u=i?{context:i.nodeName.toLowerCase()}:{},f=e.parser.parse(n.content,{forced_root_block:!1,...u,...n});return Ip({validate:!1},e.schema).serialize(f)}else return n.content},T8=(e,n,s={})=>{const i=k8(s,n);$k(e,i).each(u=>{const f=A8(e,u),x=e.selection.getRng();S8(x,x.createContextualFragment(f),e.schema),e.selection.setRng(x),Tm(e,x),zk(e,f,u)})},nN=(e,n,s)=>{if(Qn(e,n)){const i=Cn(e[n],u=>u!==s);i.length===0?delete e[n]:e[n]=i}};var YY=(e,n)=>{let s,i;const u=(T,D)=>us(D,F=>e.is(F,T)),f=T=>e.getParents(T,void 0,e.getRoot()),x=()=>{s={},i={},n.on("NodeChange",T=>{const D=T.element,F=f(D),G={};Yt(s,(J,ee)=>{u(ee,F).each(fe=>{i[ee]||(De(J,ke=>{ke(!0,{node:fe,selector:ee,parents:F})}),i[ee]=J),G[ee]=J})}),Yt(i,(J,ee)=>{G[ee]||(delete i[ee],De(J,fe=>{fe(!1,{node:D,selector:ee,parents:F})}))})})};return{selectorChangedWithUnbind:(T,D)=>(s||x(),s[T]||(s[T]=[]),s[T].push(D),u(T,f(n.selection.getStart())).each(()=>{i[T]=s[T]}),{unbind:()=>{nN(s,T,D),nN(i,T,D)}})}};const E8=e=>!!(e&&e.ownerDocument)&&Li($e.fromDom(e.ownerDocument),$e.fromDom(e)),_8=e=>e?E8(e.startContainer)&&E8(e.endContainer):!1,oN=(e,n,s,i)=>{let u,f;const{selectorChangedWithUnbind:x}=YY(e,i),T=(fn,io)=>{const ir=e.createRng();ut(fn)&&ut(io)?(ir.setStart(fn,io),ir.setEnd(fn,io),lt(ir),Ye(!1)):(vS(e,ir,i.getBody(),!0),lt(ir))},D=fn=>x8(i,fn),F=(fn,io)=>T8(i,fn,io),G=fn=>a3(i.getBody(),tt(),fn),J=fn=>i3(i.getBody(),tt(),fn),ee=(fn,io)=>Kl.getBookmark(fn,io),fe=fn=>Kl.moveToBookmark(fn),ke=(fn,io)=>(c3(e,fn,io).each(lt),fn),be=()=>{const fn=tt(),io=qe();return!fn||fn.item?!1:fn.compareEndPoints?fn.compareEndPoints("StartToEnd",fn)===0:!io||fn.collapsed},Ee=()=>{if(i.mode.isReadOnly())return!1;const fn=tt(),io=i.getBody().querySelectorAll('[data-mce-selected="1"]');return io.length>0?qo(io,ir=>e.isEditable(ir.parentElement)):A_(e,fn)},Ye=fn=>{const io=tt();io.collapse(!!fn),lt(io)},qe=()=>n.getSelection?n.getSelection():n.document.selection,tt=()=>{let fn;const io=(Tn,So,ko)=>{try{return So.compareBoundaryPoints(Tn,ko)}catch{return-1}},ir=n.document;if(ut(i.bookmark)&&!D1(i)){const Tn=$S(i);if(Tn.isSome())return Tn.map(So=>jS(i,[So])[0]).getOr(ir.createRange())}try{const Tn=qe();Tn&&!ng(Tn.anchorNode)&&(Tn.rangeCount>0?fn=Tn.getRangeAt(0):fn=ir.createRange(),fn=jS(i,[fn])[0])}catch{}if(fn||(fn=ir.createRange()),Hg(fn.startContainer)&&fn.collapsed){const Tn=e.getRoot();fn.setStart(Tn,0),fn.setEnd(Tn,0)}return u&&f&&(io(fn.START_TO_START,fn,u)===0&&io(fn.END_TO_END,fn,u)===0?fn=f:(u=null,f=null)),fn},lt=(fn,io)=>{if(!_8(fn))return;const ir=qe();if(fn=i.dispatch("SetSelectionRange",{range:fn,forward:io}).range,ir){f=fn;try{ir.removeAllRanges(),ir.addRange(fn)}catch{}io===!1&&ir.extend&&(ir.collapse(fn.endContainer,fn.endOffset),ir.extend(fn.startContainer,fn.startOffset)),u=ir.rangeCount>0?ir.getRangeAt(0):null}if(!fn.collapsed&&fn.startContainer===fn.endContainer&&(ir!=null&&ir.setBaseAndExtent)&&fn.endOffset-fn.startOffset<2&&fn.startContainer.hasChildNodes()){const So=fn.startContainer.childNodes[fn.startOffset];So&&So.nodeName==="IMG"&&(ir.setBaseAndExtent(fn.startContainer,fn.startOffset,fn.endContainer,fn.endOffset),(ir.anchorNode!==fn.startContainer||ir.focusNode!==fn.endContainer)&&ir.setBaseAndExtent(So,0,So,1))}i.dispatch("AfterSetSelectionRange",{range:fn,forward:io})},$t=fn=>(F(e.getOuterHTML(fn)),fn),nn=()=>IH(i.getBody(),tt()),On=(fn,io)=>YS(e,tt(),fn,io),_t=()=>{const fn=qe(),io=fn==null?void 0:fn.anchorNode,ir=fn==null?void 0:fn.focusNode;if(!fn||!io||!ir||ng(io)||ng(ir))return!0;const Tn=e.createRng(),So=e.createRng();try{Tn.setStart(io,fn.anchorOffset),Tn.collapse(!0),So.setStart(ir,fn.focusOffset),So.collapse(!0)}catch{return!0}return Tn.compareBoundaryPoints(Tn.START_TO_START,So)<=0},di={dom:e,win:n,serializer:s,editor:i,expand:(fn={type:"word"})=>lt(Xt(e).expand(tt(),fn)),collapse:Ye,setCursorLocation:T,getContent:D,setContent:F,getBookmark:ee,moveToBookmark:fe,select:ke,isCollapsed:be,isEditable:Ee,isForward:_t,setNode:$t,getNode:nn,getSel:qe,setRng:lt,getRng:tt,getStart:G,getEnd:J,getSelectedBlocks:On,normalize:()=>{const fn=tt(),io=qe();if(!zE(io)&&i1(i)){const ir=pn(e,fn);return ir.each(Tn=>{lt(Tn,_t())}),ir.getOr(fn)}return fn},selectorChanged:(fn,io)=>(x(fn,io),di),selectorChangedWithUnbind:x,getScrollContainer:()=>{let fn,io=e.getRoot();for(;io&&io.nodeName!=="BODY";){if(io.scrollHeight>io.clientHeight){fn=io;break}io=io.parentNode}return fn},scrollIntoView:(fn,io)=>{ut(fn)?SH(i,fn,io):Tm(i,tt(),io)},placeCaretAt:(fn,io)=>lt(k(fn,io,i.getDoc())),getBoundingClientRect:()=>{const fn=tt();return fn.collapsed?At.fromRangeStart(fn).getClientRects()[0]:fn.getBoundingClientRect()},destroy:()=>{n=u=f=null,xi.destroy()}},Kl=Cm(di),xi=Jy(di,i);return di.bookmarkManager=Kl,di.controlSelection=xi,di},jY=(e,n,s)=>{n.addNodeFilter("br",(i,u,f)=>{const x=zt.extend({},s.getBlockElements()),T=s.getNonEmptyElements(),D=s.getWhitespaceElements();x.body=1;const F=G=>G.name in x||wh(s,G);for(let G=0,J=i.length;G<J;G++){let ee=i[G],fe=ee.parent;if(fe&&F(fe)&&ee===fe.lastChild){let ke=ee.prev;for(;ke;){const be=ke.name;if(be!=="span"||ke.attr("data-mce-type")!=="bookmark"){be==="br"&&(ee=null);break}ke=ke.prev}if(ee&&(ee.remove(),tl(s,T,D,fe))){const be=s.getElementRule(fe.name);be&&(be.removeEmpty?fe.remove():be.paddEmpty&&iO(e,f,F,fe))}}else{let ke=ee;for(;fe&&fe.firstChild===ke&&fe.lastChild===ke&&(ke=fe,!x[fe.name]);)fe=fe.parent;if(ke===fe){const be=new Gc("#text",3);be.value=za,ee.replace(be)}}}})},O8=(e,n,s)=>{e.addAttributeFilter("data-mce-tabindex",(i,u)=>{let f=i.length;for(;f--;){const x=i[f];x.attr("tabindex",x.attr("data-mce-tabindex")),x.attr(u,null)}}),e.addAttributeFilter("src,href,style",(i,u)=>{const f="data-mce-"+u,x=n.url_converter,T=n.url_converter_scope;let D=i.length;for(;D--;){const F=i[D];let G=F.attr(f);G!==void 0?(F.attr(u,G.length>0?G:null),F.attr(f,null)):(G=F.attr(u),u==="style"?G=s.serializeStyle(s.parseStyle(G),F.name):x&&(G=x.call(T,G,u,F.name)),F.attr(u,G.length>0?G:null))}}),e.addAttributeFilter("class",i=>{let u=i.length;for(;u--;){const f=i[u];let x=f.attr("class");x&&(x=x.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",x.length>0?x:null))}}),e.addAttributeFilter("data-mce-type",(i,u,f)=>{let x=i.length;for(;x--;){const T=i[x];T.attr("data-mce-type")==="bookmark"&&!f.cleanup&&(te.from(T.firstChild).exists(F=>{var G;return!_b((G=F.value)!==null&&G!==void 0?G:"")})?T.unwrap():T.remove())}}),e.addNodeFilter("script,style",(i,u)=>{var f;const x=D=>D.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let T=i.length;for(;T--;){const D=i[T],F=D.firstChild,G=(f=F==null?void 0:F.value)!==null&&f!==void 0?f:"";if(u==="script"){const J=D.attr("type");J&&D.attr("type",J==="mce-no/type"?null:J.replace(/^mce\-/,"")),n.element_format==="xhtml"&&F&&G.length>0&&(F.value=`// <![CDATA[
`+x(G)+`
// ]]>`)}else n.element_format==="xhtml"&&F&&G.length>0&&(F.value=`<!--
`+x(G)+`
-->`)}}),e.addNodeFilter("#comment",i=>{let u=i.length;for(;u--;){const f=i[u],x=f.value;n.preserve_cdata&&(x==null?void 0:x.indexOf("[CDATA["))===0?(f.name="#cdata",f.type=4,f.value=s.decode(x.replace(/^\[CDATA\[|\]\]$/g,""))):(x==null?void 0:x.indexOf("mce:protected "))===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(x).substr(14))}}),e.addNodeFilter("xml:namespace,input",(i,u)=>{let f=i.length;for(;f--;){const x=i[f];x.type===7?x.remove():x.type===1&&u==="input"&&!x.attr("type")&&x.attr("type","text")}}),e.addAttributeFilter("data-mce-type",i=>{De(i,u=>{u.attr("data-mce-type")==="format-caret"&&(u.isEmpty(e.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(i,u)=>{let f=i.length;for(;f--;)i[f].attr(u,null)}),n.remove_trailing_brs&&jY(n,e,e.schema)},ui=e=>{const n=i=>(i==null?void 0:i.name)==="br",s=e.lastChild;if(n(s)){const i=s.prev;n(i)&&(s.remove(),i.remove())}},uR=(e,n,s)=>{let i;const u=e.dom;let f=n.cloneNode(!0);const x=document.implementation;if(x.createHTMLDocument){const T=x.createHTMLDocument("");zt.each(f.nodeName==="BODY"?f.childNodes:[f],D=>{T.body.appendChild(T.importNode(D,!0))}),f.nodeName!=="BODY"?f=T.body.firstChild:f=T.body,i=u.doc,u.doc=T}return f1(e,{...s,node:f}),i&&(u.doc=i),f},ZY=(e,n)=>ut(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,R8=(e,n,s)=>ZY(e,s)?uR(e,n,s):n,D8=(e,n,s)=>{zt.inArray(n,s)===-1&&(e.addAttributeFilter(s,(i,u)=>{let f=i.length;for(;f--;)i[f].attr(u,null)}),n.push(s))},W1=(e,n,s)=>!n.no_events&&e?m1(e,{...n,content:s}).content:s,GY=(e,n,s)=>{const i=Pu(s.getInner?n.innerHTML:e.getOuterHTML(n));return s.selection||k0($e.fromDom(n))?i:zt.trim(i)},qY=(e,n,s)=>{const i=s.selection?{forced_root_block:!1,...s}:s,u=e.parse(n,i);return ui(u),u},uc=(e,n,s)=>Ip(e,n).serialize(s),sN=(e,n,s,i,u)=>{const f=uc(n,s,i);return W1(e,u,f)},rN=(e,n)=>{const s=["data-mce-selected"],i={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},u=n&&n.dom?n.dom:Jr.DOM,f=n&&n.schema?n.schema:Er(i),x=Rv(i,f);O8(x,i,u);const T=(D,F={})=>{const G={format:"html",...F},J=R8(n,D,G),ee=GY(u,J,G),fe=qY(x,ee,G);return G.format==="tree"?fe:sN(n,i,f,fe,G)};return{schema:f,addNodeFilter:x.addNodeFilter,addAttributeFilter:x.addAttributeFilter,serialize:T,addRules:f.addValidElements,setRules:f.setValidElements,addTempAttr:it(D8,x,s),getTempAttrs:Dt(s),getNodeFilters:x.getNodeFilters,getAttributeFilters:x.getAttributeFilters,removeNodeFilter:x.removeNodeFilter,removeAttributeFilter:x.removeAttributeFilter}},dR=(e,n)=>{const s=rN(e,n);return{schema:s.schema,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:s.serialize,addRules:s.addRules,setRules:s.setRules,addTempAttr:s.addTempAttr,getTempAttrs:s.getTempAttrs,getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}},M8="html",P8=(e,n)=>({...e,format:n,get:!0,getInner:!0}),qk=(e,n={})=>{const s=n.format?n.format:M8,i=P8(n,s);return yL(e,i).fold(Ao,u=>{const f=p8(e,u);return GO(e,f,u)})},L8="html",hR=(e,n)=>({format:L8,...e,set:!0,content:n}),gR=(e,n,s={})=>{const i=hR(s,n);return $k(e,i).map(u=>{const f=b8(e,u.content,u);return zk(e,f.html,u),f.content}).getOr(n)},aN="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),iN=[],fR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),mR=[],Kk=(e,n)=>{const s=Cn(n,i=>Qn(e,i));return Go(s)},N8=e=>{const n=Kk(e,aN),s=e.forced_root_block;return(s===!1||s==="")&&n.push("forced_root_block (false only)"),Go(n)},I8=e=>Kk(e,iN),lN=(e,n)=>{const s=zt.makeMap(e.plugins," "),u=Cn(n,f=>Qn(s,f));return Go(u)},Sd=e=>lN(e,fR),F8=e=>lN(e,mR.map(n=>n.name)),B8=(e,n)=>{const s=N8(e),i=Sd(n),u=i.length>0,f=s.length>0,x=n.theme==="mobile";if(u||f||x){const T=`
- `,D=x?`

Themes:${T}mobile`:"",F=u?`

Plugins:${T}${i.join(T)}`:"",G=f?`

Options:${T}${s.join(T)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+D+F+G)}},H8=e=>us(mR,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),$8=(e,n)=>{const s=I8(e),i=F8(n),u=i.length>0,f=s.length>0;if(u||f){const x=`
- `,T=u?`

Plugins:${x}${i.map(H8).join(x)}`:"",D=f?`

Options:${x}${s.join(x)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+T+D)}},z8=(e,n)=>{B8(e,n),$8(e,n)},Xw=Jr.DOM,V8=e=>{Xw.setStyle(e.id,"display",e.orgDisplay)},Jk=e=>te.from(e).each(n=>n.destroy()),W8=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const s=e.selection;if(s){const i=s.dom;n.selection=s.win=s.dom=i.doc=null}},Qk=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Xw.unbind(n,"submit reset",e.formEventDelegate))},U8=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:s}=e,i=e.getBody(),u=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ut(u==null?void 0:u.nextSibling)&&Xw.remove(u.nextSibling),GE(e),e.editorManager.remove(e),!e.inline&&i&&V8(e),qE(e),Xw.remove(e.getContainer()),Jk(n),Jk(s),e.destroy()}},X8=(e,n)=>{const{selection:s,dom:i}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Jk(s),Jk(i)),Qk(e),W8(e),e.destroyed=!0}},U1=(()=>{const e={};return{add:(u,f)=>{e[u]=f},get:u=>e[u]?e[u]:{icons:{}},has:u=>Qn(e,u)}})(),X1=ac.ModelManager,cN=(e,n)=>n.dom[e],j8=(e,n)=>parseInt(o(n,e),10),Z8=it(cN,"clientWidth"),Yw=it(cN,"clientHeight"),uN=it(j8,"margin-top"),dN=it(j8,"margin-left"),G8=e=>e.dom.getBoundingClientRect(),hN=(e,n,s)=>{const i=Z8(e),u=Yw(e);return n>=0&&s>=0&&n<=i&&s<=u},q8=(e,n,s,i)=>{const u=G8(n),f=e?u.left+n.dom.clientLeft+dN(n):0,x=e?u.top+n.dom.clientTop+uN(n):0,T=s-f,D=i-x;return{x:T,y:D}},K8=(e,n,s)=>{const i=$e.fromDom(e.getBody()),u=e.inline?i:vh(i),f=q8(e.inline,u,n,s);return hN(u,f.x,f.y)},J8=e=>te.from(e).map($e.fromDom),Q8=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return J8(n).map(ru).getOr(!1)};var gN=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const fN=e=>{const n=[],s=()=>{const ee=e.theme;return ee&&ee.getNotificationManagerImpl?ee.getNotificationManagerImpl():gN()},i=()=>te.from(n[0]),u=(ee,fe)=>ee.type===fe.type&&ee.text===fe.text&&!ee.progressBar&&!ee.timeout&&!fe.progressBar&&!fe.timeout,f=()=>{i().each(ee=>{ee.reposition()})},x=ee=>{n.push(ee)},T=ee=>{ur(n,fe=>fe===ee).each(fe=>{n.splice(fe,1)})},D=(ee,fe=!0)=>e.removed||!Q8(e)?{}:(fe&&e.dispatch("BeforeOpenNotification",{notification:ee}),us(n,ke=>u(s().getArgs(ke),ee)).getOrThunk(()=>{e.editorManager.setActive(e);const ke=s().open(ee,()=>{T(ke)},()=>s3(e));return x(ke),f(),e.dispatch("OpenNotification",{notification:{...ke}}),ke})),F=()=>{i().each(ee=>{s().close(ee),T(ee),f()})},G=Dt(n);return(ee=>{ee.on("SkinLoaded",()=>{const fe=dy(ee);fe&&D({text:fe,type:"warning",timeout:0},!1),f()}),ee.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(f)}),ee.on("remove",()=>{De(n.slice(),fe=>{s().close(fe)})}),ee.on("keydown",fe=>{var ke;const be=((ke=fe.key)===null||ke===void 0?void 0:ke.toLowerCase())==="f12"||fe.keyCode===123;fe.altKey&&be&&(fe.preventDefault(),i().map(Ee=>$e.fromDom(Ee.getEl())).each(Ee=>gv(Ee)))})})(e),{open:D,close:F,getNotifications:G}},Y1=ac.PluginManager,Ag=ac.ThemeManager;var mN=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const pR=e=>{let n=[];const s=()=>{const be=e.theme;return be&&be.getWindowManagerImpl?be.getWindowManagerImpl():mN()},i=(be,Ee)=>(...Ye)=>Ee?Ee.apply(be,Ye):void 0,u=be=>{e.dispatch("OpenWindow",{dialog:be})},f=be=>{e.dispatch("CloseWindow",{dialog:be})},x=be=>{n.push(be),u(be)},T=be=>{f(be),n=Cn(n,Ee=>Ee!==be),n.length===0&&e.focus()},D=()=>te.from(n[n.length-1]),F=be=>{e.editorManager.setActive(e),ow(e),e.ui.show();const Ee=be();return x(Ee),Ee},G=(be,Ee)=>F(()=>s().open(be,Ee,T)),J=be=>F(()=>s().openUrl(be,T)),ee=(be,Ee,Ye)=>{const qe=s();qe.alert(be,i(Ye||qe,Ee))},fe=(be,Ee,Ye)=>{const qe=s();qe.confirm(be,i(Ye||qe,Ee))},ke=()=>{D().each(be=>{s().close(be),T(be)})};return e.on("remove",()=>{De(n,be=>{s().close(be)})}),{open:G,openUrl:J,alert:ee,confirm:fe,close:ke}},pN=(e,n)=>{e.notificationManager.open({type:"error",text:n})},eA=(e,n)=>{e._skinLoaded?pN(e,n):e.on("SkinLoaded",()=>{pN(e,n)})},e7=(e,n)=>{eA(e,Ud.translate(["Failed to upload image: {0}",n]))},j1=(e,n,s)=>{zu(e,n,{message:s}),console.error(s)},jw=(e,n,s)=>s?`Failed to load ${e}: ${s} from url ${n}`:`Failed to load ${e} url: ${n}`,t7=(e,n,s)=>{j1(e,"PluginLoadError",jw("plugin",n,s))},n7=(e,n,s)=>{j1(e,"IconsLoadError",jw("icons",n,s))},o7=(e,n,s)=>{j1(e,"LanguageLoadError",jw("language",n,s))},KY=(e,n,s)=>{j1(e,"ThemeLoadError",jw("theme",n,s))},Tg=(e,n,s)=>{j1(e,"ModelLoadError",jw("model",n,s))},bR=(e,n,s)=>{const i=Ud.translate(["Failed to initialize plugin: {0}",n]);zu(e,"PluginLoadError",{message:i}),tA(i,s),eA(e,i)},tA=(e,...n)=>{const s=window.console;s&&(s.error?s.error(e,...n):s.log(e,...n))},s7=e=>/^[a-z0-9\-]+$/i.test(e),vR=e=>"content/"+e+"/content.css",r7=e=>tinymce.Resource.has(vR(e)),wr=e=>Z1(e,rm(e)),a7=e=>Z1(e,mE(e)),Z1=(e,n)=>{const s=e.editorManager.baseURL+"/skins/content",u=`content${e.editorManager.suffix}.css`;return Ze(n,f=>r7(f)?f:s7(f)&&!e.inline?`${s}/${f}/${u}`:e.documentBaseURI.toAbsolute(f))},i7=e=>{e.contentCSS=e.contentCSS.concat(wr(e),a7(e))},l7=e=>e?oo(e.getElementsByTagName("img")):[],c7=(e,n)=>{const s={};return{findAll:(u,f=wt)=>{const x=Cn(l7(u),D=>{const F=D.src;return D.hasAttribute("data-mce-bogus")||D.hasAttribute("data-mce-placeholder")||!F||F===In.transparentSrc?!1:co(F,"blob:")?!e.isUploaded(F)&&f(D):co(F,"data:")?f(D):!1}),T=Ze(x,D=>{const F=D.src;if(Qn(s,F))return s[F].then(G=>oe(G)?G:{image:D,blobInfo:G.blobInfo});{const G=Ow(n,F).then(J=>(delete s[F],{image:D,blobInfo:J})).catch(J=>(delete s[F],J));return s[F]=G,G}});return Promise.all(T)}}},xR=()=>{let s={};const i=(ee,fe)=>({status:ee,resultUri:fe}),u=ee=>ee in s;return{hasBlobUri:u,getResultUri:ee=>{const fe=s[ee];return fe?fe.resultUri:null},isPending:ee=>u(ee)?s[ee].status===1:!1,isUploaded:ee=>u(ee)?s[ee].status===2:!1,markPending:ee=>{s[ee]=i(1,null)},markUploaded:(ee,fe)=>{s[ee]=i(2,fe)},removeFailed:ee=>{delete s[ee]},destroy:()=>{s={}}}};let Jp=0;const vu=()=>{const e=()=>Math.round(Ab()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Zw=e=>e+Jp+++vu(),Qp=()=>{let e=[];const n=J=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[J.toLowerCase()]||"dat",s=(J,ee,fe,ke,be)=>{if(oe(J))return i({id:J,name:ke,filename:be,blob:ee,base64:fe});if(Wt(J))return i(J);throw new Error("Unknown input type")},i=J=>{if(!J.blob||!J.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const ee=J.id||Zw("blobid"),fe=J.name||ee,ke=J.blob;return{id:Dt(ee),name:Dt(fe),filename:Dt(J.filename||fe+"."+n(ke.type)),blob:Dt(ke),base64:Dt(J.base64),blobUri:Dt(J.blobUri||URL.createObjectURL(ke)),uri:Dt(J.uri)}},u=J=>{x(J.id())||e.push(J)},f=J=>us(e,J).getOrUndefined(),x=J=>f(ee=>ee.id()===J);return{create:s,add:u,get:x,getByUri:J=>f(ee=>ee.blobUri()===J),getByData:(J,ee)=>f(fe=>fe.base64()===J&&fe.blob().type===ee),findFirst:f,removeByUri:J=>{e=Cn(e,ee=>ee.blobUri()===J?(URL.revokeObjectURL(ee.blobUri()),!1):!0)},destroy:()=>{De(e,J=>{URL.revokeObjectURL(J.blobUri())}),e=[]}}},Sf=(e,n)=>{const s={},i=(be,Ee)=>be?be.replace(/\/$/,"")+"/"+Ee.replace(/^\//,""):Ee,u=(be,Ee)=>new Promise((Ye,qe)=>{const tt=new XMLHttpRequest;tt.open("POST",n.url),tt.withCredentials=n.credentials,tt.upload.onprogress=$t=>{Ee($t.loaded/$t.total*100)},tt.onerror=()=>{qe("Image upload failed due to a XHR Transport error. Code: "+tt.status)},tt.onload=()=>{if(tt.status<200||tt.status>=300){qe("HTTP Error: "+tt.status);return}const $t=JSON.parse(tt.responseText);if(!$t||!oe($t.location)){qe("Invalid JSON: "+tt.responseText);return}Ye(i(n.basePath,$t.location))};const lt=new FormData;lt.append("file",be.blob(),be.filename()),tt.send(lt)}),f=Be(n.handler)?n.handler:u,x=()=>new Promise(be=>{be([])}),T=(be,Ee)=>({url:Ee,blobInfo:be,status:!0}),D=(be,Ee)=>({url:"",blobInfo:be,status:!1,error:Ee}),F=(be,Ee)=>{zt.each(s[be],Ye=>{Ye(Ee)}),delete s[be]},G=(be,Ee,Ye)=>(e.markPending(be.blobUri()),new Promise(qe=>{let tt,lt;try{const $t=()=>{tt&&(tt.close(),lt=ot)},nn=_t=>{$t(),e.markUploaded(be.blobUri(),_t),F(be.blobUri(),T(be,_t)),qe(T(be,_t))},On=_t=>{$t(),e.removeFailed(be.blobUri()),F(be.blobUri(),D(be,_t)),qe(D(be,_t))};lt=_t=>{_t<0||_t>100||te.from(tt).orThunk(()=>te.from(Ye).map(Ht)).each(vt=>{tt=vt,vt.progressBar.value(_t)})},Ee(be,lt).then(nn,_t=>{On(oe(_t)?{message:_t}:_t)})}catch($t){qe(D(be,$t))}})),J=be=>be===u,ee=be=>{const Ee=be.blobUri();return new Promise(Ye=>{s[Ee]=s[Ee]||[],s[Ee].push(Ye)})},fe=(be,Ee)=>(be=zt.grep(be,Ye=>!e.isUploaded(Ye.blobUri())),Promise.all(zt.map(be,Ye=>e.isPending(Ye.blobUri())?ee(Ye):G(Ye,f,Ee))));return{upload:(be,Ee)=>!n.url&&J(f)?x():fe(be,Ee)}},G1=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),nA=(e,n)=>Sf(n,{url:ly(e),basePath:cy(e),credentials:uy(e),handler:O2(e)}),yR=e=>{const n=xR(),s=nA(e,n);return{upload:(i,u=!0)=>s.upload(i,u?G1(e):void 0)}},bN=(e,n)=>e.dom.isEmpty(n.dom)&&ut(e.schema.getTextBlockElements()[Se(n)]),vN=e=>n=>{bN(e,n)&&M(n,$e.fromHtml('<br data-mce-bogus="1" />'))},u7=e=>{const n=Qp();let s,i;const u=xR(),f=[],x=tt=>lt=>e.selection?tt(lt):[],T=tt=>tt+(tt.indexOf("?")===-1?"?":"&")+new Date().getTime(),D=(tt,lt,$t)=>{let nn=0;do nn=tt.indexOf(lt,nn),nn!==-1&&(tt=tt.substring(0,nn)+$t+tt.substr(nn+lt.length),nn+=$t.length-lt.length+1);while(nn!==-1);return tt},F=(tt,lt,$t)=>{const nn=`src="${$t}"${$t===In.transparentSrc?' data-mce-placeholder="1"':""}`;return tt=D(tt,`src="${lt}"`,nn),tt=D(tt,'data-mce-src="'+lt+'"','data-mce-src="'+$t+'"'),tt},G=(tt,lt)=>{De(e.undoManager.data,$t=>{$t.type==="fragmented"?$t.fragments=Ze($t.fragments,nn=>F(nn,tt,lt)):$t.content=F($t.content,tt,lt)})},J=(tt,lt)=>{const $t=e.convertURL(lt,"src");G(tt.src,lt),Mr($e.fromDom(tt),{src:Vi(e)?T(lt):lt,"data-mce-src":$t})},ee=()=>(s||(s=nA(e,u)),Ee().then(x(tt=>{const lt=Ze(tt,$t=>$t.blobInfo);return s.upload(lt,G1(e)).then(x($t=>{const nn=[];let On=!1;const _t=Ze($t,(vt,Ut)=>{const{blobInfo:Dn,image:ho}=tt[Ut];let Cs=!1;return vt.status&&yr(e)?(vt.url&&!eo(ho.src,vt.url)&&(On=!0),n.removeByUri(ho.src),Cf(e)||J(ho,vt.url)):vt.error&&(vt.error.remove&&(G(ho.src,In.transparentSrc),nn.push(ho),Cs=!0),e7(e,vt.error.message)),{element:ho,status:vt.status,uploadUri:vt.url,blobInfo:Dn,removed:Cs}});return nn.length>0&&!Cf(e)?e.undoManager.transact(()=>{De(le(nn),vt=>{const Ut=Za(vt);U(vt),Ut.each(vN(e)),n.removeByUri(vt.dom.src)})}):On&&e.undoManager.dispatchChange(),_t}))}))),fe=()=>Al(e)?ee():Promise.resolve([]),ke=tt=>qo(f,lt=>lt(tt)),be=tt=>{f.push(tt)},Ee=()=>(i||(i=c7(u,n)),i.findAll(e.getBody(),ke).then(x(tt=>{const lt=Cn(tt,$t=>oe($t)?(eA(e,$t),!1):$t.uriType!=="blob");return Cf(e)||De(lt,$t=>{G($t.image.src,$t.blobInfo.blobUri()),$t.image.src=$t.blobInfo.blobUri(),$t.image.removeAttribute("data-mce-src")}),lt}))),Ye=()=>{n.destroy(),u.destroy(),i=s=null},qe=tt=>tt.replace(/src="(blob:[^"]+)"/g,(lt,$t)=>{const nn=u.getResultUri($t);if(nn)return'src="'+nn+'"';let On=n.getByUri($t);return On||(On=Vo(e.editorManager.get(),(_t,vt)=>_t||vt.editorUpload&&vt.editorUpload.blobCache.getByUri($t),void 0)),On?'src="data:'+On.blob().type+";base64,"+On.base64()+'"':lt});return e.on("SetContent",()=>{Al(e)?fe():Ee()}),e.on("RawSaveContent",tt=>{tt.content=qe(tt.content)}),e.on("GetContent",tt=>{tt.source_view||tt.format==="raw"||tt.format==="tree"||(tt.content=qe(tt.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",tt=>{De(tt,lt=>{const $t=lt.attr("src");if(!$t||n.getByUri($t))return;const nn=u.getResultUri($t);nn&&lt.attr("src",nn)})})}),{blobCache:n,addFilter:be,uploadImages:ee,uploadImagesAuto:fe,scanForImages:Ee,destroy:Ye}},d7=e=>{const n=e.dom,s=e.schema.type,i={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{n.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{n.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},x={inline:"s",remove:"all",preserve_attributes:["class","style"]};return s!=="html4"?[x,u,f]:[u,x,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,x)=>An(u)&&u.hasAttribute("href"),onformat:(u,f,x)=>{zt.each(x,(T,D)=>{n.setAttrib(u,D,T)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return(f=u==null?void 0:u.customValue)!==null&&f!==void 0?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return zt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{i[u]={block:u,remove:"all"}}),i},wR={remove_similar:!0,inherit:!1},Nv={selector:"td,th",...wR},xN={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Nv},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Nv},tablecellbordercolor:{styles:{borderColor:"%value"},...Nv},tablecellclass:{classes:["%value"],...Nv},tableclass:{selector:"table",classes:["%value"],...wR},tablecellborderstyle:{styles:{borderStyle:"%value"},...Nv},tablecellborderwidth:{styles:{borderWidth:"%value"},...Nv}},yN=Dt(xN),CR=e=>{const n={},s=x=>ut(x)?n[x]:n,i=x=>Qn(n,x),u=(x,T)=>{x&&(oe(x)?(jt(T)||(T=[T]),De(T,D=>{Wn(D.deep)&&(D.deep=!Hu(D)),Wn(D.split)&&(D.split=!Hu(D)||dl(D)),Wn(D.remove)&&Hu(D)&&!dl(D)&&(D.remove="none"),Hu(D)&&dl(D)&&(D.mixed=!0,D.block_expand=!0),oe(D.classes)&&(D.classes=D.classes.split(/\s+/))}),n[x]=T):Yt(x,(D,F)=>{u(F,D)}))},f=x=>(x&&n[x]&&delete n[x],n);return u(d7(e)),u(yN()),u(z0(e)),{get:s,has:i,register:u,unregister:f}},SR=zt.each,nh=Jr.DOM,wN=e=>ut(e)&&Wt(e),CN=(e,n)=>{const s=n&&n.schema||Er({}),i=(D,F)=>{F.classes.length>0&&nh.addClass(D,F.classes.join(" ")),nh.setAttribs(D,F.attrs)},u=D=>{const F=oe(D)?{name:D,classes:[],attrs:{}}:D,G=nh.create(F.name);return i(G,F),G},f=(D,F)=>{const G=s.getElementRule(D.nodeName.toLowerCase()),J=G==null?void 0:G.parentsRequired;return J&&J.length?F&&We(J,F)?F:J[0]:!1},x=(D,F,G)=>{let J;const ee=F[0],fe=wN(ee)?ee.name:void 0,ke=f(D,fe);if(ke)fe===ke?(J=ee,F=F.slice(1)):J=ke;else if(ee)J=ee,F=F.slice(1);else if(!G)return D;const be=J?u(J):nh.create("div");be.appendChild(D),G&&zt.each(G,Ye=>{const qe=u(Ye);be.insertBefore(qe,D)});const Ee=wN(J)?J.siblings:void 0;return x(be,F,Ee)},T=nh.create("div");if(e.length>0){const D=e[0],F=u(D),G=wN(D)?D.siblings:void 0;T.appendChild(x(F,e.slice(1),G))}return T},h7=e=>{e=zt.trim(e);let n="div";const s={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(i,u,f,x,T)=>{switch(u){case"#":s.attrs.id=f;break;case".":s.classes.push(f);break;case":":zt.inArray("checked disabled enabled read-only required".split(" "),f)!==-1&&(s.attrs[f]=f);break}if(x==="["){const D=T.match(/([\w\-]+)(?:\=\"([^\"]+))?/);D&&(s.attrs[D[1]]=D[2])}return""})),s.name=n||"div",s},kf=e=>oe(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),zt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const s=zt.map(n.split(/(?:~\+|~|\+)/),h7),i=s.pop();return s.length&&(i.siblings=s),i}).reverse()):[],JY=(e,n)=>{let s="",i=P2(e);if(i==="")return"";const u=ee=>oe(ee)?ee.replace(/%(\w+)/g,""):"",f=(ee,fe)=>nh.getStyle(fe??e.getBody(),ee,!0);if(oe(n)){const ee=e.formatter.get(n);if(!ee)return"";n=ee[0]}if("preview"in n){const ee=n.preview;if(ee===!1)return"";i=ee||i}let x=n.block||n.inline||"span",T;const D=kf(n.selector);D.length>0?(D[0].name||(D[0].name=x),x=n.selector,T=CN(D,e)):T=CN([x],e);const F=nh.select(x,T)[0]||T.firstChild;SR(n.styles,(ee,fe)=>{const ke=u(ee);ke&&nh.setStyle(F,fe,ke)}),SR(n.attributes,(ee,fe)=>{const ke=u(ee);ke&&nh.setAttrib(F,fe,ke)}),SR(n.classes,ee=>{const fe=u(ee);nh.hasClass(F,fe)||nh.addClass(F,fe)}),e.dispatch("PreviewFormats"),nh.setStyles(T,{position:"absolute",left:-65535}),e.getBody().appendChild(T);const G=f("fontSize"),J=/px$/.test(G)?parseInt(G,10):0;return SR(i.split(" "),ee=>{let fe=f(ee,F);if(!(ee==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(fe)&&(fe=f(ee),Cb(fe).toLowerCase()==="#ffffff"))&&!(ee==="color"&&Cb(fe).toLowerCase()==="#000000")){if(ee==="font-size"&&/em|%$/.test(fe)){if(J===0)return;fe=parseFloat(fe)/(/%$/.test(fe)?100:1)*J+"px"}ee==="border"&&fe&&(s+="padding:0 2px;"),s+=ee+":"+fe+";"}}),e.dispatch("AfterPreviewFormats"),nh.remove(T),s},QY=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},SN=e=>{const n=CR(e),s=Ir({});return QY(e),EP(e),Cf(e)||i$(s,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(i,u,f)=>{JL(e,i,u,f)},remove:(i,u,f,x)=>{g8(e,i,u,f,x)},toggle:(i,u,f)=>{f8(e,i,u,f)},match:(i,u,f,x)=>Gk(e,i,u,f,x),closest:i=>KL(e,i),matchAll:(i,u)=>u8(e,i,u),matchNode:(i,u,f,x)=>d8(e,i,u,f,x),canApply:i=>h8(e,i),formatChanged:(i,u,f,x)=>m8(e,s,i,u,f,x),getCssText:it(JY,e)}},q1=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},g7=(e,n,s)=>{const i=Ir(!1),u=D=>{jk(n,!1,s),n.add({},D)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",D=>{const F=D.command;q1(F)||(FL(n,s),n.beforeChange())}),e.on("ExecCommand",D=>{const F=D.command;q1(F)||u(D)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",u),e.on("dragend",u),e.on("keyup",D=>{const F=D.keyCode;if(D.isDefaultPrevented())return;const G=In.os.isMacOS()&&D.key==="Meta";(F>=33&&F<=36||F>=37&&F<=40||F===45||D.ctrlKey||G)&&(u(),e.nodeChanged()),(F===46||F===8)&&e.nodeChanged(),i.get()&&n.typing&&!Vw($w(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),i.set(!1),e.nodeChanged())}),e.on("keydown",D=>{const F=D.keyCode;if(D.isDefaultPrevented())return;if(F>=33&&F<=36||F>=37&&F<=40||F===45){n.typing&&u(D);return}const G=D.ctrlKey&&!D.altKey||D.metaKey;if((F<16||F>20)&&F!==224&&F!==91&&!n.typing&&!G){n.beforeChange(),jk(n,!0,s),n.add({},D),i.set(!0);return}(In.os.isMacOS()?D.metaKey:D.ctrlKey&&!D.altKey)&&n.beforeChange()}),e.on("mousedown",D=>{n.typing&&u(D)});const f=D=>D.inputType==="insertReplacementText",x=D=>D.inputType==="insertText"&&D.data===null,T=D=>D.inputType==="insertFromPaste"||D.inputType==="insertFromDrop";e.on("input",D=>{D.inputType&&(f(D)||x(D)||T(D))&&u(D)}),e.on("AddUndo Undo Redo ClearUndos",D=>{D.isDefaultPrevented()||e.nodeChanged()})},kN=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},kR=e=>{const n=Ji(),s=Ir(0),i=Ir(0),u={data:[],typing:!1,beforeChange:()=>{XL(e,s,n)},add:(f,x)=>aR(e,u,i,s,n,f,x),dispatchChange:()=>{e.setDirty(!0);const f=$w(e);f.bookmark=N0(e.selection),e.dispatch("change",{level:f,lastLevel:Xs(u.data,i.get()).getOrUndefined()})},undo:()=>YL(e,u,s,i),redo:()=>jL(e,i,u.data),clear:()=>{iR(e,u,i)},reset:()=>{ZL(e,u)},hasUndo:()=>GL(e,u,i),hasRedo:()=>qL(e,u,i),transact:f=>l8(e,u,s,f),ignore:f=>{lR(e,s,f)},extra:(f,x)=>{c8(e,u,i,f,x)}};return Cf(e)||g7(e,u,s),kN(e),u},AN=[9,27,_n.HOME,_n.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,_n.DOWN,_n.UP,_n.LEFT,_n.RIGHT].concat(In.browser.isFirefox()?[224]:[]),TN="data-mce-placeholder",EN=e=>e.type==="keydown"||e.type==="keyup",Dm=e=>{const n=e.keyCode;return n===_n.BACKSPACE||n===_n.DELETE},f7=e=>{if(EN(e)){const n=e.keyCode;return!Dm(e)&&(_n.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||We(AN,n))}else return!1},m7=e=>EN(e)&&!(Dm(e)||e.type==="keyup"&&e.keyCode===229),p7=(e,n,s)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const i=n.firstElementChild;return i?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:s===i.nodeName.toLowerCase():!0}else return!1},b7=e=>{var n;const s=e.dom,i=Fl(e),u=(n=Dh(e))!==null&&n!==void 0?n:"",f=(x,T)=>{if(f7(x))return;const D=e.getBody(),F=m7(x)?!1:p7(s,D,i);(s.getAttrib(D,TN)!==""!==F||T)&&(s.setAttrib(D,TN,F?u:null),Zl(e,F),e.on(F?"keydown":"keyup",f),e.off(F?"keyup":"keydown",f))};so(u)&&e.on("init",x=>{f(x,!0),e.on("change SetContent ExecCommand",f),e.on("paste",T=>vd.setEditorTimeout(e,()=>f(T)))})},v7=(e,n)=>({block:e,position:n}),x7=(e,n)=>({from:e,to:n}),AR=(e,n)=>{const s=$e.fromDom(e),i=$e.fromDom(n.container());return bv(s,i).map(u=>v7(u,n))},y7=e=>!(Li(e.to.block,e.from.block)||Li(e.from.block,e.to.block)),w7=e=>!rs(e.from.block,e.to.block),Gw=(e,n)=>Hr(n,u=>Eb(u)||Lt(u.dom),u=>rs(u,e)).filter(Jo).getOr(e),C7=(e,n)=>{const s=$e.fromDom(e);return rs(Gw(s,n.from.block),Gw(s,n.to.block))},S7=e=>ar(e.from.block.dom)===!1&&ar(e.to.block.dom)===!1,ej=e=>{const n=s=>Vc(s)||zc(s.dom)||Gf(s);return n(e.from.block)&&n(e.to.block)},qw=(e,n,s,i)=>rr(i.position.getNode())&&!Sl(e,i.block)?dm(!1,i.block.dom).bind(u=>u.isEqual(i.position)?hu(s,n,u).bind(f=>AR(n,f)):te.some(i)).getOr(i):i,k7=(e,n,s,i)=>{const u=AR(n,At.fromRangeStart(i)),f=u.bind(x=>hu(s,n,x.position).bind(T=>AR(n,T).map(D=>qw(e,n,s,D))));return Oo(u,f,x7).filter(x=>w7(x)&&C7(n,x)&&S7(x)&&ej(x)&&y7(x))},TR=(e,n,s,i)=>i.collapsed?k7(e,n,s,i):te.none(),A7=(e,n)=>{const s=li(e);return ur(s,i=>n.isBlock(Se(i))).fold(Dt(s),i=>s.slice(0,i))},_N=(e,n)=>{const s=A7(e,n);return De(s,U),s},ON=(e,n,s)=>{const i=xf(s,n);return us(i.reverse(),u=>Sl(e,u)).each(U)},T7=(e,n)=>Cn(qh(n),s=>!Sl(e,s)).length===0,Iv=(e,n,s,i,u)=>{if(Sl(i,s))return Eh(s),cc(s.dom);T7(i,u)&&Sl(i,n)&&w(u,$e.fromTag("br"));const f=Yc(s.dom,At.before(u.dom));return De(_N(n,i),x=>{w(u,x)}),ON(i,e,n),f},Fv=(e,n)=>e.isInline(Se(n)),oA=(e,n,s,i)=>{if(Sl(i,s)){if(Sl(i,n)){const x=Qs((T=>{const D=(F,G)=>Ki(F).fold(()=>G,J=>Fv(i,J)?D(J,G.concat(hd(J))):G);return D(T,[])})(s),(T,D)=>(O(T,D),D),Yd());Y(n),M(n,x)}return U(s),cc(n.dom)}const u=gu(s.dom);return De(_N(n,i),f=>{M(s,f)}),ON(i,e,n),u},sA=(e,n)=>{const s=xf(n,e);return te.from(s[s.length-1])},Bv=(e,n)=>Li(n,e)?sA(n,e):te.none(),eb=(e,n)=>{dm(e,n.dom).bind(s=>te.from(s.getNode())).map($e.fromDom).filter(cg).each(U)},Kw=(e,n,s,i)=>(eb(!0,n),eb(!1,s),Bv(n,s).fold(it(oA,e,n,s,i),it(Iv,e,n,s,i))),Jw=(e,n,s,i,u)=>n?Kw(e,i,s,u):Kw(e,s,i,u),rA=(e,n)=>{const s=$e.fromDom(e.getBody());return TR(e.schema,s.dom,n,e.selection.getRng()).map(u=>()=>{Jw(s,n,u.from.block,u.to.block,e.schema).each(f=>{e.selection.setRng(f.toRange())})})},ER=(e,n,s)=>{const i=n.getRng();return Oo(bv(e,$e.fromDom(i.startContainer)),bv(e,$e.fromDom(i.endContainer)),(u,f)=>rs(u,f)?te.none():te.some(()=>{i.deleteContents(),Jw(e,!0,u,f,s).each(x=>{n.setRng(x.toRange())})})).getOr(te.none())},aA=(e,n)=>{const s=$e.fromDom(n),i=it(rs,e);return Br(s,Eb,i).isSome()},RN=(e,n)=>aA(e,n.startContainer)||aA(e,n.endContainer),DN=(e,n)=>{const s=Yc(e.dom,At.fromRangeStart(n)).isNone(),i=lc(e.dom,At.fromRangeEnd(n)).isNone();return!RN(e,n)&&s&&i},K1=e=>te.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),MN=e=>{const n=$e.fromDom(e.getBody()),s=e.selection.getRng();return DN(n,s)?K1(e):ER(n,e.selection,e.schema)},iA=(e,n)=>e.selection.isCollapsed()?te.none():MN(e),Af=(e,n,s,i,u)=>te.from(n._selectionOverrides.showCaret(e,s,i,u)),lA=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},J1=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?te.none():te.some(lA(n)),PN=(e,n,s)=>{const i=Ey(1,e.getBody(),n),u=At.fromRangeStart(i),f=u.getNode();if(cm(f))return Af(1,e,f,!u.isAtEnd(),!1);const x=u.getNode(!0);if(cm(x))return Af(1,e,x,!1,!1);const T=Nh(e.dom.getRoot(),u.getNode());return cm(T)?Af(1,e,T,!1,s):te.none()},cA=(e,n,s)=>n.collapsed?PN(e,n,s).getOr(n):n,LN=e=>Bp(e)||P1(e),Mm=e=>Hp(e)||rw(e),tb=(e,n)=>{qt(n)&&n.data.length===0&&e.remove(n)},oh=(e,n,s,i,u,f)=>{Af(i,e,f.getNode(!u),u,!0).each(x=>{if(n.collapsed){const T=n.cloneRange();u?T.setEnd(x.startContainer,x.startOffset):T.setStart(x.endContainer,x.endOffset),T.deleteContents()}else n.deleteContents();e.selection.setRng(x)}),tb(e.dom,s)},E7=(e,n)=>{const s=e.selection.getRng();if(!qt(s.commonAncestorContainer))return te.none();const i=n?El.Forwards:El.Backwards,u=Bl(e.getBody()),f=it(_y,n?u.next:u.prev),x=n?LN:Mm,T=um(i,e.getBody(),s),D=f(T),F=D&&Jd(n,D);if(!F||!Kb(T,F))return te.none();if(x(F))return te.some(()=>oh(e,s,T.getNode(),i,n,F));const G=f(F);return G&&x(G)&&Kb(F,G)?te.some(()=>oh(e,s,T.getNode(),i,n,G)):te.none()},_R=(e,n)=>E7(e,n),OR=(e,n)=>{const s=e.getBody();return n?cc(s).filter(Bp):gu(s).filter(Hp)},RR=e=>{const n=e.selection.getRng();return!n.collapsed&&(OR(e,!0).exists(s=>s.isEqual(At.fromRangeStart(n)))||OR(e,!1).exists(s=>s.isEqual(At.fromRangeEnd(n))))},_7=e=>ut(e)&&(Eb($e.fromDom(e))||Gf($e.fromDom(e))),kd=Iu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),O7=(e,n)=>{const s=n.getNode(!e),i=e?"after":"before";return An(s)&&s.getAttribute("data-mce-caret")===i},R7=(e,n,s,i,u)=>{const f=x=>u.isInline(x.nodeName.toLowerCase())&&!jd(s,i,e);return J0(!n,s).fold(()=>J0(n,i).fold(dt,f),f)},NN=(e,n,s,i,u)=>{const f=u.getNode(!s);return bv($e.fromDom(n),$e.fromDom(i.getNode())).map(x=>Sl(e,x)?kd.remove(x.dom):kd.moveToElement(f)).orThunk(()=>te.some(kd.moveToElement(f)))},IN=(e,n,s,i)=>hu(n,e,s).bind(u=>_7(u.getNode())||R7(e,n,s,u,i)?te.none():n&&ar(u.getNode())||!n&&ar(u.getNode(!0))?NN(i,e,n,s,u):n&&Hp(s)||!n&&Bp(s)?te.some(kd.moveToPosition(u)):te.none()),D7=(e,n)=>no(n)?te.none():e&&ar(n.nextSibling)?te.some(kd.moveToElement(n.nextSibling)):!e&&ar(n.previousSibling)?te.some(kd.moveToElement(n.previousSibling)):te.none(),M7=(e,n,s)=>s.fold(i=>te.some(kd.remove(i)),i=>te.some(kd.moveToElement(i)),i=>jd(n,i,e)?te.none():te.some(kd.moveToPosition(i))),DR=(e,n,s,i)=>O7(n,s)?D7(n,s.getNode(!n)).orThunk(()=>IN(e,n,s,i)):IN(e,n,s,i).bind(u=>M7(e,s,u)),MR=(e,n,s,i)=>{const u=Ey(n?1:-1,e,s),f=At.fromRangeStart(u),x=$e.fromDom(e);return!n&&Hp(f)?te.some(kd.remove(f.getNode(!0))):n&&Bp(f)?te.some(kd.remove(f.getNode())):!n&&Bp(f)&&KS(x,f,i)?Io(x,f,i).map(T=>kd.remove(T.getNode())):n&&Hp(f)&&L_(x,f,i)?r6(x,f,i).map(T=>kd.remove(T.getNode())):DR(e,n,f,i)},FN=(e,n)=>s=>(e._selectionOverrides.hideFakeCaret(),mv(e,n,$e.fromDom(s)),!0),P7=(e,n)=>s=>{const i=n?At.before(s):At.after(s);return e.selection.setRng(i.toRange()),!0},L7=e=>n=>(e.selection.setRng(n.toRange()),!0),PR=(e,n)=>te.from(Nh(e.getBody(),n)),BN=(e,n)=>{const s=e.selection.getNode();return PR(e,s).filter(ar).fold(()=>MR(e.getBody(),n,e.selection.getRng(),e.schema).map(i=>()=>i.fold(FN(e,n),P7(e,n),L7(e))),()=>te.some(ot))},LR=e=>{De(Vs(e,".mce-offscreen-selection"),U)},HN=(e,n)=>{const s=e.selection.getNode();return ar(s)&&!Pf(s)?PR(e,s.parentNode).filter(ar).fold(()=>te.some(()=>{LR($e.fromDom(e.getBody())),mv(e,n,$e.fromDom(e.selection.getNode())),$p(e)}),()=>te.some(ot)):RR(e)?te.some(()=>{xd(e,e.selection.getRng(),$e.fromDom(e.getBody()))}):te.none()},NR=e=>{const n=e.dom,s=e.selection,i=Nh(e.getBody(),s.getNode());if(Lt(i)&&n.isBlock(i)&&n.isEmpty(i)){const u=n.create("br",{"data-mce-bogus":"1"});n.setHTML(i,""),i.appendChild(u),s.setRng(At.before(u).toRange())}return!0},Qw=(e,n)=>e.selection.isCollapsed()?BN(e,n):HN(e,n),$N=e=>e.hasOwnProperty("text"),zN=e=>e.hasOwnProperty("marker"),Eg=(e,n)=>{const s=(f,x)=>{if(qt(f))return{text:f,offset:x};{const T=n(),D=f.childNodes;return x<D.length?(f.insertBefore(T,D[x]),{marker:T,before:!0}):(f.appendChild(T),{marker:T,before:!1})}},i=s(e.endContainer,e.endOffset);return{start:s(e.startContainer,e.startOffset),end:i}},sh=e=>{var n,s;const{start:i,end:u}=e,f=new window.Range;return $N(i)?f.setStart(i.text,i.offset):zN(i)&&(i.before?f.setStartBefore(i.marker):f.setStartAfter(i.marker),(n=i.marker.parentNode)===null||n===void 0||n.removeChild(i.marker)),$N(u)?f.setEnd(u.text,u.offset):zN(u)&&(u.before?f.setEndBefore(u.marker):f.setEndAfter(u.marker),(s=u.marker.parentNode)===null||s===void 0||s.removeChild(u.marker)),f},Q1=(e,n)=>{var s;const i=e.dom,u=i.getParent(e.selection.getStart(),i.isBlock),f=i.getParent(e.selection.getEnd(),i.isBlock),x=e.getBody();if(((s=u==null?void 0:u.nodeName)===null||s===void 0?void 0:s.toLowerCase())==="div"&&u&&f&&u===x.firstChild&&f===x.lastChild&&!i.isEmpty(x)){const D=u.cloneNode(!1),F=()=>{if(n?G3(e):yf(e),x.firstChild!==u){const G=Eg(e.selection.getRng(),()=>document.createElement("span"));Array.from(x.childNodes).forEach(J=>D.appendChild(J)),x.appendChild(D),e.selection.setRng(sh(G))}};return te.some(F)}return te.none()},VN=(e,n)=>{const s=At.fromRangeStart(e.selection.getRng());return hu(n,e.getBody(),s).filter(i=>n?po(i):_3(i)).bind(i=>Ty(n?0:-1,i)).map(i=>()=>e.selection.select(i))},ex=(e,n)=>e.selection.isCollapsed()?VN(e,n):te.none(),Hv=qt,IR=e=>Hv(e)&&e.data[0]===Qi,FR=e=>Hv(e)&&e.data[e.data.length-1]===Qi,BR=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Qi)},WN=e=>{var n;if(Hv(e.previousSibling))return FR(e.previousSibling)||e.previousSibling.appendData(Qi),e.previousSibling;if(Hv(e))return IR(e)||e.insertData(0,Qi),e;{const s=BR(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(s,e),s}},UN=e=>{var n,s;if(Hv(e.nextSibling))return IR(e.nextSibling)||e.nextSibling.insertData(0,Qi),e.nextSibling;if(Hv(e))return FR(e)||e.appendData(Qi),e;{const i=BR(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(i,e.nextSibling):(s=e.parentNode)===null||s===void 0||s.appendChild(i),i}},$v=(e,n)=>e?WN(n):UN(n),HR=it($v,!0),N7=it($v,!1),XN=(e,n)=>qt(e.container())?$v(n,e.container()):$v(n,e.getNode()),YN=(e,n)=>{const s=n.get();return s&&e.container()===s&&gd(s)},$R=(e,n)=>n.fold(s=>{lm(e.get());const i=HR(s);return e.set(i),te.some(At(i,i.length-1))},s=>cc(s).map(i=>{if(YN(i,e)){const u=e.get();return At(u,1)}else{lm(e.get());const u=XN(i,!0);return e.set(u),At(u,1)}}),s=>gu(s).map(i=>{if(YN(i,e)){const u=e.get();return At(u,u.length-1)}else{lm(e.get());const u=XN(i,!1);return e.set(u),At(u,u.length-1)}}),s=>{lm(e.get());const i=N7(s);return e.set(i),te.some(At(i,1))}),zR=(e,n)=>{for(let s=0;s<e.length;s++){const i=e[s].apply(null,n);if(i.isSome())return i}return te.none()},Kc=Iu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),jN=(e,n)=>{const s=Xc(n,e);return s||e},VR=(e,n,s)=>{const i=Y3(s),u=jN(n,i.container());return Em(e,u,i).fold(()=>lc(u,i).bind(it(Em,e,u)).map(f=>Kc.before(f)),te.none)},I7=(e,n)=>hm(e,n)===null,ZN=(e,n,s)=>Em(e,n,s).filter(it(I7,n)),F7=(e,n,s)=>{const i=j3(s);return ZN(e,n,i).bind(u=>Yc(u,i).isNone()?te.some(Kc.start(u)):te.none())},B7=(e,n,s)=>{const i=Y3(s);return ZN(e,n,i).bind(u=>lc(u,i).isNone()?te.some(Kc.end(u)):te.none())},H7=(e,n,s)=>{const i=j3(s),u=jN(n,i.container());return Em(e,u,i).fold(()=>Yc(u,i).bind(it(Em,e,u)).map(f=>Kc.after(f)),te.none)},GN=e=>!V_(tx(e)),Tf=(e,n,s)=>zR([VR,F7,B7,H7],[e,n,s]).filter(GN),tx=e=>e.fold(Ao,Ao,Ao,Ao),uA=e=>e.fold(Dt("before"),Dt("start"),Dt("end"),Dt("after")),dA=e=>e.fold(Kc.before,Kc.before,Kc.after,Kc.after),WR=e=>e.fold(Kc.start,Kc.start,Kc.end,Kc.end),$7=(e,n)=>uA(e)===uA(n)&&tx(e)===tx(n),z7=(e,n,s,i,u,f)=>Oo(Em(n,s,i),Em(n,s,u),(x,T)=>x!==T&&X3(s,x,T)?Kc.after(e?x:T):f).getOr(f),qN=(e,n)=>e.fold(wt,s=>!$7(s,n)),V7=(e,n,s,i,u)=>{const f=Jd(e,u);return hu(e,s,f).map(it(Jd,e)).fold(()=>i.map(dA),D=>Tf(n,s,D).map(it(z7,e,n,s,f,D)).filter(it(qN,i))).filter(GN)},W7=(e,n)=>e?n.fold(V(te.some,Kc.start),te.none,V(te.some,Kc.after),te.none):n.fold(te.none,V(te.some,Kc.before),te.none,V(te.some,Kc.end)),UR=(e,n,s,i)=>{const u=Jd(e,i),f=Tf(n,s,u);return Tf(n,s,u).bind(it(W7,e)).orThunk(()=>V7(e,n,s,f,i))},U7=e=>Be(e.selection.getSel().modify),KN=(e,n,s)=>{const i=e?1:-1;return n.setRng(At(s.container(),s.offset()+i).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},X7=(e,n)=>{const s=n.selection.getRng(),i=e?At.fromRangeEnd(s):At.fromRangeStart(s);return U7(n)?e&&_h(i)?KN(!0,n.selection,i):!e&&ug(i)?KN(!1,n.selection,i):!1:!1};var Ef;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Ef||(Ef={}));const hA=(e,n)=>e===El.Backwards?ds(n):n,Y7=(e,n,s)=>e===El.Forwards?n.next(s):n.prev(s),j7=(e,n,s,i)=>rr(i.getNode(n===El.Forwards))?Ef.Br:jd(s,i)===!1?Ef.Block:Ef.Wrap,eC=(e,n,s,i)=>{const u=Bl(s);let f=i;const x=[];for(;f;){const T=Y7(n,u,f);if(!T)break;if(rr(T.getNode(!1)))return n===El.Forwards?{positions:hA(n,x).concat([T]),breakType:Ef.Br,breakAt:te.some(T)}:{positions:hA(n,x),breakType:Ef.Br,breakAt:te.some(T)};if(!T.isVisible()){f=T;continue}if(e(f,T)){const D=j7(s,n,f,T);return{positions:hA(n,x),breakType:D,breakAt:te.some(T)}}x.push(T),f=T}return{positions:hA(n,x),breakType:Ef.Eol,breakAt:te.none()}},tC=(e,n,s,i)=>n(s,i).breakAt.map(u=>{const f=n(s,u).positions;return e===El.Backwards?f.concat(u):[u].concat(f)}).getOr([]),XR=(e,n)=>Vo(e,(s,i)=>s.fold(()=>te.some(i),u=>Oo(qn(u.getClientRects()),qn(i.getClientRects()),(f,x)=>{const T=Math.abs(n-f.left);return Math.abs(n-x.left)<=T?i:u}).or(s)),te.none()),gA=(e,n)=>qn(n.getClientRects()).bind(s=>XR(e,s.left)),nb=it(eC,At.isAbove,-1),nC=it(eC,At.isBelow,1),JN=it(tC,-1,nb),QN=it(tC,1,nC),eI=(e,n)=>nb(e,n).breakAt.isNone(),tI=(e,n)=>nC(e,n).breakAt.isNone(),Z7=e=>cc(e).map(n=>[n].concat(nC(e,n).positions)).getOr([]),G7=e=>gu(e).map(n=>nb(e,n).positions.concat(n)).getOr([]),q7=(e,n)=>gA(JN(e,n),n),K7=(e,n)=>gA(QN(e,n),n),J7=ar,nI=(e,n)=>Math.abs(e.left-n),Q7=(e,n)=>Math.abs(e.right-n),zh=e=>hr(e,"node"),fA=(e,n)=>Ne(e,(s,i)=>{const u=Math.min(nI(s,n),Q7(s,n)),f=Math.min(nI(i,n),Q7(i,n));return f===u&&zh(i)&&J7(i.node)||f<u?i:s}),oI=e=>{const n=s=>Ze(s,i=>{const u=dg(i);return u.node=e,u});if(An(e))return n(e.getClientRects());if(qt(e)){const s=e.ownerDocument.createRange();return s.setStart(e,0),s.setEnd(e,e.data.length),n(s.getClientRects())}else return[]},YR=e=>vr(e,oI);var oC;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(oC||(oC={}));const sI=(e,n,s,i)=>{let u=i;for(;u=Gb(u,e,i2,n);)if(s(u))return},rI=(e,n,s,i,u,f)=>{let x=0;const T=[],D=J=>{let ee=YR([J]);e===-1&&(ee=ee.reverse());for(let fe=0;fe<ee.length;fe++){const ke=ee[fe];if(!s(ke,F)){if(T.length>0&&n(ke,gt(T))&&x++,ke.line=x,u(ke))return!0;T.push(ke)}}return!1},F=gt(f.getClientRects());if(!F)return T;const G=f.getNode();return G&&(D(G),sI(e,i,D,G)),T},aI=(e,n)=>n.line>e,ez=(e,n)=>n.line===e,tz=it(rI,oC.Up,aa,Ob),nz=it(rI,oC.Down,Ob,aa),zv=e=>gt(e.getClientRects()),iI=(e,n,s,i)=>{const u=Bl(n);let f,x,T,D;const F=[];let G=0;e===1?(f=u.next,x=Ob,T=aa,D=At.after(i)):(f=u.prev,x=aa,T=Ob,D=At.before(i));const J=zv(D);do{if(!D.isVisible())continue;const ee=zv(D);if(T(ee,J))continue;F.length>0&&x(ee,gt(F))&&G++;const fe=dg(ee);if(fe.position=D,fe.line=G,s(fe))return F;F.push(fe)}while(D=f(D));return F},jR=e=>n=>aI(e,n),mA=e=>n=>ez(e,n),_g=(e,n)=>{e.selection.setRng(n),Tm(e,e.selection.getRng())},ZR=(e,n,s)=>te.some(cA(e,n,s)),lI=(e,n,s,i,u,f)=>{const x=n===El.Forwards,T=Bl(e.getBody()),D=it(_y,x?T.next:T.prev),F=x?i:u;if(!s.collapsed){const ke=Rb(s);if(f(ke))return Af(n,e,ke,n===El.Backwards,!1);if(RR(e)){const be=s.cloneRange();return be.collapse(n===El.Backwards),te.from(be)}}const G=um(n,e.getBody(),s);if(F(G))return J1(e,G.getNode(!x));let J=D(G);const ee=ra(s);if(J)J=Jd(x,J);else return ee?te.some(s):te.none();if(F(J))return Af(n,e,J.getNode(!x),x,!1);const fe=D(J);return fe&&F(fe)&&Kb(J,fe)?Af(n,e,fe.getNode(!x),x,!1):ee?ZR(e,J.toRange(),!1):te.none()},cI=(e,n,s,i,u,f)=>{const x=um(n,e.getBody(),s),T=gt(x.getClientRects()),D=n===oC.Down,F=e.getBody();if(!T)return te.none();if(RR(e)){const Ee=D?At.fromRangeEnd(s):At.fromRangeStart(s);return(D?K7:q7)(F,Ee).orThunk(()=>te.from(Ee)).map(qe=>qe.toRange())}const J=(D?nz:tz)(F,jR(1),x),ee=Cn(J,mA(1)),fe=T.left,ke=fA(ee,fe);if(ke&&f(ke.node)){const Ee=Math.abs(fe-ke.left),Ye=Math.abs(fe-ke.right);return Af(n,e,ke.node,Ee<Ye,!1)}let be;if(i(x)?be=x.getNode():u(x)?be=x.getNode(!0):be=Rb(s),be){const Ee=iI(n,F,jR(1),be);let Ye=fA(Cn(Ee,mA(1)),fe);if(Ye||(Ye=gt(Cn(Ee,mA(0))),Ye))return ZR(e,Ye.position.toRange(),!1)}return ee.length===0?GR(e,D).filter(D?u:i).map(Ee=>cA(e,Ee.toRange(),!1)):te.none()},GR=(e,n)=>{const s=e.selection.getRng(),i=n?At.fromRangeEnd(s):At.fromRangeStart(s),u=NE(i.container(),e.getBody());if(n){const f=nC(u,i);return Ns(f.positions)}else{const f=nb(u,i);return qn(f.positions)}},oz=(e,n,s)=>GR(e,n).filter(s).exists(i=>(e.selection.setRng(i.toRange()),!0)),qR=(e,n)=>{const s=e.dom.createRng();s.setStart(n.container(),n.offset()),s.setEnd(n.container(),n.offset()),e.selection.setRng(s)},sz=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},rh=(e,n,s)=>$R(n,s).map(i=>(qR(e,i),s)),rz=(e,n,s)=>{const i=At.fromRangeStart(e);if(e.collapsed)return i;{const u=At.fromRangeEnd(e);return s?Yc(n,u).getOr(u):lc(n,i).getOr(i)}},az=(e,n,s)=>{const i=e.getBody(),u=rz(e.selection.getRng(),i,s),f=it(pv,e);return UR(s,f,i,u).bind(T=>rh(e,n,T))},Vv=(e,n,s)=>{const i=Ze(Vs($e.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),x=>x.dom),u=Cn(i,e),f=Cn(s,e);De(jr(u,f),it(sz,!1)),De(jr(f,u),it(sz,!0))},uI=(e,n)=>{const s=n.get();if(e.selection.isCollapsed()&&!e.composing&&s){const i=At.fromRangeStart(e.selection.getRng());At.isTextPosition(i)&&!qc(i)&&(qR(e,DE(s,i)),n.set(null))}},iz=(e,n,s,i)=>{if(n.selection.isCollapsed()){const u=Cn(i,e);De(u,f=>{const x=At.fromRangeStart(n.selection.getRng());Tf(e,n.getBody(),x).bind(T=>rh(n,s,T))})}},sC=(e,n,s)=>$b(e)?az(e,n,s).isSome():!1,dI=(e,n,s)=>$b(n)?X7(e,n):!1,lz=e=>{const n=Ir(null),s=it(pv,e);return e.on("NodeChange",i=>{$b(e)&&(Vv(s,e.dom,i.parents),uI(e,n),iz(s,e,n,i.parents))}),n},cz=it(dI,!0),uz=it(dI,!1),rC=(e,n,s)=>{if($b(e)){const i=GR(e,n).getOrThunk(()=>{const u=e.selection.getRng();return n?At.fromRangeEnd(u):At.fromRangeStart(u)});return Tf(it(pv,e),e.getBody(),i).exists(u=>{const f=dA(u);return $R(s,f).exists(x=>(qR(e,x),!0))})}else return!1},dz=(e,n)=>{const s=document.createRange();return s.setStart(e.container(),e.offset()),s.setEnd(n.container(),n.offset()),s},Pm=e=>Oo(cc(e),gu(e),(n,s)=>{const i=Jd(!0,n),u=Jd(!1,s);return lc(e,i).forall(f=>f.isEqual(u))}).getOr(!0),pA=(e,n)=>s=>$R(n,s).map(i=>()=>qR(e,i)),hI=(e,n,s,i)=>{const u=e.getBody(),f=it(pv,e);e.undoManager.ignore(()=>{e.selection.setRng(dz(s,i)),yf(e),Tf(f,u,At.fromRangeStart(e.selection.getRng())).map(WR).bind(pA(e,n)).each(Gn)}),e.nodeChanged()},hz=(e,n)=>{const s=Xc(n,e);return s||e},gz=(e,n,s,i)=>{const u=hz(e.getBody(),i.container()),f=it(pv,e),x=Tf(f,u,i);return x.bind(D=>s?D.fold(Dt(te.some(WR(D))),te.none,Dt(te.some(dA(D))),te.none):D.fold(te.none,Dt(te.some(dA(D))),te.none,Dt(te.some(WR(D))))).map(pA(e,n)).getOrThunk(()=>{const D=df(s,u,i),F=D.bind(G=>Tf(f,u,G));return Oo(x,F,()=>Em(f,u,i).bind(G=>Pm(G)?te.some(()=>{mv(e,s,$e.fromDom(G))}):te.none())).getOrThunk(()=>F.bind(()=>D.map(G=>()=>{s?hI(e,n,i,G):hI(e,n,G,i)})))})},KR=(e,n,s)=>{if(e.selection.isCollapsed()&&$b(e)){const i=At.fromRangeStart(e.selection.getRng());return gz(e,n,s,i)}return te.none()},fz=e=>nd(e)>1,bA=(e,n)=>{const s=$e.fromDom(e.getBody()),i=$e.fromDom(e.selection.getStart()),u=xf(i,s);return ur(u,n).fold(Dt(u),f=>u.slice(0,f))},JR=e=>nd(e)===1,QR=e=>bA(e,n=>e.schema.isBlock(Se(n))||fz(n)),gI=e=>bA(e,n=>e.schema.isBlock(Se(n))),eD=(e,n)=>{const s=it(xO,e);return vr(n,i=>s(i)?[i.dom]:[])},tD=e=>{const n=gI(e);return eD(e,n)},mz=(e,n,s,i)=>{const u=eD(n,i);if(u.length===0)mv(n,e,s);else{const f=wk(s.dom,u);n.selection.setRng(f.toRange())}},aC=(e,n)=>{const s=Cn(QR(e),JR);return Ns(s).bind(i=>{const u=At.fromRangeStart(e.selection.getRng());return q3(n,u,i.dom)&&!rv(i)?te.some(()=>mz(n,e,i,s)):te.none()})},vA=(e,n)=>{const s=n.parentElement;return rr(n)&&!ce(s)&&e.dom.isEmpty(s)},fI=e=>rv($e.fromDom(e)),nD=(e,n)=>{const s=e.selection.getStart(),i=vA(e,s)||fI(s)?wk(s,n):_P(e.selection.getRng(),n);e.selection.setRng(i.toRange())},mI=(e,n)=>{const s=jr(n,tD(e));s.length>0&&nD(e,s)},oD=e=>qt(e.startContainer),xA=e=>e.startOffset===0&&oD(e),sD=(e,n)=>{const s=n.startContainer.parentElement;return!ce(s)&&xO(e,$e.fromDom(s))},iC=e=>{const n=e.startContainer.parentNode,s=e.endContainer.parentNode;return!ce(n)&&!ce(s)&&n.isEqualNode(s)},pz=e=>{const n=e.endContainer;return e.endOffset===(qt(n)?n.length:n.childNodes.length)},pI=e=>iC(e)&&pz(e),bz=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),vz=e=>pI(e)||bz(e),bI=e=>{const n=e.selection.getRng();return xA(n)&&sD(e,n)&&vz(n)},xz=e=>{if(bI(e)){const n=tD(e);return te.some(()=>{yf(e),mI(e,n)})}else return te.none()},yA=(e,n)=>e.selection.isCollapsed()?aC(e,n):xz(e),tj=(e,n)=>Ar(e,s=>fu(s.dom),s=>n.isBlock(Se(s))),yz=e=>tj($e.fromDom(e.selection.getStart()),e.schema),wz=e=>{const n=e.selection.getRng();return n.collapsed&&(oD(n)||e.dom.isEmpty(n.startContainer))&&!yz(e)},lC=e=>(wz(e)&&nD(e,[]),!0),rD=(e,n,s)=>ut(s)?te.some(()=>{e._selectionOverrides.hideFakeCaret(),mv(e,n,$e.fromDom(s))}):te.none(),Cz=(e,n)=>{const s=n?P1:rw,i=n?El.Forwards:El.Backwards,u=um(i,e.getBody(),e.selection.getRng());return s(u)?rD(e,n,u.getNode(!n)):te.from(Jd(n,u)).filter(f=>s(f)&&Kb(u,f)).bind(f=>rD(e,n,f.getNode(!n)))},Sz=(e,n)=>{const s=e.selection.getNode();return Cl(s)?rD(e,n,s):te.none()},aD=(e,n)=>e.selection.isCollapsed()?Cz(e,n):Sz(e,n),kz=e=>Hr(e,n=>Lt(n.dom)||ar(n.dom)).exists(n=>Lt(n.dom)),wA=e=>_a(e??"").getOr(0),vI=(e,n)=>{const s=e||ZT(n)?"margin":"padding",i=o(n,"direction")==="rtl"?"-right":"-left";return s+i},Wv=(e,n,s,i,u,f)=>{const x=vI(s,$e.fromDom(f)),T=wA(e.getStyle(f,x));if(n==="outdent"){const D=Math.max(0,T-i);e.setStyle(f,x,D?D+u:"")}else{const D=T+i+u;e.setStyle(f,x,D)}},xI=(e,n)=>qo(n,s=>{const i=vI(D2(e),s),u=c(s,i).map(wA).getOr(0);return e.dom.getContentEditable(s.dom)!=="false"&&u>0}),CA=e=>{const n=Lm(e);return!e.mode.isReadOnly()&&(n.length>1||xI(e,n))},iD=e=>Xd(e)||Gf(e),lD=e=>Za(e).exists(iD),Lm=e=>Cn(le(e.selection.getSelectedBlocks()),n=>!iD(n)&&!lD(n)&&kz(n)),cD=(e,n)=>{var s,i;if(e.mode.isReadOnly())return;const{dom:u}=e,f=N4(e),x=(i=(s=/[a-z%]+$/i.exec(f))===null||s===void 0?void 0:s[0])!==null&&i!==void 0?i:"px",T=wA(f),D=D2(e);De(Lm(e),F=>{Wv(u,n,D,T,x,F.dom)})},ah=e=>cD(e,"indent"),ob=e=>cD(e,"outdent"),SA=e=>{if(e.selection.isCollapsed()&&CA(e)){const n=e.dom,s=e.selection.getRng(),i=At.fromRangeStart(s),u=n.getParent(s.startContainer,n.isBlock);if(u!==null&&qS($e.fromDom(u),i,e.schema))return te.some(()=>ob(e))}return te.none()},yI=(e,n,s)=>Wr([SA,Qw,_R,(i,u)=>KR(i,n,u),rA,dk,ex,aD,iA,yA,Q1],i=>i(e,s)).filter(i=>e.selection.isEditable()),wI=(e,n)=>{yI(e,n,!1).fold(()=>{e.selection.isEditable()&&(yf(e),$p(e))},Gn)},Az=(e,n)=>{yI(e,n,!0).fold(()=>{e.selection.isEditable()&&G3(e)},Gn)},Tz=(e,n)=>{e.addCommand("delete",()=>{wI(e,n)}),e.addCommand("forwardDelete",()=>{Az(e,n)})},CI=5,Ez=400,SI=e=>e.touches===void 0||e.touches.length!==1?te.none():te.some(e.touches[0]),kI=(e,n)=>{const s=Math.abs(e.clientX-n.x),i=Math.abs(e.clientY-n.y);return s>CI||i>CI},_z=e=>{const n=Ji(),s=Ir(!1),i=y0(u=>{e.dispatch("longpress",{...u,type:"longpress"}),s.set(!0)},Ez);e.on("touchstart",u=>{SI(u).each(f=>{i.cancel();const x={x:f.clientX,y:f.clientY,target:u.target};i.throttle(u),s.set(!1),n.set(x)})},!0),e.on("touchmove",u=>{i.cancel(),SI(u).each(f=>{n.on(x=>{kI(f,x)&&(n.clear(),s.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",u=>{i.cancel(),u.type!=="touchcancel"&&n.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{s.get()?u.preventDefault():e.dispatch("tap",{...u,type:"tap"})})},!0)},uD=(e,n)=>Qn(e,n.nodeName),nx=(e,n)=>qt(n)?!0:An(n)?!uD(e.getBlockElements(),n)&&!jc(n)&&!Fd(e,n)&&!Um(n):!1,kA=(e,n,s)=>Ie(aw($e.fromDom(s),$e.fromDom(n)),i=>uD(e,i.dom)),AI=(e,n)=>{if(qt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||uD(e,n.nextSibling)||Um(n.nextSibling)}return!1},AA=e=>e.dom.create(Fl(e),of(e)),dD=e=>{const n=e.dom,s=e.selection,i=e.schema,u=i.getBlockElements(),f=s.getStart(),x=e.getBody();let T,D,F=null;const G=Fl(e);if(!f||!An(f))return;const J=x.nodeName.toLowerCase();if(!i.isValidChild(J,G.toLowerCase())||kA(u,x,f))return;if(x.firstChild===x.lastChild&&rr(x.firstChild)){T=AA(e),T.appendChild(Yd().dom),x.replaceChild(T,x.firstChild),e.selection.setCursorLocation(T,0),e.nodeChanged();return}let ee=x.firstChild;for(;ee;)if(An(ee)&&pa(i,ee),nx(i,ee)){if(AI(u,ee)){D=ee,ee=ee.nextSibling,n.remove(D);continue}if(!T){if(!F&&e.hasFocus()&&(F=Eg(e.selection.getRng(),()=>document.createElement("span"))),!ee.parentNode){ee=null;break}T=AA(e),x.insertBefore(T,ee)}D=ee,ee=ee.nextSibling,T.appendChild(D)}else T=null,ee=ee.nextSibling;F&&(e.selection.setRng(sh(F)),e.nodeChanged())},TI=(e,n,s)=>{const i=$e.fromDom(AA(e)),u=Yd();M(i,u),s(n,i);const f=document.createRange();return f.setStartBefore(u.dom),f.setEndBefore(u.dom),f},Oz=e=>{e.on("NodeChange",()=>dD(e))},EI=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,Rz=(e,n,s)=>function(i){const u=arguments,f=u[u.length-2],x=f>0?n.charAt(f-1):"";if(x==='"')return i;if(x===">"){const T=n.lastIndexOf("<",f);if(T!==-1&&n.substring(T,f).indexOf('contenteditable="false"')!==-1)return i}return'<span class="'+s+'" data-mce-content="'+e.dom.encode(u[0])+'">'+e.dom.encode(typeof u[1]=="string"?u[1]:u[0])+"</span>"},Dz=(e,n,s)=>{let i=n.length,u=s.content;if(s.format!=="raw"){for(;i--;)u=u.replace(n[i],Rz(e,u,U0(e)));s.content=u}},Mz=(e,n)=>qo(e,s=>{const i=n.match(s);return i!==null&&i[0].length===n.length}),Pz=e=>{const n="contenteditable",s=" "+zt.trim(bd(e))+" ",i=" "+zt.trim(U0(e))+" ",u=EI(s),f=EI(i),x=X0(e);x.length>0&&e.on("BeforeSetContent",T=>{Dz(e,x,T)}),e.parser.addAttributeFilter("class",T=>{let D=T.length;for(;D--;){const F=T[D];u(F)?F.attr(n,"true"):f(F)&&F.attr(n,"false")}}),e.serializer.addAttributeFilter(n,T=>{let D=T.length;for(;D--;){const F=T[D];if(!u(F)&&!f(F))continue;const G=F.attr("data-mce-content");x.length>0&&G?Mz(x,G)?(F.name="#text",F.type=3,F.raw=!0,F.value=G):F.remove():F.attr(n,null)}})},_I=e=>to($e.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),OI=(e,n)=>{n.hasAttribute("data-mce-caret")&&(cp(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},Lz=(e,n)=>{const s=_I(e);if(s){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),OI(e,s);return}e2(s)&&(OI(e,s),e.undoManager.add())}},Ad=e=>{e.on("keyup compositionstart",it(Lz,e))},RI=ar,hD=(e,n,s)=>lI(n,e,s,Bp,Hp,RI),DI=(e,n,s)=>cI(n,e,s,f=>Bp(f)||GS(f),f=>Hp(f)||M_(f),RI),gD=e=>{const n=e.dom.create(Fl(e));return n.innerHTML='<br data-mce-bogus="1">',n},MI=(e,n,s)=>{const i=Bl(e.getBody()),u=it(_y,n===1?i.next:i.prev);if(s.collapsed){const f=e.dom.getParent(s.startContainer,"PRE");if(!f)return;if(!u(At.fromRangeStart(s))){const T=$e.fromDom(gD(e));n===1?A($e.fromDom(f),T):w($e.fromDom(f),T),e.selection.select(T.dom,!0),e.selection.collapse()}}},Nz=(e,n)=>{const s=n?El.Forwards:El.Backwards,i=e.selection.getRng();return hD(s,e,i).orThunk(()=>(MI(e,s,i),te.none()))},Iz=(e,n)=>{const s=n?1:-1,i=e.selection.getRng();return DI(s,e,i).orThunk(()=>(MI(e,s,i),te.none()))},Fz=(e,n)=>{const s=n?e.getEnd(!0):e.getStart(!0);return V_(s)?!n:n},PI=(e,n)=>Nz(e,Fz(e.selection,n)).exists(s=>(_g(e,s),!0)),fD=(e,n)=>Iz(e,n).exists(s=>(_g(e,s),!0)),LI=(e,n)=>oz(e,n,n?Hp:Bp),TA=(e,n)=>OR(e,!n).map(s=>{const i=s.toRange(),u=e.selection.getRng();return n?i.setStart(u.startContainer,u.startOffset):i.setEnd(u.endContainer,u.endOffset),i}).exists(s=>(_g(e,s),!0)),cC=e=>We(["figcaption"],Se(e)),Nm=(e,n,s)=>{const i=it(rs,n);return Hr($e.fromDom(e.container()),u=>s.isBlock(Se(u)),i).filter(cC)},Uv=(e,n,s)=>n?tI(e.dom,s):eI(e.dom,s),EA=(e,n)=>{const s=$e.fromDom(e.getBody()),i=At.fromRangeStart(e.selection.getRng());return Nm(i,s,e.schema).exists(()=>{if(Uv(s,n,i)){const f=TI(e,s,n?M:E);return e.selection.setRng(f),!0}else return!1})},_A=(e,n)=>e.selection.isCollapsed()?EA(e,n):!1,mD=(e,n,s)=>{const i=e.selection.getRng(),u=At.fromRangeStart(i);return e.getBody().firstChild===n&&eI(s,u)?(e.execCommand("InsertNewBlockBefore"),!0):!1},NI=(e,n)=>{const s=e.selection.getRng(),i=At.fromRangeStart(s);return e.getBody().lastChild===n&&tI(n,i)?(e.execCommand("InsertNewBlockAfter"),!0):!1},Bz=(e,n)=>n?te.from(e.dom.getParent(e.selection.getNode(),"details")).map(s=>NI(e,s)).getOr(!1):te.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(s=>te.from(e.dom.getParent(s,"details")).map(i=>mD(e,i,s))).getOr(!1),pD=(e,n)=>Bz(e,n),bD={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Hz=e=>Ze(e,n=>({...bD,...n})),$z=e=>Ze(e,n=>({...bD,...n})),II=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,zz=(e,n)=>vr(Hz(e),s=>II(s,n)?[s]:[]),Vz=(e,n)=>vr($z(e),s=>II(s,n)?[s]:[]),Uo=(e,...n)=>()=>e.apply(null,n),ox=(e,n)=>us(zz(e,n),s=>s.action()),vD=(e,n)=>Wr(Vz(e,n),s=>s.action()),Wz=(e,n)=>{const s=n?El.Forwards:El.Backwards,i=e.selection.getRng();return lI(e,s,i,P1,rw,Cl).exists(u=>(_g(e,u),!0))},Uz=(e,n)=>{const s=n?1:-1,i=e.selection.getRng();return cI(e,s,i,P1,rw,Cl).exists(u=>(_g(e,u),!0))},Xz=(e,n)=>oz(e,n,n?rw:P1),FI=Iu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),OA={...FI,none:e=>FI.none(e)},Yz=(e,n)=>BI(e,n,wt),BI=(e,n,s)=>vr(li(e),i=>Ml(i,n)?s(i)?[i]:[]:BI(i,n,s)),nj=(e,n,s=dt)=>{if(s(n))return te.none();if(We(e,Se(n)))return te.some(n);const i=u=>Ml(u,"table")||s(u);return La(n,e.join(","),i)},jz=(e,n)=>nj(["td","th"],e,n),xu=e=>Yz(e,"th,td"),xD=(e,n)=>Oc(e,"table",n),Xv=(e,n,s,i,u=wt)=>{const f=i===1;if(!f&&s<=0)return OA.first(e[0]);if(f&&s>=e.length-1)return OA.last(e[e.length-1]);{const x=s+i,T=e[x];return u(T)?OA.middle(n,T):Xv(e,n,x,i,u)}},HI=(e,n)=>xD(e,n).bind(s=>{const i=xu(s);return ur(i,f=>rs(e,f)).map(f=>({index:f,all:i}))}),$I=(e,n,s)=>HI(e,s).fold(()=>OA.none(e),u=>Xv(u.all,e,u.index,1,n)),zI=(e,n,s)=>HI(e,s).fold(()=>OA.none(),u=>Xv(u.all,e,u.index,-1,n)),VI=e=>qC(e).filter(n=>n.trim().length!==0||n.indexOf(za)>-1).isSome(),yD=e=>es(e)&&Pa(e,"contenteditable")==="false",WI=["img","br"],Zz=e=>VI(e)||We(WI,Se(e))||yD(e),UI=e=>Nd(e,Zz),Gz=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),qz=(e,n)=>vr(n,s=>{const i=Gz(dg(s.getBoundingClientRect()),-1);return[{x:i.left,y:e(i),cell:s},{x:i.right,y:e(i),cell:s}]}),Kz=(e,n,s)=>Vo(e,(i,u)=>i.fold(()=>te.some(u),f=>{const x=Math.sqrt(Math.abs(f.x-n)+Math.abs(f.y-s)),T=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-s));return te.some(T<x?u:f)}),te.none()),RA=(e,n,s,i,u)=>{const f=Vs($e.fromDom(s),"td,th,caption").map(T=>T.dom),x=Cn(qz(e,f),T=>n(T,u));return Kz(x,i,u).map(T=>T.cell)},Jz=e=>e.bottom,Qz=e=>e.top,oj=(e,n)=>e.y<n,e9=(e,n)=>e.y>n,XI=it(RA,Jz,oj),sj=it(RA,Qz,e9),t9=(e,n)=>qn(n.getClientRects()).bind(s=>XI(e,s.left,s.top)).bind(s=>gA(G7(s),n)),n9=(e,n)=>Ns(n.getClientRects()).bind(s=>sj(e,s.left,s.top)).bind(s=>gA(Z7(s),n)),o9=(e,n,s)=>s.breakAt.exists(i=>e(n,i).breakAt.isSome()),wD=e=>e.breakType===Ef.Wrap&&e.positions.length===0,DA=e=>e.breakType===Ef.Br&&e.positions.length===1,CD=(e,n,s)=>{const i=e(n,s);return wD(i)||!rr(s.getNode())&&DA(i)?!o9(e,n,i):i.breakAt.isNone()},YI=it(CD,nb),s9=it(CD,nC),r9=(e,n,s)=>{const i=At.fromRangeStart(n);return dm(!e,s).exists(u=>u.isEqual(i))},SD=(e,n,s,i)=>{const u=e.selection.getRng(),f=n?1:-1;return PE()&&r9(n,u,s)?(Af(f,e,s,!n,!1).each(x=>{_g(e,x)}),!0):!1},a9=(e,n,s)=>t9(n,s).orThunk(()=>qn(s.getClientRects()).bind(i=>XR(JN(e,At.before(n)),i.left))).getOr(At.before(n)),i9=(e,n,s)=>n9(n,s).orThunk(()=>qn(s.getClientRects()).bind(i=>XR(QN(e,At.after(n)),i.left))).getOr(At.after(n)),jI=(e,n)=>{const s=n.getNode(e);return Ou(s)?te.some(s):te.none()},l9=(e,n,s)=>{n.undoManager.transact(()=>{const i=e?A:w,u=TI(n,$e.fromDom(s),i);_g(n,u)})},ih=(e,n,s)=>{const i=jI(!!n,s),u=n===!1;i.fold(()=>_g(e,s.toRange()),f=>dm(u,e.getBody()).filter(x=>x.isEqual(s)).fold(()=>_g(e,s.toRange()),x=>l9(n,e,f)))},ZI=(e,n,s,i)=>{const u=e.selection.getRng(),f=At.fromRangeStart(u),x=e.getBody();if(!n&&YI(i,f)){const T=a9(x,s,f);return ih(e,n,T),!0}else if(n&&s9(i,f)){const T=i9(x,s,f);return ih(e,n,T),!0}else return!1},kD=(e,n,s)=>te.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(i=>te.from(e.dom.getParent(i,"table")).map(u=>s(e,n,u,i))).getOr(!1),c9=(e,n)=>kD(e,n,SD),GI=(e,n)=>kD(e,n,ZI),rj=e=>{const n=dv.exact(e,0,e,0);return g(n)},u9=(e,n,s)=>s.fold(te.none,te.none,(i,u)=>UI(u).map(f=>rj(f)),i=>e.mode.isReadOnly()?te.none():(e.execCommand("mceTableInsertRowAfter"),qI(e,n,i))),qI=(e,n,s)=>u9(e,n,$I(s,Pl)),MA=(e,n,s)=>u9(e,n,zI(s,Pl)),KI=(e,n)=>{const s=["table","li","dl"],i=$e.fromDom(e.getBody()),u=T=>{const D=Se(T);return rs(T,i)||We(s,D)},f=e.selection.getRng(),x=$e.fromDom(n?f.endContainer:f.startContainer);return jz(x,u).map(T=>(xD(T,u).each(G=>{e.model.table.clearSelectedCells(G.dom)}),e.selection.collapse(!n),(n?qI:MA)(e,u,T).each(G=>{e.selection.setRng(G)}),!0)).getOr(!1)},AD=(e,n,s)=>{const i=In.os.isMacOS()||In.os.isiOS();ox([{keyCode:_n.RIGHT,action:Uo(PI,e,!0)},{keyCode:_n.LEFT,action:Uo(PI,e,!1)},{keyCode:_n.UP,action:Uo(fD,e,!1)},{keyCode:_n.DOWN,action:Uo(fD,e,!0)},...i?[{keyCode:_n.UP,action:Uo(TA,e,!1),metaKey:!0,shiftKey:!0},{keyCode:_n.DOWN,action:Uo(TA,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:_n.RIGHT,action:Uo(c9,e,!0)},{keyCode:_n.LEFT,action:Uo(c9,e,!1)},{keyCode:_n.UP,action:Uo(GI,e,!1)},{keyCode:_n.DOWN,action:Uo(GI,e,!0)},{keyCode:_n.UP,action:Uo(GI,e,!1)},{keyCode:_n.UP,action:Uo(pD,e,!1)},{keyCode:_n.DOWN,action:Uo(pD,e,!0)},{keyCode:_n.RIGHT,action:Uo(Wz,e,!0)},{keyCode:_n.LEFT,action:Uo(Wz,e,!1)},{keyCode:_n.UP,action:Uo(Uz,e,!1)},{keyCode:_n.DOWN,action:Uo(Uz,e,!0)},{keyCode:_n.RIGHT,action:Uo(sC,e,n,!0)},{keyCode:_n.LEFT,action:Uo(sC,e,n,!1)},{keyCode:_n.RIGHT,ctrlKey:!i,altKey:i,action:Uo(cz,e,n)},{keyCode:_n.LEFT,ctrlKey:!i,altKey:i,action:Uo(uz,e,n)},{keyCode:_n.UP,action:Uo(_A,e,!1)},{keyCode:_n.DOWN,action:Uo(_A,e,!0)}],s).each(u=>{s.preventDefault()})},JI=(e,n)=>{e.on("keydown",s=>{s.isDefaultPrevented()||AD(e,n,s)})},Vh=(e,n)=>({container:e,offset:n}),uC=Jr.DOM,PA=e=>n=>e===n?-1:0,d9=e=>n=>e.isBlock(n)||We(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",TD=(e,n,s)=>{if(qt(e)&&n>=0)return te.some(Vh(e,n));{const i=jf(uC);return te.from(i.backwards(e,n,PA(e),s)).map(u=>Vh(u.container,u.container.data.length))}},h9=(e,n,s)=>{if(qt(e)&&n>=e.length)return te.some(Vh(e,n));{const i=jf(uC);return te.from(i.forwards(e,n,PA(e),s)).map(u=>Vh(u.container,0))}},sx=(e,n,s)=>{if(!qt(e))return te.none();const i=e.data;if(n>=0&&n<=i.length)return te.some(Vh(e,n));{const u=jf(uC);return te.from(u.backwards(e,n,PA(e),s)).bind(f=>{const x=f.container.data;return sx(f.container,n+x.length,s)})}},QI=(e,n,s)=>{if(!qt(e))return te.none();const i=e.data;if(n<=i.length)return te.some(Vh(e,n));{const u=jf(uC);return te.from(u.forwards(e,n,PA(e),s)).bind(f=>QI(f.container,n-i.length,s))}},ED=(e,n,s,i,u)=>{const f=jf(e,d9(e));return te.from(f.backwards(n,s,i,u))},g9=e=>e.collapsed&&qt(e.startContainer),_D=e=>Pu(e.toString().replace(/\u00A0/g," ")),eF=e=>e!==""&&` \uFEFF\f
\r	\v`.indexOf(e)!==-1,f9=(e,n)=>e.substring(n.length),tF=(e,n,s,i=!1)=>{let u;const f=s.charAt(0);for(u=n-1;u>=0;u--){const x=e.charAt(u);if(!i&&eF(x))return te.none();if(f===x&&eo(e,s,u,n))break}return te.some(u)},OD=(e,n,s,i=!1)=>{if(!g9(n))return te.none();const u={text:"",offset:0},f=(T,D,F)=>(u.text=F+u.text,u.offset+=D,tF(u.text,u.offset,s,i).getOr(D)),x=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return ED(e,n.startContainer,n.startOffset,f,x).bind(T=>{const D=n.cloneRange();if(D.setStart(T.container,T.offset),D.setEnd(n.endContainer,n.endOffset),D.collapsed)return te.none();const F=_D(D);return F.lastIndexOf(s)!==0?te.none():te.some({text:f9(F,s),range:D,trigger:s})})},m9=e=>e.nodeType===pe,p9=e=>e.nodeType===ja,nF=e=>{if(m9(e))return Vh(e,e.data.length);{const n=e.childNodes;return n.length>0?nF(n[n.length-1]):Vh(e,n.length)}},oF=(e,n)=>{const s=e.childNodes;return s.length>0&&n<s.length?oF(s[n],0):s.length>0&&p9(e)&&s.length===n?nF(s[s.length-1]):Vh(e,n)},b9=(e,n)=>{var s;const i=(s=e.getParent(n.container,e.isBlock))!==null&&s!==void 0?s:e.getRoot();return ED(e,n.container,n.offset,(u,f)=>f===0?-1:f,i).filter(u=>{const f=u.container.data.charAt(u.offset-1);return!eF(f)}).isSome()},RD=e=>n=>{const s=oF(n.startContainer,n.startOffset);return!b9(e,s)},v9=(e,n,s)=>Wr(s.triggers,i=>OD(e,n,i)),sF=(e,n)=>{const s=n(),i=e.selection.getRng();return v9(e.dom,i,s).bind(u=>rF(e,n,u))},rF=(e,n,s,i={})=>{var u;const f=n(),T=(u=e.selection.getRng().startContainer.nodeValue)!==null&&u!==void 0?u:"",D=Cn(f.lookupByTrigger(s.trigger),G=>s.text.length>=G.minChars&&G.matches.getOrThunk(()=>RD(e.dom))(s.range,T,s.text));if(D.length===0)return te.none();const F=Promise.all(Ze(D,G=>G.fetch(s.text,G.maxResults,i).then(ee=>({matchText:s.text,items:ee,columns:G.columns,onAction:G.onAction,highlightOn:G.highlightOn}))));return te.some({lookupData:F,context:s})};var Og;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Og||(Og={}));const DD=(e,n,s)=>e.stype===Og.Error?n(e.serror):s(e.svalue),x9=e=>{const n=[],s=[];return De(e,i=>{DD(i,u=>s.push(u),u=>n.push(u))}),{values:n,errors:s}},y9=(e,n)=>e.stype===Og.Error?{stype:Og.Error,serror:n(e.serror)}:e,w9=(e,n)=>e.stype===Og.Value?{stype:Og.Value,svalue:n(e.svalue)}:e,fl=(e,n)=>e.stype===Og.Value?n(e.svalue):e,C9=(e,n)=>e.stype===Og.Error?n(e.serror):e,aF=e=>({stype:Og.Value,svalue:e}),iF=e=>({stype:Og.Error,serror:e}),ql={fromResult:e=>e.fold(iF,aF),toResult:e=>DD(e,Hi.error,Hi.value),svalue:aF,partition:x9,serror:iF,bind:fl,bindError:C9,map:w9,mapError:y9,fold:DD},_f=e=>Wt(e)&&uo(e).length>100?" removed due to size":JSON.stringify(e,null,2),MD=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Dt("... (only showing first ten failures)")}]):e;return Ze(n,s=>"Failed path: ("+s.path.join(" > ")+`)
`+s.getErrorInfo())},dC=(e,n)=>ql.serror([{path:e,getErrorInfo:n}]),PD=(e,n,s)=>dC(e,()=>'Could not find valid *required* value for "'+n+'" in '+_f(s)),LD=(e,n)=>dC(e,()=>'Choice schema did not contain choice key: "'+n+'"'),ND=(e,n,s)=>dC(e,()=>'The chosen schema: "'+s+'" did not exist in branches: '+_f(n)),cF=(e,n)=>dC(e,Dt(n)),LA=(e,n,s,i)=>Ts(s,i).fold(()=>ND(e,s,i),f=>f.extract(e.concat(["branch: "+i]),n)),NA=(e,n)=>({extract:(u,f)=>Ts(f,e).fold(()=>LD(u,e),T=>LA(u,f,n,T)),toString:()=>"chooseOn("+e+"). Possible values: "+uo(n)}),hC=(e,n)=>n,gC=(e,n)=>Yo(e)&&Yo(n)?sb(e,n):n,lh=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const s={};for(let i=0;i<n.length;i++){const u=n[i];for(const f in u)Qn(u,f)&&(s[f]=e(s[f],u[f]))}return s},sb=lh(gC),ID=lh(hC),FD=()=>({tag:"required",process:{}}),k9=e=>({tag:"defaultedThunk",process:e}),BD=e=>k9(Dt(e)),A9=()=>({tag:"option",process:{}}),T9=(e,n)=>e.length>0?ql.svalue(sb(n,ID.apply(void 0,e))):ql.svalue(n),rx=e=>V(ql.serror,ri)(e),E9={consolidateObj:(e,n)=>{const s=ql.partition(e);return s.errors.length>0?rx(s.errors):T9(s.values,n)},consolidateArr:e=>{const n=ql.partition(e);return n.errors.length>0?rx(n.errors):ql.svalue(n.values)}},_9=(e,n,s,i)=>({tag:"field",key:e,newKey:n,presence:s,prop:i}),O9=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),uF=(e,n,s)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return s(e.newKey,e.instantiator)}},HD=e=>{const n=(i,u)=>ql.bindError(e(u),f=>cF(i,f)),s=Dt("val");return{extract:n,toString:s}},R9=HD(ql.svalue),D9=(e,n,s,i)=>Ts(n,s).fold(()=>PD(e,s,n),i),dF=(e,n,s,i)=>{const u=Ts(e,n).getOrThunk(()=>s(e));return i(u)},M9=(e,n,s)=>s(Ts(e,n)),P9=(e,n,s,i)=>{const u=Ts(e,n).map(f=>f===!0?s(e):f);return i(u)},L9=(e,n,s,i,u)=>{const f=T=>u.extract(n.concat([i]),T),x=T=>T.fold(()=>ql.svalue(te.none()),D=>{const F=u.extract(n.concat([i]),D);return ql.map(F,te.some)});switch(e.tag){case"required":return D9(n,s,i,f);case"defaultedThunk":return dF(s,i,e.process,f);case"option":return M9(s,i,x);case"defaultedOptionThunk":return P9(s,i,e.process,x);case"mergeWithThunk":return dF(s,i,Dt({}),T=>{const D=sb(e.process(s),T);return f(D)})}},N9=(e,n,s)=>{const i={},u=[];for(const f of s)uF(f,(x,T,D,F)=>{const G=L9(D,e,n,x,F);ql.fold(G,J=>{u.push(...J)},J=>{i[T]=J})},(x,T)=>{i[x]=T(n)});return u.length>0?ql.serror(u):ql.svalue(i)},IA=e=>({extract:(i,u)=>N9(i,u,e),toString:()=>`obj{
`+Ze(e,u=>uF(u,(f,x,T,D)=>f+" -> "+D.toString(),(f,x)=>"state("+f+")")).join(`
`)+"}"}),$D=e=>({extract:(i,u)=>{const f=Ze(u,(x,T)=>e.extract(i.concat(["["+T+"]"]),x));return E9.consolidateArr(f)},toString:()=>"array("+e.toString()+")"}),hF=e=>HD(n=>e(n).fold(ql.serror,ql.svalue)),I9=(e,n,s)=>{const i=n.extract([e],s);return ql.mapError(i,u=>({input:s,errors:u}))},F9=(e,n,s)=>ql.toResult(I9(e,n,s)),B9=e=>`Errors: 
`+MD(e.errors).join(`
`)+`

Input object: `+_f(e.input),gF=(e,n)=>NA(e,os(n,IA)),fF=Dt(R9),FA=(e,n)=>HD(s=>{const i=typeof s;return e(s)?ql.svalue(s):ql.serror(`Expected type: ${n} but got: ${i}`)}),mF=FA(Qo,"number"),BA=FA(oe,"string"),pF=FA(Gt,"boolean"),HA=FA(Be,"function"),fC=_9,bF=O9,H9=e=>hF(n=>We(e,n)?Hi.value(n):Hi.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),vF=(e,n)=>fC(e,e,FD(),n),zD=e=>vF(e,BA),xF=e=>vF(e,HA),$9=(e,n)=>fC(e,e,FD(),$D(n)),$A=(e,n)=>fC(e,e,A9(),n),zA=e=>$A(e,BA),z9=e=>$A(e,HA),yF=(e,n)=>fC(e,e,BD(n),fF()),ax=(e,n,s)=>fC(e,e,BD(n),s),wF=(e,n)=>ax(e,n,mF),CF=(e,n)=>ax(e,n,BA),VD=(e,n,s)=>ax(e,n,H9(s)),VA=(e,n)=>ax(e,n,pF),WD=(e,n)=>ax(e,n,HA),V9=(e,n,s)=>ax(e,n,$D(s)),W9=zD("type"),U9=xF("fetch"),UD=xF("onAction"),X9=WD("onSetup",()=>ot),Y9=zA("text"),j9=zA("icon"),lj=zA("tooltip"),Z9=zA("label"),WA=VA("active",!1),SF=VA("enabled",!0),XD=VA("primary",!1),G9=e=>yF("columns",e),ix=e=>CF("type",e),kF=IA([W9,zD("trigger"),wF("minChars",1),G9(1),wF("maxResults",10),z9("matches"),U9,UD,V9("highlightOn",[],BA)]),q9=e=>F9("Autocompleter",kF,e),YD=[SF,lj,j9,Y9,X9,CF("context","mode:design")],AF=[WA].concat(YD),TF=[WD("predicate",dt),VD("scope","node",["node","editor"]),VD("position","selection",["node","selection","line"])],K9=YD.concat([ix("contextformbutton"),XD,UD,bF("original",Ao)]),jD=AF.concat([ix("contextformbutton"),XD,UD,bF("original",Ao)]),J9=YD.concat([ix("contextformbutton")]),Q9=AF.concat([ix("contextformtogglebutton")]),eV=gF("type",{contextformbutton:K9,contextformtogglebutton:jD});IA([ix("contextform"),WD("initValue",Dt("")),Z9,$9("commands",eV),$A("launch",gF("type",{contextformbutton:J9,contextformtogglebutton:Q9}))].concat(TF));const EF=e=>{const n=e.ui.registry.getAll().popups,s=os(n,x=>q9(x).fold(T=>{throw new Error(B9(T))},Ao)),i=vl(da(s,x=>x.trigger)),u=Dr(s);return{dataset:s,triggers:i,lookupByTrigger:x=>Cn(u,T=>T.trigger===x)}},tV=(e,n)=>{const s=y0(n.load,50);e.on("input",i=>{i.inputType==="insertCompositionText"&&!e.composing||s.throttle()}),e.on("keydown",i=>{const u=i.which;u===8?s.throttle():u===27?(s.cancel(),n.cancelIfNecessary()):(u===38||u===40)&&s.cancel()},!0),e.on("remove",s.cancel)},nV=e=>{const n=Ji(),s=Ir(!1),i=n.isSet,u=()=>{i()&&(t_(e),s.set(!1),n.clear())},f=J=>{i()||n.set({trigger:J.trigger,matchLength:J.text.length})},x=ft(()=>EF(e)),T=J=>n.get().map(ee=>OD(e.dom,e.selection.getRng(),ee.trigger,!0).bind(fe=>rF(e,x,fe,J))).getOrThunk(()=>sF(e,x)),D=J=>{T(J).fold(u,ee=>{f(ee.context),ee.lookupData.then(fe=>{n.get().map(ke=>{const be=ee.context;ke.trigger===be.trigger&&(n.set({...ke,matchLength:be.text.length}),s.get()?(x1(e,{range:be.range}),e_(e,{lookupData:fe})):(s.set(!0),x1(e,{range:be.range}),v1(e,{lookupData:fe})))})})})},F=(J,ee)=>{const fe=J.compareBoundaryPoints(window.Range.START_TO_START,ee),ke=J.compareBoundaryPoints(window.Range.END_TO_END,ee);return fe>=0&&ke<=0},G=()=>n.get().bind(({trigger:J})=>{const ee=e.selection.getRng();return OD(e.dom,ee,J,s.get()).filter(({range:fe})=>F(ee,fe)).map(({range:fe})=>fe)});e.addCommand("mceAutocompleterReload",(J,ee)=>{const fe=Wt(ee)?ee.fetchOptions:{};D(fe)}),e.addCommand("mceAutocompleterClose",u),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{G().each(J=>{x1(e,{range:J})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>G().isSome()),tV(e,{cancelIfNecessary:u,load:D})},oV=he().browser.isSafari(),_F=e=>Eh($e.fromDom(e)),ml=(e,n)=>{var s;return e.startOffset===0&&e.endOffset===((s=n.textContent)===null||s===void 0?void 0:s.length)},ch=(e,n)=>te.from(e.getParent(n.container(),"details")),OF=(e,n)=>ch(e,n).isSome(),uj=(e,n)=>{const s=te.from(e.getParent(n.startContainer,"details")),i=te.from(e.getParent(n.endContainer,"details"));if(s.isSome()||i.isSome()){const u=s.bind(f=>te.from(e.select("summary",f)[0]));return te.some({startSummary:u,startDetails:s,endDetails:i})}else return te.none()},sV=(e,n)=>cc(n).exists(s=>s.isEqual(e)),rV=(e,n)=>gu(n).exists(s=>rr(s.getNode())&&Yc(n,s).exists(i=>i.isEqual(e))||s.isEqual(e)),aV=(e,n)=>n.startSummary.exists(s=>sV(e,s)),iV=(e,n)=>n.startSummary.exists(s=>rV(e,s)),RF=(e,n)=>n.startDetails.exists(s=>Yc(s,e).forall(i=>n.startSummary.exists(u=>!u.contains(e.container())&&u.contains(i.container())))),lx=(e,n,s)=>s.startDetails.exists(i=>lc(e,n).forall(u=>!i.contains(u.container()))),lV=(e,n)=>{const s=n.getNode();Wn(s)||e.selection.setCursorLocation(s,n.offset())},DF=(e,n,s)=>{const i=e.dom.getParent(n.container(),"details");if(i&&!i.open){const u=e.dom.select("summary",i)[0];u&&(s?cc(u):gu(u)).each(x=>lV(e,x))}else lV(e,n)},cV=(e,n)=>{const s=D=>D.contains(e.startContainer),i=D=>D.contains(e.endContainer),u=n.startSummary.exists(s),f=n.startSummary.exists(i),x=n.startDetails.forall(D=>n.endDetails.forall(F=>D!==F));return(u||f)&&!(u&&f)||x},Wh=(e,n,s)=>{const{dom:i,selection:u}=e,f=e.getBody();if(s==="character"){const x=At.fromRangeStart(u.getRng()),T=i.getParent(x.container(),i.isBlock),D=ch(i,x),F=T&&i.isEmpty(T),G=ce(T==null?void 0:T.previousSibling),J=ce(T==null?void 0:T.nextSibling);return F&&(n?J:G)&&df(!n,f,x).exists(ke=>OF(i,ke)&&!Da(D,ch(i,ke)))?!0:df(n,f,x).fold(dt,ee=>{const fe=ch(i,ee);if(OF(i,ee)&&!Da(D,fe)){if(n||DF(e,ee,!1),T&&F){if(n&&G)return!0;if(!n&&J)return!0;DF(e,ee,n),e.dom.remove(T)}return!0}else return!1})}else return!1},uV=(e,n,s,i)=>{const f=e.selection.getRng(),x=At.fromRangeStart(f),T=e.getBody();return i==="selection"?cV(f,n):s?iV(x,n)||lx(T,x,n):aV(x,n)||RF(x,n)},dV=(e,n,s)=>uj(e.dom,e.selection.getRng()).fold(()=>Wh(e,n,s),i=>uV(e,i,n,s)||Wh(e,n,s)),MF=(e,n,s)=>{const i=e.selection,u=i.getNode(),f=i.getRng(),x=At.fromRangeStart(f);return xh(u)?(s==="selection"&&ml(f,u)||q3(n,x,u)?_F(u):e.undoManager.transact(()=>{const T=i.getSel();let{anchorNode:D,anchorOffset:F,focusNode:G,focusOffset:J}=T??{};const ee=()=>{ut(D)&&ut(F)&&ut(G)&&ut(J)&&(T==null||T.setBaseAndExtent(D,F,G,J))},fe=()=>{D=T==null?void 0:T.anchorNode,F=T==null?void 0:T.anchorOffset,G=T==null?void 0:T.focusNode,J=T==null?void 0:T.focusOffset},ke=(Ee,Ye)=>{De(Ee.childNodes,qe=>{pm(qe)&&Ye.appendChild(qe)})},be=e.dom.create("span",{"data-mce-bogus":"1"});ke(u,be),u.appendChild(be),ee(),(s==="word"||s==="line")&&(T==null||T.modify("extend",n?"right":"left",s)),!i.isCollapsed()&&ml(i.getRng(),be)?_F(u):(e.execCommand(n?"ForwardDelete":"Delete"),fe(),ke(be,u),ee()),e.dom.remove(be)}),!0):!1},Yv=(e,n,s)=>dV(e,n,s)||oV&&MF(e,n,s)?te.some(ot):te.none(),UA=e=>(n,s,i={})=>{const u=n.getBody(),f={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:u,currentTarget:u,eventPhase:Event.AT_TARGET,originalTarget:u,explicitOriginalTarget:u,isTrusted:!1,srcElement:u,cancelable:!1,preventDefault:ot,inputType:s},x=Ox(new InputEvent(e));return n.dispatch(e,{...x,...f,...i})},Td=UA("input"),mC=UA("beforeinput"),ZD=he(),PF=ZD.os,pC=PF.isMacOS()||PF.isiOS(),NF=ZD.browser.isFirefox(),IF=(e,n,s)=>{const i=s.keyCode===_n.BACKSPACE?"deleteContentBackward":"deleteContentForward",u=e.selection.isCollapsed(),f=u?"character":"selection",x=T=>u?T?"word":"line":"selection";vD([{keyCode:_n.BACKSPACE,action:Uo(SA,e)},{keyCode:_n.BACKSPACE,action:Uo(Qw,e,!1)},{keyCode:_n.DELETE,action:Uo(Qw,e,!0)},{keyCode:_n.BACKSPACE,action:Uo(_R,e,!1)},{keyCode:_n.DELETE,action:Uo(_R,e,!0)},{keyCode:_n.BACKSPACE,action:Uo(KR,e,n,!1)},{keyCode:_n.DELETE,action:Uo(KR,e,n,!0)},{keyCode:_n.BACKSPACE,action:Uo(dk,e,!1)},{keyCode:_n.DELETE,action:Uo(dk,e,!0)},{keyCode:_n.BACKSPACE,action:Uo(Yv,e,!1,f)},{keyCode:_n.DELETE,action:Uo(Yv,e,!0,f)},...pC?[{keyCode:_n.BACKSPACE,altKey:!0,action:Uo(Yv,e,!1,x(!0))},{keyCode:_n.DELETE,altKey:!0,action:Uo(Yv,e,!0,x(!0))},{keyCode:_n.BACKSPACE,metaKey:!0,action:Uo(Yv,e,!1,x(!1))}]:[{keyCode:_n.BACKSPACE,ctrlKey:!0,action:Uo(Yv,e,!1,x(!0))},{keyCode:_n.DELETE,ctrlKey:!0,action:Uo(Yv,e,!0,x(!0))}],{keyCode:_n.BACKSPACE,action:Uo(ex,e,!1)},{keyCode:_n.DELETE,action:Uo(ex,e,!0)},{keyCode:_n.BACKSPACE,action:Uo(aD,e,!1)},{keyCode:_n.DELETE,action:Uo(aD,e,!0)},{keyCode:_n.BACKSPACE,action:Uo(iA,e,!1)},{keyCode:_n.DELETE,action:Uo(iA,e,!0)},{keyCode:_n.BACKSPACE,action:Uo(rA,e,!1)},{keyCode:_n.DELETE,action:Uo(rA,e,!0)},{keyCode:_n.BACKSPACE,action:Uo(yA,e,!1)},{keyCode:_n.DELETE,action:Uo(yA,e,!0)},{keyCode:_n.BACKSPACE,action:Uo(Q1,e,!1)},{keyCode:_n.DELETE,action:Uo(Q1,e,!0)}],s).filter(T=>e.selection.isEditable()).each(T=>{s.preventDefault(),mC(e,i).isDefaultPrevented()||(T(),Td(e,i))})},hV=(e,n,s)=>ox([{keyCode:_n.BACKSPACE,action:Uo(NR,e)},{keyCode:_n.DELETE,action:Uo(NR,e)},...pC?[{keyCode:_n.BACKSPACE,altKey:!0,action:Uo(lC,e)},{keyCode:_n.DELETE,altKey:!0,action:Uo(lC,e)},...s?[{keyCode:NF?224:91,action:Uo(lC,e)}]:[]]:[{keyCode:_n.BACKSPACE,ctrlKey:!0,action:Uo(lC,e)},{keyCode:_n.DELETE,ctrlKey:!0,action:Uo(lC,e)}]],n),gV=(e,n)=>{let s=!1;e.on("keydown",i=>{s=i.keyCode===_n.BACKSPACE,i.isDefaultPrevented()||IF(e,n,i)}),e.on("keyup",i=>{i.isDefaultPrevented()||hV(e,i,s),s=!1})},fV=e=>{for(;e;){if(An(e)||qt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},cx=(e,n)=>{const s=e.dom,i=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const f=fV(n.firstChild);f&&/^(UL|OL|DL)$/.test(f.nodeName)&&n.insertBefore(s.doc.createTextNode(za),n.firstChild)}const u=s.createRng();if(n.normalize(),n.hasChildNodes()){const f=new Tr(n,n);let x=n,T;for(;T=f.current();){if(qt(T)){u.setStart(T,0),u.setEnd(T,0);break}if(i[T.nodeName.toLowerCase()]){u.setStartBefore(T),u.setEndBefore(T);break}x=T,T=f.next()}T||(u.setStart(x,0),u.setEnd(x,0))}else rr(n)?n.nextSibling&&s.isBlock(n.nextSibling)?(u.setStartBefore(n),u.setEndBefore(n)):(u.setStartAfter(n),u.setEndAfter(n)):(u.setStart(n,0),u.setEnd(n,0));e.selection.setRng(u),Tm(e,u)},bC=(e,n)=>{const s=e.getRoot();let i,u=n;for(;u!==s&&u&&e.getContentEditable(u)!=="false";){if(e.getContentEditable(u)==="true"){i=u;break}u=u.parentNode}return u!==s?i:s},XA=e=>te.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),mV=e=>XA(e).fold(Dt(""),n=>n.nodeName.toUpperCase()),pV=e=>XA(e).filter(n=>Gf($e.fromDom(n))).isSome(),GD=e=>{e.innerHTML='<br data-mce-bogus="1">'},bV=(e,n,s)=>{const i=e.dom;te.from(s.style).map(i.parseStyle).each(D=>{const G={...d($e.fromDom(n)),...D};i.setStyles(n,G)});const u=te.from(s.class).map(D=>D.split(/\s+/)),f=te.from(n.className).map(D=>Cn(D.split(/\s+/),F=>F!==""));Oo(u,f,(D,F)=>{const G=Cn(F,ee=>!We(D,ee)),J=[...D,...G];i.setAttrib(n,"class",J.join(" "))});const x=["style","class"],T=Is(s,(D,F)=>!We(x,F));i.setAttribs(n,T)},vC=(e,n)=>{if(Fl(e).toLowerCase()===n.tagName.toLowerCase()){const i=of(e);bV(e,n,i)}},qD=(e,n,s,i,u=!0,f,x)=>{const T=e.dom,D=e.schema,F=Fl(e),G=s?s.nodeName.toUpperCase():"";let J=n;const ee=D.getTextInlineElements();let fe;f||G==="TABLE"||G==="HR"?fe=T.create(f||F,x||{}):fe=s.cloneNode(!1);let ke=fe;if(!u)T.setAttrib(fe,"style",null),T.setAttrib(fe,"class",null);else do if(ee[J.nodeName]){if(fu(J)||jc(J))continue;const be=J.cloneNode(!1);T.setAttrib(be,"id",""),fe.hasChildNodes()?(be.appendChild(fe.firstChild),fe.appendChild(be)):(ke=be,fe.appendChild(be))}while((J=J.parentNode)&&J!==i);return vC(e,fe),GD(ke),fe},FF=(e,n)=>e.dom.getParent(n,pb),vV=(e,n,s)=>{let i=n;for(;i&&i!==e&&ce(i.nextSibling);){const u=i.parentElement;if(!u||!s(u))return pb(u);i=u}return!1},xV=(e,n,s)=>!n&&s.nodeName.toLowerCase()===Fl(e)&&e.dom.isEmpty(s)&&vV(e.getBody(),s,i=>Qn(e.schema.getTextBlockElements(),i.nodeName.toLowerCase())),dj=(e,n,s)=>{var i,u,f;const x=n(Fl(e)),T=FF(e,s);T&&(e.dom.insertAfter(x,T),cx(e,x),((f=(u=(i=s.parentElement)===null||i===void 0?void 0:i.childNodes)===null||u===void 0?void 0:u.length)!==null&&f!==void 0?f:0)>1&&e.dom.remove(s))},KD=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,yV=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},BF=(e,n)=>{const s=e==null?void 0:e.parentNode;return ut(s)&&s.nodeName===n},HF=e=>ut(e)&&/^(OL|UL|LI)$/.test(e.nodeName),YA=e=>ut(e)&&/^(LI|DT|DD)$/.test(e.nodeName),wV=e=>HF(e)&&HF(e.parentNode),xC=e=>{const n=e.parentNode;return YA(n)?n:e},jA=(e,n,s)=>{let i=e[s?"firstChild":"lastChild"];for(;i&&!An(i);)i=i[s?"nextSibling":"previousSibling"];return i===n},$F=e=>Vo(da(d($e.fromDom(e)),(n,s)=>`${s}: ${n};`),(n,s)=>n+s,""),hj=(e,n,s,i,u)=>{const f=e.dom,x=e.selection.getRng(),T=s.parentNode;if(s===e.getBody()||!T)return;wV(s)&&(u="LI");const D=YA(i)?$F(i):void 0;let F=YA(i)&&D?n(u,{style:$F(i)}):n(u);if(jA(s,i,!0)&&jA(s,i,!1))if(BF(s,"LI")){const G=xC(s);f.insertAfter(F,G),yV(s)?f.remove(G):f.remove(s)}else f.replace(F,s);else if(jA(s,i,!0))BF(s,"LI")?(f.insertAfter(F,xC(s)),F.appendChild(f.doc.createTextNode(" ")),F.appendChild(s)):T.insertBefore(F,s),f.remove(i);else if(jA(s,i,!1))f.insertAfter(F,xC(s)),f.remove(i);else{s=xC(s);const G=x.cloneRange();G.setStartAfter(i),G.setEndAfter(s);const J=G.extractContents();if(u==="LI"&&KD(J,"LI")){const ee=Cn(Ze(F.children,$e.fromDom),No($a("br")));F=J.firstChild,f.insertAfter(J,s),De(ee,fe=>E($e.fromDom(F),fe)),D&&F.setAttribute("style",D)}else f.insertAfter(J,s),f.insertAfter(F,s);f.remove(i)}cx(e,F)},Ac=e=>{De(Ii($e.fromDom(e),fr),n=>{const s=n.dom;s.nodeValue=Pu(s.data)})},CV=(e,n)=>{const s=e.dom.getParent(n,"ol,ul,dl");return s!==null&&e.dom.getContentEditableParent(s)==="false"},SV=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),JD=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,kV=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,QD=(e,n)=>ut(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",AV=(e,n,s)=>{var i;const u=[];if(!s)return;let f=s;for(;f=f.firstChild;){if(e.isBlock(f))return;An(f)&&!n[f.nodeName.toLowerCase()]&&u.push(f)}let x=u.length;for(;x--;)f=u[x],(!f.hasChildNodes()||f.firstChild===f.lastChild&&((i=f.firstChild)===null||i===void 0?void 0:i.nodeValue)===""||SV(e,f))&&e.remove(f)},eM=(e,n,s)=>qt(n)?e?s===1&&n.data.charAt(s-1)===Qi?0:s:s===n.data.length-1&&n.data.charAt(s)===Qi?n.data.length:s:s,ZA=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,eM(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,eM(!1,e.endContainer,e.endOffset)),n},TV=e=>{let n=e;do qt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},EV=(e,n,s,i,u)=>{var f,x;const T=e.dom,D=(f=bC(T,i))!==null&&f!==void 0?f:T.getRoot();let F=T.getParent(i,T.isBlock);if(!F||!QD(T,F)){if(F=F||D,!F.hasChildNodes()){const fe=T.create(n);return vC(e,fe),F.appendChild(fe),s.setStart(fe,0),s.setEnd(fe,0),fe}let G=i;for(;G&&G.parentNode!==F;)G=G.parentNode;let J;for(;G&&!T.isBlock(G);)J=G,G=G.previousSibling;const ee=(x=J==null?void 0:J.parentElement)===null||x===void 0?void 0:x.nodeName;if(J&&ee&&e.schema.isValidChild(ee,n.toLowerCase())){const fe=J.parentNode,ke=T.create(n);for(vC(e,ke),fe.insertBefore(ke,J),G=J;G&&!T.isBlock(G);){const be=G.nextSibling;ke.appendChild(G),G=be}s.setStart(i,u),s.setEnd(i,u)}}return i},tM=(e,n)=>{n.normalize();const s=n.lastChild;(!s||An(s)&&/^(left|right)$/gi.test(e.getStyle(s,"float",!0)))&&e.add(n,"br")},nM=(e,n)=>{const s=zi(e);return no(n)?!1:oe(s)?We(zt.explode(s),n.nodeName.toLowerCase()):s},_V={insert:(e,n)=>{let s,i,u,f,x=!1;const T=e.dom,D=e.schema,F=D.getNonEmptyElements(),G=e.selection.getRng(),J=Fl(e),ee=$e.fromDom(G.startContainer),fe=wl(ee,G.startOffset),ke=fe.exists(Ut=>es(Ut)&&!Pl(Ut)),be=G.collapsed&&ke,Ee=(Ut,Dn)=>qD(e,s,nn,$t,$i(e),Ut,Dn),Ye=Ut=>{const Dn=eM(Ut,s,i);if(qt(s)&&(Ut?Dn>0:Dn<s.data.length))return!1;if((s.parentNode===nn||s===nn)&&x&&!Ut||Ut&&An(s)&&s===nn.firstChild)return!0;if(JD(s,"TABLE")||JD(s,"HR"))return kV(s,"BR")?!Ut:x&&!Ut||!x&&Ut;const ho=new Tr(s,nn);qt(s)&&(Ut&&Dn===0?ho.prev():!Ut&&Dn===s.data.length&&ho.next());let Cs;for(;Cs=ho.current();){if(An(Cs)){if(!Cs.getAttribute("data-mce-bogus")){const Ss=Cs.nodeName.toLowerCase();if(F[Ss]&&Ss!=="br")return!1}}else if(qt(Cs)&&!Rc(Cs.data))return!1;Ut?ho.prev():ho.next()}return!0},qe=()=>{let Ut;return/^(H[1-6]|PRE|FIGURE)$/.test(u)&&On!=="HGROUP"?Ut=Ee(J):Ut=Ee(),nM(e,f)&&QD(T,f)&&T.isEmpty(nn,void 0,{includeZwsp:!0})?Ut=T.split(f,nn):T.insertAfter(Ut,nn),cx(e,Ut),Ut};pn(T,G).each(Ut=>{G.setStart(Ut.startContainer,Ut.startOffset),G.setEnd(Ut.endContainer,Ut.endOffset)}),s=G.startContainer,i=G.startOffset;const tt=!!(n&&n.shiftKey),lt=!!(n&&n.ctrlKey);An(s)&&s.hasChildNodes()&&!be&&(x=i>s.childNodes.length-1,s=s.childNodes[Math.min(i,s.childNodes.length-1)]||s,x&&qt(s)?i=s.data.length:i=0);const $t=bC(T,s);if(!$t||CV(e,s))return;tt||(s=EV(e,J,G,s,i));let nn=T.getParent(s,T.isBlock)||T.getRoot();f=ut(nn==null?void 0:nn.parentNode)?T.getParent(nn.parentNode,T.isBlock):null,u=nn?nn.nodeName.toUpperCase():"";const On=f?f.nodeName.toUpperCase():"";if(On==="LI"&&!lt){const Ut=f;nn=Ut,f=Ut.parentNode,u=On}if(An(f)&&xV(e,tt,nn))return dj(e,Ee,nn);if(/^(LI|DT|DD)$/.test(u)&&An(f)&&T.isEmpty(nn)){hj(e,Ee,f,nn,J);return}if(!be&&(nn===e.getBody()||!QD(T,nn)))return;const _t=nn.parentNode;let vt;if(be)vt=Ee(J),fe.fold(()=>{M(ee,$e.fromDom(vt))},Ut=>{w(Ut,$e.fromDom(vt))}),e.selection.setCursorLocation(vt,0);else if(Jg(nn))vt=cp(nn),T.isEmpty(nn)&&GD(nn),vC(e,vt),cx(e,vt);else if(Ye(!1))vt=qe();else if(Ye(!0)&&_t){const Ut=At.fromRangeStart(G),Dn=M_(Ut),ho=$e.fromDom(nn),Ss=KS(ho,Ut,e.schema)?Io(ho,Ut,e.schema).bind(Pr=>te.from(Pr.getNode())):te.none();vt=_t.insertBefore(Ee(),nn);const xr=JD(nn,"HR")||Dn?vt:Ss.getOr(nn);cx(e,xr)}else{const Ut=ZA(G).cloneRange();Ut.setEndAfter(nn);const Dn=Ut.extractContents();Ac(Dn),TV(Dn),vt=Dn.firstChild,T.insertAfter(Dn,nn),AV(T,F,vt),tM(T,nn),T.isEmpty(nn)&&GD(nn),vt.normalize(),T.isEmpty(vt)?(T.remove(vt),qe()):(vC(e,vt),cx(e,vt))}T.setAttrib(vt,"id",""),e.dispatch("NewBlock",{newBlock:vt})},fakeEventName:"insertParagraph"},fj=(e,n,s)=>{const i=new Tr(n,s);let u;const f=e.getNonEmptyElements();for(;u=i.next();)if(f[u.nodeName.toLowerCase()]||qt(u)&&u.length>0)return!0;return!1},zF=(e,n,s)=>{const i=e.dom.createRng();s?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),e.selection.setRng(i),Tm(e,i)},OV=(e,n)=>{const s=e.selection,i=e.dom,u=s.getRng();let f,x=!1;pn(i,u).each(fe=>{u.setStart(fe.startContainer,fe.startOffset),u.setEnd(fe.endContainer,fe.endOffset)});let T=u.startOffset,D=u.startContainer;if(An(D)&&D.hasChildNodes()){const fe=T>D.childNodes.length-1;D=D.childNodes[Math.min(T,D.childNodes.length-1)]||D,fe&&qt(D)?T=D.data.length:T=0}let F=i.getParent(D,i.isBlock);const G=F&&F.parentNode?i.getParent(F.parentNode,i.isBlock):null,J=G?G.nodeName.toUpperCase():"",ee=!!(n&&n.ctrlKey);J==="LI"&&!ee&&(F=G),qt(D)&&T>=D.data.length&&(fj(e.schema,D,F||i.getRoot())||(f=i.create("br"),u.insertNode(f),u.setStartAfter(f),u.setEndAfter(f),x=!0)),f=i.create("br"),Lb(i,u,f),zF(e,f,x),e.undoManager.add()},mj=(e,n)=>{const s=$e.fromTag("br");w($e.fromDom(n),s),e.undoManager.add()},RV=(e,n)=>{DV(e.getBody(),n)||A($e.fromDom(n),$e.fromTag("br"));const s=$e.fromTag("br");A($e.fromDom(n),s),zF(e,s.dom,!1),e.undoManager.add()},Rg=e=>rr(e.getNode()),DV=(e,n)=>Rg(At.after(n))?!0:lc(e,At.after(n)).map(s=>rr(s.getNode())).getOr(!1),oM=e=>e&&e.nodeName==="A"&&"href"in e,MV=e=>e.fold(dt,oM,oM,dt),PV=e=>{const n=it(pv,e),s=At.fromRangeStart(e.selection.getRng());return Tf(n,e.getBody(),s).filter(MV)},LV=(e,n)=>{n.fold(ot,it(mj,e),it(RV,e),ot)},VF={insert:(e,n)=>{const s=PV(e);s.isSome()?s.each(it(LV,e)):OV(e,n)},fakeEventName:"insertLineBreak"},WF=(e,n)=>XA(e).filter(s=>n.length>0&&Ml($e.fromDom(s),n)).isSome(),sM=e=>WF(e,sm(e)),UF=e=>WF(e,fE(e)),Jc=Iu.generate([{br:[]},{block:[]},{none:[]}]),NV=(e,n)=>UF(e),XF=e=>(n,s)=>pV(n)===e,YF=(e,n)=>(s,i)=>mV(s)===e.toUpperCase()===n,IV=e=>{const n=bC(e.dom,e.selection.getStart());return no(n)},yC=e=>YF("pre",e),jF=()=>YF("summary",!0),GA=e=>(n,s)=>_2(n)===e,ZF=(e,n)=>sM(e),wC=(e,n)=>n,FV=e=>{const n=Fl(e),s=bC(e.dom,e.selection.getStart());return ut(s)&&e.schema.isValidChild(s.nodeName,n)},BV=e=>{const n=e.selection.getRng(),s=$e.fromDom(n.startContainer),u=wl(s,n.startOffset).map(f=>es(f)&&!Pl(f));return n.collapsed&&u.getOr(!0)},Zu=(e,n)=>(s,i)=>Vo(e,(f,x)=>f&&x(s,i),!0)?te.some(n):te.none(),HV=(e,n)=>zR([Zu([NV],Jc.none()),Zu([yC(!0),IV],Jc.none()),Zu([jF()],Jc.br()),Zu([yC(!0),GA(!1),wC],Jc.br()),Zu([yC(!0),GA(!1)],Jc.block()),Zu([yC(!0),GA(!0),wC],Jc.block()),Zu([yC(!0),GA(!0)],Jc.br()),Zu([XF(!0),wC],Jc.br()),Zu([XF(!0)],Jc.block()),Zu([ZF],Jc.br()),Zu([wC],Jc.br()),Zu([FV],Jc.block()),Zu([BV],Jc.block())],[e,!!(n&&n.shiftKey)]).getOr(Jc.none()),qA=(e,n,s)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||E6(n),!(ut(s)&&mC(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,s),ut(s)&&Td(n,e.fakeEventName)))},CC=(e,n)=>{if(e.mode.isReadOnly())return;const s=()=>qA(VF,e,n),i=()=>qA(_V,e,n),u=HV(e,n);switch(iy(e)){case"linebreak":u.fold(s,s,ot);break;case"block":u.fold(i,i,ot);break;case"invert":u.fold(i,s,ot);break;default:u.fold(s,i,ot);break}},GF=he(),rM=GF.os.isiOS()&&GF.browser.isSafari(),KA=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),BL(e.undoManager),e.undoManager.transact(()=>{CC(e,n)}))},qF=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(qt(n)){const s=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,i=n.data.charAt(e.startOffset-1);return s.test(i)}else return!1},$V=e=>{let n=te.none();const s=u=>{n=te.some(u.selection.getBookmark()),u.undoManager.add()},i=(u,f)=>{u.undoManager.undo(),n.fold(ot,x=>u.selection.moveToBookmark(x)),KA(u,f),n=te.none()};e.on("keydown",u=>{u.keyCode===_n.ENTER&&(rM&&qF(e.selection.getRng())?s(e):KA(e,u))}),e.on("keyup",u=>{u.keyCode===_n.ENTER&&n.each(()=>i(e,u))})},vj=(e,n,s)=>{const i=In.os.isMacOS()||In.os.isiOS();ox([{keyCode:_n.END,action:Uo(LI,e,!0)},{keyCode:_n.HOME,action:Uo(LI,e,!1)},...i?[]:[{keyCode:_n.HOME,action:Uo(TA,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:_n.END,action:Uo(TA,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:_n.END,action:Uo(Xz,e,!0)},{keyCode:_n.HOME,action:Uo(Xz,e,!1)},{keyCode:_n.END,action:Uo(rC,e,!0,n)},{keyCode:_n.HOME,action:Uo(rC,e,!1,n)}],s).each(u=>{s.preventDefault()})},rb=(e,n)=>{e.on("keydown",s=>{s.isDefaultPrevented()||vj(e,n,s)})},zV=e=>{e.on("input",n=>{n.isComposing||H3(e)})},VV=he(),WV=(e,n,s)=>{ox([{keyCode:_n.PAGE_UP,action:Uo(rC,e,!1,n)},{keyCode:_n.PAGE_DOWN,action:Uo(rC,e,!0,n)}],s)},SC=e=>e.stopImmediatePropagation(),aM=e=>e.keyCode===_n.PAGE_UP||e.keyCode===_n.PAGE_DOWN,iM=(e,n,s)=>{s&&!e.get()?n.on("NodeChange",SC,!0):!s&&e.get()&&n.off("NodeChange",SC),e.set(s)},UV=(e,n)=>{if(VV.os.isMacOS())return;const s=Ir(!1);e.on("keydown",i=>{aM(i)&&iM(s,e,!0)}),e.on("keyup",i=>{i.isDefaultPrevented()||WV(e,n,i),aM(i)&&s.get()&&(iM(s,e,!1),e.nodeChanged())})},KF=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Ie(n.getTargetRanges(),s=>!A_(e.dom,s)))&&n.preventDefault()})},JF=(e,n)=>{const s=n.container(),i=n.offset();return qt(s)?(s.insertData(i,e),te.some(At(s,i+e.length))):qb(n).map(u=>{const f=$e.fromText(e);return n.isAtEnd()?A(u,f):w(u,f),At(f.dom,e.length)})},QF=it(JF,za),eB=it(JF," "),lM=(e,n,s)=>L3(e,n,s)?QF(n):eB(n),cM=e=>n=>n.fold(s=>Yc(e.dom,At.before(s)),s=>cc(s),s=>gu(s),s=>lc(e.dom,At.after(s))),XV=(e,n,s)=>i=>L3(e,i,s)?QF(n):eB(n),JA=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},tB=(e,n)=>e.isEditable(e.getParent(n,"summary")),QA=e=>{const n=At.fromRangeStart(e.selection.getRng()),s=$e.fromDom(e.getBody());if(e.selection.isCollapsed()){const i=it(pv,e),u=At.fromRangeStart(e.selection.getRng());return Tf(i,e.getBody(),u).bind(cM(s)).map(f=>()=>XV(s,n,e.schema)(f).each(JA(e)))}else return te.none()},nB=e=>{const n=()=>{const s=$e.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const i=At.fromRangeStart(e.selection.getRng());lM(s,i,e.schema).each(JA(e))};return rl(In.browser.isFirefox()&&e.selection.isEditable()&&tB(e.dom,e.selection.getRng().startContainer),n)},oB=(e,n)=>{vD([{keyCode:_n.SPACEBAR,action:Uo(QA,e)},{keyCode:_n.SPACEBAR,action:Uo(nB,e)}],n).each(s=>{n.preventDefault(),mC(e,"insertText",{data:" "}).isDefaultPrevented()||(s(),Td(e,"insertText",{data:" "}))})},YV=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||oB(e,n)})},jV=e=>EE(e)?[{keyCode:_n.TAB,action:Uo(KI,e,!0)},{keyCode:_n.TAB,shiftKey:!0,action:Uo(KI,e,!1)}]:[],eT=(e,n)=>{ox([...jV(e)],n).each(s=>{n.preventDefault()})},sB=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||eT(e,n)})},ZV=e=>{if(e.addShortcut("Meta+P","","mcePrint"),nV(e),Cf(e))return Ir(null);{const n=lz(e);return KF(e),Ad(e),JI(e,n),gV(e,n),$V(e),YV(e),zV(e),sB(e),rb(e,n),UV(e,n),n}};class GV{constructor(n){this.lastPath=[],this.editor=n;let s;const i=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",u=>{const f=n.selection.getRng(),x={startContainer:f.startContainer,startOffset:f.startOffset,endContainer:f.endContainer,endOffset:f.endOffset};(u.type==="nodechange"||!_(x,s))&&n.dispatch("SelectionChange"),s=x}),n.on("contextmenu",()=>{ow(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const u=n.selection.getStart(!0);u&&i1(n)&&!i.isSameElementPath(u)&&n.dom.isChildOf(u,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",u=>{!u.isDefaultPrevented()&&i1(n)&&(n.selection.getNode().nodeName==="IMG"?vd.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const s=this.editor,i=s.selection;let u;if(s.initialized&&i&&!xE(s)){const f=s.getBody();u=i.getStart(!0)||f,(u.ownerDocument!==s.getDoc()||!s.dom.isChildOf(u,f))&&(u=f);const x=[];s.dom.getParent(u,T=>T===f?!0:(x.push(T),!1)),s.dispatch("NodeChange",{...n,element:u,parents:x})}}isSameElementPath(n){let s;const i=this.editor,u=ds(i.dom.getParents(n,wt,i.getBody()));if(u.length===this.lastPath.length){for(s=u.length;s>=0&&u[s]===this.lastPath[s];s--);if(s===-1)return this.lastPath=u,!0}return this.lastPath=u,!1}}const uM=rp("image"),qV=e=>{const n=e;return te.from(n[uM])},KV=(e,n)=>{const s=e;s[uM]=n},dM=rp("event"),JV=e=>{const n=e;return te.from(n[dM])},tT=e=>n=>{const s=n;s[dM]=e},rB=(e,n)=>tT(n)(e),aB=tT(0),iB=tT(2),QV=tT(1),eW=(e=>n=>{const s=n;return te.from(s[dM]).exists(i=>i===e)})(0),tW=()=>Object.freeze({length:0,item:e=>null}),hM=rp("mode"),ux=e=>{const n=e;return te.from(n[hM])},nT=e=>n=>{const s=n;s[hM]=e},lB=(e,n)=>nT(n)(e),gM=nT(0),fM=nT(2),nW=nT(1),cB=e=>n=>{const s=n;return te.from(s[hM]).exists(i=>i===e)},jv=cB(0),uB=cB(1),oW=(e,n)=>({...n,get length(){return n.length},add:(s,i)=>{if(jv(e))if(oe(s)){if(!Wn(i))return n.add(s,i)}else return n.add(s);return null},remove:s=>{jv(e)&&n.remove(s)},clear:()=>{jv(e)&&n.clear()}}),yj=["none","copy","link","move"],oT=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],mM=()=>{const e=new window.DataTransfer;let n="move",s="all";const i={get dropEffect(){return n},set dropEffect(u){We(yj,u)&&(n=u)},get effectAllowed(){return s},set effectAllowed(u){eW(i)&&We(oT,u)&&(s=u)},get items(){return oW(i,e.items)},get files(){return uB(i)?tW():e.files},get types(){return e.types},setDragImage:(u,f,x)=>{jv(i)&&(KV(i,{image:u,x:f,y:x}),e.setDragImage(u,f,x))},getData:u=>uB(i)?"":e.getData(u),setData:(u,f)=>{jv(i)&&e.setData(u,f)},clearData:u=>{jv(i)&&e.clearData(u)}};return gM(i),i},sW=e=>{const n=mM(),s=ux(e);return fM(e),aB(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,qV(e).each(i=>n.setDragImage(i.image,i.x,i.y)),De(e.types,i=>{i!=="Files"&&n.setData(i,e.getData(i))}),De(e.files,i=>n.items.add(i)),JV(e).each(i=>{rB(n,i)}),s.each(i=>{lB(e,i),lB(n,i)}),n},rW=e=>{const n=e.getData("text/html");return n===""?te.none():te.some(n)},dB=(e,n)=>e.setData("text/html",n),hB="x-tinymce/html",sT=Dt(hB),pM="<!-- "+hB+" -->",aW=e=>pM+e,iW=e=>e.replace(pM,""),gB=e=>e.indexOf(pM)!==-1,lW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),cW=(e,n)=>{let s="<"+e;const i=da(n,(u,f)=>f+'="'+Wg.encodeAllRaw(u)+'"');return i.length&&(s+=" "+i.join(" ")),s+">"},uW=(e,n,s)=>{const i=e.split(/\n\n/),u=cW(n,s),f="</"+n+">",x=Ze(i,D=>D.split(/\n/).join("<br />")),T=D=>u+D+f;return x.length===1?x[0]:Ze(x,T).join("")},Qr="%MCEPASTEBIN%",dW=(e,n)=>{const{dom:s,selection:i}=e,u=e.getBody();n.set(i.getRng());const f=s.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Qr);In.browser.isFirefox()&&s.setStyle(f,"left",s.getStyle(u,"direction",!0)==="rtl"?65535:-65535),s.bind(f,"beforedeactivate focusin focusout",x=>{x.stopPropagation()}),f.focus(),i.select(f,!0)},fB=(e,n)=>{const s=e.dom;if(bM(e)){let i;const u=n.get();for(;i=bM(e);)s.remove(i),s.unbind(i);u&&e.selection.setRng(u)}n.set(null)},bM=e=>e.dom.get("mcepastebin"),vM=e=>ut(e)&&e.id==="mcepastebin",mB=e=>{const n=e.dom,s=(x,T)=>{x.appendChild(T),n.remove(T,!0)},[i,...u]=Cn(e.getBody().childNodes,vM);De(u,x=>{s(i,x)});const f=n.select("div[id=mcepastebin]",i);for(let x=f.length-1;x>=0;x--){const T=n.create("div");i.insertBefore(T,f[x]),s(T,f[x])}return i?i.innerHTML:""},pB=e=>e===Qr,hW=e=>{const n=Ir(null);return{create:()=>dW(e,n),remove:()=>fB(e,n),getEl:()=>bM(e),getHtml:()=>mB(e),getLastRng:n.get}},xM=(e,n)=>(zt.each(n,s=>{xn(s,RegExp)?e=e.replace(s,""):e=e.replace(s[0],s[1])}),e),yM=e=>{const n=Er(),s=Rv({},n);let i="";const u=n.getVoidElements(),f=zt.makeMap("script noscript style textarea video audio iframe object"," "),x=n.getBlockElements(),T=D=>{const F=D.name,G=D;if(F==="br"){i+=`
`;return}if(F!=="wbr"){if(u[F]&&(i+=" "),f[F]){i+=" ";return}if(D.type===3&&(i+=D.value),!(D.name in n.getVoidElements())){let J=D.firstChild;if(J)do T(J);while(J=J.next)}x[F]&&G.next&&(i+=`
`,F==="p"&&(i+=`
`))}};return e=xM(e,[/<!\[[^\]]+\]>/g]),T(s.parse(e)),i},bB=e=>(e=xM(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(s,i,u)=>!i&&!u?" ":za],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),gW=e=>{let n=0;return()=>e+n++},fW=e=>{const n=e.toLowerCase(),s={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return zt.hasOwn(s,n)?"image/"+s[n]:"image/"+n},vB=(e,n)=>{const s=Rv({sanitize:j2(e),sandbox_iframes:Yb(e),sandbox_iframes_exclusions:wy(e),convert_unsafe_embeds:OE(e)},e.schema);s.addNodeFilter("meta",u=>{zt.each(u,f=>{f.remove()})});const i=s.parse(n,{forced_root_block:!1,isRootContent:!0});return Ip({validate:!0},e.schema).serialize(i)},xB=(e,n)=>({content:e,cancelled:n}),mW=(e,n,s)=>{const i=e.dom.create("div",{style:"display:none"},n),u=PS(e,i,s);return xB(u.node.innerHTML,u.isDefaultPrevented())},dx=(e,n,s)=>{const i=n_(e,n,s),u=vB(e,i.content);return e.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented()?mW(e,u,s):xB(u,i.isDefaultPrevented())},pW=(e,n,s)=>dx(e,n,s),ab=(e,n)=>(e.insertContent(n,{merge:U2(e),paste:!0}),!0),Zv=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),bW=(e,n)=>Zv(n)&&Ie(G2(e),s=>ps(n.toLowerCase(),`.${s.toLowerCase()}`)),vW=(e,n,s)=>(e.undoManager.extra(()=>{s(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),hx=(e,n,s)=>(e.undoManager.extra(()=>{s(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),xW=(e,n,s)=>!e.selection.isCollapsed()&&Zv(n)?hx(e,n,s):!1,wM=(e,n,s)=>bW(e,n)?vW(e,n,s):!1,yW=(e,n)=>{zt.each([xW,wM,ab],s=>!s(e,n,ab))},yB=(e,n,s)=>{s||!xy(e)?ab(e,n):yW(e,n)},wB=gW("mceclip"),CM=e=>{const n=mM();return dB(n,e),fM(n),n},SM=(e,n,s,i,u)=>{const f=pW(e,n,s);if(!f.cancelled){const x=f.content,T=()=>yB(e,x,i);u?mC(e,"insertFromPaste",{dataTransfer:CM(x)}).isDefaultPrevented()||(T(),Td(e,"insertFromPaste")):T()}},rT=(e,n,s,i)=>{const u=s||gB(n);SM(e,iW(n),u,!1,i)},kM=(e,n,s)=>{const i=e.dom.encode(n).replace(/\r\n/g,`
`),u=au(i,rf(e)),f=uW(u,Fl(e),of(e));SM(e,f,!1,!0,s)},AM=e=>{const n={};if(e&&e.types)for(let s=0;s<e.types.length;s++){const i=e.types[s];try{n[i]=e.getData(i)}catch{n[i]=""}}return n},ib=(e,n)=>n in e&&e[n].length>0,TM=e=>ib(e,"text/html")||ib(e,"text/plain"),EM=(e,n)=>{const s=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ut(s)?e.dom.encode(s[1]):void 0},CB=(e,n,s,i)=>{const u=wB(),f=Vi(e)&&ut(s.name),x=f?EM(e,s.name):u,T=f?s.name:void 0,D=n.create(u,s,i,x,T);return n.add(D),D},wW=(e,n)=>{kv(n.uri).each(({data:s,type:i,base64Encoded:u})=>{const f=u?s:btoa(s),x=n.file,T=e.editorUpload.blobCache,D=T.getByData(f,i),F=D??CB(e,T,x,f);rT(e,`<img src="${F.blobUri()}">`,!1,!0)})},CW=e=>e.type==="paste",SW=e=>Promise.all(Ze(e,n=>nL(n).then(s=>({file:n,uri:s})))),SB=e=>{const n=G2(e);return s=>co(s.type,"image/")&&Ie(n,i=>fW(i)===s.type)},_M=(e,n)=>{const s=n.items?vr(oo(n.items),u=>u.kind==="file"?[u.getAsFile()]:[]):[],i=n.files?oo(n.files):[];return Cn(s.length>0?s:i,SB(e))},kB=(e,n,s)=>{const i=CW(n)?n.clipboardData:n.dataTransfer;if(Xb(e)&&i){const u=_M(e,i);if(u.length>0)return n.preventDefault(),SW(u).then(f=>{s&&e.selection.setRng(s),De(f,x=>{wW(e,x)})}),!0}return!1},AB=e=>{var n,s;return In.os.isAndroid()&&((s=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||s===void 0?void 0:s.length)===0},TB=e=>_n.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,OM=(e,n,s,i,u)=>{let f=bB(s);const x=ib(n,sT())||gB(s),T=!x&&lW(f),D=Zv(f);(pB(f)||!f.length||T&&!D)&&(i=!0),(i||D)&&(ib(n,"text/plain")&&T?f=n["text/plain"]:f=yM(f)),!pB(f)&&(i?kM(e,f,u):rT(e,f,x,u))},EB=(e,n,s)=>{let i;const u=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",f=>{TB(f)&&!f.isDefaultPrevented()&&(i=f.shiftKey&&f.keyCode===86)}),e.on("paste",f=>{if(f.isDefaultPrevented()||AB(f))return;const x=s.get()==="text"||i;i=!1;const T=AM(f.clipboardData);!TM(T)&&kB(e,f,u())||(ib(T,"text/html")?(f.preventDefault(),OM(e,T,T["text/html"],x,!0)):ib(T,"text/plain")&&ib(T,"text/uri-list")?(f.preventDefault(),OM(e,T,T["text/plain"],x,!0)):(n.create(),vd.setEditorTimeout(e,()=>{const D=n.getHtml();n.remove(),OM(e,T,D,x,!1)},0)))})},kW=e=>{const n=u=>co(u,"webkit-fake-url"),s=u=>co(u,"data:"),i=u=>{var f;return((f=u.data)===null||f===void 0?void 0:f.paste)===!0};e.parser.addNodeFilter("img",(u,f,x)=>{if(!Xb(e)&&i(x))for(const T of u){const D=T.attr("src");oe(D)&&!T.attr("data-mce-object")&&D!==In.transparentSrc&&(n(D)||!Y2(e)&&s(D))&&T.remove()}})},AW=(e,n,s)=>{EB(e,n,s),kW(e)},TW=(e,n)=>{n.get()==="text"?(n.set("html"),y1(e,!1)):(n.set("text"),y1(e,!0)),e.focus()},EW=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{TW(e,n)}),e.addCommand("mceInsertClipboardContent",(s,i)=>{i.html&&rT(e,i.html,i.internal,!1),i.text&&kM(e,i.text,!1)})},_W=(e,n,s)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",s),e.setData(sT(),n),!0}catch{return!1}else return!1},kC=(e,n,s,i)=>{_W(e.clipboardData,n.html,n.text)?(e.preventDefault(),i()):s(n.html,i)},_B=e=>(n,s)=>{const{dom:i,selection:u}=e,f=i.create("div",{contenteditable:"false","data-mce-bogus":"all"}),x=i.create("div",{contenteditable:"true"},n);i.setStyles(f,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),f.appendChild(x),i.add(e.getBody(),f);const T=u.getRng();x.focus();const D=i.createRng();D.selectNodeContents(x),u.setRng(D),vd.setEditorTimeout(e,()=>{u.setRng(T),i.remove(f),s()},0)},RM=e=>({html:aW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),OW=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),OB=e=>!e.selection.isCollapsed()||OW(e),RB=e=>n=>{!n.isDefaultPrevented()&&OB(e)&&e.selection.isEditable()&&kC(n,RM(e),_B(e),()=>{if(In.browser.isChromium()||In.browser.isFirefox()){const s=e.selection.getRng();vd.setEditorTimeout(e,()=>{e.selection.setRng(s),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},DB=e=>n=>{!n.isDefaultPrevented()&&OB(e)&&kC(n,RM(e),_B(e),ot)},RW=e=>{e.on("cut",RB(e)),e.on("copy",DB(e))},MB=(e,n)=>{var s,i;return Xt.getCaretRangeFromPoint((s=n.clientX)!==null&&s!==void 0?s:0,(i=n.clientY)!==null&&i!==void 0?i:0,e.getDoc())},DW=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},PB=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},MW=e=>Ie(e.files,n=>/^image\//.test(n.type)),LB=(e,n,s,i)=>{const u=e.getParent(s,x=>Fd(n,x));if(!ce(e.getParent(s,"summary")))return!0;if(u&&Qn(i,"text/html")){const x=new DOMParser().parseFromString(i["text/html"],"text/html").body;return!ce(x.querySelector(u.nodeName.toLowerCase()))}else return!1},PW=e=>{e.on("input",n=>{const s=i=>ce(i.querySelector("summary"));if(n.inputType==="deleteByDrag"){const i=Cn(e.dom.select("details"),s);De(i,u=>{rr(u.firstChild)&&u.firstChild.remove();const f=e.dom.create("summary");f.appendChild(Yd().dom),u.prepend(f)})}})},LW=(e,n)=>{by(e)&&e.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),Xb(e)||e.on("drop",s=>{const i=s.dataTransfer;i&&MW(i)&&s.preventDefault()}),e.on("drop",s=>{if(s.isDefaultPrevented())return;const i=MB(e,s);if(no(i))return;const u=AM(s.dataTransfer),f=ib(u,sT());if((!TM(u)||DW(u))&&kB(e,s,i))return;const x=u[sT()],T=x||u["text/html"]||u["text/plain"],D=LB(e.dom,e.schema,i.startContainer,u),F=n.get();F&&!D||T&&(s.preventDefault(),vd.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(x||F&&D)&&e.execCommand("Delete"),PB(e,i);const G=bB(T);u["text/html"]?rT(e,G,f,!0):kM(e,G,!0)})}))}),e.on("dragstart",s=>{n.set(!0)}),e.on("dragover dragend",s=>{Xb(e)&&!n.get()&&(s.preventDefault(),PB(e,MB(e,s))),s.type==="dragend"&&n.set(!1)}),PW(e)},NW=e=>{const n=u=>f=>{u(e,f)},s=vy(e);Be(s)&&e.on("PastePreProcess",n(s));const i=z2(e);Be(i)&&e.on("PastePostProcess",n(i))},IW=(e,n)=>{e.on("PastePreProcess",s=>{s.content=n(e,s.content,s.internal)})},FW=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,NB=e=>zt.trim(e).replace(FW,Cb).toLowerCase(),BW=(e,n,s)=>{const i=W2(e);if(s||i==="all"||!kE(e))return n;const u=i?i.split(/[, ]/):[];if(u&&i!=="none"){const f=e.dom,x=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(T,D,F,G)=>{const J=f.parseStyle(f.decode(F)),ee={};for(let ke=0;ke<u.length;ke++){const be=J[u[ke]];let Ee=be,Ye=f.getStyle(x,u[ke],!0);/color/.test(u[ke])&&(Ee=NB(Ee),Ye=NB(Ye)),Ye!==Ee&&(ee[u[ke]]=be)}const fe=f.serializeStyle(ee,"span");return fe?D+' style="'+fe+'"'+G:D+G})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(f,x,T,D)=>x+' style="'+T+'"'+D),n},HW=e=>{(In.browser.isChromium()||In.browser.isSafari())&&IW(e,BW)},IB=e=>{const n=Ir(!1),s=Ir(X2(e)?"text":"html"),i=hW(e);HW(e),EW(e,s),NW(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>s.get()==="text"),e.on("PreInit",()=>{RW(e),LW(e,n),AW(e,i,s)})},FB=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},$W=e=>{e.parser.addNodeFilter("details",n=>{const s=_E(e);De(n,i=>{s==="expanded"?i.attr("open","open"):s==="collapsed"&&i.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const s=q2(e);De(n,i=>{s==="expanded"?i.attr("open","open"):s==="collapsed"&&i.attr("open",null)})})},zW=e=>{FB(e),$W(e)},VW=rr,BB=qt,WW=e=>ar(e.dom),UW=e=>Lt(e.dom),HB=e=>n=>rs($e.fromDom(e),n),aT=(e,n,s)=>Hr($e.fromDom(e),i=>UW(i)||s.isBlock(Se(i)),HB(n)).getOr($e.fromDom(n)).dom,DM=(e,n)=>Hr($e.fromDom(e),WW,HB(n)),$B=(e,n,s)=>{const i=new Tr(e,n),u=s?i.next.bind(i):i.prev.bind(i);let f=e;for(let x=s?e:u();x&&!VW(x);x=u())md(x)&&(f=x);return f},zB=(e,n,s)=>{const u=At.fromRangeStart(e).getNode(),f=aT(u,n,s),x=$B(u,f,!1),T=$B(u,f,!0),D=document.createRange();return DM(x,f).fold(()=>{BB(x)?D.setStart(x,0):D.setStartBefore(x)},F=>D.setStartBefore(F.dom)),DM(T,f).fold(()=>{BB(T)?D.setEnd(T,T.data.length):D.setEndAfter(T)},F=>D.setEndAfter(F.dom)),D},VB=e=>{const n=zB(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(hk(n))},MM=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),VB(e))})};var gx;(function(e){e.Before="before",e.After="after"})(gx||(gx={}));const WB=(e,n)=>Math.abs(e.left-n),XW=(e,n)=>Math.abs(e.right-n),UB=(e,n)=>e>=n.top&&e<=n.bottom,YW=(e,n)=>e.top<n.bottom&&e.bottom>n.top,XB=(e,n)=>{const s=fd(e,n)/Math.min(e.height,n.height);return YW(e,n)&&s>.5},jW=(e,n)=>{const s=Cn(e,i=>UB(n,i));return o2(s).fold(()=>[[],e],i=>{const{pass:u,fail:f}=Mo(e,x=>XB(x,i));return[u,f]})},ZW=(e,n)=>({node:e.node,position:WB(e,n)<XW(e,n)?gx.Before:gx.After}),GW=(e,n,s)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),Gv=(e,n,s,i)=>{const u=J=>md(J.node)?te.some(J):An(J.node)?Gv(oo(J.node.childNodes),n,s,!1):te.none(),f=(J,ee,fe)=>u(ee).filter(ke=>Math.abs(fe(J,n,s)-fe(ke,n,s))<2&&qt(ke.node)),x=(J,ee)=>{const fe=Go(J,(ke,be)=>ee(ke,n,s)-ee(be,n,s));return Wr(fe,u).map(ke=>i&&!qt(ke.node)&&fe.length>1?f(ke,fe[1],ee).getOr(ke):ke)},[T,D]=jW(YR(e),s),{pass:F,fail:G}=Mo(D,J=>J.top<s);return x(T,GW).orThunk(()=>x(G,Qf)).orThunk(()=>x(F,Qf))},qW=(e,n,s,i)=>{const u=(f,x)=>{const T=F=>An(F)&&F.classList.contains("mce-drag-container"),D=Cn(f.dom.childNodes,No(T));return x.fold(()=>Gv(D,s,i,!0),F=>{const G=Cn(D,J=>J!==F.dom);return Gv(G,s,i,!0)}).orThunk(()=>(rs(f,e)?te.none():Qu(f)).bind(G=>u(G,te.some(f))))};return u(n,te.none())},KW=(e,n,s)=>{const i=$e.fromDom(e),u=Ic(i),x=$e.fromPoint(u,n,s).filter(T=>Li(i,T)).getOr(i);return qW(i,x,n,s)},PM=(e,n,s)=>KW(e,n,s).filter(i=>wp(i.node)).map(i=>ZW(i,n)),YB=e=>{var n,s;const i=e.getBoundingClientRect(),u=e.ownerDocument,f=u.documentElement,x=u.defaultView;return{top:i.top+((n=x==null?void 0:x.scrollY)!==null&&n!==void 0?n:0)-f.clientTop,left:i.left+((s=x==null?void 0:x.scrollX)!==null&&s!==void 0?s:0)-f.clientLeft}},JW=e=>e.inline?YB(e.getBody()):{left:0,top:0},QW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},eU=e=>{const n=e.getBody(),s=e.getDoc().documentElement,i={left:n.scrollLeft,top:n.scrollTop},u={left:n.scrollLeft||s.scrollLeft,top:n.scrollTop||s.scrollTop};return e.inline?i:u},tU=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const s=YB(e.getContentAreaContainer()),i=eU(e);return{left:n.pageX-s.left+i.left,top:n.pageY-s.top+i.top}}return{left:n.pageX,top:n.pageY}},iT=(e,n,s)=>({pageX:s.left-e.left+n.left,pageY:s.top-e.top+n.top}),jB=(e,n)=>iT(JW(e),QW(e),tU(e,n)),LM=e=>({target:e,srcElement:e}),nU=(e,n,s,i)=>({...n,dataTransfer:i,type:e,...LM(s)}),oU=(e,n,s)=>{const i=qs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:i,initEvent:i,preventDefault:ot,stopImmediatePropagation:ot,stopPropagation:ot,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:i,initMouseEvent:i,getModifierState:i,dataTransfer:s,...LM(n)}},sU=(e,n)=>{const s=sW(e);return n==="dragstart"?(aB(s),gM(s)):n==="drop"?(iB(s),fM(s)):(QV(s),nW(s)),s},wj=(e,n,s,i)=>{const u=sU(s,e);return Wn(i)?oU(e,n,u):nU(e,i,n,u)},lT=32,ZB=100,fx=8,qv=16,GB=ar,rU=r2(GB,Lt),qB=(e,n,s)=>GB(s)&&s!==n&&e.isEditable(s.parentElement),aU=(e,n,s)=>no(n)||n===s||e.dom.isChildOf(n,s)?!1:e.dom.isEditable(n),NM=(e,n,s,i)=>{const u=e.dom,f=n.cloneNode(!0);u.setStyles(f,{width:s,height:i}),u.setAttrib(f,"data-mce-selected",null);const x=u.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return u.setStyles(x,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:s,height:i}),u.setStyles(f,{margin:0,boxSizing:"border-box"}),x.appendChild(f),x},KB=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},cT=(e,n)=>s=>()=>{const i=e==="left"?s.scrollX:s.scrollY;s.scroll({[e]:i+n,behavior:"smooth"})},JB=cT("left",-lT),IM=cT("left",lT),QB=cT("top",-lT),iU=cT("top",lT),lU=(e,n,s,i,u,f,x,T,D,F,G,J)=>{let ee=0,fe=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+s>u&&(ee=n.pageX+s-u),n.pageY+i>f&&(fe=n.pageY+i-f),e.style.width=s-ee+"px",e.style.height=i-fe+"px";const ke=D.clientHeight,be=D.clientWidth,Ee=x+D.getBoundingClientRect().top,Ye=T+D.getBoundingClientRect().left;G.on(qe=>{qe.intervalId.clear(),qe.dragging&&J&&(x+fx>=ke?qe.intervalId.set(iU(F)):x-fx<=0?qe.intervalId.set(QB(F)):T+fx>=be?qe.intervalId.set(IM(F)):T-fx<=0?qe.intervalId.set(JB(F)):Ee+qv>=window.innerHeight?qe.intervalId.set(iU(window)):Ee-qv<=0?qe.intervalId.set(QB(window)):Ye+qv>=window.innerWidth?qe.intervalId.set(IM(window)):Ye-qv<=0&&qe.intervalId.set(JB(window)))})},e5=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},cU=(e,n)=>{const s=e.getParent(n.parentNode,e.isBlock);e5(n),s&&s!==e.getRoot()&&e.isEmpty(s)&&Eh($e.fromDom(s))},t5=e=>e.button===0,uU=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),n5=(e,n)=>s=>{if(t5(s)){const i=us(n.dom.getParents(s.target),rU).getOr(null);if(ut(i)&&qB(n.dom,n.getBody(),i)){const u=n.dom.getPos(i),f=n.getBody(),x=n.getDoc().documentElement;e.set({element:i,dataTransfer:mM(),dragging:!1,screenX:s.screenX,screenY:s.screenY,maxX:(n.inline?f.scrollWidth:x.offsetWidth)-2,maxY:(n.inline?f.scrollHeight:x.offsetHeight)-2,relX:s.pageX-u.x,relY:s.pageY-u.y,width:i.offsetWidth,height:i.offsetHeight,ghost:NM(n,i,i.offsetWidth,i.offsetHeight),intervalId:ti(ZB)})}}},dU=(e,n,s)=>{e._selectionOverrides.hideFakeCaret(),PM(e.getBody(),n,s).fold(()=>e.selection.placeCaretAt(n,s),i=>{const u=e._selectionOverrides.showCaret(1,i.node,i.position===gx.Before,!1);u?e.selection.setRng(u):e.selection.placeCaretAt(n,s)})},AC=(e,n,s,i,u)=>{n==="dragstart"&&dB(i,e.dom.getOuterHTML(s));const f=wj(n,s,i,u);return e.dispatch(n,f)},hU=(e,n)=>{const s=tp((u,f)=>dU(n,u,f),0);n.on("remove",s.cancel);const i=e;return u=>e.on(f=>{const x=Math.max(Math.abs(u.screenX-f.screenX),Math.abs(u.screenY-f.screenY));if(!f.dragging&&x>10){const T=AC(n,"dragstart",f.element,f.dataTransfer,u);if(ut(T.dataTransfer)&&(f.dataTransfer=T.dataTransfer),T.isDefaultPrevented())return;f.dragging=!0,n.focus()}if(f.dragging){const T=u.currentTarget===n.getDoc().documentElement,D=uU(f,jB(n,u));KB(f.ghost,n.getBody()),lU(f.ghost,D,f.width,f.height,f.maxX,f.maxY,u.clientY,u.clientX,n.getContentAreaContainer(),n.getWin(),i,T),s.throttle(u.clientX,u.clientY)}})},gU=e=>{const n=e.getSel();if(ut(n)){const i=n.getRangeAt(0).startContainer;return qt(i)?i.parentNode:i}else return null},fU=(e,n)=>s=>{e.on(i=>{var u;if(i.intervalId.clear(),i.dragging){if(aU(n,gU(n.selection),i.element)){const f=(u=n.getDoc().elementFromPoint(s.clientX,s.clientY))!==null&&u!==void 0?u:n.getBody();AC(n,"drop",f,i.dataTransfer,s).isDefaultPrevented()||n.undoManager.transact(()=>{cU(n.dom,i.element),rW(i.dataTransfer).each(T=>n.insertContent(T)),n._selectionOverrides.hideFakeCaret()})}AC(n,"dragend",n.getBody(),i.dataTransfer,s)}}),o5(e)},FM=(e,n,s)=>{e.on(i=>{i.intervalId.clear(),i.dragging&&s.fold(()=>AC(n,"dragend",i.element,i.dataTransfer),u=>AC(n,"dragend",i.element,i.dataTransfer,u))}),o5(e)},Cj=(e,n)=>s=>FM(e,n,te.some(s)),o5=e=>{e.on(n=>{n.intervalId.clear(),e5(n.ghost)}),e.clear()},s5=e=>{const n=Ji(),s=Jr.DOM,i=document,u=n5(n,e),f=hU(n,e),x=fU(n,e),T=Cj(n,e);e.on("mousedown",u),e.on("mousemove",f),e.on("mouseup",x),s.bind(i,"mousemove",f),s.bind(i,"mouseup",T),e.on("remove",()=>{s.unbind(i,"mousemove",f),s.unbind(i,"mouseup",T)}),e.on("keydown",D=>{D.keyCode===_n.ESC&&FM(n,e,te.none())})},mU=e=>{const n=u=>{if(!u.isDefaultPrevented()){const f=u.dataTransfer;f&&(We(f.types,"Files")||f.files.length>0)&&(u.preventDefault(),u.type==="drop"&&eA(e,"Dropped file type is not supported"))}},s=u=>{VS(e,u.target)&&n(u)},i=()=>{const u=Jr.DOM,f=e.dom,x=document,T=e.inline?e.getBody():e.getDoc(),D=["drop","dragover"];De(D,F=>{u.bind(x,F,s),f.bind(T,F,n)}),e.on("remove",()=>{De(D,F=>{u.unbind(x,F,s),f.unbind(T,F,n)})})};e.on("init",()=>{vd.setEditorTimeout(e,i,0)})},BM=e=>{s5(e),wc(e)&&mU(e)},pU=e=>{const n=tp(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const s=e.selection.getRng();if(s.collapsed){const i=cA(e,s,!1);e.selection.setRng(i)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},bU=e=>{e.on("init",()=>{e.on("focusin",n=>{const s=n.target;if(Cl(s)){const i=Nh(e.getBody(),s),u=ar(i)?i:s;e.selection.getNode()!==u&&J1(e,u).each(f=>e.selection.setRng(f))}})})},TC=ar,HM=(e,n)=>Nh(e.getBody(),n),uT=e=>{const n=e.selection,s=e.dom,i=e.getBody(),u=sS(e,i,s.isBlock,()=>D1(e)),f="sel-"+s.uniqueId(),x="data-mce-selected";let T;const D=On=>ut(On)&&s.hasClass(On,"mce-offscreen-selection"),F=On=>On!==i&&(TC(On)||Cl(On))&&s.isChildOf(On,i)&&s.isEditable(On.parentNode),G=On=>{On&&n.setRng(On)},J=(On,_t,vt,Ut=!0)=>e.dispatch("ShowCaret",{target:_t,direction:On,before:vt}).isDefaultPrevented()?null:(Ut&&n.scrollIntoView(_t,On===-1),u.show(vt,_t)),ee=On=>{On.hasAttribute("data-mce-caret")&&(cp(On),n.scrollIntoView(On))},fe=()=>{e.on("click",_t=>{s.isEditable(_t.target)||(_t.preventDefault(),e.focus())}),e.on("blur NewBlock",lt),e.on("ResizeWindow FullscreenStateChanged",u.reposition),e.on("tap",_t=>{const vt=_t.target,Ut=HM(e,vt);TC(Ut)?(_t.preventDefault(),J1(e,Ut).each(tt)):F(vt)&&J1(e,vt).each(tt)},!0),e.on("mousedown",_t=>{const vt=_t.target;if(vt!==i&&vt.nodeName!=="HTML"&&!s.isChildOf(vt,i)||!K8(e,_t.clientX,_t.clientY))return;lt(),nn();const Ut=HM(e,vt);TC(Ut)?(_t.preventDefault(),J1(e,Ut).each(tt)):PM(i,_t.clientX,_t.clientY).each(Dn=>{_t.preventDefault();const ho=J(1,Dn.node,Dn.position===gx.Before,!1);G(ho),iu(Ut)?Ut.focus():e.getBody().focus()})}),e.on("keypress",_t=>{_n.modifierPressed(_t)||TC(n.getNode())&&_t.preventDefault()}),e.on("GetSelectionRange",_t=>{let vt=_t.range;if(T){if(!T.parentNode){T=null;return}vt=vt.cloneRange(),vt.selectNode(T),_t.range=vt}}),e.on("SetSelectionRange",_t=>{_t.range=Ee(_t.range);const vt=tt(_t.range,_t.forward);vt&&(_t.range=vt)});const On=_t=>An(_t)&&_t.id==="mcepastebin";e.on("AfterSetSelectionRange",_t=>{const vt=_t.range,Ut=vt.startContainer.parentElement;!be(vt)&&!On(Ut)&&nn(),D(Ut)||lt()}),BM(e),pU(e),bU(e)},ke=On=>Lu(On)||Ws(On)||Yl(On),be=On=>ke(On.startContainer)||ke(On.endContainer),Ee=On=>{const _t=e.schema.getVoidElements(),vt=s.createRng(),Ut=On.startContainer,Dn=On.startOffset,ho=On.endContainer,Cs=On.endOffset;return Qn(_t,Ut.nodeName.toLowerCase())?Dn===0?vt.setStartBefore(Ut):vt.setStartAfter(Ut):vt.setStart(Ut,Dn),Qn(_t,ho.nodeName.toLowerCase())?Cs===0?vt.setEndBefore(ho):vt.setEndAfter(ho):vt.setEnd(ho,Cs),vt},Ye=(On,_t)=>{const vt=$e.fromDom(e.getBody()),Ut=e.getDoc(),Dn=to(vt,"#"+f).getOrThunk(()=>{const Ss=$e.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ut);return fa(Ss,"id",f),M(vt,Ss),Ss}),ho=s.createRng();Y(Dn),$(Dn,[$e.fromText(za,Ut),$e.fromDom(_t),$e.fromText(za,Ut)]),ho.setStart(Dn.dom.firstChild,1),ho.setEnd(Dn.dom.lastChild,0),C(Dn,{top:s.getPos(On,e.getBody()).y+"px"}),gv(Dn);const Cs=n.getSel();return Cs&&(Cs.removeAllRanges(),Cs.addRange(ho)),ho},qe=On=>{const _t=On.cloneNode(!0),vt=e.dispatch("ObjectSelected",{target:On,targetClone:_t});if(vt.isDefaultPrevented())return null;const Ut=Ye(On,vt.targetClone),Dn=$e.fromDom(On);return De(Vs($e.fromDom(e.getBody()),`*[${x}]`),ho=>{rs(Dn,ho)||er(ho,x)}),s.getAttrib(On,x)||On.setAttribute(x,"1"),T=On,nn(),Ut},tt=(On,_t)=>{if(!On)return null;if(On.collapsed){if(!be(On)){const ho=_t?1:-1,Cs=um(ho,i,On),Ss=Cs.getNode(!_t);if(ut(Ss)){if(wp(Ss))return J(ho,Ss,_t?!Cs.isAtEnd():!1,!1);if(gd(Ss)&&ar(Ss.nextSibling)){const Pr=s.createRng();return Pr.setStart(Ss,0),Pr.setEnd(Ss,0),Pr}}const xr=Cs.getNode(_t);if(ut(xr)){if(wp(xr))return J(ho,xr,_t?!1:!Cs.isAtEnd(),!1);if(gd(xr)&&ar(xr.previousSibling)){const Pr=s.createRng();return Pr.setStart(xr,1),Pr.setEnd(xr,1),Pr}}}return null}let vt=On.startContainer,Ut=On.startOffset;const Dn=On.endOffset;if(qt(vt)&&Ut===0&&TC(vt.parentNode)&&(vt=vt.parentNode,Ut=s.nodeIndex(vt),vt=vt.parentNode),!An(vt))return null;if(Dn===Ut+1&&vt===On.endContainer){const ho=vt.childNodes[Ut];if(F(ho))return qe(ho)}return null},lt=()=>{T&&T.removeAttribute(x),to($e.fromDom(e.getBody()),"#"+f).each(U),T=null},$t=()=>{u.destroy(),T=null},nn=()=>{u.hide()};return Cf(e)||fe(),{showCaret:J,showBlockCaretContainer:ee,hideFakeCaret:nn,destroy:$t}},r5=(e,n)=>{let s=n;for(let i=e.previousSibling;qt(i);i=i.previousSibling)s+=i.data.length;return s},$M=(e,n,s,i,u)=>{if(qt(s)&&(i<0||i>s.data.length))return[];const f=u&&qt(s)?[r5(s,i)]:[i];let x=s;for(;x!==n&&x.parentNode;)f.push(e.nodeIndex(x,u)),x=x.parentNode;return x===n?f.reverse():[]},zM=(e,n,s,i,u,f,x=!1)=>{const T=$M(e,n,s,i,x),D=$M(e,n,u,f,x);return{start:T,end:D}},a5=(e,n)=>{const s=n.slice(),i=s.pop();return Qo(i)?Vo(s,(f,x)=>f.bind(T=>te.from(T.childNodes[x])),te.some(e)).bind(f=>qt(f)&&(i<0||i>f.data.length)?te.none():te.some({node:f,offset:i})):te.none()},VM=(e,n)=>a5(e,n.start).bind(({node:s,offset:i})=>a5(e,n.end).map(({node:u,offset:f})=>{const x=document.createRange();return x.setStart(s,i),x.setEnd(u,f),x})),vU=(e,n,s,i=!1)=>zM(e,n,s.startContainer,s.startOffset,s.endContainer,s.endOffset,i),mx=(e,n,s)=>{if(n&&e.isEmpty(n)&&!s(n)){const i=n.parentNode;e.remove(n,qt(n.firstChild)&&Rc(n.firstChild.data)),mx(e,i,s)}},dT=(e,n,s,i=!0)=>{const u=n.startContainer.parentNode,f=n.endContainer.parentNode;n.deleteContents(),i&&!s(n.startContainer)&&(qt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),qt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),mx(e,u,s),u!==f&&mx(e,f,s))},px=(e,n)=>te.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),WM=(e,n,s)=>{const i=e.dynamicPatternsLookup({text:s,block:n});return{...e,blockPatterns:S2(i).concat(e.blockPatterns),inlinePatterns:tf(i).concat(e.inlinePatterns)}},UM=(e,n,s,i)=>{const u=e.createRng();return u.setStart(n,0),u.setEnd(s,i),u.toString()},i5=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),hT=(e,n)=>{const s=e.createRng();return s.setStartAfter(n.start),s.setEndBefore(n.end),s},l5=(e,n,s)=>{const i=VM(e.getRoot(),s).getOrDie("Unable to resolve path range"),u=i.startContainer,f=i.endContainer,x=i.endOffset===0?f:f.splitText(i.endOffset),T=i.startOffset===0?u:u.splitText(i.startOffset),D=T.parentNode,F=x.parentNode;return{prefix:n,end:F.insertBefore(i5(e,n+"-end"),x),start:D.insertBefore(i5(e,n+"-start"),T)}},c5=(e,n,s)=>{mx(e,e.get(n.prefix+"-end"),s),mx(e,e.get(n.prefix+"-start"),s)},gT=e=>e.start.length===0,u5=e=>(n,s)=>{const u=n.data.substring(0,s),f=u.lastIndexOf(e.charAt(e.length-1)),x=u.lastIndexOf(e);return x!==-1?x+e.length:f!==-1?f+1:-1},fT=(e,n,s,i)=>{const u=n.start;return ED(e,i.container,i.offset,u5(u),s).bind(x=>{var T,D;const F=(D=(T=s.textContent)===null||T===void 0?void 0:T.indexOf(u))!==null&&D!==void 0?D:-1;if(F!==-1&&x.offset>=F+u.length){const J=e.createRng();return J.setStart(x.container,x.offset-u.length),J.setEnd(x.container,x.offset),te.some(J)}else{const J=x.offset-u.length;return sx(x.container,J,s).map(ee=>{const fe=e.createRng();return fe.setStart(ee.container,ee.offset),fe.setEnd(x.container,x.offset),fe}).filter(ee=>ee.toString()===u).orThunk(()=>fT(e,n,s,Vh(x.container,0)))}})},XM=(e,n,s,i,u,f=!1)=>{if(n.start.length===0&&!f){const x=e.createRng();return x.setStart(s,i),x.setEnd(s,i),te.some(x)}return TD(s,i,u).bind(x=>fT(e,n,u,x).bind(D=>{var F;if(f){if(D.endContainer===x.container&&D.endOffset===x.offset)return te.none();if(x.offset===0&&((F=D.endContainer.textContent)===null||F===void 0?void 0:F.length)===D.endOffset)return te.none()}return te.some(D)}))},xU=(e,n,s,i)=>{const u=e.dom,f=u.getRoot(),x=s.pattern,T=s.position.container,D=s.position.offset;return sx(T,D-s.pattern.end.length,n).bind(F=>{const G=zM(u,f,F.container,F.offset,T,D,i);if(gT(x))return te.some({matches:[{pattern:x,startRng:G,endRng:G}],position:F});{const J=bx(e,s.remainingPatterns,F.container,F.offset,n,i),ee=J.getOr({matches:[],position:F}),fe=ee.position;return XM(u,x,fe.container,fe.offset,n,J.isNone()).map(be=>{const Ee=vU(u,f,be,i);return{matches:ee.matches.concat([{pattern:x,startRng:Ee,endRng:G}]),position:Vh(be.startContainer,be.startOffset)}})}})},bx=(e,n,s,i,u,f)=>{const x=e.dom;return TD(s,i,x.getRoot()).bind(T=>{const D=UM(x,u,s,i);for(let F=0;F<n.length;F++){const G=n[F];if(!ps(D,G.end))continue;const J=n.slice();J.splice(F,1);const ee=xU(e,u,{pattern:G,remainingPatterns:J,position:T},f);if(ee.isNone()&&i>0)return bx(e,n,s,i-1,u,f);if(ee.isSome())return ee}return te.none()})},d5=(e,n,s)=>{e.selection.setRng(s),n.type==="inline-format"?De(n.format,i=>{e.formatter.apply(i)}):e.execCommand(n.cmd,!1,n.value)},yU=(e,n,s,i)=>{const u=hT(e.dom,s);dT(e.dom,u,i),d5(e,n,u)},h5=(e,n,s,i,u)=>{const f=e.dom,x=hT(f,i),T=hT(f,s);dT(f,T,u),dT(f,x,u);const D={prefix:s.prefix,start:s.end,end:i.start},F=hT(f,D);d5(e,n,F)},wU=(e,n)=>{const s=rp("mce_textpattern"),i=Qs(n,(u,f)=>{const x=l5(e,s+`_end${u.length}`,f.endRng);return u.concat([{...f,endMarker:x}])},[]);return Qs(i,(u,f)=>{const x=i.length-u.length-1,T=gT(f.pattern)?f.endMarker:l5(e,s+`_start${x}`,f.startRng);return u.concat([{...f,startMarker:T}])},[])},CU=e=>Go(e,(n,s)=>s.end.length-n.end.length),SU=(e,n)=>{const s=qo(e,i=>Ie(n,u=>i.pattern.start===u.pattern.start&&i.pattern.end===u.pattern.end));return e.length===n.length?s?e:n:e.length>n.length?e:n},g5=(e,n,s,i,u,f)=>{const x=bx(e,u.inlinePatterns,s,i,n,f).fold(()=>[],D=>D.matches),T=bx(e,CU(u.inlinePatterns),s,i,n,f).fold(()=>[],D=>D.matches);return SU(x,T)},f5=(e,n)=>{if(n.length===0)return;const s=e.dom,i=e.selection.getBookmark(),u=wU(s,n);De(u,f=>{const x=s.getParent(f.startMarker.start,s.isBlock),T=D=>D===x;gT(f.pattern)?yU(e,f.pattern,f.endMarker,T):h5(e,f.pattern,f.startMarker,f.endMarker,T),c5(s,f.endMarker,T),c5(s,f.startMarker,T)}),e.selection.moveToBookmark(i)},m5=(e,n,s)=>h9(n,0,n).map(i=>{const u=i.container;return QI(u,s.start.length,n).each(f=>{const x=e.createRng();x.setStart(u,0),x.setEnd(f.container,f.offset),dT(e,x,T=>T===n)}),u}),p5=e=>(n,s)=>{const i=n.dom,u=s.pattern,f=VM(i.getRoot(),s.range).getOrDie("Unable to resolve path range"),x=(T,D)=>{const F=D.get(T);return jt(F)&&qn(F).exists(G=>Qn(G,"block"))};return px(n,f).each(T=>{u.type==="block-format"?x(u.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,T,u),n.formatter.apply(u.format)}):u.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,T,u),n.execCommand(u.cmd,!1,u.value)})}),!0},kU=e=>Go(e,(n,s)=>s.start.length-n.start.length),YM=e=>(n,s)=>{const i=kU(n),u=s.replace(za," ");return us(i,f=>e(f,s,u))},b5=(e,n)=>(s,i,u,f,x)=>{var T;x===void 0&&(x=(T=i.textContent)!==null&&T!==void 0?T:"");const D=s.dom,F=Fl(s);return D.is(i,F)?e(u.blockPatterns,x).map(G=>n&&zt.trim(x).length===G.start.length?[]:[{pattern:G,range:zM(D,D.getRoot(),i,0,i,0,f)}]).getOr([]):[]},jM=e=>/^\s[^\s]/.test(e),AU=p5((e,n,s)=>{m5(e,n,s).each(i=>{const u=$e.fromDom(i),f=ip(u);jM(f)&&lp(u,f.slice(1))})}),TU=YM((e,n,s)=>n.indexOf(e.start)===0||s.indexOf(e.start)===0),EU=b5(TU,!0),_U=(e,n)=>{const s=e.selection.getRng();return px(e,s).map(i=>{var u;const f=Math.max(0,s.startOffset),x=WM(n,i,(u=i.textContent)!==null&&u!==void 0?u:""),T=g5(e,i,s.startContainer,f,x,!0),D=EU(e,i,x,!0);return{inlineMatches:T,blockMatches:D}}).filter(({inlineMatches:i,blockMatches:u})=>u.length>0||i.length>0)},OU=(e,n)=>{if(n.length===0)return;const s=e.selection.getBookmark();De(n,i=>AU(e,i)),e.selection.moveToBookmark(s)},mT=p5(m5),RU=YM((e,n,s)=>n===e.start||s===e.start),DU=b5(RU,!1),MU=(e,n)=>{const s=e.selection.getRng();return px(e,s).map(i=>{const u=Math.max(0,s.startOffset),f=UM(e.dom,i,s.startContainer,u),x=WM(n,i,f);return DU(e,i,x,!1,f)}).filter(i=>i.length>0)},PU=(e,n)=>{De(n,s=>mT(e,s))},LU=(e,n)=>_U(e,n).fold(dt,({inlineMatches:s,blockMatches:i})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{A0(e),f5(e,s),OU(e,i);const u=e.selection.getRng(),f=TD(u.startContainer,u.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),f.each(x=>{const T=x.container;T.data.charAt(x.offset-1)===pc&&(T.deleteData(x.offset-1,1),mx(e.dom,T.parentNode,D=>D===e.dom.getRoot()))})}),!0)),NU=(e,n)=>{const s=e.selection.getRng();px(e,s).map(i=>{const u=Math.max(0,s.startOffset-1),f=UM(e.dom,i,s.startContainer,u),x=WM(n,i,f),T=g5(e,i,s.startContainer,u,x,!1);T.length>0&&e.undoManager.transact(()=>{f5(e,T)})})},IU=(e,n)=>MU(e,n).fold(dt,s=>(e.undoManager.transact(()=>{PU(e,s)}),!0)),v5=(e,n,s)=>{for(let i=0;i<e.length;i++)if(s(e[i],n))return!0;return!1},FU=(e,n)=>v5(e,n,(s,i)=>s===i.keyCode&&!_n.modifierPressed(i)),x5=(e,n)=>v5(e,n,(s,i)=>s.charCodeAt(0)===i.charCode),BU=e=>{const n=[",",".",";",":","!","?"],s=[32],i=()=>Nl(AE(e).filter(x=>x.type==="inline-command"||x.type==="block-command"?e.queryCommandSupported(x.cmd):!0),TE(e)),u=()=>Z2(e);e.on("keydown",x=>{if(x.keyCode===13&&!_n.modifierPressed(x)&&e.selection.isCollapsed()&&e.selection.isEditable()){const T=Rh(i(),"enter");(T.inlinePatterns.length>0||T.blockPatterns.length>0||u())&&LU(e,T)&&x.preventDefault()}},!0),e.on("keydown",x=>{if(x.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const T=Rh(i(),"space");(T.blockPatterns.length>0||u())&&IU(e,T)&&x.preventDefault()}},!0);const f=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const x=Rh(i(),"space");(x.inlinePatterns.length>0||u())&&NU(e,x)}};e.on("keyup",x=>{FU(s,x)&&f()}),e.on("keypress",x=>{x5(n,x)&&vd.setEditorTimeout(e,f)})},y5=e=>{BU(e)},HU=e=>{const n=zt.each,s=_n.BACKSPACE,i=_n.DELETE,u=e.dom,f=e.selection,x=e.parser,T=In.browser,D=T.isFirefox(),F=T.isChromium()||T.isSafari(),G=In.deviceType.isiPhone()||In.deviceType.isiPad(),J=In.os.isMacOS()||In.os.isiOS(),ee=(Tn,So)=>{try{e.getDoc().execCommand(Tn,!1,String(So))}catch{}},fe=Tn=>Tn.isDefaultPrevented(),ke=()=>{const Tn=ko=>{const yn=u.create("body"),ks=ko.cloneContents();return yn.appendChild(ks),f.serializer.serialize(yn,{format:"html"})},So=ko=>{const yn=Tn(ko),ks=u.createRng();ks.selectNode(e.getBody());const Os=Tn(ks);return yn===Os};e.on("keydown",ko=>{const yn=ko.keyCode;if(!fe(ko)&&(yn===i||yn===s)&&e.selection.isEditable()){const ks=e.selection.isCollapsed(),Os=e.getBody();if(ks&&!Bi(e.schema,Os)||!ks&&!So(e.selection.getRng()))return;ko.preventDefault(),e.setContent(""),Os.firstChild&&u.isBlock(Os.firstChild)?e.selection.setCursorLocation(Os.firstChild,0):e.selection.setCursorLocation(Os,0),e.nodeChanged()}})},be=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},Ee=()=>{e.inline||u.bind(e.getDoc(),"mousedown mouseup",Tn=>{let So;if(Tn.target===e.getDoc().documentElement)if(So=f.getRng(),e.getBody().focus(),Tn.type==="mousedown"){if(Lu(So.startContainer))return;f.placeCaretAt(Tn.clientX,Tn.clientY)}else f.setRng(So)})},Ye=()=>{e.on("keydown",Tn=>{if(!fe(Tn)&&Tn.keyCode===s){if(!e.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&f.getRng().startOffset===0){const So=f.getNode(),ko=So.previousSibling;if(So.nodeName==="HR"){u.remove(So),Tn.preventDefault();return}ko&&ko.nodeName&&ko.nodeName.toLowerCase()==="hr"&&(u.remove(ko),Tn.preventDefault())}}})},qe=()=>{Range.prototype.getClientRects||e.on("mousedown",Tn=>{if(!fe(Tn)&&Tn.target.nodeName==="HTML"){const So=e.getBody();So.blur(),vd.setEditorTimeout(e,()=>{So.focus()})}})},tt=()=>{const Tn=my(e);e.on("click",So=>{const ko=So.target;/^(IMG|HR)$/.test(ko.nodeName)&&u.isEditable(ko)&&(So.preventDefault(),e.selection.select(ko),e.nodeChanged()),ko.nodeName==="A"&&u.hasClass(ko,Tn)&&ko.childNodes.length===0&&u.isEditable(ko.parentNode)&&(So.preventDefault(),f.select(ko))})},lt=()=>{const Tn=()=>{const ko=u.getAttribs(f.getStart().cloneNode(!1));return()=>{const yn=f.getStart();yn!==e.getBody()&&(u.setAttrib(yn,"style",null),n(ko,ks=>{yn.setAttributeNode(ks.cloneNode(!0))}))}},So=()=>!f.isCollapsed()&&u.getParent(f.getStart(),u.isBlock)!==u.getParent(f.getEnd(),u.isBlock);e.on("keypress",ko=>{let yn;return!fe(ko)&&(ko.keyCode===8||ko.keyCode===46)&&So()?(yn=Tn(),e.getDoc().execCommand("delete",!1),yn(),ko.preventDefault(),!1):!0}),u.bind(e.getDoc(),"cut",ko=>{if(!fe(ko)&&So()){const yn=Tn();vd.setEditorTimeout(e,()=>{yn()})}})},$t=()=>{e.on("keydown",Tn=>{if(!fe(Tn)&&Tn.keyCode===s&&f.isCollapsed()&&f.getRng().startOffset===0){const So=f.getNode().previousSibling;if(So&&So.nodeName&&So.nodeName.toLowerCase()==="table")return Tn.preventDefault(),!1}return!0})},nn=()=>{e.on("keydown",Tn=>{if(fe(Tn)||Tn.keyCode!==_n.BACKSPACE)return;let So=f.getRng();const ko=So.startContainer,yn=So.startOffset,ks=u.getRoot();let Os=ko;if(!(!So.collapsed||yn!==0)){for(;Os.parentNode&&Os.parentNode.firstChild===Os&&Os.parentNode!==ks;)Os=Os.parentNode;Os.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Os),So=u.createRng(),So.setStart(ko,0),So.setEnd(ko,0),f.setRng(So))}})},On=()=>{const Tn=()=>{ee("StyleWithCSS",!1),ee("enableInlineTableEditing",!1),pp(e)||ee("enableObjectResizing",!1)};I2(e)||e.on("BeforeExecCommand mousedown",Tn)},_t=()=>{const Tn=()=>{n(u.select("a:not([data-mce-block])"),So=>{var ko;let yn=So.parentNode;const ks=u.getRoot();if((yn==null?void 0:yn.lastChild)===So){for(;yn&&!u.isBlock(yn);){if(((ko=yn.parentNode)===null||ko===void 0?void 0:ko.lastChild)!==yn||yn===ks)return;yn=yn.parentNode}u.add(yn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",So=>{(So.type==="setcontent"||So.command==="mceInsertLink")&&Tn()})},vt=()=>{e.on("init",()=>{ee("DefaultParagraphSeparator",Fl(e))})},Ut=Tn=>{const So=Tn.getBody(),ko=Tn.selection.getRng();return ko.startContainer===ko.endContainer&&ko.startContainer===So&&ko.startOffset===0&&ko.endOffset===So.childNodes.length},Dn=()=>{e.on("keyup focusin mouseup",Tn=>{!_n.modifierPressed(Tn)&&!Ut(e)&&f.normalize()},!0)},ho=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Cs=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Ss=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Tn=>{let So;Tn.target.nodeName==="HTML"&&(So=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(So),e.selection.normalize(),e.nodeChanged())}))},xr=()=>{J&&e.on("keydown",Tn=>{_n.metaKeyPressed(Tn)&&!Tn.shiftKey&&(Tn.keyCode===37||Tn.keyCode===39)&&(Tn.preventDefault(),e.selection.getSel().modify("move",Tn.keyCode===37?"backward":"forward","lineboundary"))})},Pr=()=>{e.on("click",Tn=>{let So=Tn.target;do if(So.tagName==="A"){Tn.preventDefault();return}while(So=So.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},di=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Tn=>{Tn.preventDefault()})})},Kl=()=>{x.addNodeFilter("br",Tn=>{let So=Tn.length;for(;So--;)Tn[So].attr("class")==="Apple-interchange-newline"&&Tn[So].remove()})},xi=ot,fn=()=>{if(!D||e.removed)return!1;const Tn=e.selection.getSel();return!Tn||!Tn.rangeCount||Tn.rangeCount===0},io=()=>{F&&(Ee(),tt(),di(),be(),G&&(Cs(),Ss(),Pr())),D&&(qe(),On(),ho(),xr())},ir=()=>{nn(),ke(),In.windowsPhone||Dn(),F&&(Ee(),tt(),vt(),di(),$t(),Kl(),G?(Cs(),Ss(),Pr()):be()),D&&(Ye(),qe(),lt(),On(),_t(),ho(),xr(),$t())};return Cf(e)?io():ir(),{refreshContentEditable:xi,isHidden:fn}},$U=e=>e.toLowerCase()==="gpl",w5=e=>e.length>=64&&e.length<=255,EC=e=>$U(e)||w5(e)?"VALID":"INVALID",zU=e=>{const n=vp(e);!oe(K2(e))&&(Wn(n)||EC(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},pT=Jr.DOM,VU=(e,n)=>{const s=$e.fromDom(e.getBody()),i=od(Vl(s)),u=$e.fromTag("style");fa(u,"type","text/css"),M(u,$e.fromText(n)),M(i,u),e.on("remove",()=>{U(u)})},WU=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,ZM=e=>Is(e,n=>Wn(n)===!1),C5=e=>{const n=e.options.get,s=e.editorUpload.blobCache;return ZM({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:WU(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:wy(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:s,document:e.getDoc()})},GM=e=>{const n=e.options.get;return ZM({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},UU=e=>{const n=e.options.get;return{...C5(e),...GM(e),...ZM({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},S5=e=>{const n=Rv(C5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(s,i)=>{const u=e.dom,f="data-mce-"+i;let x=s.length;for(;x--;){const T=s[x];let D=T.attr(i);if(D&&!T.attr(f)){if(D.indexOf("data:")===0||D.indexOf("blob:")===0)continue;i==="style"?(D=u.serializeStyle(u.parseStyle(D),T.name),D.length||(D=null),T.attr(f,D),T.attr(i,D)):i==="tabindex"?(T.attr(f,D),T.attr(i,null)):T.attr(f,e.convertURL(D,i,T.name))}}}),n.addNodeFilter("script",s=>{let i=s.length;for(;i--;){const u=s[i],f=u.attr("type")||"no/type";f.indexOf("mce-")!==0&&u.attr("type","mce-"+f)}}),Y0(e)&&n.addNodeFilter("#cdata",s=>{var i;let u=s.length;for(;u--;){const f=s[u];f.type=8,f.name="#comment",f.value="[CDATA["+e.dom.encode((i=f.value)!==null&&i!==void 0?i:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",s=>{let i=s.length;const u=e.schema.getNonEmptyElements();for(;i--;){const f=s[i];f.isEmpty(u)&&f.getAll("br").length===0&&f.append(new Gc("br",1))}}),n},XU=e=>{const n=W0(e);n&&vd.setEditorTimeout(e,()=>{let s;n===!0?s=e:s=e.editorManager.get(n),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)},YU=e=>{const n=e.dom.getRoot();!e.inline&&(!i1(e)||e.selection.getStart(!0)===n)&&cc(n).each(s=>{const i=s.getNode(),u=Ou(i)?cc(i).getOr(s):s;e.selection.setRng(u.toRange())})},jU=e=>{e.bindPendingEventDelegates(),e.initialized=!0,p1(e),e.focus(!0),YU(e),e.nodeChanged({initial:!0});const n=CE(e);Be(n)&&n.call(e,e),XU(e)},qM=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,ZU=(e,n,s)=>{const{pass:i,fail:u}=Mo(n,T=>tinymce.Resource.has(vR(T))),x=[...i.map(T=>{const D=tinymce.Resource.get(vR(T));return oe(D)?Promise.resolve(qM(e).loadRawCss(T,D)):Promise.resolve()}),qM(e).loadAll(u)];return e.inline?x:x.concat([e.ui.styleSheetLoader.loadAll(s)])},k5=e=>{const n=qM(e),s=mE(e),i=e.contentCSS,u=()=>{n.unloadAll(i),e.inline||e.ui.styleSheetLoader.unloadAll(s)},f=()=>{e.removed?u():e.on("remove",u)};if(e.contentStyles.length>0){let D="";zt.each(e.contentStyles,F=>{D+=F+`\r
`}),e.dom.addStyle(D)}const x=Promise.all(ZU(e,i,s)).then(f).catch(f),T=Uc(e);return T&&VU(e,T),x},GU=e=>{const n=e.getDoc(),s=e.getBody();DS(e),$2(e)||(n.body.spellcheck=!1,pT.setAttrib(s,"spellcheck","false")),e.quirks=HU(e),Gy(e);const i=pE(e);i!==void 0&&(s.dir=i);const u=py(e);u&&e.on("BeforeSetContent",f=>{zt.each(u,x=>{f.content=f.content.replace(x,T=>"<!--mce:protected "+escape(T)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",f=>{e.composing=f.type==="compositionstart"})},qU=e=>{Cf(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},KM=e=>{e.removed!==!0&&(qU(e),jU(e))},A5=e=>{let n=!1;const s=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(s),n=!0,e.setProgressState(!1)}},bT=e=>{const n=e.getElement();let s=e.getDoc();e.inline&&(pT.addClass(n,"mce-content-body"),e.contentDocument=s=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const i=e.getBody();i.disabled=!0,e.readonly=I2(e),e._editableRoot=yE(e),e.hasEditableRoot()&&(e.inline&&pT.getStyle(i,"position",!0)==="static"&&(i.style.position="relative"),i.contentEditable="true"),i.disabled=!1,e.editorUpload=u7(e),e.schema=Er(GM(e)),e.dom=Jr(s,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:R2(e),referrerPolicy:Bb(e),onSetAttrib:x=>{e.dispatch("SetAttrib",x)}}),e.parser=S5(e),e.serializer=dR(UU(e),e),e.selection=oN(e.dom,e.getWin(),e.serializer,e),e.annotator=Gd(e),e.formatter=SN(e),e.undoManager=kR(e),e._nodeChangeDispatcher=new GV(e),e._selectionOverrides=uT(e),_z(e),zW(e),Pz(e),Cf(e)||(MM(e),y5(e));const u=ZV(e);Tz(e,u),Oz(e),b7(e),IB(e);const f=UL(e);GU(e),zU(e),f.fold(()=>{const x=A5(e);k5(e).then(()=>{KM(e),x()})},x=>{e.setProgressState(!0),k5(e).then(()=>{x().then(T=>{e.setProgressState(!1),KM(e),eN(e)},T=>{e.notificationManager.open({type:"error",text:String(T)}),KM(e),eN(e)})})})},T5=wt,E5=(e,n,s)=>P(e,n,T5,s),JM=Jr.DOM,KU=(e,n,s,i)=>{const u=$e.fromTag("iframe");return i.each(f=>fa(u,"tabindex",f)),Mr(u,s),Mr(u,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),oc(u,"tox-edit-area__iframe"),u},JU=e=>{let n=Il(e)+"<html><head>";T2(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const s=nf(e),i=E2(e),u=e.translate(Ub(e));return ay(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+ay(e)+'" />'),n+=`</head><body id="${s}" class="mce-content-body ${i}" data-id="${e.id}" aria-label="${u}"><br></body></html>`,n},_5=(e,n)=>{const s=In.browser.isFirefox()?Ub(e):"Rich Text Area",i=e.translate(s),u=Fr($e.fromDom(e.getElement()),"tabindex").bind(_a),f=KU(e.id,i,gE(e),u).dom;f.onload=()=>{f.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=f,e.iframeHTML=JU(e),JM.add(n.iframeContainer,f)},O5=e=>{const n=e.iframeElement,s=()=>{e.contentDocument=n.contentDocument,bT(e)};if(_i(e)||In.browser.isFirefox()){const i=e.getDoc();i.open(),i.write(e.iframeHTML),i.close(),s()}else{const i=E5($e.fromDom(n),"load",()=>{i.unbind(),s()});n.srcdoc=e.iframeHTML}},QU=(e,n)=>{_5(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=JM.isHidden(n.editorContainer)),e.getElement().style.display="none",JM.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,O5(e)},R5=Jr.DOM,QM=(e,n,s)=>{const i=Y1.get(s),u=Y1.urls[s]||e.documentBaseUrl.replace(/\/$/,"");if(s=zt.trim(s),i&&zt.inArray(n,s)===-1){if(e.plugins[s])return;try{const f=i(e,u)||{};e.plugins[s]=f,Be(f.init)&&(f.init(e,u),n.push(s))}catch(f){bR(e,s,f)}}},vT=e=>e.replace(/^\-/,""),xT=e=>{const n=[];De(Wb(e),s=>{QM(e,n,vT(s))})},Im=e=>{const n=zt.trim(Ei(e)),s=e.ui.registry.getAll().icons,i={...U1.get("default").icons,...U1.get(n).icons};Yt(i,(u,f)=>{Qn(s,f)||e.ui.registry.addIcon(f,u)})},yT=e=>{const n=sf(e);if(oe(n)){const s=Ag.get(n);e.theme=s(e,Ag.urls[n])||{},Be(e.theme.init)&&e.theme.init(e,Ag.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},vx=e=>{const n=$0(e),s=X1.get(n);e.model=s(e,X1.urls[n])},D5=e=>{const n=e.theme.renderUI;return n?n():L5(e)},eX=e=>{const n=e.getElement(),i=sf(e)(e,n);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||e.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||e.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:n.offsetHeight,i},M5=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),P5=e=>{const n=R5.create("div");return R5.insertAfter(n,e),M5(n,n)},L5=e=>{const n=e.getElement();return e.inline?M5(null):P5(n)},e4=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,oe(sf(e))?D5(e):Be(sf(e))?eX(e):L5(e)},wT=(e,n)=>{const s={show:te.from(n.show).getOr(ot),hide:te.from(n.hide).getOr(ot),isEnabled:te.from(n.isEnabled).getOr(wt),setEnabled:i=>{i&&e.mode.get()==="readonly"||te.from(n.setEnabled).each(f=>f(i))}};e.ui={...e.ui,...s}},lb=async e=>{e.dispatch("ScriptsLoaded"),Im(e),yT(e),vx(e),xT(e);const n=await e4(e);wT(e,te.from(n.api).getOr({})),e.editorContainer=n.editorContainer,i7(e),e.inline?bT(e):QU(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},uh=Jr.DOM,t4=e=>e.charAt(0)==="-",tX=(e,n)=>{const s=H0(n),i=Hb(n);if(!Ud.hasCode(s)&&s!=="en"){const u=so(i)?i:`${n.editorManager.baseURL}/langs/${s}.js`;e.add(u).catch(()=>{o7(n,u,s)})}},nX=(e,n)=>{const s=sf(e);if(oe(s)&&!t4(s)&&!Qn(Ag.urls,s)){const i=M2(e),u=i?e.documentBaseURI.toAbsolute(i):`themes/${s}/theme${n}.js`;Ag.load(s,u).catch(()=>{KY(e,u,s)})}},oX=(e,n)=>{const s=$0(e);if(s!=="plugin"&&!Qn(X1.urls,s)){const i=hy(e),u=oe(i)?e.documentBaseURI.toAbsolute(i):`models/${s}/model${n}.js`;X1.load(s,u).catch(()=>{Tg(e,u,s)})}},sX=e=>te.from(B0(e)).filter(so).map(n=>({url:n,name:te.none()})),N5=(e,n,s)=>te.from(n).filter(i=>so(i)&&!U1.has(i)).map(i=>({url:`${e.editorManager.baseURL}/icons/${i}/icons${s}.js`,name:te.some(i)})),rX=(e,n,s)=>{const i=N5(n,"default",s),u=sX(n).orThunk(()=>N5(n,Ei(n),""));De(Rl([i,u]),f=>{e.add(f.url).catch(()=>{n7(n,f.url,f.name.getOrUndefined())})})},I5=(e,n)=>{const s=(i,u)=>{Y1.load(i,u).catch(()=>{t7(e,u,i)})};Yt(B2(e),(i,u)=>{s(u,i),e.options.set("plugins",Wb(e).concat(u))}),De(Wb(e),i=>{i=zt.trim(i),i&&!Y1.urls[i]&&!t4(i)&&s(i,`plugins/${i}/plugin${n}.js`)})},aX=e=>{const n=sf(e);return!oe(n)||ut(Ag.get(n))},iX=e=>{const n=$0(e);return ut(X1.get(n))},lX=(e,n)=>{const s=Ah.ScriptLoader,i=()=>{!e.removed&&aX(e)&&iX(e)&&lb(e)};nX(e,n),oX(e,n),tX(s,e),rX(s,e,n),I5(e,n),s.loadQueue().then(i,i)},kj=(e,n)=>wa.forElement(e,{contentCssCors:F2(n),referrerPolicy:Bb(n)}),cX=e=>{const n=e.id;Ud.setCode(H0(e));const s=()=>{uh.unbind(window,"ready",s),e.render()};if(!Uf.Event.domLoaded){uh.bind(window,"ready",s);return}if(!e.getElement())return;const i=$e.fromDom(e.getElement()),u=Lc(i);e.on("remove",()=>{Xn(i.dom.attributes,x=>er(i,x.name)),Mr(i,u)}),e.ui.styleSheetLoader=kj(i,e),im(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const f=e.getElement().form||uh.getParent(n,"form");f&&(e.formElement=f,Vb(e)&&!ka(e.getElement())&&(uh.insertAfter(uh.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=x=>{e.dispatch(x.type,x)},uh.bind(f,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),bE(e)&&!f.submit.nodeType&&!f.submit.length&&!f._mceOldSubmit&&(f._mceOldSubmit=f.submit,f.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),f._mceOldSubmit(f)))),e.windowManager=pR(e),e.notificationManager=fN(e),j0(e)&&e.on("GetContent",x=>{x.save&&(x.content=uh.encode(x.content))}),gy(e)&&e.on("submit",()=>{e.initialized&&e.save()}),vE(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),lX(e,e.suffix)},n4=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged(),Ur(e,n))},uX=e=>e._editableRoot,dX=(e,n)=>({sections:Dt(e),options:Dt(n)}),o4=he().deviceType,F5=o4.isPhone(),B5=o4.isTablet(),_C=e=>{if(no(e))return[];{const n=jt(e)?e:e.split(/[ ,]/),s=Ze(n,Ys);return Cn(s,so)}},s4=(e,n)=>{const s=Xa(n,(i,u)=>We(e,u));return dX(s.t,s.f)},hX=(e,n,s={})=>{const i=e.sections(),u=Ts(i,n).getOr({});return zt.extend({},s,u)},r4=(e,n)=>Qn(e.sections(),n),gX=(e,n)=>r4(e,n)?e.sections()[n]:{},fX=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ts(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),H5=(e,n)=>{var s;const i=(s=n.external_plugins)!==null&&s!==void 0?s:{};return e&&e.external_plugins?zt.extend({},e.external_plugins,i):i},a4=(e,n)=>[..._C(e),..._C(n)],$5=(e,n,s,i)=>e&&r4(n,"mobile")?i:s,i4=(e,n,s,i)=>{const u=_C(s.forced_plugins),f=_C(i.plugins),x=gX(n,"mobile"),T=x.plugins?_C(x.plugins):f,D=$5(e,n,f,T),F=a4(u,D);return zt.extend(i,{forced_plugins:u,plugins:F})},mX=(e,n)=>e&&r4(n,"mobile"),Aj=(e,n,s,i,u)=>{var f;const x=e?{mobile:fX((f=u.mobile)!==null&&f!==void 0?f:{},n)}:{},T=s4(["mobile"],sb(x,u)),D=zt.extend(s,i,T.options(),mX(e,T)?hX(T,"mobile"):{},{external_plugins:H5(i,T.options())});return i4(e,T,i,D)},Tj=(e,n)=>{const s=ID(n);return Aj(F5||B5,F5,s,e,s)},pX=(e,n)=>v8(e,n),z5=e=>{const n=(i,u)=>{e.formatter.toggle(i,u),e.nodeChanged()},s=i=>()=>{De("left,center,right,justify".split(","),u=>{i!==u&&e.formatter.remove("align"+u)}),i!=="none"&&n("align"+i)};e.editorCommands.addCommands({JustifyLeft:s("left"),JustifyCenter:s("center"),JustifyRight:s("right"),JustifyFull:s("justify"),JustifyNone:s("none")})},bX=e=>{const n=s=>()=>{const i=e.selection,u=i.isCollapsed()?[e.dom.getParent(i.getNode(),e.dom.isBlock)]:i.getSelectedBlocks();return Ie(u,f=>ut(e.formatter.matchNode(f,s)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},vX=e=>{z5(e),bX(e)},xX=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const s=e.getDoc();let i;try{s.execCommand(n)}catch{i=!0}if(n==="paste"&&!s.queryCommandEnabled(n)&&(i=!0),i||!s.queryCommandSupported(n)){let u=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(In.os.isMacOS()||In.os.isiOS())&&(u=u.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:u,type:"error"})}}})},Ej=(e,n,s,i)=>{const u=$e.fromDom(e.getRoot());return iw(u,At.fromRangeStart(n),i)?s=s.replace(/^ /,"&nbsp;"):s=s.replace(/^&nbsp;/," "),lw(u,At.fromRangeEnd(n),i)?s=s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s=s.replace(/&nbsp;(<br( \/)?>)?$/," "),s},_j=e=>{if(typeof e!="string"){const n=zt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},V5=(e,n)=>{const s=e.selection,i=e.dom;return/^ | $/.test(n)?Ej(i,s.getRng(),n,e.schema):n},OC=(e,n)=>{if(e.selection.isEditable()){const{content:s,details:i}=_j(n);$k(e,{...i,content:V5(e,s),format:"html",set:!1,selection:!0}).each(u=>{const f=QL(e,u.content,i);zk(e,f,u),e.addVisual()})}},yX=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,s,i)=>{OC(e,e.dom.createHTML("img",{src:i}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,s,i)=>{OC(e,e.dom.encode(i))},insertHTML:(n,s,i)=>{OC(e,i)},mceInsertContent:(n,s,i)=>{OC(e,i)},mceSetContent:(n,s,i)=>{e.setContent(i)},mceReplaceContent:(n,s,i)=>{e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(V2(e))}})},wX={"font-size":"size","font-family":"face"},CX=$a("font"),Oj=(e,n,s)=>{const i=f=>c(f,e).orThunk(()=>CX(f)?Ts(wX,e).bind(x=>Fr(f,x)):te.none()),u=f=>rs($e.fromDom(n),f);return yw($e.fromDom(s),f=>i(f),u)},Rj=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Dj=(e,n)=>te.from(Jr.DOM.getStyle(n,e,!0)),W5=e=>(n,s)=>te.from(s).map($e.fromDom).filter(Jo).bind(i=>Oj(e,n,i.dom).or(Dj(e,i.dom))).getOr(""),Mj=W5("font-size"),SX=V(Rj,W5("font-family")),Kv=e=>cc(e.getBody()).bind(n=>{const s=n.container();return te.from(qt(s)?s.parentNode:s)}),l4=e=>te.from(e.selection.getRng()).bind(n=>{const s=e.getBody();return n.startContainer===s&&n.startOffset===0?te.none():te.from(e.selection.getStart(!0))}),CT=(e,n)=>l4(e).orThunk(it(Kv,e)).map($e.fromDom).filter(Jo).bind(n),ST=(e,n)=>CT(e,Zn(te.some,n)),c4=(e,n)=>{if(/^[0-9.]+$/.test(n)){const s=parseInt(n,10);if(s>=1&&s<=7){const i=bp(e),u=af(e);return u.length>0?u[s-1]||n:i[s-1]||n}else return n}else return n},U5=e=>{const n=e.split(/\s*,\s*/);return Ze(n,s=>s.indexOf(" ")!==-1&&!(co(s,'"')||co(s,"'"))?`'${s}'`:s).join(",")},kX=(e,n)=>{const s=c4(e,n);e.formatter.toggle("fontname",{value:U5(s)}),e.nodeChanged()},AX=e=>ST(e,n=>SX(e.getBody(),n.dom)).getOr(""),TX=(e,n)=>{e.formatter.toggle("fontsize",{value:c4(e,n)}),e.nodeChanged()},EX=e=>ST(e,n=>Mj(e.getBody(),n.dom)).getOr(""),_X=e=>ST(e,n=>{const s=$e.fromDom(e.getBody()),i=yw(n,f=>c(f,"line-height"),it(rs,s)),u=()=>{const f=parseFloat(o(n,"line-height")),x=parseFloat(o(n,"font-size"));return String(f/x)};return i.getOrThunk(u)}).getOr(""),OX=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},cb=e=>{const n=(s,i)=>{e.formatter.toggle(s,i),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":s=>{n(s)},"ForeColor,HiliteColor":(s,i,u)=>{n(s,{value:u})},BackColor:(s,i,u)=>{n("hilitecolor",{value:u})},FontName:(s,i,u)=>{kX(e,u)},FontSize:(s,i,u)=>{TX(e,u)},LineHeight:(s,i,u)=>{OX(e,u)},Lang:(s,i,u)=>{var f;n(s,{value:u.code,customValue:(f=u.customCode)!==null&&f!==void 0?f:null})},RemoveFormat:s=>{e.formatter.remove(s)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(s,i,u)=>{n(oe(u)?u:"p")},mceToggleFormat:(s,i,u)=>{n(u)}})},RX=e=>{const n=s=>e.formatter.match(s);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":s=>n(s),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>AX(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>EX(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>_X(e))},X5=e=>{cb(e),RX(e)},DX=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},kT=e=>{e.editorCommands.addCommands({Indent:()=>{ah(e)},Outdent:()=>{ob(e)}}),e.editorCommands.addCommands({Outdent:()=>CA(e)},"state")},MX=e=>{const n=(s,i,u)=>{if(e.mode.isReadOnly())return;const f=oe(u)?{href:u}:u,x=e.dom.getParent(e.selection.getNode(),"a");Wt(f)&&oe(f.href)&&(f.href=f.href.replace(/ /g,"%20"),(!x||!f.href)&&e.formatter.remove("link"),f.href&&e.formatter.apply("link",f,x))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const s=e.dom.getParent(e.selection.getStart(),"a");s&&e.dom.remove(s,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},PX=(e,n,s,i)=>{const u=e.dom,f=T=>u.isBlock(T)&&T.parentElement===s,x=f(n)?n:u.getParent(i,f,s);return te.from(x).map($e.fromDom)},Y5=(e,n)=>{if(e.mode.isReadOnly())return;const s=e.dom,i=e.selection.getRng(),u=n?e.selection.getStart():e.selection.getEnd(),f=n?i.startContainer:i.endContainer,x=bC(s,f);if(!x||!x.isContentEditable)return;const T=n?w:A,D=Fl(e);PX(e,u,x,f).each(F=>{const G=qD(e,f,F.dom,x,!1,D);T(F,$e.fromDom(G)),e.selection.setCursorLocation(G,0),e.dispatch("NewBlock",{newBlock:G}),Td(e,"insertParagraph")})},j5=e=>Y5(e,!0),LX=e=>Y5(e,!1),NX=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{j5(e)},InsertNewBlockAfter:()=>{LX(e)}})},IX=e=>{e.editorCommands.addCommands({insertParagraph:()=>{qA(_V,e)},mceInsertNewLine:(n,s,i)=>{CC(e,i)},InsertLineBreak:(n,s,i)=>{qA(VF,e)}})},FX=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,s,i)=>{let u=0;e.dom.getParent(e.selection.getNode(),f=>An(f)&&u++===i?(e.selection.select(f),!1):!0,e.getBody())},mceSelectNode:(n,s,i)=>{e.selection.select(i)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Lt);if(n){const s=e.dom.createRng();s.selectNodeContents(n),e.selection.setRng(s)}}})},u4=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,s,i)=>{const u=i??e.selection.getNode();if(u!==e.getBody()){const f=e.selection.getBookmark();e.dom.remove(u,!0),e.selection.moveToBookmark(f)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,s,i)=>{r3(e,i===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},BX=e=>{vX(e),xX(e),DX(e),FX(e),yX(e),MX(e),kT(e),NX(e),IX(e),X5(e),u4(e)},HX=["toggleview"],ol=e=>We(HX,e.toLowerCase());class Z5{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,s=!1,i,u){const f=this.editor,x=n.toLowerCase(),T=u==null?void 0:u.skip_focus;if(f.removed||(x!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(x)&&!T?f.focus():zS(f)),f.dispatch("BeforeExecCommand",{command:n,ui:s,value:i}).isDefaultPrevented()))return!1;const F=this.commands.exec[x];return Be(F)?(F(x,s,i),f.dispatch("ExecCommand",{command:n,ui:s,value:i}),!0):!1}queryCommandState(n){if(!ol(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const s=n.toLowerCase(),i=this.commands.state[s];return Be(i)?i(s):!1}queryCommandValue(n){if(!ol(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const s=n.toLowerCase(),i=this.commands.value[s];return Be(i)?i(s):""}addCommands(n,s="exec"){const i=this.commands;Yt(n,(u,f)=>{De(f.toLowerCase().split(","),x=>{i[s][x]=u})})}addCommand(n,s,i){const u=n.toLowerCase();this.commands.exec[u]=(f,x,T)=>s.call(i??this.editor,x,T)}queryCommandSupported(n){const s=n.toLowerCase();return!!this.commands.exec[s]}addQueryStateHandler(n,s,i){this.commands.state[n.toLowerCase()]=()=>s.call(i??this.editor)}addQueryValueHandler(n,s,i){this.commands.value[n.toLowerCase()]=()=>s.call(i??this.editor)}}const $X=(e,n,s)=>{Md(e,n)&&!s?Tu(e,n):s&&oc(e,n)},RC=(e,n,s)=>{try{e.getDoc().execCommand(n,!1,String(s))}catch{}},d4=(e,n)=>{e.dom.contentEditable="true"},h4=e=>{te.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},zX=e=>{e.selection.setRng(e.selection.getRng())},VX=(e,n)=>{RC(e,"StyleWithCSS",n),RC(e,"enableInlineTableEditing",n),RC(e,"enableObjectResizing",n)},WX=e=>{e.readonly=!0,e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),h4(e)},UX=(e,n)=>{e.readonly=!1,e.hasEditableRoot()&&d4(n),VX(e,!1),s3(e)&&e.focus(),zX(e),e.nodeChanged()},XX=(e,n)=>{const s=$e.fromDom(e.getBody());$X(s,"mce-content-readonly",n),n?(WX(e),e.hasEditableRoot()&&d4(s)):UX(e,s)},xx=e=>e.readonly,YX=e=>e.type==="click",jX=["copy"],yx=e=>We(jX,e.type),Dg=(e,n)=>Oc(n,"a",i=>rs(i,$e.fromDom(e.getBody()))).bind(i=>Fr(i,"href")),ZX=(e,n)=>{if(YX(n)&&!_n.metaKeyPressed(n)){const s=$e.fromDom(n.target);Dg(e,s).each(i=>{if(n.preventDefault(),/^#/.test(i)){const u=e.dom.select(`${i},[name="${Mn(i,"#")}"]`);u.length&&e.selection.scrollIntoView(u[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else yx(n)&&e.dispatch(n.type,n)},GX=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{xx(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&xx(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&xx(e)){const s=e.undoManager.add();ut(s)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(xx(e)){const n=e.undoManager.add();ut(n)&&e.undoManager.undo()}})},qX=zt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class g4{static isNative(n){return!!qX[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||dt}fire(n,s){return this.dispatch(n,s)}dispatch(n,s){const i=n.toLowerCase(),u=Wf(i,s??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(u);const f=this.bindings[i];if(f)for(let x=0,T=f.length;x<T;x++){const D=f[x];if(!D.removed){if(D.once&&this.off(i,D.func),u.isImmediatePropagationStopped())return u;if(D.func.call(this.scope,u)===!1)return u.preventDefault(),u}}return u}on(n,s,i,u){if(s===!1&&(s=dt),s){const f={func:s,removed:!1};u&&zt.extend(f,u);const x=n.toLowerCase().split(" ");let T=x.length;for(;T--;){const D=x[T];let F=this.bindings[D];F||(F=[],this.toggleEvent(D,!0)),i?F=[f,...F]:F=[...F,f],this.bindings[D]=F}}return this}off(n,s){if(n){const i=n.toLowerCase().split(" ");let u=i.length;for(;u--;){const f=i[u];let x=this.bindings[f];if(!f)return Yt(this.bindings,(T,D)=>{this.toggleEvent(D,!1),delete this.bindings[D]}),this;if(x){if(!s)x.length=0;else{const T=Mo(x,D=>D.func===s);x=T.fail,this.bindings[f]=x,De(T.pass,D=>{D.removed=!0})}x.length||(this.toggleEvent(n,!1),delete this.bindings[f])}}}else Yt(this.bindings,(i,u)=>{this.toggleEvent(u,!1)}),this.bindings={};return this}once(n,s,i){return this.on(n,s,i,{once:!0})}has(n){n=n.toLowerCase();const s=this.bindings[n];return!(!s||s.length===0)}}const DC=e=>(e._eventDispatcher||(e._eventDispatcher=new g4({scope:e,toggleEvent:(n,s)=>{g4.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,s)}})),e._eventDispatcher),f4={fire(e,n,s){return this.dispatch(e,n,s)},dispatch(e,n,s){const i=this;if(i.removed&&e!=="remove"&&e!=="detach")return Wf(e.toLowerCase(),n??{},i);const u=DC(i).dispatch(e,n);if(s!==!1&&i.parent){let f=i.parent();for(;f&&!u.isPropagationStopped();)f.dispatch(e,u,!1),f=f.parent?f.parent():void 0}return u},on(e,n,s){return DC(this).on(e,n,s)},off(e,n){return DC(this).off(e,n)},once(e,n){return DC(this).once(e,n)},hasEventListeners(e){return DC(this).has(e)}},AT=Jr.DOM;let Jv;const TT=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const s=ic(e);return s?(e.eventRoot||(e.eventRoot=AT.select(s)[0]),e.eventRoot):e.getBody()},Pj=e=>!e.hidden,G5=(e,n,s)=>{Pj(e)?e.dispatch(n,s):xx(e)&&ZX(e,s)},q5=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const s=TT(e,n);if(ic(e)){if(Jv||(Jv={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Jv&&(Yt(Jv,(u,f)=>{e.dom.unbind(TT(e,f))}),Jv=null)})),Jv[n])return;const i=u=>{const f=u.target,x=e.editorManager.get();let T=x.length;for(;T--;){const D=x[T].getBody();(D===f||AT.isChildOf(f,D))&&G5(x[T],n,u)}};Jv[n]=i,AT.bind(s,n,i)}else{const i=u=>{G5(e,n,u)};AT.bind(s,n,i),e.delegates[n]=i}},K5={...f4,bindPendingEventDelegates(){const e=this;zt.each(e._pendingNativeEvents,n=>{q5(e,n)})},toggleNativeEvent(e,n){const s=this;e==="focus"||e==="blur"||s.removed||(n?s.initialized?q5(s,e):s._pendingNativeEvents?s._pendingNativeEvents.push(e):s._pendingNativeEvents=[e]:s.initialized&&s.delegates&&(s.dom.unbind(TT(s,e),e,s.delegates[e]),delete s.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),s=e.dom;e.delegates&&(Yt(e.delegates,(i,u)=>{e.dom.unbind(TT(e,u),u,i)}),delete e.delegates),!e.inline&&n&&s&&(n.onload=null,s.unbind(e.getWin()),s.unbind(e.getDoc())),s&&(s.unbind(n),s.unbind(e.getContainer()))}},KX=e=>oe(e)?{value:e.split(/[ ,]/),valid:!0}:Je(e,oe)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},JX=e=>{const n=(()=>{switch(e){case"array":return jt;case"boolean":return Gt;case"function":return Be;case"number":return Qo;case"object":return Wt;case"string":return oe;case"string[]":return KX;case"object[]":return s=>Je(s,Wt);case"regexp":return s=>xn(s,RegExp);default:return wt}})();return s=>m4(s,n,`The value must be a ${e}.`)},QX=e=>oe(e.processor),J5=(e,n)=>{const s=ls(n.message)?"":`. ${n.message}`;return e+s},Q5=e=>e.valid,m4=(e,n,s="")=>{const i=n(e);return Gt(i)?i?{value:e,valid:!0}:{valid:!1,message:s}:i},eY=(e,n,s)=>{if(!Wn(n)){const i=m4(n,s);if(Q5(i))return i.value;console.error(J5(`Invalid default value passed for the "${e}" option`,i))}},tY=(e,n,s=n)=>{const i={},u={},f=(fe,ke,be)=>{const Ee=m4(ke,be);return Q5(Ee)?(u[fe]=Ee.value,!0):(console.warn(J5(`Invalid value passed for the ${fe} option`,Ee)),!1)},x=(fe,ke)=>{const be=QX(ke)?JX(ke.processor):ke.processor,Ee=eY(fe,ke.default,be);i[fe]={...ke,default:Ee,processor:be},Ts(u,fe).orThunk(()=>Ts(n,fe)).each(qe=>f(fe,qe,be))},T=fe=>Qn(i,fe);return{register:x,isRegistered:T,get:fe=>Ts(u,fe).orThunk(()=>Ts(i,fe).map(ke=>ke.default)).getOrUndefined(),set:(fe,ke)=>{if(T(fe)){const be=i[fe];return be.immutable?(console.error(`"${fe}" is an immutable option and cannot be updated`),!1):f(fe,ke,be.processor)}else return console.warn(`"${fe}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:fe=>{const ke=T(fe);return ke&&delete u[fe],ke},isSet:fe=>Qn(u,fe),debug:()=>{try{console.log(JSON.parse(JSON.stringify(s,(fe,ke)=>Gt(ke)||Qo(ke)||oe(ke)||ce(ke)||jt(ke)||Yo(ke)?ke:Object.prototype.toString.call(ke))))}catch(fe){console.error(fe)}}}},nY=["design","readonly"],eH=(e,n,s,i)=>{const u=s[n.get()],f=s[i];try{f.activate()}catch(x){console.error(`problem while activating editor mode ${i}:`,x);return}u.deactivate(),u.editorReadOnly!==f.editorReadOnly&&XX(e,f.editorReadOnly),n.set(i),KE(e,i)},oY=(e,n,s,i)=>{if(i!==s.get()){if(!Qn(n,i))throw new Error(`Editor mode '${i}' is invalid`);e.initialized?eH(e,s,n,i):e.on("init",()=>eH(e,s,n,i))}},sY=(e,n,s)=>{if(We(nY,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...s,deactivate:()=>{try{s.deactivate()}catch(i){console.error(`problem while deactivating editor mode ${n}:`,i)}}}}},rY=e=>{const n=Ir("design"),s=Ir({design:{activate:ot,deactivate:ot,editorReadOnly:!1},readonly:{activate:ot,deactivate:ot,editorReadOnly:!0}});return GX(e),{isReadOnly:()=>xx(e),set:i=>oY(e,s.get(),n,i),get:()=>n.get(),register:(i,u)=>{s.set(sY(s.get(),i,u))}}},p4=zt.each,b4=zt.explode,aY={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},tH=zt.makeMap("alt,ctrl,shift,meta,access"),iY=e=>e in tH,lY=e=>{const n={},s=In.os.isMacOS()||In.os.isiOS();p4(b4(e.toLowerCase(),"+"),f=>{iY(f)?n[f]=!0:/^[0-9]{2,}$/.test(f)?n.keyCode=parseInt(f,10):(n.charCode=f.charCodeAt(0),n.keyCode=aY[f]||f.toUpperCase().charCodeAt(0))});const i=[n.keyCode];let u;for(u in tH)n[u]?i.push(u):n[u]=!1;return n.id=i.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class nH{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const s=this;n.on("keyup keypress keydown",i=>{(s.hasModifier(i)||s.isFunctionKey(i))&&!i.isDefaultPrevented()&&(p4(s.shortcuts,u=>{s.matchShortcut(i,u)&&(s.pendingPatterns=u.subpatterns.slice(0),i.type==="keydown"&&s.executeShortcutAction(u))}),s.matchShortcut(i,s.pendingPatterns[0])&&(s.pendingPatterns.length===1&&i.type==="keydown"&&s.executeShortcutAction(s.pendingPatterns[0]),s.pendingPatterns.shift()))})}add(n,s,i,u){const f=this,x=f.normalizeCommandFunc(i);return p4(b4(zt.trim(n)),T=>{const D=f.createShortcut(T,s,x,u);f.shortcuts[D.id]=D}),!0}remove(n){const s=this.createShortcut(n);return this.shortcuts[s.id]?(delete this.shortcuts[s.id],!0):!1}normalizeCommandFunc(n){const s=this,i=n;return typeof i=="string"?()=>{s.editor.execCommand(i,!1,null)}:zt.isArray(i)?()=>{s.editor.execCommand(i[0],i[1],i[2])}:i}createShortcut(n,s,i,u){const f=zt.map(b4(n,">"),lY);return f[f.length-1]=zt.extend(f[f.length-1],{func:i,scope:u||this.editor}),zt.extend(f[0],{desc:this.editor.translate(s),subpatterns:f.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,s){return!s||s.ctrl!==n.ctrlKey||s.meta!==n.metaKey||s.alt!==n.altKey||s.shift!==n.shiftKey?!1:n.keyCode===s.keyCode||n.charCode&&n.charCode===s.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const oH=()=>{const e={},n={},s={},i={},u={},f={},x={},T={},D={},F=(ee,fe)=>(ke,be)=>{ee[ke.toLowerCase()]={...be,type:fe}},G=(ee,fe)=>i[ee.toLowerCase()]=fe,J=(ee,fe)=>x[ee.toLowerCase()]=fe;return{addButton:F(e,"button"),addGroupToolbarButton:F(e,"grouptoolbarbutton"),addToggleButton:F(e,"togglebutton"),addMenuButton:F(e,"menubutton"),addSplitButton:F(e,"splitbutton"),addMenuItem:F(n,"menuitem"),addNestedMenuItem:F(n,"nestedmenuitem"),addToggleMenuItem:F(n,"togglemenuitem"),addAutocompleter:F(s,"autocompleter"),addContextMenu:F(u,"contextmenu"),addContextToolbar:F(f,"contexttoolbar"),addContextForm:F(f,"contextform"),addSidebar:F(T,"sidebar"),addView:F(D,"views"),addIcon:G,addContext:J,getAll:()=>({buttons:e,menuItems:n,icons:i,popups:s,contextMenus:u,contextToolbars:f,sidebars:T,views:D,contexts:x})}},cY=()=>{const e=oH();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Qv=Jr.DOM,sH=zt.extend,uY=zt.each;class ET{constructor(n,s,i){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=i,this.documentBaseUrl=i.documentBaseURL,sH(this,K5);const u=this;this.id=n,this.hidden=!1;const f=Tj(i.defaultOptions,s);this.options=tY(u,f,s),A2(u);const x=this.options.get;x("deprecation_warnings")&&z8(s,f);const T=x("suffix");T&&(i.suffix=T),this.suffix=i.suffix;const D=x("base_url");D&&i._setBaseUrl(D),this.baseUri=i.baseURI;const F=Bb(u);F&&(Ah.ScriptLoader._setReferrerPolicy(F),Jr.DOM.styleSheetLoader._setReferrerPolicy(F));const G=F2(u);ut(G)&&Jr.DOM.styleSheetLoader._setContentCssCors(G),ac.languageLoad=x("language_load"),ac.baseURL=i.baseURL,this.setDirty(!1),this.documentBaseURI=new $h(T2(u),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=im(u),this.hasVisual=fy(u),this.shortcuts=new nH(this),this.editorCommands=new Z5(this),BX(this);const J=x("cache_suffix");J&&(In.cacheSuffix=J.replace(/^[\?\&]+/,"")),this.ui={registry:cY(),styleSheetLoader:void 0,show:ot,hide:ot,setEnabled:ot,isEnabled:wt},this.mode=rY(u),i.dispatch("SetupEditor",{editor:this});const ee=wE(u);Be(ee)&&ee.call(u,u)}render(){cX(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return D1(this)}translate(n){return Ud.translate(n)}getParam(n,s,i){const u=this.options;return u.isRegistered(n)||(ut(i)?u.register(n,{processor:i,default:s}):u.register(n,{processor:wt,default:s})),!u.isSet(n)&&!Wn(s)?s:u.get(n)}hasPlugin(n,s){return We(Wb(this),n)?s?Y1.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,s,i){this.editorCommands.addCommand(n,s,i)}addQueryStateHandler(n,s,i){this.editorCommands.addQueryStateHandler(n,s,i)}addQueryValueHandler(n,s,i){this.editorCommands.addQueryValueHandler(n,s,i)}addShortcut(n,s,i,u){this.shortcuts.add(n,s,i,u)}execCommand(n,s,i,u){return this.editorCommands.execCommand(n,s,i,u)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Qv.show(n.getContainer()),Qv.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Qv.hide(n.getContainer()),Qv.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,s){this.dispatch("ProgressState",{state:n,time:s})}load(n={}){const s=this,i=s.getElement();if(s.removed)return"";if(i){const u={...n,load:!0},f=ka(i)?i.value:i.innerHTML,x=s.setContent(f,u);return u.no_events||s.dispatch("LoadContent",{...u,element:i}),x}else return""}save(n={}){const s=this;let i=s.getElement();if(!i||!s.initialized||s.removed)return"";const u={...n,save:!0,element:i};let f=s.getContent(u);const x={...u,content:f};if(x.no_events||s.dispatch("SaveContent",x),x.format==="raw"&&s.dispatch("RawSaveContent",x),f=x.content,ka(i))i.value=f;else{(n.is_removing||!s.inline)&&(i.innerHTML=f);const T=Qv.getParent(s.id,"form");T&&uY(T.elements,D=>D.name===s.id?(D.value=f,!1):!0)}return x.element=u.element=i=null,x.set_dirty!==!1&&s.setDirty(!1),f}setContent(n,s){return gR(this,n,s)}getContent(n){return qk(this,n)}insertContent(n,s){s&&(n=sH({content:n},s)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?gR(this,this.startContent,{format:"raw"}):gR(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const s=!this.isNotDirty;this.isNotDirty=!n,n&&n!==s&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Qv.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Qv.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const s=n.iframeElement;s&&(n.contentWindow=s.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const s=n.getWin();s&&(n.contentDocument=s.document)}return n.contentDocument}getBody(){var n,s;const i=this.getDoc();return(s=(n=this.bodyElement)!==null&&n!==void 0?n:i==null?void 0:i.body)!==null&&s!==void 0?s:null}convertURL(n,s,i){const u=this,f=u.options.get,x=SE(u);if(Be(x))return x.call(u,n,i,!0,s);if(!f("convert_urls")||i==="link"||Wt(i)&&i.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const T=new $h(n);return T.protocol!=="http"&&T.protocol!=="https"&&T.protocol!==""?n:f("relative_urls")?u.documentBaseURI.toRelative(n):(n=u.documentBaseURI.toAbsolute(n,f("remove_script_host")),n)}addVisual(n){pX(this,n)}setEditableRoot(n){n4(this,n)}hasEditableRoot(){return uX(this)}remove(){U8(this)}destroy(n){X8(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const wx=Jr.DOM,_T=zt.each;let rH=!1,MC,yu=[];const OT=e=>{const n=e.type;_T(ub.get(),s=>{switch(n){case"scroll":s.dispatch("ScrollWindow",e);break;case"resize":s.dispatch("ResizeWindow",e);break}})},aH=e=>{if(e!==rH){const n=Jr.DOM;e?(n.bind(window,"resize",OT),n.bind(window,"scroll",OT)):(n.unbind(window,"resize",OT),n.unbind(window,"scroll",OT)),rH=e}},iH=e=>{const n=yu;return yu=Cn(yu,s=>e!==s),ub.activeEditor===e&&(ub.activeEditor=yu.length>0?yu[0]:null),ub.focusedEditor===e&&(ub.focusedEditor=null),n.length!==yu.length},dY=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(iH(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},hY=document.compatMode!=="CSS1Compat",ub={...f4,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"5.1",releaseDate:"TBD",i18n:Ud,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",s="",i=$h.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(i)&&(i=i.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(i)||(i+="/"));const u=window.tinymce||window.tinyMCEPreInit;if(u)n=u.base||u.baseURL,s=u.suffix;else{const f=document.getElementsByTagName("script");for(let x=0;x<f.length;x++){const T=f[x].src||"";if(T==="")continue;const D=T.substring(T.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(T)){D.indexOf(".min")!==-1&&(s=".min"),n=T.substring(0,T.lastIndexOf("/"));break}}if(!n&&document.currentScript){const x=document.currentScript.src;x.indexOf(".min")!==-1&&(s=".min"),n=x.substring(0,x.lastIndexOf("/"))}}e.baseURL=new $h(i).toAbsolute(n),e.documentBaseURL=i,e.baseURI=new $h(e.baseURL),e.suffix=s,MH(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const s=e.suffix;s&&(this.suffix=s),this.defaultOptions=e;const i=e.plugin_base_urls;i!==void 0&&Yt(i,(u,f)=>{ac.PluginManager.urls[f]=u})},init(e){const n=this;let s;const i=zt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),u=(G,J)=>G.inline&&J.tagName.toLowerCase()in i,f=G=>{let J=G.id;return J||(J=Ts(G,"name").filter(ee=>!wx.get(ee)).getOrThunk(wx.uniqueId),G.setAttribute("id",J)),J},x=G=>{const J=e[G];if(J)return J.apply(n,[])},T=G=>In.browser.isIE()||In.browser.isEdge()?(tA("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):hY?(tA("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):oe(G.selector)?wx.select(G.selector):ut(G.target)?[G.target]:[];let D=G=>{s=G};const F=()=>{let G=0;const J=[];let ee;const fe=(ke,be,Ee)=>{const Ye=new ET(ke,be,n);J.push(Ye),Ye.on("init",()=>{++G===ee.length&&D(J)}),Ye.targetElm=Ye.targetElm||Ee,Ye.render()};wx.unbind(window,"ready",F),x("onpageload"),ee=yi(T(e)),zt.each(ee,ke=>{dY(n.get(ke.id))}),ee=zt.grep(ee,ke=>!n.get(ke.id)),ee.length===0?D([]):_T(ee,ke=>{u(e,ke)?tA("Could not initialize inline editor on invalid inline target element",ke):fe(f(ke),e,ke)})};return wx.bind(window,"ready",F),new Promise(G=>{s?G(s):D=J=>{G(J)}})},get(e){return arguments.length===0?yu.slice(0):oe(e)?us(yu,n=>n.id===e).getOr(null):Qo(e)&&yu[e]?yu[e]:null},add(e){const n=this,s=n.get(e.id);return s===e||(s===null&&yu.push(e),aH(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),MC||(MC=i=>{const u=n.dispatch("BeforeUnload");if(u.returnValue)return i.preventDefault(),i.returnValue=u.returnValue,u.returnValue},window.addEventListener("beforeunload",MC))),e},createEditor(e,n){return this.add(new ET(e,n,this))},remove(e){const n=this;let s;if(!e){for(let i=yu.length-1;i>=0;i--)n.remove(yu[i]);return}if(oe(e)){_T(wx.select(e),i=>{s=n.get(i.id),s&&n.remove(s)});return}return s=e,ce(n.get(s.id))?null:(iH(s)&&n.dispatch("RemoveEditor",{editor:s}),yu.length===0&&window.removeEventListener("beforeunload",MC),s.remove(),aH(yu.length>0),s)},execCommand(e,n,s){var i;const u=this,f=Wt(s)?(i=s.id)!==null&&i!==void 0?i:s.index:s;switch(e){case"mceAddEditor":{if(!u.get(f)){const x=s.options;new ET(f,x,u).render()}return!0}case"mceRemoveEditor":{const x=u.get(f);return x&&x.remove(),!0}case"mceToggleEditor":{const x=u.get(f);return x?(x.isHidden()?x.show():x.hide(),!0):(u.execCommand("mceAddEditor",!1,s),!0)}}return u.activeEditor?u.activeEditor.execCommand(e,n,s):!1},triggerSave:()=>{_T(yu,e=>{e.save()})},addI18n:(e,n)=>{Ud.add(e,n)},translate:e=>Ud.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new $h(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new $h(this.baseURL)}};ub.setup();const lH=(()=>{const e=Ji(),n=f=>({items:f,types:uo(f),getType:x=>Ts(f,x).getOrUndefined()}),s=f=>{e.set(f)},i=()=>e.get().getOrUndefined(),u=e.clear;return{FakeClipboardItem:n,write:s,read:i,clear:u}})(),gY=Math.min,e0=Math.max,RT=Math.round,v4=(e,n,s)=>{let i=n.x,u=n.y;const f=e.w,x=e.h,T=n.w,D=n.h,F=(s||"").split("");return F[0]==="b"&&(u+=D),F[1]==="r"&&(i+=T),F[0]==="c"&&(u+=RT(D/2)),F[1]==="c"&&(i+=RT(T/2)),F[3]==="b"&&(u-=x),F[4]==="r"&&(i-=f),F[3]==="c"&&(u-=RT(x/2)),F[4]==="c"&&(i-=RT(f/2)),Cx(i,u,f,x)},fY=(e,n,s,i)=>{for(let u=0;u<i.length;u++){const f=v4(e,n,i[u]);if(f.x>=s.x&&f.x+f.w<=s.w+s.x&&f.y>=s.y&&f.y+f.h<=s.h+s.y)return i[u]}return null},mY=(e,n,s)=>Cx(e.x-n,e.y-s,e.w+n*2,e.h+s*2),pY=(e,n)=>{const s=e0(e.x,n.x),i=e0(e.y,n.y),u=gY(e.x+e.w,n.x+n.w),f=gY(e.y+e.h,n.y+n.h);return u-s<0||f-i<0?null:Cx(s,i,u-s,f-i)},bY=(e,n,s)=>{let i=e.x,u=e.y,f=e.x+e.w,x=e.y+e.h;const T=n.x+n.w,D=n.y+n.h,F=e0(0,n.x-i),G=e0(0,n.y-u),J=e0(0,f-T),ee=e0(0,x-D);return i+=F,u+=G,s&&(f+=F,x+=G,i-=J,u-=ee),f-=J,x-=ee,Cx(i,u,f-i,x-u)},Cx=(e,n,s,i)=>({x:e,y:n,w:s,h:i}),x4={inflate:mY,relativePosition:v4,findBestRelativePosition:fY,intersect:pY,clamp:bY,create:Cx,fromClientRect:e=>Cx(e.left,e.top,e.width,e.height)},y4=(e,n,s=1e3)=>{let i=!1,u=null;const f=F=>(...G)=>{i||(i=!0,u!==null&&(clearTimeout(u),u=null),F.apply(null,G))},x=f(e),T=f(n);return{start:(...F)=>{!i&&u===null&&(u=setTimeout(()=>T.apply(null,F),s))},resolve:x,reject:T}},cH=(()=>{const e={},n={},s={};return{load:(D,F)=>{const G=`Script at URL "${F}" failed to load`,J=`Script at URL "${F}" did not call \`tinymce.Resource.add('${D}', data)\` within 1 second`;if(e[D]!==void 0)return e[D];{const ee=new Promise((fe,ke)=>{const be=y4(fe,ke);n[D]=be.resolve,Ah.ScriptLoader.loadScript(F).then(()=>be.start(J),()=>be.reject(G))});return e[D]=ee,ee}},add:(D,F)=>{n[D]!==void 0&&(n[D](F),delete n[D]),e[D]=Promise.resolve(F),s[D]=F},has:D=>D in s,get:D=>s[D],unload:D=>{delete e[D],delete s[D]}}})(),vY=()=>(()=>{let e={},n=[];const s={getItem:i=>{const u=e[i];return u||null},setItem:(i,u)=>{n.push(i),e[i]=String(u)},key:i=>n[i],removeItem:i=>{n=n.filter(u=>u===i),delete e[i]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(s,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),s})();let PC;try{const e="__storage_test__";PC=window.localStorage,PC.setItem(e,e),PC.removeItem(e)}catch{PC=vY()}var xY=PC;const yY={geom:{Rect:x4},util:{Delay:vd,Tools:zt,VK:_n,URI:$h,EventDispatcher:g4,Observable:f4,I18n:Ud,LocalStorage:xY,ImageUploader:yR},dom:{EventUtils:Uf,TreeWalker:Tr,TextSeeker:jf,DOMUtils:Jr,ScriptLoader:Ah,RangeUtils:Xt,Serializer:dR,StyleSheetLoader:Ch,ControlSelection:Jy,BookmarkManager:Cm,Selection:oN,Event:Uf.Event},html:{Styles:Yg,Entities:Wg,Node:Gc,Schema:Er,DomParser:Rv,Writer:O_,Serializer:Ip},Env:In,AddOnManager:ac,Annotator:Gd,Formatter:SN,UndoManager:kR,EditorCommands:Z5,WindowManager:pR,NotificationManager:fN,EditorObservable:K5,Shortcuts:nH,Editor:ET,FocusManager:x_,EditorManager:ub,DOM:Jr.DOM,ScriptLoader:Ah.ScriptLoader,PluginManager:Y1,ThemeManager:Ag,ModelManager:X1,IconManager:U1,Resource:cH,FakeClipboard:lH,trim:zt.trim,isArray:zt.isArray,is:zt.is,toArray:zt.toArray,makeMap:zt.makeMap,each:zt.each,map:zt.map,grep:zt.grep,inArray:zt.inArray,extend:zt.extend,walk:zt.walk,resolve:zt.resolve,explode:zt.explode,_addCacheSuffix:zt._addCacheSuffix},uH=zt.extend(ub,yY),wY=e=>{try{cs.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(uH),wY(uH)})()}(OY)),OY.exports}var XG=UG();const YG=RG(XG);var lZ={},cZ={},uZ;function jG(){return uZ||(uZ=1,function(){const cs=Object.getPrototypeOf,Rs=(t,r,l)=>{var h;return l(t,r.prototype)?!0:((h=t.constructor)===null||h===void 0?void 0:h.name)===r.name},gn=t=>{const r=typeof t;return t===null?"null":r==="object"&&Array.isArray(t)?"array":r==="object"&&Rs(t,String,(l,h)=>h.isPrototypeOf(l))?"string":r},ys=t=>r=>gn(r)===t,rn=t=>r=>typeof r===t,gs=t=>r=>t===r,Fo=(t,r)=>lo(t)&&Rs(t,r,(l,h)=>cs(l)===h),Ot=ys("string"),lo=ys("object"),ns=t=>Fo(t,Object),Bo=ys("array"),fs=gs(null),Tt=rn("boolean"),Ln=gs(void 0),Lo=t=>t==null,vn=t=>!Lo(t),Bt=rn("function"),vo=rn("number"),xn=(t,r)=>{if(Bo(t)){for(let l=0,h=t.length;l<h;++l)if(!r(t[l]))return!1;return!0}return!1},oe=()=>{},Wt=t=>()=>t(),Yo=(t,r)=>(...l)=>t(r.apply(null,l)),jt=(t,r)=>l=>t(r(l)),ce=t=>()=>t,Gt=t=>t,Wn=(t,r)=>t===r;function no(t,...r){return(...l)=>{const h=r.concat(l);return t.apply(null,h)}}const ut=t=>r=>!t(r),Be=t=>()=>{throw new Error(t)},Qo=t=>t(),Je=ce(!1),ot=ce(!0);class V{constructor(r,l){this.tag=r,this.value=l}static some(r){return new V(!0,r)}static none(){return V.singletonNone}fold(r,l){return this.tag?l(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?V.some(r(this.value)):V.none()}bind(r){return this.tag?r(this.value):V.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:V.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return vn(r)?V.some(r):V.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}V.singletonNone=new V(!1);const Zn=Array.prototype.slice,Dt=Array.prototype.indexOf,Ao=Array.prototype.push,Rn=(t,r)=>Dt.call(t,r),it=(t,r)=>{const l=Rn(t,r);return l===-1?V.none():V.some(l)},No=(t,r)=>Rn(t,r)>-1,qs=(t,r)=>{for(let l=0,h=t.length;l<h;l++){const p=t[l];if(r(p,l))return!0}return!1},Ht=(t,r)=>{const l=[];for(let h=0;h<t;h++)l.push(r(h));return l},Gn=(t,r)=>{const l=[];for(let h=0;h<t.length;h+=r){const p=Zn.call(t,h,h+r);l.push(p)}return l},dt=(t,r)=>{const l=t.length,h=new Array(l);for(let p=0;p<l;p++){const y=t[p];h[p]=r(y,p)}return h},wt=(t,r)=>{for(let l=0,h=t.length;l<h;l++){const p=t[l];r(p,l)}},te=(t,r)=>{for(let l=t.length-1;l>=0;l--){const h=t[l];r(h,l)}},As=(t,r)=>{const l=[],h=[];for(let p=0,y=t.length;p<y;p++){const S=t[p];(r(S,p)?l:h).push(S)}return{pass:l,fail:h}},zo=(t,r)=>{const l=[];for(let h=0,p=t.length;h<p;h++){const y=t[h];r(y,h)&&l.push(y)}return l},Un=(t,r,l)=>(te(t,(h,p)=>{l=r(l,h,p)}),l),ms=(t,r,l)=>(wt(t,(h,p)=>{l=r(l,h,p)}),l),Ka=(t,r,l)=>{for(let h=0,p=t.length;h<p;h++){const y=t[h];if(r(y,h))return V.some(y);if(l(y,h))break}return V.none()},We=(t,r)=>Ka(t,r,Je),Ie=(t,r)=>{for(let l=0,h=t.length;l<h;l++){const p=t[l];if(r(p,l))return V.some(l)}return V.none()},Ze=t=>{const r=[];for(let l=0,h=t.length;l<h;++l){if(!Bo(t[l]))throw new Error("Arr.flatten item "+l+" was not an array, input: "+t);Ao.apply(r,t[l])}return r},De=(t,r)=>Ze(dt(t,r)),Xn=(t,r)=>{for(let l=0,h=t.length;l<h;++l){const p=t[l];if(r(p,l)!==!0)return!1}return!0},Mo=t=>{const r=Zn.call(t,0);return r.reverse(),r},Cn=(t,r)=>zo(t,l=>!No(r,l)),Qs=(t,r)=>{const l={};for(let h=0,p=t.length;h<p;h++){const y=t[h];l[String(y)]=r(y,h)}return l},Vo=t=>[t],Cr=(t,r)=>{const l=Zn.call(t,0);return l.sort(r),l},us=(t,r)=>r>=0&&r<t.length?V.some(t[r]):V.none(),ur=t=>us(t,0),ri=t=>us(t,t.length-1),vr=Bt(Array.from)?Array.from:t=>Zn.call(t),qo=(t,r)=>{for(let l=0;l<t.length;l++){const h=r(t[l],l);if(h.isSome())return h}return V.none()},ds=Object.keys,jr=Object.hasOwnProperty,$s=(t,r)=>{const l=ds(t);for(let h=0,p=l.length;h<p;h++){const y=l[h],S=t[y];r(S,y)}},Go=(t,r)=>Xs(t,(l,h)=>({k:h,v:r(l,h)})),Xs=(t,r)=>{const l={};return $s(t,(h,p)=>{const y=r(h,p);l[y.k]=y.v}),l},qn=t=>(r,l)=>{t[l]=r},Ns=(t,r,l,h)=>{$s(t,(p,y)=>{(r(p,y)?l:h)(p,y)})},oo=(t,r)=>{const l={},h={};return Ns(t,r,qn(l),qn(h)),{t:l,f:h}},Wr=(t,r)=>{const l={};return Ns(t,r,qn(l),oe),l},yi=(t,r)=>{const l=[];return $s(t,(h,p)=>{l.push(r(h,p))}),l},uo=(t,r)=>{const l=ds(t);for(let h=0,p=l.length;h<p;h++){const y=l[h],S=t[y];if(r(S,y,t))return V.some(S)}return V.none()},Ri=t=>yi(t,Gt),Yt=(t,r)=>os(t,r)?V.from(t[r]):V.none(),os=(t,r)=>jr.call(t,r),Lr=(t,r)=>os(t,r)&&t[r]!==void 0&&t[r]!==null,Zr=(t,r,l=Wn)=>t.exists(h=>l(h,r)),Fa=(t,r,l=Wn)=>da(t,r,l).getOr(t.isNone()&&r.isNone()),Xa=t=>{const r=[],l=h=>{r.push(h)};for(let h=0;h<t.length;h++)t[h].each(l);return r},Is=t=>{const r=[];for(let l=0;l<t.length;l++){const h=t[l];if(h.isSome())r.push(h.getOrDie());else return V.none()}return V.some(r)},da=(t,r,l)=>t.isSome()&&r.isSome()?V.some(l(t.getOrDie(),r.getOrDie())):V.none(),Dr=(t,r,l,h)=>t.isSome()&&r.isSome()&&l.isSome()?V.some(h(t.getOrDie(),r.getOrDie(),l.getOrDie())):V.none(),Ts=(t,r)=>t!=null?V.some(r(t)):V.none(),Qn=(t,r)=>t?V.some(r):V.none(),hr=(t,r)=>t+r,Ta=(t,r)=>t.substring(r),vl=(t,r,l)=>r===""||t.length>=r.length&&t.substr(l,l+r.length)===r,Ol=(t,r)=>mr(t,r)?Ta(t,r.length):t,Ds=(t,r)=>Ea(t,r)?t:hr(t,r),yo=(t,r,l=0,h)=>{const p=t.indexOf(r,l);return p!==-1?Ln(h)?!0:p+r.length<=h:!1},mr=(t,r)=>vl(t,r,0),Ea=(t,r)=>vl(t,r,t.length-r.length),Ms=(t=>r=>r.replace(t,""))(/^\s+|\s+$/g),Ne=t=>t.length>0,Re=t=>!Ne(t),gt=t=>t.style!==void 0&&Bt(t.style.getPropertyValue),ft=(t,r)=>{const h=(r||document).createElement("div");if(h.innerHTML=t,!h.hasChildNodes()||h.childNodes.length>1){const p="HTML does not have a single root node";throw console.error(p,t),new Error(p)}return To(h.childNodes[0])},Yn=(t,r)=>{const h=(r||document).createElement(t);return To(h)},go=(t,r)=>{const h=(r||document).createTextNode(t);return To(h)},To=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Xe={fromHtml:ft,fromTag:Yn,fromText:go,fromDom:To,fromPoint:(t,r,l)=>V.from(t.dom.elementFromPoint(r,l)).map(To)},Eo=typeof window<"u"?window:Function("return this;")(),He=(t,r)=>{let l=r??Eo;for(let h=0;h<t.length&&l!==void 0&&l!==null;++h)l=l[t[h]];return l},ze=(t,r)=>{const l=t.split(".");return He(l,r)},It=(t,r)=>ze(t,r),Vt=(t,r)=>{const l=It(t,r);if(l==null)throw new Error(t+" not available on this browser");return l},bn=Object.getPrototypeOf,Hn=t=>Vt("HTMLElement",t),$n=t=>{const r=ze("ownerDocument.defaultView",t);return lo(t)&&(Hn(r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(bn(t).constructor.name))},Mn=9,eo=11,co=1,ps=3,Ks=t=>t.dom.nodeName.toLowerCase(),Ys=t=>t.dom.nodeType,hi=t=>r=>Ys(r)===t,Ja=t=>so(t)&&$n(t.dom),so=hi(co),ls=hi(ps),ss=hi(Mn),_a=hi(eo),xa=t=>r=>so(r)&&Ks(r)===t,ea=(t,r)=>{const l=t.dom;if(l.nodeType!==co)return!1;{const h=l;if(h.matches!==void 0)return h.matches(r);if(h.msMatchesSelector!==void 0)return h.msMatchesSelector(r);if(h.webkitMatchesSelector!==void 0)return h.webkitMatchesSelector(r);if(h.mozMatchesSelector!==void 0)return h.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},pr=t=>t.nodeType!==co&&t.nodeType!==Mn&&t.nodeType!==eo||t.childElementCount===0,eu=(t,r)=>{const l=r===void 0?document:r.dom;return pr(l)?[]:dt(l.querySelectorAll(t),Xe.fromDom)},ji=(t,r)=>{const l=r===void 0?document:r.dom;return pr(l)?V.none():V.from(l.querySelector(t)).map(Xe.fromDom)},Fs=(t,r)=>t.dom===r.dom,Oa=(t,r)=>{const l=t.dom,h=r.dom;return l===h?!1:l.contains(h)},Ra=t=>Xe.fromDom(t.dom.ownerDocument),ya=t=>ss(t)?t:Ra(t),Di=t=>Xe.fromDom(ya(t).dom.documentElement),Qa=t=>Xe.fromDom(ya(t).dom.defaultView),ai=t=>V.from(t.dom.parentNode).map(Xe.fromDom),Zi=t=>ai(t),Mi=t=>V.from(t.dom.parentElement).map(Xe.fromDom),ii=(t,r)=>{const l=Bt(r)?r:Je;let h=t.dom;const p=[];for(;h.parentNode!==null&&h.parentNode!==void 0;){const y=h.parentNode,S=Xe.fromDom(y);if(p.push(S),l(S)===!0)break;h=y}return p},Ql=t=>V.from(t.dom.offsetParent).map(Xe.fromDom),wi=t=>V.from(t.dom.nextSibling).map(Xe.fromDom),gi=t=>dt(t.dom.childNodes,Xe.fromDom),ha=(t,r)=>{const l=t.dom.childNodes;return V.from(l[r]).map(Xe.fromDom)},ec=t=>ha(t,0),sl=(t,r)=>({element:t,offset:r}),tc=(t,r)=>{const l=gi(t);return l.length>0&&r<l.length?sl(l[r],0):sl(t,r)},Ci=t=>_a(t)&&vn(t.dom.host),ga=t=>Xe.fromDom(t.dom.getRootNode()),Ba=t=>Ci(t)?t:Xe.fromDom(ya(t).dom.body),ta=t=>Ha(t).isSome(),Ha=t=>{const r=ga(t);return Ci(r)?V.some(r):V.none()},nc=t=>Xe.fromDom(t.dom.host),gr=t=>{if(vn(t.target)){const r=Xe.fromDom(t.target);if(so(r)&&he(r)&&t.composed&&t.composedPath){const l=t.composedPath();if(l)return ur(l)}}return V.from(t.target)},he=t=>vn(t.dom.shadowRoot),Me=t=>{const r=ls(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;const l=r.ownerDocument;return Ha(Xe.fromDom(r)).fold(()=>l.body.contains(r),jt(Me,nc))},Ge=()=>mt(Xe.fromDom(document)),mt=t=>{const r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return Xe.fromDom(r)},Qt=(t,r,l)=>{if(Ot(l)||Tt(l)||vo(l))t.setAttribute(r,l+"");else throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",l,":: Element ",t),new Error("Attribute value was not simple")},kt=(t,r,l)=>{Qt(t.dom,r,l)},Ps=(t,r)=>{const l=t.dom;$s(r,(h,p)=>{Qt(l,p,h)})},In=(t,r)=>{const l=t.dom.getAttribute(r);return l===null?void 0:l},_o=(t,r)=>V.from(In(t,r)),kr=(t,r)=>{const l=t.dom;return l&&l.hasAttribute?l.hasAttribute(r):!1},Q=(t,r)=>{t.dom.removeAttribute(r)},xe=t=>ms(t.dom.attributes,(r,l)=>(r[l.name]=l.value,r),{}),Le=(t,r,l)=>{if(!Ot(l))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",l,":: Element ",t),new Error("CSS value must be a string: "+l);gt(t)&&t.style.setProperty(r,l)},st=(t,r)=>{gt(t)&&t.style.removeProperty(r)},Mt=(t,r,l)=>{const h=t.dom;Le(h,r,l)},jo=(t,r)=>{const l=t.dom;$s(r,(h,p)=>{Le(l,p,h)})},js=(t,r)=>{const l=t.dom;$s(r,(h,p)=>{h.fold(()=>{st(l,p)},y=>{Le(l,p,y)})})},nr=(t,r)=>{const l=t.dom,p=window.getComputedStyle(l).getPropertyValue(r);return p===""&&!Me(t)?zt(l,r):p},zt=(t,r)=>gt(t)?t.style.getPropertyValue(r):"",or=(t,r)=>{const l=t.dom,h=zt(l,r);return V.from(h).filter(p=>p.length>0)},Da=t=>{const r={},l=t.dom;if(gt(l))for(let h=0;h<l.style.length;h++){const p=l.style.item(h);r[p]=l.style[p]}return r},Rl=(t,r,l)=>{const h=Xe.fromTag(t);return Mt(h,r,l),or(h,r).isSome()},Oo=(t,r)=>{const l=t.dom;st(l,r),Zr(_o(t,"style").map(Ms),"")&&Q(t,"style")},Si=t=>t.dom.offsetWidth,rl=(t,r)=>{const l=(R,I)=>{if(!vo(I)&&!I.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+I);const H=R.dom;gt(H)&&(H.style[t]=I+"px")},h=R=>{const I=r(R);if(I<=0||I===null){const H=nr(R,t);return parseFloat(H)||0}return I},p=h,y=(R,I)=>ms(I,(H,X)=>{const K=nr(R,X),ie=K===void 0?0:parseInt(K,10);return isNaN(ie)?H:H+ie},0);return{set:l,get:h,getOuter:p,aggregate:y,max:(R,I,H)=>{const X=y(R,H);return I>X?I-X:0}}},Ma=rl("height",t=>{const r=t.dom;return Me(t)?r.getBoundingClientRect().height:r.offsetHeight}),Xo=t=>Ma.get(t),xl=t=>Ma.getOuter(t),yl=(t,r)=>{const l=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],h=Ma.max(t,r,l);Mt(t,"max-height",h+"px")},Ku=(t,r)=>({left:t,top:r,translate:(h,p)=>Ku(t+h,r+p)}),Gr=Ku,Ya=t=>{const r=t.getBoundingClientRect();return Gr(r.left,r.top)},tn=(t,r)=>t!==void 0?t:r!==void 0?r:0,bs=t=>{const r=t.dom.ownerDocument,l=r.body,h=r.defaultView,p=r.documentElement;if(l===t.dom)return Gr(l.offsetLeft,l.offsetTop);const y=tn(h==null?void 0:h.pageYOffset,p.scrollTop),S=tn(h==null?void 0:h.pageXOffset,p.scrollLeft),R=tn(p.clientTop,l.clientTop),I=tn(p.clientLeft,l.clientLeft);return Gi(t).translate(S-I,y-R)},Gi=t=>{const r=t.dom,h=r.ownerDocument.body;return h===r?Gr(h.offsetLeft,h.offsetTop):Me(t)?Ya(r):Gr(0,0)},Pi=rl("width",t=>t.dom.offsetWidth),ja=(t,r)=>Pi.set(t,r),pe=t=>Pi.get(t),Se=t=>Pi.getOuter(t),at=(t,r)=>{const l=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],h=Pi.max(t,r,l);Mt(t,"max-width",h+"px")},Et=t=>{let r=!1,l;return(...h)=>(r||(r=!0,l=t.apply(null,h)),l)},ro=(t,r,l,h)=>{const p=t.isiOS()&&/ipad/i.test(l)===!0,y=t.isiOS()&&!p,S=t.isiOS()||t.isAndroid(),R=S||h("(pointer:coarse)"),I=p||!y&&S&&h("(min-device-width:768px)"),H=y||S&&!I,X=r.isSafari()&&t.isiOS()&&/safari/i.test(l)===!1,K=!H&&!I&&!X;return{isiPad:ce(p),isiPhone:ce(y),isTablet:ce(I),isPhone:ce(H),isTouch:ce(R),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ce(X),isDesktop:ce(K)}},es=(t,r)=>{for(let l=0;l<t.length;l++){const h=t[l];if(h.test(r))return h}},Jo=(t,r)=>{const l=es(t,r);if(!l)return{major:0,minor:0};const h=p=>Number(r.replace(l,"$"+p));return ei(h(1),h(2))},fr=(t,r)=>{const l=String(r).toLowerCase();return t.length===0?na():Jo(t,l)},na=()=>ei(0,0),ei=(t,r)=>({major:t,minor:r}),$a={nu:ei,detect:fr,unknown:na},oa=(t,r)=>qo(r.brands,l=>{const h=l.brand.toLowerCase();return We(t,p=>{var y;return h===((y=p.brand)===null||y===void 0?void 0:y.toLowerCase())}).map(p=>({current:p.name,version:$a.nu(parseInt(l.version,10),0)}))}),fa=(t,r)=>{const l=String(r).toLowerCase();return We(t,h=>h.search(l))},Mr=(t,r)=>fa(t,r).map(l=>{const h=$a.detect(l.versionRegexes,r);return{current:l.name,version:h}}),Pa=(t,r)=>fa(t,r).map(l=>{const h=$a.detect(l.versionRegexes,r);return{current:l.name,version:h}}),Fr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Nr=t=>r=>yo(r,t),er=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>yo(t,"edge/")&&yo(t,"chrome")&&yo(t,"safari")&&yo(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fr],search:t=>yo(t,"chrome")&&!yo(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>yo(t,"msie")||yo(t,"trident")},{name:"Opera",versionRegexes:[Fr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Nr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Nr("firefox")},{name:"Safari",versionRegexes:[Fr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(yo(t,"safari")||yo(t,"mobile/"))&&yo(t,"applewebkit")}],$l=[{name:"Windows",search:Nr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>yo(t,"iphone")||yo(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Nr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Nr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Nr("linux"),versionRegexes:[]},{name:"Solaris",search:Nr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Nr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Nr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Lc={browsers:ce(er),oses:ce($l)},zl="Edge",tu="Chromium",nu="IE",Ec="Opera",_c="Firefox",Dl="Safari",qi=()=>jh({current:void 0,version:$a.unknown()}),jh=t=>{const r=t.current,l=t.version,h=p=>()=>r===p;return{current:r,version:l,isEdge:h(zl),isChromium:h(tu),isIE:h(nu),isOpera:h(Ec),isFirefox:h(_c),isSafari:h(Dl)}},oc={unknown:qi,nu:jh,edge:ce(zl),chromium:ce(tu),ie:ce(nu),opera:ce(Ec),firefox:ce(_c),safari:ce(Dl)},mh="Windows",Tu="iOS",ph="Android",Md="Linux",Eu="macOS",Pd="Solaris",bh="FreeBSD",fc="ChromeOS",Zh=()=>$e({current:void 0,version:$a.unknown()}),$e=t=>{const r=t.current,l=t.version,h=p=>()=>r===p;return{current:r,version:l,isWindows:h(mh),isiOS:h(Tu),isAndroid:h(ph),isMacOS:h(Eu),isLinux:h(Md),isSolaris:h(Pd),isFreeBSD:h(bh),isChromeOS:h(fc)}},ou={unknown:Zh,nu:$e,windows:ce(mh),ios:ce(Tu),android:ce(ph),linux:ce(Md),macos:ce(Eu),solaris:ce(Pd),freebsd:ce(bh),chromeos:ce(fc)},Gh={detect:(t,r,l)=>{const h=Lc.browsers(),p=Lc.oses(),y=r.bind(I=>oa(h,I)).orThunk(()=>Mr(h,t)).fold(oc.unknown,oc.nu),S=Pa(p,t).fold(ou.unknown,ou.nu),R=ro(S,y,t,l);return{browser:y,os:S,deviceType:R}}},Ng=t=>window.matchMedia(t).matches;let Nc=Et(()=>Gh.detect(window.navigator.userAgent,V.from(window.navigator.userAgentData),Ng));const rs=()=>Nc(),Li=(t,r,l,h,p,y,S)=>({target:t,x:r,y:l,stop:h,prevent:p,kill:y,raw:S}),fi=t=>{const r=Xe.fromDom(gr(t).getOr(t.target)),l=()=>t.stopPropagation(),h=()=>t.preventDefault(),p=Yo(h,l);return Li(r,t.clientX,t.clientY,l,h,p,t)},Ic=(t,r)=>l=>{t(l)&&r(fi(l))},vh=(t,r,l,h,p)=>{const y=Ic(l,h);return t.dom.addEventListener(r,y,p),{unbind:no(Qu,t,r,y,p)}},Ju=(t,r,l,h)=>vh(t,r,l,h,!1),Za=(t,r,l,h)=>vh(t,r,l,h,!0),Qu=(t,r,l,h)=>{t.dom.removeEventListener(r,l,h)},mc=(t,r)=>{ai(t).each(h=>{h.dom.insertBefore(r.dom,t.dom)})},ed=(t,r)=>{wi(t).fold(()=>{ai(t).each(p=>{Ni(p,r)})},h=>{mc(h,r)})},Fc=(t,r)=>{ec(t).fold(()=>{Ni(t,r)},h=>{t.dom.insertBefore(r.dom,h.dom)})},Ni=(t,r)=>{t.dom.appendChild(r.dom)},qh=(t,r,l)=>{ha(t,l).fold(()=>{Ni(t,r)},h=>{mc(h,r)})},td=(t,r)=>{wt(r,l=>{Ni(t,l)})},li=t=>{t.dom.textContent="",wt(gi(t),r=>{wl(r)})},wl=t=>{const r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},Ki=t=>{const r=t!==void 0?t.dom:document,l=r.body.scrollLeft||r.documentElement.scrollLeft,h=r.body.scrollTop||r.documentElement.scrollTop;return Gr(l,h)},_u=(t,r,l)=>{const p=(l!==void 0?l.dom:document).defaultView;p&&p.scrollTo(t,r)},nd=t=>{const r=t===void 0?window:t;return rs().browser.isFirefox()?V.none():V.from(r.visualViewport)},Kh=(t,r,l,h)=>({x:t,y:r,width:l,height:h,right:t+l,bottom:r+h}),su=t=>{const r=t===void 0?window:t,l=r.document,h=Ki(Xe.fromDom(l));return nd(r).fold(()=>{const p=r.document.documentElement,y=p.clientWidth,S=p.clientHeight;return Kh(h.left,h.top,y,S)},p=>Kh(Math.max(p.pageLeft,h.left),Math.max(p.pageTop,h.top),p.width,p.height))},Vl=()=>Xe.fromDom(document),od=(t,r)=>t.view(r).fold(ce([]),h=>{const p=t.owner(h),y=od(t,p);return[h].concat(y)}),Ig=(t,r)=>{const l=r.owner(t),h=od(r,l);return V.some(h)};var Qh=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?V.none():V.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement)).map(Xe.fromDom)},owner:t=>Ra(t)});const sd=t=>{const r=Vl(),l=Ki(r);return Ig(t,Qh).fold(no(bs,t),p=>{const y=Gi(t),S=Un(p,(R,I)=>{const H=Gi(I);return{left:R.left+H.left,top:R.top+H.top}},{left:0,top:0});return Gr(S.left+y.left+l.left,S.top+y.top+l.top)})},ru=(t,r,l)=>({point:t,width:r,height:l}),Ld=(t,r,l,h)=>({x:t,y:r,width:l,height:h}),Br=(t,r,l,h)=>({x:t,y:r,width:l,height:h,right:t+l,bottom:r+h}),Hr=t=>{const r=bs(t),l=Se(t),h=xl(t);return Br(r.left,r.top,l,h)},Bc=t=>{const r=sd(t),l=Se(t),h=xl(t);return Br(r.left,r.top,l,h)},Wl=(t,r)=>{const l=Math.max(t.x,r.x),h=Math.max(t.y,r.y),p=Math.min(t.right,r.right),y=Math.min(t.bottom,r.bottom),S=p-l,R=y-h;return Br(l,h,S,R)},Nd=(t,r)=>ms(r,(l,h)=>Wl(l,h),t),La=()=>su(window),to=t=>{let r=t;return{get:()=>r,set:p=>{r=p}}},Oc=t=>{const r=to(V.none()),l=()=>r.get().each(t);return{clear:()=>{l(),r.set(V.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:R=>{l(),r.set(V.some(R))}}},rd=()=>Oc(t=>t.destroy()),Pl=()=>Oc(t=>t.unbind()),zs=()=>{const t=Oc(oe);return{...t,on:l=>t.get().each(l)}};var Hc=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ad=t=>{const r=y=>y(t),l=ce(t),h=()=>p,p={tag:!0,inner:t,fold:(y,S)=>S(t),isValue:ot,isError:Je,map:y=>C.value(y(t)),mapError:h,bind:r,exists:r,forall:r,getOr:l,or:h,getOrThunk:l,orThunk:h,getOrDie:l,each:y=>{y(t)},toOptional:()=>V.some(t)};return p},id=t=>{const r=()=>l,l={tag:!1,inner:t,fold:(h,p)=>h(t),isValue:Je,isError:ot,map:r,mapError:h=>C.error(h(t)),bind:r,exists:Je,forall:ot,getOr:Gt,or:Gt,getOrThunk:Qo,orThunk:Qo,getOrDie:Be(String(t)),each:oe,toOptional:V.none};return l},C={value:ad,error:id,fromOption:(t,r)=>t.fold(()=>id(r),ad)};var o;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(o||(o={}));const a=(t,r,l)=>t.stype===o.Error?r(t.serror):l(t.svalue),c=t=>{const r=[],l=[];return wt(t,h=>{a(h,p=>l.push(p),p=>r.push(p))}),{values:r,errors:l}},d=(t,r)=>t.stype===o.Error?{stype:o.Error,serror:r(t.serror)}:t,m=(t,r)=>t.stype===o.Value?{stype:o.Value,svalue:r(t.svalue)}:t,b=(t,r)=>t.stype===o.Value?r(t.svalue):t,w=(t,r)=>t.stype===o.Error?r(t.serror):t,A=t=>({stype:o.Value,svalue:t}),E=t=>({stype:o.Error,serror:t}),L={fromResult:t=>t.fold(E,A),toResult:t=>a(t,C.error,C.value),svalue:A,partition:c,serror:E,bind:b,bindError:w,map:m,mapError:d,fold:a},$=(t,r,l,h)=>({tag:"field",key:t,newKey:r,presence:l,prop:h}),Y=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),U=(t,r,l)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return l(t.newKey,t.instantiator)}},ne=(t,r)=>r,ae=(t,r)=>ns(t)&&ns(r)?me(t,r):r,le=t=>(...r)=>{if(r.length===0)throw new Error("Can't merge zero objects");const l={};for(let h=0;h<r.length;h++){const p=r[h];for(const y in p)os(p,y)&&(l[y]=t(l[y],p[y]))}return l},me=le(ae),Oe=le(ne),Te=()=>({tag:"required",process:{}}),Ve=t=>({tag:"defaultedThunk",process:t}),ve=t=>Ve(ce(t)),Pe=()=>({tag:"option",process:{}}),ht=t=>({tag:"mergeWithThunk",process:t}),P=t=>ht(ce(t)),W=(t,r)=>t.length>0?L.svalue(me(r,Oe.apply(void 0,t))):L.svalue(r),q=t=>Yo(L.serror,Ze)(t),nt={consolidateObj:(t,r)=>{const l=L.partition(t);return l.errors.length>0?q(l.errors):W(l.values,r)},consolidateArr:t=>{const r=L.partition(t);return r.errors.length>0?q(r.errors):L.svalue(r.values)}},Ft=t=>lo(t)&&ds(t).length>100?" removed due to size":JSON.stringify(t,null,2),an=t=>{const r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ce("... (only showing first ten failures)")}]):t;return dt(r,l=>"Failed path: ("+l.path.join(" > ")+`)
`+l.getErrorInfo())},hn=(t,r)=>L.serror([{path:t,getErrorInfo:r}]),Jt=(t,r,l)=>hn(t,()=>'Could not find valid *required* value for "'+r+'" in '+Ft(l)),wo=(t,r)=>hn(t,()=>'Choice schema did not contain choice key: "'+r+'"'),Ro=(t,r,l)=>hn(t,()=>'The chosen schema: "'+l+'" did not exist in branches: '+Ft(r)),sr=(t,r)=>hn(t,()=>"There are unsupported fields: ["+r.join(", ")+"] specified"),qr=(t,r)=>hn(t,ce(r)),$r=t=>{const r=(h,p)=>L.bindError(t(p),y=>qr(h,y)),l=ce("val");return{extract:r,toString:l}},Ii=$r(L.svalue),Vs=(t,r,l,h)=>Yt(r,l).fold(()=>Jt(t,l,r),h),Ar=(t,r,l,h)=>{const p=Yt(t,r).getOrThunk(()=>l(t));return h(p)},ma=(t,r,l)=>l(Yt(t,r)),al=(t,r,l,h)=>{const p=Yt(t,r).map(y=>y===!0?l(t):y);return h(p)},Tr=(t,r,l,h,p)=>{const y=R=>p.extract(r.concat([h]),R),S=R=>R.fold(()=>L.svalue(V.none()),I=>{const H=p.extract(r.concat([h]),I);return L.map(H,V.some)});switch(t.tag){case"required":return Vs(r,l,h,y);case"defaultedThunk":return Ar(l,h,t.process,y);case"option":return ma(l,h,S);case"defaultedOptionThunk":return al(l,h,t.process,S);case"mergeWithThunk":return Ar(l,h,ce({}),R=>{const I=me(t.process(l),R);return y(I)})}},pc=(t,r,l)=>{const h={},p=[];for(const y of l)U(y,(S,R,I,H)=>{const X=Tr(I,t,r,S,H);L.fold(X,K=>{p.push(...K)},K=>{h[R]=K})},(S,R)=>{h[S]=R(r)});return p.length>0?L.serror(p):L.svalue(h)},za=t=>({extract:(h,p)=>t().extract(h,p),toString:()=>t().toString()}),il=t=>ds(Wr(t,vn)),mi=t=>{const r=fo(t),l=Un(t,(p,y)=>U(y,S=>me(p,{[S]:!0}),ce(p)),{});return{extract:(p,y)=>{const S=Tt(y)?[]:il(y),R=zo(S,I=>!Lr(l,I));return R.length===0?r.extract(p,y):sr(p,R)},toString:r.toString}},fo=t=>({extract:(h,p)=>pc(h,p,t),toString:()=>`obj{
`+dt(t,p=>U(p,(y,S,R,I)=>y+" -> "+I.toString(),(y,S)=>"state("+y+")")).join(`
`)+"}"}),Rc=t=>({extract:(h,p)=>{const y=dt(p,(S,R)=>t.extract(h.concat(["["+R+"]"]),S));return nt.consolidateArr(y)},toString:()=>"array("+t.toString()+")"}),fb=(t,r)=>{const l=r!==void 0?r:Gt;return{extract:(y,S)=>{const R=[];for(const I of t){const H=I.extract(y,S);if(H.stype===o.Value)return{stype:o.Value,svalue:l(H.svalue)};R.push(H)}return nt.consolidateArr(R)},toString:()=>"oneOf("+dt(t,y=>y.toString()).join(", ")+")"}},$m=(t,r)=>{const l=(y,S)=>Rc($r(t)).extract(y,S);return{extract:(y,S)=>{const R=ds(S),I=l(y,R);return L.bind(I,H=>{const X=dt(H,K=>$(K,K,Te(),r));return fo(X).extract(y,S)})},toString:()=>"setOf("+r.toString()+")"}},tg=(t,r)=>{const l=Et(r);return{extract:(y,S)=>l().extract(y,S),toString:()=>l().toString()}},mb=Yo(Rc,fo),au=ce(Ii),ld=(t,r)=>$r(l=>{const h=typeof l;return t(l)?L.svalue(l):L.serror(`Expected type: ${r} but got: ${h}`)}),ng=ld(vo,"number"),An=ld(Ot,"string"),iu=ld(Tt,"boolean"),zm=ld(Bt,"function"),Bg=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(r=>Bg(t[r]));default:return!1}},lu=$r(t=>Bg(t)?L.svalue(t):L.serror("Expected value to be acceptable for sending via postMessage")),Rf=(t,r,l,h)=>Yt(l,h).fold(()=>Ro(t,l,h),y=>y.extract(t.concat(["branch: "+h]),r)),og=(t,r)=>({extract:(p,y)=>Yt(y,t).fold(()=>wo(p,t),R=>Rf(p,y,r,R)),toString:()=>"chooseOn("+t+"). Possible values: "+ds(r)}),Id=()=>Rc(Ii),Df=t=>$r(r=>t(r).fold(L.serror,L.svalue)),Ou=(t,r)=>$m(l=>L.fromResult(t(l)),r),l0=(t,r,l)=>{const h=r.extract([t],l);return L.mapError(h,p=>({input:l,errors:p}))},ka=(t,r,l)=>L.toResult(l0(t,r,l)),qt=t=>t.fold(r=>{throw new Error(sg(r))},Gt),Ul=(t,r,l)=>qt(ka(t,r,l)),sg=t=>`Errors: 
`+an(t.errors).join(`
`)+`

Input object: `+Ft(t.input),Ga=(t,r)=>og(t,Go(r,fo)),Hg=(t,r)=>tg(t,r),Fi=$,rr=Y,Mf=t=>Df(r=>No(t,r)?C.value(r):C.error(`Unsupported value: "${r}", choose one of "${t.join(", ")}".`)),Lt=t=>Fi(t,t,Te(),au()),ar=(t,r)=>Fi(t,t,Te(),r),Pf=t=>ar(t,ng),ki=t=>ar(t,An),Cl=(t,r)=>Fi(t,t,Te(),Mf(r)),$c=t=>ar(t,zm),pb=(t,r)=>Fi(t,t,Pe(),$r(l=>L.serror("The field: "+t+" is forbidden. "+r))),xh=(t,r)=>Fi(t,t,Te(),fo(r)),bb=(t,r)=>Fi(t,t,Te(),mb(r)),Dc=(t,r)=>Fi(t,t,Te(),Rc(r)),tr=t=>Fi(t,t,Pe(),au()),cd=(t,r)=>Fi(t,t,Pe(),r),Lf=t=>cd(t,ng),Ai=t=>cd(t,An),Vm=(t,r)=>cd(t,Mf(r)),Ru=t=>cd(t,zm),Nf=(t,r)=>cd(t,Rc(r)),Bi=(t,r)=>cd(t,fo(r)),Sl=(t,r)=>cd(t,mi(r)),rt=(t,r)=>Fi(t,t,ve(r),au()),Ir=(t,r,l)=>Fi(t,t,ve(r),l),Wm=(t,r)=>Ir(t,r,ng),ti=(t,r)=>Ir(t,r,An),Ji=(t,r,l)=>Ir(t,r,Mf(l)),Ti=(t,r)=>Ir(t,r,iu),sa=(t,r)=>Ir(t,r,zm),Um=(t,r)=>Ir(t,r,lu),yh=(t,r,l)=>Ir(t,r,Rc(l)),N=(t,r,l)=>Ir(t,r,fo(l)),re={generate:t=>{if(!Bo(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const r=[],l={};return wt(t,(h,p)=>{const y=ds(h);if(y.length!==1)throw new Error("one and only one name per case");const S=y[0],R=h[S];if(l[S]!==void 0)throw new Error("duplicate key detected:"+S);if(S==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Bo(R))throw new Error("case arguments must be an array");r.push(S),l[S]=(...I)=>{const H=I.length;if(H!==R.length)throw new Error("Wrong number of arguments to case "+S+". Expected "+R.length+" ("+R+"), got "+H);return{fold:(...K)=>{if(K.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+K.length);return K[p].apply(null,I)},match:K=>{const ie=ds(K);if(r.length!==ie.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+ie.join(","));if(!Xn(r,Ce=>No(ie,Ce)))throw new Error("Not all branches were specified when using match. Specified: "+ie.join(", ")+`
Required: `+r.join(", "));return K[S].apply(null,I)},log:K=>{console.log(K,{constructors:r,constructor:S,params:I})}}}}),l}};re.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const we=t=>{const r=[],l=[];return wt(t,h=>{h.fold(p=>{r.push(p)},p=>{l.push(p)})}),{errors:r,values:l}},je=(t,r)=>{const l={};return $s(t,(h,p)=>{No(r,p)||(l[p]=h)}),l},Pt=(t,r)=>({[t]:r}),on=t=>{const r={};return wt(t,l=>{r[l.key]=l.value}),r},zn=(t,r)=>je(t,r),Po=(t,r)=>Pt(t,r),ts=t=>on(t),Kr=(t,r)=>t.length===0?C.value(r):C.value(me(r,Oe.apply(void 0,t))),br=t=>C.error(Ze(t)),pa=(t,r)=>{const l=we(t);return l.errors.length>0?br(l.errors):Kr(l.values,r)},sc=t=>Bt(t)?t:Je,zc=(t,r,l)=>{let h=t.dom;const p=sc(l);for(;h.parentNode;){h=h.parentNode;const y=Xe.fromDom(h),S=r(y);if(S.isSome())return S;if(p(y))break}return V.none()},ll=(t,r,l)=>{const h=r(t),p=sc(l);return h.orThunk(()=>p(t)?V.none():zc(t,r,p))},ud=(t,r)=>Fs(t.element,r.event.target),Fd={can:ot,abort:Je,run:oe},Bd=t=>{if(!Lr(t,"can")&&!Lr(t,"abort")&&!Lr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Fd,...t}},wh=(t,r)=>(...l)=>ms(t,(h,p)=>h&&r(p).apply(void 0,l),!0),$g=(t,r)=>(...l)=>ms(t,(h,p)=>h||r(p).apply(void 0,l),!1),If=t=>Bt(t)?{can:ot,abort:Je,run:t}:t,Xm=t=>{const r=wh(t,p=>p.can),l=$g(t,p=>p.abort);return{can:r,abort:l,run:(...p)=>{wt(t,y=>{y.run.apply(void 0,p)})}}},pi=ce,Du=pi("touchstart"),Ch=pi("touchmove"),Zs=pi("touchend"),wa=pi("touchcancel"),Na=pi("mousedown"),Xl=pi("mousemove"),Ym=pi("mouseout"),jm=pi("mouseup"),bc=pi("mouseover"),vc=pi("focusin"),NC=pi("focusout"),Mu=pi("keydown"),Ff=pi("keyup"),Hd=pi("input"),Sh=pi("change"),Bf=pi("click"),BT=pi("transitioncancel"),vb=pi("transitionend"),zg=pi("transitionstart"),HT=pi("selectstart"),ci=t=>ce("alloy."+t),c0={tap:ci("tap")},$d=ci("focus"),Hf=ci("blur.post"),xb=ci("paste.post"),zd=ci("receive"),kl=ci("execute"),Vg=ci("focus.item"),u0=c0.tap,Wg=ci("longpress"),cl=ci("sandbox.close"),d0=ci("typeahead.cancel"),h0=ci("system.init"),$T=ci("system.touchmove"),IC=ci("system.touchend"),Ug=ci("system.scroll"),$f=ci("system.resize"),Mc=ci("system.attached"),cu=ci("system.detached"),uu=ci("system.dismissRequested"),yb=ci("system.repositionRequested"),wb=ci("focusmanager.shifted"),Zm=ci("slotcontainer.visibility"),kx=ci("system.external.element.scroll"),FC=ci("change.tab"),BC=ci("dismiss.tab"),Ax=ci("highlight"),Gm=ci("dehighlight"),ws=(t,r)=>{f0(t,t.element,r,{})},Jn=(t,r,l)=>{f0(t,t.element,r,l)},Xg=t=>{ws(t,kl())},g0=(t,r,l)=>{f0(t,r,l,{})},f0=(t,r,l,h)=>{const p={target:r,...h};t.getSystem().triggerEvent(l,r,p)},Tx=(t,r,l,h)=>{const p={...h,target:r};t.getSystem().triggerEvent(l,r,p)},m0=(t,r,l,h)=>{t.getSystem().triggerEvent(l,r,h.event)},Er=t=>ts(t),Ex=(t,r)=>({key:t,value:Bd({abort:r})}),HC=(t,r)=>({key:t,value:Bd({can:r})}),_x=t=>({key:t,value:Bd({run:(r,l)=>{l.event.prevent()}})}),Nt=(t,r)=>({key:t,value:Bd({run:r})}),qm=(t,r,l)=>({key:t,value:Bd({run:(h,p)=>{r.apply(void 0,[h,p].concat(l))}})}),$C=t=>r=>Nt(t,r),zf=t=>r=>({key:t,value:Bd({run:(l,h)=>{ud(l,h)&&r(l,h)}})}),zC=(t,r)=>Nt(t,(l,h)=>{l.getSystem().getByUid(r).each(p=>{m0(p,p.element,t,h)})}),rg=(t,r,l)=>{const h=r.partUids[l];return zC(t,h)},p0=(t,r)=>Nt(t,(l,h)=>{const p=h.event,y=l.getSystem().getByDom(p.target).getOrThunk(()=>ll(p.target,R=>l.getSystem().getByDom(R).toOptional(),Je).getOr(l));r(l,y,h)}),Vf=t=>Nt(t,(r,l)=>{l.cut()}),Cb=t=>Nt(t,(r,l)=>{l.stop()}),Yg=(t,r)=>zf(t)(r),ba=zf(Mc()),kh=zf(cu()),VC=zf(h0()),ag=$C(kl()),Ox=(t,r,l)=>{const h=l.toString(),p=h.indexOf(")")+1,y=h.indexOf("("),S=h.substring(y+1,p-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:Wf(S.slice(0,1).concat(S.slice(3)))}),t},Wf=t=>dt(t,r=>Ea(r,"/*")?r.substring(0,r.length-2):r),Rx=(t,r)=>{const l=t.toString(),h=l.indexOf(")")+1,p=l.indexOf("("),y=l.substring(p+1,h-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:Wf(y)}),t},Dx=(t,r)=>{const l=r.toString(),h=l.indexOf(")")+1,p=l.indexOf("("),y=l.substring(p+1,h-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Wf(y.slice(1))}),t},xc=t=>({classes:Ln(t.classes)?[]:t.classes,attributes:Ln(t.attributes)?{}:t.attributes,styles:Ln(t.styles)?{}:t.styles}),Km=(t,r)=>({...t,attributes:{...t.attributes,...r.attributes},styles:{...t.styles,...r.styles},classes:t.classes.concat(r.classes)}),zT=(t,r,l)=>ag(h=>{l(h,t,r)}),jg=(t,r,l)=>VC((h,p)=>{l(h,t,r)}),VT=(t,r,l,h,p,y)=>{const S=mi(t),R=Bi(r,[Sl("config",t)]);return Sb(S,R,r,l,h,p,y)},Uf=(t,r,l,h,p,y)=>{const S=t,R=Bi(r,[cd("config",t)]);return Sb(S,R,r,l,h,p,y)},b0=(t,r,l)=>Ox((p,...y)=>{const S=[p].concat(y);return p.config({name:ce(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+l)},R=>{const I=Array.prototype.slice.call(S,1);return r.apply(void 0,[p,R.config,R.state].concat(I))})},l,r),WT=t=>({key:t,value:void 0}),Sb=(t,r,l,h,p,y,S)=>{const R=K=>Lr(K,l)?K[l]():V.none(),I=Go(p,(K,ie)=>b0(l,K,ie)),X={...Go(y,(K,ie)=>Rx(K,ie)),...I,revoke:no(WT,l),config:K=>{const ie=Ul(l+"-config",t,K);return{key:l,value:{config:ie,me:X,configAsRaw:Et(()=>Ul(l+"-config",t,K)),initialConfig:K,state:S}}},schema:ce(r),exhibit:(K,ie)=>da(R(K),Yt(h,"exhibit"),(de,Ce)=>Ce(ie,de.config,de.state)).getOrThunk(()=>xc({})),name:ce(l),handlers:K=>R(K).map(ie=>Yt(h,"events").getOr(()=>({}))(ie.config,ie.state)).getOr({})};return X},Vd={init:()=>rc({readState:ce("No State required")})},rc=t=>t,en=t=>ts(t),Jm=mi([Lt("fields"),Lt("name"),rt("active",{}),rt("apis",{}),rt("state",Vd),rt("extra",{})]),ul=t=>{const r=Ul("Creating behaviour: "+t.name,Jm,t);return VT(r.fields,r.name,r.active,r.apis,r.extra,r.state)},Mx=mi([Lt("branchKey"),Lt("branches"),Lt("name"),rt("active",{}),rt("apis",{}),rt("state",Vd),rt("extra",{})]),Px=t=>{const r=Ul("Creating behaviour: "+t.name,Mx,t);return Uf(Ga(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},Lx=ce(void 0),Jr=(t,r)=>{const l=In(t,r);return l===void 0||l===""?[]:l.split(" ")},UT=(t,r,l)=>{const p=Jr(t,r).concat([l]);return kt(t,r,p.join(" ")),!0},Xf=(t,r,l)=>{const h=zo(Jr(t,r),p=>p!==l);return h.length>0?kt(t,r,h.join(" ")):Q(t,r),!1},ig=t=>t.dom.classList!==void 0,Qm=t=>Jr(t,"class"),Nx=(t,r)=>UT(t,"class",r),Ah=(t,r)=>Xf(t,"class",r),WC=(t,r)=>No(Qm(t),r)?Ah(t,r):Nx(t,r),bi=(t,r)=>{ig(t)?t.dom.classList.add(r):Nx(t,r)},v0=t=>{(ig(t)?t.dom.classList:Qm(t)).length===0&&Q(t,"class")},_r=(t,r)=>{ig(t)?t.dom.classList.remove(r):Ah(t,r),v0(t)},Ix=(t,r)=>{const l=ig(t)?t.dom.classList.toggle(r):WC(t,r);return v0(t),l},yc=(t,r)=>ig(t)&&t.dom.classList.contains(r),ep=(t,r)=>{wt(r,l=>{bi(t,l)})},Wd=(t,r)=>{wt(r,l=>{_r(t,l)})},R4=(t,r)=>{wt(r,l=>{Ix(t,l)})},x0=(t,r)=>Xn(r,l=>yc(t,l)),XT=t=>{const r=t.dom.classList,l=new Array(r.length);for(let h=0;h<r.length;h++){const p=r.item(h);p!==null&&(l[h]=p)}return l},UC=t=>ig(t)?XT(t):Qm(t),dd=(t,r,l,h,p)=>{const y=S=>S+"px";return{position:t,left:r.map(y),top:l.map(y),right:h.map(y),bottom:p.map(y)}},Ud=t=>({...t,position:V.some(t.position)}),ac=(t,r)=>{js(t,Ud(r))},tp=t=>(Zr(or(t,"position"),"fixed")?V.none():Ql(t)).orThunk(()=>{const h=Xe.fromTag("span");return ai(t).bind(p=>{Ni(p,h);const y=Ql(h);return wl(h),y})}),y0=t=>tp(t).map(bs).getOrThunk(()=>Gr(0,0)),w0=(t,r)=>{const l=t.element;bi(l,r.transitionClass),_r(l,r.fadeOutClass),bi(l,r.fadeInClass),r.onShow(t)},np=(t,r)=>{const l=t.element;bi(l,r.transitionClass),_r(l,r.fadeInClass),bi(l,r.fadeOutClass),r.onHide(t)},Zg=(t,r)=>t.y<r.bottom&&t.bottom>r.y,Th=(t,r)=>t.y>=r.y,op=(t,r)=>t.bottom<=r.bottom,Gg=(t,r,l)=>({location:"top",leftX:r,topY:l.bounds.y-t.y}),lg=(t,r,l)=>({location:"bottom",leftX:r,bottomY:t.bottom-l.bounds.bottom}),Yf=t=>t.box.x-t.win.x,kb=(t,r,l)=>{const h=r.win,p=r.box,y=Yf(r);return qo(t,S=>{switch(S){case"bottom":return op(p,l.bounds)?V.none():V.some(lg(h,y,l));case"top":return Th(p,l.bounds)?V.none():V.some(Gg(h,y,l));default:return V.none()}}).getOr({location:"no-dock"})},C0=(t,r,l)=>Xn(t,h=>{switch(h){case"bottom":return op(r,l.bounds);case"top":return Th(r,l.bounds)}}),XC=(t,r)=>{const l=r.optScrollEnv.fold(ce(t.bounds.y),h=>h.scrollElmTop+(t.bounds.y-h.currentScrollTop));return Gr(t.bounds.x,l)},Fx=(t,r)=>{const l=r.optScrollEnv.fold(ce(t.y),h=>t.y+h.currentScrollTop-h.scrollElmTop);return Gr(t.x,l)},sp=(t,r,l)=>l.getInitialPos().map(h=>{const p=XC(h,r);return{box:Br(p.left,p.top,pe(t),Xo(t)),location:h.location}}),YC=(t,r,l,h,p)=>{const y=Fx(r,l),S=Br(y.left,y.top,r.width,r.height);h.setInitialPos({style:Da(t),position:nr(t,"position")||"static",bounds:S,location:p.location})},YT=(t,r,l,h,p)=>{h.getInitialPos().fold(()=>YC(t,r,l,h,p),()=>oe)},S0=(t,r,l)=>l.getInitialPos().bind(h=>{var p;switch(l.clearInitialPos(),h.position){case"static":return V.some({morph:"static"});case"absolute":const y=tp(t).getOr(Ge()),S=Hr(y),R=(p=y.dom.scrollTop)!==null&&p!==void 0?p:0;return V.some({morph:"absolute",positionCss:dd("absolute",Yt(h.style,"left").map(I=>r.x-S.x),Yt(h.style,"top").map(I=>r.y-S.y+R),Yt(h.style,"right").map(I=>S.right-r.right),Yt(h.style,"bottom").map(I=>S.bottom-r.bottom))});default:return V.none()}}),Bx=(t,r,l)=>sp(t,r,l).filter(({box:h})=>C0(l.getModes(),h,r)).bind(({box:h})=>S0(t,h,l)),Ab=t=>{switch(t.location){case"top":return V.some({morph:"fixed",positionCss:dd("fixed",V.some(t.leftX),V.some(t.topY),V.none(),V.none())});case"bottom":return V.some({morph:"fixed",positionCss:dd("fixed",V.some(t.leftX),V.none(),V.none(),V.some(t.bottomY))});default:return V.none()}},Hx=(t,r,l)=>{const h=Hr(t),p=La(),y=kb(l.getModes(),{win:p,box:h},r);return y.location==="top"||y.location==="bottom"?(YC(t,h,r,l,y),Ab(y)):V.none()},rp=(t,r,l)=>Bx(t,r,l).orThunk(()=>r.optScrollEnv.bind(h=>sp(t,r,l)).bind(({box:h,location:p})=>{const y=La(),S=Yf({win:y,box:h}),R=p==="top"?Gg(y,S,r):lg(y,S,r);return Ab(R)})),D4=(t,r,l)=>{const h=t.element;return Zr(or(h,"position"),"fixed")?rp(h,r,l):Hx(h,r,l)},M4=(t,r,l)=>{const h=t.element;return sp(h,r,l).bind(({box:p})=>S0(h,p,l))},ap=(t,r,l,h)=>{const p=Hr(t),y=La(),S=Yf({win:y,box:p}),R=h(y,S,r);return R.location==="bottom"||R.location==="top"?(YT(t,p,r,l,R),Ab(R)):V.none()},hd=(t,r,l)=>{l.setDocked(!1),wt(["left","right","top","bottom","position"],h=>Oo(t.element,h)),r.onUndocked(t)},Tb=(t,r,l,h)=>{const p=h.position==="fixed";l.setDocked(p),ac(t.element,h),(p?r.onDocked:r.onUndocked)(t)},jC=(t,r,l,h,p=!1)=>{r.contextual.each(y=>{y.lazyContext(t).each(S=>{const R=Zg(S,h.bounds);R!==l.isVisible()&&(l.setVisible(R),p&&!R?(ep(t.element,[y.fadeOutClass]),y.onHide(t)):(R?w0:np)(t,y))})})},ZC=(t,r,l,h,p)=>{jC(t,r,l,h,!0),Tb(t,r,l,p.positionCss)},GC=(t,r,l,h,p)=>{switch(p.morph){case"static":return hd(t,r,l);case"absolute":return Tb(t,r,l,p.positionCss);case"fixed":return ZC(t,r,l,h,p)}},jf=(t,r,l)=>{const h=r.lazyViewport(t);jC(t,r,l,h),D4(t,h,l).each(p=>{GC(t,r,l,h,p)})},P4=(t,r,l)=>{const h=t.element;l.setDocked(!1);const p=r.lazyViewport(t);M4(t,p,l).each(y=>{switch(y.morph){case"static":{hd(t,r,l);break}case"absolute":{Tb(t,r,l,y.positionCss);break}}}),l.setVisible(!0),r.contextual.each(y=>{Wd(h,[y.fadeInClass,y.fadeOutClass,y.transitionClass]),y.onShow(t)}),Zf(t,r,l)},Zf=(t,r,l)=>{t.getSystem().isConnected()&&jf(t,r,l)},ip=(t,r,l)=>{l.isDocked()&&P4(t,r,l)},qC=t=>(r,l,h)=>{const p=l.lazyViewport(r);ap(r.element,p,h,t).each(S=>{ZC(r,l,h,p,S)})},lp=qC(Gg),jT=qC(lg);var Ll=Object.freeze({__proto__:null,refresh:Zf,reset:ip,isDocked:(t,r,l)=>l.isDocked(),getModes:(t,r,l)=>l.getModes(),setModes:(t,r,l,h)=>l.setModes(h),forceDockToTop:lp,forceDockToBottom:jT}),qg=Object.freeze({__proto__:null,events:(t,r)=>Er([Yg(vb(),(l,h)=>{t.contextual.each(p=>{yc(l.element,p.transitionClass)&&(Wd(l.element,[p.transitionClass,p.fadeInClass]),(r.isVisible()?p.onShown:p.onHidden)(l)),h.stop()})}),Nt(Ug(),(l,h)=>{Zf(l,t,r)}),Nt(kx(),(l,h)=>{Zf(l,t,r)}),Nt($f(),(l,h)=>{ip(l,t,r)})])});const ZT=(t,r)=>{const h=(r||document).createElement("div");return h.innerHTML=t,gi(Xe.fromDom(h))},cg=t=>t.dom.innerHTML,Vc=(t,r)=>{const h=Ra(t).dom,p=Xe.fromDom(h.createDocumentFragment()),y=ZT(r,h);td(p,y),li(t),Ni(t,p)},Xd=t=>{const r=Xe.fromTag("div"),l=Xe.fromDom(t.dom.cloneNode(!0));return Ni(r,l),cg(r)},Gf=(t,r)=>Xe.fromDom(t.dom.cloneNode(r)),QC=t=>Gf(t,!1),Eb=t=>Gf(t,!0),k0=t=>{if(Ci(t))return"#shadow-root";{const r=QC(t);return Xd(r)}},Kg=t=>k0(t),zx="unknown";var Yd;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Yd||(Yd={}));const Eh=to({}),GT=(t,r)=>{const l=[],h=new Date().getTime();return{logEventCut:(p,y,S)=>{l.push({outcome:"cut",target:y,purpose:S})},logEventStopped:(p,y,S)=>{l.push({outcome:"stopped",target:y,purpose:S})},logNoParent:(p,y,S)=>{l.push({outcome:"no-parent",target:y,purpose:S})},logEventNoHandlers:(p,y)=>{l.push({outcome:"no-handlers-left",target:y})},logEventResponse:(p,y,S)=>{l.push({outcome:"response",purpose:S,target:y})},write:()=>{const p=new Date().getTime();No(["mousemove","mouseover","mouseout",h0()],t)||console.log(t,{event:t,time:p-h,target:r.dom,sequence:dt(l,y=>No(["cut","stopped","response"],y.outcome)?"{"+y.purpose+"} "+y.outcome+" at ("+Kg(y.target)+")":y.outcome)})}}},Qi=(t,r,l)=>{switch(Yt(Eh.get(),t).orThunk(()=>{const p=ds(Eh.get());return qo(p,y=>t.indexOf(y)>-1?V.some(Eh.get()[y]):V.none())}).getOr(Yd.NORMAL)){case Yd.NORMAL:return l(qf());case Yd.LOGGING:{const p=GT(t,r),y=l(p);return p.write(),y}case Yd.STOP:return!0}},_b=["alloy/data/Fields","alloy/debugging/Debugging"],Pu=()=>{const t=new Error;if(t.stack!==void 0){const r=t.stack.split(`
`);return We(r,l=>l.indexOf("alloy")>0&&!qs(_b,h=>l.indexOf(h)>-1)).getOr(zx)}else return zx},A0={logEventCut:oe,logEventStopped:oe,logNoParent:oe,logEventNoHandlers:oe,logEventResponse:oe,write:oe},Vx=(t,r,l)=>Qi(t,r,l),qf=ce(A0),Jg=ce([Lt("menu"),Lt("selectedMenu")]),gd=ce([Lt("item"),Lt("selectedItem")]);ce(fo(gd().concat(Jg())));const Lu=ce(fo(gd())),e2=xh("initSize",[Lt("numColumns"),Lt("numRows")]),qT=()=>ar("markers",Lu()),_h=()=>xh("markers",[Lt("backgroundMenu")].concat(Jg()).concat(gd())),ug=t=>xh("markers",dt(t,Lt)),T0=(t,r,l)=>(Pu(),Fi(r,r,l,Df(h=>C.value((...p)=>h.apply(void 0,p))))),Ws=t=>T0("onHandler",t,ve(oe)),Yl=t=>T0("onKeyboardHandler",t,ve(V.none)),Kf=t=>T0("onHandler",t,Te()),cp=t=>T0("onKeyboardHandler",t,Te()),ra=(t,r)=>rr(t,ce(r)),Jf=t=>rr(t,Gt),dg=ce(e2);var t2=[Bi("contextual",[ki("fadeInClass"),ki("fadeOutClass"),ki("transitionClass"),$c("lazyContext"),Ws("onShow"),Ws("onShown"),Ws("onHide"),Ws("onHidden")]),sa("lazyViewport",()=>({bounds:La(),optScrollEnv:V.none()})),yh("modes",["top","bottom"],An),Ws("onDocked"),Ws("onUndocked")],n2=Object.freeze({__proto__:null,init:t=>{const r=to(!1),l=to(!0),h=zs(),p=to(t.modes),y=()=>`docked:  ${r.get()}, visible: ${l.get()}, modes: ${p.get().join(",")}`;return rc({isDocked:r.get,setDocked:r.set,getInitialPos:h.get,setInitialPos:h.set,clearInitialPos:h.clear,isVisible:l.get,setVisible:l.set,getModes:p.get,setModes:p.set,readState:y})}});const aa=ul({fields:t2,name:"docking",active:qg,apis:Ll,state:n2}),Ob=(t,r,l)=>Fs(r,t.element)&&!Fs(r,l),JT=Er([HC($d(),(t,r)=>{const l=r.event,h=l.originator,p=l.target;return Ob(t,h,p)?(console.warn($d()+` did not get interpreted by the desired target. 
Originator: `+Kg(h)+`
Target: `+Kg(p)+`
Check the `+$d()+" event handlers"),!1):!0})]);var o2=Object.freeze({__proto__:null,events:JT});const Qf=(t,r,l,h)=>{const p=t+r;return p>h?l:p<l?h:p},fd=(t,r,l)=>Math.min(Math.max(t,r),l),Rb=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let hg=0;const Fn=t=>{const l=new Date().getTime(),h=Math.floor(Rb()*1e9);return hg++,t+"_"+h+hg+String(l)},s2=ce("alloy-id-"),E0=ce("data-alloy-id"),r2=s2(),a2=E0(),Wx=(t,r)=>{const l=Fn(r2+t);return Ux(r,l),l},Ux=(t,r)=>{Object.defineProperty(t.dom,a2,{value:r,writable:!0})},up=t=>{const r=so(t)?t.dom[a2]:null;return V.from(r)},Db=t=>Fn(t),em=Gt,_0=t=>{const r=p=>`The component must be in a context to execute: ${p}`+(t?`
`+Kg(t().element)+" is not in context.":""),l=p=>()=>{throw new Error(r(p))},h=p=>()=>{console.warn(r(p))};return{debugInfo:ce("fake"),triggerEvent:h("triggerEvent"),triggerFocus:h("triggerFocus"),triggerEscape:h("triggerEscape"),broadcast:h("broadcast"),broadcastOn:h("broadcastOn"),broadcastEvent:h("broadcastEvent"),build:l("build"),buildOrPatch:l("buildOrPatch"),addToWorld:l("addToWorld"),removeFromWorld:l("removeFromWorld"),addToGui:l("addToGui"),removeFromGui:l("removeFromGui"),getByUid:l("getByUid"),getByDom:l("getByDom"),isConnected:Je}},dp=_0(),O0=Fn("alloy-premade"),md=t=>(Object.defineProperty(t.element.dom,O0,{value:t.uid,writable:!0}),Po(O0,t)),QT=t=>os(t.dom,O0),R0=t=>Yt(t,O0),D0=t=>Dx((r,...l)=>t(r.getApis(),r,...l),t),eE=(t,r)=>{const l=dt(r,p=>Bi(p.name(),[Lt("config"),rt("state",Vd)])),h=ka("component.behaviours",fo(l),t.behaviours).fold(p=>{throw new Error(sg(p)+`
Complete spec:
`+JSON.stringify(t,null,2))},Gt);return{list:r,data:Go(h,p=>{const y=p.map(S=>({config:S.config,state:S.state.init(S.config)}));return ce(y)})}},tE=t=>t.list,i2=t=>t.data,Mb=(t,r)=>{const l={};return $s(t,(h,p)=>{$s(h,(y,S)=>{const R=Yt(l,S).getOr([]);l[S]=R.concat([r(p,y)])})}),l},l2=(t,r,l,h)=>{const p={...r};wt(l,X=>{p[X.name()]=X.exhibit(t,h)});const y=Mb(p,(X,K)=>({name:X,modification:K})),S=X=>Un(X,(K,ie)=>({...ie.modification,...K}),{}),R=Un(y.classes,(X,K)=>K.modification.concat(X),[]),I=S(y.attributes),H=S(y.styles);return xc({classes:R,attributes:I,styles:H})},Xx=(t,r,l,h)=>{try{const p=Cr(l,(y,S)=>{const R=y[r],I=S[r],H=h.indexOf(R),X=h.indexOf(I);if(H===-1)throw new Error("The ordering for "+t+" does not have an entry for "+R+`.
Order specified: `+JSON.stringify(h,null,2));if(X===-1)throw new Error("The ordering for "+t+" does not have an entry for "+I+`.
Order specified: `+JSON.stringify(h,null,2));return H<X?-1:X<H?1:0});return C.value(p)}catch(p){return C.error([p])}},nE=(t,r)=>({handler:t,purpose:r}),Pb=(t,r)=>({cHandler:t,purpose:r}),hp=(t,r)=>Pb(no.apply(void 0,[t.handler].concat(r)),t.purpose),Qg=t=>t.cHandler,M0=(t,r)=>({name:t,handler:r}),Yx=(t,r)=>{const l={};return wt(t,h=>{l[h.name()]=h.handlers(r)}),l},P0=(t,r,l)=>{const h={...l,...Yx(r,t)};return Mb(h,M0)},jx=(t,r,l,h)=>{const p=P0(t,l,h);return Wc(p,r)},Zx=t=>{const r=If(t);return(l,h,...p)=>{const y=[l,h].concat(p);r.abort.apply(void 0,y)?h.stop():r.can.apply(void 0,y)&&r.run.apply(void 0,y)}},Gx=(t,r)=>C.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(dt(r,l=>l.name),null,2)]),c2=(t,r,l)=>{const h=r[l];return h?Xx("Event: "+l,"name",t,h).map(p=>{const y=dt(p,S=>S.handler);return Xm(y)}):Gx(l,t)},Wc=(t,r)=>{const l=yi(t,(h,p)=>(h.length===1?C.value(h[0].handler):c2(h,r,p)).map(S=>{const R=Zx(S),I=h.length>1?zo(r[p],H=>qs(h,X=>X.name===H)).join(" > "):h[0].name;return Po(p,nE(R,I))}));return pa(l,{})},tm="alloy.base.behaviour",u2=fo([Fi("dom","dom",Te(),fo([Lt("tag"),rt("styles",{}),rt("classes",[]),rt("attributes",{}),tr("value"),tr("innerHtml")])),Lt("components"),Lt("uid"),rt("events",{}),rt("apis",{}),Fi("eventOrder","eventOrder",P({[kl()]:["disabling",tm,"toggling","typeaheadevents"],[$d()]:[tm,"focusing","keying"],[h0()]:[tm,"disabling","toggling","representing","tooltipping"],[Hd()]:[tm,"representing","streaming","invalidating"],[cu()]:[tm,"representing","item-events","toolbar-button-events","tooltipping"],[Na()]:["focusing",tm,"item-type-events"],[Du()]:["focusing",tm,"item-type-events"],[bc()]:["item-type-events","tooltipping"],[zd()]:["receiving","reflecting","tooltipping"]}),au()),tr("domModification")]),ef=t=>ka("custom.definition",u2,t),nm=t=>({...t.dom,uid:t.uid,domChildren:dt(t.components,r=>r.element)}),qx=t=>t.domModification.fold(()=>xc({}),xc),At=t=>t.events,pd=t=>t.dom.value,om=(t,r)=>{if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},oE=(t,r,l)=>ha(t,r).map(p=>{if(l.exists(S=>!Fs(S,p))){const S=l.map(Ks).getOr("span"),R=Xe.fromTag(S);return mc(p,R),R}else return p}),Lb=(t,r,l)=>{l.fold(()=>Ni(t,r),h=>{Fs(h,r)||(mc(h,r),wl(h))})},Nu=(t,r,l)=>{const h=dt(r,l),p=gi(t);return wt(p.slice(h.length),wl),h},gp=(t,r,l,h)=>{const p=ha(t,r),y=h(l,p),S=oE(t,r,p);return Lb(t,y.element,S),y},d2=(t,r,l)=>Nu(t,r,(h,p)=>gp(t,p,h,l)),h2=(t,r)=>Nu(t,r,(l,h)=>{const p=ha(t,h);return Lb(t,l,p),l}),jl=(t,r)=>{const l=ds(t),h=ds(r),p=Cn(h,l),y=oo(t,(S,R)=>!os(r,R)||S!==r[R]).t;return{toRemove:p,toSet:y}},L0=(t,r)=>{const{class:l,style:h,...p}=xe(r),{toSet:y,toRemove:S}=jl(t.attributes,p),R=()=>{wt(S,Qe=>Q(r,Qe)),Ps(r,y)},I=Da(r),{toSet:H,toRemove:X}=jl(t.styles,I),K=()=>{wt(X,Qe=>Oo(r,Qe)),jo(r,H)},ie=UC(r),de=Cn(ie,t.classes),Ce=Cn(t.classes,ie),_e=()=>{ep(r,Ce),Wd(r,de)},et=Qe=>{Vc(r,Qe)},Fe=()=>{const Qe=t.domChildren;h2(r,Qe)},Ke=()=>{const Qe=r,yt=t.value.getOrUndefined();yt!==pd(Qe)&&om(Qe,yt??"")};return R(),_e(),K(),t.innerHtml.fold(Fe,et),Ke(),r},g2=t=>{const r=Xe.fromTag(t.tag);Ps(r,t.attributes),ep(r,t.classes),jo(r,t.styles),t.innerHtml.each(h=>Vc(r,h));const l=t.domChildren;return td(r,l),t.value.each(h=>{om(r,h)}),r},sE=(t,r)=>{try{const l=L0(t,r);return V.some(l)}catch{return V.none()}},f2=t=>t.innerHtml.isSome()&&t.domChildren.length>0,rE=(t,r)=>{const l=p=>Ks(p)===t.tag&&!f2(t)&&!QT(p),h=r.filter(l).bind(p=>sE(t,p)).getOrThunk(()=>g2(t));return Ux(h,t.uid),h},m2=t=>{const r=Yt(t,"behaviours").getOr({});return De(ds(r),l=>{const h=r[l];return vn(h)?[h.me]:[]})},aE=(t,r)=>eE(t,r),iE=t=>{const r=m2(t);return aE(t,r)},p2=(t,r,l)=>{const h=nm(t),p=qx(t),y={"alloy.base.modification":p},S=r.length>0?l2(l,y,r,h):p;return Km(h,S)},fp=(t,r,l)=>{const h={"alloy.base.behaviour":At(t)};return jx(l,t.eventOrder,r,h).getOrDie()},lE=(t,r)=>{const l=()=>Qe,h=to(dp),p=qt(ef(t)),y=iE(t),S=tE(y),R=i2(y),I=p2(p,S,R),H=rE(I,r),X=fp(p,S,R),K=to(p.components),ie=yt=>{h.set(yt)},de=()=>{h.set(_0(l))},Ce=()=>{const yt=gi(H),St=De(yt,un=>h.get().getByDom(un).fold(()=>[],Vo));K.set(St)},_e=yt=>{const St=R;return(Bt(St[yt.name()])?St[yt.name()]:()=>{throw new Error("Could not find "+yt.name()+" in "+JSON.stringify(t,null,2))})()},et=yt=>Bt(R[yt.name()]),Fe=()=>p.apis,Ke=yt=>R[yt]().map(St=>St.state.readState()).getOr("not enabled"),Qe={uid:t.uid,getSystem:h.get,config:_e,hasConfigured:et,spec:t,readState:Ke,getApis:Fe,connect:ie,disconnect:de,element:H,syncComponents:Ce,components:K.get,events:X};return Qe},b2=(t,r)=>{const l=Yt(t,"components").getOr([]);return r.fold(()=>dt(l,el),h=>dt(l,(p,y)=>Jx(p,ha(h,y))))},cE=(t,r)=>{const{events:l,...h}=em(t),p=b2(h,r),y={...h,events:{...o2,...l},components:p};return C.value(lE(y,r))},Ia=t=>{const r=Xe.fromText(t);return Kx({element:r})},Kx=t=>{const r=Ul("external.component",mi([Lt("element"),tr("uid")]),t),l=to(_0()),h=R=>{l.set(R)},p=()=>{l.set(_0(()=>S))},y=r.uid.getOrThunk(()=>Db("external"));Ux(r.element,y);const S={uid:y,getSystem:l.get,config:V.none,hasConfigured:Je,connect:h,disconnect:p,getApis:()=>({}),element:r.element,spec:t,readState:ce("No state"),syncComponents:oe,components:ce([]),events:{}};return md(S)},v2=Db,x2=t=>os(t,"uid"),Jx=(t,r)=>R0(t).getOrThunk(()=>{const l=x2(t)?t:{uid:v2(""),...t};return cE(l,r).getOrDie()}),el=t=>Jx(t,V.none()),du=md;var y2=(t,r,l,h,p)=>t(l,h)?V.some(l):Bt(p)&&p(l)?V.none():r(l,h,p);const Qx=(t,r,l)=>{let h=t.dom;const p=Bt(l)?l:Je;for(;h.parentNode;){h=h.parentNode;const y=Xe.fromDom(h);if(r(y))return V.some(y);if(p(y))break}return V.none()},ey=(t,r,l)=>y2((p,y)=>y(p),Qx,t,r,l),uE=(t,r)=>{const l=t.dom;return l.parentNode?N0(Xe.fromDom(l.parentNode),h=>!Fs(t,h)&&r(h)):V.none()},N0=(t,r)=>{const l=p=>r(Xe.fromDom(p));return We(t.dom.childNodes,l).map(Xe.fromDom)},w2=(t,r)=>{const l=h=>{for(let p=0;p<h.childNodes.length;p++){const y=Xe.fromDom(h.childNodes[p]);if(r(y))return V.some(y);const S=l(h.childNodes[p]);if(S.isSome())return S}return V.none()};return l(t.dom)},Nb=(t,r,l)=>ey(t,r,l).isSome(),C2=t=>ji(t),Hi=(t,r,l)=>Qx(t,h=>ea(h,r),l),dE=(t,r)=>uE(t,l=>ea(l,r)),Iu=(t,r)=>N0(t,l=>ea(l,r)),Ca=(t,r)=>ji(r,t),Oh=(t,r,l)=>y2((p,y)=>ea(p,y),Hi,t,r,l),mp="aria-controls",ty=t=>ey(t,l=>{if(!so(l))return!1;const h=In(l,"id");return h!==void 0&&h.indexOf(mp)>-1}).bind(l=>{const h=In(l,"id"),p=ga(l);return Ca(p,`[${mp}="${h}"]`)}),Ib=()=>{const t=Fn(mp);return{id:t,link:h=>{kt(h,mp,t)},unlink:h=>{Q(h,mp)}}},S2=(t,r)=>ty(r).exists(l=>tf(t,l)),tf=(t,r)=>Nb(r,l=>Fs(l,t.element),Je)||S2(t,r),Nl=(t,r,l,h,p,y,S,R=!1)=>({x:t,y:r,bubble:l,direction:h,placement:p,restriction:y,label:`${S}-${p}`,alwaysFit:R}),Rh=re.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),k2=(t,r,l,h,p,y,S,R,I)=>t.fold(r,l,h,p,y,S,R,I),hE=(t,r,l,h)=>t.fold(r,r,h,h,r,h,l,l),ny=(t,r,l,h)=>t.fold(r,h,r,h,l,l,r,h),I0=Rh.southeast,oy=Rh.southwest,sy=Rh.northeast,F0=Rh.northwest,Bn=Rh.south,Fb=Rh.north,ry=Rh.east,A2=Rh.west,gE=(t,r)=>{switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Il=(t,r)=>Qs(["left","right","top","bottom"],l=>Yt(r,l).map(h=>gE(t,h))),T2=(t,r,l)=>{const h=(I,H)=>r[I].map(X=>{const K=I==="top"||I==="bottom",ie=K?l.top:l.left,Ce=(I==="left"||I==="top"?Math.max:Math.min)(X,H)+ie;return K?fd(Ce,t.y,t.bottom):fd(Ce,t.x,t.right)}).getOr(H),p=h("left",t.x),y=h("top",t.y),S=h("right",t.right),R=h("bottom",t.bottom);return Br(p,y,S-p,R-y)},nf="layout",E2=t=>t.x,ay=(t,r)=>t.x+t.width/2-r.width/2,_2=(t,r)=>t.x+t.width-r.width,Fl=(t,r)=>t.y-r.height,of=t=>t.y+t.height,iy=(t,r)=>t.y+t.height/2-r.height/2,sm=t=>t.x+t.width,fE=(t,r)=>t.x-r.width,$i=(t,r,l)=>Nl(E2(t),of(t),l.southeast(),I0(),"southeast",Il(t,{left:1,top:3}),nf),zi=(t,r,l)=>Nl(_2(t,r),of(t),l.southwest(),oy(),"southwest",Il(t,{right:0,top:3}),nf),Al=(t,r,l)=>Nl(E2(t),Fl(t,r),l.northeast(),sy(),"northeast",Il(t,{left:1,bottom:2}),nf),Vi=(t,r,l)=>Nl(_2(t,r),Fl(t,r),l.northwest(),F0(),"northwest",Il(t,{right:0,bottom:2}),nf),yr=(t,r,l)=>Nl(ay(t,r),Fl(t,r),l.north(),Fb(),"north",Il(t,{bottom:2}),nf),Ei=(t,r,l)=>Nl(ay(t,r),of(t),l.south(),Bn(),"south",Il(t,{top:3}),nf),B0=(t,r,l)=>Nl(sm(t),iy(t,r),l.east(),ry(),"east",Il(t,{left:0}),nf),ly=(t,r,l)=>Nl(fE(t,r),iy(t,r),l.west(),A2(),"west",Il(t,{right:1}),nf),cy=()=>[$i,zi,Al,Vi,Ei,yr,B0,ly],uy=()=>[zi,$i,Vi,Al,Ei,yr,B0,ly],O2=()=>[Al,Vi,$i,zi,yr,Ei],R2=()=>[Vi,Al,zi,$i,yr,Ei],Bb=()=>[$i,zi,Al,Vi,Ei,yr],H0=()=>[zi,$i,Vi,Al,Ei,yr],Hb=(t,r)=>r.universal?t:zo(t,l=>No(r.channels,l));var N4=Object.freeze({__proto__:null,events:t=>Er([Nt(zd(),(r,l)=>{const h=t.channels,p=ds(h),y=l,S=Hb(p,y);wt(S,R=>{const I=h[R],H=I.schema,X=Ul("channel["+R+`] data
Receiver: `+Kg(r.element),H,y.data);I.onReceive(r,X)})})])}),rm=[ar("channels",Ou(C.value,mi([Kf("onReceive"),rt("schema",au())])))];const Uc=ul({fields:rm,name:"receiving",active:N4});var pE=Object.freeze({__proto__:null,exhibit:(t,r)=>xc({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const Fu=(t,r=!1)=>t.dom.focus({preventScroll:r}),pp=t=>t.dom.blur(),am=t=>{const r=ga(t).dom;return t.dom===r.activeElement},Dh=(t=Vl())=>V.from(t.dom.activeElement).map(Xe.fromDom),ic=t=>Dh(ga(t)).filter(r=>t.dom.contains(r.dom)),dy=(t,r)=>{const l=ga(r),h=Dh(l).bind(y=>{const S=R=>Fs(y,R);return S(r)?V.some(r):w2(r,S)}),p=t(r);return h.each(y=>{Dh(l).filter(S=>Fs(S,y)).fold(()=>{Fu(y)},oe)}),p},sf=re.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),M2=(t,r,l,h,p,y)=>{const S=r.rect,R=S.x-l,I=S.y-h,H=S.width,X=S.height,K=p-(R+H),ie=y-(I+X),de=V.some(R),Ce=V.some(I),_e=V.some(K),et=V.some(ie),Fe=V.none();return k2(r.direction,()=>dd(t,de,Ce,Fe,Fe),()=>dd(t,Fe,Ce,_e,Fe),()=>dd(t,de,Fe,Fe,et),()=>dd(t,Fe,Fe,_e,et),()=>dd(t,de,Ce,Fe,Fe),()=>dd(t,de,Fe,Fe,et),()=>dd(t,de,Ce,Fe,Fe),()=>dd(t,Fe,Ce,_e,Fe))},$0=(t,r)=>t.fold(()=>{const l=r.rect;return dd("absolute",V.some(l.x),V.some(l.y),V.none(),V.none())},(l,h,p,y)=>M2("absolute",r,l,h,p,y),(l,h,p,y)=>M2("fixed",r,l,h,p,y)),hy=(t,r)=>{const l=no(sd,r),h=t.fold(l,l,()=>{const S=Ki();return sd(r).translate(-S.left,-S.top)}),p=Se(r),y=xl(r);return Br(h.left,h.top,p,y)},$b=(t,r)=>r.fold(()=>t.fold(La,La,Br),l=>t.fold(ce(l),ce(l),()=>{const h=z0(t,l.x,l.y);return Br(h.left,h.top,l.width,l.height)})),z0=(t,r,l)=>{const h=Gr(r,l),p=()=>{const y=Ki();return h.translate(-y.left,-y.top)};return t.fold(ce(h),ce(h),p)},P2=(t,r,l,h)=>t.fold(r,l,h);sf.none;const L2=sf.relative,N2=sf.fixed,zb=(t,r)=>({anchorBox:t,origin:r}),im=(t,r)=>zb(t,r),Vb="data-alloy-placement",bE=(t,r)=>{kt(t,Vb,r)},gy=t=>_o(t,Vb),vE=t=>Q(t,Vb),V0=re.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),xE=(t,r)=>{const{x:l,y:h,right:p,bottom:y}=r,{x:S,y:R,right:I,bottom:H,width:X,height:K}=t,ie=S>=l&&S<=p,de=R>=h&&R<=y,Ce=ie&&de,_e=I<=p&&I>=l,et=H<=y&&H>=h,Fe=_e&&et,Ke=Math.min(X,S>=l?p-S:I-l),Qe=Math.min(K,R>=h?y-R:H-h);return{originInBounds:Ce,sizeInBounds:Fe,visibleW:Ke,visibleH:Qe}},I2=(t,r)=>{const{x:l,y:h,right:p,bottom:y}=r,{x:S,y:R,width:I,height:H}=t,X=Math.max(l,p-I),K=Math.max(h,y-H),ie=fd(S,l,X),de=fd(R,h,K),Ce=Math.min(ie+I,p)-ie,_e=Math.min(de+H,y)-de;return Br(ie,de,Ce,_e)},yE=(t,r,l)=>{const h=ce(r.bottom-l.y),p=ce(l.bottom-r.y),y=hE(t,p,p,h),S=ce(r.right-l.x),R=ce(l.right-r.x);return{maxWidth:ny(t,R,R,S),maxHeight:y}},F2=(t,r,l,h)=>{const p=t.bubble,y=p.offset,S=T2(h,t.restriction,y),R=t.x+y.left,I=t.y+y.top,H=Br(R,I,r,l),{originInBounds:X,sizeInBounds:K,visibleW:ie,visibleH:de}=xE(H,S),Ce=X&&K,_e=Ce?H:I2(H,S),et=_e.width>0&&_e.height>0,{maxWidth:Fe,maxHeight:Ke}=yE(t.direction,_e,h),Qe={rect:_e,maxHeight:Ke,maxWidth:Fe,direction:t.direction,placement:t.placement,classes:{on:p.classesOn,off:p.classesOff},layout:t.label,testY:I};return Ce||t.alwaysFit?V0.fit(Qe):V0.nofit(Qe,ie,de,et)},Wb=(t,r,l,h,p,y)=>{const S=h.width,R=h.height,I=(X,K,ie,de,Ce)=>{const _e=X(l,h,p,t,y),et=F2(_e,S,R,y);return et.fold(ce(et),(Fe,Ke,Qe,yt)=>(Ce===yt?Qe>de||Ke>ie:!Ce&&yt)?et:V0.nofit(K,ie,de,Ce))};return ms(r,(X,K)=>{const ie=no(I,K);return X.fold(ce(X),ie)},V0.nofit({rect:l,maxHeight:h.height,maxWidth:h.width,direction:I0(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:l.y},-1,-1,!1)).fold(Gt,Gt)},B2=ot,wc=(t,r,l)=>Ju(t,r,B2,l),fy=(t,r,l)=>Za(t,r,B2,l),H2=fi,my=["top","bottom","right","left"],Ub="data-alloy-transition-timer",wE=(t,r)=>x0(t,r.classes),CE=(t,r,l)=>l.exists(h=>{const p=t.mode;return p==="all"?!0:h[p]!==r[p]}),SE=(t,r)=>{const l=h=>parseFloat(h).toFixed(3);return uo(r,(h,p)=>{const y=t[p].map(l),S=h.map(l);return!Fa(y,S)}).isSome()},W0=t=>{const r=y=>{const R=nr(t,y).split(/\s*,\s*/);return zo(R,Ne)},l=y=>{if(Ot(y)&&/^[\d.]+/.test(y)){const S=parseFloat(y);return Ea(y,"ms")?S:S*1e3}else return 0},h=r("transition-delay"),p=r("transition-duration");return ms(p,(y,S,R)=>{const I=l(h[R])+l(S);return Math.max(y,I)},0)},$2=(t,r)=>{const l=Pl(),h=Pl();let p;const y=H=>{var X;const K=(X=H.raw.pseudoElement)!==null&&X!==void 0?X:"";return Fs(H.target,t)&&Re(K)&&No(my,H.raw.propertyName)},S=H=>{if(Lo(H)||y(H)){l.clear(),h.clear();const X=H==null?void 0:H.raw.type;(Lo(X)||X===vb())&&(clearTimeout(p),Q(t,Ub),Wd(t,r.classes))}},R=wc(t,zg(),H=>{y(H)&&(R.unbind(),l.set(wc(t,vb(),S)),h.set(wc(t,BT(),S)))}),I=W0(t);requestAnimationFrame(()=>{p=setTimeout(S,I+17),kt(t,Ub,p)})},py=(t,r)=>{ep(t,r.classes),_o(t,Ub).each(l=>{clearTimeout(parseInt(l,10)),Q(t,Ub)}),$2(t,r)},by=(t,r,l,h,p,y)=>{const S=CE(h,p,y);if(S||wE(t,h)){Mt(t,"position",l.position);const R=hy(r,t),I=$0(r,{...p,rect:R}),H=Qs(my,X=>I[X]);SE(l,H)&&(js(t,H),S&&py(t,h),Si(t))}else Wd(t,h.classes)},Xb=t=>({width:Se(t),height:xl(t)}),vy=(t,r,l,h)=>{Oo(r,"max-height"),Oo(r,"max-width");const p=Xb(r);return Wb(r,h.preference,t,p,l,h.bounds)},z2=(t,r)=>{const l=r.classes;Wd(t,l.off),ep(t,l.on)},V2=(t,r,l)=>{const h=l.maxHeightFunction;h(t,r.maxHeight)},W2=(t,r,l)=>{const h=l.maxWidthFunction;h(t,r.maxWidth)},kE=(t,r,l)=>{const h=$0(l.origin,r);l.transition.each(p=>{by(t,l.origin,h,p,r,l.lastPlacement)}),ac(t,h)},U2=(t,r)=>{bE(t,r.placement)},xy=(t,r)=>{yl(t,Math.floor(r))},X2=ce((t,r)=>{xy(t,r),jo(t,{"overflow-x":"hidden","overflow-y":"auto"})}),rf=ce((t,r)=>{xy(t,r)}),Y2=(t,r,l)=>t[r]===void 0?l:t[r],AE=(t,r,l,h,p,y,S,R)=>{const I=Y2(S,"maxHeightFunction",X2()),H=Y2(S,"maxWidthFunction",oe),X=t.anchorBox,K=t.origin,ie={bounds:$b(K,y),origin:K,preference:h,maxHeightFunction:I,maxWidthFunction:H,lastPlacement:p,transition:R};return TE(X,r,l,ie)},TE=(t,r,l,h)=>{const p=vy(t,r,l,h);return kE(r,p,h),U2(r,p),z2(r,p),V2(r,p,h),W2(r,p,h),{layout:p.layout,placement:p.placement}},U0=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],bd=(t,r,l,h=1)=>{const p=t*h,y=r*h,S=I=>Yt(l,I).getOr([]),R=(I,H,X)=>{const K=Cn(U0,X);return{offset:Gr(I,H),classesOn:De(X,S),classesOff:De(K,S)}};return{southeast:()=>R(-t,r,["top","alignLeft"]),southwest:()=>R(t,r,["top","alignRight"]),south:()=>R(-t/2,r,["top","alignCentre"]),northeast:()=>R(-t,-r,["bottom","alignLeft"]),northwest:()=>R(t,-r,["bottom","alignRight"]),north:()=>R(-t/2,-r,["bottom","alignCentre"]),east:()=>R(t,-r/2,["valignCentre","left"]),west:()=>R(-t,-r/2,["valignCentre","right"]),insetNortheast:()=>R(p,y,["top","alignLeft","inset"]),insetNorthwest:()=>R(-p,y,["top","alignRight","inset"]),insetNorth:()=>R(-p/2,y,["top","alignCentre","inset"]),insetSoutheast:()=>R(p,-y,["bottom","alignLeft","inset"]),insetSouthwest:()=>R(-p,-y,["bottom","alignRight","inset"]),insetSouth:()=>R(-p/2,-y,["bottom","alignCentre","inset"]),insetEast:()=>R(-p,-y/2,["valignCentre","right","inset"]),insetWest:()=>R(p,-y/2,["valignCentre","left","inset"])}},X0=()=>bd(0,0,{}),Y0=Gt,yy=(t,r)=>l=>j2(l)==="rtl"?r:t,j2=t=>nr(t,"direction")==="rtl"?"rtl":"ltr";var _i;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(_i||(_i={}));const Z2="data-alloy-vertical-dir",bp=t=>Nb(t,r=>so(r)&&In(r,"data-alloy-vertical-dir")===_i.BottomToTop),af=()=>Bi("layouts",[Lt("onLtr"),Lt("onRtl"),tr("onBottomLtr"),tr("onBottomRtl")]),j0=(t,r,l,h,p,y,S)=>{const R=S.map(bp).getOr(!1),I=r.layouts.map(de=>de.onLtr(t)),H=r.layouts.map(de=>de.onRtl(t)),X=R?r.layouts.bind(de=>de.onBottomLtr.map(Ce=>Ce(t))).or(I).getOr(p):I.getOr(l),K=R?r.layouts.bind(de=>de.onBottomRtl.map(Ce=>Ce(t))).or(H).getOr(y):H.getOr(h);return yy(X,K)(t)},G2=(t,r,l)=>{const h=r.hotspot,p=hy(l,h.element),y=j0(t.element,r,Bb(),H0(),O2(),R2(),V.some(r.hotspot.element));return V.some(Y0({anchorBox:p,bubble:r.bubble.getOr(X0()),overrides:r.overrides,layouts:y}))};var EE=[Lt("hotspot"),tr("bubble"),rt("overrides",{}),af(),ra("placement",G2)];const _E=(t,r,l)=>{const h=z0(l,r.x,r.y),p=Br(h.left,h.top,r.width,r.height),y=j0(t.element,r,cy(),uy(),cy(),uy(),V.none());return V.some(Y0({anchorBox:p,bubble:r.bubble,overrides:r.overrides,layouts:y}))};var q2=[Lt("x"),Lt("y"),rt("height",0),rt("width",0),rt("bubble",X0()),rt("overrides",{}),af(),ra("placement",_E)];const Yb=re.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),wy=t=>t.fold(Gt,(r,l,h)=>r.translate(-l,-h)),OE=t=>t.fold(Gt,Gt),vp=t=>ms(t,(r,l)=>r.translate(l.left,l.top),Gr(0,0)),K2=t=>{const r=dt(t,wy);return vp(r)},J2=t=>{const r=dt(t,OE);return vp(r)},Q2=Yb.screen,Cy=Yb.absolute,Z0=(t,r,l)=>{const h=Qa(l.root).dom,p=y=>{const S=Ra(y),R=Ra(t.element);return Fs(S,R)};return V.from(h.frameElement).map(Xe.fromDom).filter(p).map(bs)},eS=(t,r,l)=>{const h=Ra(t.element),p=Ki(h),y=Z0(t,r,l).getOr(p);return Cy(y,p.left,p.top)},lf=(t,r,l,h)=>{const p=Q2(Gr(t,r));return V.some(ru(p,l,h))},RE=(t,r,l,h,p)=>t.map(y=>{const S=[r,y.point],R=P2(h,()=>J2(S),()=>J2(S),()=>K2(S)),I=Ld(R.left,R.top,y.width,y.height),H=l.showAbove?O2():Bb(),X=l.showAbove?R2():H0(),K=j0(p,l,H,X,H,X,V.none());return Y0({anchorBox:I,bubble:l.bubble.getOr(X0()),overrides:l.overrides,layouts:K})}),tS=(t,r,l)=>{const h=eS(t,l,r);return r.node.filter(Me).bind(p=>{const y=p.dom.getBoundingClientRect(),S=lf(y.left,y.top,y.width,y.height),R=r.node.getOr(t.element);return RE(S,h,r,l,R)})};var nS=[Lt("node"),Lt("root"),tr("bubble"),af(),rt("overrides",{}),rt("showAbove",!1),ra("placement",tS)];const G0="\uFEFF",DE="",q0={create:(t,r,l,h)=>({start:t,soffset:r,finish:l,foffset:h})},jb=re.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),oS=(t,r,l,h)=>t.fold(r,l,h),xp=t=>t.fold(Gt,Gt,Gt),yp=jb.before,ME=jb.on,sS=jb.after,PE={before:yp,on:ME,after:sS,cata:oS,getStart:xp},cm=re.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wp=t=>cm.exact(t.start,t.soffset,t.finish,t.foffset),Sy=t=>t.match({domRange:r=>Xe.fromDom(r.startContainer),relative:(r,l)=>PE.getStart(r),exact:(r,l,h,p)=>r}),ky=cm.domRange,LE=cm.relative,Ay=cm.exact,rS=t=>{const r=Sy(t);return Qa(r)},aS=q0.create,Cp={domRange:ky,relative:LE,exact:Ay,exactFromRange:wp,getWin:rS,range:aS},iS=(t,r)=>{r.fold(l=>{t.setStartBefore(l.dom)},(l,h)=>{t.setStart(l.dom,h)},l=>{t.setStartAfter(l.dom)})},K0=(t,r)=>{r.fold(l=>{t.setEndBefore(l.dom)},(l,h)=>{t.setEnd(l.dom,h)},l=>{t.setEndAfter(l.dom)})},cf=(t,r,l)=>{const h=t.document.createRange();return iS(h,r),K0(h,l),h},gg=(t,r,l,h,p)=>{const y=t.document.createRange();return y.setStart(r.dom,l),y.setEnd(h.dom,p),y},Zb=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Gb=t=>{const r=t.getClientRects(),l=r.length>0?r[0]:t.getBoundingClientRect();return l.width>0||l.height>0?V.some(l).map(Zb):V.none()},NE=t=>{const r=t.getBoundingClientRect();return r.width>0||r.height>0?V.some(r).map(Zb):V.none()},Xc=re.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),jd=(t,r,l)=>r(Xe.fromDom(l.startContainer),l.startOffset,Xe.fromDom(l.endContainer),l.endOffset),Ty=(t,r)=>r.match({domRange:l=>({ltr:ce(l),rtl:V.none}),relative:(l,h)=>({ltr:Et(()=>cf(t,l,h)),rtl:Et(()=>V.some(cf(t,h,l)))}),exact:(l,h,p,y)=>({ltr:Et(()=>gg(t,l,h,p,y)),rtl:Et(()=>V.some(gg(t,p,y,l,h)))})}),IE=(t,r)=>{const l=r.ltr();return l.collapsed?r.rtl().filter(p=>p.collapsed===!1).map(p=>Xc.rtl(Xe.fromDom(p.endContainer),p.endOffset,Xe.fromDom(p.startContainer),p.startOffset)).getOrThunk(()=>jd(t,Xc.ltr,l)):jd(t,Xc.ltr,l)},I4=(t,r)=>{const l=Ty(t,r);return IE(t,l)},uf=(t,r)=>I4(t,r).match({ltr:(h,p,y,S)=>{const R=t.document.createRange();return R.setStart(h.dom,p),R.setEnd(y.dom,S),R},rtl:(h,p,y,S)=>{const R=t.document.createRange();return R.setStart(y.dom,S),R.setEnd(h.dom,p),R}});Xc.ltr,Xc.rtl;const Sp=(t,r,l)=>zo(ii(t,l),r),Tl=(t,r)=>eu(r,t),Ey=(t,r,l,h)=>{const y=Ra(t).dom.createRange();return y.setStart(t.dom,r),y.setEnd(l.dom,h),y},J0=(t,r,l,h)=>{const p=Ey(t,r,l,h),y=Fs(t,l)&&r===h;return p.collapsed&&!y},um=t=>V.from(t.getSelection()),qb=t=>{if(t.rangeCount>0){const r=t.getRangeAt(0),l=t.getRangeAt(t.rangeCount-1);return V.some(q0.create(Xe.fromDom(r.startContainer),r.startOffset,Xe.fromDom(l.endContainer),l.endOffset))}else return V.none()},FE=t=>{if(t.anchorNode===null||t.focusNode===null)return qb(t);{const r=Xe.fromDom(t.anchorNode),l=Xe.fromDom(t.focusNode);return J0(r,t.anchorOffset,l,t.focusOffset)?V.some(q0.create(r,t.anchorOffset,l,t.focusOffset)):qb(t)}},_y=t=>um(t).filter(r=>r.rangeCount>0).bind(FE),Kb=(t,r)=>{const l=uf(t,r);return Gb(l)},El=(t,r)=>{const l=uf(t,r);return NE(l)},Bu=((t,r)=>{const l=y=>{if(!t(y))throw new Error("Can only get "+r+" value of a "+r+" node");return h(y).getOr("")},h=y=>t(y)?V.from(y.dom.nodeValue):V.none();return{get:l,getOption:h,set:(y,S)=>{if(!t(y))throw new Error("Can only set raw "+r+" value of a "+r+" node");y.dom.nodeValue=S}}})(ls,"text"),Ry=t=>Bu.get(t),kp=(t,r)=>({element:t,offset:r}),Ap=(t,r)=>{const l=gi(t);if(l.length===0)return kp(t,r);if(r<l.length)return kp(l[r],0);{const h=l[l.length-1],p=ls(h)?Ry(h).length:gi(h).length;return kp(h,p)}},Dy=(t,r)=>ls(t)?kp(t,r):Ap(t,r),fg=t=>t.foffset!==void 0,My=(t,r)=>r.getSelection.getOrThunk(()=>()=>_y(t))().map(h=>{if(fg(h)){const p=Dy(h.start,h.soffset),y=Dy(h.finish,h.foffset);return Cp.range(p.element,p.offset,y.element,y.offset)}else return h}),Py=(t,r,l)=>{const h=Qa(r.root).dom,p=eS(t,l,r),y=My(h,r).bind(I=>{if(fg(I))return El(h,Cp.exactFromRange(I)).orThunk(()=>{const X=Xe.fromText(G0);mc(I.start,X);const K=Kb(h,Cp.exact(X,0,X,1));return wl(X),K}).bind(X=>lf(X.left,X.top,X.width,X.height));{const H=Go(I,K=>K.dom.getBoundingClientRect()),X={left:Math.min(H.firstCell.left,H.lastCell.left),right:Math.max(H.firstCell.right,H.lastCell.right),top:Math.min(H.firstCell.top,H.lastCell.top),bottom:Math.max(H.firstCell.bottom,H.lastCell.bottom)};return lf(X.left,X.top,X.right-X.left,X.bottom-X.top)}}),R=My(h,r).bind(I=>fg(I)?so(I.start)?V.some(I.start):Mi(I.start):V.some(I.firstCell)).getOr(t.element);return RE(y,p,r,l,R)};var Ly=[tr("getSelection"),Lt("root"),tr("bubble"),af(),rt("overrides",{}),rt("showAbove",!1),ra("placement",Py)];const Mh="link-layout",Q0=t=>t.x+t.width,Bl=(t,r)=>t.x-r.width,lS=(t,r)=>t.y-r.height+t.height,Ny=t=>t.y,Iy=(t,r,l)=>Nl(Q0(t),Ny(t),l.southeast(),I0(),"southeast",Il(t,{left:0,top:2}),Mh),cS=(t,r,l)=>Nl(Bl(t,r),Ny(t),l.southwest(),oy(),"southwest",Il(t,{right:1,top:2}),Mh),Fy=(t,r,l)=>Nl(Q0(t),lS(t,r),l.northeast(),sy(),"northeast",Il(t,{left:0,bottom:3}),Mh),uS=(t,r,l)=>Nl(Bl(t,r),lS(t,r),l.northwest(),F0(),"northwest",Il(t,{right:1,bottom:3}),Mh),dS=()=>[Iy,cS,Fy,uS],hu=()=>[cS,Iy,uS,Fy],df=(t,r,l)=>{const h=hy(l,r.item.element),p=j0(t.element,r,dS(),hu(),dS(),hu(),V.none());return V.some(Y0({anchorBox:h,bubble:X0(),overrides:r.overrides,layouts:p}))};var hS=[Lt("item"),af(),rt("overrides",{}),ra("placement",df)],dm=Ga("type",{selection:Ly,node:nS,hotspot:EE,submenu:hS,makeshift:q2});const lc=[Dc("classes",An),Ji("mode","all",["all","layout","placement"])],Yc=[rt("useFixed",Je),tr("getBounds")],cc=[ar("anchor",dm),Bi("transition",lc)],gu=()=>{const t=document.documentElement;return N2(0,0,t.clientWidth,t.clientHeight)},e1=t=>{const r=bs(t.element),l=t.element.dom.getBoundingClientRect();return L2(r.left,r.top,l.width,l.height)},fu=(t,r,l,h,p,y)=>{const S=im(r.anchorBox,t);return AE(S,h.element,r.bubble,r.layouts,p,l,r.overrides,y)},hm=(t,r,l,h,p)=>{const y=V.none();gS(t,r,l,h,p,y)},gS=(t,r,l,h,p,y)=>{const S=Ul("placement.info",fo(cc),p),R=S.anchor,I=h.element,H=l.get(h.uid);dy(()=>{Mt(I,"position","fixed");const X=or(I,"visibility");Mt(I,"visibility","hidden");const K=r.useFixed()?gu():e1(t);R.placement(t,R,K).each(ie=>{const de=y.orThunk(()=>r.getBounds.map(Qo)),Ce=fu(K,ie,de,h,H,S.transition);l.set(h.uid,Ce)}),X.fold(()=>{Oo(I,"visibility")},ie=>{Mt(I,"visibility",ie)}),or(I,"left").isNone()&&or(I,"top").isNone()&&or(I,"right").isNone()&&or(I,"bottom").isNone()&&Zr(or(I,"position"),"fixed")&&Oo(I,"position")},I)};var By=Object.freeze({__proto__:null,position:hm,positionWithinBounds:gS,getMode:(t,r,l)=>r.useFixed()?"fixed":"absolute",reset:(t,r,l,h)=>{const p=h.element;wt(["position","left","right","top","bottom"],y=>Oo(p,y)),vE(p),l.clear(h.uid)}}),t1=Object.freeze({__proto__:null,init:()=>{let t={};return rc({readState:()=>t,clear:p=>{vn(p)?delete t[p]:t={}},set:(p,y)=>{t[p]=y},get:p=>Yt(t,p)})}});const _l=ul({fields:Yc,name:"positioning",active:pE,apis:By,state:t1}),Jb=t=>t.getSystem().isConnected(),Qb=t=>{ws(t,cu());const r=t.components();wt(r,Qb)},hf=t=>{const r=t.components();wt(r,hf),ws(t,Mc())},Hy=(t,r)=>{t.getSystem().addToWorld(r),Me(t.element)&&hf(r)},n1=t=>{Qb(t),t.getSystem().removeFromWorld(t)},$y=(t,r)=>{Ni(t.element,r.element)},o1=t=>{wt(t.components(),r=>wl(r.element)),li(t.element),t.syncComponents()},zy=(t,r,l)=>{const h=t.components();o1(t);const p=l(r),y=Cn(h,p);wt(y,S=>{Qb(S),t.getSystem().removeFromWorld(S)}),wt(p,S=>{Jb(S)?$y(t,S):(t.getSystem().addToWorld(S),$y(t,S),Me(t.element)&&hf(S))}),t.syncComponents()},Tp=(t,r,l)=>{const h=t.components(),p=De(r,R=>R0(R).toArray());wt(h,R=>{No(p,R)||n1(R)});const y=l(r),S=Cn(h,y);wt(S,R=>{Jb(R)&&n1(R)}),wt(y,R=>{Jb(R)||Hy(t,R)}),t.syncComponents()},mg=(t,r)=>{ev(t,r,Ni)},ev=(t,r,l)=>{t.getSystem().addToWorld(r),l(t.element,r.element),Me(t.element)&&hf(r),t.syncComponents()},gm=t=>{Qb(t),wl(t.element),t.getSystem().removeFromWorld(t)},pg=t=>{const r=ai(t.element).bind(l=>t.getSystem().getByDom(l).toOptional());gm(t),r.each(l=>{l.syncComponents()})},fS=t=>{const r=t.components();wt(r,gm),li(t.element),t.syncComponents()},jc=(t,r)=>{gf(t,r,Ni)},Vy=(t,r)=>{gf(t,r,ed)},gf=(t,r,l)=>{l(t,r.element);const h=gi(r.element);wt(h,p=>{r.getByDom(p).each(hf)})},fm=t=>{const r=gi(t.element);wt(r,l=>{t.getByDom(l).each(Qb)}),wl(t.element)},s1=(t,r,l,h)=>{l.get().each(S=>{fS(t)});const p=r.getAttachPoint(t);mg(p,t);const y=t.getSystem().build(h);return mg(t,y),l.set(y),y},r1=(t,r,l,h)=>{const p=s1(t,r,l,h);return r.onOpen(t,p),p},$E=(t,r,l,h)=>l.get().map(()=>s1(t,r,l,h)),zE=(t,r,l,h,p)=>{bS(t,r),r1(t,r,l,h),p(),a1(t,r)},mS=(t,r,l)=>{l.get().each(h=>{fS(t),pg(t),r.onClose(t,h),l.clear()})},pS=(t,r,l)=>l.isOpen(),mm=(t,r,l,h)=>pS(t,r,l)&&l.get().exists(p=>r.isPartOf(t,p,h)),Ep=(t,r,l)=>l.get(),tv=(t,r,l,h)=>{or(t.element,r).fold(()=>{Q(t.element,l)},p=>{kt(t.element,l,p)}),Mt(t.element,r,h)},VE=(t,r,l)=>{_o(t.element,l).fold(()=>Oo(t.element,r),h=>Mt(t.element,r,h))},bS=(t,r,l)=>{const h=r.getAttachPoint(t);Mt(t.element,"position",_l.getMode(h)),tv(t,"visibility",r.cloakVisibilityAttr,"hidden")},nv=t=>qs(["top","left","right","bottom"],r=>or(t,r).isSome()),a1=(t,r,l)=>{nv(t.element)||Oo(t.element,"position"),VE(t,"visibility",r.cloakVisibilityAttr)};var Wy=Object.freeze({__proto__:null,cloak:bS,decloak:a1,open:r1,openWhileCloaked:zE,close:mS,isOpen:pS,isPartOf:mm,getState:Ep,setContent:$E}),i1=Object.freeze({__proto__:null,events:(t,r)=>Er([Nt(cl(),(l,h)=>{mS(l,t,r)})])}),_p=[Ws("onOpen"),Ws("onClose"),Lt("isPartOf"),Lt("getAttachPoint"),rt("cloakVisibilityAttr","data-precloak-visibility")],pm=Object.freeze({__proto__:null,init:()=>{const t=zs(),r=ce("not-implemented");return rc({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Gs=ul({fields:_p,name:"sandboxing",active:i1,apis:Wy,state:pm}),bg=ce("dismiss.popups"),ff=ce("reposition.popups"),l1=ce("mouse.released"),Uy=mi([rt("isExtraPart",Je),Bi("fireEventInstead",[rt("event",uu())])]),ov=t=>{const r=Ul("Dismissal",Uy,t);return{[bg()]:{schema:mi([Lt("target")]),onReceive:(l,h)=>{Gs.isOpen(l)&&(Gs.isPartOf(l,h.target)||r.isExtraPart(l,h.target)||r.fireEventInstead.fold(()=>Gs.close(l),y=>ws(l,y.event)))}}}},bm=mi([Bi("fireEventInstead",[rt("event",yb())]),$c("doReposition")]),sv=t=>{const r=Ul("Reposition",bm,t);return{[ff()]:{onReceive:l=>{Gs.isOpen(l)&&r.fireEventInstead.fold(()=>r.doReposition(l),h=>ws(l,h.event))}}}},c1=(t,r,l)=>{r.store.manager.onLoad(t,r,l)},yS=(t,r,l)=>{r.store.manager.onUnload(t,r,l)};var mf=Object.freeze({__proto__:null,onLoad:c1,onUnload:yS,setValue:(t,r,l,h)=>{r.store.manager.setValue(t,r,l,h)},getValue:(t,r,l)=>r.store.manager.getValue(t,r,l),getState:(t,r,l)=>l}),Yy=Object.freeze({__proto__:null,events:(t,r)=>{const l=t.resetOnDom?[ba((h,p)=>{c1(h,t,r)}),kh((h,p)=>{yS(h,t,r)})]:[jg(t,r,c1)];return Er(l)}});const xm=()=>{const t=to(null),r=()=>({mode:"memory",value:t.get()}),l=()=>t.get()===null,h=()=>{t.set(null)};return rc({set:t.set,get:t.get,isNotSet:l,clear:h,readState:r})},jy=()=>rc({readState:oe}),wS=()=>{const t=to({}),r=to({});return rc({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:r.get()}),lookup:S=>Yt(t.get(),S).orThunk(()=>Yt(r.get(),S)),update:S=>{const R=t.get(),I=r.get(),H={},X={};wt(S,K=>{H[K.value]=K,Yt(K,"meta").each(ie=>{Yt(ie,"text").each(de=>{X[de]=K})})}),t.set({...R,...H}),r.set({...I,...X})},clear:()=>{t.set({}),r.set({})}})};var Ph=Object.freeze({__proto__:null,memory:xm,dataset:wS,manual:jy,init:t=>t.store.manager.state(t)});const SS=(t,r,l,h)=>{const p=r.store;l.update([h]),p.setValue(t,h),r.onSetValue(t,h)},d1=(t,r,l)=>{const h=r.store,p=h.getDataKey(t);return l.lookup(p).getOrThunk(()=>h.getFallbackEntry(p))},Hu=(t,r,l)=>{r.store.initialValue.each(p=>{SS(t,r,l,p)})},dl=(t,r,l)=>{l.clear()};var UE=[tr("initialValue"),Lt("getFallbackEntry"),Lt("getDataKey"),Lt("setValue"),ra("manager",{setValue:SS,getValue:d1,onLoad:Hu,onUnload:dl,state:wS})];const Zd=(t,r,l)=>r.store.getValue(t),XE=(t,r,l,h)=>{r.store.setValue(t,h),r.onSetValue(t,h)},kS=(t,r,l)=>{r.store.initialValue.each(h=>{r.store.setValue(t,h)})};var rv=[Lt("getValue"),rt("setValue",oe),tr("initialValue"),ra("manager",{setValue:XE,getValue:Zd,onLoad:kS,onUnload:oe,state:Vd.init})];const Op=(t,r,l,h)=>{l.set(h),r.onSetValue(t,h)},AS=(t,r,l)=>l.get(),TS=(t,r,l)=>{r.store.initialValue.each(h=>{l.isNotSet()&&l.set(h)})},B4=(t,r,l)=>{l.clear()};var H4=[tr("initialValue"),ra("manager",{setValue:Op,getValue:AS,onLoad:TS,onUnload:B4,state:xm})],ES=[Ir("store",{mode:"memory"},Ga("mode",{memory:H4,manual:rv,dataset:UE})),Ws("onSetValue"),rt("resetOnDom",!1)];const En=ul({fields:ES,name:"representing",active:Yy,apis:mf,extra:{setValueFrom:(t,r)=>{const l=En.getValue(r);En.setValue(t,l)}},state:Ph}),hl=(t,r)=>N(t,{},dt(r,l=>pb(l.name(),"Cannot configure "+l.name()+" for "+t)).concat([rr("dump",Gt)])),h1=t=>t.dump,gl=(t,r)=>({...en(r),...t.dump}),$u={field:hl,augment:gl,get:h1},Zy="placeholder",av=re.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Rp=t=>os(t,"uiType"),_S=(t,r,l,h)=>t.exists(p=>p!==l.owner)?av.single(!0,ce(l)):Yt(h,l.name).fold(()=>{throw new Error("Unknown placeholder component: "+l.name+`
Known: [`+ds(h)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(l,null,2))},p=>p.replace()),pf=(t,r,l,h)=>Rp(l)&&l.uiType===Zy?_S(t,r,l,h):av.single(!1,ce(l)),Dp=(t,r,l,h)=>pf(t,r,l,h).fold((y,S)=>{const R=Rp(l)?S(r,l.config,l.validated):S(r),I=Yt(R,"components").getOr([]),H=De(I,X=>Dp(t,r,X,h));return[{...R,components:H}]},(y,S)=>{if(Rp(l)){const R=S(r,l.config,l.validated);return l.validated.preprocess.getOr(Gt)(R)}else return S(r)}),YE=(t,r,l,h)=>De(l,p=>Dp(t,r,p,h)),jE=(t,r)=>{let l=!1;const h=()=>l,p=()=>{if(l)throw new Error("Trying to use the same placeholder more than once: "+t);return l=!0,r},y=()=>r.fold((S,R)=>S,(S,R)=>S);return{name:ce(t),required:y,used:h,replace:p}},ZE=(t,r,l,h)=>{const p=Go(h,(S,R)=>jE(R,S)),y=YE(t,r,l,p);return $s(p,S=>{if(S.used()===!1&&S.required())throw new Error("Placeholder: "+S.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),y},OS=av.single,ym=av.multiple,Mp=ce(Zy),wm=re.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),g1=rt("factory",{sketch:Gt}),mu=rt("schema",[]),Gd=Lt("name"),Cm=Fi("pname","pname",Ve(t=>"<alloy."+Fn(t.name)+">"),au()),Pp=rr("schema",()=>[tr("preprocess")]),f1=rt("defaults",ce({})),m1=rt("overrides",ce({})),GE=fo([g1,mu,Gd,Cm,f1,m1]),qE=fo([g1,mu,Gd,f1,m1]),KE=fo([g1,mu,Gd,Cm,f1,m1]),JE=fo([g1,Pp,Gd,Lt("unit"),Cm,f1,m1]),RS=t=>t.fold(V.some,V.none,V.some,V.some),DS=t=>{const r=l=>l.name;return t.fold(r,r,r,r)},Gy=t=>t.fold(Gt,Gt,Gt,Gt),p1=(t,r)=>l=>{const h=Ul("Converting part type",r,l);return t(h)},Zl=p1(wm.required,GE),zu=p1(wm.external,qE),pu=p1(wm.optional,KE),iv=p1(wm.group,JE),qy=ce("entirety");var MS=Object.freeze({__proto__:null,required:Zl,external:zu,optional:pu,group:iv,asNamedPart:RS,name:DS,asCommon:Gy,original:qy});const b1=(t,r,l,h)=>me(r.defaults(t,l,h),l,{uid:t.partUids[r.name]},r.overrides(t,l,h)),QE=(t,r,l)=>{const h={},p={};return wt(l,y=>{y.fold(S=>{h[S.pname]=OS(!0,(R,I,H)=>S.factory.sketch(b1(R,S,I,H)))},S=>{const R=r.parts[S.name];p[S.name]=ce(S.factory.sketch(b1(r,S,R[qy()]),R))},S=>{h[S.pname]=OS(!1,(R,I,H)=>S.factory.sketch(b1(R,S,I,H)))},S=>{h[S.pname]=ym(!0,(R,I,H)=>{const X=R[S.name];return dt(X,K=>S.factory.sketch(me(S.defaults(R,K,H),K,S.overrides(R,K))))})})}),{internals:ce(h),externals:ce(p)}},v1=(t,r)=>{const l={};return wt(r,h=>{RS(h).each(p=>{const y=e_(t,p.pname);l[p.name]=S=>{const R=Ul("Part: "+p.name+" in "+t,fo(p.schema),S);return{...y,config:S,validated:R}}})}),l},e_=(t,r)=>({uiType:Mp(),owner:t,name:r}),x1=(t,r,l)=>({uiType:Mp(),owner:t,name:r,config:l,validated:{}}),t_=t=>De(t,r=>r.fold(V.none,V.some,V.none,V.none).map(l=>xh(l.name,l.schema.concat([Jf(qy())]))).toArray()),n_=t=>dt(t,DS),PS=(t,r,l)=>QE(t,r,l),y1=(t,r,l)=>ZE(V.some(t),r,r.components,l),Ur=(t,r,l)=>{const h=r.partUids[l];return t.getSystem().getByUid(h).toOptional()},_n=(t,r,l)=>Ur(t,r,l).getOrDie("Could not find part: "+l),qd=(t,r,l)=>{const h={},p=r.partUids,y=t.getSystem();return wt(l,S=>{h[S]=ce(y.getByUid(p[S]))}),h},LS=(t,r)=>{const l=t.getSystem();return Go(r.partUids,(h,p)=>ce(l.getByUid(h)))},Ky=t=>ds(t.partUids),Lp=(t,r,l)=>{const h={},p=r.partUids,y=t.getSystem();return wt(l,S=>{h[S]=ce(y.getByUid(p[S]).getOrDie())}),h},w1=(t,r)=>{const l=n_(r);return ts(dt(l,h=>({key:h,value:t+"-"+h})))},lv=t=>Fi("partUids","partUids",ht(r=>w1(r.uid,t)),au());var Jy=Object.freeze({__proto__:null,generate:v1,generateOne:x1,schemas:t_,names:n_,substitutes:PS,components:y1,defaultUids:w1,defaultUidsSchema:lv,getAllParts:LS,getAllPartNames:Ky,getPart:Ur,getPartOrDie:_n,getParts:qd,getPartsOrDie:Lp});const NS=(t,r)=>(t.length>0?[xh("parts",t)]:[]).concat([Lt("uid"),rt("dom",{}),rt("components",[]),Jf("originalSpec"),rt("debug.sketcher",{})]).concat(r),Qy=(t,r,l,h,p)=>{const y=NS(h,p);return Ul(t+" [SpecSchema]",mi(y.concat(r)),l)},IS=(t,r,l,h)=>{const p=C1(h),y=Qy(t,r,p,[],[]);return l(y,p)},cv=(t,r,l,h,p)=>{const y=C1(p),S=t_(l),R=lv(l),I=Qy(t,r,y,S,[R]),H=PS(t,I,l),X=y1(t,I,H.internals());return h(I,X,y,H.externals())},Sm=t=>os(t,"uid"),C1=t=>Sm(t)?t:{...t,uid:Db("uid")},o_=t=>t.uid!==void 0,s_=mi([Lt("name"),Lt("factory"),Lt("configFields"),rt("apis",{}),rt("extraApis",{})]),r_=mi([Lt("name"),Lt("factory"),Lt("configFields"),Lt("partFields"),rt("apis",{}),rt("extraApis",{})]),Zc=t=>{const r=Ul("Sketcher for "+t.name,s_,t),l=y=>IS(r.name,r.configFields,r.factory,y),h=Go(r.apis,D0),p=Go(r.extraApis,(y,S)=>Rx(y,S));return{name:r.name,configFields:r.configFields,sketch:l,...h,...p}},Hl=t=>{const r=Ul("Sketcher for "+t.name,r_,t),l=S=>cv(r.name,r.configFields,r.partFields,r.factory,S),h=v1(r.name,r.partFields),p=Go(r.apis,D0),y=Go(r.extraApis,(S,R)=>Rx(S,R));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:l,parts:h,...p,...y}},Np=t=>xa("input")(t)&&In(t,"type")!=="radio"||xa("textarea")(t);var a_=Object.freeze({__proto__:null,getCurrent:(t,r,l)=>r.find(t)});const i_=[Lt("find")],Bs=ul({fields:i_,name:"composing",apis:a_}),l_=["input","button","textarea","select"],c_=(t,r,l)=>{(r.disabled()?tw:S1)(t,r)},ew=(t,r)=>r.useNative===!0&&No(l_,Ks(t.element)),z4=t=>kr(t.element,"disabled"),V4=t=>{kt(t.element,"disabled","disabled")},bf=t=>{Q(t.element,"disabled")},uv=t=>In(t.element,"aria-disabled")==="true",u_=t=>{kt(t.element,"aria-disabled","true")},d_=t=>{kt(t.element,"aria-disabled","false")},tw=(t,r,l)=>{r.disableClass.each(p=>{bi(t.element,p)}),(ew(t,r)?V4:u_)(t),r.onDisabled(t)},S1=(t,r,l)=>{r.disableClass.each(p=>{_r(t.element,p)}),(ew(t,r)?bf:d_)(t),r.onEnabled(t)},k1=(t,r)=>ew(t,r)?z4(t):uv(t);var h_=Object.freeze({__proto__:null,enable:S1,disable:tw,isDisabled:k1,onLoad:c_,set:(t,r,l,h)=>{(h?tw:S1)(t,r)}}),g_=Object.freeze({__proto__:null,exhibit:(t,r)=>xc({classes:r.disabled()?r.disableClass.toArray():[]}),events:(t,r)=>Er([Ex(kl(),(l,h)=>k1(l,t)),jg(t,r,c_)])}),FS=[sa("disabled",Je),rt("useNative",!0),tr("disableClass"),Ws("onDisabled"),Ws("onEnabled")];const Do=ul({fields:FS,name:"disabling",active:g_,apis:h_}),A1=(t,r,l,h)=>{const p=Tl(t.element,"."+r.highlightClass);wt(p,y=>{qs(h,R=>Fs(R.element,y))||(_r(y,r.highlightClass),t.getSystem().getByDom(y).each(R=>{r.onDehighlight(t,R),ws(R,Gm())}))})},g=(t,r,l)=>A1(t,r,l,[]),v=(t,r,l,h)=>{ge(t,r,l,h)&&(_r(h.element,r.highlightClass),r.onDehighlight(t,h),ws(h,Gm()))},k=(t,r,l,h)=>{A1(t,r,l,[h]),ge(t,r,l,h)||(bi(h.element,r.highlightClass),r.onHighlight(t,h),ws(h,Ax()))},_=(t,r,l)=>{ct(t,r).each(h=>{k(t,r,l,h)})},B=(t,r,l)=>{Kt(t,r).each(h=>{k(t,r,l,h)})},Z=(t,r,l,h)=>{Ue(t,r,l,h).fold(p=>{throw p},p=>{k(t,r,l,p)})},se=(t,r,l,h)=>{const p=jn(t,r);We(p,h).each(S=>{k(t,r,l,S)})},ge=(t,r,l,h)=>yc(h.element,r.highlightClass),Ae=(t,r,l)=>Ca(t.element,"."+r.highlightClass).bind(h=>t.getSystem().getByDom(h).toOptional()),Ue=(t,r,l,h)=>{const p=Tl(t.element,"."+r.itemClass);return V.from(p[h]).fold(()=>C.error(new Error("No element found with index "+h)),t.getSystem().getByDom)},ct=(t,r,l)=>Ca(t.element,"."+r.itemClass).bind(h=>t.getSystem().getByDom(h).toOptional()),Kt=(t,r,l)=>{const h=Tl(t.element,"."+r.itemClass);return(h.length>0?V.some(h[h.length-1]):V.none()).bind(y=>t.getSystem().getByDom(y).toOptional())},Sn=(t,r,l,h)=>{const p=Tl(t.element,"."+r.itemClass);return Ie(p,S=>yc(S,r.highlightClass)).bind(S=>{const R=Qf(S,h,0,p.length-1);return t.getSystem().getByDom(p[R]).toOptional()})},pn=(t,r,l)=>Sn(t,r,l,-1),ln=(t,r,l)=>Sn(t,r,l,1),jn=(t,r,l)=>{const h=Tl(t.element,"."+r.itemClass);return Xa(dt(h,p=>t.getSystem().getByDom(p).toOptional()))};var Xt=Object.freeze({__proto__:null,dehighlightAll:g,dehighlight:v,highlight:k,highlightFirst:_,highlightLast:B,highlightAt:Z,highlightBy:se,isHighlighted:ge,getHighlighted:Ae,getFirst:ct,getLast:Kt,getPrevious:pn,getNext:ln,getCandidates:jn}),cn=[Lt("highlightClass"),Lt("itemClass"),Ws("onHighlight"),Ws("onDehighlight")];const dn=ul({fields:cn,name:"highlighting",apis:Xt}),Ho=[8],Hs=[9],Or=[13],ia=[27],Aa=[32],bu=[37],Kd=[38],km=[39],Lh=[40],Xr=(t,r,l)=>{const h=Mo(t.slice(0,r)),p=Mo(t.slice(r+1));return We(h.concat(p),l)},Cc=(t,r,l)=>{const h=Mo(t.slice(0,r));return We(h,l)},Sc=(t,r,l)=>{const h=t.slice(0,r),p=t.slice(r+1);return We(p.concat(h),l)},Vu=(t,r,l)=>{const h=t.slice(r+1);return We(h,l)},as=t=>r=>{const l=r.raw;return No(t,l.which)},Pc=t=>r=>Xn(t,l=>l(r)),Wi=t=>t.raw.shiftKey===!0,T1=t=>t.raw.ctrlKey===!0,vg=ut(Wi),vs=(t,r)=>({matches:t,classification:r}),Gl=(t,r)=>We(t,h=>h.matches(r)).map(h=>h.classification),E1=(t,r,l)=>{r.exists(p=>l.exists(y=>Fs(y,p)))||Jn(t,wb(),{prevFocus:r,newFocus:l})},_1=()=>{const t=l=>ic(l.element);return{get:t,set:(l,h)=>{const p=t(l);l.getSystem().triggerFocus(h,l.element);const y=t(l);E1(l,p,y)}}},BS=()=>{const t=l=>dn.getHighlighted(l).map(h=>h.element);return{get:t,set:(l,h)=>{const p=t(l);l.getSystem().getByDom(h).fold(oe,S=>{dn.highlight(l,S)});const y=t(l);E1(l,p,y)}}};var vf;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(vf||(vf={}));const Am=(t,r,l,h,p)=>{const y=()=>t.concat([rt("focusManager",_1()),Ir("focusInside","onFocus",Df(H=>No(["onFocus","onEnterOrSpace","onApi"],H)?C.value(H):C.error("Invalid value for focusInside"))),ra("handler",I),ra("state",r),ra("sendFocusIn",p)]),S=(H,X,K,ie,de)=>{const Ce=K(H,X,ie,de);return Gl(Ce,X.event).bind(_e=>_e(H,X,ie,de))},I={schema:y,processKey:S,toEvents:(H,X)=>{const K=H.focusInside!==vf.OnFocusMode?V.none():p(H).map(Ce=>Nt($d(),(_e,et)=>{Ce(_e,H,X),et.stop()})),ie=(Ce,_e)=>{const et=as(Aa.concat(Or))(_e.event);H.focusInside===vf.OnEnterOrSpaceMode&&et&&ud(Ce,_e)&&p(H).each(Fe=>{Fe(Ce,H,X),_e.stop()})},de=[Nt(Mu(),(Ce,_e)=>{S(Ce,_e,l,H,X).fold(()=>{ie(Ce,_e)},et=>{_e.stop()})}),Nt(Ff(),(Ce,_e)=>{S(Ce,_e,h,H,X).each(et=>{_e.stop()})})];return Er(K.toArray().concat(de))}};return I},O1=t=>{const r=[tr("onEscape"),tr("onEnter"),rt("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),rt("firstTabstop",0),rt("useTabstopAt",ot),tr("visibilitySelector")].concat([t]),l=(Fe,Ke)=>{const Qe=Fe.visibilitySelector.bind(yt=>Oh(Ke,yt)).getOr(Ke);return Xo(Qe)>0},h=(Fe,Ke)=>{const Qe=Tl(Fe.element,Ke.selector),yt=zo(Qe,St=>l(Ke,St));return V.from(yt[Ke.firstTabstop])},p=(Fe,Ke)=>Ke.focusManager.get(Fe).bind(Qe=>Oh(Qe,Ke.selector)),y=(Fe,Ke)=>l(Fe,Ke)&&Fe.useTabstopAt(Ke),S=(Fe,Ke,Qe)=>{h(Fe,Ke).each(yt=>{Ke.focusManager.set(Fe,yt)})},R=(Fe,Ke,Qe,yt,St)=>St(Ke,Qe,un=>y(yt,un)).fold(()=>yt.cyclic?V.some(!0):V.none(),un=>(yt.focusManager.set(Fe,un),V.some(!0))),I=(Fe,Ke,Qe,yt)=>{const St=Tl(Fe.element,Qe.selector);return p(Fe,Qe).bind(un=>Ie(St,no(Fs,un)).bind(Rt=>R(Fe,St,Rt,Qe,yt)))},H=(Fe,Ke,Qe)=>{const yt=Qe.cyclic?Xr:Cc;return I(Fe,Ke,Qe,yt)},X=(Fe,Ke,Qe)=>{const yt=Qe.cyclic?Sc:Vu;return I(Fe,Ke,Qe,yt)},K=Fe=>Zi(Fe).bind(ec).exists(Ke=>Fs(Ke,Fe)),ie=(Fe,Ke,Qe)=>p(Fe,Qe).filter(yt=>!Qe.useTabstopAt(yt)).bind(yt=>(K(yt)?H:X)(Fe,Ke,Qe)),de=(Fe,Ke,Qe)=>Qe.onEnter.bind(yt=>yt(Fe,Ke)),Ce=(Fe,Ke,Qe)=>Qe.onEscape.bind(yt=>yt(Fe,Ke)),_e=ce([vs(Pc([Wi,as(Hs)]),H),vs(as(Hs),X),vs(Pc([vg,as(Or)]),de)]),et=ce([vs(as(ia),Ce),vs(as(Hs),ie)]);return Am(r,Vd.init,_e,et,()=>V.some(S))};var f_=O1(rr("cyclic",Je)),hv=O1(rr("cyclic",ot));const SH=(t,r,l)=>(g0(t,l,kl()),V.some(!0)),Tm=(t,r,l)=>Np(l)&&as(Aa)(r.event)?V.none():SH(t,r,l),gv=(t,r)=>V.some(!0),U4=[rt("execute",Tm),rt("useSpace",!1),rt("useEnter",!0),rt("useControlEnter",!1),rt("useDown",!1)],HS=(t,r,l)=>l.execute(t,r,t.element),kH=(t,r,l,h)=>{const p=l.useSpace&&!Np(t.element)?Aa:[],y=l.useEnter?Or:[],S=l.useDown?Lh:[],R=p.concat(y).concat(S);return[vs(as(R),HS)].concat(l.useControlEnter?[vs(Pc([T1,as(Or)]),HS)]:[])},X4=(t,r,l,h)=>l.useSpace&&!Np(t.element)?[vs(as(Aa),gv)]:[];var AH=Am(U4,Vd.init,kH,X4,()=>V.none());const m_=()=>{const t=zs();return rc({readState:()=>t.get().map(p=>({numRows:String(p.numRows),numColumns:String(p.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(p,y)=>{t.set({numRows:p,numColumns:y})},getNumRows:()=>t.get().map(p=>p.numRows),getNumColumns:()=>t.get().map(p=>p.numColumns)})};var EH=Object.freeze({__proto__:null,flatgrid:m_,init:t=>t.state(t)});const Y4=t=>(r,l,h,p)=>{const y=t(r.element);return j4(y,r,l,h,p)},p_=(t,r)=>{const l=yy(t,r);return Y4(l)},b_=(t,r)=>{const l=yy(r,t);return Y4(l)},v_=t=>(r,l,h,p)=>j4(t,r,l,h,p),j4=(t,r,l,h,p)=>h.focusManager.get(r).bind(S=>t(r.element,S,h,p)).map(S=>(h.focusManager.set(r,S),!0)),ow=v_,$S=v_,zS=v_,RY=t=>t.offsetWidth<=0&&t.offsetHeight<=0,x_=t=>!RY(t.dom),_H=(t,r)=>Ie(t,r).map(l=>({index:l,candidates:t})),Z4=(t,r,l)=>{const h=S=>Fs(S,r),p=Tl(t,l),y=zo(p,x_);return _H(y,h)},vd=(t,r)=>Ie(t,l=>Fs(r,l)),G4=(t,r,l,h)=>{const p=Math.floor(r/l),y=r%l;return h(p,y).bind(S=>{const R=S.row*l+S.column;return R>=0&&R<t.length?V.some(t[R]):V.none()})},q4=(t,r,l,h,p)=>G4(t,r,h,(y,S)=>{const I=y===l-1?t.length-y*h:h,H=Qf(S,p,0,I-1);return V.some({row:y,column:H})}),K4=(t,r,l,h,p)=>G4(t,r,h,(y,S)=>{const R=Qf(y,p,0,l-1),H=R===l-1?t.length-R*h:h,X=fd(S,0,H-1);return V.some({row:R,column:X})}),OH=(t,r,l,h)=>q4(t,r,l,h,1),RH=(t,r,l,h)=>q4(t,r,l,h,-1),R1=(t,r,l,h)=>K4(t,r,l,h,-1),y_=(t,r,l,h)=>K4(t,r,l,h,1),DH=[Lt("selector"),rt("execute",Tm),Yl("onEscape"),rt("captureTab",!1),dg()],w_=(t,r,l)=>{Ca(t.element,r.selector).each(h=>{r.focusManager.set(t,h)})},VS=(t,r)=>r.focusManager.get(t).bind(l=>Oh(l,r.selector)),C_=(t,r,l,h)=>VS(t,l).bind(p=>l.execute(t,r,p)),WS=t=>(r,l,h,p)=>Z4(r,l,h.selector).bind(y=>t(y.candidates,y.index,p.getNumRows().getOr(h.initSize.numRows),p.getNumColumns().getOr(h.initSize.numColumns))),J4=(t,r,l)=>l.captureTab?V.some(!0):V.none(),MH=(t,r,l)=>l.onEscape(t,r),Q4=WS(RH),e3=WS(OH),PH=WS(R1),LH=WS(y_),t3=ce([vs(as(bu),p_(Q4,e3)),vs(as(km),b_(Q4,e3)),vs(as(Kd),ow(PH)),vs(as(Lh),$S(LH)),vs(Pc([Wi,as(Hs)]),J4),vs(Pc([vg,as(Hs)]),J4),vs(as(Aa.concat(Or)),C_)]),US=ce([vs(as(ia),MH),vs(as(Aa),gv)]);var NH=Am(DH,m_,t3,US,()=>V.some(w_));const n3=(t,r,l,h,p)=>{const y=R=>Ks(R)==="button"&&In(R,"disabled")==="disabled",S=(R,I,H)=>p(R,I,h,0,H.length-1,H[I],X=>y(H[X])?S(R,X,H):V.from(H[X]));return Z4(t,l,r).bind(R=>{const I=R.index,H=R.candidates;return S(I,I,H)})},o3=(t,r,l,h)=>n3(t,r,l,h,(p,y,S,R,I,H,X)=>{const K=fd(y+S,R,I);return K===p?V.from(H):X(K)}),XS=(t,r,l,h)=>n3(t,r,l,h,(p,y,S,R,I,H,X)=>{const K=Qf(y,S,R,I);return K===p?V.none():X(K)}),D1=[Lt("selector"),rt("getInitial",V.none),rt("execute",Tm),Yl("onEscape"),rt("executeOnMove",!1),rt("allowVertical",!0),rt("allowHorizontal",!0),rt("cycles",!0)],s3=(t,r)=>r.focusManager.get(t).bind(l=>Oh(l,r.selector)),S_=(t,r,l)=>s3(t,l).bind(h=>l.execute(t,r,h)),k_=(t,r,l)=>{r.getInitial(t).orThunk(()=>Ca(t.element,r.selector)).each(h=>{r.focusManager.set(t,h)})},r3=(t,r,l)=>(l.cycles?XS:o3)(t,l.selector,r,-1),A_=(t,r,l)=>(l.cycles?XS:o3)(t,l.selector,r,1),T_=t=>(r,l,h,p)=>t(r,l,h,p).bind(()=>h.executeOnMove?S_(r,l,h):V.some(!0)),a3=(t,r,l)=>l.onEscape(t,r),i3=(t,r,l,h)=>{const p=[...l.allowHorizontal?bu:[]].concat(l.allowVertical?Kd:[]),y=[...l.allowHorizontal?km:[]].concat(l.allowVertical?Lh:[]);return[vs(as(p),T_(p_(r3,A_))),vs(as(y),T_(b_(r3,A_))),vs(as(Or),S_),vs(as(Aa),S_)]},l3=ce([vs(as(Aa),gv),vs(as(ia),a3)]);var IH=Am(D1,Vd.init,i3,l3,()=>V.some(k_));const YS=(t,r,l)=>V.from(t[r]).bind(h=>V.from(h[l]).map(p=>({rowIndex:r,columnIndex:l,cell:p}))),c3=(t,r,l,h)=>{const y=t[r].length,S=Qf(l,h,0,y-1);return YS(t,r,S)},jS=(t,r,l,h)=>{const p=Qf(l,h,0,t.length-1),y=t[p].length,S=fd(r,0,y-1);return YS(t,p,S)},u3=(t,r,l,h)=>{const y=t[r].length,S=fd(l+h,0,y-1);return YS(t,r,S)},sw=(t,r,l,h)=>{const p=fd(l+h,0,t.length-1),y=t[p].length,S=fd(r,0,y-1);return YS(t,p,S)},FH=(t,r,l)=>c3(t,r,l,1),d3=(t,r,l)=>c3(t,r,l,-1),Gc=(t,r,l)=>jS(t,l,r,-1),BH=(t,r,l)=>jS(t,l,r,1),h3=(t,r,l)=>u3(t,r,l,-1),g3=(t,r,l)=>u3(t,r,l,1),HH=(t,r,l)=>sw(t,l,r,-1),f3=(t,r,l)=>sw(t,l,r,1),m3=[xh("selectors",[Lt("row"),Lt("cell")]),rt("cycles",!0),rt("previousSelector",V.none),rt("execute",Tm)],$H=(t,r,l)=>{r.previousSelector(t).orThunk(()=>{const p=r.selectors;return Ca(t.element,p.cell)}).each(p=>{r.focusManager.set(t,p)})},zH=(t,r,l)=>ic(t.element).bind(h=>l.execute(t,r,h)),VH=(t,r)=>dt(t,l=>Tl(l,r.selectors.cell)),ZS=(t,r)=>(l,h,p)=>{const y=p.cycles?t:r;return Oh(h,p.selectors.row).bind(S=>{const R=Tl(S,p.selectors.cell);return vd(R,h).bind(I=>{const H=Tl(l,p.selectors.row);return vd(H,S).bind(X=>{const K=VH(H,p);return y(K,X,I).map(ie=>ie.cell)})})})},E_=ZS(d3,h3),p3=ZS(FH,g3),WH=ZS(Gc,HH),b3=ZS(BH,f3),v3=ce([vs(as(bu),p_(E_,p3)),vs(as(km),b_(E_,p3)),vs(as(Kd),ow(WH)),vs(as(Lh),$S(b3)),vs(as(Aa.concat(Or)),zH)]),x3=ce([vs(as(Aa),gv)]);var UH=Am(m3,Vd.init,v3,x3,()=>V.some($H));const XH=[Lt("selector"),rt("execute",Tm),rt("moveOnTab",!1)],y3=(t,r,l)=>l.focusManager.get(t).bind(h=>l.execute(t,r,h)),YH=(t,r,l)=>{Ca(t.element,r.selector).each(h=>{r.focusManager.set(t,h)})},__=(t,r,l)=>XS(t,l.selector,r,-1),O_=(t,r,l)=>XS(t,l.selector,r,1),Ip=(t,r,l,h)=>l.moveOnTab?zS(__)(t,r,l,h):V.none(),w3=(t,r,l,h)=>l.moveOnTab?zS(O_)(t,r,l,h):V.none(),C3=ce([vs(as(Kd),zS(__)),vs(as(Lh),zS(O_)),vs(Pc([Wi,as(Hs)]),Ip),vs(Pc([vg,as(Hs)]),w3),vs(as(Or),y3),vs(as(Aa),y3)]),S3=ce([vs(as(Aa),gv)]);var jH=Am(XH,Vd.init,C3,S3,()=>V.some(YH));const M1=[Yl("onSpace"),Yl("onEnter"),Yl("onShiftEnter"),Yl("onLeft"),Yl("onRight"),Yl("onTab"),Yl("onShiftTab"),Yl("onUp"),Yl("onDown"),Yl("onEscape"),rt("stopSpaceKeyup",!1),tr("focusIn")],ZH=(t,r,l)=>[vs(as(Aa),l.onSpace),vs(Pc([vg,as(Or)]),l.onEnter),vs(Pc([Wi,as(Or)]),l.onShiftEnter),vs(Pc([Wi,as(Hs)]),l.onShiftTab),vs(Pc([vg,as(Hs)]),l.onTab),vs(as(Kd),l.onUp),vs(as(Lh),l.onDown),vs(as(bu),l.onLeft),vs(as(km),l.onRight),vs(as(Aa),l.onSpace)],GH=(t,r,l)=>[...l.stopSpaceKeyup?[vs(as(Aa),gv)]:[],vs(as(ia),l.onEscape)];var k3=Am(M1,Vd.init,ZH,GH,t=>t.focusIn);const qH=f_.schema(),KH=hv.schema(),JH=IH.schema(),A3=NH.schema(),R_=UH.schema(),D_=AH.schema(),QH=jH.schema(),Fp=k3.schema();var T3=Object.freeze({__proto__:null,acyclic:qH,cyclic:KH,flow:JH,flatgrid:A3,matrix:R_,execution:D_,menu:QH,special:Fp});const E3=t=>Lr(t,"setGridSize"),po=Px({branchKey:"mode",branches:T3,name:"keying",active:{events:(t,r)=>t.handler.toEvents(t,r)},apis:{focusIn:(t,r,l)=>{r.sendFocusIn(r).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},h=>{h(t,r,l)})},setGridSize:(t,r,l,h,p)=>{E3(l)?l.setGridSize(h,p):console.error("Layout does not support setGridSize")}},state:EH}),_3=(t,r)=>{dy(()=>{zy(t,r,()=>dt(r,t.getSystem().build))},t.element)},P1=(t,r)=>{dy(()=>{Tp(t,r,()=>d2(t.element,r,t.getSystem().buildOrPatch))},t.element)},rw=(t,r,l,h)=>{n1(r);const p=gp(t.element,l,h,t.getSystem().buildOrPatch);Hy(t,p),t.syncComponents()},GS=(t,r,l)=>{const h=t.getSystem().build(l);ev(t,h,r)},M_=(t,r,l,h)=>{pg(r),GS(t,(p,y)=>qh(p,y,l),h)},Bp=(t,r,l,h)=>(r.reuseDom?P1:_3)(t,h),Hp=(t,r,l,h)=>{GS(t,Ni,h)},e6=(t,r,l,h)=>{GS(t,Fc,h)},t6=(t,r,l,h)=>{const p=aw(t);We(p,S=>Fs(h.element,S.element)).each(pg)},aw=(t,r)=>t.components(),xf=(t,r,l,h,p)=>{const y=aw(t);return V.from(y[h]).map(S=>(p.fold(()=>pg(S),R=>{(r.reuseDom?rw:M_)(t,S,h,R)}),S))};var n6=Object.freeze({__proto__:null,append:Hp,prepend:e6,remove:t6,replaceAt:xf,replaceBy:(t,r,l,h,p)=>{const y=aw(t);return Ie(y,h).bind(S=>xf(t,r,l,S,p))},set:Bp,contents:aw});const Wo=ul({fields:[Ti("reuseDom",!0)],name:"replacing",apis:n6}),R3=(t,r)=>{const l=Er(r);return ul({fields:[Lt("enabled")],name:t,active:{events:ce(l)}})},Ko=(t,r)=>{const l=R3(t,r);return{key:t,value:{config:{},me:l,configAsRaw:ce({}),initialConfig:{},state:Vd}}},qS=(t,r)=>{r.ignore||(Fu(t.element),r.onFocus(t))};var s6=Object.freeze({__proto__:null,focus:qS,blur:(t,r)=>{r.ignore||pp(t.element)},isFocused:t=>am(t.element)}),L_=Object.freeze({__proto__:null,exhibit:(t,r)=>{const l=r.ignore?{}:{attributes:{tabindex:"-1"}};return xc(l)},events:t=>Er([Nt($d(),(r,l)=>{qS(r,t),l.stop()})].concat(t.stopMousedown?[Nt(Na(),(r,l)=>{l.event.prevent()})]:[]))}),KS=[Ws("onFocus"),rt("stopMousedown",!1),rt("ignore",!1)];const Io=ul({fields:KS,name:"focusing",active:L_,apis:s6}),r6=t=>({init:()=>{const l=to(t);return{get:()=>l.get(),set:R=>l.set(R),clear:()=>l.set(t),readState:()=>l.get()}}}),D3=(t,r,l)=>{const h=r.aria;h.update(t,h,l.get())},M3=(t,r,l)=>{r.toggleClass.each(h=>{l.get()?bi(t.element,h):_r(t.element,h)})},L1=(t,r,l,h)=>{const p=l.get();l.set(h),M3(t,r,l),D3(t,r,l),p!==h&&r.onToggled(t,h)},N_=(t,r,l)=>{L1(t,r,l,!l.get())},a6=(t,r,l)=>{L1(t,r,l,!0)},I_=(t,r,l)=>{L1(t,r,l,!1)},i6=(t,r,l)=>l.get(),P3=(t,r,l)=>{L1(t,r,l,r.selected)};var l6=Object.freeze({__proto__:null,onLoad:P3,toggle:N_,isOn:i6,on:a6,off:I_,set:L1}),u6=Object.freeze({__proto__:null,exhibit:()=>xc({}),events:(t,r)=>{const l=zT(t,r,N_),h=jg(t,r,P3);return Er(Ze([t.toggleOnExecute?[l]:[],[h]]))}});const d6=(t,r,l)=>{kt(t.element,"aria-pressed",l),r.syncWithExpanded&&N3(t,r,l)},L3=(t,r,l)=>{kt(t.element,"aria-selected",l)},iw=(t,r,l)=>{kt(t.element,"aria-checked",l)},N3=(t,r,l)=>{kt(t.element,"aria-expanded",l)};var lw=[rt("selected",!1),tr("toggleClass"),rt("toggleOnExecute",!0),Ws("onToggled"),Ir("aria",{mode:"none"},Ga("mode",{pressed:[rt("syncWithExpanded",!1),ra("update",d6)],checked:[ra("update",iw)],expanded:[ra("update",N3)],selected:[ra("update",L3)],none:[ra("update",oe)]}))];const hs=ul({fields:lw,name:"toggling",active:u6,apis:l6,state:r6(!1)}),F_=()=>{const t=(r,l)=>{l.stop(),Xg(r)};return[Nt(Bf(),t),Nt(u0(),t),Vf(Du()),Vf(Na())]},cw=t=>{const r=l=>ag((h,p)=>{l(h),p.stop()});return Er(Ze([t.map(r).toArray(),F_()]))},I3="alloy.item-hover",F3="alloy.item-focus",B_="alloy.item-toggled",B3=t=>{(ic(t.element).isNone()||Io.isFocused(t))&&(Io.isFocused(t)||Io.focus(t),Jn(t,I3,{item:t}))},H_=t=>{Jn(t,F3,{item:t})},h6=(t,r)=>{Jn(t,B_,{item:t,state:r})},H3=ce(I3),$3=ce(F3),JS=ce(B_),$_=t=>t.role.fold(()=>t.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Gt),z_=(t,r)=>({aria:{mode:r?"selected":"checked"},...Wr(t,(l,h)=>h!=="exclusive"),onToggled:(l,h)=>{Bt(t.onToggled)&&t.onToggled(l,h),h6(l,h)}}),g6=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:$_(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:$u.augment(t.itemBehaviours,[t.toggling.fold(hs.revoke,r=>hs.config(z_(r,t.role.exists(l=>l==="option")))),Io.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:r=>{H_(r)}}),po.config({mode:"execution"}),En.config({store:{mode:"memory",initialValue:t.data}}),Ko("item-type-events",[...F_(),Nt(bc(),B3),Nt(Vg(),Io.focus)])]),components:t.components,eventOrder:t.eventOrder}),f6=[Lt("data"),Lt("components"),Lt("dom"),rt("hasSubmenu",!1),tr("toggling"),tr("role"),$u.field("itemBehaviours",[hs,Io,po,En]),rt("ignoreFocus",!1),rt("domModification",{}),ra("builder",g6),rt("eventOrder",{})],m6=t=>({dom:t.dom,components:t.components,events:Er([Cb(Vg())])}),p6=[Lt("dom"),Lt("components"),ra("builder",m6)],QS=ce("item-widget"),ek=ce([Zl({name:"widget",overrides:t=>({behaviours:en([En.config({store:{mode:"manual",getValue:r=>t.data,setValue:oe}})])})})]),b6=t=>{const r=PS(QS(),t,ek()),l=y1(QS(),t,r.internals()),h=y=>Ur(y,t,"widget").map(S=>(po.focusIn(S),S)),p=(y,S)=>Np(S.event.target)?V.none():(t.autofocus&&S.setSource(y.element),V.none());return{dom:t.dom,components:l,domModification:t.domModification,events:Er([ag((y,S)=>{h(y).each(R=>{S.stop()})}),Nt(bc(),B3),Nt(Vg(),(y,S)=>{t.autofocus?h(y):Io.focus(y)})]),behaviours:$u.augment(t.widgetBehaviours,[En.config({store:{mode:"memory",initialValue:t.data}}),Io.config({ignore:t.ignoreFocus,onFocus:y=>{H_(y)}}),po.config({mode:"special",focusIn:t.autofocus?y=>{h(y)}:Lx(),onLeft:p,onRight:p,onEscape:(y,S)=>!Io.isFocused(y)&&!t.autofocus?(Io.focus(y),V.some(!0)):(t.autofocus&&S.setSource(y.element),V.none())})])}},v6=[Lt("uid"),Lt("data"),Lt("components"),Lt("dom"),rt("autofocus",!1),rt("ignoreFocus",!1),$u.field("widgetBehaviours",[En,Io,po]),rt("domModification",{}),lv(ek()),ra("builder",b6)],x6=Ga("type",{widget:v6,item:f6,separator:p6}),y6=(t,r)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}),w6=(t,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},previousSelector:r.previousSelector,focusManager:t.focusManager}),C6=(t,r)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}),z3=ce([iv({factory:{sketch:t=>{const r=Ul("menu.spec item",x6,t);return r.builder(r)}},name:"items",unit:"item",defaults:(t,r)=>os(r,"uid")?r:{...r,uid:Db("item")},overrides:(t,r)=>({type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),S6=ce([Ai("role"),Lt("value"),Lt("items"),Lt("dom"),Lt("components"),rt("eventOrder",{}),hl("menuBehaviours",[dn,En,Bs,po]),Ir("movement",{mode:"menu",moveOnTab:!0},Ga("mode",{grid:[dg(),ra("config",y6)],matrix:[ra("config",w6),Lt("rowSelector"),rt("previousSelector",V.none)],menu:[rt("moveOnTab",!0),ra("config",C6)]})),qT(),rt("fakeFocus",!1),rt("focusManager",_1()),Ws("onHighlight"),Ws("onDehighlight"),rt("showMenuRole",!0)]),V3=ce("alloy.menu-focus"),k6=(t,r)=>{const l=Tl(t.element,'[role="menuitemradio"][aria-checked="true"]');wt(l,h=>{Fs(h,r.element)||t.getSystem().getByDom(h).each(p=>{hs.off(p)})})},A6=(t,r,l,h)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:gl(t.menuBehaviours,[dn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),En.config({store:{mode:"memory",initialValue:t.value}}),Bs.config({find:V.some}),po.config(t.movement.config(t,t.movement))]),events:Er([Nt($3(),(p,y)=>{const S=y.event;p.getSystem().getByDom(S.target).each(R=>{dn.highlight(p,R),y.stop(),Jn(p,V3(),{menu:p,item:R})})}),Nt(H3(),(p,y)=>{const S=y.event.item;dn.highlight(p,S)}),Nt(JS(),(p,y)=>{const{item:S,state:R}=y.event;R&&In(S.element,"role")==="menuitemradio"&&k6(p,S)})]),components:r,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),fv=Hl({name:"Menu",configFields:S6(),partFields:z3(),factory:A6}),mv=t=>Xs(t,(r,l)=>({k:r,v:l})),W3=(t,r,l,h)=>Yt(l,h).bind(p=>Yt(t,p).bind(y=>{const S=W3(t,r,l,y);return V.some([y].concat(S))})).getOr([]),T6=(t,r)=>{const l={};$s(t,(S,R)=>{wt(S,I=>{l[I]=R})});const h=r,p=mv(r),y=Go(p,(S,R)=>[R].concat(W3(l,h,p,R)));return Go(l,S=>Yt(y,S).getOr([S]))},pv=()=>{const t=to({}),r=to({}),l=to({}),h=zs(),p=to({}),y=()=>{t.set({}),r.set({}),l.set({}),h.clear()},S=()=>h.get().isNone(),R=(St,un)=>{r.set({...r.get(),[St]:{type:"prepared",menu:un}})},I=(St,un,Pn,Rt)=>{h.set(St),t.set(Pn),r.set(un),p.set(Rt);const Nn=T6(Rt,Pn);l.set(Nn)},H=St=>uo(t.get(),(un,Pn)=>un===St),X=(St,un,Pn)=>_e(St).bind(Rt=>H(St).bind(Nn=>un(Nn).map(kn=>({triggeredMenu:Rt,triggeringItem:kn,triggeringPath:Pn})))),K=(St,un)=>{const Pn=zo(Fe(St).toArray(),Rt=>_e(Rt).isSome());return Yt(l.get(),St).bind(Rt=>{const Nn=Mo(Pn.concat(Rt)),kn=De(Nn,(Vn,Es)=>X(Vn,un,Nn.slice(0,Es+1)).fold(()=>Zr(h.get(),Vn)?[]:[V.none()],ua=>[V.some(ua)]));return Is(kn)})},ie=St=>Yt(t.get(),St).map(un=>{const Pn=Yt(l.get(),St).getOr([]);return[un].concat(Pn)}),de=St=>Yt(l.get(),St).bind(un=>un.length>1?V.some(un.slice(1)):V.none()),Ce=St=>Yt(l.get(),St),_e=St=>et(St).bind(V_),et=St=>Yt(r.get(),St),Fe=St=>Yt(t.get(),St);return{setMenuBuilt:R,setContents:I,expand:ie,refresh:Ce,collapse:de,lookupMenu:et,lookupItem:Fe,otherMenus:St=>{const un=p.get();return Cn(ds(un),St)},getPrimary:()=>h.get().bind(_e),getMenus:()=>r.get(),clear:y,isClear:S,getTriggeringPath:K}},V_=t=>t.type==="prepared"?V.some(t.menu):V.none(),U3={init:pv,extractPreparedMenu:V_},Em=Fn("tiered-menu-item-highlight"),X3=Fn("tiered-menu-item-dehighlight");var qc;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(qc||(qc={}));const Jd=(t,r)=>{const l=zs(),h=(Zt,wn,$o)=>Go($o,(is,mo)=>{const Zo=()=>fv.sketch({...is,value:mo,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Vr,Rr)=>{Jn(Vr,Em,{menuComp:Vr,itemComp:Rr})},onDehighlight:(Vr,Rr)=>{Jn(Vr,X3,{menuComp:Vr,itemComp:Rr})},focusManager:t.fakeFocus?BS():_1()});return mo===wn?{type:"prepared",menu:Zt.getSystem().build(Zo())}:{type:"notbuilt",nbMenu:Zo}}),p=U3.init(),y=Zt=>{const wn=h(Zt,t.data.primary,t.data.menus),$o=I();return p.setContents(t.data.primary,wn,t.data.expansions,$o),p.getPrimary()},S=Zt=>En.getValue(Zt).value,R=(Zt,wn,$o)=>qo(wn,is=>{if(!is.getSystem().isConnected())return V.none();const mo=dn.getCandidates(is);return We(mo,Zo=>S(Zo)===$o)}),I=Zt=>Go(t.data.menus,(wn,$o)=>De(wn.items,is=>is.type==="separator"?[]:[is.data.value])),H=dn.highlight,X=(Zt,wn)=>{H(Zt,wn),dn.getHighlighted(wn).orThunk(()=>dn.getFirst(wn)).each($o=>{t.fakeFocus?dn.highlight(wn,$o):g0(Zt,$o.element,Vg())})},K=(Zt,wn)=>Xa(dt(wn,$o=>Zt.lookupMenu($o).bind(is=>is.type==="prepared"?V.some(is.menu):V.none()))),ie=(Zt,wn,$o)=>{const is=K(wn,wn.otherMenus($o));wt(is,mo=>{Wd(mo.element,[t.markers.backgroundMenu]),t.stayInDom||Wo.remove(Zt,mo)})},de=Zt=>l.get().getOrThunk(()=>{const wn={},$o=Tl(Zt.element,`.${t.markers.item}`),is=zo($o,mo=>In(mo,"aria-haspopup")==="true");return wt(is,mo=>{Zt.getSystem().getByDom(mo).each(Zo=>{const Vr=S(Zo);wn[Vr]=Zo})}),l.set(wn),wn}),Ce=(Zt,wn)=>{const $o=de(Zt);$s($o,(is,mo)=>{const Zo=No(wn,mo);kt(is.element,"aria-expanded",Zo)})},_e=(Zt,wn,$o)=>V.from($o[0]).bind(is=>wn.lookupMenu(is).bind(mo=>{if(mo.type==="notbuilt")return V.none();{const Zo=mo.menu,Vr=K(wn,$o.slice(1));return wt(Vr,Rr=>{bi(Rr.element,t.markers.backgroundMenu)}),Me(Zo.element)||Wo.append(Zt,du(Zo)),Wd(Zo.element,[t.markers.backgroundMenu]),X(Zt,Zo),ie(Zt,wn,$o),V.some(Zo)}}));let et;(function(Zt){Zt[Zt.HighlightSubmenu=0]="HighlightSubmenu",Zt[Zt.HighlightParent=1]="HighlightParent"})(et||(et={}));const Fe=(Zt,wn,$o)=>{if($o.type==="notbuilt"){const is=Zt.getSystem().build($o.nbMenu());return p.setMenuBuilt(wn,is),is}else return $o.menu},Ke=(Zt,wn,$o=et.HighlightSubmenu)=>{if(wn.hasConfigured(Do)&&Do.isDisabled(wn))return V.some(wn);{const is=S(wn);return p.expand(is).bind(mo=>(Ce(Zt,mo),V.from(mo[0]).bind(Zo=>p.lookupMenu(Zo).bind(Vr=>{const Rr=Fe(Zt,Zo,Vr);return Me(Rr.element)||Wo.append(Zt,du(Rr)),t.onOpenSubmenu(Zt,wn,Rr,Mo(mo)),$o===et.HighlightSubmenu?(dn.highlightFirst(Rr),_e(Zt,p,mo)):(dn.dehighlightAll(Rr),V.some(wn))}))))}},Qe=(Zt,wn)=>{const $o=S(wn);return p.collapse($o).bind(is=>(Ce(Zt,is),_e(Zt,p,is).map(mo=>(t.onCollapseMenu(Zt,wn,mo),mo))))},yt=(Zt,wn)=>{const $o=S(wn);return p.refresh($o).bind(is=>(Ce(Zt,is),_e(Zt,p,is)))},St=(Zt,wn)=>Np(wn.element)?V.none():Ke(Zt,wn,et.HighlightSubmenu),un=(Zt,wn)=>Np(wn.element)?V.none():Qe(Zt,wn),Pn=(Zt,wn)=>Qe(Zt,wn).orThunk(()=>t.onEscape(Zt,wn).map(()=>Zt)),Rt=Zt=>(wn,$o)=>Oh($o.getSource(),`.${t.markers.item}`).bind(is=>wn.getSystem().getByDom(is).toOptional().bind(mo=>Zt(wn,mo).map(ot))),Nn=Er([Nt(V3(),(Zt,wn)=>{const $o=wn.event.item;p.lookupItem(S($o)).each(()=>{const is=wn.event.menu;dn.highlight(Zt,is);const mo=S(wn.event.item);p.refresh(mo).each(Zo=>ie(Zt,p,Zo))})}),ag((Zt,wn)=>{const $o=wn.event.target;Zt.getSystem().getByDom($o).each(is=>{S(is).indexOf("collapse-item")===0&&Qe(Zt,is),Ke(Zt,is,et.HighlightSubmenu).fold(()=>{t.onExecute(Zt,is)},oe)})}),ba((Zt,wn)=>{y(Zt).each($o=>{Wo.append(Zt,du($o)),t.onOpenMenu(Zt,$o),t.highlightOnOpen===qc.HighlightMenuAndItem?X(Zt,$o):t.highlightOnOpen===qc.HighlightJustMenu&&H(Zt,$o)})}),Nt(Em,(Zt,wn)=>{t.onHighlightItem(Zt,wn.event.menuComp,wn.event.itemComp)}),Nt(X3,(Zt,wn)=>{t.onDehighlightItem(Zt,wn.event.menuComp,wn.event.itemComp)}),...t.navigateOnHover?[Nt(H3(),(Zt,wn)=>{const $o=wn.event.item;yt(Zt,$o),Ke(Zt,$o,et.HighlightParent),t.onHover(Zt,$o)})]:[]]),kn=Zt=>dn.getHighlighted(Zt).bind(dn.getHighlighted),Vn=Zt=>{kn(Zt).each(wn=>{Qe(Zt,wn)})},Es=Zt=>{p.getPrimary().each(wn=>{X(Zt,wn)})},ua=Zt=>V.from(Zt.components()[0]).filter(wn=>In(wn.element,"role")==="menu"),Kn={collapseMenu:Vn,highlightPrimary:Es,repositionMenus:Zt=>{p.getPrimary().bind($o=>kn(Zt).bind(is=>{const mo=S(is),Zo=Ri(p.getMenus()),Vr=Xa(dt(Zo,U3.extractPreparedMenu));return p.getTriggeringPath(mo,Rr=>R(Zt,Vr,Rr))}).map(is=>({primary:$o,triggeringPath:is}))).fold(()=>{ua(Zt).each($o=>{t.onRepositionMenu(Zt,$o,[])})},({primary:$o,triggeringPath:is})=>{t.onRepositionMenu(Zt,$o,is)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:gl(t.tmenuBehaviours,[po.config({mode:"special",onRight:Rt(St),onLeft:Rt(un),onEscape:Rt(Pn),focusIn:(Zt,wn)=>{p.getPrimary().each($o=>{g0(Zt,$o.element,Vg())})}}),dn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Bs.config({find:Zt=>dn.getHighlighted(Zt)}),Wo.config({})]),eventOrder:t.eventOrder,apis:Kn,events:Nn}},Y3=ce("collapse-item"),j3=(t,r,l)=>({primary:t,menus:r,expansions:l}),Z3=(t,r)=>({primary:t,menus:Po(t,r),expansions:{}}),E6=t=>({value:Fn(Y3()),meta:{text:t}}),yf=Zc({name:"TieredMenu",configFields:[cp("onExecute"),cp("onEscape"),Kf("onOpenMenu"),Kf("onOpenSubmenu"),Ws("onRepositionMenu"),Ws("onCollapseMenu"),rt("highlightOnOpen",qc.HighlightMenuAndItem),xh("data",[Lt("primary"),Lt("menus"),Lt("expansions")]),rt("fakeFocus",!1),Ws("onHighlightItem"),Ws("onDehighlightItem"),Ws("onHover"),_h(),Lt("dom"),rt("navigateOnHover",!0),rt("stayInDom",!1),hl("tmenuBehaviours",[po,dn,Bs,Wo]),rt("eventOrder",{})],apis:{collapseMenu:(t,r)=>{t.collapseMenu(r)},highlightPrimary:(t,r)=>{t.highlightPrimary(r)},repositionMenus:(t,r)=>{t.repositionMenus(r)}},factory:Jd,extraApis:{tieredData:j3,singleData:Z3,collapseItem:E6}}),G3=(t,r,l,h,p)=>{const y=()=>t.lazySink(r),S=h.type==="horizontal"?{layouts:{onLtr:()=>Bb(),onRtl:()=>H0()}}:{},R=H=>H.length===2,I=H=>R(H)?S:{};return yf.sketch({dom:{tag:"div"},data:h.data,markers:h.menu.markers,highlightOnOpen:h.menu.highlightOnOpen,fakeFocus:h.menu.fakeFocus,onEscape:()=>(Gs.close(r),t.onEscape.map(H=>H(r)),V.some(!0)),onExecute:()=>V.some(!0),onOpenMenu:(H,X)=>{_l.positionWithinBounds(y().getOrDie(),X,l,p())},onOpenSubmenu:(H,X,K,ie)=>{const de=y().getOrDie();_l.position(de,K,{anchor:{type:"submenu",item:X,...I(ie)}})},onRepositionMenu:(H,X,K)=>{const ie=y().getOrDie();_l.positionWithinBounds(ie,X,l,p()),wt(K,de=>{const Ce=I(de.triggeringPath);_l.position(ie,de.triggeredMenu,{anchor:{type:"submenu",item:de.triggeringItem,...Ce}})})}})},_6=(t,r)=>{const l=(ie,de)=>t.getRelated(ie).exists(_e=>tf(_e,de)),h=(ie,de)=>{Gs.setContent(ie,de)},p=(ie,de,Ce)=>{const _e=V.none;y(ie,de,Ce,_e)},y=(ie,de,Ce,_e)=>{const et=t.lazySink(ie).getOrDie();Gs.openWhileCloaked(ie,de,()=>_l.positionWithinBounds(et,ie,Ce,_e())),En.setValue(ie,V.some({mode:"position",config:Ce,getBounds:_e}))},S=(ie,de,Ce)=>{R(ie,de,Ce,V.none)},R=(ie,de,Ce,_e)=>{const et=G3(t,ie,de,Ce,_e);Gs.open(ie,et),En.setValue(ie,V.some({mode:"menu",menu:et}))},I=ie=>{Gs.isOpen(ie)&&(En.setValue(ie,V.none()),Gs.close(ie))},H=ie=>Gs.getState(ie),X=ie=>{Gs.isOpen(ie)&&En.getValue(ie).each(de=>{switch(de.mode){case"menu":Gs.getState(ie).each(yf.repositionMenus);break;case"position":const Ce=t.lazySink(ie).getOrDie();_l.positionWithinBounds(Ce,ie,de.config,de.getBounds());break}})},K={setContent:h,showAt:p,showWithinBounds:y,showMenuAt:S,showMenuWithinBounds:R,hide:I,getContent:H,reposition:X,isOpen:Gs.isOpen};return{uid:t.uid,dom:t.dom,behaviours:gl(t.inlineBehaviours,[Gs.config({isPartOf:(ie,de,Ce)=>tf(de,Ce)||l(ie,Ce),getAttachPoint:ie=>t.lazySink(ie).getOrDie(),onOpen:ie=>{t.onShow(ie)},onClose:ie=>{t.onHide(ie)}}),En.config({store:{mode:"memory",initialValue:V.none()}}),Uc.config({channels:{...ov({isExtraPart:r.isExtraPart,...t.fireDismissalEventInstead.map(ie=>({fireEventInstead:{event:ie.event}})).getOr({})}),...sv({...t.fireRepositionEventInstead.map(ie=>({fireEventInstead:{event:ie.event}})).getOr({}),doReposition:X})}})]),eventOrder:t.eventOrder,apis:K}},Va=Zc({name:"InlineView",configFields:[Lt("lazySink"),Ws("onShow"),Ws("onHide"),Ru("onEscape"),hl("inlineBehaviours",[Gs,En,Uc]),Bi("fireDismissalEventInstead",[rt("event",uu())]),Bi("fireRepositionEventInstead",[rt("event",yb())]),rt("getRelated",V.none),rt("isExtraPart",Je),rt("eventOrder",V.none)],factory:_6,apis:{showAt:(t,r,l,h)=>{t.showAt(r,l,h)},showWithinBounds:(t,r,l,h,p)=>{t.showWithinBounds(r,l,h,p)},showMenuAt:(t,r,l,h)=>{t.showMenuAt(r,l,h)},showMenuWithinBounds:(t,r,l,h,p)=>{t.showMenuWithinBounds(r,l,h,p)},hide:(t,r)=>{t.hide(r)},isOpen:(t,r)=>t.isOpen(r),getContent:(t,r)=>t.getContent(r),setContent:(t,r,l)=>{t.setContent(r,l)},reposition:(t,r)=>{t.reposition(r)}}});var bv=tinymce.util.Tools.resolve("tinymce.util.Delay"),$p=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),q3=tinymce.util.Tools.resolve("tinymce.EditorManager"),vv=tinymce.util.Tools.resolve("tinymce.Env"),xd;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(xd||(xd={}));var uw;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(uw||(uw={}));const zr=t=>r=>r.options.get(t),N1=t=>r=>V.from(t(r)),K3=t=>{const r=vv.deviceType.isPhone(),l=vv.deviceType.isTablet()||r,h=t.options.register,p=S=>Ot(S)||S===!1,y=S=>Ot(S)||vo(S);h("skin",{processor:S=>Ot(S)||S===!1,default:"oxide"}),h("skin_url",{processor:"string"}),h("height",{processor:y,default:Math.max(t.getElement().offsetHeight,400)}),h("width",{processor:y,default:$p.DOM.getStyle(t.getElement(),"width")}),h("min_height",{processor:"number",default:100}),h("min_width",{processor:"number"}),h("max_height",{processor:"number"}),h("max_width",{processor:"number"}),h("style_formats",{processor:"object[]"}),h("style_formats_merge",{processor:"boolean",default:!1}),h("style_formats_autohide",{processor:"boolean",default:!1}),h("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),h("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),h("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),h("font_size_input_default_unit",{processor:"string",default:"pt"}),h("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),h("content_langs",{processor:"object[]"}),h("removed_menuitems",{processor:"string",default:""}),h("menubar",{processor:S=>Ot(S)||Tt(S),default:!r}),h("menu",{processor:"object",default:{}}),h("toolbar",{processor:S=>Tt(S)||Ot(S)||Bo(S)?{value:S,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Ht(9,S=>{h("toolbar"+(S+1),{processor:"string"})}),h("toolbar_mode",{processor:"string",default:l?"scrolling":"floating"}),h("toolbar_groups",{processor:"object",default:{}}),h("toolbar_location",{processor:"string",default:uw.auto}),h("toolbar_persist",{processor:"boolean",default:!1}),h("toolbar_sticky",{processor:"boolean",default:t.inline}),h("toolbar_sticky_offset",{processor:"number",default:0}),h("fixed_toolbar_container",{processor:"string",default:""}),h("fixed_toolbar_container_target",{processor:"object"}),h("ui_mode",{processor:"string",default:"combined"}),h("file_picker_callback",{processor:"function"}),h("file_picker_validator_handler",{processor:"function"}),h("file_picker_types",{processor:"string"}),h("typeahead_urls",{processor:"boolean",default:!0}),h("anchor_top",{processor:p,default:"#top"}),h("anchor_bottom",{processor:p,default:"#bottom"}),h("draggable_modal",{processor:"boolean",default:!1}),h("statusbar",{processor:"boolean",default:!0}),h("elementpath",{processor:"boolean",default:!0}),h("branding",{processor:"boolean",default:!0}),h("promotion",{processor:"boolean",default:!0}),h("resize",{processor:S=>S==="both"||Tt(S),default:!vv.deviceType.isTouch()}),h("sidebar_show",{processor:"string"}),h("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),h("default_font_stack",{processor:"string[]",default:[]})},J3=zr("readonly"),W_=zr("height"),dw=zr("width"),U_=N1(zr("min_width")),xv=N1(zr("min_height")),yv=N1(zr("max_width")),tk=N1(zr("max_height")),X_=N1(zr("style_formats")),Q3=zr("style_formats_merge"),eP=zr("style_formats_autohide"),tP=zr("content_langs"),nP=zr("removed_menuitems"),zp=zr("toolbar_mode"),Y_=zr("toolbar_groups"),nk=zr("toolbar_location"),j_=zr("fixed_toolbar_container"),O6=zr("fixed_toolbar_container_target"),Z_=zr("toolbar_persist"),oP=zr("toolbar_sticky_offset"),sP=zr("menubar"),ok=zr("toolbar"),G_=zr("file_picker_callback"),rP=zr("file_picker_validator_handler"),aP=zr("font_size_input_default_unit"),sk=zr("file_picker_types"),q_=zr("typeahead_urls"),K_=zr("anchor_top"),iP=zr("anchor_bottom"),rk=zr("draggable_modal"),lP=zr("statusbar"),cP=zr("elementpath"),J_=zr("branding"),uP=zr("resize"),dP=zr("paste_as_text"),Q_=zr("sidebar_show"),ak=zr("promotion"),hP=zr("help_accessibility"),hw=zr("default_font_stack"),eO=t=>t.options.get("skin")===!1,ik=t=>t.options.get("menubar")!==!1,tO=t=>{const r=t.options.get("skin_url");if(eO(t))return r;if(r)return t.documentBaseURI.toAbsolute(r);{const l=t.options.get("skin");return q3.baseURL+"/skins/ui/"+l}},lk=t=>V.from(t.options.get("skin_url")),gP=t=>t.options.get("line_height_formats").split(" "),ck=t=>{const r=ok(t),l=Ot(r),h=Bo(r)&&r.length>0;return!gw(t)&&(h||l||r===!0)},uk=t=>{const r=Ht(9,h=>t.options.get("toolbar"+(h+1))),l=zo(r,Ot);return Qn(l.length>0,l)},gw=t=>uk(t).fold(()=>{const r=ok(t);return xn(r,Ot)&&r.length>0},ot),nO=t=>nk(t)===uw.bottom,dk=t=>{var r;if(!t.inline)return V.none();const l=(r=j_(t))!==null&&r!==void 0?r:"";if(l.length>0)return Ca(Ge(),l);const h=O6(t);return vn(h)?V.some(Xe.fromDom(h)):V.none()},Nh=t=>t.inline&&dk(t).isSome(),oO=t=>dk(t).getOrThunk(()=>Ba(ga(Xe.fromDom(t.getElement())))),sO=t=>t.inline&&!ik(t)&&!ck(t)&&!gw(t),Vp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Nh(t)&&!sO(t),_m=t=>!Nh(t)&&t.options.get("ui_mode")==="split",fP=t=>{const r=t.options.get("menu");return Go(r,l=>({...l,items:l.items}))};var R6=Object.freeze({__proto__:null,get ToolbarMode(){return xd},get ToolbarLocation(){return uw},register:K3,getSkinUrl:tO,getSkinUrlOption:lk,isReadOnly:J3,isSkinDisabled:eO,getHeightOption:W_,getWidthOption:dw,getMinWidthOption:U_,getMinHeightOption:xv,getMaxWidthOption:yv,getMaxHeightOption:tk,getUserStyleFormats:X_,shouldMergeStyleFormats:Q3,shouldAutoHideStyleFormats:eP,getLineHeightFormats:gP,getContentLanguages:tP,getRemovedMenuItems:nP,isMenubarEnabled:ik,isMultipleToolbars:gw,isToolbarEnabled:ck,isToolbarPersist:Z_,getMultipleToolbarsOption:uk,getUiContainer:oO,useFixedContainer:Nh,isSplitUiMode:_m,getToolbarMode:zp,isDraggableModal:rk,isDistractionFree:sO,isStickyToolbar:Vp,getStickyToolbarOffset:oP,getToolbarLocation:nk,isToolbarLocationBottom:nO,getToolbarGroups:Y_,getMenus:fP,getMenubar:sP,getToolbar:ok,getFilePickerCallback:G_,getFilePickerTypes:sk,useTypeaheadUrls:q_,getAnchorTop:K_,getAnchorBottom:iP,getFilePickerValidatorHandler:rP,getFontSizeInputDefaultUnit:aP,useStatusBar:lP,useElementPath:cP,promotionEnabled:ak,useBranding:J_,getResize:uP,getPasteAsText:dP,getSidebarShow:Q_,useHelpAccessibility:hP,getDefaultFontStack:hw});const mP=["visible","hidden","clip"],pP=t=>Ms(t).length>0&&!No(mP,t),rO=t=>{if(Ja(t)){const r=nr(t,"overflow-x"),l=nr(t,"overflow-y");return pP(r)||pP(l)}else return!1},aO=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),iO=(t,r)=>{const l=Sp(r,rO),h=l.length===0?Ha(r).map(nc).map(p=>Sp(p,rO)).getOr([]):l;return ur(h).map(p=>({element:p,others:h.slice(1),isFullscreen:()=>aO(t)}))},Wp=(t,r)=>_m(t)?iO(t,r):V.none(),Up=t=>{const r=[...dt(t.others,Hr),La()];return t.isFullscreen()?La():Nd(Hr(t.element),r)},tl=Zc({name:"Button",factory:t=>{const r=cw(t.action),l=t.dom.tag,h=y=>Yt(t.dom,"attributes").bind(S=>Yt(S,y)),p=()=>{if(l==="button"){const y=h("type").getOr("button"),S=h("role").map(R=>({role:R})).getOr({});return{type:y,...S}}else return{role:t.role.getOr(h("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:$u.augment(t.buttonBehaviours,[Io.config({}),po.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:p()},eventOrder:t.eventOrder}},configFields:[rt("uid",void 0),Lt("dom"),rt("components",[]),$u.field("buttonBehaviours",[Io,po]),tr("action"),tr("role"),rt("eventOrder",{})]}),D6=t=>{const r=t.dom.attributes!==void 0?t.dom.attributes:[];return ms(r,(l,h)=>h.name==="class"?l:{...l,[h.name]:h.value},{})},M6=t=>Array.prototype.slice.call(t.dom.classList,0),xg=t=>{const r=Xe.fromHtml(t),l=gi(r),h=D6(r),p=M6(r),y=l.length===0?{}:{innerHtml:cg(r)};return{tag:Ks(r),classes:p,attributes:h,...y}},dr=t=>{const r=o_(t)&&Lr(t,"uid")?t.uid:Db("memento");return{get:y=>y.getSystem().getByUid(r).getOrDie(),getOpt:y=>y.getSystem().getByUid(r).toOptional(),asSpec:()=>({...t,uid:r})}};var lO=Object.freeze({__proto__:null,exhibit:(t,r)=>xc({attributes:ts([{key:r.tabAttr,value:"true"}])})}),P6=[rt("tabAttr","data-alloy-tabstop")];const Sa=ul({fields:P6,name:"tabstopping",active:lO}),hk=Fn("tooltip.exclusive"),fw=Fn("tooltip.show"),mw=Fn("tooltip.hide"),pw=Fn("tooltip.immediateHide"),bw=Fn("tooltip.immediateShow"),bP=(t,r,l)=>{t.getSystem().broadcastOn([hk],{})};var L6=Object.freeze({__proto__:null,hideAllExclusive:bP,immediateOpenClose:(t,r,l,h)=>ws(t,h?bw:pw),isEnabled:(t,r,l)=>l.isEnabled(),setComponents:(t,r,l,h)=>{l.getTooltip().each(p=>{p.getSystem().isConnected()&&Wo.set(p,h)})},setEnabled:(t,r,l,h)=>l.setEnabled(h)}),N6=Object.freeze({__proto__:null,events:(t,r)=>{const l=S=>{r.getTooltip().each(R=>{R.getSystem().isConnected()&&(pg(R),t.onHide(S,R),r.clearTooltip())}),r.clearTimer()},h=S=>{if(!r.isShowing()&&r.isEnabled()){bP(S);const R=t.lazySink(S).getOrDie(),I=S.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Er(t.mode==="normal"?[Nt(bc(),H=>{ws(S,fw)}),Nt(Ym(),H=>{ws(S,mw)})]:[]),behaviours:en([Wo.config({})])});r.setTooltip(I),mg(R,I),t.onShow(S,I),_l.position(R,I,{anchor:t.anchor(S)})}},p=S=>{r.getTooltip().each(R=>{const I=t.lazySink(S).getOrDie();_l.position(I,R,{anchor:t.anchor(S)})})},y=()=>{switch(t.mode){case"normal":return[Nt(vc(),S=>{ws(S,bw)}),Nt(Hf(),S=>{ws(S,pw)}),Nt(bc(),S=>{ws(S,fw)}),Nt(Ym(),S=>{ws(S,mw)})];case"follow-highlight":return[Nt(Ax(),(S,R)=>{ws(S,fw)}),Nt(Gm(),S=>{ws(S,mw)})];case"children-normal":return[Nt(vc(),(S,R)=>{ic(S.element).each(I=>{ea(R.event.target,"[data-mce-tooltip]")&&r.getTooltip().fold(()=>{ws(S,bw)},H=>{r.isShowing()&&(t.onShow(S,H),p(S))})})}),Nt(Hf(),S=>{ic(S.element).fold(()=>{ws(S,pw)},oe)}),Nt(bc(),S=>{Ca(S.element,"[data-mce-tooltip]:hover").each(R=>{r.getTooltip().fold(()=>{ws(S,fw)},I=>{r.isShowing()&&(t.onShow(S,I),p(S))})})}),Nt(Ym(),S=>{Ca(S.element,"[data-mce-tooltip]:hover").fold(()=>{ws(S,mw)},oe)})];default:return[Nt(vc(),(S,R)=>{ic(S.element).each(I=>{ea(R.event.target,"[data-mce-tooltip]")&&r.getTooltip().fold(()=>{ws(S,bw)},H=>{r.isShowing()&&(t.onShow(S,H),p(S))})})}),Nt(Hf(),S=>{ic(S.element).fold(()=>{ws(S,pw)},oe)})]}};return Er(Ze([[VC(S=>{t.onSetup(S)}),Nt(fw,S=>{r.resetTimer(()=>{h(S)},t.delayForShow())}),Nt(mw,S=>{r.resetTimer(()=>{l(S)},t.delayForHide())}),Nt(bw,S=>{r.resetTimer(()=>{h(S)},0)}),Nt(pw,S=>{r.resetTimer(()=>{l(S)},0)}),Nt(zd(),(S,R)=>{const I=R;I.universal||No(I.channels,hk)&&l(S)}),kh(S=>{l(S)})],y()]))}}),cO=[Lt("lazySink"),Lt("tooltipDom"),rt("exclusive",!0),rt("tooltipComponents",[]),sa("delayForShow",ce(300)),sa("delayForHide",ce(300)),sa("onSetup",oe),Ji("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),rt("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ce([Ei,yr,$i,Al,zi,Vi]),onRtl:ce([Ei,yr,$i,Al,zi,Vi])},bubble:bd(0,-2,{})})),Ws("onHide"),Ws("onShow")],I6=Object.freeze({__proto__:null,init:()=>{const t=to(!0),r=zs(),l=zs(),h=()=>{r.on(clearTimeout)},p=(S,R)=>{h(),r.set(setTimeout(S,R))},y=ce("not-implemented");return rc({getTooltip:l.get,isShowing:l.isSet,setTooltip:l.set,clearTooltip:l.clear,clearTimer:h,resetTimer:p,readState:y,isEnabled:()=>t.get(),setEnabled:S=>t.set(S)})}});const ni=ul({fields:cO,name:"tooltipping",active:N6,state:I6,apis:L6});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:uO,setPrototypeOf:vP,isFrozen:F6,getPrototypeOf:B6,getOwnPropertyDescriptor:H6}=Object;let{freeze:Wu,seal:Ih,create:gk}=Object,{apply:dO,construct:hO}=typeof Reflect<"u"&&Reflect;Wu||(Wu=function(r){return r}),Ih||(Ih=function(r){return r}),dO||(dO=function(r,l,h){return r.apply(l,h)}),hO||(hO=function(r,l){return new r(...l)});const fk=Qd(Array.prototype.forEach),xP=Qd(Array.prototype.pop),vw=Qd(Array.prototype.push),mk=Qd(String.prototype.toLowerCase),gO=Qd(String.prototype.toString),yP=Qd(String.prototype.match),xw=Qd(String.prototype.replace),$6=Qd(String.prototype.indexOf),z6=Qd(String.prototype.trim),yg=Qd(Object.prototype.hasOwnProperty),Uu=Qd(RegExp.prototype.test),Xp=fO(TypeError);function Qd(t){return function(r){for(var l=arguments.length,h=new Array(l>1?l-1:0),p=1;p<l;p++)h[p-1]=arguments[p];return dO(t,r,h)}}function fO(t){return function(){for(var r=arguments.length,l=new Array(r),h=0;h<r;h++)l[h]=arguments[h];return hO(t,l)}}function la(t,r){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mk;vP&&vP(t,null);let h=r.length;for(;h--;){let p=r[h];if(typeof p=="string"){const y=l(p);y!==p&&(F6(r)||(r[h]=y),p=y)}t[p]=!0}return t}function V6(t){for(let r=0;r<t.length;r++)yg(t,r)||(t[r]=null);return t}function wv(t){const r=gk(null);for(const[l,h]of uO(t))yg(t,l)&&(Array.isArray(h)?r[l]=V6(h):h&&typeof h=="object"&&h.constructor===Object?r[l]=wv(h):r[l]=h);return r}function I1(t,r){for(;t!==null;){const h=H6(t,r);if(h){if(h.get)return Qd(h.get);if(typeof h.value=="function")return Qd(h.value)}t=B6(t)}function l(){return null}return l}const wP=Wu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yw=Wu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ww=Wu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),CP=Wu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Cw=Wu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pk=Wu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mO=Wu(["#text"]),wg=Wu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Sw=Wu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),SP=Wu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bk=Wu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W6=Ih(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U6=Ih(/<%[\w\W]*|[\w\W]*%>/gm),kw=Ih(/\${[\w\W]*}/gm),X6=Ih(/^data-[\-\w.\u00B7-\uFFFF]/),kP=Ih(/^aria-[\-\w]+$/),vk=Ih(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y6=Ih(/^(?:\w+script|data):/i),pO=Ih(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xk=Ih(/^html$/i),j6=Ih(/^[a-z][.\w]*(-[.\w]+)+$/i);var bO=Object.freeze({__proto__:null,MUSTACHE_EXPR:W6,ERB_EXPR:U6,TMPLIT_EXPR:kw,DATA_ATTR:X6,ARIA_ATTR:kP,IS_ALLOWED_URI:vk,IS_SCRIPT_OR_DATA:Y6,ATTR_WHITESPACE:pO,DOCTYPE_NAME:xk,CUSTOM_ELEMENT:j6});const F1={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Z6=function(){return typeof window>"u"?null:window},AP=function(r,l){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let h=null;const p="data-tt-policy-suffix";l&&l.hasAttribute(p)&&(h=l.getAttribute(p));const y="dompurify"+(h?"#"+h:"");try{return r.createPolicy(y,{createHTML(S){return S},createScriptURL(S){return S}})}catch{return console.warn("TrustedTypes policy "+y+" could not be created."),null}};function vO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z6();const r=Us=>vO(Us);if(r.version="3.1.7",r.removed=[],!t||!t.document||t.document.nodeType!==F1.document)return r.isSupported=!1,r;let{document:l}=t;const h=l,p=h.currentScript,{DocumentFragment:y,HTMLTemplateElement:S,Node:R,Element:I,NodeFilter:H,NamedNodeMap:X=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:K,DOMParser:ie,trustedTypes:de}=t,Ce=I.prototype,_e=I1(Ce,"cloneNode"),et=I1(Ce,"remove"),Fe=I1(Ce,"nextSibling"),Ke=I1(Ce,"childNodes"),Qe=I1(Ce,"parentNode");if(typeof S=="function"){const Us=l.createElement("template");Us.content&&Us.content.ownerDocument&&(l=Us.content.ownerDocument)}let yt,St="";const{implementation:un,createNodeIterator:Pn,createDocumentFragment:Rt,getElementsByTagName:Nn}=l,{importNode:kn}=h;let Vn={};r.isSupported=typeof uO=="function"&&typeof Qe=="function"&&un&&un.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Es,ERB_EXPR:ua,TMPLIT_EXPR:cr,DATA_ATTR:Kn,ARIA_ATTR:Zt,IS_SCRIPT_OR_DATA:wn,ATTR_WHITESPACE:$o,CUSTOM_ELEMENT:is}=bO;let{IS_ALLOWED_URI:mo}=bO,Zo=null;const Vr=la({},[...wP,...yw,...ww,...Cw,...mO]);let Rr=null;const Su=la({},[...wg,...Sw,...SP,...bk]);let Ua=Object.seal(gk(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),_d=null,gc=null,Od=!0,Rd=!0,Xh=!1,LC=!0,Of=!1,k4=!0,r0=!1,A4=!1,CY=!1,PT=!1,xH=!1,yH=!1,Bj=!0,Hj=!1;const PG="user-content-";let SY=!0,T4=!1,LT={},NT=null;const $j=la({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let zj=null;const Vj=la({},["audio","video","img","source","image","track"]);let kY=null;const Wj=la({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wH="http://www.w3.org/1998/Math/MathML",CH="http://www.w3.org/2000/svg",a0="http://www.w3.org/1999/xhtml";let IT=a0,AY=!1,TY=null;const LG=la({},[wH,CH,a0],gO);let E4=null;const NG=["application/xhtml+xml","text/html"],IG="text/html";let ku=null,FT=null;const FG=l.createElement("form"),Uj=function(Ct){return Ct instanceof RegExp||Ct instanceof Function},EY=function(){let Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(FT&&FT===Ct)){if((!Ct||typeof Ct!="object")&&(Ct={}),Ct=wv(Ct),E4=NG.indexOf(Ct.PARSER_MEDIA_TYPE)===-1?IG:Ct.PARSER_MEDIA_TYPE,ku=E4==="application/xhtml+xml"?gO:mk,Zo=yg(Ct,"ALLOWED_TAGS")?la({},Ct.ALLOWED_TAGS,ku):Vr,Rr=yg(Ct,"ALLOWED_ATTR")?la({},Ct.ALLOWED_ATTR,ku):Su,TY=yg(Ct,"ALLOWED_NAMESPACES")?la({},Ct.ALLOWED_NAMESPACES,gO):LG,kY=yg(Ct,"ADD_URI_SAFE_ATTR")?la(wv(Wj),Ct.ADD_URI_SAFE_ATTR,ku):Wj,zj=yg(Ct,"ADD_DATA_URI_TAGS")?la(wv(Vj),Ct.ADD_DATA_URI_TAGS,ku):Vj,NT=yg(Ct,"FORBID_CONTENTS")?la({},Ct.FORBID_CONTENTS,ku):$j,_d=yg(Ct,"FORBID_TAGS")?la({},Ct.FORBID_TAGS,ku):{},gc=yg(Ct,"FORBID_ATTR")?la({},Ct.FORBID_ATTR,ku):{},LT=yg(Ct,"USE_PROFILES")?Ct.USE_PROFILES:!1,Od=Ct.ALLOW_ARIA_ATTR!==!1,Rd=Ct.ALLOW_DATA_ATTR!==!1,Xh=Ct.ALLOW_UNKNOWN_PROTOCOLS||!1,LC=Ct.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Of=Ct.SAFE_FOR_TEMPLATES||!1,k4=Ct.SAFE_FOR_XML!==!1,r0=Ct.WHOLE_DOCUMENT||!1,PT=Ct.RETURN_DOM||!1,xH=Ct.RETURN_DOM_FRAGMENT||!1,yH=Ct.RETURN_TRUSTED_TYPE||!1,CY=Ct.FORCE_BODY||!1,Bj=Ct.SANITIZE_DOM!==!1,Hj=Ct.SANITIZE_NAMED_PROPS||!1,SY=Ct.KEEP_CONTENT!==!1,T4=Ct.IN_PLACE||!1,mo=Ct.ALLOWED_URI_REGEXP||vk,IT=Ct.NAMESPACE||a0,Ua=Ct.CUSTOM_ELEMENT_HANDLING||{},Ct.CUSTOM_ELEMENT_HANDLING&&Uj(Ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ua.tagNameCheck=Ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ct.CUSTOM_ELEMENT_HANDLING&&Uj(Ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ua.attributeNameCheck=Ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ct.CUSTOM_ELEMENT_HANDLING&&typeof Ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ua.allowCustomizedBuiltInElements=Ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Of&&(Rd=!1),xH&&(PT=!0),LT&&(Zo=la({},mO),Rr=[],LT.html===!0&&(la(Zo,wP),la(Rr,wg)),LT.svg===!0&&(la(Zo,yw),la(Rr,Sw),la(Rr,bk)),LT.svgFilters===!0&&(la(Zo,ww),la(Rr,Sw),la(Rr,bk)),LT.mathMl===!0&&(la(Zo,Cw),la(Rr,SP),la(Rr,bk))),Ct.ADD_TAGS&&(Zo===Vr&&(Zo=wv(Zo)),la(Zo,Ct.ADD_TAGS,ku)),Ct.ADD_ATTR&&(Rr===Su&&(Rr=wv(Rr)),la(Rr,Ct.ADD_ATTR,ku)),Ct.ADD_URI_SAFE_ATTR&&la(kY,Ct.ADD_URI_SAFE_ATTR,ku),Ct.FORBID_CONTENTS&&(NT===$j&&(NT=wv(NT)),la(NT,Ct.FORBID_CONTENTS,ku)),SY&&(Zo["#text"]=!0),r0&&la(Zo,["html","head","body"]),Zo.table&&(la(Zo,["tbody"]),delete _d.tbody),Ct.TRUSTED_TYPES_POLICY){if(typeof Ct.TRUSTED_TYPES_POLICY.createHTML!="function")throw Xp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ct.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Xp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');yt=Ct.TRUSTED_TYPES_POLICY,St=yt.createHTML("")}else yt===void 0&&(yt=AP(de,p)),yt!==null&&typeof St=="string"&&(St=yt.createHTML(""));Wu&&Wu(Ct),FT=Ct}},Xj=la({},["mi","mo","mn","ms","mtext"]),Yj=la({},["annotation-xml"]),BG=la({},["title","style","font","a","script"]),jj=la({},[...yw,...ww,...CP]),Zj=la({},[...Cw,...pk]),HG=function(Ct){let xo=Qe(Ct);(!xo||!xo.tagName)&&(xo={namespaceURI:IT,tagName:"template"});const _s=mk(Ct.tagName),bl=mk(xo.tagName);return TY[Ct.namespaceURI]?Ct.namespaceURI===CH?xo.namespaceURI===a0?_s==="svg":xo.namespaceURI===wH?_s==="svg"&&(bl==="annotation-xml"||Xj[bl]):!!jj[_s]:Ct.namespaceURI===wH?xo.namespaceURI===a0?_s==="math":xo.namespaceURI===CH?_s==="math"&&Yj[bl]:!!Zj[_s]:Ct.namespaceURI===a0?xo.namespaceURI===CH&&!Yj[bl]||xo.namespaceURI===wH&&!Xj[bl]?!1:!Zj[_s]&&(BG[_s]||!jj[_s]):!!(E4==="application/xhtml+xml"&&TY[Ct.namespaceURI]):!1},hb=function(Ct){vw(r.removed,{element:Ct});try{Qe(Ct).removeChild(Ct)}catch{et(Ct)}},_4=function(Ct,xo){try{vw(r.removed,{attribute:xo.getAttributeNode(Ct),from:xo})}catch{vw(r.removed,{attribute:null,from:xo})}if(xo.removeAttribute(Ct),Ct==="is"&&!Rr[Ct])if(PT||xH)try{hb(xo)}catch{}else try{xo.setAttribute(Ct,"")}catch{}},Gj=function(Ct){let xo=null,_s=null;if(CY)Ct="<remove></remove>"+Ct;else{const Au=yP(Ct,/^[\r\n\t ]+/);_s=Au&&Au[0]}E4==="application/xhtml+xml"&&IT===a0&&(Ct='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ct+"</body></html>");const bl=yt?yt.createHTML(Ct):Ct;if(IT===a0)try{xo=new ie().parseFromString(bl,E4)}catch{}if(!xo||!xo.documentElement){xo=un.createDocument(IT,"template",null);try{xo.documentElement.innerHTML=AY?St:bl}catch{}}const Dd=xo.body||xo.documentElement;return Ct&&_s&&Dd.insertBefore(l.createTextNode(_s),Dd.childNodes[0]||null),IT===a0?Nn.call(xo,r0?"html":"body")[0]:r0?xo.documentElement:Dd},qj=function(Ct){return Pn.call(Ct.ownerDocument||Ct,Ct,H.SHOW_ELEMENT|H.SHOW_COMMENT|H.SHOW_TEXT|H.SHOW_PROCESSING_INSTRUCTION|H.SHOW_CDATA_SECTION,null)},Kj=function(Ct){return Ct instanceof K&&(typeof Ct.nodeName!="string"||typeof Ct.textContent!="string"||typeof Ct.removeChild!="function"||!(Ct.attributes instanceof X)||typeof Ct.removeAttribute!="function"||typeof Ct.setAttribute!="function"||typeof Ct.namespaceURI!="string"||typeof Ct.insertBefore!="function"||typeof Ct.hasChildNodes!="function")},Jj=function(Ct){return typeof R=="function"&&Ct instanceof R},i0=function(Ct,xo,_s){Vn[Ct]&&fk(Vn[Ct],bl=>{bl.call(r,xo,_s,FT)})},Qj=function(Ct){let xo=null;if(i0("beforeSanitizeElements",Ct,null),Kj(Ct))return hb(Ct),!0;const _s=ku(Ct.nodeName);if(i0("uponSanitizeElement",Ct,{tagName:_s,allowedTags:Zo}),Ct.hasChildNodes()&&!Jj(Ct.firstElementChild)&&Uu(/<[/\w]/g,Ct.innerHTML)&&Uu(/<[/\w]/g,Ct.textContent)||Ct.nodeType===F1.progressingInstruction||k4&&Ct.nodeType===F1.comment&&Uu(/<[/\w]/g,Ct.data))return hb(Ct),!0;if(!Zo[_s]||_d[_s]){if(!_d[_s]&&tZ(_s)&&(Ua.tagNameCheck instanceof RegExp&&Uu(Ua.tagNameCheck,_s)||Ua.tagNameCheck instanceof Function&&Ua.tagNameCheck(_s)))return!1;if(SY&&!NT[_s]){const bl=Qe(Ct)||Ct.parentNode,Dd=Ke(Ct)||Ct.childNodes;if(Dd&&bl){const Au=Dd.length;for(let Yh=Au-1;Yh>=0;--Yh){const gb=_e(Dd[Yh],!0);gb.__removalCount=(Ct.__removalCount||0)+1,bl.insertBefore(gb,Fe(Ct))}}}return hb(Ct),!0}return Ct instanceof I&&!HG(Ct)||(_s==="noscript"||_s==="noembed"||_s==="noframes")&&Uu(/<\/no(script|embed|frames)/i,Ct.innerHTML)?(hb(Ct),!0):(Of&&Ct.nodeType===F1.text&&(xo=Ct.textContent,fk([Es,ua,cr],bl=>{xo=xw(xo,bl," ")}),Ct.textContent!==xo&&(vw(r.removed,{element:Ct.cloneNode()}),Ct.textContent=xo)),i0("afterSanitizeElements",Ct,null),!1)},eZ=function(Ct,xo,_s){if(Bj&&(xo==="id"||xo==="name")&&(_s in l||_s in FG))return!1;if(!(Rd&&!gc[xo]&&Uu(Kn,xo))){if(!(Od&&Uu(Zt,xo))){if(!Rr[xo]||gc[xo]){if(!(tZ(Ct)&&(Ua.tagNameCheck instanceof RegExp&&Uu(Ua.tagNameCheck,Ct)||Ua.tagNameCheck instanceof Function&&Ua.tagNameCheck(Ct))&&(Ua.attributeNameCheck instanceof RegExp&&Uu(Ua.attributeNameCheck,xo)||Ua.attributeNameCheck instanceof Function&&Ua.attributeNameCheck(xo))||xo==="is"&&Ua.allowCustomizedBuiltInElements&&(Ua.tagNameCheck instanceof RegExp&&Uu(Ua.tagNameCheck,_s)||Ua.tagNameCheck instanceof Function&&Ua.tagNameCheck(_s))))return!1}else if(!kY[xo]){if(!Uu(mo,xw(_s,$o,""))){if(!((xo==="src"||xo==="xlink:href"||xo==="href")&&Ct!=="script"&&$6(_s,"data:")===0&&zj[Ct])){if(!(Xh&&!Uu(wn,xw(_s,$o,"")))){if(_s)return!1}}}}}}return!0},tZ=function(Ct){return Ct!=="annotation-xml"&&yP(Ct,is)},nZ=function(Ct){i0("beforeSanitizeAttributes",Ct,null);const{attributes:xo}=Ct;if(!xo)return;const _s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Rr};let bl=xo.length;for(;bl--;){const Dd=xo[bl],{name:Au,namespaceURI:Yh,value:gb}=Dd,O4=ku(Au);let qu=Au==="value"?gb:z6(gb);const zG=qu;if(_s.attrName=O4,_s.attrValue=qu,_s.keepAttr=!0,_s.forceKeepAttr=void 0,i0("uponSanitizeAttribute",Ct,_s),qu=_s.attrValue,_s.forceKeepAttr)continue;if(!_s.keepAttr){_4(Au,Ct);continue}if(!LC&&Uu(/\/>/i,qu)){_4(Au,Ct);continue}Of&&fk([Es,ua,cr],sZ=>{qu=xw(qu,sZ," ")});const oZ=ku(Ct.nodeName);if(!eZ(oZ,O4,qu)){_4(Au,Ct);continue}if(Hj&&(O4==="id"||O4==="name")&&(_4(Au,Ct),qu=PG+qu),k4&&Uu(/((--!?|])>)|<\/(style|title)/i,qu)){_4(Au,Ct);continue}if(yt&&typeof de=="object"&&typeof de.getAttributeType=="function"&&!Yh)switch(de.getAttributeType(oZ,O4)){case"TrustedHTML":{qu=yt.createHTML(qu);break}case"TrustedScriptURL":{qu=yt.createScriptURL(qu);break}}if(qu!==zG)try{Yh?Ct.setAttributeNS(Yh,Au,qu):Ct.setAttribute(Au,qu),Kj(Ct)?hb(Ct):xP(r.removed)}catch{}}i0("afterSanitizeAttributes",Ct,null)},$G=function Us(Ct){let xo=null;const _s=qj(Ct);for(i0("beforeSanitizeShadowDOM",Ct,null);xo=_s.nextNode();)i0("uponSanitizeShadowNode",xo,null),!Qj(xo)&&(xo.content instanceof y&&Us(xo.content),nZ(xo));i0("afterSanitizeShadowDOM",Ct,null)};return r.sanitize=function(Us){let Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xo=null,_s=null,bl=null,Dd=null;if(AY=!Us,AY&&(Us="<!-->"),typeof Us!="string"&&!Jj(Us))if(typeof Us.toString=="function"){if(Us=Us.toString(),typeof Us!="string")throw Xp("dirty is not a string, aborting")}else throw Xp("toString is not a function");if(!r.isSupported)return Us;if(A4||EY(Ct),r.removed=[],typeof Us=="string"&&(T4=!1),T4){if(Us.nodeName){const gb=ku(Us.nodeName);if(!Zo[gb]||_d[gb])throw Xp("root node is forbidden and cannot be sanitized in-place")}}else if(Us instanceof R)xo=Gj("<!---->"),_s=xo.ownerDocument.importNode(Us,!0),_s.nodeType===F1.element&&_s.nodeName==="BODY"||_s.nodeName==="HTML"?xo=_s:xo.appendChild(_s);else{if(!PT&&!Of&&!r0&&Us.indexOf("<")===-1)return yt&&yH?yt.createHTML(Us):Us;if(xo=Gj(Us),!xo)return PT?null:yH?St:""}xo&&CY&&hb(xo.firstChild);const Au=qj(T4?Us:xo);for(;bl=Au.nextNode();)Qj(bl)||(bl.content instanceof y&&$G(bl.content),nZ(bl));if(T4)return Us;if(PT){if(xH)for(Dd=Rt.call(xo.ownerDocument);xo.firstChild;)Dd.appendChild(xo.firstChild);else Dd=xo;return(Rr.shadowroot||Rr.shadowrootmode)&&(Dd=kn.call(h,Dd,!0)),Dd}let Yh=r0?xo.outerHTML:xo.innerHTML;return r0&&Zo["!doctype"]&&xo.ownerDocument&&xo.ownerDocument.doctype&&xo.ownerDocument.doctype.name&&Uu(xk,xo.ownerDocument.doctype.name)&&(Yh="<!DOCTYPE "+xo.ownerDocument.doctype.name+`>
`+Yh),Of&&fk([Es,ua,cr],gb=>{Yh=xw(Yh,gb," ")}),yt&&yH?yt.createHTML(Yh):Yh},r.setConfig=function(){let Us=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};EY(Us),A4=!0},r.clearConfig=function(){FT=null,A4=!1},r.isValidAttribute=function(Us,Ct,xo){FT||EY({});const _s=ku(Us),bl=ku(Ct);return eZ(_s,bl,xo)},r.addHook=function(Us,Ct){typeof Ct=="function"&&(Vn[Us]=Vn[Us]||[],vw(Vn[Us],Ct))},r.removeHook=function(Us){if(Vn[Us])return xP(Vn[Us])},r.removeHooks=function(Us){Vn[Us]&&(Vn[Us]=[])},r.removeAllHooks=function(){Vn={}},r}var G6=vO();const TP=t=>G6().sanitize(t);var eh=tinymce.util.Tools.resolve("tinymce.util.I18n");const q6={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},EP="temporary-placeholder",yk=t=>()=>Yt(t,EP).getOr("!not found!"),wk=(t,r)=>{const l=t.toLowerCase();if(eh.isRtl()){const h=Ds(l,"-rtl");return os(r,h)?h:l}else return l},_P=(t,r)=>Yt(r,wk(t,r)),xO=(t,r)=>{const l=r();return _P(t,l).getOrThunk(yk(l))},Aw=(t,r,l)=>{const h=r();return _P(t,h).or(l).getOrThunk(yk(h))},OP=t=>eh.isRtl()?os(q6,t):!1,RP=()=>Ko("add-focusable",[ba(t=>{Iu(t.element,"svg").each(r=>kt(r,"focusable","false"))})]),DP=(t,r,l,h)=>{var p,y;const S=OP(r)?["tox-icon--flip"]:[],R=Yt(l,wk(r,l)).or(h).getOrThunk(yk(l));return{dom:{tag:t.tag,attributes:(p=t.attributes)!==null&&p!==void 0?p:{},classes:t.classes.concat(S),innerHtml:R},behaviours:en([...(y=t.behaviours)!==null&&y!==void 0?y:[],RP()])}},yd=(t,r,l,h=V.none())=>DP(r,t,l(),h),K6=(t,r,l)=>{const h=l(),p=We(t,y=>os(h,wk(y,h)));return DP(r,p.getOr(EP),h,V.none())},J6={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Ck=Zc({name:"Notification",factory:t=>{const r=Fn("notification-text"),l=dr({dom:xg(`<p id=${r}>${TP(t.backstageProvider.translate(t.text))}</p>`),behaviours:en([Wo.config({})])}),h=Ce=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Ce}%`}}}),p=Ce=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Ce}%`}}),y=dr({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[h(0)]},p(0)],behaviours:en([Wo.config({})])}),I={updateProgress:(Ce,_e)=>{Ce.getSystem().isConnected()&&y.getOpt(Ce).each(et=>{Wo.set(et,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[h(_e)]},p(_e)])})},updateText:(Ce,_e)=>{if(Ce.getSystem().isConnected()){const et=l.get(Ce);Wo.set(et,[Ia(_e)])}}},H=Ze([t.icon.toArray(),t.level.toArray(),t.level.bind(Ce=>V.from(J6[Ce])).toArray()]),X=dr(tl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[yd("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:en([Sa.config({}),ni.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:Ce=>{t.onAction(Ce)}})),K=K6(H,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),ie={dom:{tag:"div",classes:["tox-notification__body"]},components:[l.asSpec()],behaviours:en([Wo.config({})])},de=[K,ie];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":r},classes:t.level.map(Ce=>["tox-notification","tox-notification--in",`tox-notification--${Ce}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:en([Sa.config({}),Io.config({}),po.config({mode:"special",onEscape:Ce=>(t.onAction(Ce),V.some(!0))})]),components:de.concat(t.progress?[y.asSpec()]:[]).concat([X.asSpec()]),apis:I}},configFields:[tr("level"),Lt("progress"),tr("icon"),Lt("onAction"),Lt("text"),Lt("iconProvider"),Lt("backstageProvider")],apis:{updateProgress:(t,r,l)=>{t.updateProgress(r,l)},updateText:(t,r,l)=>{t.updateText(r,l)}}});var MP=(t,r,l,h)=>{const p=r.backstage.shared,y=()=>Xe.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),S=()=>{const K=Hr(y());return V.some(K)},R=K=>{S().each(ie=>{wt(K,de=>{Oo(de.element,"width"),pe(de.element)>ie.width&&Mt(de.element,"width",ie.width+"px")})})};return{open:(K,ie,de)=>{const Ce=()=>{const Ke=un=>{Wo.remove(un,_e),et()},Qe=(un,Pn)=>{gi(un.element).length===0?yt(un,Pn):St(un,Pn)},yt=(un,Pn)=>{Va.hide(un),h.clear(),Pn&&t.focus()},St=(un,Pn)=>{Pn&&po.focusIn(un)};h.on(un=>{ie();const Pn=de();Ke(un),Qe(un,Pn)})},_e=el(Ck.sketch({text:K.text,level:No(["success","error","warning","warn","info"],K.type)?K.type:void 0,progress:K.progressBar===!0,icon:K.icon,onAction:Ce,iconProvider:p.providers.icons,backstageProvider:p.providers}));if(h.isSet()){const Ke=du(_e);h.on(Qe=>{Wo.append(Qe,Ke),Va.reposition(Qe),aa.refresh(Qe),R(Qe.components())})}else{const Ke=el(Va.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:p.getSink,fireDismissalEventInstead:{},...p.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:en([po.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Wo.config({}),...Vp(t)&&!p.header.isPositionedAtTop()?[]:[aa.config({contextual:{lazyContext:()=>V.some(Hr(y())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:un=>Wp(t,un.element).map(Rt=>({bounds:Up(Rt),optScrollEnv:V.some({currentScrollTop:Rt.element.dom.scrollTop,scrollElmTop:bs(Rt.element).top})})).getOrThunk(()=>({bounds:La(),optScrollEnv:V.none()}))})]])})),Qe=du(_e),yt={maxHeightFunction:rf()},St={...p.anchors.banner(),overrides:yt};h.set(Ke),l.add(Ke),Va.showWithinBounds(Ke,Qe,{anchor:St},S)}vo(K.timeout)&&K.timeout>0&&bv.setEditorTimeout(t,()=>{Ce()},K.timeout);const et=()=>{h.on(Ke=>{Va.reposition(Ke),aa.refresh(Ke),R(Ke.components())})};return{close:Ce,reposition:et,text:Ke=>{Ck.updateText(_e,Ke)},settings:K,getEl:()=>_e.element.dom,progressBar:{value:Ke=>{Ck.updateProgress(_e,Ke)}}}},close:K=>{K.close()},getArgs:K=>K.settings}};const t$={setup:(t,r)=>{const l=(p,y)=>{Jn(p,Mu(),{raw:y})},h=()=>t.getMenu().bind(dn.getHighlighted);r.on("keydown",p=>{const y=p.which;t.isActive()&&(t.isMenuOpen()?y===13?(h().each(Xg),p.preventDefault()):y===40?(h().fold(()=>{t.getMenu().each(dn.highlightFirst)},S=>{l(S,p)}),p.preventDefault(),p.stopImmediatePropagation()):(y===37||y===38||y===39)&&h().each(S=>{l(S,p),p.preventDefault(),p.stopImmediatePropagation()}):(y===13||y===38||y===40)&&t.cancelIfNecessary())}),r.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!r.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var yO;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(yO||(yO={}));var Fh=yO;const Tw="tox-menu-nav__js",B1="tox-collection__item",Sk="tox-swatch",PP={normal:Tw,color:Sk},wO="tox-collection__item--enabled",n$="tox-collection__group-heading",kk="tox-collection__item-icon",CO="tox-collection__item-label",LP="tox-collection__item-accessory",SO="tox-collection__item-caret",Cv="tox-collection__item-checkmark",Sv="tox-collection__item--active",Ak="tox-collection__item-container",Tk="tox-collection__item-container--column",NP="tox-collection__item-container--row",IP="tox-collection__item-container--align-right",FP="tox-collection__item-container--align-left",BP="tox-collection__item-container--valign-top",kO="tox-collection__item-container--valign-middle",HP="tox-collection__item-container--valign-bottom",$P=t=>Yt(PP,t).getOr(Tw),zP=t=>t==="color"?"tox-swatches":"tox-menu",Ek=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:zP(t),tieredMenu:"tox-tiered-menu"}),Yp=t=>{const r=Ek(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:$P(t)}},VP=(t,r,l)=>{const h=Ek(l);return{tag:"div",classes:Ze([[h.menu,`tox-menu-${r}-column`],t?[h.hasIcons]:[]])}},o$=[fv.parts.items({})],Ew=(t,r,l)=>{const h=Ek(l);return{dom:{tag:"div",classes:Ze([[h.tieredMenu]])},markers:Yp(l)}},WP=ce([tr("data"),rt("inputAttributes",{}),rt("inputStyles",{}),rt("tag","input"),rt("inputClasses",[]),Ws("onSetValue"),rt("styles",{}),rt("eventOrder",{}),hl("inputBehaviours",[En,Io]),rt("selectOnFocus",!0)]),UP=t=>en([Io.config({onFocus:t.selectOnFocus?r=>{const l=r.element,h=pd(l);l.dom.setSelectionRange(0,h.length)}:oe})]),s$=t=>({...UP(t),...gl(t.inputBehaviours,[En.config({store:{mode:"manual",...t.data.map(r=>({initialValue:r})).getOr({}),getValue:r=>pd(r.element),setValue:(r,l)=>{pd(r.element)!==l&&om(r.element,l)}},onSetValue:t.onSetValue})])}),XP=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),YP=(t,r)=>({uid:t.uid,dom:XP(t),components:[],behaviours:s$(t),eventOrder:t.eventOrder}),Cg=Zc({name:"Input",configFields:WP(),factory:YP}),AO=Fn("refetch-trigger-event"),jP=Fn("redirect-menu-item-interaction"),ZP="tox-menu__searcher",_k=t=>Ca(t.element,`.${ZP}`).bind(r=>t.getSystem().getByDom(r).toOptional()),GP=_k,r$=(t,r)=>{En.setValue(t,r.fetchPattern),t.element.dom.selectionStart=r.selectionStart,t.element.dom.selectionEnd=r.selectionEnd},_w=t=>{const r=En.getValue(t),l=t.element.dom.selectionStart,h=t.element.dom.selectionEnd;return{fetchPattern:r,selectionStart:l,selectionEnd:h}},a$=(t,r)=>{_o(r.element,"id").each(l=>kt(t.element,"aria-activedescendant",l))},qP=t=>{const r=(p,y)=>(y.cut(),V.none()),l=(p,y)=>{const S={interactionEvent:y.event,eventType:y.event.raw.type};return Jn(p,jP,S),V.some(!0)},h="searcher-events";return{dom:{tag:"div",classes:[B1]},components:[Cg.sketch({inputClasses:[ZP,"tox-textfield"],inputAttributes:{...t.placeholder.map(p=>({placeholder:t.i18n(p)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:en([Ko(h,[Nt(Hd(),p=>{ws(p,AO)}),Nt(Mu(),(p,y)=>{y.event.raw.key==="Escape"&&y.stop()})]),po.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:l,onEscape:l,onUp:l,onDown:l})]),eventOrder:{keydown:[h,po.name()]}})]}},Ok="tox-collection--results__js",TO=t=>{var r;return t.dom?{...t,dom:{...t.dom,attributes:{...(r=t.dom.attributes)!==null&&r!==void 0?r:{},id:Fn("aria-item-search-result-id"),"aria-selected":"false"}}}:t},Rk=(t,r)=>l=>{const h=Gn(l,r);return dt(h,p=>({dom:t,components:p}))},i$=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[fv.parts.items({preprocess:t!=="auto"?Rk({tag:"div",classes:["tox-swatches__row"]},t):Gt})]}]}),KP=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[fv.parts.items({preprocess:Rk({tag:"div",classes:["tox-collection__group"]},t)})]}),EO=(t,r)=>{const l=[];let h=[];return wt(t,(p,y)=>{r(p,y)?(h.length>0&&l.push(h),h=[],(os(p.dom,"innerHtml")||p.components&&p.components.length>0)&&h.push(p)):h.push(p)}),h.length>0&&l.push(h),dt(l,p=>({dom:{tag:"div",classes:["tox-collection__group"]},components:p}))},Dk=(t,r,l)=>fv.parts.items({preprocess:h=>{const p=dt(h,l);return t!=="auto"&&t>1?Rk({tag:"div",classes:["tox-collection__group"]},t)(p):EO(p,(y,S)=>r[S].type==="separator")}}),_O=(t,r,l=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[Dk(t,r,Gt)]}),l$=(t,r,l=!0)=>{const h=Fn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Ok].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:h}},components:[Dk(t,r,TO)]}},c$=(t,r,l)=>{const h=Fn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[qP({i18n:eh.translate,placeholder:l.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Ok],attributes:{id:h}},components:[Dk(t,r,TO)]}]}},u$=(t,r=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[fv.parts.items({preprocess:l=>EO(l,(h,p)=>t[p].type==="separator")})]}),Mk=t=>qs(t,r=>"icon"in r&&r.icon!==void 0),wf=t=>(console.error(sg(t)),console.log(t),V.none()),JP=(t,r,l,h,p)=>{const y=u$(l);return{value:t,dom:y.dom,components:y.components,items:l}},OO=(t,r,l,h,p)=>{const y=()=>p.menuType!=="searchable"?_O(h,l):p.searchMode.searchMode==="search-with-field"?c$(h,l,p.searchMode):l$(h,l);if(p.menuType==="color"){const S=i$(h);return{value:t,dom:S.dom,components:S.components,items:l}}else if(p.menuType==="normal"&&h==="auto"){const S=_O(h,l);return{value:t,dom:S.dom,components:S.components,items:l}}else if(p.menuType==="normal"||p.menuType==="searchable"){const S=y();return{value:t,dom:S.dom,components:S.components,items:l}}else if(p.menuType==="listpreview"&&h!=="auto"){const S=KP(h);return{value:t,dom:S.dom,components:S.components,items:l}}else return{value:t,dom:VP(r,h,p.menuType),components:o$,items:l}},Oi=ki("type"),RO=ki("name"),DO=ki("label"),Om=ki("text"),QP=ki("title"),eL=ki("icon"),kv=ki("value"),tL=$c("fetch"),d$=$c("getSubmenuItems"),H1=$c("onAction"),nL=$c("onItemAction"),Av=sa("onSetup",()=>oe),h$=Ai("name"),Rm=Ai("text"),oL=Ai("role"),wd=Ai("icon"),Ow=Ai("tooltip"),MO=Ai("label"),PO=Ai("shortcut"),sL=Ru("select"),$1=Ti("active",!1),g$=Ti("borderless",!1),Bh=Ti("enabled",!0),Pk=Ti("primary",!1),rL=t=>rt("columns",t),LO=rt("meta",{}),NO=sa("onAction",oe),jp=t=>ti("type",t),Lk=t=>Fi("name","name",Ve(()=>Fn(`${t}-name`)),An),f$=t=>Fi("value","value",Ve(()=>Fn(`${t}-value`)),au()),aL=fo([Oi,Rm]),m$=t=>ka("separatormenuitem",aL,t),Xu=fo([jp("autocompleteitem"),$1,Bh,LO,kv,Rm,wd]),Hh=t=>ka("Autocompleter.Separator",aL,t),iL=t=>ka("Autocompleter.Item",Xu,t),Tv=[Bh,Ow,wd,Rm,Av,ti("context","mode:design")],IO=fo([Oi,H1,PO].concat(Tv)),Rw=t=>ka("toolbarbutton",IO,t),Nk=[$1].concat(Tv),Dw=fo(Nk.concat([Oi,H1,PO])),Mw=t=>ka("ToggleButton",Dw,t),Ik=[sa("predicate",Je),Ji("scope","node",["node","editor"]),Ji("position","selection",["node","selection","line"])],lL=Tv.concat([jp("contextformbutton"),Pk,H1,rr("original",Gt)]),Pw=Nk.concat([jp("contextformbutton"),Pk,H1,rr("original",Gt)]),p$=Tv.concat([jp("contextformbutton")]),b$=Nk.concat([jp("contextformtogglebutton")]),Sg=Ga("type",{contextformbutton:lL,contextformtogglebutton:Pw}),Yu=fo([jp("contextform"),sa("initValue",ce("")),MO,Dc("commands",Sg),cd("launch",Ga("type",{contextformbutton:p$,contextformtogglebutton:b$}))].concat(Ik)),Lw=t=>ka("ContextForm",Yu,t),th=fo([jp("contexttoolbar"),ki("items")].concat(Ik)),v$=t=>ka("ContextToolbar",th,t),ca=[Oi,ki("src"),Ai("alt"),yh("classes",[],An)],x$=fo(ca),Ev=[Oi,Om,h$,yh("classes",["tox-collection__item-label"],An)],Nw=fo(Ev),FO=za(()=>og("type",{cardimage:x$,cardtext:Nw,cardcontainer:BO})),BO=fo([Oi,ti("direction","horizontal"),ti("align","left"),ti("valign","middle"),Dc("items",FO)]),Zp=[Bh,Rm,oL,PO,f$("menuitem"),LO,ti("context","mode:design")],y$=fo([Oi,MO,Dc("items",FO),Av,NO].concat(Zp)),HO=t=>ka("cardmenuitem",y$,t),w$=fo([Oi,$1,wd].concat(Zp)),cL=t=>ka("choicemenuitem",w$,t),$O=[Oi,ki("fancytype"),NO],zO=[rt("initData",{})].concat($O),uL=[Ru("select"),N("initData",{},[Ti("allowCustomColors",!0),ti("storageKey","default"),Nf("colors",au())])].concat($O),Fk=Ga("fancytype",{inserttable:zO,colorswatch:uL}),C$=t=>ka("fancymenuitem",Fk,t),S$=fo([Oi,Av,NO,wd].concat(Zp)),k$=t=>ka("menuitem",S$,t),A$=fo([Oi,d$,Av,wd].concat(Zp)),T$=t=>ka("nestedmenuitem",A$,t),dL=fo([Oi,wd,$1,Av,H1].concat(Zp)),E$=t=>ka("togglemenuitem",dL,t),VO=(t,r,l)=>{const h=Tl(t.element,"."+l);if(h.length>0){const p=Ie(h,y=>{const S=y.dom.getBoundingClientRect().top,R=h[0].dom.getBoundingClientRect().top;return Math.abs(S-R)>r}).getOr(h.length);return V.some({numColumns:p,numRows:Math.ceil(h.length/p)})}else return V.none()},WO=(t,r)=>en([Ko(t,r)]),z1={namedEvents:WO,unnamedEvents:t=>WO(Fn("unnamed-events"),t)},Iw=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Cd={item:t=>Do.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Do.config({disabled:t}),splitButton:t=>Do.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Do.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Bk=(t,r)=>{const l=t.getApi(r);return h=>{h(l)}},Gp=(t,r)=>ba(l=>{Bk(t,l)(p=>{const y=t.onSetup(p);Bt(y)&&r.set(y)})}),qp=(t,r)=>kh(l=>Bk(t,l)(r.get())),gL="silver.uistate",Fw=(t,r)=>{const h=t.mainUi.outerContainer.element,p=[t.mainUi.mothership,...t.uiMotherships];r==="setDisabled"&&wt(p,y=>{y.broadcastOn([bg()],{target:h})}),wt(p,y=>{y.broadcastOn([gL],r)})},fL=(t,r)=>{t.on("init SwitchMode",l=>{Fw(r,l.type)}),t.on("NodeChange",l=>{t.ui.isEnabled()?Fw(r,l.type):Fw(r,"setDisabled")}),J3(t)&&t.mode.set("readonly")},vi=t=>Uc.config({channels:{[gL]:{onReceive:(r,l)=>{if(l==="setDisabled"||l==="setEnabled"){Do.set(r,l==="setDisabled");return}const{contextType:h,shouldDisable:p}=t();h==="mode"&&!No(["switchmode","init"],l)||Do.set(r,p)}}}}),$h=(t,r)=>ag((l,h)=>{Bk(t,l)(t.onAction),!t.triggersSubmenu&&r===Fh.CLOSE_ON_EXECUTE&&(l.getSystem().isConnected()&&ws(l,cl()),h.stop())}),O$={[kl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Kp=Xa,_v=(t,r,l,h)=>{const p=to(oe);return{type:"item",dom:r.dom,components:Kp(r.optComponents),data:t.data,eventOrder:O$,hasSubmenu:t.triggersSubmenu,itemBehaviours:en([Ko("item-events",[$h(t,l),Gp(t,p),qp(t,p)]),Cd.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),vi(()=>h.checkUiComponentContext(t.context)),Wo.config({})].concat(t.itemBehaviours))}},Ov=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),UO=t=>{const r=vv.os.isMacOS()||vv.os.isiOS(),p=r?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},y=t.split("+"),S=dt(y,R=>{const I=R.toLowerCase().trim();return os(p,I)?p[I]:R});return r?S.join(""):S.join("+")},Hk=(t,r,l=[kk])=>yd(t,{tag:"div",classes:l},r),XO=t=>({dom:{tag:"div",classes:[CO]},components:[Ia(eh.translate(t))]}),YO=(t,r)=>({dom:{tag:"div",classes:r,innerHtml:t}}),R$=(t,r)=>({dom:{tag:"div",classes:[CO]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Ia(eh.translate(r))]}]}),D$=t=>({dom:{tag:"div",classes:[LP]},components:[Ia(UO(t))]}),mL=t=>Hk("checkmark",t,[Cv]),M$=t=>Hk("chevron-right",t,[SO]),P$=t=>Hk("chevron-down",t,[SO]),L$=(t,r)=>{const l=t.direction==="vertical"?Tk:NP,h=t.align==="left"?FP:IP;return{dom:{tag:"div",classes:[Ak,l,h,(()=>{switch(t.valign){case"top":return BP;case"middle":return kO;case"bottom":return HP}})()]},components:r}},N$=(t,r,l)=>({dom:{tag:"img",classes:r,attributes:{src:t,alt:l.getOr("")}}}),pL=(t,r,l)=>{const h="custom",p="remove",y=t.value,S=t.iconContent.map(H=>Aw(H,r.icons,l)),R=t.ariaLabel.map(H=>({"aria-label":r.translate(H),"data-mce-name":H})).getOr({});return{dom:(()=>{const H=Sk,X=S.getOr(""),K={tag:"div",attributes:R,classes:[H]};return y===h?{...K,tag:"button",classes:[...K.classes,"tox-swatches__picker-btn"],innerHtml:X}:y===p?{...K,classes:[...K.classes,"tox-swatch--remove"],innerHtml:X}:vn(y)?{...K,attributes:{...K.attributes,"data-mce-color":y},styles:{"background-color":y},innerHtml:X}:K})(),optComponents:[]}},jO=t=>{const r=t.map(l=>({attributes:{id:Fn("menu-item"),"aria-label":eh.translate(l)}})).getOr({});return{tag:"div",classes:[Tw,B1],...r}},bL=(t,r,l,h)=>{const p={tag:"div",classes:[kk]},y=ie=>yd(ie,p,r.icons,h),S=()=>V.some({dom:p}),R=l?t.iconContent.map(y).orThunk(S):V.none(),I=t.checkMark,H=V.from(t.meta).fold(()=>XO,ie=>os(ie,"style")?no(R$,ie.style):XO),X=t.htmlContent.fold(()=>t.textContent.map(H),ie=>V.some(YO(ie,[CO])));return{dom:jO(t.ariaLabel),optComponents:[R,X,t.shortcutContent.map(D$),I,t.caret]}},Bw=(t,r,l,h=V.none())=>t.presets==="color"?pL(t,r,h):bL(t,r,l,h),vL=(t,r,l)=>Yt(t,"tooltipWorker").map(h=>[ni.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:p=>({type:"submenu",item:p,overrides:{maxHeightFunction:rf}}),mode:"follow-highlight",onShow:(p,y)=>{h(S=>{ni.setComponents(p,[Kx({element:Xe.fromDom(S)})])})}})]).getOrThunk(()=>l.map(h=>[ni.config({...r.providers.tooltips.getConfig({tooltipText:h}),mode:"follow-highlight"})]).getOr([])),I$=t=>$p.DOM.encode(t),Rv=(t,r)=>{const l=eh.translate(t),h=I$(l);if(r.length>0){const p=new RegExp(Iw(r),"gi");return h.replace(p,y=>`<span class="tox-autocompleter-highlight">${y}</span>`)}else return h},F$=(t,r,l,h,p,y,S,R=!0)=>{const I=Bw({presets:h,textContent:V.none(),htmlContent:l?t.text.map(X=>Rv(X,r)):V.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:V.none(),checkMark:V.none(),caret:V.none(),value:t.value},S.providers,R,t.icon),H=t.text.filter(X=>!l&&X!=="");return _v({context:"mode:design",data:Ov(t),enabled:t.enabled,getApi:ce({}),onAction:X=>p(t.value,t.meta),onSetup:ce(oe),triggersSubmenu:!1,itemBehaviours:vL(t,S,H)},I,y,S.providers)},ZO=(t,r)=>dt(t,l=>{switch(l.type){case"cardcontainer":return L$(l,ZO(l.items,r));case"cardimage":return N$(l.src,l.classes,l.alt);case"cardtext":const p=l.name.exists(y=>No(r.cardText.highlightOn,y))?V.from(r.cardText.matchText).getOr(""):"";return YO(Rv(l.text,p),l.classes)}}),xL=(t,r,l,h)=>{const p=S=>({isEnabled:()=>!Do.isDisabled(S),setEnabled:R=>{Do.set(S,!R),wt(Tl(S.element,"*"),I=>{S.getSystem().getByDom(I).each(H=>{H.hasConfigured(Do)&&Do.set(H,!R)})})}}),y={dom:jO(t.label),optComponents:[V.some({dom:{tag:"div",classes:[Ak,NP]},components:ZO(t.items,h)})]};return _v({context:"mode:design",data:Ov({text:V.none(),...t}),enabled:t.enabled,getApi:p,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:V.from(h.itemBehaviours).getOr([])},y,r,l.providers)},yL=(t,r,l,h,p,y,S,R=!0)=>{const I=K=>({setActive:ie=>{hs.set(K,ie)},isActive:()=>hs.isOn(K),isEnabled:()=>!Do.isDisabled(K),setEnabled:ie=>Do.set(K,!ie)}),H=Bw({presets:l,textContent:r?t.text:V.none(),htmlContent:V.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:V.none(),checkMark:r?V.some(mL(S.icons)):V.none(),caret:V.none(),value:t.value},S,R),X=t.text.filter(ce(!r)).map(K=>ni.config(S.tooltips.getConfig({tooltipText:S.translate(K)})));return me(_v({context:t.context,data:Ov(t),enabled:t.enabled,getApi:I,onAction:K=>h(t.value),onSetup:K=>(K.setActive(p),oe),triggersSubmenu:!1,itemBehaviours:[...X.toArray()]},H,y,S),{toggling:{toggleClass:wO,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},GO=v1(QS(),ek()),$k=t=>({value:wL(t)}),zk=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Vk=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,qO=t=>zk.test(t)||Vk.test(t),wL=t=>Ol(t,"#").toUpperCase(),CL=t=>qO(t)?V.some({value:wL(t)}):V.none(),B$=t=>({value:t.value.replace(zk,(l,h,p,y)=>h+h+p+p+y+y)}),H$=t=>{const r=B$(t),l=Vk.exec(r.value);return l===null?["FFFFFF","FF","FF","FF"]:l},KO=t=>{const r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},V1=t=>{const r=KO(t.red)+KO(t.green)+KO(t.blue);return $k(r)},JO=Math.min,QO=Math.max,Wk=Math.round,$$=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,z$=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Dv=(t,r,l,h)=>({red:t,green:r,blue:l,alpha:h}),eR=t=>{const r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},SL=t=>{let r,l,h;const p=(t.hue||0)%360;let y=t.saturation/100,S=t.value/100;if(y=QO(0,JO(y,1)),S=QO(0,JO(S,1)),y===0)return r=l=h=Wk(255*S),Dv(r,l,h,1);const R=p/60,I=S*y,H=I*(1-Math.abs(R%2-1)),X=S-I;switch(Math.floor(R)){case 0:r=I,l=H,h=0;break;case 1:r=H,l=I,h=0;break;case 2:r=0,l=I,h=H;break;case 3:r=0,l=H,h=I;break;case 4:r=H,l=0,h=I;break;case 5:r=I,l=0,h=H;break;default:r=l=h=0}return r=Wk(255*(r+X)),l=Wk(255*(l+X)),h=Wk(255*(h+X)),Dv(r,l,h,1)},Hw=t=>{const r=H$(t),l=parseInt(r[1],16),h=parseInt(r[2],16),p=parseInt(r[3],16);return Dv(l,h,p,1)},kL=(t,r,l,h)=>{const p=parseInt(t,10),y=parseInt(r,10),S=parseInt(l,10),R=parseFloat(h);return Dv(p,y,S,R)},tR=t=>{const r=$$.exec(t);if(r!==null)return V.some(kL(r[1],r[2],r[3],"1"));const l=z$.exec(t);return l!==null?V.some(kL(l[1],l[2],l[3],l[4])):V.none()},AL=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,TL=Dv(255,0,0,1),EL=t=>{t.dispatch("SkinLoaded")},V$=(t,r)=>{t.dispatch("SkinLoadError",r)},W$=t=>{t.dispatch("ResizeEditor")},nR=(t,r)=>{t.dispatch("ResizeContent",r)},U$=(t,r)=>{t.dispatch("ScrollContent",r)},_L=(t,r)=>{t.dispatch("TextColorChange",r)},Uk=(t,r)=>{t.dispatch("AfterProgressState",{state:r})},OL=(t,r)=>t.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),X$=(t,r)=>{t.dispatch("ToggleToolbarDrawer",{state:r})},Y$=(t,r)=>{t.dispatch("StylesTextUpdate",r)},j$=(t,r)=>{t.dispatch("AlignTextUpdate",r)},Z$=(t,r)=>{t.dispatch("FontSizeTextUpdate",r)},G$=(t,r)=>{t.dispatch("FontSizeInputTextUpdate",r)},q$=(t,r)=>{t.dispatch("BlocksTextUpdate",r)},oR=(t,r)=>{t.dispatch("FontFamilyTextUpdate",r)},RL=t=>{t.dispatch("ToggleSidebar")},DL=t=>{t.dispatch("ToggleView")},Xk=(t,r)=>()=>{t(),r()},kc=t=>Mv(t,"NodeChange",r=>{r.setEnabled(t.selection.isEditable())}),K$=(t,r)=>l=>{const h=Pl(),p=()=>{l.setActive(t.formatter.match(r));const y=t.formatter.formatChanged(r,l.setActive);h.set(y)};return t.initialized?p():t.once("init",p),()=>{t.off("init",p),h.clear()}},Yk=(t,r)=>l=>{const h=kc(t)(l),p=K$(t,r)(l);return()=>{h(),p()}},Mv=(t,r,l)=>h=>{const p=()=>l(h),y=()=>{l(h),t.on(r,p)};return t.initialized?y():t.once("init",y),()=>{t.off("init",y),t.off(r,p)}},ML=t=>r=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})},ju=(t,r)=>()=>t.execCommand(r);var Pv=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const PL={},J$=(t,r=10)=>{const l=Pv.getItem(t),h=Ot(l)?JSON.parse(l):[],y=(H=>r-H.length<0?H.slice(0,r):H)(h),S=H=>{it(y,H).each(R),y.unshift(H),y.length>r&&y.pop(),Pv.setItem(t,JSON.stringify(y))},R=H=>{y.splice(H,1)};return{add:S,state:()=>y.slice(0)}},LL=t=>Yt(PL,t).getOrThunk(()=>{const r=`tinymce-custom-colors-${t}`,l=Pv.getItem(r);if(Lo(l)){const p=Pv.getItem("tinymce-custom-colors");Pv.setItem(r,vn(p)?p:"[]")}const h=J$(r,10);return PL[t]=h,h}),Q$=t=>dt(LL(t).state(),r=>({type:"choiceitem",text:r,icon:"checkmark",value:r})),$w=(t,r)=>{LL(t).add(r)},Lv=(t,r,l)=>({hue:t,saturation:r,value:l}),zw=t=>{let r=0,l=0,h=0;const p=t.red/255,y=t.green/255,S=t.blue/255,R=Math.min(p,Math.min(y,S)),I=Math.max(p,Math.max(y,S));if(R===I)return h=R,Lv(0,0,h*100);const H=p===R?y-S:S===R?p-y:S-p;return r=p===R?3:S===R?1:5,r=60*(r-H/(I-R)),l=(I-R)/I,h=I,Lv(Math.round(r),Math.round(l*100),Math.round(h*100))},NL=t=>zw(Hw(t)),IL=t=>V1(SL(t)),e8=t=>CL(t).orThunk(()=>tR(t).map(V1)).getOrThunk(()=>{const r=document.createElement("canvas");r.height=1,r.width=1;const l=r.getContext("2d");l.clearRect(0,0,r.width,r.height),l.fillStyle="#FFFFFF",l.fillStyle=t,l.fillRect(0,0,1,1);const h=l.getImageData(0,0,1,1).data,p=h[0],y=h[1],S=h[2],R=h[3];return V1(Dv(p,y,S,R))}),Vw="forecolor",Ww="hilitecolor",jk=5,FL=t=>BL(t.map((r,l)=>l%2===0?"#"+e8(r).value:r)),BL=t=>{const r=[];for(let l=0;l<t.length;l+=2)r.push({text:t[l+1],value:t[l],icon:"checkmark",type:"choiceitem"});return r},kg=t=>r=>r.options.get(t),sR="#000000",t8=t=>{const r=t.options.register,l=y=>xn(y,Ot)?{value:FL(y),valid:!0}:{valid:!1,message:"Must be an array of strings."},h=y=>xn(y,Ot)?{value:BL(y),valid:!0}:{valid:!1,message:"Must be an array of strings."},p=y=>vo(y)&&y>0?{value:y,valid:!0}:{valid:!1,message:"Must be a positive number."};r("color_map",{processor:l,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),r("color_map_raw",{processor:h}),r("color_map_background",{processor:l}),r("color_map_foreground",{processor:l}),r("color_cols",{processor:p,default:rR(t)}),r("color_cols_foreground",{processor:p,default:HL(t,Vw)}),r("color_cols_background",{processor:p,default:HL(t,Ww)}),r("custom_colors",{processor:"boolean",default:!0}),r("color_default_foreground",{processor:"string",default:sR}),r("color_default_background",{processor:"string",default:sR})},Zk=(t,r)=>r===Vw&&t.options.isSet("color_map_foreground")?kg("color_map_foreground")(t):r===Ww&&t.options.isSet("color_map_background")?kg("color_map_background")(t):t.options.isSet("color_map_raw")?kg("color_map_raw")(t):kg("color_map")(t),rR=(t,r="default")=>Math.max(jk,Math.ceil(Math.sqrt(Zk(t,r).length))),HL=(t,r)=>{const l=kg("color_cols")(t),h=rR(t,r);return l===rR(t)?h:l},$L=(t,r="default")=>Math.round(r===Vw?kg("color_cols_foreground")(t):r===Ww?kg("color_cols_background")(t):kg("color_cols")(t)),zL=kg("custom_colors"),n8=kg("color_default_foreground"),o8=kg("color_default_background"),s8="rgba(0, 0, 0, 0)",r8=t=>tR(t).exists(r=>r.alpha!==0),VL=t=>ll(t,r=>{if(so(r)){const l=nr(r,"background-color");return Qn(r8(l),l)}else return V.none()}).getOr(s8),WL=(t,r)=>{const l=Xe.fromDom(t.selection.getStart()),h=r==="hilitecolor"?VL(l):nr(l,"color");return tR(h).map(p=>"#"+V1(p).value)},a8=(t,r,l)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(r,{value:l}),t.nodeChanged()})},Cf=(t,r)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(r,{value:null},void 0,!0),t.nodeChanged()})},i8=t=>{t.addCommand("mceApplyTextcolor",(r,l)=>{a8(t,r,l)}),t.addCommand("mceRemoveTextcolor",r=>{Cf(t,r)})},UL=t=>{const r="choiceitem",l={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[l,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[l]},Uw=(t,r,l,h)=>{l==="custom"?qL(t)(y=>{y.each(S=>{$w(r,S),t.execCommand("mceApplyTextcolor",r,S),h(S)})},WL(t,r).getOr(sR)):l==="remove"?(h(""),t.execCommand("mceRemoveTextcolor",r)):(h(l),t.execCommand("mceApplyTextcolor",r,l))},nl=(t,r,l)=>t.concat(Q$(r).concat(UL(l))),XL=(t,r,l)=>h=>{h(nl(t,r,l))},aR=(t,r,l)=>{const h=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(h,l)},YL=(t,r)=>{t.setTooltip(r)},jL=(t,r)=>l=>{const h=WL(t,r);return Zr(h,l.toUpperCase())},iR=(t,r,l)=>{if(Re(l))return r==="forecolor"?"Text color":"Background color";const h=r==="forecolor"?"Text color {0}":"Background color {0}",p=nl(Zk(t,r),r,!1),y=We(p,S=>S.value===l).getOr({text:""}).text;return t.translate([h,t.translate(y)])},ZL=(t,r,l,h)=>{t.ui.registry.addSplitButton(r,{tooltip:iR(t,l,h.get()),presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:jL(t,l),columns:$L(t,l),fetch:XL(Zk(t,l),l,zL(t)),onAction:p=>{Uw(t,l,h.get(),oe)},onItemAction:(p,y)=>{Uw(t,l,y,S=>{h.set(S),_L(t,{name:r,color:S})})},onSetup:p=>{aR(p,r,h.get());const y=S=>{S.name===r&&(aR(p,S.name,S.color),YL(p,iR(t,l,S.color)))};return t.on("TextColorChange",y),Xk(kc(t)(p),()=>{t.off("TextColorChange",y)})}})},GL=(t,r,l,h,p)=>{t.ui.registry.addNestedMenuItem(r,{text:h,icon:r==="forecolor"?"text-color":"highlight-bg-color",onSetup:y=>(YL(y,iR(t,l,p.get())),aR(y,r,p.get()),kc(t)(y)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:jL(t,l),initData:{storageKey:l},onAction:y=>{Uw(t,l,y.value,S=>{p.set(S),_L(t,{name:r,color:S})})}}]})},qL=t=>(r,l)=>{let h=!1;const p=R=>{const H=R.getData().colorpicker;h?(r(V.from(H)),R.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",H]))},y=(R,I)=>{I.name==="hex-valid"&&(h=I.value)},S={colorpicker:l};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:S,onAction:y,onSubmit:p,onClose:oe,onCancel:()=>{r(V.none())}})},l8=t=>{i8(t);const r=n8(t),l=o8(t),h=to(r),p=to(l);ZL(t,"forecolor","forecolor",h),ZL(t,"backcolor","hilitecolor",p),GL(t,"forecolor","forecolor","Text color",h),GL(t,"backcolor","hilitecolor","Background color",p)},lR=(t,r,l,h,p,y,S,R)=>{const I=Mk(r),X=c8(r,l,h,p!=="color"?"normal":"color",y,S,R);return OO(t,I,X,h,{menuType:p})},c8=(t,r,l,h,p,y,S)=>Xa(dt(t,R=>R.type==="choiceitem"?cL(R).fold(wf,I=>V.some(yL(I,l===1,h,r,y(I.value),p,S,Mk(t)))):V.none())),Gk=(t,r)=>{const l=Yp(r);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+l.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(r==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:p=>r==="color"?Ca(p.element,"[aria-checked=true]"):V.none()}},u8=(t,r)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?`.${Sk}`:`.${B1}`}},d8=(t,r)=>{const l=h8(t,r),h=r.colorinput.getColorCols(t.initData.storageKey),p="color",S={...lR(Fn("menu-value"),l,R=>{t.onAction({value:R})},h,p,Fh.CLOSE_ON_EXECUTE,t.select.getOr(Je),r.shared.providers),markers:Yp(p),movement:Gk(h,p),showMenuRole:!1};return{type:"widget",data:{value:Fn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[GO.widget(fv.sketch(S))]}},h8=(t,r)=>{const l=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(()=>nl(r.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,l),h=>h.concat(UL(l)))},KL=Fn("cell-over"),JL=Fn("cell-execute"),g8=t=>(r,l)=>t.shared.providers.translate(["{0} columns, {1} rows",l,r]),f8=(t,r,l)=>{const h=S=>Jn(S,KL,{row:t,col:r}),p=S=>Jn(S,JL,{row:t,col:r}),y=(S,R)=>{R.stop(),p(S)};return el({dom:{tag:"div",attributes:{role:"button","aria-label":l}},behaviours:en([Ko("insert-table-picker-cell",[Nt(bc(),Io.focus),Nt(kl(),p),Nt(Bf(),y),Nt(u0(),y)]),hs.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Io.config({onFocus:h})])})},m8=(t,r,l)=>{const h=[];for(let p=0;p<r;p++){const y=[];for(let S=0;S<l;S++){const R=t(p+1,S+1);y.push(f8(p,S,R))}h.push(y)}return h},p8=(t,r,l,h,p)=>{for(let y=0;y<h;y++)for(let S=0;S<p;S++)hs.set(t[y][S],y<=r&&S<=l)},b8=t=>De(t,r=>dt(r,du)),QL=(t,r)=>Ia(`${r}x${t}`),v8={inserttable:(t,r)=>{const p=g8(r),y=m8(p,10,10),S=QL(0,0),R=dr({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[S],behaviours:en([Wo.config({})])});return{type:"widget",data:{value:Fn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[GO.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:b8(y).concat(R.asSpec()),behaviours:en([Ko("insert-table-picker",[ba(I=>{Wo.set(R.get(I),[S])}),p0(KL,(I,H,X)=>{const{row:K,col:ie}=X.event;p8(y,K,ie,10,10),Wo.set(R.get(I),[QL(K+1,ie+1)])}),p0(JL,(I,H,X)=>{const{row:K,col:ie}=X.event;ws(I,cl()),t.onAction({numRows:K+1,numColumns:ie+1})})]),po.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:d8},eN=(t,r)=>Yt(v8,t.fancytype).map(l=>l(t,r)),x8=(t,r,l,h=!0,p=!1)=>{const y=p?P$(l.icons):M$(l.icons),S=I=>({isEnabled:()=>!Do.isDisabled(I),setEnabled:H=>Do.set(I,!H),setIconFill:(H,X)=>{Ca(I.element,`svg path[class="${H}"], rect[class="${H}"]`).each(K=>{kt(K,"fill",X)})},setTooltip:H=>{const X=l.translate(H);kt(I.element,"aria-label",X)}}),R=Bw({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:V.none(),ariaLabel:t.text,caret:V.some(y),checkMark:V.none(),shortcutContent:t.shortcut},l,h);return _v({context:t.context,data:Ov(t),getApi:S,enabled:t.enabled,onAction:oe,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},R,r,l)},tN=(t,r,l,h=!0)=>{const p=S=>({isEnabled:()=>!Do.isDisabled(S),setEnabled:R=>Do.set(S,!R)}),y=Bw({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:V.none(),ariaLabel:t.text,caret:V.none(),checkMark:V.none(),shortcutContent:t.shortcut},l,h);return _v({context:t.context,data:Ov(t),getApi:p,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},y,r,l)},y8=t=>({type:"separator",dom:{tag:"div",classes:[B1,n$]},components:t.text.map(Ia).toArray()}),w8=(t,r,l,h=!0)=>{const p=S=>({setActive:R=>{hs.set(S,R)},isActive:()=>hs.isOn(S),isEnabled:()=>!Do.isDisabled(S),setEnabled:R=>Do.set(S,!R)}),y=Bw({iconContent:t.icon,textContent:t.text,htmlContent:V.none(),ariaLabel:t.text,checkMark:V.some(mL(l.icons)),caret:V.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},l,h);return me(_v({context:t.context,data:Ov(t),enabled:t.enabled,getApi:p,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},y,r,l),{toggling:{toggleClass:wO,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},C8=F$,cR=y8,S8=tN,k8=x8,A8=w8,T8=eN,nN=xL;var _8=Object.freeze({__proto__:null,getCoupled:(t,r,l,h)=>l.getOrCreate(t,r,h),getExistingCoupled:(t,r,l,h)=>l.getExisting(t,r,h)}),oN=[ar("others",Ou(C.value,au()))],O8=Object.freeze({__proto__:null,init:()=>{const t={},r=(y,S)=>{if(ds(y.others).length===0)throw new Error("Cannot find any known coupled components");return Yt(t,S)},l=(y,S,R)=>r(S,R).getOrThunk(()=>{const H=Yt(S.others,R).getOrDie("No information found for coupled component: "+R)(y),X=y.getSystem().build(H);return t[R]=X,X}),h=(y,S,R)=>r(S,R).orThunk(()=>(Yt(S.others,R).getOrDie("No information found for coupled component: "+R),V.none())),p=ce({});return rc({readState:p,getExisting:h,getOrCreate:l})}});const ui=ul({fields:oN,name:"coupling",apis:_8,state:O8}),uR=t=>{let r=V.none(),l=[];const h=H=>uR(X=>{p(K=>{X(H(K))})}),p=H=>{S()?I(H):l.push(H)},y=H=>{S()||(r=V.some(H),R(l),l=[])},S=()=>r.isSome(),R=H=>{wt(H,I)},I=H=>{r.each(X=>{setTimeout(()=>{H(X)},0)})};return t(y),{get:p,map:h,isReady:S}},R8={nu:uR,pure:t=>uR(r=>{r(t)})},D8=t=>{setTimeout(()=>{throw t},0)},W1=t=>{const r=I=>{t().then(I,D8)};return{map:I=>W1(()=>t().then(I)),bind:I=>W1(()=>t().then(H=>I(H).toPromise())),anonBind:I=>W1(()=>t().then(()=>I.toPromise())),toLazy:()=>R8.nu(r),toCached:()=>{let I=null;return W1(()=>(I===null&&(I=t()),I))},toPromise:t,get:r}},uc={nu:t=>W1(()=>new Promise(t)),pure:t=>W1(()=>Promise.resolve(t))},sN=ce("sink"),rN=ce(pu({name:sN(),overrides:ce({dom:{tag:"div"},behaviours:en([_l.config({useFixed:ot})]),events:Er([Vf(Mu()),Vf(Na()),Vf(Bf())])})})),dR=(t,r)=>{const l=t.getHotspot(r).getOr(r),h="hotspot",p=t.getAnchorOverrides();return t.layouts.fold(()=>({type:h,hotspot:l,overrides:p}),y=>({type:h,hotspot:l,overrides:p,layouts:y}))},M8=(t,r,l)=>{const h=t.fetch;return h(l).map(r)},P8=(t,r,l,h,p,y,S)=>{const R=M8(t,r,h),I=aN(h,t);return R.map(H=>H.bind(X=>{const K=X.menus[X.primary];return V.from(K).each(ie=>{t.listRole.each(de=>{ie.role=de})}),V.from(yf.sketch({...y.menu(),uid:Db(""),data:X,highlightOnOpen:S,onOpenMenu:(ie,de)=>{const Ce=I().getOrDie();_l.position(Ce,de,{anchor:l}),Gs.decloak(p)},onOpenSubmenu:(ie,de,Ce)=>{const _e=I().getOrDie();_l.position(_e,Ce,{anchor:{type:"submenu",item:de}}),Gs.decloak(p)},onRepositionMenu:(ie,de,Ce)=>{const _e=I().getOrDie();_l.position(_e,de,{anchor:l}),wt(Ce,et=>{_l.position(_e,et.triggeredMenu,{anchor:{type:"submenu",item:et.triggeringItem}})})},onEscape:()=>(Io.focus(h),Gs.close(p),V.some(!0))}))}))},qk=(t,r,l,h,p,y,S)=>{const R=dR(t,l);return P8(t,r,R,l,h,p,S).map(H=>(H.fold(()=>{Gs.isOpen(h)&&Gs.close(h)},X=>{Gs.cloak(h),Gs.open(h,X),y(h)}),h))},L8=(t,r,l,h,p,y,S)=>(Gs.close(h),uc.pure(h)),hR=(t,r,l,h,p,y)=>{const S=ui.getCoupled(l,"sandbox");return(Gs.isOpen(S)?L8:qk)(t,r,l,S,h,p,y)},gR=(t,r,l)=>{const h=Bs.getCurrent(r).getOr(r),p=pe(t.element);l?Mt(h.element,"min-width",p+"px"):ja(h.element,p)},aN=(t,r)=>t.getSystem().getByUid(r.uid+"-"+sN()).map(l=>()=>C.value(l)).getOrThunk(()=>r.lazySink.fold(()=>()=>C.error(new Error("No internal sink is specified, nor could an external sink be found")),l=>()=>l(t))),iN=t=>{Gs.getState(t).each(r=>{yf.repositionMenus(r)})},fR=(t,r,l)=>{const h=Ib(),p=(R,I)=>{const H=dR(t,r);h.link(r.element),t.matchWidth&&gR(H.hotspot,I,t.useMinWidth),t.onOpen(H,R,I),l!==void 0&&l.onOpen!==void 0&&l.onOpen(R,I)},y=(R,I)=>{h.unlink(r.element),S().getOr(I).element.dom.dispatchEvent(new window.FocusEvent("focusout")),l!==void 0&&l.onClose!==void 0&&l.onClose(R,I)},S=aN(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:h.id}},behaviours:$u.augment(t.sandboxBehaviours,[En.config({store:{mode:"memory",initialValue:r}}),Gs.config({onOpen:p,onClose:y,isPartOf:(R,I,H)=>tf(I,H)||tf(r,H),getAttachPoint:()=>S().getOrDie()}),Bs.config({find:R=>Gs.getState(R).bind(I=>Bs.getCurrent(I))}),Uc.config({channels:{...ov({isExtraPart:Je}),...sv({doReposition:iN})}})])}},mR=t=>{const r=ui.getCoupled(t,"sandbox");iN(r)},Kk=()=>[rt("sandboxClasses",[]),$u.field("sandboxBehaviours",[Bs,Uc,Gs,En])],N8=ce([Lt("dom"),Lt("fetch"),Ws("onOpen"),Yl("onExecute"),rt("getHotspot",V.some),rt("getAnchorOverrides",ce({})),af(),hl("dropdownBehaviours",[hs,ui,po,Io]),Lt("toggleClass"),rt("eventOrder",{}),tr("lazySink"),rt("matchWidth",!1),rt("useMinWidth",!1),tr("role"),tr("listRole")].concat(Kk())),I8=ce([zu({schema:[_h(),rt("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),rN()]),lN=(t,r,l,h)=>{const p=X=>Yt(t.dom,"attributes").bind(K=>Yt(K,X)),y=X=>{Gs.getState(X).each(K=>{yf.highlightPrimary(K)})},S=(X,K,ie)=>hR(t,Gt,X,h,K,ie),R=X=>{S(X,y,qc.HighlightMenuAndItem).get(oe)},I={expand:X=>{hs.isOn(X)||S(X,oe,qc.HighlightNone).get(oe)},open:X=>{hs.isOn(X)||S(X,oe,qc.HighlightMenuAndItem).get(oe)},refetch:X=>ui.getExistingCoupled(X,"sandbox").fold(()=>S(X,oe,qc.HighlightMenuAndItem).map(oe),ie=>qk(t,Gt,X,ie,h,oe,qc.HighlightMenuAndItem).map(oe)),isOpen:hs.isOn,close:X=>{hs.isOn(X)&&S(X,oe,qc.HighlightMenuAndItem).get(oe)},repositionMenus:X=>{hs.isOn(X)&&mR(X)}},H=(X,K)=>(Xg(X),V.some(!0));return{uid:t.uid,dom:t.dom,components:r,behaviours:gl(t.dropdownBehaviours,[hs.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),ui.config({others:{sandbox:X=>fR(t,X,{onOpen:()=>hs.on(X),onClose:()=>hs.off(X)})}}),po.config({mode:"special",onSpace:H,onEnter:H,onDown:(X,K)=>{if(Sd.isOpen(X)){const ie=ui.getCoupled(X,"sandbox");y(ie)}else Sd.open(X);return V.some(!0)},onEscape:(X,K)=>Sd.isOpen(X)?(Sd.close(X),V.some(!0)):V.none()}),Io.config({})]),events:cw(V.some(R)),eventOrder:{...t.eventOrder,[kl()]:["disabling","toggling","alloy.base.behaviour"]},apis:I,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),X=>({role:X})),...t.dom.tag==="button"?{type:p("type").getOr("button")}:{}}}}},Sd=Hl({name:"Dropdown",configFields:N8(),partFields:I8(),factory:lN,apis:{open:(t,r)=>t.open(r),refetch:(t,r)=>t.refetch(r),expand:(t,r)=>t.expand(r),close:(t,r)=>t.close(r),isOpen:(t,r)=>t.isOpen(r),repositionMenus:(t,r)=>t.repositionMenus(r)}}),F8=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},B8=t=>{const r=En.getValue(t),l=_k(t).map(_w);Sd.refetch(r).get(()=>{const h=ui.getCoupled(r,"sandbox");l.each(p=>_k(h).each(y=>r$(y,p)))})},H8=(t,r)=>{$8(t).each(l=>{Tx(t,l.element,r.event.eventType,r.event.interactionEvent)})},$8=t=>Gs.getState(t).bind(dn.getHighlighted).bind(dn.getHighlighted),z8=t=>yc(t.element,Ok)?V.some(t.element):Ca(t.element,"."+Ok),Xw=(t,r,l)=>{GP(t).each(h=>{a$(h,l),z8(r).each(y=>{_o(y,"id").each(S=>kt(h.element,"aria-controls",S))})}),kt(l.element,"aria-selected","true")},V8=(t,r,l)=>{kt(l.element,"aria-selected","false")},Jk=t=>{GP(t).each(r=>Io.focus(r))},W8=t=>ui.getExistingCoupled(t,"sandbox").bind(_k).map(_w).map(l=>l.fetchPattern).getOr("");var Qk;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Qk||(Qk={}));const U8=(t,r,l,h,p)=>{const y=l.shared.providers,S=R=>p?{...R,shortcut:V.none(),icon:R.text.isSome()?V.none():R.icon}:R;switch(t.type){case"menuitem":return k$(t).fold(wf,R=>V.some(S8(S(R),r,y,h)));case"nestedmenuitem":return T$(t).fold(wf,R=>V.some(k8(S(R),r,y,h,p)));case"togglemenuitem":return E$(t).fold(wf,R=>V.some(A8(S(R),r,y,h)));case"separator":return m$(t).fold(wf,R=>V.some(cR(R)));case"fancymenuitem":return C$(t).fold(wf,R=>T8(R,l));default:return console.error("Unknown item in general menu",t),V.none()}},X8=(t,r,l,h,p,y,S)=>{const R=h===1,I=!R||Mk(t);return Xa(dt(t,H=>{switch(H.type){case"separator":return Hh(H).fold(wf,X=>V.some(cR(X)));case"cardmenuitem":return HO(H).fold(wf,X=>V.some(nN({...X,onAction:K=>{X.onAction(K),l(X.value,X.meta)}},p,y,{itemBehaviours:vL(X.meta,y,V.none()),cardText:{matchText:r,highlightOn:S}})));case"autocompleteitem":default:return iL(H).fold(wf,X=>V.some(C8(X,r,R,"normal",l,p,y,I)))}}))},Y8=(t,r,l,h,p,y)=>{const S=Mk(r),R=Xa(dt(r,X=>{const K=de=>p?!os(de,"text"):S,ie=de=>U8(de,l,h,K(de),p);return X.type==="nestedmenuitem"&&X.getSubmenuItems().length<=0?ie({...X,enabled:!1}):ie(X)})),I=F8(y);return(p?JP:OO)(t,S,R,1,I)},U1=t=>yf.singleData(t.value,t),X1=(t,r,l,h)=>{const p=Gk(r,h),y=Yp(h);return{data:U1({...t,movement:p,menuBehaviours:z1.unnamedEvents(r!=="auto"?[]:[ba((S,R)=>{VO(S,4,y.item).each(({numColumns:I,numRows:H})=>{po.setGridSize(S,H,I)})})])}),menu:{markers:Yp(h),fakeFocus:l===Qk.ContentFocus}}},cN=t=>q0.create(Xe.fromDom(t.startContainer),t.startOffset,Xe.fromDom(t.endContainer),t.endOffset),Z8={register:(t,r)=>{const l=Fn("autocompleter"),h=to(!1),p=to(!1),y=zs(),S=el(Va.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:l}},components:[],fireDismissalEventInstead:{},inlineBehaviours:en([Ko("dismissAutocompleter",[Nt(uu(),()=>K()),Nt(Ax(),(Fe,Ke)=>{_o(Ke.event.target,"id").each(Qe=>kt(Xe.fromDom(t.getBody()),"aria-activedescendant",Qe))})])]),lazySink:r.getSink})),R=()=>Va.isOpen(S),I=p.get,H=()=>{if(R()){Va.hide(S),t.dom.remove(l,!1);const Fe=Xe.fromDom(t.getBody());_o(Fe,"aria-owns").filter(Ke=>Ke===l).each(()=>{Q(Fe,"aria-owns"),Q(Fe,"aria-activedescendant")})}},X=()=>Va.getContent(S).bind(Fe=>us(Fe.components(),0)),K=()=>t.execCommand("mceAutocompleterClose"),ie=Fe=>{const Ke=qo(Fe,Qe=>V.from(Qe.columns)).getOr(1);return De(Fe,Qe=>{const yt=Qe.items;return X8(yt,Qe.matchText,(St,un)=>{const Pn={hide:()=>K(),reload:Rt=>{H(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Rt})}};t.execCommand("mceAutocompleterRefreshActiveRange"),y.get().each(Rt=>{h.set(!0),Qe.onAction(Pn,Rt,St,un),h.set(!1)})},Ke,Fh.BUBBLE_TO_SANDBOX,r,Qe.highlightOn)})},de=(Fe,Ke)=>{const Qe=qo(Fe,yt=>V.from(yt.columns)).getOr(1);Va.showMenuAt(S,{anchor:{type:"selection",getSelection:()=>y.get().map(cN),root:Xe.fromDom(t.getBody())}},X1(OO("autocompleter-value",!0,Ke,Qe,{menuType:"normal"}),Qe,Qk.ContentFocus,"normal")),X().each(dn.highlightFirst)},Ce=Fe=>{const Ke=ie(Fe);Ke.length>0?(de(Fe,Ke),kt(Xe.fromDom(t.getBody()),"aria-owns",l),t.inline||_e()):H()},_e=()=>{t.dom.get(l)&&t.dom.remove(l,!1);const Fe=t.getDoc().documentElement,Ke=t.selection.getNode(),Qe=Eb(S.element);jo(Qe,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Ke.offsetTop}px`,left:`${Ke.offsetLeft}px`}),t.dom.add(Fe,Qe.dom),Ca(Qe,'[role="menu"]').each(yt=>{Oo(yt,"position"),Oo(yt,"max-height")})};t.on("AutocompleterStart",({lookupData:Fe})=>{p.set(!0),h.set(!1),Ce(Fe)}),t.on("AutocompleterUpdate",({lookupData:Fe})=>Ce(Fe)),t.on("AutocompleterUpdateActiveRange",({range:Fe})=>y.set(Fe)),t.on("AutocompleterEnd",()=>{H(),p.set(!1),h.set(!1),y.clear()});const et={cancelIfNecessary:K,isMenuOpen:R,isActive:I,isProcessingAction:h.get,getMenu:X};t$.setup(et,t)}},Yw=(t,r,l)=>Oh(t,r,l).isSome(),uN=(t,r)=>{let l=null;return{cancel:()=>{l!==null&&(clearTimeout(l),l=null)},schedule:(...y)=>{l=setTimeout(()=>{t.apply(null,y),l=null},r)}}},dN=5,G8=400,hN=t=>{const r=t.raw;return r.touches===void 0||r.touches.length!==1?V.none():V.some(r.touches[0])},q8=(t,r)=>{const l=Math.abs(t.clientX-r.x),h=Math.abs(t.clientY-r.y);return l>dN||h>dN},K8=t=>{const r=zs(),l=to(!1),h=uN(H=>{t.triggerEvent(Wg(),H),l.set(!0)},G8),p=H=>(hN(H).each(X=>{h.cancel();const K={x:X.clientX,y:X.clientY,target:H.target};h.schedule(H),l.set(!1),r.set(K)}),V.none()),y=H=>(h.cancel(),hN(H).each(X=>{r.on(K=>{q8(X,K)&&r.clear()})}),V.none()),S=H=>{h.cancel();const X=K=>Fs(K.target,H.target);return r.get().filter(X).map(K=>l.get()?(H.prevent(),!1):t.triggerEvent(u0(),H))},R=ts([{key:Du(),value:p},{key:Ch(),value:y},{key:Zs(),value:S}]);return{fireIfReady:(H,X)=>Yt(R,X).bind(K=>K(H))}},J8=t=>t.raw.which===Ho[0]&&!No(["input","textarea"],Ks(t.target))&&!Yw(t.target,'[contenteditable="true"]'),Q8=(t,r)=>{const l={stopBackspace:!0,...r},h=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],p=K8(l),y=dt(h.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),de=>wc(t,de,Ce=>{p.fireIfReady(Ce,de).each(et=>{et&&Ce.kill()}),l.triggerEvent(de,Ce)&&Ce.kill()})),S=zs(),R=wc(t,"paste",de=>{p.fireIfReady(de,"paste").each(_e=>{_e&&de.kill()}),l.triggerEvent("paste",de)&&de.kill(),S.set(setTimeout(()=>{l.triggerEvent(xb(),de)},0))}),I=wc(t,"keydown",de=>{l.triggerEvent("keydown",de)?de.kill():l.stopBackspace&&J8(de)&&de.prevent()}),H=wc(t,"focusin",de=>{l.triggerEvent("focusin",de)&&de.kill()}),X=zs(),K=wc(t,"focusout",de=>{l.triggerEvent("focusout",de)&&de.kill(),X.set(setTimeout(()=>{l.triggerEvent(Hf(),de)},0))});return{unbind:()=>{wt(y,de=>{de.unbind()}),I.unbind(),H.unbind(),K.unbind(),R.unbind(),S.on(clearTimeout),X.on(clearTimeout)}}},gN=(t,r)=>{const l=Yt(t,"target").getOr(r);return to(l)},fN=(t,r)=>{const l=to(!1),h=to(!1);return{stop:()=>{l.set(!0)},cut:()=>{h.set(!0)},isStopped:l.get,isCut:h.get,event:t,setSource:r.set,getSource:r.get}},Y1=t=>{const r=to(!1);return{stop:()=>{r.set(!0)},cut:oe,isStopped:r.get,isCut:Je,event:t,setSource:Be("Cannot set source of a broadcasted event"),getSource:Be("Cannot get source of a broadcasted event")}},Ag=re.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),mN=(t,r,l,h,p,y)=>{const S=t(r,h),R=fN(l,p);return S.fold(()=>(y.logEventNoHandlers(r,h),Ag.complete()),I=>{const H=I.descHandler;return Qg(H)(R),R.isStopped()?(y.logEventStopped(r,I.element,H.purpose),Ag.stopped()):R.isCut()?(y.logEventCut(r,I.element,H.purpose),Ag.complete()):ai(I.element).fold(()=>(y.logNoParent(r,I.element,H.purpose),Ag.complete()),K=>(y.logEventResponse(r,I.element,H.purpose),Ag.resume(K)))})},pR=(t,r,l,h,p,y)=>mN(t,r,l,h,p,y).fold(ot,S=>pR(t,r,l,S,p,y),Je),pN=(t,r,l,h,p)=>{const y=gN(l,h);return mN(t,r,l,h,y,p)},eA=(t,r,l)=>{const h=Y1(r);return wt(t,p=>{const y=p.descHandler;Qg(y)(h)}),h.isStopped()},e7=(t,r,l,h)=>j1(t,r,l,l.target,h),j1=(t,r,l,h,p)=>{const y=gN(l,h);return pR(t,r,l,h,y,p)},jw=(t,r)=>({element:t,descHandler:r}),t7=(t,r)=>({id:t,descHandler:r}),n7=()=>{const t={},r=(S,R,I)=>{$s(I,(H,X)=>{const K=t[X]!==void 0?t[X]:{};K[R]=hp(H,S),t[X]=K})},l=(S,R)=>up(R).bind(I=>Yt(S,I)).map(I=>jw(R,I));return{registerId:r,unregisterId:S=>{$s(t,(R,I)=>{os(R,S)&&delete R[S]})},filterByType:S=>Yt(t,S).map(R=>yi(R,(I,H)=>t7(H,I))).getOr([]),find:(S,R,I)=>Yt(t,R).bind(H=>ll(I,X=>l(H,X),S))}},o7=()=>{const t=n7(),r={},l=H=>{const X=H.element;return up(X).getOrThunk(()=>Wx("uid-",H.element))},h=(H,X)=>{const K=r[X];if(K===H)y(H);else throw new Error('The tagId "'+X+'" is already used by: '+Kg(K.element)+`
Cannot use it for: `+Kg(H.element)+`
The conflicting element is`+(Me(K.element)?" ":" not ")+"already in the DOM")},p=H=>{const X=l(H);Lr(r,X)&&h(H,X);const K=[H];t.registerId(K,X,H.events),r[X]=H},y=H=>{up(H.element).each(X=>{delete r[X],t.unregisterId(X)})};return{find:(H,X,K)=>t.find(H,X,K),filter:H=>t.filterByType(H),register:p,unregister:y,getById:H=>Yt(r,H)}},Tg=Zc({name:"Container",factory:t=>{const{attributes:r,...l}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...l},components:t.components,behaviours:h1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[rt("components",[]),hl("containerBehaviours",[]),rt("events",{}),rt("domModification",{}),rt("eventOrder",{})]}),bR=t=>{const r=Fe=>ai(t.element).fold(ot,Ke=>Fs(Fe,Ke)),l=o7(),h=(Fe,Ke)=>l.find(r,Fe,Ke),p=Q8(t.element,{triggerEvent:(Fe,Ke)=>Vx(Fe,Ke.target,Qe=>e7(h,Fe,Ke,Qe))}),y={debugInfo:ce("real"),triggerEvent:(Fe,Ke,Qe)=>{Vx(Fe,Ke,yt=>j1(h,Fe,Qe,Ke,yt))},triggerFocus:(Fe,Ke)=>{up(Fe).fold(()=>{Fu(Fe)},Qe=>{Vx($d(),Fe,yt=>(pN(h,$d(),{originator:Ke,kill:oe,prevent:oe,target:Fe},Fe,yt),!1))})},triggerEscape:(Fe,Ke)=>{y.triggerEvent("keydown",Fe.element,Ke.event)},getByUid:Fe=>_e(Fe),getByDom:Fe=>et(Fe),build:el,buildOrPatch:Jx,addToGui:Fe=>{I(Fe)},removeFromGui:Fe=>{H(Fe)},addToWorld:Fe=>{S(Fe)},removeFromWorld:Fe=>{R(Fe)},broadcast:Fe=>{ie(Fe)},broadcastOn:(Fe,Ke)=>{de(Fe,Ke)},broadcastEvent:(Fe,Ke)=>{Ce(Fe,Ke)},isConnected:ot},S=Fe=>{Fe.connect(y),ls(Fe.element)||(l.register(Fe),wt(Fe.components(),S),y.triggerEvent(h0(),Fe.element,{target:Fe.element}))},R=Fe=>{ls(Fe.element)||(wt(Fe.components(),R),l.unregister(Fe)),Fe.disconnect()},I=Fe=>{mg(t,Fe)},H=Fe=>{pg(Fe)},X=()=>{p.unbind(),wl(t.element)},K=Fe=>{const Ke=l.filter(zd());wt(Ke,Qe=>{const yt=Qe.descHandler;Qg(yt)(Fe)})},ie=Fe=>{K({universal:!0,data:Fe})},de=(Fe,Ke)=>{K({universal:!1,channels:Fe,data:Ke})},Ce=(Fe,Ke)=>{const Qe=l.filter(Fe);return eA(Qe,Ke)},_e=Fe=>l.getById(Fe).fold(()=>C.error(new Error('Could not find component with uid: "'+Fe+'" in system.')),C.value),et=Fe=>{const Ke=up(Fe).getOr("not found");return _e(Ke)};return S(t),{root:t,element:t.element,destroy:X,add:I,remove:H,getByUid:_e,getByDom:et,addToWorld:S,removeFromWorld:R,broadcast:ie,broadcastOn:de,broadcastEvent:Ce}},tA=(t,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:dt(t.items,r.interpreter)}),s7=ce([rt("prefix","form-field"),hl("fieldBehaviours",[Bs,En])]),vR=ce([pu({schema:[Lt("dom")],name:"label"}),pu({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Lt("text")],name:"aria-descriptor"}),Zl({factory:{sketch:t=>{const r=zn(t,["factory"]);return t.factory.sketch(r)}},schema:[Lt("factory")],name:"field"})]),r7=(t,r,l,h)=>{const p=gl(t.fieldBehaviours,[Bs.config({find:R=>Ur(R,t,"field")}),En.config({store:{mode:"manual",getValue:R=>Bs.getCurrent(R).bind(En.getValue),setValue:(R,I)=>{Bs.getCurrent(R).each(H=>{En.setValue(H,I)})}}})]),y=Er([ba((R,I)=>{const H=qd(R,t,["label","field","aria-descriptor"]);H.field().each(X=>{const K=Fn(t.prefix);H.label().each(ie=>{kt(ie.element,"for",K),kt(X.element,"id",K)}),H["aria-descriptor"]().each(ie=>{const de=Fn(t.prefix);kt(ie.element,"id",de),kt(X.element,"aria-describedby",de)})})})]),S={getField:R=>Ur(R,t,"field"),getLabel:R=>Ur(R,t,"label")};return{uid:t.uid,dom:t.dom,components:r,behaviours:p,events:y,apis:S}},wr=Hl({name:"FormField",configFields:s7(),partFields:vR(),factory:r7,apis:{getField:(t,r)=>t.getField(r),getLabel:(t,r)=>t.getLabel(r)}});var a7=tinymce.util.Tools.resolve("tinymce.html.Entities");const Z1=(t,r,l,h)=>{const p=l7(t,r,l,h);return wr.sketch(p)},i7=(t,r)=>Z1(t,r,[],[]),l7=(t,r,l,h)=>({dom:xR(l),components:t.toArray().concat([r]),fieldBehaviours:en(h)}),c7=()=>xR([]),xR=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Jp=(t,r)=>wr.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ia(r.translate(t))]}),vu=Fn("form-component-change"),Zw=Fn("form-close"),Qp=Fn("form-cancel"),Sf=Fn("form-action"),G1=Fn("form-submit"),nA=Fn("form-block"),yR=Fn("form-unblock"),bN=Fn("form-tabchange"),vN=Fn("form-resize"),u7=(t,r,l)=>{const h=t.label.map(de=>Jp(de,r)),p=r.icons(),y=de=>{var Ce;return(Ce=p[de])!==null&&Ce!==void 0?Ce:de},S=de=>(Ce,_e)=>{Oh(_e.event.target,"[data-collection-item-value]").each(et=>{de(Ce,_e,et,In(et,"data-collection-item-value"))})},R=(de,Ce)=>{const et=r.checkUiComponentContext("mode:design").shouldDisable||r.isDisabled()?" tox-collection__item--state-disabled":"",Fe=dt(Ce,yt=>{const St=eh.translate(yt.text),un=t.columns===1?`<div class="tox-collection__item-label">${St}</div>`:"",Pn=`<div class="tox-collection__item-icon">${y(yt.icon)}</div>`,Rt={_:" "," - ":" ","-":" "},Nn=St.replace(/\_| \- |\-/g,kn=>Rt[kn]);return`<div data-mce-tooltip="${Nn}" class="tox-collection__item${et}" tabindex="-1" data-collection-item-value="${a7.encodeAllRaw(yt.value)}" aria-label="${Nn}">${Pn}${un}</div>`}),Ke=t.columns!=="auto"&&t.columns>1?Gn(Fe,t.columns):[Fe],Qe=dt(Ke,yt=>`<div class="tox-collection__group">${yt.join("")}</div>`);Vc(de.element,Qe.join(""))},I=S((de,Ce,_e,et)=>{Ce.stop(),r.checkUiComponentContext("mode:design").shouldDisable||r.isDisabled()||Jn(de,Sf,{name:t.name,value:et})}),H=[Nt(bc(),S((de,Ce,_e)=>{Fu(_e,!0)})),Nt(Bf(),I),Nt(u0(),I),Nt(vc(),S((de,Ce,_e)=>{Ca(de.element,"."+Sv).each(et=>{_r(et,Sv)}),bi(_e,Sv)})),Nt(NC(),S(de=>{Ca(de.element,"."+Sv).each(Ce=>{_r(Ce,Sv),pp(Ce)})})),ag(S((de,Ce,_e,et)=>{Jn(de,Sf,{name:t.name,value:et})}))],X=(de,Ce)=>dt(Tl(de.element,".tox-collection__item"),Ce),K=wr.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Gt},behaviours:en([Do.config({disabled:()=>r.checkUiComponentContext(t.context).shouldDisable,onDisabled:de=>{X(de,Ce=>{bi(Ce,"tox-collection__item--state-disabled"),kt(Ce,"aria-disabled",!0)})},onEnabled:de=>{X(de,Ce=>{_r(Ce,"tox-collection__item--state-disabled"),Q(Ce,"aria-disabled")})}}),vi(()=>r.checkUiComponentContext(t.context)),Wo.config({}),ni.config({...r.tooltips.getConfig({tooltipText:"",onShow:de=>{Ca(de.element,"."+Sv+"[data-mce-tooltip]").each(Ce=>{_o(Ce,"data-mce-tooltip").each(_e=>{ni.setComponents(de,r.tooltips.getComponents({tooltipText:_e}))})})}}),mode:"children-keyboard-focus",anchor:de=>({type:"node",node:Ca(de.element,"."+Sv).orThunk(()=>C2(".tox-collection__item")),root:de.element,layouts:{onLtr:ce([Ei,yr,$i,Al,zi,Vi]),onRtl:ce([Ei,yr,$i,Al,zi,Vi])},bubble:bd(0,-2,{})})}),En.config({store:{mode:"memory",initialValue:l.getOr([])},onSetValue:(de,Ce)=>{R(de,Ce),t.columns==="auto"&&VO(de,5,"tox-collection__item").each(({numRows:_e,numColumns:et})=>{po.setGridSize(de,_e,et)}),ws(de,vN)}}),Sa.config({}),po.config(u8(t.columns,"normal")),Ko("collection-events",H)]),eventOrder:{[kl()]:["disabling","alloy.base.behaviour","collection-events"],[vc()]:["collection-events","tooltipping"]}});return Z1(h,K,["tox-form__group--collection"],[])},d7=["input","textarea"],wR=t=>{const r=Ks(t);return No(d7,r)},Nv=(t,r)=>{const l=r.getRoot(t).getOr(t.element);_r(l,r.invalidClass),r.notify.each(h=>{wR(t.element)&&kt(t.element,"aria-invalid",!1),h.getContainer(t).each(p=>{Vc(p,h.validHtml)}),h.onValid(t)})},xN=(t,r,l,h)=>{const p=r.getRoot(t).getOr(t.element);bi(p,r.invalidClass),r.notify.each(y=>{wR(t.element)&&kt(t.element,"aria-invalid",!0),y.getContainer(t).each(S=>{Vc(S,h)}),y.onInvalid(t,h)})},yN=(t,r,l)=>r.validator.fold(()=>uc.pure(C.value(!0)),h=>h.validate(t)),CR=(t,r,l)=>(r.notify.each(h=>{h.onValidate(t)}),yN(t,r).map(h=>t.getSystem().isConnected()?h.fold(p=>(xN(t,r,l,p),C.error(p)),p=>(Nv(t,r),C.value(p))):C.error("No longer in system")));var nh=Object.freeze({__proto__:null,markValid:Nv,markInvalid:xN,query:yN,run:CR,isInvalid:(t,r)=>{const l=r.getRoot(t).getOr(t.element);return yc(l,r.invalidClass)}}),CN=Object.freeze({__proto__:null,events:(t,r)=>t.validator.map(l=>Er([Nt(l.onEvent,h=>{CR(h,t,r).get(Gt)})].concat(l.validateOnLoad?[ba(h=>{CR(h,t,r).get(oe)})]:[]))).getOr({})}),h7=[Lt("invalidClass"),rt("getRoot",V.none),Bi("notify",[rt("aria","alert"),rt("getContainer",V.none),rt("validHtml",""),Ws("onValid"),Ws("onInvalid"),Ws("onValidate")]),Bi("validator",[Lt("validate"),rt("onEvent","input"),rt("validateOnLoad",!0)])];const kf=ul({fields:h7,name:"invalidating",active:CN,apis:nh,extra:{validation:t=>r=>{const l=En.getValue(r);return uc.pure(t(l))}}});var SN=Object.freeze({__proto__:null,events:()=>Er([Ex(HT(),ot)]),exhibit:()=>xc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const q1=ul({fields:[],name:"unselecting",active:SN}),g7=(t,r)=>Sd.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:en([Cd.button(()=>r.providers.isDisabled()||r.providers.checkUiComponentContext(t.context).shouldDisable),vi(()=>r.providers.checkUiComponentContext(t.context)),q1.config({}),Sa.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:l=>uc.nu(h=>t.fetch(h)).map(h=>V.from(U1(me(lR(Fn("menu-value"),h,p=>{t.onItemAction(l,p)},t.columns,t.presets,Fh.CLOSE_ON_EXECUTE,Je,r.providers),{movement:Gk(t.columns,t.presets)})))),parts:{menu:Ew(!1,1,t.presets)}}),kN=Fn("color-input-change"),kR=Fn("color-swatch-change"),AN=Fn("color-picker-cancel"),TN=(t,r,l,h)=>{const p=wr.parts.field({factory:Cg,inputClasses:["tox-textfield"],data:h,onSetValue:H=>kf.run(H).get(oe),inputBehaviours:en([Do.config({disabled:()=>r.providers.isDisabled()||r.providers.checkUiComponentContext(t.context).shouldDisable}),vi(()=>r.providers.checkUiComponentContext(t.context)),Sa.config({}),kf.config({invalidClass:"tox-textbox-field-invalid",getRoot:H=>Mi(H.element),notify:{onValid:H=>{const X=En.getValue(H);Jn(H,kN,{color:X})}},validator:{validateOnLoad:!1,validate:H=>{const X=En.getValue(H);if(X.length===0)return uc.pure(C.value(!0));{const K=Xe.fromTag("span");Mt(K,"background-color",X);const ie=or(K,"background-color").fold(()=>C.error("blah"),de=>C.value(X));return uc.pure(ie)}}}})]),selectOnFocus:!1}),y=t.label.map(H=>Jp(H,r.providers)),S=(H,X)=>{Jn(H,kR,{value:X})},R=(H,X)=>{I.getOpt(H).each(K=>{X==="custom"?l.colorPicker(ie=>{ie.fold(()=>ws(K,AN),de=>{S(K,de),$w(t.storageKey,de)})},"#ffffff"):X==="remove"?S(K,""):S(K,X)})},I=dr(g7({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:()=>[zi,$i,Ei],onLtr:()=>[$i,zi,Ei]},components:[],fetch:XL(l.getColors(t.storageKey),t.storageKey,l.hasCustomColors()),columns:l.getColorCols(t.storageKey),presets:"color",onItemAction:R,context:t.context},r));return wr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:y.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[p,I.asSpec()]}]),fieldBehaviours:en([Ko("form-field-events",[Nt(kN,(H,X)=>{I.getOpt(H).each(K=>{Mt(K.element,"background-color",X.event.color)}),Jn(H,vu,{name:t.name})}),Nt(kR,(H,X)=>{wr.getField(H).each(K=>{En.setValue(K,X.event.value),Bs.getCurrent(H).each(Io.focus)})}),Nt(AN,(H,X)=>{wr.getField(H).each(K=>{Bs.getCurrent(H).each(Io.focus)})})])])})},EN=pu({schema:[Lt("dom")],name:"label"}),Dm=t=>pu({name:""+t+"-edge",overrides:r=>r.model.manager.edgeActions[t].fold(()=>({}),h=>({events:Er([qm(Du(),(p,y,S)=>h(p,S),[r]),qm(Na(),(p,y,S)=>h(p,S),[r]),qm(Xl(),(p,y,S)=>{S.mouseIsDown.get()&&h(p,S)},[r])])}))}),f7=Dm("top-left"),m7=Dm("top"),p7=Dm("top-right"),b7=Dm("right"),v7=Dm("bottom-right"),x7=Dm("bottom"),AR=Dm("bottom-left"),y7=Dm("left"),w7=Zl({name:"thumb",defaults:ce({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Er([rg(Du(),t,"spectrum"),rg(Ch(),t,"spectrum"),rg(Zs(),t,"spectrum"),rg(Na(),t,"spectrum"),rg(Xl(),t,"spectrum"),rg(jm(),t,"spectrum")])})}),Gw=t=>Wi(t.event),C7=Zl({schema:[rr("mouseIsDown",()=>to(!1))],name:"spectrum",overrides:t=>{const l=t.model.manager,h=(p,y)=>l.getValueFromEvent(y).map(S=>l.setValueFrom(p,t,S));return{behaviours:en([po.config({mode:"special",onLeft:(p,y)=>l.onLeft(p,t,Gw(y)),onRight:(p,y)=>l.onRight(p,t,Gw(y)),onUp:(p,y)=>l.onUp(p,t,Gw(y)),onDown:(p,y)=>l.onDown(p,t,Gw(y))}),Sa.config({}),Io.config({})]),events:Er([Nt(Du(),h),Nt(Ch(),h),Nt(Na(),h),Nt(Xl(),(p,y)=>{t.mouseIsDown.get()&&h(p,y)})])}}});var S7=[EN,y7,b7,m7,x7,f7,p7,AR,v7,w7,C7];const qw=ce("slider.change.value"),k7=t=>t.type.indexOf("touch")!==-1,TR=t=>{const r=t.event.raw;if(k7(r)){const l=r;return l.touches!==void 0&&l.touches.length===1?V.some(l.touches[0]).map(h=>Gr(h.clientX,h.clientY)):V.none()}else{const l=r;return l.clientX!==void 0?V.some(l).map(h=>Gr(h.clientX,h.clientY)):V.none()}},A7="top",_N="right",ON="bottom",T7="left",Iv=t=>t.model.minX,Fv=t=>t.model.minY,oA=t=>t.model.minX-1,sA=t=>t.model.minY-1,Bv=t=>t.model.maxX,eb=t=>t.model.maxY,Kw=t=>t.model.maxX+1,Jw=t=>t.model.maxY+1,rA=(t,r,l)=>r(t)-l(t),ER=t=>rA(t,Bv,Iv),aA=t=>rA(t,eb,Fv),RN=t=>ER(t)/2,DN=t=>aA(t)/2,K1=(t,r)=>r?t.stepSize*t.speedMultiplier:t.stepSize,MN=t=>t.snapToGrid,iA=t=>t.snapStart,Af=t=>t.rounded,lA=(t,r)=>t[r+"-edge"]!==void 0,J1=t=>lA(t,T7),PN=t=>lA(t,_N),cA=t=>lA(t,A7),LN=t=>lA(t,ON),Mm=t=>t.model.value.get(),tb=(t,r)=>({x:t,y:r}),oh=(t,r)=>{Jn(t,qw(),{value:r})},E7=(t,r)=>{oh(t,tb(oA(r),sA(r)))},_R=(t,r)=>{oh(t,sA(r))},OR=(t,r)=>{oh(t,tb(RN(r),sA(r)))},RR=(t,r)=>{oh(t,tb(Kw(r),sA(r)))},_7=(t,r)=>{oh(t,Kw(r))},kd=(t,r)=>{oh(t,tb(Kw(r),DN(r)))},O7=(t,r)=>{oh(t,tb(Kw(r),Jw(r)))},R7=(t,r)=>{oh(t,Jw(r))},NN=(t,r)=>{oh(t,tb(RN(r),Jw(r)))},IN=(t,r)=>{oh(t,tb(oA(r),Jw(r)))},D7=(t,r)=>{oh(t,oA(r))},M7=(t,r)=>{oh(t,tb(oA(r),DN(r)))},DR=(t,r,l,h)=>t<r?t:t>l?l:t===r?r-1:Math.max(r,t-h),MR=(t,r,l,h)=>t>l?t:t<r?r:t===l?l+1:Math.min(l,t+h),FN=(t,r,l)=>Math.max(r,Math.min(l,t)),P7=(t,r,l,h,p)=>p.fold(()=>{const y=t-r,S=Math.round(y/h)*h;return FN(r+S,r-1,l+1)},y=>{const S=(t-y)%h,R=Math.round(S/h),I=Math.floor((t-y)/h),H=Math.floor((l-y)/h),X=Math.min(H,I+R),K=y+X*h;return Math.max(y,K)}),L7=(t,r,l)=>Math.min(l,Math.max(t,r))-r,PR=t=>{const{min:r,max:l,range:h,value:p,step:y,snap:S,snapStart:R,rounded:I,hasMinEdge:H,hasMaxEdge:X,minBound:K,maxBound:ie,screenRange:de}=t,Ce=H?r-1:r,_e=X?l+1:l;if(p<K)return Ce;if(p>ie)return _e;{const et=L7(p,K,ie),Fe=FN(et/de*h+r,Ce,_e);return S&&Fe>=r&&Fe<=l?P7(Fe,r,l,y,R):I?Math.round(Fe):Fe}},BN=t=>{const{min:r,max:l,range:h,value:p,hasMinEdge:y,hasMaxEdge:S,maxBound:R,maxOffset:I,centerMinEdge:H,centerMaxEdge:X}=t;return p<r?y?0:H:p>l?S?R:X:(p-r)/h*I},LR="top",HN="right",NR="bottom",Qw="left",$N="width",zN="height",Eg=t=>t.element.dom.getBoundingClientRect(),sh=(t,r)=>t[r],Q1=t=>{const r=Eg(t);return sh(r,Qw)},VN=t=>{const r=Eg(t);return sh(r,HN)},ex=t=>{const r=Eg(t);return sh(r,LR)},Hv=t=>{const r=Eg(t);return sh(r,NR)},IR=t=>{const r=Eg(t);return sh(r,$N)},FR=t=>{const r=Eg(t);return sh(r,zN)},BR=(t,r,l)=>(t+r)/2-l,WN=(t,r)=>{const l=Eg(t),h=Eg(r),p=sh(l,Qw),y=sh(l,HN),S=sh(h,Qw);return BR(p,y,S)},UN=(t,r)=>{const l=Eg(t),h=Eg(r),p=sh(l,LR),y=sh(l,NR),S=sh(h,LR);return BR(p,y,S)},$v=(t,r)=>{Jn(t,qw(),{value:r})},HR=(t,r,l)=>{const h={min:Iv(r),max:Bv(r),range:ER(r),value:l,step:K1(r),snap:MN(r),snapStart:iA(r),rounded:Af(r),hasMinEdge:J1(r),hasMaxEdge:PN(r),minBound:Q1(t),maxBound:VN(t),screenRange:IR(t)};return PR(h)},N7=(t,r,l)=>{const h=HR(t,r,l);return $v(t,h),h},XN=(t,r)=>{const l=Iv(r);$v(t,l)},YN=(t,r)=>{const l=Bv(r);$v(t,l)},$R=(t,r,l,h)=>{const y=(t>0?MR:DR)(Mm(l),Iv(l),Bv(l),K1(l,h));return $v(r,y),V.some(y)},zR=t=>(r,l,h)=>$R(t,r,l,h).map(ot),Kc=t=>TR(t).map(l=>l.left),jN=(t,r,l,h,p)=>{const S=IR(t),R=h.bind(X=>V.some(WN(X,t))).getOr(0),I=p.bind(X=>V.some(WN(X,t))).getOr(S),H={min:Iv(r),max:Bv(r),range:ER(r),value:l,hasMinEdge:J1(r),hasMaxEdge:PN(r),minBound:Q1(t),minOffset:0,maxBound:VN(t),maxOffset:S,centerMinEdge:R,centerMaxEdge:I};return BN(H)},VR=(t,r,l,h,p,y)=>{const S=jN(r,y,l,h,p);return Q1(r)-Q1(t)+S},I7=(t,r,l,h)=>{const p=Mm(l),y=VR(t,h.getSpectrum(t),p,h.getLeftEdge(t),h.getRightEdge(t),l),S=pe(r.element)/2;Mt(r.element,"left",y-S+"px")},ZN=zR(-1),F7=zR(1),B7=V.none,H7=V.none,GN={"top-left":V.none(),top:V.none(),"top-right":V.none(),right:V.some(_7),"bottom-right":V.none(),bottom:V.none(),"bottom-left":V.none(),left:V.some(D7)};var Tf=Object.freeze({__proto__:null,setValueFrom:N7,setToMin:XN,setToMax:YN,findValueOfOffset:HR,getValueFromEvent:Kc,findPositionOfValue:VR,setPositionFromValue:I7,onLeft:ZN,onRight:F7,onUp:B7,onDown:H7,edgeActions:GN});const tx=(t,r)=>{Jn(t,qw(),{value:r})},uA=(t,r,l)=>{const h={min:Fv(r),max:eb(r),range:aA(r),value:l,step:K1(r),snap:MN(r),snapStart:iA(r),rounded:Af(r),hasMinEdge:cA(r),hasMaxEdge:LN(r),minBound:ex(t),maxBound:Hv(t),screenRange:FR(t)};return PR(h)},dA=(t,r,l)=>{const h=uA(t,r,l);return tx(t,h),h},WR=(t,r)=>{const l=Fv(r);tx(t,l)},$7=(t,r)=>{const l=eb(r);tx(t,l)},z7=(t,r,l,h)=>{const y=(t>0?MR:DR)(Mm(l),Fv(l),eb(l),K1(l,h));return tx(r,y),V.some(y)},qN=t=>(r,l,h)=>z7(t,r,l,h).map(ot),V7=t=>TR(t).map(l=>l.top),W7=(t,r,l,h,p)=>{const S=FR(t),R=h.bind(X=>V.some(UN(X,t))).getOr(0),I=p.bind(X=>V.some(UN(X,t))).getOr(S),H={min:Fv(r),max:eb(r),range:aA(r),value:l,hasMinEdge:cA(r),hasMaxEdge:LN(r),minBound:ex(t),minOffset:0,maxBound:Hv(t),maxOffset:S,centerMinEdge:R,centerMaxEdge:I};return BN(H)},UR=(t,r,l,h,p,y)=>{const S=W7(r,y,l,h,p);return ex(r)-ex(t)+S},U7=(t,r,l,h)=>{const p=Mm(l),y=UR(t,h.getSpectrum(t),p,h.getTopEdge(t),h.getBottomEdge(t),l),S=Xo(r.element)/2;Mt(r.element,"top",y-S+"px")},KN=V.none,X7=V.none,Ef=qN(-1),hA=qN(1),Y7={"top-left":V.none(),top:V.some(_R),"top-right":V.none(),right:V.none(),"bottom-right":V.none(),bottom:V.some(R7),"bottom-left":V.none(),left:V.none()};var j7=Object.freeze({__proto__:null,setValueFrom:dA,setToMin:WR,setToMax:$7,findValueOfOffset:uA,getValueFromEvent:V7,findPositionOfValue:UR,setPositionFromValue:U7,onLeft:KN,onRight:X7,onUp:Ef,onDown:hA,edgeActions:Y7});const eC=(t,r)=>{Jn(t,qw(),{value:r})},tC=(t,r)=>({x:t,y:r}),XR=(t,r,l)=>{const h=HR(t,r,l.left),p=uA(t,r,l.top),y=tC(h,p);return eC(t,y),y},gA=(t,r,l,h,p)=>{const y=t>0?MR:DR,S=r?Mm(h).x:y(Mm(h).x,Iv(h),Bv(h),K1(h,p)),R=r?y(Mm(h).y,Fv(h),eb(h),K1(h,p)):Mm(h).y;return eC(l,tC(S,R)),V.some(S)},nb=(t,r)=>(l,h,p)=>gA(t,r,l,h,p).map(ot),nC=(t,r)=>{const l=Iv(r),h=Fv(r);eC(t,tC(l,h))},JN=(t,r)=>{const l=Bv(r),h=eb(r);eC(t,tC(l,h))},QN=t=>TR(t),eI=(t,r,l,h)=>{const p=Mm(l),y=VR(t,h.getSpectrum(t),p.x,h.getLeftEdge(t),h.getRightEdge(t),l),S=UR(t,h.getSpectrum(t),p.y,h.getTopEdge(t),h.getBottomEdge(t),l),R=pe(r.element)/2,I=Xo(r.element)/2;Mt(r.element,"left",y-R+"px"),Mt(r.element,"top",S-I+"px")},tI=nb(-1,!1),Z7=nb(1,!1),G7=nb(-1,!0),q7=nb(1,!0),K7={"top-left":V.some(E7),top:V.some(OR),"top-right":V.some(RR),right:V.some(kd),"bottom-right":V.some(O7),bottom:V.some(NN),"bottom-left":V.some(IN),left:V.some(M7)};var J7=Object.freeze({__proto__:null,setValueFrom:XR,setToMin:nC,setToMax:JN,getValueFromEvent:QN,setPositionFromValue:eI,onLeft:tI,onRight:Z7,onUp:G7,onDown:q7,edgeActions:K7});const nI=[rt("stepSize",1),rt("speedMultiplier",10),rt("onChange",oe),rt("onChoose",oe),rt("onInit",oe),rt("onDragStart",oe),rt("onDragEnd",oe),rt("snapToGrid",!1),rt("rounded",!0),tr("snapStart"),ar("model",Ga("mode",{x:[rt("minX",0),rt("maxX",100),rr("value",t=>to(t.mode.minX)),Lt("getInitialValue"),ra("manager",Tf)],y:[rt("minY",0),rt("maxY",100),rr("value",t=>to(t.mode.minY)),Lt("getInitialValue"),ra("manager",j7)],xy:[rt("minX",0),rt("maxX",100),rt("minY",0),rt("maxY",100),rr("value",t=>to({x:t.mode.minX,y:t.mode.minY})),Lt("getInitialValue"),ra("manager",J7)]})),hl("sliderBehaviours",[po,En]),rr("mouseIsDown",()=>to(!1))],zh=Hl({name:"Slider",configFields:nI,partFields:S7,factory:(t,r,l,h)=>{const p=St=>_n(St,t,"thumb"),y=St=>_n(St,t,"spectrum"),S=St=>Ur(St,t,"left-edge"),R=St=>Ur(St,t,"right-edge"),I=St=>Ur(St,t,"top-edge"),H=St=>Ur(St,t,"bottom-edge"),X=t.model,K=X.manager,ie=(St,un)=>{K.setPositionFromValue(St,un,t,{getLeftEdge:S,getRightEdge:R,getTopEdge:I,getBottomEdge:H,getSpectrum:y})},de=(St,un)=>{X.value.set(un);const Pn=p(St);ie(St,Pn)},Ce=(St,un)=>{de(St,un);const Pn=p(St);return t.onChange(St,Pn,un),V.some(!0)},_e=St=>{K.setToMin(St,t)},et=St=>{K.setToMax(St,t)},Fe=St=>{const un=()=>{Ur(St,t,"thumb").each(Rt=>{const Nn=X.value.get();t.onChoose(St,Rt,Nn)})},Pn=t.mouseIsDown.get();t.mouseIsDown.set(!1),Pn&&un()},Ke=(St,un)=>{un.stop(),t.mouseIsDown.set(!0),t.onDragStart(St,p(St))},Qe=(St,un)=>{un.stop(),t.onDragEnd(St,p(St)),Fe(St)},yt=St=>{Ur(St,t,"spectrum").map(po.focusIn)};return{uid:t.uid,dom:t.dom,components:r,behaviours:gl(t.sliderBehaviours,[po.config({mode:"special",focusIn:yt}),En.config({store:{mode:"manual",getValue:St=>X.value.get(),setValue:de}}),Uc.config({channels:{[l1()]:{onReceive:Fe}}})]),events:Er([Nt(qw(),(St,un)=>{Ce(St,un.event.value)}),ba((St,un)=>{const Pn=X.getInitialValue();X.value.set(Pn);const Rt=p(St);ie(St,Rt);const Nn=y(St);t.onInit(St,Rt,Nn,X.value.get())}),Nt(Du(),Ke),Nt(Zs(),Qe),Nt(Na(),(St,un)=>{yt(St),Ke(St,un)}),Nt(jm(),Qe)]),apis:{resetToMin:_e,resetToMax:et,setValue:de,refresh:ie},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,r,l)=>{t.setValue(r,l)},resetToMin:(t,r)=>{t.resetToMin(r)},resetToMax:(t,r)=>{t.resetToMax(r)},refresh:(t,r)=>{t.refresh(r)}}}),fA=Fn("rgb-hex-update"),oI=Fn("slider-update"),YR=Fn("palette-update"),oC=(t,r)=>{const l=zh.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),h=zh.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return zh.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ce(0)},components:[l,h],sliderBehaviours:en([Io.config({})]),onChange:(p,y,S)=>{kt(p.element,"aria-valuenow",Math.floor(360-S*3.6)),Jn(p,oI,{value:S})}})},sI="form",rI=[hl("formBehaviours",[En])],aI=t=>"<alloy.field."+t+">",ez=t=>{const r=(()=>{const y=[];return{field:(R,I)=>(y.push(R),x1(sI,aI(R),I)),record:ce(y)}})(),l=t(r),h=r.record(),p=dt(h,y=>Zl({name:y,pname:aI(y)}));return cv(sI,rI,p,nz,l)},tz=(t,r)=>t.fold(()=>C.error(r),C.value),nz=(t,r)=>({uid:t.uid,dom:t.dom,components:r,behaviours:gl(t.formBehaviours,[En.config({store:{mode:"manual",getValue:l=>{const h=LS(l,t);return Go(h,(p,y)=>p().bind(S=>{const R=Bs.getCurrent(S);return tz(R,new Error(`Cannot find a current component to extract the value from for form part '${y}': `+Kg(S.element)))}).map(En.getValue))},setValue:(l,h)=>{$s(h,(p,y)=>{Ur(l,t,y).each(S=>{Bs.getCurrent(S).each(R=>{En.setValue(R,p)})})})}}})]),apis:{getField:(l,h)=>Ur(l,t,h).bind(Bs.getCurrent)}}),zv={getField:D0((t,r,l)=>t.getField(r,l)),sketch:ez},iI=Fn("valid-input"),jR=Fn("invalid-input"),mA=Fn("validating-input"),_g="colorcustom.rgb.",ZR={isEnabled:ot,setEnabled:oe,immediatelyShow:oe,immediatelyHide:oe},lI=(t,r,l,h,p,y)=>{const S=(_e,et)=>{const Fe=et.get();_e!==Fe.isEnabled()&&(Fe.setEnabled(_e),_e?Fe.immediatelyShow():Fe.immediatelyHide())},R=(_e,et,Fe)=>kf.config({invalidClass:r("invalid"),notify:{onValidate:Ke=>{Jn(Ke,mA,{type:_e})},onValid:Ke=>{S(!1,Fe),Jn(Ke,iI,{type:_e,value:En.getValue(Ke)})},onInvalid:Ke=>{S(!0,Fe),Jn(Ke,jR,{type:_e,value:En.getValue(Ke)})}},validator:{validate:Ke=>{const Qe=En.getValue(Ke),yt=et(Qe)?C.value(!0):C.error(t("aria.input.invalid"));return uc.pure(yt)},validateOnLoad:!1}}),I=(_e,et,Fe,Ke,Qe)=>{const yt=to(ZR),St=t(_g+"range"),un=wr.parts.label({dom:{tag:"label"},components:[Ia(Fe)]}),Pn=wr.parts.field({data:Qe,factory:Cg,inputAttributes:{type:"text","aria-label":Ke,...et==="hex"?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:en([R(et,_e,yt),Sa.config({}),ni.config({...p({tooltipText:"",onSetup:cr=>{yt.set({isEnabled:()=>ni.isEnabled(cr),setEnabled:Kn=>ni.setEnabled(cr,Kn),immediatelyShow:()=>ni.immediateOpenClose(cr,!0),immediatelyHide:()=>ni.immediateOpenClose(cr,!1)}),ni.setEnabled(cr,!1)},onShow:(cr,Kn)=>{ni.setComponents(cr,[{dom:{tag:"p",classes:[r("rgb-warning-note")]},components:[Ia(t(et==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:cr=>{kf.isInvalid(cr)&&kf.run(cr).get(oe)}}),Rt=Fn("aria-invalid"),Nn=dr(y("invalid",V.some(Rt),"warning")),kn=dr({dom:{tag:"div",classes:[r("invalid-icon")]},components:[Nn.asSpec()]}),Vn=[un,Pn,kn.asSpec()],Es=et!=="hex"?[wr.parts["aria-descriptor"]({text:St})]:[],ua=Vn.concat(Es);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[r("rgb-container")]},components:ua}},H=(_e,et)=>{const Fe=V1(et);return zv.getField(_e,"hex").each(Ke=>{Io.isFocused(Ke)||En.setValue(_e,{hex:Fe.value})}),Fe},X=(_e,et)=>{const Fe=et.red,Ke=et.green,Qe=et.blue;En.setValue(_e,{red:Fe,green:Ke,blue:Qe})},K=dr({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),ie=(_e,et)=>{K.getOpt(_e).each(Fe=>{Mt(Fe.element,"background-color","#"+et.value)})};return Zc({factory:()=>{const _e={red:to(V.some(255)),green:to(V.some(255)),blue:to(V.some(255)),hex:to(V.some("ffffff"))},et=(Kn,Zt)=>{const wn=Hw(Zt);X(Kn,wn),yt(wn)},Fe=Kn=>_e[Kn].get(),Ke=(Kn,Zt)=>{_e[Kn].set(Zt)},Qe=()=>Fe("red").bind(Kn=>Fe("green").bind(Zt=>Fe("blue").map(wn=>Dv(Kn,Zt,wn,1)))),yt=Kn=>{const Zt=Kn.red,wn=Kn.green,$o=Kn.blue;Ke("red",V.some(Zt)),Ke("green",V.some(wn)),Ke("blue",V.some($o))},St=(Kn,Zt)=>{const wn=Zt.event;wn.type!=="hex"?Ke(wn.type,V.none()):h(Kn)},un=(Kn,Zt)=>{l(Kn);const wn=$k(Zt);Ke("hex",V.some(wn.value));const $o=Hw(wn);X(Kn,$o),yt($o),Jn(Kn,fA,{hex:wn}),ie(Kn,wn)},Pn=(Kn,Zt,wn)=>{const $o=parseInt(wn,10);Ke(Zt,V.some($o)),Qe().each(is=>{const mo=H(Kn,is);Jn(Kn,fA,{hex:mo}),ie(Kn,mo)})},Rt=Kn=>Kn.type==="hex",Nn=(Kn,Zt)=>{const wn=Zt.event;Rt(wn)?un(Kn,wn.value):Pn(Kn,wn.type,wn.value)},kn=Kn=>({label:t(_g+Kn+".label"),description:t(_g+Kn+".description")}),Vn=kn("red"),Es=kn("green"),ua=kn("blue"),cr=kn("hex");return me(zv.sketch(Kn=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Kn.field("red",wr.sketch(I(eR,"red",Vn.label,Vn.description,255))),Kn.field("green",wr.sketch(I(eR,"green",Es.label,Es.description,255))),Kn.field("blue",wr.sketch(I(eR,"blue",ua.label,ua.description,255))),Kn.field("hex",wr.sketch(I(qO,"hex",cr.label,cr.description,"ffffff"))),K.asSpec()],formBehaviours:en([kf.config({invalidClass:r("form-invalid")}),Ko("rgb-form-events",[Nt(iI,Nn),Nt(jR,St),Nt(mA,St)])])})),{apis:{updateHex:(Kn,Zt)=>{En.setValue(Kn,{hex:Zt.value}),et(Kn,Zt),ie(Kn,Zt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(_e,et,Fe)=>{_e.updateHex(et,Fe)}},extraApis:{}})},cI=(t,r)=>{const l=zh.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),h=zh.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:`<div class=${r("sv-palette-inner-thumb")} role="presentation"></div>`}}),p=(H,X)=>{const{width:K,height:ie}=H,de=H.getContext("2d");if(de===null)return;de.fillStyle=X,de.fillRect(0,0,K,ie);const Ce=de.createLinearGradient(0,0,K,0);Ce.addColorStop(0,"rgba(255,255,255,1)"),Ce.addColorStop(1,"rgba(255,255,255,0)"),de.fillStyle=Ce,de.fillRect(0,0,K,ie);const _e=de.createLinearGradient(0,0,0,ie);_e.addColorStop(0,"rgba(0,0,0,0)"),_e.addColorStop(1,"rgba(0,0,0,1)"),de.fillStyle=_e,de.fillRect(0,0,K,ie)},y=(H,X)=>{const K=H.components()[0].element.dom,ie=Lv(X,100,100),de=SL(ie);p(K,AL(de))},S=(H,X)=>{const K=zw(Hw(X));zh.setValue(H,{x:K.saturation,y:100-K.value}),kt(H.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",K.saturation,K.value]))};return Zc({factory:H=>{const X=ce({x:0,y:0}),K=(Ce,_e,et)=>{vo(et)||kt(Ce.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(et.x),Math.floor(100-et.y)])),Jn(Ce,YR,{value:et})},ie=(Ce,_e,et,Fe)=>{p(et.element.dom,AL(TL))},de=en([Bs.config({find:V.some}),Io.config({})]);return zh.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:X},rounded:!1,components:[l,h],onChange:K,onInit:ie,sliderBehaviours:de})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(H,X,K)=>{y(X,K)},setThumb:(H,X,K)=>{S(X,K)}},extraApis:{}})},GR=(t,r,l,h)=>{const p=S=>{const R=lI(t,r,S.onValidHex,S.onInvalidHex,l,h),I=cI(t,r),H=Rt=>(100-Rt)/100*360,X=Rt=>100-Rt/360*100,K={paletteRgba:to(TL),paletteHue:to(0)},ie=dr(oC(t,r)),de=dr(I.sketch({})),Ce=dr(R.sketch({})),_e=(Rt,Nn,kn)=>{de.getOpt(Rt).each(Vn=>{I.setHue(Vn,kn)})},et=(Rt,Nn)=>{Ce.getOpt(Rt).each(kn=>{R.updateHex(kn,Nn)})},Fe=(Rt,Nn,kn)=>{ie.getOpt(Rt).each(Vn=>{zh.setValue(Vn,X(kn))})},Ke=(Rt,Nn)=>{de.getOpt(Rt).each(kn=>{I.setThumb(kn,Nn)})},Qe=(Rt,Nn)=>{const kn=Hw(Rt);K.paletteRgba.set(kn),K.paletteHue.set(Nn)},yt=(Rt,Nn,kn,Vn)=>{Qe(Nn,kn),wt(Vn,Es=>{Es(Rt,Nn,kn)})},St=()=>{const Rt=[et];return(Nn,kn)=>{const Vn=kn.event.value,Es=K.paletteHue.get(),ua=Lv(Es,Vn.x,100-Vn.y),cr=IL(ua);yt(Nn,cr,Es,Rt)}},un=()=>{const Rt=[_e,et];return(Nn,kn)=>{const Vn=H(kn.event.value),Es=K.paletteRgba.get(),ua=zw(Es),cr=Lv(Vn,ua.saturation,ua.value),Kn=IL(cr);yt(Nn,Kn,Vn,Rt)}},Pn=()=>{const Rt=[_e,Fe,Ke];return(Nn,kn)=>{const Vn=kn.event.hex,Es=NL(Vn);yt(Nn,Vn,Es.hue,Rt)}};return{uid:S.uid,dom:S.dom,components:[de.asSpec(),ie.asSpec(),Ce.asSpec()],behaviours:en([Ko("colour-picker-events",[Nt(fA,Pn()),Nt(YR,St()),Nt(oI,un())]),Bs.config({find:Rt=>Ce.getOpt(Rt)}),po.config({mode:"acyclic"})])}};return Zc({name:"ColourPicker",configFields:[Lt("dom"),rt("onValidHex",oe),rt("onInvalidHex",oe)],factory:p})},rh={self:()=>Bs.config({find:V.some}),memento:t=>Bs.config({find:t.getOpt}),childAt:t=>Bs.config({find:r=>ha(r.element,t).bind(l=>r.getSystem().getByDom(l).toOptional())})},rz=fo([rt("preprocess",Gt),rt("postprocess",Gt)]),az=(t,r)=>{const l=Ul("RepresentingConfigs.memento processors",rz,r);return En.config({store:{mode:"manual",getValue:h=>{const p=t.get(h),y=En.getValue(p);return l.postprocess(y)},setValue:(h,p)=>{const y=l.preprocess(p),S=t.get(h);En.setValue(S,y)}}})},Vv=(t,r,l)=>En.config({store:{mode:"manual",...t.map(h=>({initialValue:h})).getOr({}),getValue:r,setValue:l}}),uI=(t,r,l)=>Vv(t,h=>r(h.element),(h,p)=>l(h.element,p)),iz=t=>uI(t,cg,Vc),sC=t=>En.config({store:{mode:"memory",initialValue:t}}),dI={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},lz=t=>r=>Ot(r)?t.translate(dI[r]):t.translate(r),cz=(t,r,l)=>{const h=H=>"tox-"+H,p=(H,X,K=H,ie=H)=>yd(K,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+H],attributes:{title:r.translate(ie),"aria-live":"polite",...X.fold(()=>({}),de=>({id:de}))}},r.icons),y=GR(lz(r),h,r.tooltips.getConfig,p),S=H=>{Jn(H,Sf,{name:"hex-valid",value:!0})},R=H=>{Jn(H,Sf,{name:"hex-valid",value:!1})},I=dr(y.sketch({dom:{tag:"div",classes:[h("color-picker-container")],attributes:{role:"presentation"}},onValidHex:S,onInvalidHex:R}));return{dom:{tag:"div"},components:[I.asSpec()],behaviours:en([Vv(l,H=>{const X=I.get(H);return Bs.getCurrent(X).bind(de=>En.getValue(de).hex).map(de=>"#"+Ol(de,"#")).getOr("")},(H,X)=>{const K=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,ie=V.from(K.exec(X)).bind(_e=>us(_e,1)),de=I.get(H);Bs.getCurrent(de).fold(()=>{console.log("Can not find form")},_e=>{En.setValue(_e,{hex:ie.getOr("")}),zv.getField(_e,"hex").each(et=>{ws(et,Hd())})})}),rh.self()])}};var uz=tinymce.util.Tools.resolve("tinymce.Resource");const rC=t=>os(t,"init"),dz=t=>{const r=zs(),l=dr({dom:{tag:t.tag}}),h=zs(),p=!rC(t)&&t.onFocus.isSome()?[Io.config({onFocus:y=>{t.onFocus.each(S=>{S(y.element.dom)})}}),Sa.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:en([Ko("custom-editor-events",[ba(y=>{l.getOpt(y).each(S=>{(rC(t)?t.init(S.element.dom):uz.load(t.scriptId,t.scriptUrl).then(R=>R(S.element.dom,t.settings))).then(R=>{h.on(I=>{R.setValue(I)}),h.clear(),r.set(R)})})})]),Vv(V.none(),()=>r.get().fold(()=>h.get().getOr(""),y=>y.getValue()),(y,S)=>{r.get().fold(()=>h.set(S),R=>R.setValue(S))}),rh.self()].concat(p)),components:[l.asSpec()]}};var Pm=tinymce.util.Tools.resolve("tinymce.util.Tools");const pA=Fn("browse.files.event"),hI=(t,r)=>{const l=Pm.explode(r.getOption("images_file_types")),h=p=>qs(l,y=>Ea(p.name.toLowerCase(),`.${y.toLowerCase()}`));return zo(vr(t),h)},hz=(t,r,l)=>{const h=(ie,de)=>{de.stop()},p=ie=>(de,Ce)=>{wt(ie,_e=>{_e(de,Ce)})},y=(ie,de)=>{var Ce;if(!Do.isDisabled(ie)){const _e=de.event.raw;Jn(ie,pA,{files:(Ce=_e.dataTransfer)===null||Ce===void 0?void 0:Ce.files})}},S=(ie,de)=>{const Ce=de.event.raw.target;Jn(ie,pA,{files:Ce.files})},R=(ie,de)=>{de&&(En.setValue(ie,hI(de,r)),Jn(ie,vu,{name:t.name}))},I=dr({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:en([Ko("input-file-events",[Vf(Bf()),Vf(u0())])])}),H=t.label.map(ie=>Jp(ie,r)),X=wr.parts.field({factory:tl,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Ia(r.translate("Browse for an image")),I.asSpec()],action:ie=>{I.get(ie).element.dom.click()},buttonBehaviours:en([rh.self(),sC(l.getOr([])),Sa.config({}),Cd.button(()=>r.checkUiComponentContext(t.context).shouldDisable),vi(()=>r.checkUiComponentContext(t.context))])}),K={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:en([Do.config({disabled:()=>r.checkUiComponentContext(t.context).shouldDisable}),vi(()=>r.checkUiComponentContext(t.context)),hs.config({toggleClass:"dragenter",toggleOnExecute:!1}),Ko("dropzone-events",[Nt("dragenter",p([h,hs.toggle])),Nt("dragleave",p([h,hs.toggle])),Nt("dragover",h),Nt("drop",p([h,y])),Nt(Sh(),S)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Ia(r.translate("Drop an image here"))]},X]}]};return Z1(H,K,["tox-form__group--stretched"],[Ko("handle-files",[Nt(pA,(ie,de)=>{wr.getField(ie).each(Ce=>{R(Ce,de.event.files)})})])])},gz=(t,r)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:dt(t.items,r.interpreter)}),KR=(t,r)=>{let l=null,h=null;return{cancel:()=>{fs(l)||(clearTimeout(l),l=null,h=null)},throttle:(...S)=>{h=S,fs(l)&&(l=setTimeout(()=>{const R=h;l=null,h=null,t.apply(null,R)},r))}}},fz=(t,r)=>{let l=null;return{cancel:()=>{fs(l)||(clearTimeout(l),l=null)},throttle:(...y)=>{fs(l)&&(l=setTimeout(()=>{l=null,t.apply(null,y)},r))}}},bA=(t,r)=>{let l=null;const h=()=>{fs(l)||(clearTimeout(l),l=null)};return{cancel:h,throttle:(...y)=>{h(),l=setTimeout(()=>{l=null,t.apply(null,y)},r)}}},JR=Fn("alloy-fake-before-tabstop"),QR=Fn("alloy-fake-after-tabstop"),gI=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:en([Io.config({ignore:!0}),Sa.config({})])}),eD=(t,r)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[gI([JR]),r,gI([QR])],behaviours:en([rh.childAt(1)])}),tD=(t,r)=>{Jn(t,Mu(),{raw:{which:9,shiftKey:r}})},mz=(t,r)=>{const l=r.element;yc(l,JR)?tD(t,!0):yc(l,QR)&&tD(t,!1)},aC=t=>Yw(t,["."+JR,"."+QR].join(","),Je),vA=Fn("update-dialog"),fI=Fn("update-title"),nD=Fn("update-body"),mI=Fn("update-footer"),oD=Fn("body-send-message"),xA=Fn("dialog-focus-shifted"),sD=rs().browser,iC=sD.isSafari(),pz=sD.isFirefox(),pI=iC||pz,bz=sD.isChromium(),vz=({scrollTop:t,scrollHeight:r,clientHeight:l})=>Math.ceil(t)+l>=r,bI=(t,r)=>t.scrollTo(0,r==="bottom"?99999999:r),xz=(t,r)=>{const l=t.body;return V.from(!/^<!DOCTYPE (html|HTML)/.test(r)&&(!bz&&!iC||vn(l)&&(l.scrollTop!==0||Math.abs(l.scrollHeight-l.clientHeight)>1))?l:t.documentElement)},yA=(t,r,l)=>{const h=t.dom;V.from(h.contentDocument).fold(l,p=>{let y=0;const S=xz(p,r).map(I=>(y=I.scrollTop,I)).forall(vz),R=()=>{const I=h.contentWindow;vn(I)&&(S?bI(I,"bottom"):!S&&pI&&y!==0&&bI(I,y))};iC&&h.addEventListener("load",R,{once:!0}),p.open(),p.write(r),p.close(),iC||R()})},yz=Qn(pI,iC?500:200).map(t=>KR(yA,t)),wz=(t,r)=>{const l=to(t.getOr(""));return{getValue:h=>l.get(),setValue:(h,p)=>{if(l.get()!==p){const y=h.element,S=()=>kt(y,"srcdoc",p);r?yz.fold(ce(yA),R=>R.throttle)(y,p,S):S()}l.set(p)}}},lC=(t,r,l)=>{const h="tox-dialog__iframe",p=t.transparent?[]:[`${h}--opaque`],y=t.border?["tox-navobj-bordered"]:[],S={...t.label.map(K=>({title:K})).getOr({}),...l.map(K=>({srcdoc:K})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},R=wz(l,t.streamContent),I=t.label.map(K=>Jp(K,r)),H=K=>eD(V.from(y),{uid:K.uid,dom:{tag:"iframe",attributes:S,classes:[h,...p]},behaviours:en([Sa.config({}),Io.config({}),Vv(l,R.getValue,R.setValue),Uc.config({channels:{[xA]:{onReceive:(ie,de)=>{de.newFocus.each(Ce=>{Mi(ie.element).each(_e=>{(Fs(ie.element,Ce)?bi:_r)(_e,"tox-navobj-bordered-focus")})})}}}})])}),X=wr.parts.field({factory:{sketch:H}});return Z1(I,X,["tox-form__group--stretched"],[])},rD=t=>new Promise((r,l)=>{const h=()=>{y(),r(t)},p=[wc(t,"load",h),wc(t,"error",()=>{y(),l("Unable to load data from image: "+t.dom.src)})],y=()=>wt(p,S=>S.unbind());t.dom.complete&&h()}),Cz=(t,r,l,h,p)=>{const y=l*p,S=h*p,R=Math.max(0,t/2-y/2),I=Math.max(0,r/2-S/2);return{left:R.toString()+"px",top:I.toString()+"px",width:y.toString()+"px",height:S.toString()+"px"}},Sz=(t,r,l)=>{const h=pe(t),p=Xo(t);return Math.min(h/r,p/l,1)},aD=(t,r)=>{const l=to(r.getOr({url:""})),h=dr({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:r.map(I=>({src:I.url})).getOr({})}}),p=dr({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[h.asSpec()]}),y=(I,H)=>{const X={url:H.url};H.zoom.each(ie=>X.zoom=ie),H.cachedWidth.each(ie=>X.cachedWidth=ie),H.cachedHeight.each(ie=>X.cachedHeight=ie),l.set(X);const K=()=>{const{cachedWidth:ie,cachedHeight:de,zoom:Ce}=X;if(!Ln(ie)&&!Ln(de)){if(Ln(Ce)){const et=Sz(I.element,ie,de);X.zoom=et}const _e=Cz(pe(I.element),Xo(I.element),ie,de,X.zoom);p.getOpt(I).each(et=>{jo(et.element,_e)})}};h.getOpt(I).each(ie=>{const de=ie.element;H.url!==In(de,"src")&&(kt(de,"src",H.url),_r(I.element,"tox-imagepreview__loaded")),K(),rD(de).then(Ce=>{I.getSystem().isConnected()&&(bi(I.element,"tox-imagepreview__loaded"),X.cachedWidth=Ce.dom.naturalWidth,X.cachedHeight=Ce.dom.naturalHeight,K())})})},S={};t.height.each(I=>S.height=I);const R=r.map(I=>({url:I.url,zoom:V.from(I.zoom),cachedWidth:V.from(I.cachedWidth),cachedHeight:V.from(I.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:S,attributes:{role:"presentation"}},components:[p.asSpec()],behaviours:en([rh.self(),Vv(R,()=>l.get(),y)])}},kz=(t,r,l)=>{const h="tox-label",p=t.align==="center"?[`${h}--center`]:[],y=t.align==="end"?[`${h}--end`]:[],S=dr({dom:{tag:"label",classes:[h,...p,...y]},components:[Ia(r.providers.translate(t.label))]}),R=dt(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[S.asSpec(),...R],behaviours:en([rh.self(),Wo.config({}),iz(V.none()),po.config({mode:"acyclic"}),Ko("label",[ba(I=>{t.for.each(H=>{l(H).each(X=>{S.getOpt(I).each(K=>{var ie;const de=(ie=In(X.element,"id"))!==null&&ie!==void 0?ie:Fn("form-field");kt(X.element,"id",de),kt(K.element,"for",de)})})})})])])}},wA=Fn("toolbar.button.execute"),vI=t=>ag((r,l)=>{Bk(t,r)(h=>{Jn(r,wA,{buttonApi:h}),t.onAction(h)})}),Wv=Fn("common-button-display-events"),xI={[kl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Mc()]:["toolbar-button-events",Wv],[cu()]:["toolbar-button-events","dropdown-events","tooltipping"],[Na()]:["focusing","alloy.base.behaviour",Wv]},CA=t=>Mt(t.element,"width",nr(t.element,"width")),iD=(t,r,l)=>yd(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:l},r),lD=(t,r)=>iD(t,r,[]),Lm=(t,r)=>iD(t,r,[Wo.config({})]),cD=(t,r,l)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Ia(l.translate(t))],behaviours:en([Wo.config({})])}),ah=Fn("update-menu-text"),ob=Fn("update-menu-icon"),SA=(t,r,l,h)=>{const p=to(oe),y=t.text.map(_e=>dr(cD(_e,r,l.providers))),S=t.icon.map(_e=>dr(Lm(_e,l.providers.icons))),R=(_e,et)=>{const Fe=En.getValue(_e);return Io.focus(Fe),Jn(Fe,"keydown",{raw:et.event.raw}),Sd.close(Fe),V.some(!0)},I=t.role.fold(()=>({}),_e=>({role:_e})),H=V.from(t.listRole).map(_e=>({listRole:_e})).getOr({}),X=t.ariaLabel.fold(()=>({}),_e=>({"aria-label":l.providers.translate(_e)})),K=yd("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},l.providers.icons),ie=Fn("common-button-display-events"),de="dropdown-events";return dr(Sd.sketch({...t.uid?{uid:t.uid}:{},...I,...H,dom:{tag:"button",classes:[r,`${r}--select`].concat(dt(t.classes,_e=>`${r}--${_e}`)),attributes:{...X,...vn(h)?{"data-mce-name":h}:{}}},components:Kp([S.map(_e=>_e.asSpec()),y.map(_e=>_e.asSpec()),V.some(K)]),matchWidth:!0,useMinWidth:!0,onOpen:(_e,et,Fe)=>{t.searchable&&Jk(Fe)},dropdownBehaviours:en([...t.dropdownBehaviours,Cd.button(()=>t.disabled||l.providers.checkUiComponentContext(t.context).shouldDisable),vi(()=>l.providers.checkUiComponentContext(t.context)),q1.config({}),Wo.config({}),...t.tooltip.map(_e=>ni.config(l.providers.tooltips.getConfig({tooltipText:l.providers.translate(_e)}))).toArray(),Ko(de,[Gp(t,p),qp(t,p)]),Ko(ie,[ba((_e,et)=>{t.listRole!=="listbox"&&CA(_e)})]),Ko("update-dropdown-width-variable",[Nt($f(),(_e,et)=>Sd.close(_e))]),Ko("menubutton-update-display-text",[Nt(ah,(_e,et)=>{y.bind(Fe=>Fe.getOpt(_e)).each(Fe=>{Wo.set(Fe,[Ia(l.providers.translate(et.event.text))])})}),Nt(ob,(_e,et)=>{S.bind(Fe=>Fe.getOpt(_e)).each(Fe=>{Wo.set(Fe,[Lm(et.event.icon,l.providers.icons)])})})])]),eventOrder:me(xI,{[Na()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Mc()]:["toolbar-button-events",ni.name(),de,ie]}),sandboxBehaviours:en([po.config({mode:"special",onLeft:R,onRight:R}),Ko("dropdown-sandbox-events",[Nt(AO,(_e,et)=>{B8(_e),et.stop()}),Nt(jP,(_e,et)=>{H8(_e,et),et.stop()})])]),lazySink:l.getSink,toggleClass:`${r}--active`,parts:{menu:{...Ew(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:Xw,onCollapseMenu:(_e,et,Fe)=>{dn.getHighlighted(Fe).each(Ke=>{Xw(_e,Fe,Ke)})},onDehighlightItem:V8}}},getAnchorOverrides:()=>({maxHeightFunction:(_e,et)=>{X2()(_e,et-10)}}),fetch:_e=>uc.nu(no(t.fetch,_e))})).asSpec()},yI=t=>Ot(t),wI=t=>t.type==="separator",Az=t=>os(t,"getSubmenuItems"),Tz={type:"separator"},CI=(t,r)=>{const l=ms(t,(h,p)=>yI(p)?p===""?h:p==="|"?h.length>0&&!wI(h[h.length-1])?h.concat([Tz]):h:os(r,p.toLowerCase())?h.concat([r[p.toLowerCase()]]):h:h.concat([p]),[]);return l.length>0&&wI(l[l.length-1])&&l.pop(),l},Ez=(t,r)=>{const l=t.getSubmenuItems(),h=kI(l,r),p=me(h.menus,{[t.value]:h.items}),y=me(h.expansions,{[t.value]:t.value});return{item:t,menus:p,expansions:y}},SI=t=>{const r=Yt(t,"value").getOrThunk(()=>Fn("generated-menu-item"));return me({value:r},t)},kI=(t,r)=>{const l=CI(Ot(t)?t.split(" "):t,r);return Un(l,(h,p)=>{if(Az(p)){const y=SI(p),S=Ez(y,r);return{menus:me(h.menus,S.menus),items:[S.item,...h.items],expansions:me(h.expansions,S.expansions)}}else return{...h,items:[p,...h.items]}},{menus:{},expansions:{},items:[]})},_z=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-field",placeholder:r.placeholder})),uD=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-results"})),nx=(t,r,l,h)=>{const p=Fn("primary-menu"),y=kI(t,l.shared.providers.menuItems());if(y.items.length===0)return V.none();const S=_z(h),R=Y8(p,y.items,r,l,h.isHorizontalMenu,S),I=uD(h),H=Go(y.menus,(K,ie)=>Y8(ie,K,r,l,!1,I)),X=me(H,Po(p,R));return V.from(yf.tieredData(p,X,y.expansions))},kA=t=>!os(t,"items"),AI="data-value",AA=(t,r,l,h,p)=>dt(l,y=>kA(y)?{type:"togglemenuitem",...p?{}:{role:"option"},text:y.text,value:y.value,active:y.value===h,onAction:()=>{En.setValue(t,y.value),Jn(t,vu,{name:r}),Io.focus(t)}}:{type:"nestedmenuitem",text:y.text,getSubmenuItems:()=>AA(t,r,y.items,h,p)}),dD=(t,r)=>qo(t,l=>kA(l)?Qn(l.value===r,l):dD(l.items,r)),TI=(t,r,l)=>{const h=qs(t.items,H=>!kA(H)),p=r.shared.providers,y=l.bind(H=>dD(t.items,H)).orThunk(()=>ur(t.items).filter(kA)),S=t.label.map(H=>Jp(H,p)),R=wr.parts.field({dom:{},factory:{sketch:H=>SA({context:t.context,uid:H.uid,text:y.map(X=>X.text),icon:V.none(),tooltip:V.none(),role:Qn(!h,"combobox"),...h?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(X,K)=>{const ie=AA(X,t.name,t.items,En.getValue(X),h);K(nx(ie,Fh.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:V.none()}))},onSetup:ce(oe),getApi:ce({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Sa.config({}),Vv(y.map(X=>X.value),X=>In(X.element,AI),(X,K)=>{dD(t.items,K).each(ie=>{kt(X.element,AI,ie.value),Jn(X,ah,{text:ie.text})})})]},"tox-listbox",r.shared)}}),I={dom:{tag:"div",classes:["tox-listboxfield"]},components:[R]};return wr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ze([S.toArray(),[I]]),fieldBehaviours:en([Do.config({disabled:()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable,onDisabled:H=>{wr.getField(H).each(Do.disable)},onEnabled:H=>{wr.getField(H).each(Do.enable)}})])})},Oz=(t,r)=>({dom:{tag:"div",classes:t.classes},components:dt(t.items,r.shared.interpreter)}),EI=(t,r)=>{const l=dt(t.options,p=>({dom:{tag:"option",value:p.value,innerHtml:p.text}})),h=t.data.map(p=>Po("initialValue",p)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:l,behaviours:gl(t.selectBehaviours,[Io.config({}),En.config({store:{mode:"manual",getValue:p=>pd(p.element),setValue:(p,y)=>{const S=ur(t.options);We(t.options,I=>I.value===y).isSome()?om(p.element,y):p.element.dom.selectedIndex===-1&&y===""&&S.each(I=>om(p.element,I.value))},...h}})])}},Rz=Zc({name:"HtmlSelect",configFields:[Lt("options"),hl("selectBehaviours",[Io,En]),rt("selectClasses",[]),rt("selectAttributes",{}),tr("data")],factory:EI}),Dz=(t,r,l)=>{const h=dt(t.items,I=>({text:r.translate(I.text),value:I.value})),p=t.label.map(I=>Jp(I,r)),y=wr.parts.field({dom:{},...l.map(I=>({data:I})).getOr({}),selectAttributes:{size:t.size},options:h,factory:Rz,selectBehaviours:en([Do.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable}),Sa.config({}),Ko("selectbox-change",[Nt(Sh(),(I,H)=>{Jn(I,vu,{name:t.name})})])])}),S=t.size>1?V.none():V.some(yd("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),R={dom:{tag:"div",classes:["tox-selectfield"]},components:Ze([[y],S.toArray()])};return wr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ze([p.toArray(),[R]]),fieldBehaviours:en([Do.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable,onDisabled:I=>{wr.getField(I).each(Do.disable)},onEnabled:I=>{wr.getField(I).each(Do.enable)}}),vi(()=>r.checkUiComponentContext(t.context))])})},Mz=ce([rt("field1Name","field1"),rt("field2Name","field2"),Kf("onLockedChange"),ug(["lockClass"]),rt("locked",!1),$u.field("coupledFieldBehaviours",[Bs,En])]),Pz=(t,r,l)=>Ur(t,r,l).bind(Bs.getCurrent),_I=(t,r)=>Zl({factory:wr,name:t,overrides:l=>({fieldBehaviours:en([Ko("coupled-input-behaviour",[Nt(Hd(),h=>{Pz(h,l,r).each(p=>{Ur(h,l,"lock").each(y=>{hs.isOn(y)&&l.onLockedChange(h,p,y)})})})])])})}),OI=ce([_I("field1","field2"),_I("field2","field1"),Zl({factory:tl,schema:[Lt("dom")],name:"lock",overrides:t=>({buttonBehaviours:en([hs.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),Lz=(t,r,l,h)=>({uid:t.uid,dom:t.dom,components:r,behaviours:$u.augment(t.coupledFieldBehaviours,[Bs.config({find:V.some}),En.config({store:{mode:"manual",getValue:p=>{const y=Lp(p,t,["field1","field2"]);return{[t.field1Name]:En.getValue(y.field1()),[t.field2Name]:En.getValue(y.field2())}},setValue:(p,y)=>{const S=Lp(p,t,["field1","field2"]);Lr(y,t.field1Name)&&En.setValue(S.field1(),y[t.field1Name]),Lr(y,t.field2Name)&&En.setValue(S.field2(),y[t.field2Name])}}})]),apis:{getField1:p=>Ur(p,t,"field1"),getField2:p=>Ur(p,t,"field2"),getLock:p=>Ur(p,t,"lock")}}),Ad=Hl({name:"FormCoupledInputs",configFields:Mz(),partFields:OI(),factory:Lz,apis:{getField1:(t,r)=>t.getField1(r),getField2:(t,r)=>t.getField2(r),getLock:(t,r)=>t.getLock(r)}}),RI=t=>{const r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},l=p=>p in r?r[p]:1;let h=t.value.toFixed(l(t.unit));return h.indexOf(".")!==-1&&(h=h.replace(/\.?0*$/,"")),h+t.unit},hD=t=>{const l=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(l!==null){const h=parseFloat(l[1]),p=l[2];return C.value({value:h,unit:p})}else return C.error(t)},DI=(t,r)=>{const l={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},h=p=>os(l,p);return t.unit===r?V.some(t.value):h(t.unit)&&h(r)?l[t.unit]===l[r]?V.some(t.value):V.some(t.value/l[t.unit]*l[r]):V.none()},gD=t=>V.none(),MI=(t,r)=>l=>DI(l,r).map(h=>({value:h*t,unit:r})),Nz=(t,r)=>{const l=hD(t).toOptional(),h=hD(r).toOptional();return da(l,h,(p,y)=>DI(p,y.unit).map(S=>y.value/S).map(S=>MI(S,y.unit)).getOr(gD)).getOr(gD)},Iz=(t,r)=>{let l=gD;const h=Fn("ratio-event"),p=de=>yd(de,{tag:"span",classes:["tox-icon","tox-lock-icon__"+de]},r.icons),y=t.label.getOr("Constrain proportions"),S=r.translate(y),R=Ad.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":S,"data-mce-name":y}},components:[p("lock"),p("unlock")],buttonBehaviours:en([Do.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable}),vi(()=>r.checkUiComponentContext(t.context)),Sa.config({}),ni.config(r.tooltips.getConfig({tooltipText:S}))])}),I=de=>({dom:{tag:"div",classes:["tox-form__group"]},components:de}),H=de=>wr.parts.field({factory:Cg,inputClasses:["tox-textfield"],inputBehaviours:en([Do.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable}),vi(()=>r.checkUiComponentContext(t.context)),Sa.config({}),Ko("size-input-events",[Nt(vc(),(Ce,_e)=>{Jn(Ce,h,{isField1:de})}),Nt(Sh(),(Ce,_e)=>{Jn(Ce,vu,{name:t.name})})])]),selectOnFocus:!1}),X=de=>({dom:{tag:"label",classes:["tox-label"]},components:[Ia(r.translate(de))]}),K=Ad.parts.field1(I([wr.parts.label(X("Width")),H(!0)])),ie=Ad.parts.field2(I([wr.parts.label(X("Height")),H(!1)]));return Ad.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[K,ie,I([X(DE),R])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(de,Ce,_e)=>{hD(En.getValue(de)).each(et=>{l(et).each(Fe=>{En.setValue(Ce,RI(Fe))})})},coupledFieldBehaviours:en([Do.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable,onDisabled:de=>{Ad.getField1(de).bind(wr.getField).each(Do.disable),Ad.getField2(de).bind(wr.getField).each(Do.disable),Ad.getLock(de).each(Do.disable)},onEnabled:de=>{Ad.getField1(de).bind(wr.getField).each(Do.enable),Ad.getField2(de).bind(wr.getField).each(Do.enable),Ad.getLock(de).each(Do.enable)}}),vi(()=>r.checkUiComponentContext("mode:design")),Ko("size-input-events2",[Nt(h,(de,Ce)=>{const _e=Ce.event.isField1,et=_e?Ad.getField1(de):Ad.getField2(de),Fe=_e?Ad.getField2(de):Ad.getField1(de),Ke=et.map(En.getValue).getOr(""),Qe=Fe.map(En.getValue).getOr("");l=Nz(Ke,Qe)})])])})},Fz=(t,r,l)=>{const h=zh.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ia(r.translate(t.label))]}),p=zh.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),y=zh.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return zh.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ce(l.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[h,p,y],sliderBehaviours:en([rh.self(),Io.config({})]),onChoose:(S,R,I)=>{Jn(S,vu,{name:t.name,value:I})},onChange:(S,R,I)=>{Jn(S,vu,{name:t.name,value:I})}})},PI=(t,r)=>{const l=R=>({dom:{tag:"th",innerHtml:r.translate(R)}}),h=R=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:dt(R,l)}]}),p=R=>({dom:{tag:"td",innerHtml:r.translate(R)}}),y=R=>({dom:{tag:"tr"},components:dt(R,p)}),S=R=>({dom:{tag:"tbody"},components:dt(R,y)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[h(t.header),S(t.cells)],behaviours:en([Sa.config({}),Io.config({})])}},fD=(t,r)=>{const l=t.label.map(de=>Jp(de,r)),h=[Do.config({disabled:()=>t.disabled||r.checkUiComponentContext(t.context).shouldDisable}),vi(()=>r.checkUiComponentContext(t.context)),po.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:de=>(ws(de,G1),V.some(!0))}),Ko("textfield-change",[Nt(Hd(),(de,Ce)=>{Jn(de,vu,{name:t.name})}),Nt(xb(),(de,Ce)=>{Jn(de,vu,{name:t.name})})]),Sa.config({})],p=t.validation.map(de=>kf.config({getRoot:Ce=>Mi(Ce.element),invalidClass:"tox-invalid",validator:{validate:Ce=>{const _e=En.getValue(Ce),et=de.validator(_e);return uc.pure(et===!0?C.value(_e):C.error(et))},validateOnLoad:de.validateOnLoad}})).toArray(),y=t.placeholder.fold(ce({}),de=>({placeholder:r.translate(de)})),S=t.inputMode.fold(ce({}),de=>({inputmode:de})),R={...y,...S,"data-mce-name":t.name},I=wr.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(de=>({data:de})).getOr({}),inputAttributes:R,inputClasses:[t.classname],inputBehaviours:en(Ze([h,p])),selectOnFocus:!1,factory:Cg}),H=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[I]}:I,K=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),ie=[Do.config({disabled:()=>t.disabled||r.checkUiComponentContext(t.context).shouldDisable,onDisabled:de=>{wr.getField(de).each(Do.disable)},onEnabled:de=>{wr.getField(de).each(Do.enable)}}),vi(()=>r.checkUiComponentContext(t.context))];return Z1(l,H,K,ie)},LI=(t,r,l)=>fD({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:V.none(),maximized:t.maximized,data:l,context:t.context},r),TA=(t,r,l)=>fD({name:t.name,multiline:!0,label:t.label,inputMode:V.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:V.none(),maximized:t.maximized,data:l,context:t.context},r),cC=(t,r)=>r.getAnimationRoot.fold(()=>t.element,l=>l(t)),Nm=t=>t.dimension.property,Uv=(t,r)=>t.dimension.getDimension(r),EA=(t,r)=>{const l=cC(t,r);Wd(l,[r.shrinkingClass,r.growingClass])},_A=(t,r)=>{_r(t.element,r.openClass),bi(t.element,r.closedClass),Mt(t.element,Nm(r),"0px"),Si(t.element)},mD=(t,r)=>{_r(t.element,r.closedClass),bi(t.element,r.openClass),Oo(t.element,Nm(r))},NI=(t,r,l,h)=>{l.setCollapsed(),Mt(t.element,Nm(r),Uv(r,t.element)),EA(t,r),_A(t,r),r.onStartShrink(t),r.onShrunk(t)},Bz=(t,r,l,h)=>{const p=h.getOrThunk(()=>Uv(r,t.element));l.setCollapsed(),Mt(t.element,Nm(r),p),Si(t.element);const y=cC(t,r);_r(y,r.growingClass),bi(y,r.shrinkingClass),_A(t,r),r.onStartShrink(t)},pD=(t,r,l)=>{const h=Uv(r,t.element);(h==="0px"?NI:Bz)(t,r,l,V.some(h))},bD=(t,r,l)=>{const h=cC(t,r),p=yc(h,r.shrinkingClass),y=Uv(r,t.element);mD(t,r);const S=Uv(r,t.element);(p?()=>{Mt(t.element,Nm(r),y),Si(t.element)}:()=>{_A(t,r)})(),_r(h,r.shrinkingClass),bi(h,r.growingClass),mD(t,r),Mt(t.element,Nm(r),S),l.setExpanded(),r.onStartGrow(t)},Hz=(t,r,l)=>{if(l.isExpanded()){Oo(t.element,Nm(r));const h=Uv(r,t.element);Mt(t.element,Nm(r),h)}},$z=(t,r,l)=>{l.isExpanded()||bD(t,r,l)},II=(t,r,l)=>{l.isExpanded()&&pD(t,r,l)},zz=(t,r,l)=>{l.isExpanded()&&NI(t,r,l)},Vz=(t,r,l)=>l.isExpanded(),Uo=(t,r,l)=>l.isCollapsed(),ox=(t,r,l)=>{const h=cC(t,r);return yc(h,r.growingClass)===!0},vD=(t,r,l)=>{const h=cC(t,r);return yc(h,r.shrinkingClass)===!0};var FI=Object.freeze({__proto__:null,refresh:Hz,grow:$z,shrink:II,immediateShrink:zz,hasGrown:Vz,hasShrunk:Uo,isGrowing:ox,isShrinking:vD,isTransitioning:(t,r,l)=>ox(t,r)||vD(t,r),toggleGrow:(t,r,l)=>{(l.isExpanded()?pD:bD)(t,r,l)},disableTransitions:EA,immediateGrow:(t,r,l)=>{l.isExpanded()||(mD(t,r),Mt(t.element,Nm(r),Uv(r,t.element)),EA(t,r),l.setExpanded(),r.onStartGrow(t),r.onGrown(t))}}),Yz=Object.freeze({__proto__:null,exhibit:(t,r,l)=>{const h=r.expanded;return xc(h?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:Po(r.dimension.property,"0px")})},events:(t,r)=>Er([Yg(vb(),(l,h)=>{h.event.raw.propertyName===t.dimension.property&&(EA(l,t),r.isExpanded()&&Oo(l.element,t.dimension.property),(r.isExpanded()?t.onGrown:t.onShrunk)(l))})])}),BI=[Lt("closedClass"),Lt("openClass"),Lt("shrinkingClass"),Lt("growingClass"),tr("getAnimationRoot"),Ws("onShrunk"),Ws("onStartShrink"),Ws("onGrown"),Ws("onStartGrow"),rt("expanded",!1),ar("dimension",Ga("property",{width:[ra("property","width"),ra("getDimension",t=>pe(t)+"px")],height:[ra("property","height"),ra("getDimension",t=>Xo(t)+"px")]}))],jz=Object.freeze({__proto__:null,init:t=>{const r=to(t.expanded),l=()=>"expanded: "+r.get();return rc({isExpanded:()=>r.get()===!0,isCollapsed:()=>r.get()===!1,setCollapsed:no(r.set,!1),setExpanded:no(r.set,!0),readState:l})}});const xu=ul({fields:BI,name:"sliding",active:Yz,apis:FI,state:jz}),xD=t=>({isEnabled:()=>!Do.isDisabled(t),setEnabled:r=>Do.set(t,!r),setActive:r=>{const l=t.element;r?(bi(l,"tox-tbtn--enabled"),kt(l,"aria-pressed",!0)):(_r(l,"tox-tbtn--enabled"),Q(l,"aria-pressed"))},isActive:()=>yc(t.element,"tox-tbtn--enabled"),setText:r=>{Jn(t,ah,{text:r})},setIcon:r=>Jn(t,ob,{icon:r})}),Xv=(t,r,l,h,p=!0,y)=>SA({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:h,fetch:(S,R)=>{const I={pattern:t.search.isSome()?W8(S):""};t.fetch(H=>{R(nx(H,Fh.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:t.search}))},I,xD(S))},onSetup:t.onSetup,getApi:xD,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...p?[Sa.config({})]:[]],context:t.context},r,l.shared,y),HI=(t,r,l)=>{const h=y=>S=>{const R=!S.isActive();S.setActive(R),y.storage.set(R),l.shared.getSink().each(I=>{r().getOpt(I).each(H=>{Fu(H.element),Jn(H,Sf,{name:y.name,value:y.storage.get()})})})},p=y=>S=>{S.setActive(y.storage.get())};return y=>{y(dt(t,S=>{const R=S.text.fold(()=>({}),I=>({text:I}));return{type:S.type,active:!1,...R,context:S.context,onAction:h(S),onSetup:p(S)}}))}},$I=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Ia(t)]}),zI=(t,r,l)=>{t.customStateIcon.each(h=>r.push(WI(h,l.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],p=>[ni.config(l.shared.providers.tooltips.getConfig({tooltipText:p}))]),["tox-icon-custom-state"],t.customStateIconTooltip.fold(()=>({}),p=>({title:p})))))},VI=Fn("leaf-label-event-id"),yD=({leaf:t,onLeafAction:r,visible:l,treeId:h,selectedId:p,backstage:y})=>{const S=t.menu.map(I=>Xv(I,"tox-mbtn",y,V.none(),l)),R=[$I(t.title)];return zI(t,R,y),S.each(I=>R.push(I)),tl.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(l?["tox-tree--leaf__label--visible"]:[])},components:R,role:"treeitem",action:I=>{r(t.id),I.getSystem().broadcastOn([`update-active-item-${h}`],{value:t.id})},eventOrder:{[Mu()]:[VI,"keying"]},buttonBehaviours:en([...l?[Sa.config({})]:[],hs.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Uc.config({channels:{[`update-active-item-${h}`]:{onReceive:(I,H)=>{(H.value===t.id?hs.on:hs.off)(I)}}}}),Ko(VI,[ba((I,H)=>{p.each(X=>{(X===t.id?hs.on:hs.off)(I)})}),Nt(Mu(),(I,H)=>{const X=H.event.raw.code==="ArrowLeft",K=H.event.raw.code==="ArrowRight";X?(Hi(I.element,".tox-tree--directory").each(ie=>{I.getSystem().getByDom(ie).each(de=>{Iu(ie,".tox-tree--directory__label").each(Ce=>{de.getSystem().getByDom(Ce).each(Io.focus)})})}),H.stop()):K&&H.stop()})])])})},WI=(t,r,l,h,p)=>yd(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(h||[]),behaviours:l,attributes:p},r),Zz=(t,r)=>WI(t,r,[]),UI=Fn("directory-label-event-id"),Gz=({directory:t,visible:r,noChildren:l,backstage:h})=>{const p=t.menu.map(R=>Xv(R,"tox-mbtn",h,V.none())),y=[{dom:{tag:"div",classes:["tox-chevron"]},components:[Zz("chevron-right",h.shared.providers.icons)]},$I(t.title)];zI(t,y,h),p.each(R=>{y.push(R)});const S=R=>{Hi(R.element,".tox-tree--directory").each(I=>{R.getSystem().getByDom(I).each(H=>{const X=!hs.isOn(H);hs.toggle(H),Jn(R,"expand-tree-node",{expanded:X,node:t.id})})})};return tl.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:y,action:S,eventOrder:{[Mu()]:[UI,"keying"]},buttonBehaviours:en([...r?[Sa.config({})]:[],Ko(UI,[Nt(Mu(),(R,I)=>{const H=I.event.raw.code==="ArrowRight",X=I.event.raw.code==="ArrowLeft";H&&l&&I.stop(),(H||X)&&Hi(R.element,".tox-tree--directory").each(K=>{R.getSystem().getByDom(K).each(ie=>{!hs.isOn(ie)&&H||hs.isOn(ie)&&X?(S(R),I.stop()):X&&!hs.isOn(ie)&&(Hi(ie.element,".tox-tree--directory").each(de=>{Iu(de,".tox-tree--directory__label").each(Ce=>{ie.getSystem().getByDom(Ce).each(Io.focus)})}),I.stop())})})})])])})},qz=({children:t,onLeafAction:r,visible:l,treeId:h,expandedIds:p,selectedId:y,backstage:S})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(R=>R.type==="leaf"?yD({leaf:R,selectedId:y,onLeafAction:r,visible:l,treeId:h,backstage:S}):RA({directory:R,expandedIds:p,selectedId:y,onLeafAction:r,labelTabstopping:l,treeId:h,backstage:S})),behaviours:en([xu.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:l}),Wo.config({})])}),Kz=Fn("directory-event-id"),RA=({directory:t,onLeafAction:r,labelTabstopping:l,treeId:h,backstage:p,expandedIds:y,selectedId:S})=>{const{children:R}=t,I=to(y),H=K=>R.map(ie=>ie.type==="leaf"?yD({leaf:ie,selectedId:S,onLeafAction:r,visible:K,treeId:h,backstage:p}):RA({directory:ie,expandedIds:I.get(),selectedId:S,onLeafAction:r,labelTabstopping:K,treeId:h,backstage:p})),X=y.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Gz({directory:t,visible:l,noChildren:t.children.length===0,backstage:p}),qz({children:R,expandedIds:y,selectedId:S,onLeafAction:r,visible:X,treeId:h,backstage:p})],behaviours:en([Ko(Kz,[ba((K,ie)=>{hs.set(K,X)}),Nt("expand-tree-node",(K,ie)=>{const{expanded:de,node:Ce}=ie.event;I.set(de?[...I.get(),Ce]:I.get().filter(_e=>_e!==Ce))})]),hs.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(K,ie)=>{const de=K.components()[1],Ce=H(ie);ie?xu.grow(de):xu.shrink(de),Wo.set(de,Ce)}})])}},Jz=Fn("tree-event-id"),Qz=(t,r)=>{const l=t.onLeafAction.getOr(oe),h=t.onToggleExpand.getOr(oe),p=t.defaultExpandedIds,y=to(p),S=to(t.defaultSelectedId),R=Fn("tree-id"),I=(H,X)=>t.items.map(K=>K.type==="leaf"?yD({leaf:K,selectedId:H,onLeafAction:l,visible:!0,treeId:R,backstage:r}):RA({directory:K,selectedId:H,onLeafAction:l,expandedIds:X,labelTabstopping:!0,treeId:R,backstage:r}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:I(S.get(),y.get()),behaviours:en([po.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Ko(Jz,[Nt("expand-tree-node",(H,X)=>{const{expanded:K,node:ie}=X.event;y.set(K?[...y.get(),ie]:y.get().filter(de=>de!==ie)),h(y.get(),{expanded:K,node:ie})})]),Uc.config({channels:{[`update-active-item-${R}`]:{onReceive:(H,X)=>{S.set(V.some(X.value)),Wo.set(H,I(V.some(X.value),y.get()))}}}}),Wo.config({})])}};var e9=Object.freeze({__proto__:null,events:(t,r)=>{const h=t.stream.streams.setup(t,r);return Er([Nt(t.event,h),kh(()=>r.cancel())].concat(t.cancelEvent.map(p=>[Nt(p,()=>r.cancel())]).getOr([])))}});const XI=t=>{const r=to(null);return rc({readState:()=>({timer:r.get()!==null?"set":"unset"}),setTimer:y=>{r.set(y)},cancel:()=>{const y=r.get();y!==null&&y.cancel()}})};var t9=Object.freeze({__proto__:null,throttle:XI,init:t=>t.stream.streams.state(t)});const n9=(t,r)=>{const l=t.stream,h=bA(t.onStream,l.delay);return r.setTimer(h),(p,y)=>{h.throttle(p,y),l.stopEvent&&y.stop()}};var o9=[ar("stream",Ga("mode",{throttle:[Lt("delay"),rt("stopEvent",!0),ra("streams",{setup:n9,state:XI})]})),rt("event","input"),tr("cancelEvent"),Kf("onStream")];const wD=ul({fields:o9,name:"streaming",active:e9,state:t9}),DA=(t,r,l)=>{const h=En.getValue(l);En.setValue(r,h),YI(r)},CD=(t,r)=>{const l=t.element,h=pd(l),p=l.dom;In(l,"type")!=="number"&&r(p,h)},YI=t=>{CD(t,(r,l)=>r.setSelectionRange(l.length,l.length))},s9=(t,r)=>{CD(t,(l,h)=>l.setSelectionRange(r,h.length))},r9=(t,r,l)=>{if(t.selectsOver){const h=En.getValue(r),p=t.getDisplayText(h),y=En.getValue(l);return t.getDisplayText(y).indexOf(p)===0?V.some(()=>{DA(t,r,l),s9(r,p.length)}):V.none()}else return V.none()},SD=ce("alloy.typeahead.itemexecute"),a9=(t,r,l,h)=>{const p=(K,ie,de)=>{t.previewing.set(!1);const Ce=ui.getCoupled(K,"sandbox");if(Gs.isOpen(Ce))Bs.getCurrent(Ce).each(_e=>{dn.getHighlighted(_e).fold(()=>{de(_e)},()=>{m0(Ce,_e.element,"keydown",ie)})});else{const _e=et=>{Bs.getCurrent(et).each(de)};qk(t,S(K),K,Ce,h,_e,qc.HighlightMenuAndItem).get(oe)}},y=UP(t),S=K=>ie=>ie.map(de=>{const Ce=Ri(de.menus),_e=De(Ce,Fe=>zo(Fe.items,Ke=>Ke.type==="item"));return En.getState(K).update(dt(_e,Fe=>Fe.data)),de}),R=K=>Bs.getCurrent(K),I="typeaheadevents",H=[Io.config({}),En.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:K=>pd(K.element),getFallbackEntry:K=>({value:K,meta:{}}),setValue:(K,ie)=>{om(K.element,t.model.getDisplayText(ie))},...t.initialData.map(K=>Po("initialValue",K)).getOr({})}}),wD.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(K,ie)=>{const de=ui.getCoupled(K,"sandbox");if(Io.isFocused(K)&&pd(K.element).length>=t.minChars){const _e=R(de).bind(Fe=>dn.getHighlighted(Fe).map(En.getValue));t.previewing.set(!0);const et=Fe=>{R(de).each(Ke=>{_e.fold(()=>{t.model.selectsOver&&dn.highlightFirst(Ke)},Qe=>{dn.highlightBy(Ke,yt=>En.getValue(yt).value===Qe.value),dn.getHighlighted(Ke).orThunk(()=>(dn.highlightFirst(Ke),V.none()))})})};qk(t,S(K),K,de,h,et,qc.HighlightJustMenu).get(oe)}},cancelEvent:d0()}),po.config({mode:"special",onDown:(K,ie)=>(p(K,ie,dn.highlightFirst),V.some(!0)),onEscape:K=>{const ie=ui.getCoupled(K,"sandbox");return Gs.isOpen(ie)?(Gs.close(ie),V.some(!0)):V.none()},onUp:(K,ie)=>(p(K,ie,dn.highlightLast),V.some(!0)),onEnter:K=>{const ie=ui.getCoupled(K,"sandbox"),de=Gs.isOpen(ie);if(de&&!t.previewing.get())return R(ie).bind(Ce=>dn.getHighlighted(Ce)).map(Ce=>(Jn(K,SD(),{item:Ce}),!0));{const Ce=En.getValue(K);return ws(K,d0()),t.onExecute(ie,K,Ce),de&&Gs.close(ie),V.some(!0)}}}),hs.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),ui.config({others:{sandbox:K=>fR(t,K,{onOpen:()=>hs.on(K),onClose:()=>{t.lazyTypeaheadComp.get().each(ie=>Q(ie.element,"aria-activedescendant")),hs.off(K)}})}}),Ko(I,[ba(K=>{t.lazyTypeaheadComp.set(V.some(K))}),kh(K=>{t.lazyTypeaheadComp.set(V.none())}),ag(K=>{const ie=oe;hR(t,S(K),K,h,ie,qc.HighlightMenuAndItem).get(oe)}),Nt(SD(),(K,ie)=>{const de=ui.getCoupled(K,"sandbox");DA(t.model,K,ie.event.item),ws(K,d0()),t.onItemExecute(K,de,ie.event.item,En.getValue(K)),Gs.close(de),YI(K)})].concat(t.dismissOnBlur?[Nt(Hf(),K=>{const ie=ui.getCoupled(K,"sandbox");ic(ie.element).isNone()&&Gs.close(ie)})]:[]))],X={[cu()]:[En.name(),wD.name(),I],...t.eventOrder};return{uid:t.uid,dom:XP(me(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...y,...gl(t.typeaheadBehaviours,H)},eventOrder:X}},i9=ce([tr("lazySink"),Lt("fetch"),rt("minChars",5),rt("responseTime",1e3),Ws("onOpen"),rt("getHotspot",V.some),rt("getAnchorOverrides",ce({})),rt("layouts",V.none()),rt("eventOrder",{}),N("model",{},[rt("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),rt("selectsOver",!0),rt("populateFromBrowse",!0)]),Ws("onSetValue"),Yl("onExecute"),Ws("onItemExecute"),rt("inputClasses",[]),rt("inputAttributes",{}),rt("inputStyles",{}),rt("matchWidth",!0),rt("useMinWidth",!1),rt("dismissOnBlur",!0),ug(["openClass"]),tr("initialData"),tr("listRole"),hl("typeaheadBehaviours",[Io,En,wD,po,hs,ui]),rr("lazyTypeaheadComp",()=>to(V.none)),rr("previewing",()=>to(!0))].concat(WP()).concat(Kk())),jI=ce([zu({schema:[_h()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(r,l,h)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(p=>{r9(t.model,p,h).fold(()=>{t.model.selectsOver?(dn.dehighlight(l,h),t.previewing.set(!0)):t.previewing.set(!1)},y=>{y(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(p=>{t.model.populateFromBrowse&&DA(t.model,p,h),_o(h.element,"id").each(y=>kt(p.element,"aria-activedescendant",y))})},onExecute:(r,l)=>t.lazyTypeaheadComp.get().map(h=>(Jn(h,SD(),{item:l}),!0)),onHover:(r,l)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(h=>{t.model.populateFromBrowse&&DA(t.model,h,l)})}})})]),l9=Hl({name:"Typeahead",configFields:i9(),partFields:jI(),factory:a9}),ih=t=>({...t,toCached:()=>ih(t.toCached()),bindFuture:I=>ih(t.bind(H=>H.fold(X=>uc.pure(C.error(X)),X=>I(X)))),bindResult:I=>ih(t.map(H=>H.bind(I))),mapResult:I=>ih(t.map(H=>H.map(I))),mapError:I=>ih(t.map(H=>H.mapError(I))),foldResult:(I,H)=>t.map(X=>X.fold(I,H)),withTimeout:(I,H)=>ih(uc.nu(X=>{let K=!1;const ie=setTimeout(()=>{K=!0,X(C.error(H()))},I);t.get(de=>{K||(clearTimeout(ie),X(de))})}))}),ZI=t=>ih(uc.nu(t)),kD=t=>ih(uc.pure(C.value(t))),qI={nu:ZI,wrap:ih,pure:kD,value:kD,error:t=>ih(uc.pure(C.error(t))),fromResult:t=>ih(uc.pure(t)),fromFuture:t=>ih(t.map(C.value)),fromPromise:t=>ZI(r=>{t.then(l=>{r(C.value(l))},l=>{r(C.error(l))})})},MA=(t,r,l=[],h,p,y,S)=>{const R=r.fold(()=>({}),X=>({action:X})),I={buttonBehaviours:en([Cd.item(()=>!t.enabled||S.checkUiComponentContext(t.context).shouldDisable),vi(()=>S.checkUiComponentContext(t.context)),Sa.config({}),...y.map(X=>ni.config(S.tooltips.getConfig({tooltipText:S.translate(X)}))).toArray(),Ko("button press",[_x("click")])].concat(l)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...R},H=me(I,{dom:h});return me(H,{components:p})},KI=(t,r,l,h=[],p)=>{const y=t.tooltip.map(H=>({"aria-label":l.translate(H)})).getOr({}),S={tag:"button",classes:["tox-tbtn"],attributes:{...y,"data-mce-name":p}},R=t.icon.map(H=>lD(H,l.icons)),I=Kp([R]);return MA(t,r,h,S,I,t.tooltip,l)},AD=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},JI=(t,r,l,h=[],p=[])=>{const y=l.translate(t.text),S=t.icon.map(de=>lD(de,l.icons)),R=[S.getOrThunk(()=>Ia(y))],I=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),K={tag:"button",classes:[...AD(I),...S.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...p],attributes:{"aria-label":y,"data-mce-name":t.text}},ie=t.icon.map(ce(y));return MA(t,r,h,K,R,ie,l)},Vh=(t,r,l,h=[],p=[])=>{const y=JI(t,V.some(r),l,h,p);return tl.sketch(y)},uC=(t,r)=>l=>{r==="custom"?Jn(l,Sf,{name:t,value:{}}):r==="submit"?ws(l,G1):r==="cancel"?ws(l,Qp):console.error("Unknown button type: ",r)},PA=(t,r)=>r==="menu",d9=(t,r)=>r==="custom"||r==="cancel"||r==="submit",TD=(t,r)=>r==="togglebutton",h9=(t,r,l)=>{var h,p;const y=t.icon.map(Qe=>Lm(Qe,r.icons)).map(dr),S=Qe=>{Jn(Qe,Sf,{name:t.name,value:{setIcon:yt=>{y.map(St=>St.getOpt(Qe).each(un=>{Wo.set(un,[Lm(yt,r.icons)])}))}}})},R=t.buttonType.getOr(t.primary?"primary":"secondary"),I={...t,name:(h=t.name)!==null&&h!==void 0?h:"",primary:R==="primary",tooltip:t.tooltip,enabled:(p=t.enabled)!==null&&p!==void 0?p:!1,borderless:!1},H=I.tooltip.or(t.text).map(Qe=>({"aria-label":r.translate(Qe)})).getOr({}),X=AD(R??"secondary"),K=t.icon.isSome()&&t.text.isSome(),ie={tag:"button",classes:[...X.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...K?["tox-button--icon-and-text"]:[]],attributes:{...H,...vn(l)?{"data-mce-name":l}:{}}},de=[],Ce=r.translate(t.text.getOr("")),_e=Ia(Ce),Fe=[...Kp([y.map(Qe=>Qe.asSpec())]),...t.text.isSome()?[_e]:[]],Ke=MA(I,V.some(S),de,ie,Fe,t.tooltip,r);return tl.sketch(Ke)},sx=(t,r,l)=>{if(PA(t,r)){const h=()=>S,p=t,y={...t,type:"menubutton",search:V.none(),onSetup:R=>(R.setEnabled(t.enabled),oe),fetch:HI(p.items,h,l)},S=dr(Xv(y,"tox-tbtn",l,V.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return S.asSpec()}else if(d9(t,r)){const h=uC(t.name,r),p={...t,context:r==="cancel"?"any":t.context,borderless:!1};return Vh(p,h,l.shared.providers,[])}else{if(TD(t,r))return h9(t,l.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")}},QI=(t,r)=>{const l=uC(t.name,"custom");return i7(V.none(),wr.parts.field({factory:tl,...JI(t,V.some(l),r,[sC(""),rh.self()])}))},ED={type:"separator"},g9=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:oe}),_D=(t,r)=>({type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:oe}),eF=t=>dt(t,g9),f9=(t,r)=>zo(r,l=>l.type===t),tF=(t,r)=>eF(f9(t,r)),OD=t=>tF("header",t.targets),m9=t=>tF("anchor",t.targets),p9=t=>V.from(t.anchorTop).map(r=>_D("<top>",r)).toArray(),nF=t=>V.from(t.anchorBottom).map(r=>_D("<bottom>",r)).toArray(),oF=t=>dt(t,r=>_D(r,r)),b9=t=>ms(t,(r,l)=>r.length===0||l.length===0?r.concat(l):r.concat(ED,l),[]),RD=(t,r)=>{const l=t.toLowerCase();return zo(r,h=>{var p;const y=h.meta!==void 0&&h.meta.text!==void 0?h.meta.text:h.text,S=(p=h.value)!==null&&p!==void 0?p:"";return yo(y.toLowerCase(),l)||yo(S.toLowerCase(),l)})},v9=(t,r,l)=>{var h,p;const y=En.getValue(r),S=(p=(h=y==null?void 0:y.meta)===null||h===void 0?void 0:h.text)!==null&&p!==void 0?p:y.value;return l.getLinkInformation().fold(()=>[],I=>{const H=RD(S,oF(l.getHistory(t)));return t==="file"?b9([H,RD(S,OD(I)),RD(S,Ze([p9(I),m9(I),nF(I)]))]):H})},sF=Fn("aria-invalid"),rF=(t,r,l,h)=>{const p=r.shared.providers,y=Ke=>{const Qe=En.getValue(Ke);l.addToHistory(Qe.value,t.filetype)},S={...h.map(Ke=>({initialData:Ke})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":sF,type:"url"},minChars:0,responseTime:0,fetch:Ke=>{const Qe=v9(t.filetype,Ke,l),yt=nx(Qe,Fh.BUBBLE_TO_SANDBOX,r,{isHorizontalMenu:!1,search:V.none()});return uc.pure(yt)},getHotspot:Ke=>Ce.getOpt(Ke),onSetValue:(Ke,Qe)=>{Ke.hasConfigured(kf)&&kf.run(Ke).get(oe)},typeaheadBehaviours:en([...l.getValidationHandler().map(Ke=>kf.config({getRoot:Qe=>Mi(Qe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Qe,yt)=>{X.getOpt(Qe).each(St=>{kt(St.element,"title",p.translate(yt))})}},validator:{validate:Qe=>{const yt=En.getValue(Qe);return qI.nu(St=>{Ke({type:t.filetype,url:yt.value},un=>{if(un.status==="invalid"){const Pn=C.error(un.message);St(Pn)}else{const Pn=C.value(un.message);St(Pn)}})})},validateOnLoad:!1}})).toArray(),Do.config({disabled:()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable}),Sa.config({}),Ko("urlinput-events",[Nt(Hd(),Ke=>{const Qe=pd(Ke.element),yt=Qe.trim();yt!==Qe&&om(Ke.element,yt),t.filetype==="file"&&Jn(Ke,vu,{name:t.name})}),Nt(Sh(),Ke=>{Jn(Ke,vu,{name:t.name}),y(Ke)}),Nt(xb(),Ke=>{Jn(Ke,vu,{name:t.name}),y(Ke)})])]),eventOrder:{[Hd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Ke=>Ke.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:Ew(!1,1,"normal")},onExecute:(Ke,Qe,yt)=>{Jn(Qe,G1,{})},onItemExecute:(Ke,Qe,yt,St)=>{y(Ke),Jn(Ke,vu,{name:t.name})}},R=wr.parts.field({...S,factory:l9}),I=t.label.map(Ke=>Jp(Ke,p)),X=dr(((Ke,Qe,yt=Ke,St=Ke)=>yd(yt,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Ke],attributes:{title:p.translate(St),"aria-live":"polite",...Qe.fold(()=>({}),un=>({id:un}))}},p.icons))("invalid",V.some(sF),"warning")),K=dr({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[X.asSpec()]}),ie=l.getUrlPicker(t.filetype),de=Fn("browser.url.event"),Ce=dr({dom:{tag:"div",classes:["tox-control-wrap"]},components:[R,K.asSpec()],behaviours:en([Do.config({disabled:()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable})])}),_e=dr(Vh({context:t.context,name:t.name,icon:V.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:V.none(),borderless:!0},Ke=>ws(Ke,de),p,[],["tox-browse-url"])),et=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ze([[Ce.asSpec()],ie.map(()=>_e.asSpec()).toArray()])}),Fe=Ke=>{Bs.getCurrent(Ke).each(Qe=>{const yt=En.getValue(Qe),St={fieldname:t.name,...yt};ie.each(un=>{un(St).get(Pn=>{En.setValue(Qe,Pn),Jn(Ke,vu,{name:t.name})})})})};return wr.sketch({dom:c7(),components:I.toArray().concat([et()]),fieldBehaviours:en([Do.config({disabled:()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable,onDisabled:Ke=>{wr.getField(Ke).each(Do.disable),_e.getOpt(Ke).each(Do.disable)},onEnabled:Ke=>{wr.getField(Ke).each(Do.enable),_e.getOpt(Ke).each(Do.enable)}}),vi(()=>p.checkUiComponentContext(t.context)),Ko("url-input-events",[Nt(de,Fe)])])})},Og=(t,r)=>{const l=xO(t.icon,r.icons);return Tg.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:l},components:t.url?[tl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:l,attributes:{title:r.translate(t.iconTooltip)}},action:h=>Jn(h,Sf,{name:"alert-banner",value:t.url}),buttonBehaviours:en([RP()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},DD=(t,r)=>{t.dom.checked=r},x9=t=>t.dom.checked,y9=(t,r,l)=>{const h=I=>(I.element.dom.click(),V.some(!0)),p=wr.parts.field({factory:{sketch:Gt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:en([rh.self(),Do.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable,onDisabled:I=>{Mi(I.element).each(H=>bi(H,"tox-checkbox--disabled"))},onEnabled:I=>{Mi(I.element).each(H=>_r(H,"tox-checkbox--disabled"))}}),Sa.config({}),Io.config({}),uI(l,x9,DD),po.config({mode:"special",onEnter:h,onSpace:h,stopSpaceKeyup:!0}),Ko("checkbox-events",[Nt(Sh(),(I,H)=>{Jn(I,vu,{name:t.name})})])])}),y=wr.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Ia(r.translate(t.label))],behaviours:en([q1.config({})])}),S=I=>yd(I==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+I]},r.icons),R=dr({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[S("checked"),S("unchecked")]});return wr.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[p,R.asSpec(),y],fieldBehaviours:en([Do.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable}),vi(()=>r.checkUiComponentContext(t.context))])})},w9=(t,r)=>{const l=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],h=Ko("htmlpanel",[ba(p=>{t.onInit(p.element.dom)})]);return t.presets==="presentation"?Tg.sketch({dom:{tag:"div",classes:l,innerHtml:t.html},containerBehaviours:en([ni.config({...r.tooltips.getConfig({tooltipText:"",onShow:p=>{Ca(p.element,"[data-mce-tooltip]:hover").orThunk(()=>ic(p.element)).each(y=>{_o(y,"data-mce-tooltip").each(S=>{ni.setComponents(p,r.tooltips.getComponents({tooltipText:S}))})})}}),mode:"children-normal",anchor:p=>({type:"node",node:Ca(p.element,"[data-mce-tooltip]:hover").orThunk(()=>ic(p.element).filter(y=>_o(y,"data-mce-tooltip").isSome())),root:p.element,layouts:{onLtr:ce([Ei,yr,$i,Al,zi,Vi]),onRtl:ce([Ei,yr,$i,Al,zi,Vi])},bubble:bd(0,-2,{})})}),h])}):Tg.sketch({dom:{tag:"div",classes:l,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:en([Sa.config({}),Io.config({}),h])})},fl=t=>(r,l,h,p,y)=>Yt(l,"name").fold(()=>t(l,p,V.none(),y),S=>r.field(S,t(l,p,Yt(h,S),y))),C9=t=>(r,l,h,p,y)=>{const S=me(l,{source:"dynamic"});return fl(t)(r,S,h,p,y)},aF={bar:fl((t,r)=>tA(t,r.shared)),collection:fl((t,r,l)=>u7(t,r.shared.providers,l)),alertbanner:fl((t,r)=>Og(t,r.shared.providers)),input:fl((t,r,l)=>LI(t,r.shared.providers,l)),textarea:fl((t,r,l)=>TA(t,r.shared.providers,l)),label:fl((t,r,l,h)=>kz(t,r.shared,h)),iframe:C9((t,r,l)=>lC(t,r.shared.providers,l)),button:fl((t,r)=>QI(t,r.shared.providers)),checkbox:fl((t,r,l)=>y9(t,r.shared.providers,l)),colorinput:fl((t,r,l)=>TN(t,r.shared,r.colorinput,l)),colorpicker:fl((t,r,l)=>cz(t,r.shared.providers,l)),dropzone:fl((t,r,l)=>hz(t,r.shared.providers,l)),grid:fl((t,r)=>gz(t,r.shared)),listbox:fl((t,r,l)=>TI(t,r,l)),selectbox:fl((t,r,l)=>Dz(t,r.shared.providers,l)),sizeinput:fl((t,r)=>Iz(t,r.shared.providers)),slider:fl((t,r,l)=>Fz(t,r.shared.providers,l)),urlinput:fl((t,r,l)=>rF(t,r,r.urlinput,l)),customeditor:fl(dz),htmlpanel:fl((t,r)=>w9(t,r.shared.providers)),imagepreview:fl((t,r,l)=>aD(t,l)),table:fl((t,r)=>PI(t,r.shared.providers)),tree:fl((t,r)=>Qz(t,r)),panel:fl((t,r)=>Oz(t,r))},iF={field:(t,r)=>r,record:ce([])},S9=(t,r,l,h,p)=>{const y=me(h,{shared:{interpreter:S=>lF(t,S,l,y,p)}});return lF(t,r,l,y,p)},lF=(t,r,l,h,p)=>Yt(aF,r.type).fold(()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r),y=>y(t,r,l,h,p)),ql=(t,r,l,h)=>lF(iF,t,r,l,h),_f="layout-inset",MD=t=>t.x,dC=(t,r)=>t.x+t.width/2-r.width/2,PD=(t,r)=>t.x+t.width-r.width,LD=t=>t.y,ND=(t,r)=>t.y+t.height-r.height,cF=(t,r)=>t.y+t.height/2-r.height/2,LA=(t,r,l)=>Nl(PD(t,r),ND(t,r),l.insetSouthwest(),F0(),"southwest",Il(t,{right:0,bottom:3}),_f),NA=(t,r,l)=>Nl(MD(t),ND(t,r),l.insetSoutheast(),sy(),"southeast",Il(t,{left:1,bottom:3}),_f),hC=(t,r,l)=>Nl(PD(t,r),LD(t),l.insetNorthwest(),oy(),"northwest",Il(t,{right:0,top:2}),_f),gC=(t,r,l)=>Nl(MD(t),LD(t),l.insetNortheast(),I0(),"northeast",Il(t,{left:1,top:2}),_f),lh=(t,r,l)=>Nl(dC(t,r),LD(t),l.insetNorth(),Bn(),"north",Il(t,{top:2}),_f),sb=(t,r,l)=>Nl(dC(t,r),ND(t,r),l.insetSouth(),Fb(),"south",Il(t,{bottom:3}),_f),ID=(t,r,l)=>Nl(PD(t,r),cF(t,r),l.insetEast(),A2(),"east",Il(t,{right:0}),_f),FD=(t,r,l)=>Nl(MD(t),cF(t,r),l.insetWest(),ry(),"west",Il(t,{left:1}),_f),k9=t=>{switch(t){case"north":return lh;case"northeast":return gC;case"northwest":return hC;case"south":return sb;case"southeast":return NA;case"southwest":return LA;case"east":return ID;case"west":return FD}},BD=(t,r,l,h,p)=>gy(h).map(k9).getOr(lh)(t,r,l,h,p),A9=t=>{switch(t){case"north":return sb;case"northeast":return NA;case"northwest":return LA;case"south":return lh;case"southeast":return gC;case"southwest":return hC;case"east":return FD;case"west":return ID}},T9=(t,r,l,h,p)=>gy(h).map(A9).getOr(lh)(t,r,l,h,p),rx={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},aj=(t,r,l)=>{const p={maxHeightFunction:rf()},y=()=>({type:"node",root:Ba(ga(t())),node:V.from(t()),bubble:bd(12,12,rx),layouts:{onRtl:()=>[gC],onLtr:()=>[hC]},overrides:p}),S=()=>({type:"hotspot",hotspot:r(),bubble:bd(-12,12,rx),layouts:{onRtl:()=>[$i,zi,Ei],onLtr:()=>[zi,$i,Ei]},overrides:p});return()=>l()?y():S()},ij=(t,r,l,h)=>{const y={maxHeightFunction:rf()},S=()=>({type:"node",root:Ba(ga(r())),node:V.from(r()),bubble:bd(12,12,rx),layouts:{onRtl:()=>[lh],onLtr:()=>[lh]},overrides:y}),R=()=>t?{type:"node",root:Ba(ga(r())),node:V.from(r()),bubble:bd(0,-xl(r()),rx),layouts:{onRtl:()=>[yr],onLtr:()=>[yr]},overrides:y}:{type:"hotspot",hotspot:l(),bubble:bd(0,0,rx),layouts:{onRtl:()=>[yr],onLtr:()=>[yr]},overrides:y};return()=>h()?S():R()},E9=(t,r,l)=>{const h=()=>({type:"node",root:Ba(ga(t())),node:V.from(t()),layouts:{onRtl:()=>[lh],onLtr:()=>[lh]}}),p=()=>({type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[Ei],onLtr:()=>[Ei]}});return()=>l()?h():p()},_9=(t,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const l=t.selection.getRng(),h=t.model.table.getSelectedCells();if(h.length>1){const p=h[0],y=h[h.length-1],S={firstCell:Xe.fromDom(p),lastCell:Xe.fromDom(y)};return V.some(S)}return V.some(Cp.range(Xe.fromDom(l.startContainer),l.startOffset,Xe.fromDom(l.endContainer),l.endOffset))}}),O9=t=>r=>({type:"node",root:t(),node:r}),uF=(t,r,l,h)=>{const p=Nh(t),y=()=>Xe.fromDom(t.getBody()),S=()=>Xe.fromDom(t.getContentAreaContainer()),R=()=>p||!h();return{inlineDialog:aj(S,r,R),inlineBottomDialog:ij(t.inline,S,l,R),banner:E9(S,r,R),cursor:_9(t,y),node:O9(y)}},HD=t=>(r,l)=>{qL(t)(r,l)},R9=t=>()=>zL(t),D9=t=>r=>Zk(t,r),dF=t=>r=>$L(t,r),M9=t=>({colorPicker:HD(t),hasCustomColors:R9(t),getColors:D9(t),getColorCols:dF(t)}),P9=t=>()=>rk(t),L9=t=>({isDraggableModal:P9(t)}),N9=t=>{const r=to(nO(t)?"bottom":"top");return{isPositionedAtTop:()=>r.get()==="top",getDockingMode:r.get,setDockingMode:r.set}},IA=t=>Lr(t,"items"),$D=t=>Lr(t,"format"),hF=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],I9=t=>os(t,"items"),F9=t=>os(t,"block"),B9=t=>os(t,"inline"),gF=t=>os(t,"selector"),fF=t=>ms(t,(r,l)=>{if(I9(l)){const h=fF(l.items);return{customFormats:r.customFormats.concat(h.customFormats),formats:r.formats.concat([{title:l.title,items:h.formats}])}}else if(B9(l)||F9(l)||gF(l)){const p=`custom-${Ot(l.name)?l.name:l.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:p,format:l}]),formats:r.formats.concat([{title:l.title,format:p,icon:l.icon}])}}else return{...r,formats:r.formats.concat(l)}},{customFormats:[],formats:[]}),FA=(t,r)=>{const l=fF(r),h=p=>{wt(p,y=>{t.formatter.has(y.name)||t.formatter.register(y.name,y.format)})};return t.formatter?h(l.customFormats):t.on("init",()=>{h(l.customFormats)}),l.formats},mF=t=>X_(t).map(r=>{const l=FA(t,r);return Q3(t)?hF.concat(l):l}).getOr(hF),BA=t=>{const r=ds(t);return r.length===1&&No(r,"title")},pF=(t,r,l)=>({...t,type:"formatter",isSelected:r(t.format),getStylePreview:l(t.format)}),HA=(t,r,l,h)=>{const p=I=>pF(I,l,h),y=I=>{const H=R(I.items);return{...I,type:"submenu",getStyleItems:ce(H)}},S=I=>{const H=Ot(I.name)?I.name:Fn(I.title),X=`custom-${H}`,K={...I,type:"formatter",format:X,isSelected:l(X),getStylePreview:h(X)};return t.formatter.register(H,K),K},R=I=>dt(I,H=>IA(H)?y(H):$D(H)?p(H):BA(H)?{...H,type:"separator"}:S(H));return R(r)},fC=t=>{const r=R=>()=>t.formatter.match(R),l=R=>()=>{const I=t.formatter.get(R);return I!==void 0?V.some({tag:I.length>0&&(I[0].inline||I[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(R))}):V.none()},h=to([]),p=to([]),y=to(!1);return t.on("PreInit",R=>{const I=mF(t),H=HA(t,I,r,l);h.set(H)}),t.on("addStyleModifications",R=>{const I=HA(t,R.items,r,l);p.set(I),y.set(R.replace)}),{getData:()=>{const R=y.get()?[]:h.get(),I=p.get();return R.concat(I)}}},bF=t=>{let h=0;const p=()=>h>0,y=R=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Ia(R.tooltipText)]}];return{getConfig:R=>({delayForShow:()=>p()?60:300,delayForHide:ce(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:y(R),onShow:(I,H)=>{h++,R.onShow&&R.onShow(I,H)},onHide:(I,H)=>{h--,R.onHide&&R.onHide(I,H)},onSetup:R.onSetup}),getComponents:y}},H9=t=>vn(t)&&t.nodeType===1,vF=Pm.trim,zD=t=>r=>!!(H9(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t)),xF=zD("true"),$9=zD("false"),$A=(t,r,l,h,p)=>({type:t,title:r,url:l,level:h,attach:p}),zA=t=>{let r=t;for(;r=r.parentNode;){const l=r.contentEditable;if(l&&l!=="inherit")return xF(r)}return!1},z9=(t,r)=>dt(Tl(Xe.fromDom(r),t),l=>l.dom),yF=t=>t.innerText||t.textContent,ax=t=>t.id?t.id:Fn("h"),wF=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,CF=t=>wF(t)&&VA(t),VD=t=>t&&/^(H[1-6])$/.test(t.nodeName),VA=t=>zA(t)&&!$9(t),WD=t=>VD(t)&&VA(t),V9=t=>VD(t)?parseInt(t.nodeName.substr(1),10):0,W9=t=>{var r;const l=ax(t),h=()=>{t.id=l};return $A("header",(r=yF(t))!==null&&r!==void 0?r:"","#"+l,V9(t),h)},U9=t=>{const r=t.id||t.name,l=yF(t);return $A("anchor",l||"#"+r,"#"+r,0,oe)},UD=t=>dt(zo(t,WD),W9),X9=t=>dt(zo(t,CF),U9),Y9=t=>z9("h1,h2,h3,h4,h5,h6,a:not([href])",t),j9=t=>vF(t.title).length>0,Z9={find:t=>{const r=Y9(t);return zo(UD(r).concat(X9(r)),j9)}},WA="tinymce-url-history",SF=5,XD=t=>Ot(t)&&/^https?/.test(t),G9=t=>Bo(t)&&t.length<=SF&&Xn(t,XD),ix=t=>lo(t)&&uo(t,r=>!G9(r)).isNone(),kF=()=>{const t=Pv.getItem(WA);if(t===null)return{};let r;try{r=JSON.parse(t)}catch(l){if(l instanceof SyntaxError)return console.log("Local storage "+WA+" was not valid JSON",l),{};throw l}return ix(r)?r:(console.log("Local storage "+WA+" was not valid format",r),{})},q9=t=>{if(!ix(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Pv.setItem(WA,JSON.stringify(t))},YD=t=>{const r=kF();return Yt(r,t).getOr([])},AF=(t,r)=>{if(!XD(t))return;const l=kF(),h=Yt(l,r).getOr([]),p=zo(h,y=>y!==t);l[r]=[t].concat(p).slice(0,SF),q9(l)},TF=t=>!!t,K9=t=>Go(Pm.makeMap(t,/[, ]/),TF),jD=t=>V.from(G_(t)),J9=t=>{const r=V.from(sk(t)).filter(TF).map(K9);return jD(t).fold(Je,l=>r.fold(ot,h=>ds(h).length>0?h:!1))},Q9=(t,r)=>{const l=J9(t);return Tt(l)?l?jD(t):V.none():l[r]?jD(t):V.none()},eV=(t,r)=>Q9(t,r).map(l=>h=>uc.nu(p=>{const y=(R,I)=>{if(!Ot(R))throw new Error("Expected value to be string");if(I!==void 0&&!lo(I))throw new Error("Expected meta to be a object");p({value:R,meta:I})},S={filetype:r,fieldname:h.fieldname,...V.from(h.meta).getOr({})};l.call(t,y,h.value,S)})),EF=t=>V.from(t).filter(Ot).getOrUndefined(),tV=t=>q_(t)?V.some({targets:Z9.find(t.getBody()),anchorTop:EF(K_(t)),anchorBottom:EF(iP(t))}):V.none(),nV=t=>V.from(rP(t)),cj=t=>({getHistory:YD,addToHistory:AF,getLinkInformation:()=>tV(t),getValidationHandler:()=>nV(t),getUrlPicker:r=>eV(t,r)}),oV=(t,r,l,h)=>{const p=to(!1),y=N9(r),S={icons:()=>r.ui.registry.getAll().icons,menuItems:()=>r.ui.registry.getAll().menuItems,translate:eh.translate,isDisabled:()=>!r.ui.isEnabled(),getOption:r.options.get,tooltips:bF(t.dialog),checkUiComponentContext:Fe=>{const[Ke,Qe=""]=Fe.split(":"),yt=r.ui.registry.getAll().contexts,St=Yt(yt,Ke).fold(()=>Yt(yt,"mode").map(un=>un("design")).getOr(!1),un=>Qe.charAt(0)==="!"?!un(Qe.slice(1)):un(Qe));return{contextType:Ke,shouldDisable:!St}}},R=cj(r),I=fC(r),H=M9(r),X=L9(r),K=()=>p.get(),ie=Fe=>p.set(Fe),de={shared:{providers:S,anchors:uF(r,l,h,y.isPositionedAtTop),header:y},urlinput:R,styles:I,colorinput:H,dialog:X,isContextMenuOpen:K,setContextMenuState:ie},Ce=Fe=>V.none(),_e={...de,shared:{...de.shared,interpreter:Fe=>ql(Fe,{},_e,Ce),getSink:t.popup}},et={...de,shared:{...de.shared,interpreter:Fe=>ql(Fe,{},et,Ce),getSink:t.dialog}};return{popup:_e,dialog:et}},_F=(t,r,l)=>{const h=(Rt,Nn)=>{wt([r,...l],kn=>{kn.broadcastEvent(Rt,Nn)})},p=(Rt,Nn)=>{wt([r,...l],kn=>{kn.broadcastOn([Rt],Nn)})},y=Rt=>p(bg(),{target:Rt.target}),S=Vl(),R=wc(S,"touchstart",y),I=wc(S,"touchmove",Rt=>h($T(),Rt)),H=wc(S,"touchend",Rt=>h(IC(),Rt)),X=wc(S,"mousedown",y),K=wc(S,"mouseup",Rt=>{Rt.raw.button===0&&p(l1(),{target:Rt.target})}),ie=Rt=>p(bg(),{target:Xe.fromDom(Rt.target)}),de=Rt=>{Rt.button===0&&p(l1(),{target:Xe.fromDom(Rt.target)})},Ce=()=>{wt(t.editorManager.get(),Rt=>{t!==Rt&&Rt.dispatch("DismissPopups",{relatedTarget:t})})},_e=Rt=>h(Ug(),H2(Rt)),et=Rt=>{p(ff(),{}),h($f(),H2(Rt))},Fe=ga(Xe.fromDom(t.getElement())),Ke=fy(Fe,"scroll",Rt=>{requestAnimationFrame(()=>{const Nn=t.getContainer();if(Nn!=null){const Vn=Wp(t,r.element).map(Es=>[Es.element,...Es.others]).getOr([]);qs(Vn,Es=>Fs(Es,Rt.target))&&(t.dispatch("ElementScroll",{target:Rt.target.dom}),h(kx(),Rt))}})}),Qe=()=>p(ff(),{}),yt=Rt=>{Rt.state&&p(bg(),{target:Xe.fromDom(t.getContainer())})},St=Rt=>{p(bg(),{target:Xe.fromDom(Rt.relatedTarget.getContainer())})},un=Rt=>t.dispatch("focusin",Rt),Pn=Rt=>t.dispatch("focusout",Rt);t.on("PostRender",()=>{t.on("click",ie),t.on("tap",ie),t.on("mouseup",de),t.on("mousedown",Ce),t.on("ScrollWindow",_e),t.on("ResizeWindow",et),t.on("ResizeEditor",Qe),t.on("AfterProgressState",yt),t.on("DismissPopups",St),wt([r,...l],Rt=>{Rt.element.dom.addEventListener("focusin",un),Rt.element.dom.addEventListener("focusout",Pn)})}),t.on("remove",()=>{t.off("click",ie),t.off("tap",ie),t.off("mouseup",de),t.off("mousedown",Ce),t.off("ScrollWindow",_e),t.off("ResizeWindow",et),t.off("ResizeEditor",Qe),t.off("AfterProgressState",yt),t.off("DismissPopups",St),wt([r,...l],Rt=>{Rt.element.dom.removeEventListener("focusin",un),Rt.element.dom.removeEventListener("focusout",Pn)}),X.unbind(),R.unbind(),I.unbind(),H.unbind(),K.unbind(),Ke.unbind()}),t.on("detach",()=>{wt([r,...l],fm),wt([r,...l],Rt=>Rt.destroy())})},ml=Jy,ch=MS,OF=ce([rt("shell",!1),Lt("makeItem"),rt("setupItem",oe),$u.field("listBehaviours",[Wo])]),sV=pu({name:"items",overrides:()=>({behaviours:en([Wo.config({})])})}),rV=ce([sV]),aV=ce("CustomList"),iV=(t,r,l,h)=>{const p=(R,I)=>{S(R).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},H=>{const X=Wo.contents(H),K=I.length,ie=K-X.length,de=ie>0?Ht(ie,()=>t.makeItem()):[],Ce=X.slice(K);wt(Ce,et=>Wo.remove(H,et)),wt(de,et=>Wo.append(H,et));const _e=Wo.contents(H);wt(_e,(et,Fe)=>{t.setupItem(R,et,I[Fe],Fe)})})},y=t.shell?{behaviours:[Wo.config({})],components:[]}:{behaviours:[],components:r},S=R=>t.shell?V.some(R):Ur(R,t,"items");return{uid:t.uid,dom:t.dom,components:y.components,behaviours:gl(t.listBehaviours,y.behaviours),apis:{setItems:p}}},RF=Hl({name:aV(),configFields:OF(),partFields:rV(),factory:iV,apis:{setItems:(t,r,l)=>{t.setItems(r,l)}}}),lx=ce([Lt("dom"),rt("shell",!0),hl("toolbarBehaviours",[Wo])]),DF=ce([pu({name:"groups",overrides:()=>({behaviours:en([Wo.config({})])})})]),cV=(t,r,l,h)=>{const p=(R,I)=>{y(R).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},H=>{Wo.set(H,I)})},y=R=>t.shell?V.some(R):Ur(R,t,"groups"),S=t.shell?{behaviours:[Wo.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:S.components,behaviours:gl(t.toolbarBehaviours,S.behaviours),apis:{setGroups:p,refresh:oe},domModification:{attributes:{role:"group"}}}},Wh=Hl({name:"Toolbar",configFields:lx(),partFields:DF(),factory:cV,apis:{setGroups:(t,r,l)=>{t.setGroups(r,l)}}}),uV=oe,dV=Je,MF=ce([]);var Yv=Object.freeze({__proto__:null,setup:uV,isDocked:dV,getBehaviours:MF});const UA=ce(Fn("toolbar-height-change")),Td={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},mC="tox-tinymce--toolbar-sticky-on",ZD="tox-tinymce--toolbar-sticky-off",PF=(t,r)=>{const l=Ra(r),p=Qa(r).dom.innerHeight,y=Ki(l),S=Xe.fromDom(t.elm),R=Bc(S),I=Xo(S),H=R.y,X=H+I,K=bs(r),ie=Xo(r),de=K.top,Ce=de+ie,_e=Math.abs(de-y.top)<2,et=Math.abs(Ce-(y.top+p))<2;if(_e&&H<Ce)_u(y.left,H-ie,l);else if(et&&X>de){const Fe=H-p+I+ie;_u(y.left,Fe,l)}},pC=(t,r)=>No(aa.getModes(t),r),LF=t=>{const r=h=>xl(h)+(parseInt(nr(h,"margin-top"),10)||0)+(parseInt(nr(h,"margin-bottom"),10)||0),l=t.element;Mi(l).each(h=>{const p="padding-"+aa.getModes(t)[0];if(aa.isDocked(t)){const y=pe(h);Mt(l,"width",y+"px"),Mt(h,p,r(l)+"px")}else Oo(l,"width"),Oo(h,p)})},NF=(t,r)=>{r?(_r(t,Td.fadeOutClass),ep(t,[Td.transitionClass,Td.fadeInClass])):(_r(t,Td.fadeInClass),ep(t,[Td.fadeOutClass,Td.transitionClass]))},IF=(t,r)=>{const l=Xe.fromDom(t.getContainer());r?(bi(l,mC),_r(l,ZD)):(bi(l,ZD),_r(l,mC))},hV=(t,r)=>{const l=Ra(r);Dh(l).filter(h=>!Fs(r,h)).filter(h=>Fs(h,Xe.fromDom(l.dom.body))||Oa(t,h)).each(()=>Fu(r))},gV=(t,r)=>ic(t).orThunk(()=>r().toOptional().bind(l=>ic(l.element))),fV=(t,r,l)=>{t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{l().each(aa.reset)}),t.on("ResizeWindow ResizeEditor",()=>{l().each(LF)}),t.on("SkinLoaded",()=>{l().each(h=>{aa.isDocked(h)?aa.reset(h):aa.refresh(h)})}),t.on("FullscreenStateChanged",()=>{l().each(aa.reset)})),t.on("AfterScrollIntoView",h=>{l().each(p=>{aa.refresh(p);const y=p.element;x_(y)&&PF(h,y)})}),t.on("PostRender",()=>{IF(t,!1)})},cx=t=>t().map(aa.isDocked).getOr(!1),bC=()=>[Uc.config({channels:{[UA()]:{onReceive:LF}}})],XA=(t,r)=>{const l=zs(),h=r.getSink,p=R=>{h().each(I=>R(I.element))},y=R=>{t.inline||LF(R),IF(t,aa.isDocked(R)),R.getSystem().broadcastOn([ff()],{}),h().each(I=>I.getSystem().broadcastOn([ff()],{}))},S=t.inline?[]:bC();return[Io.config({}),aa.config({contextual:{lazyContext:R=>{const I=xl(R.element),H=t.inline?t.getContentAreaContainer():t.getContainer();return V.from(H).map(X=>{const K=Hr(Xe.fromDom(X));return Wp(t,R.element).fold(()=>{const de=K.height-I,Ce=K.y+(pC(R,"top")?0:I);return Br(K.x,Ce,K.width,de)},de=>{const Ce=Wl(K,Up(de)),_e=pC(R,"top")?Ce.y:Ce.y+I;return Br(Ce.x,_e,Ce.width,Ce.height-I)})})},onShow:()=>{p(R=>NF(R,!0))},onShown:R=>{p(I=>Wd(I,[Td.transitionClass,Td.fadeInClass])),l.get().each(I=>{hV(R.element,I),l.clear()})},onHide:R=>{gV(R.element,h).fold(l.clear,l.set),p(I=>NF(I,!1))},onHidden:()=>{p(R=>Wd(R,[Td.transitionClass]))},...Td},lazyViewport:R=>Wp(t,R.element).fold(()=>{const H=La(),X=oP(t),K=H.y+(pC(R,"top")&&!aO(t)?X:0),ie=H.height-(pC(R,"bottom")?X:0);return{bounds:Br(H.x,K,H.width,ie),optScrollEnv:V.none()}},H=>({bounds:Up(H),optScrollEnv:V.some({currentScrollTop:H.element.dom.scrollTop,scrollElmTop:bs(H.element).top})})),modes:[r.header.getDockingMode()],onDocked:y,onUndocked:y}),...S]};var mV=Object.freeze({__proto__:null,setup:fV,isDocked:cx,getBehaviours:XA});const pV=t=>{const r=t.editor,l=t.sticky?XA:MF;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:en(l(r,t.sharedBackstage))}},GD=fo([Oi,ar("items",fb([mb([RO,Dc("items",An)]),An]))].concat(Tv)),bV=t=>ka("GroupToolbarButton",GD,t),vC=[Ai("text"),Ai("tooltip"),Ai("icon"),Ir("search",!1,fb([iu,fo([Ai("placeholder")])],t=>Tt(t)?t?V.some({placeholder:V.none()}):V.none():V.some(t))),$c("fetch"),sa("onSetup",()=>oe),ti("context","mode:design")],qD=fo([Oi,...vC]),FF=t=>ka("menubutton",qD,t),vV=fo([Oi,Ow,wd,Rm,sL,tL,Av,Ji("presets","normal",["normal","color","listpreview"]),rL(1),H1,nL,ti("context","mode:design")]),xV=t=>ka("SplitButton",vV,t);var KD=Zc({factory:(t,r)=>{const l=(p,y)=>{const S=dt(y,R=>{const I={type:"menubutton",text:R.text,fetch:X=>{X(R.getItems())},context:"any"},H=FF(I).mapError(X=>sg(X)).getOrDie();return Xv(H,"tox-mbtn",r.backstage,V.some("menuitem"))});Wo.set(p,S)},h={focus:po.focusIn,setMenus:l};return{uid:t.uid,dom:t.dom,components:[],behaviours:en([Wo.config({}),Ko("menubar-events",[ba(p=>{t.onSetup(p)}),Nt(bc(),(p,y)=>{Ca(p.element,".tox-mbtn--active").each(S=>{Oh(y.event.target,".tox-mbtn").each(R=>{Fs(S,R)||p.getSystem().getByDom(S).each(I=>{p.getSystem().getByDom(R).each(H=>{Sd.expand(H),Sd.close(I),Io.focus(H)})})})})}),Nt(wb(),(p,y)=>{y.event.prevFocus.bind(S=>p.getSystem().getByDom(S).toOptional()).each(S=>{y.event.newFocus.bind(R=>p.getSystem().getByDom(R).toOptional()).each(R=>{Sd.isOpen(S)&&(Sd.expand(R),Sd.close(S))})})})]),po.config({mode:"flow",selector:".tox-mbtn",onEscape:p=>(t.onEscape(p),V.some(!0))}),Sa.config({})]),apis:h,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Lt("dom"),Lt("uid"),Lt("onEscape"),Lt("backstage"),rt("onSetup",oe)],apis:{focus:(t,r)=>{t.focus(r)},setMenus:(t,r,l)=>{t.setMenus(r,l)}}});const yV="Upgrade",BF="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",HF=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:BF,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:yV}}]}),YA="container",wV=[hl("slotBehaviours",[])],xC=t=>"<alloy.field."+t+">",jA=t=>{const r=(()=>{const y=[];return{slot:(R,I)=>(y.push(R),x1(YA,xC(R),I)),record:ce(y)}})(),l=t(r),h=r.record(),p=dt(h,y=>Zl({name:y,pname:xC(y)}));return cv(YA,wV,p,$F,l)},$F=(t,r)=>{const l=_e=>Ky(t),h=(_e,et)=>Ur(_e,t,et),p=(_e,et)=>(Fe,Ke)=>Ur(Fe,t,Ke).map(Qe=>_e(Qe,Ke)).getOr(et),y=_e=>(et,Fe)=>{wt(Fe,Ke=>_e(et,Ke))},S=(_e,et)=>In(_e.element,"aria-hidden")!=="true",R=(_e,et)=>{if(!S(_e)){const Fe=_e.element;Oo(Fe,"display"),Q(Fe,"aria-hidden"),Jn(_e,Zm(),{name:et,visible:!0})}},I=(_e,et)=>{if(S(_e)){const Fe=_e.element;Mt(Fe,"display","none"),kt(Fe,"aria-hidden","true"),Jn(_e,Zm(),{name:et,visible:!1})}},H=p(S,!1),X=p(I),K=y(X),ie=_e=>K(_e,l()),de=p(R),Ce={getSlotNames:l,getSlot:h,isShowing:H,hideSlot:X,hideAllSlots:ie,showSlot:de};return{uid:t.uid,dom:t.dom,components:r,behaviours:h1(t.slotBehaviours),apis:Ce}},Ac={...Go({getSlotNames:(t,r)=>t.getSlotNames(r),getSlot:(t,r,l)=>t.getSlot(r,l),isShowing:(t,r,l)=>t.isShowing(r,l),hideSlot:(t,r,l)=>t.hideSlot(r,l),hideAllSlots:(t,r)=>t.hideAllSlots(r),showSlot:(t,r,l)=>t.showSlot(r,l)},t=>D0(t)),sketch:jA},CV=fo([wd,Ow,sa("onShow",oe),sa("onHide",oe),Av]),SV=t=>ka("sidebar",CV,t),JD=t=>{const{sidebars:r}=t.ui.registry.getAll();wt(ds(r),l=>{const h=r[l],p=()=>Zr(V.from(t.queryCommandValue("ToggleSidebar")),l);t.ui.registry.addToggleButton(l,{icon:h.icon,tooltip:h.tooltip,onAction:y=>{t.execCommand("ToggleSidebar",!1,l),y.setActive(p())},onSetup:y=>{y.setActive(p());const S=()=>y.setActive(p());return t.on("ToggleSidebar",S),()=>{t.off("ToggleSidebar",S)}},context:"any"})})},kV=t=>({element:()=>t.element.dom}),QD=(t,r)=>{const l=dt(ds(r),h=>{const p=r[h],y=qt(SV(p));return{name:h,getApi:kV,onSetup:y.onSetup,onShow:y.onShow,onHide:y.onHide}});return dt(l,h=>{const p=to(oe);return t.slot(h.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:z1.unnamedEvents([Gp(h,p),qp(h,p),Nt(Zm(),(y,S)=>{const R=S.event;We(l,H=>H.name===R.name).each(H=>{(R.visible?H.onShow:H.onHide)(H.getApi(y))})})])})})},AV=t=>Ac.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:QD(r,t),slotBehaviours:z1.unnamedEvents([ba(l=>Ac.hideAllSlots(l))])})),eM=(t,r,l)=>{Bs.getCurrent(t).each(p=>{Wo.set(p,[AV(r)]);const y=l==null?void 0:l.toLowerCase();Ot(y)&&os(r,y)&&Bs.getCurrent(p).each(S=>{Ac.showSlot(S,y),xu.immediateGrow(p),Oo(p.element,"width"),ZA(t.element,"region")})})},ZA=(t,r)=>{kt(t,"role",r)},TV=(t,r)=>{Bs.getCurrent(t).each(h=>{Bs.getCurrent(h).each(y=>{xu.hasGrown(h)?Ac.isShowing(y,r)?(xu.shrink(h),ZA(t.element,"presentation")):(Ac.hideAllSlots(y),Ac.showSlot(y,r),ZA(t.element,"region")):(Ac.hideAllSlots(y),Ac.showSlot(y,r),xu.grow(h),ZA(t.element,"region"))})})},EV=t=>Bs.getCurrent(t).bind(l=>xu.isGrowing(l)||xu.hasGrown(l)?Bs.getCurrent(l).bind(y=>We(Ac.getSlotNames(y),S=>Ac.isShowing(y,S))):V.none()),tM=Fn("FixSizeEvent"),nM=Fn("AutoSizeEvent"),gj=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:en([Sa.config({}),Io.config({}),xu.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{Bs.getCurrent(r).each(Ac.hideAllSlots),ws(r,nM)},onGrown:r=>{ws(r,nM)},onStartGrow:r=>{Jn(r,tM,{width:or(r.element,"width").getOr("")})},onStartShrink:r=>{Jn(r,tM,{width:pe(r.element)+"px"})}}),Wo.config({}),Bs.config({find:r=>{const l=Wo.contents(r);return ur(l)}})])}],behaviours:en([rh.childAt(0),Ko("sidebar-sliding-events",[Nt(tM,(r,l)=>{Mt(r.element,"width",l.event.width)}),Nt(nM,(r,l)=>{Oo(r.element,"width")})])])});var zF=Object.freeze({__proto__:null,block:(t,r,l,h)=>{kt(t.element,"aria-busy",!0);const p=r.getRoot(t).getOr(t),y=en([po.config({mode:"special",onTab:()=>V.some(!0),onShiftTab:()=>V.some(!0)}),Io.config({})]),S=h(p,y),R=p.getSystem().build(S);Wo.append(p,du(R)),R.hasConfigured(po)&&r.focus&&po.focusIn(R),l.isBlocked()||r.onBlock(t),l.blockWith(()=>Wo.remove(p,R))},unblock:(t,r,l)=>{Q(t.element,"aria-busy"),l.isBlocked()&&r.onUnblock(t),l.clear()},isBlocked:(t,r,l)=>l.isBlocked()}),OV=[sa("getRoot",V.none),Ti("focus",!0),Ws("onBlock"),Ws("onUnblock")],RV=Object.freeze({__proto__:null,init:()=>{const t=rd(),r=l=>{t.set({destroy:l})};return rc({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})}});const Rg=ul({fields:OV,name:"blocking",apis:zF,state:RV}),DV=t=>(r,l)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:xg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),oM=t=>Bs.getCurrent(t).each(r=>Fu(r.element,!0)),MV=(t,r)=>{const l="tabindex",h=`data-mce-${l}`;V.from(t.iframeElement).map(Xe.fromDom).each(p=>{r?(_o(p,l).each(y=>kt(p,h,y)),kt(p,l,-1)):(Q(p,l),_o(p,h).each(y=>{kt(p,l,y),Q(p,h)}))})},PV=(t,r,l,h)=>{const p=r.element;if(MV(t,l),l)Rg.block(r,DV(h)),Oo(p,"display"),Q(p,"aria-hidden"),t.hasFocus()&&oM(r);else{const y=Bs.getCurrent(r).exists(S=>am(S.element));Rg.unblock(r),Mt(p,"display","none"),kt(p,"aria-hidden","true"),y&&t.focus()}},LV=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:en([Wo.config({}),Rg.config({focus:!1}),Bs.config({find:r=>ur(r.components())})]),components:[]}),pj=t=>t.type==="focusin",bj=t=>pj(t)?(t.composed?ur(t.composedPath()):V.from(t.target)).map(Xe.fromDom).filter(so).exists(l=>yc(l,"mce-pastebin")):!1,VF=(t,r,l)=>{const h=to(!1),p=zs(),y=R=>{h.get()&&!bj(R)&&(R.preventDefault(),oM(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",y),t.on("BeforeExecCommand",R=>{R.command.toLowerCase()==="mcefocus"&&R.value!==!0&&y(R)})});const S=R=>{R!==h.get()&&(h.set(R),PV(t,r(),R,l.providers),Uk(t,R))};t.on("ProgressState",R=>{if(p.on(clearTimeout),vo(R.time)){const I=bv.setEditorTimeout(t,()=>S(R.state),R.time);p.set(I)}else S(R.state),p.clear()})},WF=(t,r)=>ms(t,(p,y)=>r(y,p.len).fold(ce(p),R=>({len:R.finish,list:p.list.concat([R])})),{len:0,list:[]}).list,sM=(t,r,l)=>({within:t,extra:r,withinWidth:l}),UF=(t,r,l)=>{const h=WF(t,(R,I)=>{const H=l(R);return V.some({element:R,start:I,finish:I+H,width:H})}),p=zo(h,R=>R.finish<=r),y=Un(p,(R,I)=>R+I.width,0),S=h.slice(p.length);return{within:p,extra:S,withinWidth:y}},Jc=t=>dt(t,r=>r.element),NV=(t,r,l)=>{const h=Jc(t.concat(r));return sM(h,[],l)},XF=(t,r,l,h)=>{const p=Jc(t).concat([l]);return sM(p,Jc(r),h)},YF=(t,r,l)=>sM(Jc(t),[],l),IV=(t,r,l)=>{const h=UF(r,t,l);return h.extra.length===0?V.some(h):V.none()},yC=(t,r,l,h)=>{const p=IV(t,r,l).getOrThunk(()=>UF(r,t-l(h),l)),y=p.within,S=p.extra,R=p.withinWidth;return S.length===1&&S[0].width<=l(h)?NV(y,S,R):S.length>=1?XF(y,S,h,R):YF(y,S,R)},jF=(t,r)=>{const l=dt(r,h=>du(h));Wh.setGroups(t,l)},GA=t=>qo(t,r=>ic(r.element).bind(l=>r.getSystem().getByDom(l).toOptional())),ZF=(t,r,l)=>{const h=r.builtGroups.get();if(h.length===0)return;const p=_n(t,r,"primary"),y=ui.getCoupled(t,"overflowGroup");Mt(p.element,"visibility","hidden");const S=h.concat([y]),R=GA(S);l([]),jF(p,S);const I=pe(p.element),H=yC(I,r.builtGroups.get(),X=>Math.ceil(X.element.dom.getBoundingClientRect().width),y);H.extra.length===0?(Wo.remove(p,y),l([])):(jF(p,H.within),l(H.extra)),Oo(p.element,"visibility"),Si(p.element),R.each(Io.focus)},wC=ce([hl("splitToolbarBehaviours",[ui]),rr("builtGroups",()=>to([]))]),FV=ce([ug(["overflowToggledClass"]),Ru("getOverflowBounds"),Lt("lazySink"),rr("overflowGroups",()=>to([])),Ws("onOpened"),Ws("onClosed")].concat(wC())),BV=ce([Zl({factory:Wh,schema:lx(),name:"primary"}),zu({schema:lx(),name:"overflow"}),zu({name:"overflow-button"}),zu({name:"overflow-group"})]),Zu=ce((t,r)=>{at(t,Math.floor(r))}),HV=ce([ug(["toggledClass"]),Lt("lazySink"),$c("fetch"),Ru("getBounds"),Bi("fireDismissalEventInstead",[rt("event",uu())]),af(),Ws("onToggled")]),qA=ce([zu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:en([hs.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),zu({factory:Wh,schema:lx(),name:"toolbar",overrides:t=>({toolbarBehaviours:en([po.config({mode:"cyclic",onEscape:r=>(Ur(r,t,"button").each(Io.focus),V.none())})])})})]),CC=zs(),GF=(t,r)=>{CC.set(!0),rM(t,r),CC.clear()},rM=(t,r)=>{const l=ui.getCoupled(t,"toolbarSandbox");Gs.isOpen(l)?Gs.close(l):Gs.open(l,r.toolbar())},KA=(t,r,l,h)=>{const p=l.getBounds.map(S=>S()),y=l.lazySink(t).getOrDie();_l.positionWithinBounds(y,r,{anchor:{type:"hotspot",hotspot:t,layouts:h,overrides:{maxWidthFunction:Zu()}}},p)},qF=(t,r,l,h,p)=>{Wh.setGroups(r,p),KA(t,r,l,h),hs.on(t)},$V=(t,r,l)=>{const h=Ib(),p=(S,R)=>{const I=CC.get().getOr(!1);l.fetch().get(H=>{qF(t,R,l,r.layouts,H),h.link(t.element),I||po.focusIn(R)})},y=()=>{hs.off(t),CC.get().getOr(!1)||Io.focus(t),h.unlink(t.element)};return{dom:{tag:"div",attributes:{id:h.id}},behaviours:en([po.config({mode:"special",onEscape:S=>(Gs.close(S),V.some(!0))}),Gs.config({onOpen:p,onClose:y,isPartOf:(S,R,I)=>tf(R,I)||tf(t,I),getAttachPoint:()=>l.lazySink(t).getOrDie()}),Uc.config({channels:{...ov({isExtraPart:Je,...l.fireDismissalEventInstead.map(S=>({fireEventInstead:{event:S.event}})).getOr({})}),...sv({doReposition:()=>{Gs.getState(ui.getCoupled(t,"toolbarSandbox")).each(S=>{KA(t,S,l,r.layouts)})}})}})])}},rb=Hl({name:"FloatingToolbarButton",factory:(t,r,l,h)=>({...tl.sketch({...h.button(),action:p=>{rM(p,h)},buttonBehaviours:$u.augment({dump:h.button().buttonBehaviours},[ui.config({others:{toolbarSandbox:p=>$V(p,l,t)}})])}),apis:{setGroups:(p,y)=>{Gs.getState(ui.getCoupled(p,"toolbarSandbox")).each(S=>{qF(p,S,t,l.layouts,y)})},reposition:p=>{Gs.getState(ui.getCoupled(p,"toolbarSandbox")).each(y=>{KA(p,y,t,l.layouts)})},toggle:p=>{rM(p,h)},toggleWithoutFocusing:p=>{GF(p,h)},getToolbar:p=>Gs.getState(ui.getCoupled(p,"toolbarSandbox")),isOpen:p=>Gs.isOpen(ui.getCoupled(p,"toolbarSandbox"))}}),configFields:HV(),partFields:qA(),apis:{setGroups:(t,r,l)=>{t.setGroups(r,l)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggleWithoutFocusing(r)},getToolbar:(t,r)=>t.getToolbar(r),isOpen:(t,r)=>t.isOpen(r)}}),zV=ce([Lt("items"),ug(["itemSelector"]),hl("tgroupBehaviours",[po])]),VV=ce([iv({name:"items",unit:"item"})]),WV=(t,r,l,h)=>({uid:t.uid,dom:t.dom,components:r,behaviours:gl(t.tgroupBehaviours,[po.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),SC=Hl({name:"ToolbarGroup",configFields:zV(),partFields:VV(),factory:WV}),aM=t=>dt(t,r=>du(r)),iM=(t,r,l)=>{ZF(t,l,h=>{l.overflowGroups.set(h),r.getOpt(t).each(p=>{rb.setGroups(p,aM(h))})})},UV=(t,r,l,h)=>{const p=dr(rb.sketch({fetch:()=>uc.nu(y=>{y(aM(t.overflowGroups.get()))}),layouts:{onLtr:()=>[zi,$i],onRtl:()=>[$i,zi],onBottomLtr:()=>[Vi,Al],onBottomRtl:()=>[Al,Vi]},getBounds:l.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:h["overflow-button"](),toolbar:h.overflow()},onToggled:(y,S)=>t[S?"onOpened":"onClosed"](y)}));return{uid:t.uid,dom:t.dom,components:r,behaviours:gl(t.splitToolbarBehaviours,[ui.config({others:{overflowGroup:()=>SC.sketch({...h["overflow-group"](),items:[p.asSpec()]})}})]),apis:{setGroups:(y,S)=>{t.builtGroups.set(dt(S,y.getSystem().build)),iM(y,p,t)},refresh:y=>iM(y,p,t),toggle:y=>{p.getOpt(y).each(S=>{rb.toggle(S)})},toggleWithoutFocusing:y=>{p.getOpt(y).each(rb.toggleWithoutFocusing)},isOpen:y=>p.getOpt(y).map(rb.isOpen).getOr(!1),reposition:y=>{p.getOpt(y).each(S=>{rb.reposition(S)})},getOverflow:y=>p.getOpt(y).bind(rb.getToolbar)},domModification:{attributes:{role:"group"}}}},KF=Hl({name:"SplitFloatingToolbar",configFields:FV(),partFields:BV(),factory:UV,apis:{setGroups:(t,r,l)=>{t.setGroups(r,l)},refresh:(t,r)=>{t.refresh(r)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r),getOverflow:(t,r)=>t.getOverflow(r)}}),JF=ce([ug(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ws("onOpened"),Ws("onClosed")].concat(wC())),QF=ce([Zl({factory:Wh,schema:lx(),name:"primary"}),Zl({factory:Wh,schema:lx(),name:"overflow",overrides:t=>({toolbarBehaviours:en([xu.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:r=>{Ur(r,t,"overflow-button").each(l=>{hs.off(l)}),t.onClosed(r)},onGrown:r=>{t.onOpened(r)},onStartGrow:r=>{Ur(r,t,"overflow-button").each(hs.on)}}),po.config({mode:"acyclic",onEscape:r=>(Ur(r,t,"overflow-button").each(Io.focus),V.some(!0))})])})}),zu({name:"overflow-button",overrides:t=>({buttonBehaviours:en([hs.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),zu({name:"overflow-group"})]),eB=(t,r)=>Ur(t,r,"overflow").map(xu.hasGrown).getOr(!1),lM=(t,r,l)=>{Ur(t,r,"overflow-button").each(h=>{Ur(t,r,"overflow").each(p=>{if(cM(t,r),xu.hasShrunk(p)){const y=r.onOpened;r.onOpened=S=>{l||po.focusIn(p),y(S),r.onOpened=y}}else{const y=r.onClosed;r.onClosed=S=>{l||Io.focus(h),y(S),r.onClosed=y}}xu.toggleGrow(p)})})},cM=(t,r)=>{Ur(t,r,"overflow").each(l=>{ZF(t,r,h=>{const p=dt(h,y=>du(y));Wh.setGroups(l,p)}),Ur(t,r,"overflow-button").each(h=>{xu.hasGrown(l)&&hs.on(h)}),xu.refresh(l)})},XV=(t,r,l,h)=>{const p="alloy.toolbar.toggle",y=(S,R)=>{const I=dt(R,S.getSystem().build);t.builtGroups.set(I)};return{uid:t.uid,dom:t.dom,components:r,behaviours:gl(t.splitToolbarBehaviours,[ui.config({others:{overflowGroup:S=>SC.sketch({...h["overflow-group"](),items:[tl.sketch({...h["overflow-button"](),action:R=>{ws(S,p)}})]})}}),Ko("toolbar-toggle-events",[Nt(p,S=>{lM(S,t,!1)})])]),apis:{setGroups:(S,R)=>{y(S,R),cM(S,t)},refresh:S=>cM(S,t),toggle:S=>{lM(S,t,!1)},toggleWithoutFocusing:S=>{lM(S,t,!0)},isOpen:S=>eB(S,t)},domModification:{attributes:{role:"group"}}}},JA=Hl({name:"SplitSlidingToolbar",configFields:JF(),partFields:QF(),factory:XV,apis:{setGroups:(t,r,l)=>{t.setGroups(r,l)},refresh:(t,r)=>{t.refresh(r)},toggle:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r)}}),tB=t=>{const r=t.title.fold(()=>({}),l=>({attributes:{title:l}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...r},components:[SC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:en([Sa.config({}),Io.config({})])}},QA=t=>SC.sketch(tB(t)),nB=(t,r)=>{const l=ba(h=>{const p=dt(t.initGroups,QA);Wh.setGroups(h,p)});return en([Cd.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),vi(()=>t.providers.checkUiComponentContext("any")),po.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Ko("toolbar-events",[l])])},oB=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":tB({title:V.none(),items:[]}),"overflow-button":KI({context:"any",name:"more",icon:V.some("more-drawer"),enabled:!0,tooltip:V.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:V.none(),borderless:!1},V.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:nB(t,r)}},YV=t=>{const r=oB(t),l=4,h=KF.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return KF.sketch({...r,lazySink:t.getSink,getOverflowBounds:()=>{const p=t.moreDrawerData.lazyHeader().element,y=Bc(p),S=Di(p),R=Bc(S),I=Math.max(S.dom.scrollHeight,R.height);return Br(y.x+l,R.y,y.width-l*2,I)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[h],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:p=>t.onToggled(p,!0),onClosed:p=>t.onToggled(p,!1)})},jV=t=>{const r=JA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),l=JA.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),h=oB(t);return JA.sketch({...h,components:[r,l],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:p=>{p.getSystem().broadcastOn([UA()],{type:"opened"}),t.onToggled(p,!0)},onClosed:p=>{p.getSystem().broadcastOn([UA()],{type:"closed"}),t.onToggled(p,!1)}})},eT=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return Wh.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===xd.scrolling?["tox-toolbar--scrolling"]:[])},components:[Wh.parts.groups({})],toolbarBehaviours:nB(t,r)})},sB=[Rm,wd,Ai("tooltip"),Ji("buttonType","secondary",["primary","secondary"]),Ti("borderless",!1),$c("onAction"),ti("context","mode:design")],ZV=[...sB,Om,Cl("type",["button"])],GV=[...sB,Ti("active",!1),Cl("type",["togglebutton"])],uM={button:ZV,togglebutton:GV},qV=[Cl("type",["group"]),yh("buttons",[],Ga("type",uM))],KV=Ga("type",{...uM,group:qV}),dM=fo([yh("buttons",[],KV),$c("onShow"),$c("onHide")]),JV=t=>ka("view",dM,t),tT=(t,r)=>{var l,h;const p=t.type==="togglebutton",y=t.icon.map(Qe=>Lm(Qe,r.icons)).map(dr),R=Qe=>{const yt=Rt=>{y.map(Nn=>Nn.getOpt(Qe).each(kn=>{Wo.set(kn,[Lm(Rt,r.icons)])}))},St=Rt=>{const Nn=Qe.element;Rt?(bi(Nn,"tox-button--enabled"),kt(Nn,"aria-pressed",!0)):(_r(Nn,"tox-button--enabled"),Q(Nn,"aria-pressed"))},un=()=>yc(Qe.element,"tox-button--enabled"),Pn=()=>Fu(Qe.element);if(p)return t.onAction({setIcon:yt,setActive:St,isActive:un,focus:Pn});if(t.type==="button")return t.onAction({setIcon:yt})},I={...t,name:p?t.text.getOr(t.icon.getOr("")):(l=t.text)!==null&&l!==void 0?l:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:V.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},H=AD((h=t.buttonType)!==null&&h!==void 0?h:"secondary"),X=p?t.text.map(r.translate):V.some(r.translate(t.text)),K=X.map(Ia),ie=I.tooltip.or(X).map(Qe=>({"aria-label":r.translate(Qe)})).getOr({}),de=y.map(Qe=>Qe.asSpec()),Ce=Kp([de,K]),_e=t.icon.isSome()&&K.isSome(),et={tag:"button",classes:H.concat(...t.icon.isSome()&&!_e?["tox-button--icon"]:[]).concat(..._e?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:ie},Fe=[],Ke=MA(I,V.some(R),Fe,et,Ce,t.tooltip,r);return tl.sketch(Ke)},rB=(t,r)=>tT(t,r),aB=(t,r)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:dt(t.buttons,l=>rB(l,r))}),iB=rs().deviceType,QV=iB.isPhone(),xj=iB.isTablet(),eW=t=>{let r=!1;const l=dt(t.buttons,h=>h.type==="group"?(r=!0,aB(h,t.providers)):rB(h,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...QV||xj?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:en([Io.config({}),po.config({mode:"flow",selector:"button, .tox-button",focusInside:vf.OnEnterOrSpaceMode})]),components:r?l:[Tg.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Tg.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:l})]}},tW=t=>({uid:t.uid,behaviours:en([Io.config({}),Sa.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),hM=(t,r,l,h)=>{const p={getPane:y=>ml.getPart(y,t,"pane"),getOnShow:y=>t.viewConfig.onShow,getOnHide:y=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:r,behaviours:en([Io.config({}),po.config({mode:"cyclic",focusInside:vf.OnEnterOrSpaceMode})]),apis:p}};var ux=Hl({name:"silver.View",configFields:[Lt("viewConfig")],partFields:[pu({factory:{sketch:eW},schema:[Lt("buttons"),Lt("providers")],name:"header"}),pu({factory:{sketch:tW},schema:[],name:"pane"})],factory:hM,apis:{getPane:(t,r)=>t.getPane(r),getOnShow:(t,r)=>t.getOnShow(r),getOnHide:(t,r)=>t.getOnHide(r)}});const nT=(t,r,l)=>yi(r,(h,p)=>{const y=qt(JV(h));return t.slot(p,ux.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:y,components:[...y.buttons.length>0?[ux.parts.header({buttons:y.buttons,providers:l})]:[],ux.parts.pane({})]}))}),lB=(t,r)=>Ac.sketch(l=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:nT(l,t,r),slotBehaviours:z1.unnamedEvents([ba(h=>Ac.hideAllSlots(h))])})),gM=t=>We(Ac.getSlotNames(t),r=>Ac.isShowing(t,r)),fM=t=>{const r=t.element;Mt(r,"display","none"),kt(r,"aria-hidden","true")},nW=t=>{const r=t.element;Oo(r,"display"),Q(r,"aria-hidden")},cB=t=>({getContainer:ce(t)}),jv=(t,r,l)=>{Ac.getSlot(t,r).each(h=>{ux.getPane(h).each(p=>{l(h)(cB(p.element.dom))})})},uB=(t,r)=>jv(t,r,ux.getOnShow),oW=(t,r)=>jv(t,r,ux.getOnHide);var oT=Zc({factory:(t,r)=>{const y={setViews:(S,R)=>{Wo.set(S,[lB(R,r.backstage.shared.providers)])},whichView:S=>Bs.getCurrent(S).bind(gM),toggleView:(S,R,I,H)=>Bs.getCurrent(S).exists(X=>{const K=gM(X),ie=K.exists(Ce=>H===Ce),de=Ac.getSlot(X,H).isSome();return de&&(Ac.hideAllSlots(X),ie?(fM(S),R()):(I(),nW(S),Ac.showSlot(X,H),uB(X,H)),K.each(Ce=>oW(X,Ce))),de})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:en([Wo.config({}),Bs.config({find:S=>{const R=Wo.contents(S);return ur(R)}})]),apis:y}},name:"silver.ViewWrapper",configFields:[Lt("backstage")],apis:{setViews:(t,r,l)=>t.setViews(r,l),toggleView:(t,r,l,h,p)=>t.toggleView(r,l,h,p),whichView:(t,r)=>t.whichView(r)}});const mM=(t,r,l)=>{let h=!1;const p=S=>{dE(S,".tox-statusbar").each(R=>{nr(R,"display")==="none"&&In(R,"aria-hidden")==="true"?(Oo(R,"display"),Q(R,"aria-hidden")):(Mt(R,"display","none"),kt(R,"aria-hidden","true"))})},y={getSocket:S=>ml.getPart(S,t,"socket"),setSidebar:(S,R,I)=>{ml.getPart(S,t,"sidebar").each(H=>eM(H,R,I))},toggleSidebar:(S,R)=>{ml.getPart(S,t,"sidebar").each(I=>TV(I,R))},whichSidebar:S=>ml.getPart(S,t,"sidebar").bind(EV).getOrNull(),getHeader:S=>ml.getPart(S,t,"header"),getToolbar:S=>ml.getPart(S,t,"toolbar"),setToolbar:(S,R)=>{ml.getPart(S,t,"toolbar").each(I=>{const H=dt(R,QA);I.getApis().setGroups(I,H)})},setToolbars:(S,R)=>{ml.getPart(S,t,"multiple-toolbar").each(I=>{const H=dt(R,X=>dt(X,QA));RF.setItems(I,H)})},refreshToolbar:S=>{ml.getPart(S,t,"toolbar").each(I=>I.getApis().refresh(I))},toggleToolbarDrawer:S=>{ml.getPart(S,t,"toolbar").each(R=>{Ts(R.getApis().toggle,I=>I(R))})},toggleToolbarDrawerWithoutFocusing:S=>{ml.getPart(S,t,"toolbar").each(R=>{Ts(R.getApis().toggleWithoutFocusing,I=>I(R))})},isToolbarDrawerToggled:S=>ml.getPart(S,t,"toolbar").bind(R=>V.from(R.getApis().isOpen).map(I=>I(R))).getOr(!1),getThrobber:S=>ml.getPart(S,t,"throbber"),focusToolbar:S=>{ml.getPart(S,t,"toolbar").orThunk(()=>ml.getPart(S,t,"multiple-toolbar")).each(I=>{po.focusIn(I)})},setMenubar:(S,R)=>{ml.getPart(S,t,"menubar").each(I=>{KD.setMenus(I,R)})},focusMenubar:S=>{ml.getPart(S,t,"menubar").each(R=>{KD.focus(R)})},setViews:(S,R)=>{ml.getPart(S,t,"viewWrapper").each(I=>{oT.setViews(I,R)})},toggleView:(S,R)=>ml.getPart(S,t,"viewWrapper").exists(I=>oT.toggleView(I,()=>y.showMainView(S),()=>y.hideMainView(S),R)),whichView:S=>ml.getPart(S,t,"viewWrapper").bind(oT.whichView).getOrNull(),hideMainView:S=>{h=y.isToolbarDrawerToggled(S),h&&y.toggleToolbarDrawer(S),ml.getPart(S,t,"editorContainer").each(R=>{const I=R.element;p(I),Mt(I,"display","none"),kt(I,"aria-hidden","true")})},showMainView:S=>{h&&y.toggleToolbarDrawer(S),ml.getPart(S,t,"editorContainer").each(R=>{const I=R.element;p(I),Oo(I,"display"),Q(I,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:r,apis:y,behaviours:t.behaviours}},sW=ch.optional({factory:KD,name:"menubar",schema:[Lt("backstage")]}),rW=t=>t.type===xd.sliding?jV:t.type===xd.floating?YV:eT,dB=ch.optional({factory:{sketch:t=>RF.sketch({uid:t.uid,dom:t.dom,listBehaviours:en([po.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>eT({type:t.type,uid:Fn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),V.some(!0))}),setupItem:(r,l,h,p)=>{Wh.setGroups(l,h)},shell:!0})},name:"multiple-toolbar",schema:[Lt("dom"),Lt("onEscape")]}),hB=ch.optional({factory:{sketch:t=>{const r=rW(t),l={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),V.some(!0)),onToggled:(h,p)=>t.onToolbarToggled(p),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(l)}},name:"toolbar",schema:[Lt("dom"),Lt("onEscape"),Lt("getSink")]}),sT=ch.optional({factory:{sketch:pV},name:"header",schema:[Lt("dom")]}),pM=ch.optional({factory:{sketch:HF},name:"promotion",schema:[Lt("dom")]}),aW=ch.optional({name:"socket",schema:[Lt("dom")]}),iW=ch.optional({factory:{sketch:gj},name:"sidebar",schema:[Lt("dom")]}),gB=ch.optional({factory:{sketch:LV},name:"throbber",schema:[Lt("dom")]}),lW=ch.optional({factory:oT,name:"viewWrapper",schema:[Lt("backstage")]}),cW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),uW=ch.optional({factory:{sketch:cW},name:"editorContainer",schema:[]});var Qr=Hl({name:"OuterContainer",factory:mM,configFields:[Lt("dom"),Lt("behaviours")],partFields:[sT,sW,hB,dB,aW,iW,pM,gB,lW,uW],apis:{getSocket:(t,r)=>t.getSocket(r),setSidebar:(t,r,l,h)=>{t.setSidebar(r,l,h)},toggleSidebar:(t,r,l)=>{t.toggleSidebar(r,l)},whichSidebar:(t,r)=>t.whichSidebar(r),getHeader:(t,r)=>t.getHeader(r),getToolbar:(t,r)=>t.getToolbar(r),setToolbar:(t,r,l)=>{t.setToolbar(r,l)},setToolbars:(t,r,l)=>{t.setToolbars(r,l)},refreshToolbar:(t,r)=>t.refreshToolbar(r),toggleToolbarDrawer:(t,r)=>{t.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(t,r)=>{t.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(t,r)=>t.isToolbarDrawerToggled(r),getThrobber:(t,r)=>t.getThrobber(r),setMenubar:(t,r,l)=>{t.setMenubar(r,l)},focusMenubar:(t,r)=>{t.focusMenubar(r)},focusToolbar:(t,r)=>{t.focusToolbar(r)},setViews:(t,r,l)=>{t.setViews(r,l)},toggleView:(t,r,l)=>t.toggleView(r,l),whichView:(t,r)=>t.whichView(r)}});const dW="file edit view insert format tools table help",fB={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},bM=(t,r,l)=>{const h=nP(l).split(/[ ,]/);return{text:t.title,getItems:()=>De(t.items,p=>{const y=p.toLowerCase();return y.trim().length===0?[]:qs(h,S=>S===y)?[]:y==="separator"||y==="|"?[{type:"separator"}]:r.menuItems[y]?[r.menuItems[y]]:[]})}},vM=t=>t.split(" "),mB=(t,r)=>{const l={...fB,...r.menus},h=ds(r.menus).length>0,p=r.menubar===void 0||r.menubar===!0?vM(dW):vM(r.menubar===!1?"":r.menubar),y=zo(p,R=>{const I=os(fB,R);return h?I||Yt(r.menus,R).exists(H=>os(H,"items")):I}),S=dt(y,R=>{const I=l[R];return bM({title:I.title,items:vM(I.items)},r,t)});return zo(S,R=>{const I=H=>Ot(H)||H.type!=="separator";return R.getItems().length>0&&qs(R.getItems(),I)})},pB=t=>{const r=()=>{t._skinLoaded=!0,EL(t)};return()=>{t.initialized?r():t.on("init",r)}},hW=(t,r)=>()=>V$(t,{message:r}),xM=(t,r,l)=>(t.on("remove",()=>l.unload(r)),l.load(r)),yM=(t,r,l,h)=>(t.on("remove",()=>h.unloadRawCss(r)),h.loadRawCss(r,l)),bB=async(t,r)=>{const h="ui/"+lk(t).getOr("default")+"/skin.css",p=tinymce.Resource.get(h);if(Ot(p))yM(t,h,p,t.ui.styleSheetLoader);else{const y=t.editorManager.suffix,S=r+`/skin${y}.css`;return xM(t,S,t.ui.styleSheetLoader)}},gW=async(t,r)=>{if(ta(Xe.fromDom(t.getElement()))){const p="ui/"+lk(t).getOr("default")+"/skin.shadowdom.css",y=tinymce.Resource.get(p);if(Ot(y))yM(t,p,y,$p.DOM.styleSheetLoader);else{const S=t.editorManager.suffix,R=r+`/skin.shadowdom${S}.css`;return xM(t,R,$p.DOM.styleSheetLoader)}}},fW=async(t,r)=>{const l=()=>{const p=tO(r),y=r.editorManager.suffix;p&&r.contentCSS.push(p+(t?"/content.inline":"/content")+`${y}.css`)};lk(r).fold(l,p=>{const y="ui/"+p+(t?"/content.inline":"/content")+".css",S=tinymce.Resource.get(y);Ot(S)?yM(r,y,S,r.ui.styleSheetLoader):l()});const h=tO(r);if(!eO(r)&&Ot(h))return Promise.all([bB(r,h),gW(r,h)]).then()},vB=(t,r)=>fW(t,r).then(pB(r),hW(r,"Skin could not be loaded")),xB=no(vB,!1),mW=no(vB,!0),dx=(t,r,l)=>Re(l)?t.translate(r):t.translate([r,t.translate(l)]),pW=(t,r)=>{const l=(S,R,I,H)=>{const X=t.shared.providers.translate(S.title);if(S.type==="separator")return V.some({type:"separator",text:X});if(S.type==="submenu"){const K=De(S.getStyleItems(),ie=>h(ie,R,H));return R===0&&K.length<=0?V.none():V.some({type:"nestedmenuitem",text:X,enabled:K.length>0,getSubmenuItems:()=>De(S.getStyleItems(),ie=>h(ie,R,H))})}else return V.some({type:"togglemenuitem",text:X,icon:S.icon,active:S.isSelected(H),enabled:!I,onAction:r.onAction(S),...S.getStylePreview().fold(()=>({}),K=>({meta:{style:K}}))})},h=(S,R,I)=>{const H=S.type==="formatter"&&r.isInvalid(S);return R===0?H?[]:l(S,R,!1,I).toArray():l(S,R,H,I).toArray()},p=S=>{const R=r.getCurrentValue(),I=r.shouldHide?0:1;return De(S,H=>h(H,I,R))};return{validateItems:p,getFetch:(S,R)=>(I,H)=>{const X=R(),K=p(X),ie=nx(K,Fh.CLOSE_ON_EXECUTE,S,{isHorizontalMenu:!1,search:V.none()});H(ie)}}},ab=(t,r)=>{const l=r.dataset,h=l.type==="basic"?()=>dt(l.data,p=>pF(p,r.isSelectedFor,r.getPreviewFor)):l.getData;return{items:pW(t,r),getStyleItems:h}},Zv=(t,r,l,h,p,y)=>{const{items:S,getStyleItems:R}=ab(r,l),I=to(l.tooltip),H=K=>({getComponent:ce(K),setTooltip:ie=>{const de=r.shared.providers.translate(ie);kt(K.element,"aria-label",de),I.set(ie)}}),X=K=>{const ie=de=>K.setTooltip(dx(t,h(de.value),de.value));return t.on(p,ie),Xk(Mv(t,"NodeChange",de=>{const Ce=de.getComponent();l.updateText(Ce),Do.set(de.getComponent(),!t.selection.isEditable())})(K),()=>t.off(p,ie))};return SA({context:"mode:design",text:l.icon.isSome()?V.none():l.text,icon:l.icon,ariaLabel:V.some(l.tooltip),tooltip:V.none(),role:V.none(),fetch:S.getFetch(r,R),onSetup:X,getApi:H,columns:1,presets:"normal",classes:l.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[ni.config({...r.shared.providers.tooltips.getConfig({tooltipText:r.shared.providers.translate(l.tooltip),onShow:K=>{if(l.tooltip!==I.get()){const ie=r.shared.providers.translate(I.get());ni.setComponents(K,r.shared.providers.tooltips.getComponents({tooltipText:ie}))}}})})]},"tox-tbtn",r.shared,y)},bW=t=>dt(t,r=>{let l=r,h=r;const p=r.split("=");return p.length>1&&(l=p[0],h=p[1]),{title:l,format:h}}),vW=t=>({type:"basic",data:t});var hx;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(hx||(hx={}));const xW=(t,r)=>r===hx.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),wM=(t,r,l)=>{const h=t.options.get(r);return{type:"basic",data:bW(xW(h,l))}},yW="Align",yB=ce("Alignment {0}"),wB="left",CM=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],SM=t=>{const r=()=>We(CM,R=>t.formatter.match(R.format)),l=R=>()=>t.formatter.match(R),h=R=>V.none,p=R=>{const H=r().fold(ce(wB),X=>X.title.toLowerCase());Jn(R,ob,{icon:`align-${H}`}),j$(t,{value:H})},y=vW(CM),S=R=>()=>We(CM,I=>I.format===R.format).each(I=>t.execCommand(I.command));return{tooltip:dx(t,yB(),wB),text:V.none(),icon:V.some("align-left"),isSelectedFor:l,getCurrentValue:V.none,getPreviewFor:h,onAction:S,updateText:p,dataset:y,shouldHide:!1,isInvalid:R=>!t.formatter.canApply(R.format)}},rT=(t,r)=>Zv(t,r,SM(t),yB,"AlignTextUpdate","align"),kM=(t,r)=>{const l=ab(r,SM(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate(yW),onSetup:kc(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},AM=(t,r)=>{const l=r(),h=dt(l,p=>p.format);return V.from(t.formatter.closest(h)).bind(p=>We(l,y=>y.format===p))},ib="Blocks",TM=ce("Block {0}"),EM="Paragraph",CB=t=>{const r=y=>()=>t.formatter.match(y),l=y=>()=>{const S=t.formatter.get(y);return S?V.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):V.none()},h=y=>{const R=AM(t,()=>p.data).fold(ce(EM),I=>I.title);Jn(y,ah,{text:R}),q$(t,{value:R})},p=wM(t,"block_formats",hx.SemiColon);return{tooltip:dx(t,TM(),EM),text:V.some(EM),icon:V.none(),isSelectedFor:r,getCurrentValue:V.none,getPreviewFor:l,onAction:ML(t),updateText:h,dataset:p,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},wW=(t,r)=>Zv(t,r,CB(t),TM,"BlocksTextUpdate","blocks"),CW=(t,r)=>{const l=ab(r,CB(t));t.ui.registry.addNestedMenuItem("blocks",{text:ib,onSetup:kc(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},SW="Fonts",SB=ce("Font {0}"),_M="System Font",kB=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],AB=t=>{const r=t.split(/\s*,\s*/);return dt(r,l=>l.replace(/^['"]+|['"]+$/g,""))},TB=(t,r)=>r.length>0&&Xn(r,l=>t.indexOf(l.toLowerCase())>-1),OM=(t,r)=>{if(t.indexOf("-apple-system")===0||r.length>0){const l=AB(t.toLowerCase());return TB(l,kB)||TB(l,r)}else return!1},EB=t=>{const r=()=>{const I=Ce=>Ce?AB(Ce)[0]:"",H=t.queryCommandValue("FontName"),X=R.data,K=H?H.toLowerCase():"",ie=hw(t);return{matchOpt:We(X,Ce=>{const _e=Ce.format;return _e.toLowerCase()===K||I(_e).toLowerCase()===I(K).toLowerCase()}).orThunk(()=>Qn(OM(K,ie),{title:_M,format:K})),font:H}},l=I=>H=>H.exists(X=>X.format===I),h=()=>{const{matchOpt:I}=r();return I},p=I=>()=>V.some({tag:"div",styles:I.indexOf("dings")===-1?{"font-family":I}:{}}),y=I=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,I.format)})},S=I=>{const{matchOpt:H,font:X}=r(),K=H.fold(ce(X),ie=>ie.title);Jn(I,ah,{text:K}),oR(t,{value:K})},R=wM(t,"font_family_formats",hx.SemiColon);return{tooltip:dx(t,SB(),_M),text:V.some(_M),icon:V.none(),isSelectedFor:l,getCurrentValue:h,getPreviewFor:p,onAction:y,updateText:S,dataset:R,shouldHide:!1,isInvalid:Je}},kW=(t,r)=>Zv(t,r,EB(t),SB,"FontFamilyTextUpdate","fontfamily"),AW=(t,r)=>{const l=ab(r,EB(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:r.shared.providers.translate(SW),onSetup:kc(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},TW={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},EW=(()=>{const t="[0-9]+",l="[eE]"+("[+-]?"+t),h="\\.",p=R=>`(?:${R})?`,S=`[+-]?(?:${["Infinity",t+h+p(t)+p(l),h+t+p(l),t+p(l)].join("|")})`;return new RegExp(`^(${S})(.*)$`)})(),_W=(t,r)=>qs(r,l=>qs(TW[l],h=>t===h)),kC=(t,r)=>V.from(EW.exec(t)).bind(h=>{const p=Number(h[1]),y=h[2];return _W(y,r)?V.some({value:p,unit:y}):V.none()}),_B=(t,r)=>kC(t,r).map(({value:l,unit:h})=>l+h),RM={tab:ce(9),escape:ce(27),enter:ce(13),backspace:ce(8),delete:ce(46),left:ce(37),up:ce(38),right:ce(39),down:ce(40),space:ce(32),home:ce(36),end:ce(35),pageUp:ce(33),pageDown:ce(34)},OW=(t,r,l,h)=>{let p=V.none();const y=Qe=>Qe.map(yt=>En.getValue(yt)).getOr(""),S=Mv(t,"NodeChange SwitchMode",Qe=>{const yt=Qe.getComponent();p=V.some(yt),l.updateInputValue(yt),Do.set(yt,!t.selection.isEditable())}),R=Qe=>({getComponent:ce(Qe)}),I=to(oe),H=Fn("custom-number-input-events"),X=(Qe,yt,St)=>{const un=y(p),Pn=l.getNewValue(un,Qe),Rt=un.length-`${Pn}`.length,Nn=p.map(Vn=>Vn.element.dom.selectionStart-Rt),kn=p.map(Vn=>Vn.element.dom.selectionEnd-Rt);l.onAction(Pn,St),p.each(Vn=>{En.setValue(Vn,Pn),yt&&(Nn.each(Es=>Vn.element.dom.selectionStart=Es),kn.each(Es=>Vn.element.dom.selectionEnd=Es))})},K=(Qe,yt)=>X((St,un)=>St-un,Qe,yt),ie=(Qe,yt)=>X((St,un)=>St+un,Qe,yt),de=Qe=>Mi(Qe.element).fold(V.none,yt=>(Fu(yt),V.some(!0))),Ce=Qe=>am(Qe.element)?(ec(Qe.element).each(yt=>Fu(yt)),V.some(!0)):V.none(),_e=(Qe,yt,St,un)=>{const Pn=to(oe),Rt=r.shared.providers.translate(St),Nn=Fn("altExecuting"),kn=Mv(t,"NodeChange SwitchMode",Es=>{Do.set(Es.getComponent(),!t.selection.isEditable())}),Vn=Es=>{Do.isDisabled(Es)||Qe(!0)};return tl.sketch({dom:{tag:"button",attributes:{"aria-label":Rt,"data-mce-name":yt},classes:un.concat(yt)},components:[lD(yt,r.shared.providers.icons)],buttonBehaviours:en([Do.config({}),ni.config(r.shared.providers.tooltips.getConfig({tooltipText:Rt})),Ko(Nn,[Gp({onSetup:kn,getApi:R},Pn),qp({getApi:R},Pn),Nt(Mu(),(Es,ua)=>{(ua.event.raw.keyCode===RM.space()||ua.event.raw.keyCode===RM.enter())&&(Do.isDisabled(Es)||Qe(!1))}),Nt(Bf(),Vn),Nt(Zs(),Vn)])]),eventOrder:{[Mu()]:[Nn,"keying"],[Bf()]:[Nn,"alloy.base.behaviour"],[Zs()]:[Nn,"alloy.base.behaviour"],[Mc()]:["alloy.base.behaviour",Nn,"tooltipping"],[cu()]:[Nn,"tooltipping"]}})},et=dr(_e(Qe=>K(!1,Qe),"minus","Decrease font size",[])),Fe=dr(_e(Qe=>ie(!1,Qe),"plus","Increase font size",[])),Ke=dr({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Cg.sketch({inputBehaviours:en([Do.config({}),Ko(H,[Gp({onSetup:S,getApi:R},I),qp({getApi:R},I)]),Ko("input-update-display-text",[Nt(ah,(Qe,yt)=>{En.setValue(Qe,yt.event.text)}),Nt(NC(),Qe=>{l.onAction(En.getValue(Qe))}),Nt(Sh(),Qe=>{l.onAction(En.getValue(Qe))})]),po.config({mode:"special",onEnter:Qe=>(X(Gt,!0,!0),V.some(!0)),onEscape:de,onUp:Qe=>(ie(!0,!1),V.some(!0)),onDown:Qe=>(K(!0,!1),V.some(!0)),onLeft:(Qe,yt)=>(yt.cut(),V.none()),onRight:(Qe,yt)=>(yt.cut(),V.none())})])})],behaviours:en([Io.config({}),po.config({mode:"special",onEnter:Ce,onSpace:Ce,onEscape:de}),Ko("input-wrapper-events",[Nt(bc(),Qe=>{wt([et,Fe],yt=>{const St=Xe.fromDom(yt.get(Qe).element.dom);am(St)&&pp(St)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...vn(h)?{"data-mce-name":h}:{}}},components:[et.asSpec(),Ke.asSpec(),Fe.asSpec()],behaviours:en([Io.config({}),po.config({mode:"flow",focusInside:vf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Qe=>am(Qe.element)?V.none():(Fu(Qe.element),V.some(!0))})])}},OB="Font sizes",RB=ce("Font size {0}"),DB="12pt",RW={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},MB={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},DW=(t,r)=>{const l=Math.pow(10,r);return Math.round(t*l)/l},PB=(t,r)=>/[0-9.]+px$/.test(t)?DW(parseInt(t,10)*72/96,r||0)+"pt":Yt(MB,t).getOr(t),MW=t=>Yt(RW,t).getOr(""),LB=t=>{const r=()=>{let I=V.none();const H=R.data,X=t.queryCommandValue("FontSize");if(X)for(let K=3;I.isNone()&&K>=0;K--){const ie=PB(X,K),de=MW(ie);I=We(H,Ce=>Ce.format===X||Ce.format===ie||Ce.format===de)}return{matchOpt:I,size:X}},l=I=>H=>H.exists(X=>X.format===I),h=()=>{const{matchOpt:I}=r();return I},p=ce(V.none),y=I=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,I.format)})},S=I=>{const{matchOpt:H,size:X}=r(),K=H.fold(ce(X),ie=>ie.title);Jn(I,ah,{text:K}),Z$(t,{value:K})},R=wM(t,"font_size_formats",hx.Space);return{tooltip:dx(t,RB(),DB),text:V.some(DB),icon:V.none(),isSelectedFor:l,getPreviewFor:p,getCurrentValue:h,onAction:y,updateText:S,dataset:R,shouldHide:!1,isInvalid:Je}},PW=(t,r)=>Zv(t,r,LB(t),RB,"FontSizeTextUpdate","fontsize"),LW=t=>{var r;const l={step:1};return(r={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&r!==void 0?r:l},NW=16,IW=t=>t>=0,FW=t=>{const r=()=>t.queryCommandValue("FontSize");return{updateInputValue:h=>Jn(h,ah,{text:r()}),onAction:(h,p)=>t.execCommand("FontSize",!1,h,{skip_focus:!p}),getNewValue:(h,p)=>{kC(h,["unsupportedLength","empty"]);const y=r(),S=kC(h,["unsupportedLength","empty"]).or(kC(y,["unsupportedLength","empty"])),R=S.map(ie=>ie.value).getOr(NW),I=aP(t),H=S.map(ie=>ie.unit).filter(ie=>ie!=="").getOr(I),X=p(R,LW(H).step),K=`${IW(X)?X:R}${H}`;return K!==y&&G$(t,{value:K}),K}}},NB=(t,r)=>OW(t,r,FW(t),"fontsizeinput"),BW=(t,r)=>{const l=ab(r,LB(t));t.ui.registry.addNestedMenuItem("fontsize",{text:OB,onSetup:kc(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},HW="Formats",IB=t=>Re(t)?"Formats":"Format {0}",FB=(t,r)=>{const l="Formats",h=S=>()=>t.formatter.match(S),p=S=>()=>{const R=t.formatter.get(S);return R!==void 0?V.some({tag:R.length>0&&(R[0].inline||R[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(S))}):V.none()},y=S=>{const R=K=>IA(K)?De(K.items,R):$D(K)?[{title:K.title,format:K.format}]:[],I=De(mF(t),R),X=AM(t,ce(I)).fold(ce({title:l,tooltipLabel:""}),K=>({title:K.title,tooltipLabel:K.title}));Jn(S,ah,{text:X.title}),Y$(t,{value:X.tooltipLabel})};return{tooltip:dx(t,IB(""),""),text:V.some(l),icon:V.none(),isSelectedFor:h,getCurrentValue:V.none,getPreviewFor:p,onAction:ML(t),updateText:y,shouldHide:eP(t),isInvalid:S=>!t.formatter.canApply(S.format),dataset:r}},$W=(t,r)=>{const l={type:"advanced",...r.styles};return Zv(t,r,FB(t,l),IB,"StylesTextUpdate","styles")},zW=(t,r)=>{const l={type:"advanced",...r.styles},h=ab(r,FB(t,l));t.ui.registry.addNestedMenuItem("styles",{text:HW,onSetup:kc(t),getSubmenuItems:()=>h.items.validateItems(h.getStyleItems())})},VW=ce([Lt("toggleClass"),Lt("fetch"),Kf("onExecute"),rt("getHotspot",V.some),rt("getAnchorOverrides",ce({})),af(),Kf("onItemExecute"),tr("lazySink"),Lt("dom"),Ws("onOpen"),hl("splitDropdownBehaviours",[ui,po,Io]),rt("matchWidth",!1),rt("useMinWidth",!1),rt("eventOrder",{}),tr("role"),tr("listRole")].concat(Kk())),BB=Zl({factory:tl,schema:[Lt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:en([Io.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(Xg)},buttonBehaviours:en([hs.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),WW=Zl({factory:tl,schema:[Lt("dom")],name:"button",defaults:()=>({buttonBehaviours:en([Io.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(l=>{t.onExecute(l,r)})}})}),UW=ce([BB,WW,pu({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Lt("text")],name:"aria-descriptor"}),zu({schema:[_h()],name:"menu",defaults:t=>({onExecute:(r,l)=>{r.getSystem().getByUid(t.uid).each(h=>{t.onItemExecute(h,r,l)})}})}),rN()]),HB=(t,r,l,h)=>{const p=X=>{Bs.getCurrent(X).each(K=>{dn.highlightFirst(K),po.focusIn(K)})},y=X=>{hR(t,Gt,X,h,p,qc.HighlightMenuAndItem).get(oe)},S=X=>(y(X),V.some(!0)),R=X=>{const K=_n(X,t,"button");return Xg(K),V.some(!0)},I={...Er([ba((X,K)=>{Ur(X,t,"aria-descriptor").each(de=>{const Ce=Fn("aria");kt(de.element,"id",Ce),kt(X.element,"aria-describedby",Ce)})})]),...cw(V.some(y))},H={repositionMenus:X=>{hs.isOn(X)&&mR(X)}};return{uid:t.uid,dom:t.dom,components:r,apis:H,eventOrder:{...t.eventOrder,[kl()]:["disabling","toggling","alloy.base.behaviour"]},events:I,behaviours:gl(t.splitDropdownBehaviours,[ui.config({others:{sandbox:X=>{const K=_n(X,t,"arrow");return fR(t,X,{onOpen:()=>{hs.on(K),hs.on(X)},onClose:()=>{hs.off(K),hs.off(X)}})}}}),po.config({mode:"special",onSpace:R,onEnter:R,onDown:S}),Io.config({}),hs.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},aT=Hl({name:"SplitDropdown",configFields:VW(),partFields:UW(),factory:HB,apis:{repositionMenus:(t,r)=>t.repositionMenus(r)}}),DM=t=>({isEnabled:()=>!Do.isDisabled(t),setEnabled:r=>Do.set(t,!r),setText:r=>Jn(t,ah,{text:r}),setIcon:r=>Jn(t,ob,{icon:r})}),$B=t=>({setActive:r=>{hs.set(t,r)},isActive:()=>hs.isOn(t),isEnabled:()=>!Do.isDisabled(t),setEnabled:r=>Do.set(t,!r),setText:r=>Jn(t,ah,{text:r}),setIcon:r=>Jn(t,ob,{icon:r})}),zB=(t,r)=>t.map(l=>({"aria-label":r.translate(l)})).getOr({}),VB=Fn("focus-button"),MM=(t,r,l,h,p,y,S)=>{const R=r.map(H=>dr(cD(H,"tox-tbtn",p))),I=t.map(H=>dr(Lm(H,p.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:{...zB(l,p),...vn(S)?{"data-mce-name":S}:{}}},components:Kp([I.map(H=>H.asSpec()),R.map(H=>H.asSpec())]),eventOrder:{[Na()]:["focusing","alloy.base.behaviour",Wv],[Mc()]:[Wv,"toolbar-group-button-events"]},buttonBehaviours:en([Cd.toolbarButton(()=>p.checkUiComponentContext(y).shouldDisable),vi(()=>p.checkUiComponentContext(y)),Ko(Wv,[ba((H,X)=>CA(H)),Nt(ah,(H,X)=>{R.bind(K=>K.getOpt(H)).each(K=>{Wo.set(K,[Ia(p.translate(X.event.text))])})}),Nt(ob,(H,X)=>{I.bind(K=>K.getOpt(H)).each(K=>{Wo.set(K,[Lm(X.event.icon,p.icons)])})}),Nt(Na(),(H,X)=>{X.event.prevent(),ws(H,VB)})])].concat(h.getOr([])))}},gx=(t,r,l,h,p)=>{const y=r.shared,S=to(oe),R={toolbarButtonBehaviours:[],getApi:DM,onSetup:t.onSetup},I=[Ko("toolbar-group-button-events",[Gp(R,S),qp(R,S)])];return rb.sketch({lazySink:y.getSink,fetch:()=>uc.nu(H=>{H(dt(l(t.items),QA))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:MM(t.icon,t.text,t.tooltip,V.some(I),y.providers,t.context,p),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:h}}}})},WB=(t,r,l,h)=>{var p;const y=to(oe),S=MM(t.icon,t.text,t.tooltip,V.none(),l,t.context,h);return tl.sketch({dom:S.dom,components:S.components,eventOrder:xI,buttonBehaviours:{...en([Ko("toolbar-button-events",[vI({onAction:t.onAction,getApi:r.getApi}),Gp(r,y),qp(r,y)]),...t.tooltip.map(R=>ni.config(l.tooltips.getConfig({tooltipText:l.translate(R)+t.shortcut.map(I=>` (${UO(I)})`).getOr("")}))).toArray(),Cd.toolbarButton(()=>!t.enabled||l.checkUiComponentContext(t.context).shouldDisable),vi(()=>l.checkUiComponentContext(t.context))].concat(r.toolbarButtonBehaviours)),[Wv]:(p=S.buttonBehaviours)===null||p===void 0?void 0:p[Wv]}})},XW=(t,r,l)=>UB(t,r,[],l),UB=(t,r,l,h)=>WB(t,{toolbarButtonBehaviours:l.length>0?[Ko("toolbarButtonWith",l)]:[],getApi:DM,onSetup:t.onSetup},r,h),YW=(t,r,l)=>XB(t,r,[],l),XB=(t,r,l,h)=>WB(t,{toolbarButtonBehaviours:[Wo.config({}),hs.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(l.length>0?[Ko("toolbarToggleButtonWith",l)]:[]),getApi:$B,onSetup:t.onSetup},r,h),jW=(t,r,l)=>h=>uc.nu(p=>r.fetch(p)).map(p=>V.from(U1(me(lR(Fn("menu-value"),p,y=>{r.onItemAction(t(h),y)},r.columns,r.presets,Fh.CLOSE_ON_EXECUTE,r.select.getOr(Je),l),{movement:Gk(r.columns,r.presets),menuBehaviours:z1.unnamedEvents(r.columns!=="auto"?[]:[ba((y,S)=>{VO(y,4,$P(r.presets)).each(({numRows:R,numColumns:I})=>{po.setGridSize(y,R,I)})})])})))),ZW=(t,r,l)=>{const h=to(t.tooltip.getOr("")),p=R=>({isEnabled:()=>!Do.isDisabled(R),setEnabled:I=>Do.set(R,!I),setIconFill:(I,H)=>{Ca(R.element,`svg path[class="${I}"], rect[class="${I}"]`).each(X=>{kt(X,"fill",H)})},setActive:I=>{kt(R.element,"aria-pressed",I),Ca(R.element,"span").each(H=>{R.getSystem().getByDom(H).each(X=>hs.set(X,I))})},isActive:()=>Ca(R.element,"span").exists(I=>R.getSystem().getByDom(I).exists(hs.isOn)),setText:I=>Ca(R.element,"span").each(H=>R.getSystem().getByDom(H).each(X=>Jn(X,ah,{text:I}))),setIcon:I=>Ca(R.element,"span").each(H=>R.getSystem().getByDom(H).each(X=>Jn(X,ob,{icon:I}))),setTooltip:I=>{const H=r.providers.translate(I);kt(R.element,"aria-label",H),h.set(I)}}),y=to(oe),S={getApi:p,onSetup:t.onSetup};return aT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...zB(t.tooltip,r.providers),...vn(l)?{"data-mce-name":l}:{}}},onExecute:R=>{const I=p(R);I.isEnabled()&&t.onAction(I)},onItemExecute:(R,I,H)=>{},splitDropdownBehaviours:en([Ko("split-dropdown-events",[ba((R,I)=>CA(R)),Nt(VB,Io.focus),Gp(S,y),qp(S,y)]),Cd.splitButton(()=>r.providers.isDisabled()||r.providers.checkUiComponentContext(t.context).shouldDisable),vi(()=>r.providers.checkUiComponentContext(t.context)),q1.config({}),...t.tooltip.map(R=>ni.config({...r.providers.tooltips.getConfig({tooltipText:r.providers.translate(R),onShow:I=>{if(h.get()!==R){const H=r.providers.translate(h.get());ni.setComponents(I,r.providers.tooltips.getComponents({tooltipText:H}))}}})})).toArray()]),eventOrder:{[Mc()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[cu()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:jW(p,t,r.providers),parts:{menu:Ew(!1,t.columns,t.presets)},components:[aT.parts.button(MM(t.icon,t.text,V.none(),V.some([hs.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Cd.toolbarButton(Je),vi(ce({contextType:"any",shouldDisable:!1}))]),r.providers,t.context)),aT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:xO("chevron-down",r.providers.icons)},buttonBehaviours:en([Cd.splitButton(Je),vi(ce({contextType:"any",shouldDisable:!1}))])}),aT.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},GW=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Gv=(t,r)=>(l,h,p,y)=>{const S=t(l).mapError(R=>sg(R)).getOrDie();return r(S,h,p,y)},qW={button:Gv(Rw,(t,r,l,h)=>XW(t,r.shared.providers,h)),togglebutton:Gv(Mw,(t,r,l,h)=>YW(t,r.shared.providers,h)),menubutton:Gv(FF,(t,r,l,h)=>Xv(t,"tox-tbtn",r,V.none(),!1,h)),splitbutton:Gv(xV,(t,r,l,h)=>ZW(t,r.shared,h)),grouptoolbarbutton:Gv(bV,(t,r,l,h)=>{const p=l.ui.registry.getAll().buttons,y=R=>iT(l,{buttons:p,toolbar:R,allowToolbarGroups:!1},r,V.none()),S={[Z2]:r.shared.header.isPositionedAtTop()?_i.TopToBottom:_i.BottomToTop};switch(zp(l)){case xd.floating:return gx(t,r,y,S,h);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},KW=(t,r,l,h)=>Yt(qW,t.type).fold(()=>(console.error("skipping button defined by",t),V.none()),p=>V.some(p(t,r,l,h))),PM={styles:$W,fontsize:PW,fontsizeinput:NB,fontfamily:kW,blocks:wW,align:rT},YB=t=>{const r=dt(GW,l=>{const h=zo(l.items,p=>os(t,p)||os(PM,p));return{name:l.name,items:h}});return zo(r,l=>l.items.length>0)},JW=t=>{const r=t.split("|");return dt(r,l=>({items:l.trim().split(" ")}))},QW=t=>xn(t,r=>os(r,"name")&&os(r,"items")),eU=t=>{const r=t.toolbar,l=t.buttons;return r===!1?[]:r===void 0||r===!0?YB(l):Ot(r)?JW(r):QW(r)?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},tU=(t,r,l,h,p,y)=>Yt(r,l.toLowerCase()).orThunk(()=>y.bind(S=>qo(S,R=>Yt(r,R+l.toLowerCase())))).fold(()=>Yt(PM,l.toLowerCase()).map(S=>S(t,p)),S=>S.type==="grouptoolbarbutton"&&!h?(console.warn(`Ignoring the '${l}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),V.none()):KW(S,p,t,l.toLowerCase())),iT=(t,r,l,h)=>{const p=eU(r),y=dt(p,S=>{const R=De(S.items,I=>I.trim().length===0?[]:tU(t,r.buttons,I,r.allowToolbarGroups,l,h).toArray());return{title:V.from(t.translate(S.name)),items:R}});return zo(y,S=>S.items.length>0)},jB=(t,r,l,h)=>{const p=r.mainUi.outerContainer,y=l.toolbar,S=l.buttons;if(xn(y,Ot)){const R=y.map(I=>{const H={toolbar:I,buttons:S,allowToolbarGroups:l.allowToolbarGroups};return iT(t,H,h,V.none())});Qr.setToolbars(p,R)}else Qr.setToolbar(p,iT(t,l,h,V.none()))},LM=rs(),nU=LM.os.isiOS()&&LM.os.version.major<=12,oU=(t,r)=>{const{uiMotherships:l}=r,h=t.dom;let p=t.getWin();const y=t.getDoc().documentElement,S=to(Gr(p.innerWidth,p.innerHeight)),R=to(Gr(y.offsetWidth,y.offsetHeight)),I=()=>{const ie=S.get();(ie.left!==p.innerWidth||ie.top!==p.innerHeight)&&(S.set(Gr(p.innerWidth,p.innerHeight)),nR(t))},H=()=>{const ie=t.getDoc().documentElement,de=R.get();(de.left!==ie.offsetWidth||de.top!==ie.offsetHeight)&&(R.set(Gr(ie.offsetWidth,ie.offsetHeight)),nR(t))},X=ie=>{U$(t,ie)};h.bind(p,"resize",I),h.bind(p,"scroll",X);const K=fy(Xe.fromDom(t.getBody()),"load",H);t.on("hide",()=>{wt(l,ie=>{Mt(ie.element,"display","none")})}),t.on("show",()=>{wt(l,ie=>{Oo(ie.element,"display")})}),t.on("NodeChange",H),t.on("remove",()=>{K.unbind(),h.unbind(p,"resize",I),h.unbind(p,"scroll",X),p=null})},sU=(t,r,l)=>{_m(t)&&Vy(l.mainUi.mothership.element,l.popupUi.mothership),jc(r,l.dialogUi.mothership)};var lT=Object.freeze({__proto__:null,render:(t,r,l,h,p)=>{const{mainUi:y,uiMotherships:S}=r,R=to(0),I=y.outerContainer;xB(t);const H=Xe.fromDom(p.targetNode),X=Ba(ga(H));Vy(H,y.mothership),sU(t,X,r),t.on("PostRender",()=>{Qr.setSidebar(I,l.sidebar,Q_(t))}),t.on("SkinLoaded",()=>{jB(t,r,l,h),R.set(t.getWin().innerWidth),Qr.setMenubar(I,mB(t,l)),Qr.setViews(I,l.views),oU(t,r)});const K=Qr.getSocket(I).getOrDie("Could not find expected socket element");if(nU){jo(K.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const _e=fz(()=>{t.dispatch("ScrollContent")},20),et=wc(K.element,"scroll",_e.throttle);t.on("remove",et.unbind)}fL(t,r),t.addCommand("ToggleSidebar",(_e,et)=>{Qr.toggleSidebar(I,et),RL(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var _e;return(_e=Qr.whichSidebar(I))!==null&&_e!==void 0?_e:""}),t.addCommand("ToggleView",(_e,et)=>{if(Qr.toggleView(I,et)){const Fe=I.element;y.mothership.broadcastOn([bg()],{target:Fe}),wt(S,Ke=>{Ke.broadcastOn([bg()],{target:Fe})}),fs(Qr.whichView(I))&&(t.focus(),t.nodeChanged(),Qr.refreshToolbar(I)),DL(t)}}),t.addQueryValueHandler("ToggleView",()=>{var _e;return(_e=Qr.whichView(I))!==null&&_e!==void 0?_e:""});const ie=zp(t),de=()=>{Qr.refreshToolbar(r.mainUi.outerContainer)};(ie===xd.sliding||ie===xd.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const _e=t.getWin().innerWidth;_e!==R.get()&&(de(),R.set(_e))});const Ce={setEnabled:_e=>{Fw(r,_e?"setEnabled":"setDisabled")},isEnabled:()=>!Do.isDisabled(I)};return{iframeContainer:K.element.dom,editorContainer:I.element.dom,api:Ce}}});const ZB=t=>/^[0-9\.]+(|px)$/i.test(""+t)?V.some(parseInt(""+t,10)):V.none(),fx=t=>vo(t)?t+"px":t,qv=(t,r,l)=>{const h=r.filter(y=>t<y),p=l.filter(y=>t>y);return h.or(p).getOr(t)},GB=t=>{const r=W_(t),l=xv(t),h=tk(t);return ZB(r).map(p=>qv(p,l,h))},rU=t=>GB(t).getOr(W_(t)),qB=t=>{const r=dw(t),l=U_(t),h=yv(t);return ZB(r).map(p=>qv(p,l,h))},aU=t=>qB(t).getOr(dw(t)),{ToolbarLocation:NM,ToolbarMode:KB}=R6,cT=40,JB=(t,r,l,h,p)=>{const{mainUi:y,uiMotherships:S}=l,R=$p.DOM,I=Nh(t),H=Vp(t),X=yv(t).or(qB(t)),K=h.shared.header,ie=K.isPositionedAtTop,de=150,Ce=zp(t),_e=Ce===KB.sliding||Ce===KB.floating,et=to(!1),Fe=()=>et.get()&&!t.removed,Ke=Kn=>_e?Kn.fold(ce(0),Zt=>Zt.components().length>1?Xo(Zt.components()[1].element):0):0,Qe=Kn=>{switch(nk(t)){case NM.auto:const Zt=Qr.getToolbar(y.outerContainer),wn=Ke(Zt),$o=Xo(Kn.element)-wn,is=Hr(r);if(is.y>$o)return"top";{const Zo=Di(r),Vr=Math.max(Zo.dom.scrollHeight,Xo(Zo));return is.bottom<Vr-$o||La().bottom<is.bottom-$o?"bottom":"top"}case NM.bottom:return"bottom";case NM.top:default:return"top"}},yt=Kn=>{p.on(Zt=>{aa.setModes(Zt,[Kn]),K.setDockingMode(Kn);const wn=ie()?_i.TopToBottom:_i.BottomToTop;kt(Zt.element,Z2,wn)})},St=()=>{p.on(Kn=>{const Zt=X.getOrThunk(()=>su().width-Gi(r).left-10);Mt(Kn.element,"max-width",Zt+"px")})},un=(Kn,Zt)=>{p.on(wn=>{const $o=Qr.getToolbar(y.outerContainer),is=Ke($o),mo=Hr(r),Zo=Pn(t,y.outerContainer.element),Vr=()=>Zo.fold(()=>mo.x,gc=>{const Od=Hr(gc);return Fs(gc,Ge())?mo.x:mo.x-Od.x}),Rr=()=>Zo.fold(()=>ie()?Math.max(mo.y-Xo(wn.element)+is,0):mo.bottom,gc=>{var Od;const Rd=Hr(gc),Xh=(Od=gc.dom.scrollTop)!==null&&Od!==void 0?Od:0,Of=Fs(gc,Ge())?Math.max(mo.y-Xo(wn.element)+is,0):mo.y-Rd.y+Xh-Xo(wn.element)+is;return ie()?Of:mo.bottom}),Su=Vr(),Ua=Qn(Kn,Math.ceil(y.outerContainer.element.dom.getBoundingClientRect().width)).filter(gc=>gc>de).map(gc=>{const Od=Zt.getOr(Ki()),Rd=window.innerWidth-(Su-Od.left),Xh=Math.max(Math.min(gc,Rd),de);return Rd<gc&&Mt(y.outerContainer.element,"width",Xh+"px"),{width:Xh+"px"}}).getOr({width:"max-content"}),_d={position:"absolute",left:Math.round(Su)+"px",top:Rr()+"px"};jo(y.outerContainer.element,{..._d,...Ua})})},Pn=(Kn,Zt)=>_m(Kn)?tp(Zt):V.none(),Rt=()=>{wt(S,Kn=>{Kn.broadcastOn([ff()],{})})},Nn=()=>!I&&(bs(y.outerContainer.element).left+Se(y.outerContainer.element)>=window.innerWidth-cT||or(y.outerContainer.element,"width").isSome())?(Mt(y.outerContainer.element,"position","absolute"),Mt(y.outerContainer.element,"left","0px"),Oo(y.outerContainer.element,"width"),!0):!1,kn=Kn=>{if(!Fe())return;I||St();const Zt=Ki(),wn=I?!1:Nn();if(_e&&Qr.refreshToolbar(y.outerContainer),!I){const $o=Ki(),is=Qn(Zt.left!==$o.left,Zt);un(wn,is),is.each(mo=>{_u(mo.left,$o.top)})}H&&p.on(Kn),Rt()},Vn=()=>I||!H||!Fe()?!1:p.get().exists(Kn=>{const Zt=K.getDockingMode(),wn=Qe(Kn);return wn!==Zt?(yt(wn),!0):!1});return{isVisible:Fe,isPositionedAtTop:ie,show:()=>{et.set(!0),Mt(y.outerContainer.element,"display","flex"),R.addClass(t.getBody(),"mce-edit-focus"),wt(S,Kn=>{Oo(Kn.element,"display")}),Vn(),_m(t)?kn(Kn=>aa.isDocked(Kn)?aa.reset(Kn):aa.refresh(Kn)):kn(aa.refresh)},hide:()=>{et.set(!1),Mt(y.outerContainer.element,"display","none"),R.removeClass(t.getBody(),"mce-edit-focus"),wt(S,Kn=>{Mt(Kn.element,"display","none")})},update:kn,updateMode:()=>{Vn()&&kn(aa.reset)},repositionPopups:Rt}},IM=(t,r)=>{const l=Hr(t);return{pos:r?l.y:l.bottom,bounds:l}},QB=(t,r,l,h)=>{const p=to(IM(r,l.isPositionedAtTop())),y=H=>{const{pos:X,bounds:K}=IM(r,l.isPositionedAtTop()),{pos:ie,bounds:de}=p.get(),Ce=K.height!==de.height||K.width!==de.width;p.set({pos:X,bounds:K}),Ce&&nR(t,H),l.isVisible()&&(ie!==X?l.update(aa.reset):Ce&&(l.updateMode(),l.repositionPopups()))};h||(t.on("activate",l.show),t.on("deactivate",l.hide)),t.on("SkinLoaded ResizeWindow",()=>l.update(aa.reset)),t.on("NodeChange keydown",H=>{requestAnimationFrame(()=>y(H))});let S=0;const R=bA(()=>l.update(aa.refresh),33);t.on("ScrollWindow",()=>{const H=Ki().left;H!==S&&(S=H,R.throttle()),l.updateMode()}),_m(t)&&t.on("ElementScroll",H=>{l.update(aa.refresh)});const I=Pl();I.set(fy(Xe.fromDom(t.getBody()),"load",H=>y(H.raw))),t.on("remove",()=>{I.clear()})};var lU=Object.freeze({__proto__:null,render:(t,r,l,h,p)=>{const{mainUi:y}=r,S=zs(),R=Xe.fromDom(p.targetNode),I=JB(t,R,r,h,S),H=Z_(t);mW(t);const X=()=>{if(S.isSet()){I.show();return}S.set(Qr.getHeader(y.outerContainer).getOrDie());const ie=oO(t);_m(t)?(Vy(R,y.mothership),Vy(R,r.popupUi.mothership)):jc(ie,y.mothership),jc(ie,r.dialogUi.mothership);const de=()=>{jB(t,r,l,h),Qr.setMenubar(y.outerContainer,mB(t,l)),I.show(),QB(t,R,I,H),t.nodeChanged()};H?t.once("SkinLoaded",de):de()};t.on("show",X),t.on("hide",I.hide),H||(t.on("focus",X),t.on("blur",I.hide)),t.on("init",()=>{(t.hasFocus()||H)&&X()}),fL(t,r);const K={show:X,hide:I.hide,setEnabled:ie=>{Fw(r,ie?"setEnabled":"setDisabled")},isEnabled:()=>!Do.isDisabled(y.outerContainer)};return{editorContainer:y.outerContainer.element.dom,api:K}}});const e5=()=>{const t=zs(),r=zs(),l=zs();return{dialogUi:t,popupUi:r,mainUi:l,getUiMotherships:()=>{const y=t.get().map(R=>R.mothership),S=r.get().map(R=>R.mothership);return y.fold(()=>S.toArray(),R=>S.fold(()=>[R],I=>Fs(R.element,I.element)?[R]:[R,I]))},lazyGetInOuterOrDie:(y,S)=>()=>l.get().bind(R=>S(R.outerContainer)).getOrDie(`Could not find ${y} element in OuterContainer`)}},cU="contexttoolbar-show",t5="contexttoolbar-hide",uU=t=>({hide:()=>ws(t,cl()),getValue:()=>En.getValue(t)}),n5=(t,r)=>Nt(wA,(l,h)=>{const p=t.get(l),y=uU(p);r.onAction(y,h.event.buttonApi)}),dU=(t,r,l)=>{const{primary:h,...p}=r.original,y=qt(Rw({...p,type:"button",onAction:oe}));return UB(y,l,[n5(t,r)])},AC=(t,r,l)=>{const{primary:h,...p}=r.original,y=qt(Mw({...p,type:"togglebutton",onAction:oe}));return XB(y,l,[n5(t,r)])},hU=t=>t.type==="contextformtogglebutton",gU=(t,r,l)=>hU(r)?AC(t,r,l):dU(t,r,l),fU=(t,r,l)=>{const h=dt(r,S=>dr(gU(t,S,l)));return{asSpecs:()=>dt(h,S=>S.asSpec()),findPrimary:S=>qo(r,(R,I)=>R.primary?V.from(h[I]).bind(H=>H.getOpt(S)).filter(ut(Do.isDisabled)):V.none())}},FM=(t,r)=>{const l=t.label.fold(()=>({}),y=>({"aria-label":y})),h=dr(Cg.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:l,selectOnFocus:!0,inputBehaviours:en([Do.config({disabled:()=>r.checkUiComponentContext("mode:design").shouldDisable}),vi(()=>r.checkUiComponentContext("mode:design")),po.config({mode:"special",onEnter:y=>p.findPrimary(y).map(S=>(Xg(S),!0)),onLeft:(y,S)=>(S.cut(),V.none()),onRight:(y,S)=>(S.cut(),V.none())})])})),p=fU(h,t.commands,r);return[{title:V.none(),items:[h.asSpec()]},{title:V.none(),items:p.asSpecs()}]},o5={renderContextForm:(t,r,l)=>eT({type:t,uid:Fn("context-toolbar"),initGroups:FM(r,l),onEscape:V.none,cyclicKeying:!0,providers:l}),buildInitGroups:FM},s5=(t,r,l)=>r.bottom-t.y>=l&&t.bottom-r.y>=l,mU=t=>{const r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){const l=tc(Xe.fromDom(t.startContainer),t.startOffset).element;return(ls(l)?ai(l):V.some(l)).filter(so).map(p=>p.dom.getBoundingClientRect()).getOr(r)}else return r},BM=t=>{const r=t.selection.getRng(),l=mU(r);if(t.inline){const h=Ki();return Br(h.left+l.left,h.top+l.top,l.width,l.height)}else{const h=Bc(Xe.fromDom(t.getBody()));return Br(h.x+l.left,h.y+l.top,l.width,l.height)}},pU=(t,r)=>r.filter(l=>Me(l)&&Ja(l)).map(Bc).getOrThunk(()=>BM(t)),bU=(t,r,l)=>{const h=Math.max(t.x+l,r.x),p=Math.min(t.right-l,r.right);return{x:h,width:p-h}},TC=(t,r,l,h,p,y)=>{const S=Xe.fromDom(t.getContainer()),R=Ca(S,".tox-editor-header").getOr(S),I=Hr(R),H=I.y>=r.bottom,X=h&&!H;if(t.inline&&X)return{y:Math.max(I.bottom+y,l.y),bottom:l.bottom};if(t.inline&&!X)return{y:l.y,bottom:Math.min(I.y-y,l.bottom)};const K=p==="line"?Hr(S):r;return X?{y:Math.max(I.bottom+y,l.y),bottom:Math.min(K.bottom-y,l.bottom)}:{y:Math.max(K.y+y,l.y),bottom:Math.min(I.y-y,l.bottom)}},HM=(t,r,l,h=0)=>{const p=su(window),y=Hr(Xe.fromDom(t.getContentAreaContainer())),S=ik(t)||ck(t)||gw(t),{x:R,width:I}=bU(y,p,h);if(t.inline&&!S)return Br(R,p.y,I,p.height);{const H=r.header.isPositionedAtTop(),{y:X,bottom:K}=TC(t,y,p,H,l,h);return Br(R,X,I,K-X)}},uT=12,r5={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},$M={maxHeightFunction:rf(),maxWidthFunction:Zu()},zM=(t,r)=>{const l=t.selection.getRng(),h=tc(Xe.fromDom(l.startContainer),l.startOffset);return l.startContainer===l.endContainer&&l.startOffset===l.endOffset-1&&Fs(h.element,r)},a5=(t,r,l)=>{const h=or(t,"position");Mt(t,"position",r);const p=l(t);return h.each(y=>Mt(t,"position",y)),p},VM=t=>t==="node",vU=(t,r,l,h,p)=>{const y=BM(t),S=h.lastElement().exists(R=>Fs(l,R));if(zM(t,l))return S?BD:lh;if(S)return a5(r,h.getMode(),()=>s5(y,Hr(r),-20)&&!h.isReposition()?T9:BD);{const R=h.getMode()==="fixed"?p.y+Ki().top:p.y,I=Xo(r)+uT;return R+I<=y.y?lh:sb}},mx=(t,r,l,h)=>{const p=I=>(H,X,K,ie,de)=>{const Ce=vU(t,ie,I,l,de),_e={...H,y:de.y,height:de.height};return{...Ce(_e,X,K,ie,de),alwaysFit:!0}},y=I=>VM(h)?[p(I)]:[];return r?{onLtr:I=>[Ei,$i,zi,Al,Vi,yr].concat(y(I)),onRtl:I=>[Ei,zi,$i,Vi,Al,yr].concat(y(I))}:{onLtr:I=>[yr,Ei,Al,$i,Vi,zi].concat(y(I)),onRtl:I=>[yr,Ei,Vi,zi,Al,$i].concat(y(I))}},dT=(t,r,l,h)=>r==="line"?{bubble:bd(uT,0,r5),layouts:{onLtr:()=>[B0],onRtl:()=>[ly]},overrides:$M}:{bubble:bd(0,uT,r5,1/uT),layouts:mx(t,l,h,r),overrides:$M},px=(t,r)=>{const l=zo(r,y=>y.predicate(t.dom)),{pass:h,fail:p}=As(l,y=>y.type==="contexttoolbar");return{contextToolbars:h,contextForms:p}},WM=t=>{if(t.length<=1)return t;{const r=y=>qs(t,S=>S.position===y),l=y=>zo(t,S=>S.position===y),h=r("selection"),p=r("node");if(h||p)if(p&&h){const y=l("node"),S=dt(l("selection"),R=>({...R,position:"node"}));return y.concat(S)}else return l(h?"selection":"node");else return l("line")}},UM=t=>{if(t.length<=1)return t;{const r=h=>We(t,p=>p.position===h);return r("selection").orThunk(()=>r("node")).orThunk(()=>r("line")).map(h=>h.position).fold(()=>[],h=>zo(t,p=>p.position===h))}},i5=(t,r,l)=>{const h=px(t,r);if(h.contextForms.length>0)return V.some({elem:t,toolbars:[h.contextForms[0]]});{const p=px(t,l);if(p.contextForms.length>0)return V.some({elem:t,toolbars:[p.contextForms[0]]});if(h.contextToolbars.length>0||p.contextToolbars.length>0){const y=WM(h.contextToolbars.concat(p.contextToolbars));return V.some({elem:t,toolbars:y})}else return V.none()}},hT=(t,r,l)=>t(r)?V.none():zc(r,h=>{if(so(h)){const{contextToolbars:p,contextForms:y}=px(h,l.inNodeScope),S=y.length>0?y:UM(p);return S.length>0?V.some({elem:h,toolbars:S}):V.none()}else return V.none()},t),l5=(t,r)=>{const l=Xe.fromDom(r.getBody()),h=S=>Fs(S,l),p=S=>!h(S)&&!Oa(l,S),y=Xe.fromDom(r.selection.getNode());return p(y)?V.none():i5(y,t.inNodeScope,t.inEditorScope).orThunk(()=>hT(h,y,t))},c5=(t,r)=>{const l={},h=[],p=[],y={},S={},R=(X,K)=>{const ie=qt(Lw(K));l[X]=ie,ie.launch.map(de=>{y["form:"+X]={...K.launch,type:de.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{r(ie)}}}),ie.scope==="editor"?p.push(ie):h.push(ie),S[X]=ie},I=(X,K)=>{v$(K).each(ie=>{K.scope==="editor"?p.push(ie):h.push(ie),S[X]=ie})},H=ds(t);return wt(H,X=>{const K=t[X];K.type==="contextform"?R(X,K):K.type==="contexttoolbar"&&I(X,K)}),{forms:l,inNodeScope:h,inEditorScope:p,lookupTable:S,formNavigators:y}},gT=Fn("forward-slide"),u5=Fn("backward-slide"),fT=Fn("change-slide-event"),XM="tox-pop--resizing",xU=t=>{const r=to([]);return Va.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:l=>{r.set([]),Va.getContent(l).each(h=>{Oo(h.element,"visibility")}),_r(l.element,XM),Oo(l.element,"width")},inlineBehaviours:en([Ko("context-toolbar-events",[Yg(vb(),(l,h)=>{h.event.raw.propertyName==="width"&&(_r(l.element,XM),Oo(l.element,"width"))}),Nt(fT,(l,h)=>{const p=l.element;Oo(p,"width");const y=pe(p);Va.setContent(l,h.event.contents),bi(p,XM);const S=pe(p);Mt(p,"width",y+"px"),Va.getContent(l).each(R=>{h.event.focus.bind(I=>(Fu(I),ic(p))).orThunk(()=>(po.focusIn(R),Dh(ga(p))))}),setTimeout(()=>{Mt(l.element,"width",S+"px")},0)}),Nt(gT,(l,h)=>{Va.getContent(l).each(p=>{r.set(r.get().concat([{bar:p,focus:Dh(ga(l.element))}]))}),Jn(l,fT,{contents:h.event.forwardContents,focus:V.none()})}),Nt(u5,(l,h)=>{ri(r.get()).each(p=>{r.set(r.get().slice(0,r.get().length-1)),Jn(l,fT,{contents:du(p.bar),focus:p.focus})})})]),po.config({mode:"special",onEscape:l=>ri(r.get()).fold(()=>t.onEscape(),h=>(ws(l,u5),V.some(!0)))})]),lazySink:()=>C.value(t.sink)})},bx="tox-pop--transition",d5=(t,r,l,h)=>{const p=h.backstage,y=p.shared,S=rs().deviceType.isTouch,R=zs(),I=zs(),H=zs(),X=el(xU({sink:l,onEscape:()=>(t.focus(),V.some(!0))})),K=()=>{const kn=H.get().getOr("node"),Vn=VM(kn)?1:0;return HM(t,y,kn,Vn)},ie=()=>!t.removed&&!(S()&&p.isContextMenuOpen()),de=kn=>Zr(da(kn,R.get(),Fs),!0),Ce=()=>{if(ie()){const kn=K(),Vn=Zr(H.get(),"node")?pU(t,R.get()):BM(t);return kn.height<=0||!s5(Vn,kn,.01)}else return!0},_e=()=>{R.clear(),I.clear(),H.clear(),Va.hide(X)},et=()=>{if(Va.isOpen(X)){const kn=X.element;Oo(kn,"display"),Ce()?Mt(kn,"display","none"):(I.set(0),Va.reposition(X))}},Fe=kn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[kn],behaviours:en([po.config({mode:"acyclic"}),Ko("pop-dialog-wrap-events",[ba(Vn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>po.focusIn(Vn))}),kh(Vn=>{t.shortcuts.remove("ctrl+F9")})])])}),Ke=Et(()=>c5(r,kn=>{const Vn=St([kn]);Jn(X,gT,{forwardContents:Fe(Vn)})})),Qe=(kn,Vn)=>iT(t,{buttons:kn,toolbar:Vn.items,allowToolbarGroups:!1},h.backstage,V.some(["form:"])),yt=(kn,Vn)=>o5.buildInitGroups(kn,Vn),St=kn=>{const{buttons:Vn}=t.ui.registry.getAll(),Es=Ke(),ua={...Vn,...Es.formNavigators},cr=zp(t)===xd.scrolling?xd.scrolling:xd.default,Kn=Ze(dt(kn,Zt=>Zt.type==="contexttoolbar"?Qe(ua,Zt):yt(Zt,y.providers)));return eT({type:cr,uid:Fn("context-toolbar"),initGroups:Kn,onEscape:V.none,cyclicKeying:!0,providers:y.providers})},un=(kn,Vn)=>{const Es=kn==="node"?y.anchors.node(Vn):y.anchors.cursor(),ua=dT(t,kn,S(),{lastElement:R.get,isReposition:()=>Zr(I.get(),0),getMode:()=>_l.getMode(l)});return me(Es,ua)},Pn=(kn,Vn)=>{if(Nn.cancel(),!ie())return;const Es=St(kn),ua=kn[0].position,cr=un(ua,Vn);H.set(ua),I.set(1);const Kn=X.element;Oo(Kn,"display"),de(Vn)||(_r(Kn,bx),_l.reset(l,X)),Va.showWithinBounds(X,Fe(Es),{anchor:cr,transition:{classes:[bx],mode:"placement"}},()=>V.some(K())),Vn.fold(R.clear,R.set),Ce()&&Mt(Kn,"display","none")};let Rt=!1;const Nn=bA(()=>{if(!(!t.hasFocus()||t.removed||Rt))if(yc(X.element,bx))Nn.throttle();else{const kn=Ke();l5(kn,t).fold(_e,Vn=>{Pn(Vn.toolbars,V.some(Vn.elem))})}},17);t.on("init",()=>{t.on("remove",_e),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",et),t.on("click keyup focus SetContent",Nn.throttle),t.on(t5,_e),t.on(cU,kn=>{const Vn=Ke();Yt(Vn.lookupTable,kn.toolbarKey).each(Es=>{Pn([Es],Qn(kn.target!==t,kn.target)),Va.getContent(X).each(po.focusIn)})}),t.on("focusout",kn=>{bv.setEditorTimeout(t,()=>{ic(l.element).isNone()&&ic(X.element).isNone()&&_e()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&_e()}),t.on("ExecCommand",({command:kn})=>{kn.toLowerCase()==="toggleview"&&_e()}),t.on("AfterProgressState",kn=>{kn.state?_e():t.hasFocus()&&Nn.throttle()}),t.on("dragstart",()=>{Rt=!0}),t.on("dragend drop",()=>{Rt=!1}),t.on("NodeChange",kn=>{ic(X.element).fold(Nn.throttle,oe)})})},yU=t=>{wt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],l=>{t.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:ju(t,l.cmd),onSetup:Yk(t,l.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:kc(t),onAction:ju(t,"JustifyNone")})},h5=(t,r)=>{const l=()=>{const h=r.getOptions(t),p=r.getCurrent(t).map(r.hash),y=zs();return dt(h,S=>({type:"togglemenuitem",text:r.display(S),onSetup:R=>{const I=X=>{X&&(y.on(K=>K.setActive(!1)),y.set(R)),R.setActive(X)};I(Zr(p,r.hash(S)));const H=r.watcher(t,S,I);return()=>{y.clear(),H()}},onAction:()=>r.setCurrent(t,S)}))};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:h=>h(l()),onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:l,onSetup:r.onMenuSetup})},wU=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:gP,hash:r=>_B(r,["fixed","relative","empty"]).getOr(r),display:Gt,watcher:(r,l,h)=>r.formatter.formatChanged("lineheight",h,!1,{value:l}).unbind,getCurrent:r=>V.from(r.queryCommandValue("LineHeight")),setCurrent:(r,l)=>r.execCommand("LineHeight",!1,l),onToolbarSetup:kc(t),onMenuSetup:kc(t)}),CU=t=>V.from(tP(t)).map(l=>({name:"language",text:"Language",icon:"language",getOptions:ce(l),hash:h=>Ln(h.customCode)?h.code:`${h.code}/${h.customCode}`,display:h=>h.title,watcher:(h,p,y)=>{var S;return h.formatter.formatChanged("lang",y,!1,{value:p.code,customValue:(S=p.customCode)!==null&&S!==void 0?S:null}).unbind},getCurrent:h=>{const p=Xe.fromDom(h.selection.getNode());return ll(p,y=>V.some(y).filter(so).bind(S=>_o(S,"lang").map(I=>{const H=_o(S,"data-mce-lang").getOrUndefined();return{code:I,customCode:H,title:""}})))},setCurrent:(h,p)=>h.execCommand("Lang",!1,p),onToolbarSetup:h=>{const p=Pl();return h.setActive(t.formatter.match("lang",{},void 0,!0)),p.set(t.formatter.formatChanged("lang",h.setActive,!0)),Xk(p.clear,kc(t)(h))},onMenuSetup:kc(t)})),SU=t=>{h5(t,wU(t)),CU(t).each(r=>h5(t,r))},g5=(t,r)=>{kM(t,r),AW(t,r),zW(t,r),CW(t,r),BW(t,r)},f5=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",r=>t.mode.get()===r),t.ui.registry.addContext("any",ot),t.ui.registry.addContext("formatting",r=>t.formatter.canApply(r)),t.ui.registry.addContext("insert",r=>t.schema.isValidChild(t.selection.getNode().tagName,r))},m5=t=>Mv(t,"NodeChange",r=>{r.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),p5=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:m5(t),onAction:ju(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:kc(t),onAction:ju(t,"indent")})},kU=t=>{p5(t)},YM=(t,r)=>l=>{l.setActive(r.get());const h=p=>{r.set(p.state),l.setActive(p.state)};return t.on("PastePlainTextToggle",h),Xk(()=>t.off("PastePlainTextToggle",h),kc(t)(l))},b5=t=>{const r=to(dP(t)),l=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:l,onSetup:YM(t,r)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:l,onSetup:YM(t,r)})},jM=(t,r)=>()=>{t.execCommand("mceToggleFormat",!1,r)},Sj=t=>{Pm.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(r,l)=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Yk(t,r.name),onAction:jM(t,r.name),shortcut:r.shortcut})});for(let r=1;r<=6;r++){const l="h"+r,h=`Access+${r}`;t.ui.registry.addToggleButton(l,{text:l.toUpperCase(),tooltip:"Heading "+r,onSetup:Yk(t,l),onAction:jM(t,l),shortcut:h})}},AU=t=>{Pm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:ju(t,r.action),shortcut:r.shortcut,context:r.context})}),Pm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:kc(t),onAction:ju(t,r.action)})})},TU=t=>{Pm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],r=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:ju(t,r.action),onSetup:Yk(t,r.name)})})},EU=t=>{Sj(t),AU(t),TU(t)},_U=t=>{Pm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:ju(t,r.action),context:r.context})}),Pm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onSetup:kc(t),onAction:ju(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:kc(t),onAction:jM(t,"code")})},OU=t=>{EU(t),_U(t)},mT=(t,r)=>Mv(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",l=>{l.setEnabled(!t.mode.isReadOnly()&&t.undoManager[r]())}),RU=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:mT(t,"hasUndo"),onAction:ju(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:mT(t,"hasRedo"),onAction:ju(t,"redo")})},DU=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:mT(t,"hasUndo"),onAction:ju(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:mT(t,"hasRedo"),onAction:ju(t,"redo"),shortcut:"Meta+Y"})},MU=t=>{RU(t),DU(t)},PU=t=>Mv(t,"VisualAid",r=>{r.setActive(t.hasVisual)}),LU=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:PU(t),onAction:ju(t,"mceToggleVisualAid"),context:"any"})},NU=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ju(t,"mceToggleVisualAid"),context:"any"})},IU=t=>{NU(t),LU(t)},v5=(t,r)=>{yU(t),OU(t),g5(t,r),MU(t),l8(t),IU(t),kU(t),SU(t),b5(t),f5(t)},FU=t=>Ot(t)?t.split(/[ ,]/):t,x5=t=>r=>r.options.get(t),BU=t=>{const r=t.options.register;r("contextmenu_avoid_overlap",{processor:"string",default:""}),r("contextmenu_never_use_native",{processor:"boolean",default:!1}),r("contextmenu",{processor:l=>l===!1?{value:[],valid:!0}:Ot(l)||xn(l,Ot)?{value:FU(l),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},y5=x5("contextmenu_never_use_native"),HU=x5("contextmenu_avoid_overlap"),$U=t=>w5(t).length===0,w5=t=>{const r=t.ui.registry.getAll().contextMenus,l=t.options.get("contextmenu");return t.options.isSet("contextmenu")?l:zo(l,h=>os(r,h))},EC=(t,r)=>({type:"makeshift",x:t,y:r}),zU=(t,r,l)=>EC(t.x+r,t.y+l),pT=t=>t.type==="longpress"||t.type.indexOf("touch")===0,VU=t=>{if(pT(t)){const r=t.touches[0];return EC(r.pageX,r.pageY)}else return EC(t.pageX,t.pageY)},WU=t=>{if(pT(t)){const r=t.touches[0];return EC(r.clientX,r.clientY)}else return EC(t.clientX,t.clientY)},ZM=(t,r)=>{const l=$p.DOM.getPos(t);return zU(r,l.x,l.y)},C5=(t,r)=>r.type==="contextmenu"||r.type==="longpress"?t.inline?VU(r):ZM(t.getContentAreaContainer(),WU(r)):GM(t),GM=t=>({type:"selection",root:Xe.fromDom(t.selection.getNode())}),UU=t=>({type:"node",node:V.some(Xe.fromDom(t.selection.getNode())),root:Xe.fromDom(t.getBody())}),S5=(t,r,l)=>{switch(l){case"node":return UU(t);case"point":return C5(t,r);case"selection":return GM(t)}},XU=(t,r,l,h,p,y)=>{const S=l(),R=S5(t,r,y);nx(S,Fh.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:V.none()}).map(I=>{r.preventDefault(),Va.showMenuAt(p,{anchor:R},{menu:{markers:Yp("normal")},data:I})})},YU={onLtr:()=>[Ei,$i,zi,Al,Vi,yr,lh,sb,gC,NA,hC,LA],onRtl:()=>[Ei,zi,$i,Vi,Al,yr,lh,sb,hC,LA,gC,NA]},jU=12,qM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},ZU=(t,r)=>{const l=t.selection;if(l.isCollapsed()||r.touches.length<1)return!1;{const h=r.touches[0],p=l.getRng();return Kb(t.getWin(),Cp.domRange(p)).exists(S=>S.left<=h.clientX&&S.right>=h.clientX&&S.top<=h.clientY&&S.bottom>=h.clientY)}},k5=t=>{const r=t.selection.getRng(),l=()=>{bv.setEditorTimeout(t,()=>{t.selection.setRng(r)},10),y()};t.once("touchend",l);const h=S=>{S.preventDefault(),S.stopImmediatePropagation()};t.on("mousedown",h,!0);const p=()=>y();t.once("longpresscancel",p);const y=()=>{t.off("touchend",l),t.off("longpresscancel",p),t.off("mousedown",h)}},GU=(t,r,l)=>{const h=S5(t,r,l);return{bubble:bd(0,l==="point"?jU:0,qM),layouts:YU,overrides:{maxWidthFunction:Zu(),maxHeightFunction:rf()},...h}},qU=(t,r,l,h,p,y,S)=>{const R=GU(t,r,y);nx(l,Fh.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!0,search:V.none()}).map(I=>{r.preventDefault();const H=S?qc.HighlightMenuAndItem:qc.HighlightNone;Va.showMenuWithinBounds(p,{anchor:R},{menu:{markers:Yp("normal"),highlightOnOpen:H},data:I,type:"horizontal"},()=>V.some(HM(t,h.shared,y==="node"?"node":"selection"))),t.dispatch(t5)})},KM=(t,r,l,h,p,y)=>{const S=rs(),R=S.os.isiOS(),I=S.os.isMacOS(),H=S.os.isAndroid(),X=S.deviceType.isTouch(),K=()=>!(H||R||I&&X),ie=()=>{const de=l();qU(t,r,de,h,p,y,K())};if((I||R)&&y!=="node"){const de=()=>{k5(t),ie()};ZU(t,r)?de():(t.once("selectionchange",de),t.once("touchend",()=>t.off("selectionchange",de)))}else ie()},A5=t=>Ot(t)?t==="|":t.type==="separator",bT={type:"separator"},T5=t=>{const r=l=>({text:l.text,icon:l.icon,enabled:l.enabled,shortcut:l.shortcut});if(Ot(t))return t;switch(t.type){case"separator":return bT;case"submenu":return{type:"nestedmenuitem",...r(t),getSubmenuItems:()=>{const h=t.getSubmenuItems();return Ot(h)?h:dt(h,T5)}};default:const l=t;return{type:"menuitem",...r(l),onAction:Wt(l.onAction)}}},E5=(t,r)=>{if(r.length===0)return t;const h=ri(t).filter(p=>!A5(p)).fold(()=>[],p=>[bT]);return t.concat(h).concat(r).concat([bT])},JM=(t,r,l)=>{const h=ms(r,(p,y)=>Yt(t,y.toLowerCase()).map(S=>{const R=S.update(l);if(Ot(R)&&Ne(Ms(R)))return E5(p,R.split(" "));if(Bo(R)&&R.length>0){const I=dt(R,T5);return E5(p,I)}else return p}).getOrThunk(()=>p.concat([y])),[]);return h.length>0&&A5(h[h.length-1])&&h.pop(),h},KU=(t,r)=>r.ctrlKey&&!y5(t),JU=t=>t.type==="longpress"||os(t,"touches"),_5=(t,r)=>!JU(r)&&(r.button!==2||r.target===t.getBody()&&r.pointerType===""),O5=(t,r)=>_5(t,r)?t.selection.getStart(!0):r.target,QU=(t,r)=>{const l=HU(t),h=_5(t,r)?"selection":"point";if(Ne(l)){const p=O5(t,r);return Yw(Xe.fromDom(p),l)?"node":h}else return h},R5=(t,r,l)=>{const p=rs().deviceType.isTouch,y=el(Va.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>t.focus(),onShow:()=>l.setContextMenuState(!0),onHide:()=>l.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:en([Ko("dismissContextMenu",[Nt(uu(),(I,H)=>{Gs.close(I),t.focus()})])])})),S=()=>Va.hide(y),R=I=>{if(y5(t)&&I.preventDefault(),KU(t,I)||$U(t))return;const H=QU(t,I),X=()=>{const ie=O5(t,I),de=t.ui.registry.getAll(),Ce=w5(t);return JM(de.contextMenus,Ce,ie)};(p()?KM:XU)(t,I,X,l,y,H)};t.on("init",()=>{const I="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(p()?"":" ResizeWindow");t.on(I,S),t.on("longpress contextmenu",R)})},QM=re.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),vT=t=>r=>r.translate(-t.left,-t.top),xT=t=>r=>r.translate(t.left,t.top),Im=t=>(r,l)=>ms(t,(h,p)=>p(h),Gr(r,l)),yT=(t,r,l)=>t.fold(Im([xT(l),vT(r)]),Im([vT(r)]),Im([])),vx=(t,r,l)=>t.fold(Im([xT(l)]),Im([]),Im([xT(r)])),D5=(t,r,l)=>t.fold(Im([]),Im([vT(l)]),Im([xT(r),vT(l)])),eX=(t,r,l,h,p,y)=>{const S=vx(t,p,y),R=vx(r,p,y);return Math.abs(S.left-R.left)<=l&&Math.abs(S.top-R.top)<=h},M5=(t,r,l,h,p,y)=>{const S=vx(t,p,y),R=vx(r,p,y),I=Math.abs(S.left-R.left),H=Math.abs(S.top-R.top);return Gr(I,H)},P5=(t,r,l)=>{const h=t.fold((p,y)=>({position:V.some("absolute"),left:V.some(p+"px"),top:V.some(y+"px")}),(p,y)=>({position:V.some("absolute"),left:V.some(p-l.left+"px"),top:V.some(y-l.top+"px")}),(p,y)=>({position:V.some("fixed"),left:V.some(p+"px"),top:V.some(y+"px")}));return{right:V.none(),bottom:V.none(),...h}},L5=(t,r,l)=>t.fold((h,p)=>wT(h+r,p+l),(h,p)=>lb(h+r,p+l),(h,p)=>uh(h+r,p+l)),e4=(t,r,l,h)=>{const p=(y,S)=>(R,I)=>{const H=y(r,l,h);return S(R.getOr(H.left),I.getOr(H.top))};return t.fold(p(D5,wT),p(vx,lb),p(yT,uh))},wT=QM.offset,lb=QM.absolute,uh=QM.fixed,t4=(t,r)=>{const l=In(t,r);return Ln(l)?NaN:parseInt(l,10)},tX=(t,r)=>{const l=t.element,h=t4(l,r.leftAttr),p=t4(l,r.topAttr);return isNaN(h)||isNaN(p)?V.none():V.some(Gr(h,p))},nX=(t,r,l)=>{const h=t.element;kt(h,r.leftAttr,l.left+"px"),kt(h,r.topAttr,l.top+"px")},oX=(t,r)=>{const l=t.element;Q(l,r.leftAttr),Q(l,r.topAttr)},sX=(t,r,l,h)=>tX(t,r).fold(()=>l,p=>uh(p.left+h.left,p.top+h.top)),N5=(t,r,l,h,p,y)=>{const S=sX(t,r,l,h),R=r.mustSnap?aX(t,r,S,p,y):iX(t,r,S,p,y),I=yT(S,p,y);return nX(t,r,I),R.fold(()=>({coord:uh(I.left,I.top),extra:V.none()}),H=>({coord:H.output,extra:H.extra}))},rX=(t,r)=>{oX(t,r)},I5=(t,r,l,h)=>qo(t,p=>{const y=p.sensor;return eX(r,y,p.range.left,p.range.top,l,h)?V.some({output:e4(p.output,r,l,h),extra:p.extra}):V.none()}),aX=(t,r,l,h,p)=>{const y=r.getSnapPoints(t);return I5(y,l,h,p).orThunk(()=>ms(y,(I,H)=>{const X=H.sensor,K=M5(l,X,H.range.left,H.range.top,h,p);return I.deltas.fold(()=>({deltas:V.some(K),snap:V.some(H)}),ie=>{const de=(K.left+K.top)/2,Ce=(ie.left+ie.top)/2;return de<=Ce?{deltas:V.some(K),snap:V.some(H)}:I})},{deltas:V.none(),snap:V.none()}).snap.map(I=>({output:e4(I.output,l,h,p),extra:I.extra})))},iX=(t,r,l,h,p)=>{const y=r.getSnapPoints(t);return I5(y,l,h,p)},lX=(t,r,l)=>({coord:e4(t.output,t.output,r,l),extra:t.extra});var cX=Object.freeze({__proto__:null,snapTo:(t,r,l,h)=>{const p=r.getTarget(t.element);if(r.repositionTarget){const y=Ra(t.element),S=Ki(y),R=y0(p),I=lX(h,S,R),H=P5(I.coord,S,R);js(p,H)}}});const n4="data-initial-z-index",uX=t=>{ai(t.element).filter(so).each(r=>{_o(r,n4).fold(()=>Oo(r,"z-index"),l=>Mt(r,"z-index",l)),Q(r,n4)})},dX=t=>{ai(t.element).filter(so).each(r=>{or(r,"z-index").each(l=>{kt(r,n4,l)}),Mt(r,"z-index",nr(t.element,"z-index"))})},o4=(t,r)=>{t.getSystem().addToGui(r),dX(r)},F5=t=>{uX(t),t.getSystem().removeFromGui(t)},B5=(t,r,l)=>t.getSystem().build(Tg.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:l}));var _C=Bi("snaps",[Lt("getSnapPoints"),Ws("onSensor"),Lt("leftAttr"),Lt("topAttr"),rt("lazyViewport",La),rt("mustSnap",!1)]);const s4=[rt("useFixed",Je),Lt("blockerClass"),rt("getTarget",Gt),rt("onDrag",oe),rt("repositionTarget",!0),rt("onDrop",oe),sa("getBounds",La),_C],hX=t=>Dr(or(t,"left"),or(t,"top"),or(t,"position"),(r,l,h)=>(h==="fixed"?uh:wT)(parseInt(r,10),parseInt(l,10))).getOrThunk(()=>{const r=bs(t);return lb(r.left,r.top)}),r4=(t,r,l,h,p)=>{const y=p.bounds,S=vx(r,l,h),R=fd(S.left,y.x,y.x+y.width-p.width),I=fd(S.top,y.y,y.y+y.height-p.height),H=lb(R,I);return r.fold(()=>{const X=D5(H,l,h);return wT(X.left,X.top)},ce(H),()=>{const X=yT(H,l,h);return uh(X.left,X.top)})},gX=(t,r,l,h,p,y,S)=>{const R=r.fold(()=>{const I=L5(l,y.left,y.top),H=yT(I,h,p);return uh(H.left,H.top)},I=>{const H=N5(t,I,l,y,h,p);return H.extra.each(X=>{I.onSensor(t,X)}),H.coord});return r4(t,R,h,p,S)},fX=(t,r,l,h)=>{const p=r.getTarget(t.element);if(r.repositionTarget){const y=Ra(t.element),S=Ki(y),R=y0(p),I=hX(p),H=gX(t,r.snaps,I,S,R,h,l),X=P5(H,S,R);js(p,X)}r.onDrag(t,p,h)},H5=(t,r)=>({bounds:t.getBounds(),height:xl(r.element),width:Se(r.element)}),a4=(t,r,l,h,p)=>{const y=l.update(h,p),S=l.getStartData().getOrThunk(()=>H5(r,t));y.each(R=>{fX(t,r,S,R)})},$5=(t,r,l,h)=>{r.each(F5),l.snaps.each(y=>{rX(t,y)});const p=l.getTarget(t.element);h.reset(),l.onDrop(t,p)},i4=t=>(r,l)=>{const h=p=>{l.setStartData(H5(r,p))};return Er([Nt(Ug(),p=>{l.getStartData().each(()=>h(p))}),...t(r,l,h)])},mX=t=>Er([Nt(Na(),t.forceDrop),Nt(jm(),t.drop),Nt(Xl(),(r,l)=>{t.move(l.event)}),Nt(Ym(),t.delayDrop)]);var pX=Object.freeze({__proto__:null,getData:t=>V.from(Gr(t.x,t.y)),getDelta:(t,r)=>Gr(r.left-t.left,r.top-t.top)});const z5=(t,r,l)=>[Nt(Na(),(h,p)=>{if(p.event.raw.button!==0)return;p.stop();const S=()=>$5(h,V.some(H),t,r),R=uN(S,200),I={drop:S,delayDrop:R.schedule,forceDrop:S,move:K=>{R.cancel(),a4(h,t,r,pX,K)}},H=B5(h,t.blockerClass,mX(I));(()=>{l(h),o4(h,H)})()})],bX=[...s4,ra("dragger",{handlers:i4(z5)})],vX=t=>Er([Nt(Du(),t.forceDrop),Nt(Zs(),t.drop),Nt(wa(),t.drop),Nt(Ch(),(r,l)=>{t.move(l.event)})]),xX=t=>{const r=t[0];return V.some(Gr(r.clientX,r.clientY))};var V5=Object.freeze({__proto__:null,getData:t=>{const l=t.raw.touches;return l.length===1?xX(l):V.none()},getDelta:(t,r)=>Gr(r.left-t.left,r.top-t.top)});const OC=(t,r,l)=>{const h=zs(),p=y=>{$5(y,h.get(),t,r),h.clear()};return[Nt(Du(),(y,S)=>{S.stop();const R=()=>p(y),I={drop:R,delayDrop:oe,forceDrop:R,move:K=>{a4(y,t,r,V5,K)}},H=B5(y,t.blockerClass,vX(I));h.set(H),(()=>{l(y),o4(y,H)})()}),Nt(Ch(),(y,S)=>{S.stop(),a4(y,t,r,V5,S.event)}),Nt(Zs(),(y,S)=>{S.stop(),p(y)}),Nt(wa(),p)]},yX=[...s4,ra("dragger",{handlers:i4(OC)})],wX=(t,r,l)=>[...z5(t,r,l),...OC(t,r,l)],CX=[...s4,ra("dragger",{handlers:i4(wX)})];var W5=Object.freeze({__proto__:null,mouse:bX,touch:yX,mouseOrTouch:CX}),SX=Object.freeze({__proto__:null,init:()=>{let t=V.none(),r=V.none();const l=()=>{t=V.none(),r=V.none()},h=(I,H)=>{const X=t.map(K=>I.getDelta(K,H));return t=V.some(H),X},p=(I,H)=>I.getData(H).bind(X=>h(I,X)),y=I=>{r=V.some(I)},S=()=>r,R=ce({});return rc({readState:R,reset:l,update:p,getStartData:S,setStartData:y})}});const Kv=Px({branchKey:"mode",branches:W5,name:"dragging",active:{events:(t,r)=>t.dragger.handlers(t,r)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:V.from(t.extra)})},state:SX,apis:cX}),l4=40,CT=l4/2,ST=(t,r,l,h,p,y)=>t.fold(()=>Kv.snap({sensor:lb(l-CT,h-CT),range:Gr(p,y),output:lb(V.some(l),V.some(h)),extra:{td:r}}),S=>{const R=l-CT,I=h-CT,H=l4,X=l4,K=S.element.dom.getBoundingClientRect();return Kv.snap({sensor:lb(R,I),range:Gr(H,X),output:lb(V.some(l-K.width/2),V.some(h-K.height/2)),extra:{td:r}})}),c4=(t,r,l)=>{const h=(p,y)=>p.exists(S=>Fs(S,y));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(p,y)=>{const S=y.td;h(r.get(),S)||(r.set(S),l(S))},mustSnap:!0}},U5=t=>dr(tl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:en([Kv.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),q1.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),kX=(t,r)=>{const l=to([]),h=to([]),p=to(!1),y=zs(),S=zs(),R=Pn=>{const Rt=Bc(Pn);return ST(de.getOpt(r),Pn,Rt.x,Rt.y,Rt.width,Rt.height)},I=()=>dt(l.get(),Pn=>R(Pn)),H=Pn=>{const Rt=Bc(Pn);return ST(Ce.getOpt(r),Pn,Rt.right,Rt.bottom,Rt.width,Rt.height)},X=()=>dt(h.get(),Pn=>H(Pn)),K=c4(I,y,Pn=>{S.get().each(Rt=>{t.dispatch("TableSelectorChange",{start:Pn,finish:Rt})})}),ie=c4(X,S,Pn=>{y.get().each(Rt=>{t.dispatch("TableSelectorChange",{start:Rt,finish:Pn})})}),de=U5(K),Ce=U5(ie),_e=el(de.asSpec()),et=el(Ce.asSpec()),Fe=(Pn,Rt,Nn,kn)=>{const Vn=Rt.dom.getBoundingClientRect();Oo(Pn.element,"display");const Es=Qa(Xe.fromDom(t.getBody())).dom.innerHeight,ua=Nn(Vn),cr=kn(Vn,Es);(ua||cr)&&Mt(Pn.element,"display","none")},Ke=(Pn,Rt,Nn,kn)=>{const Vn=Nn(Rt);Kv.snapTo(Pn,Vn),Fe(Pn,Rt,cr=>cr[kn]<0,(cr,Kn)=>cr[kn]>Kn)},Qe=Pn=>Ke(_e,Pn,R,"top"),yt=()=>y.get().each(Qe),St=Pn=>Ke(et,Pn,H,"bottom"),un=()=>S.get().each(St);if(rs().deviceType.isTouch()){const Pn=Rt=>dt(Rt,Xe.fromDom);t.on("TableSelectionChange",Rt=>{p.get()||(mg(r,_e),mg(r,et),p.set(!0));const Nn=Xe.fromDom(Rt.start),kn=Xe.fromDom(Rt.finish);y.set(Nn),S.set(kn),V.from(Rt.otherCells).each(Vn=>{l.set(Pn(Vn.upOrLeftCells)),h.set(Pn(Vn.downOrRightCells)),Qe(Nn),St(kn)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{yt(),un()}),t.on("TableSelectionClear",()=>{p.get()&&(pg(_e),pg(et),p.set(!1)),y.clear(),S.clear()})}};var AX=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const TX=(t,r)=>{const l=V.from(In(t,"id")).getOrThunk(()=>{const h=Fn("aria");return kt(r,"id",h),h});kt(t,"aria-describedby",l)},EX=t=>{Q(t,"aria-describedby")},_X=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",OX=(t,r,l)=>{var h;const p=(h=r.delimiter)!==null&&h!==void 0?h:"",y=(H,X,K)=>tl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":K}},components:[Ia(H)],action:ie=>{t.focus(),t.selection.select(X),t.nodeChanged()},buttonBehaviours:en([ni.config({...l.tooltips.getConfig({tooltipText:l.translate(["Select the {0} element",X.nodeName.toLowerCase()]),onShow:(ie,de)=>{TX(ie.element,de.element)},onHide:ie=>{EX(ie.element)}})}),Cd.button(l.isDisabled),vi(()=>l.checkUiComponentContext("any"))])}),S=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Ia(` ${p} `)]}),R=H=>ms(H,(X,K,ie)=>{const de=y(K.name,K.element,ie);return ie===0?X.concat([de]):X.concat([S(),de])},[]),I=H=>{const X=[];let K=H.length;for(;K-- >0;){const ie=H[K];if(ie.nodeType===1&&!_X(ie)){const de=OL(t,ie);if(de.isDefaultPrevented()||X.push({name:de.name,element:ie}),de.isPropagationStopped())break}}return X};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:en([po.config({mode:"flow",selector:"div[role=button]"}),Do.config({disabled:l.isDisabled}),vi(()=>l.checkUiComponentContext("any")),Sa.config({}),Wo.config({}),Ko("elementPathEvents",[ba((H,X)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>po.focusIn(H)),t.on("NodeChange",K=>{const ie=I(K.parents),de=ie.length>0?R(ie):[];Wo.set(H,de)})})])]),components:[]}};var cb;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(cb||(cb={}));const RX=(t,r,l,h,p)=>{const y={height:qv(h+r.top,xv(t),tk(t))};return l===cb.Both&&(y.width=qv(p+r.left,U_(t),yv(t))),y},X5=(t,r,l)=>{const h=Xe.fromDom(t.getContainer()),p=RX(t,r,l,Xo(h),pe(h));$s(p,(y,S)=>{vo(y)&&Mt(h,S,fx(y))}),W$(t)},DX=t=>{const r=uP(t);return r===!1?cb.None:r==="both"?cb.Both:cb.Vertical},kT=(t,r,l,h)=>{const y=Gr(l*20,h*20);return X5(t,y,r),V.some(!0)},MX=(t,r)=>{const l=DX(t);if(l===cb.None)return V.none();const h=l===cb.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return V.some(yd("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":r.translate(h),"data-mce-name":"resize-handle"},behaviours:[Kv.config({mode:"mouse",repositionTarget:!1,onDrag:(p,y,S)=>X5(t,S,l),blockerClass:"tox-blocker"}),po.config({mode:"special",onLeft:()=>kT(t,l,-1,0),onRight:()=>kT(t,l,1,0),onUp:()=>kT(t,l,0,-1),onDown:()=>kT(t,l,0,1)}),Sa.config({}),Io.config({}),ni.config(r.tooltips.getConfig({tooltipText:r.translate("Resize")}))]},r.icons))},PX=(t,r)=>{const l=(h,p,y)=>Wo.set(h,[Ia(r.translate(["{0} "+y,p[y]]))]);return tl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:en([Cd.button(r.isDisabled),vi(()=>r.checkUiComponentContext("any")),Sa.config({}),Wo.config({}),En.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Ko("wordcount-events",[ag(h=>{const p=En.getValue(h),y=p.mode==="words"?"characters":"words";En.setValue(h,{mode:y,count:p.count}),l(h,p.count,y)}),ba(h=>{t.on("wordCountUpdate",p=>{const{mode:y}=En.getValue(h);En.setValue(h,{mode:y,count:p.wordCount}),l(h,p.wordCount,y)})})])]),eventOrder:{[kl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Y5=(t,r)=>{const l=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",AX.trim()])},behaviours:en([Io.config({})])}]}),h=()=>{const R=UO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Ia(eh.translate(["Press {0} for help",R]))]}},p=()=>{const R=[];return t.hasPlugin("wordcount")&&R.push(PX(t,r)),J_(t)&&R.push(l()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:R}},y=()=>{const R=[],I=hP(t),H=cP(t),X=J_(t)||t.hasPlugin("wordcount"),K=()=>{const ie="tox-statusbar__text-container--flex-start",de="tox-statusbar__text-container--flex-end",Ce="tox-statusbar__text-container--space-around";if(I){const _e="tox-statusbar__text-container-3-cols";return!X&&!H?[_e,Ce]:X&&!H?[_e,de]:[_e,ie]}return[X&&!H?de:ie]};return H&&R.push(OX(t,{},r)),I&&R.push(h()),X&&R.push(p()),R.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...K()]},components:R}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const R=y(),I=MX(t,r);return R.concat(I.toArray())})()}},j5=(t,r)=>r.get().getOrDie(`UI for ${t} has not been rendered`),LX=(t,r)=>{const l=t.inline,h=l?lU:lT,p=Vp(t)?mV:Yv,y=e5(),S=zs(),R=zs(),I=zs(),ie=rs().deviceType.isTouch()?["tox-platform-touch"]:[],de=nO(t),Ce=zp(t),_e=dr({dom:{tag:"div",classes:["tox-anchorbar"]}}),et=dr({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Fe=()=>y.mainUi.get().map(mo=>mo.outerContainer).bind(Qr.getHeader),Ke=()=>C.fromOption(y.dialogUi.get().map(mo=>mo.sink),"UI has not been rendered"),Qe=()=>C.fromOption(y.popupUi.get().map(mo=>mo.sink),"(popup) UI has not been rendered"),yt=y.lazyGetInOuterOrDie("anchor bar",_e.getOpt),St=y.lazyGetInOuterOrDie("bottom anchor bar",et.getOpt),un=y.lazyGetInOuterOrDie("toolbar",Qr.getToolbar),Pn=y.lazyGetInOuterOrDie("throbber",Qr.getThrobber),Rt=oV({popup:Qe,dialog:Ke},t,yt,St),Nn=()=>{const mo={attributes:{[Z2]:de?_i.BottomToTop:_i.TopToBottom}},Zo=Qr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Rt.popup,onEscape:()=>{t.focus()}}),Vr=Qr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Rt.popup.shared.getSink,providers:Rt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Of=>{X$(t,Of)},type:Ce,lazyToolbar:un,lazyHeader:()=>Fe().getOrDie("Could not find header element"),...mo}),Rr=Qr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Rt.popup.shared.providers,onEscape:()=>{t.focus()},type:Ce}),Su=gw(t),Ua=ck(t),_d=ik(t),gc=ak(t),Od=kn(),Rd=Su||Ua||_d,Xh=()=>Su?[Rr]:Ua?[Vr]:[],LC=gc?[Od,Zo]:[Zo];return Qr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Rd?[]:["tox-editor-header--empty"]),...mo},components:Ze([_d?LC:[],Xh(),Nh(t)?[]:[_e.asSpec()]]),sticky:Vp(t),editor:t,sharedBackstage:Rt.popup.shared})},kn=()=>Qr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Vn=()=>{const mo=Qr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Zo=Qr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[mo,Zo]}},Es=()=>{const mo=oO(t),Zo=Fs(Ge(),mo)&&nr(mo,"display")==="grid",Vr={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(ie),attributes:{...eh.isRtl()?{dir:"rtl"}:{}}},behaviours:en([_l.config({useFixed:()=>p.isDocked(Fe)})])},Rr={dom:{styles:{width:document.body.clientWidth+"px"}},events:Er([Nt($f(),_d=>{Mt(_d.element,"width",document.body.clientWidth+"px")})])},Su=el(me(Vr,Zo?Rr:{})),Ua=bR(Su);return R.set(Ua),{sink:Su,mothership:Ua}},ua=()=>{const mo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(ie),attributes:{...eh.isRtl()?{dir:"rtl"}:{}}},behaviours:en([_l.config({useFixed:()=>p.isDocked(Fe),getBounds:()=>r.getPopupSinkBounds()})])},Zo=el(mo),Vr=bR(Zo);return I.set(Vr),{sink:Zo,mothership:Vr}},cr=()=>{const mo=Nn(),Zo=Vn(),Vr=Qr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Rt.popup}),Rr=Qr.parts.viewWrapper({backstage:Rt.popup}),Su=lP(t)&&!l?V.some(Y5(t,Rt.popup.shared.providers)):V.none(),Ua=Ze([de?[]:[mo],l?[]:[Zo],de?[mo]:[]]),_d=Qr.parts.editorContainer({components:Ze([Ua,l?[]:[et.asSpec()]])}),gc=sO(t),Od={role:"application",...eh.isRtl()?{dir:"rtl"}:{},...gc?{"aria-hidden":"true"}:{}},Rd=el(Qr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(l?["tox-tinymce-inline"]:[]).concat(de?["tox-tinymce--toolbar-bottom"]:[]).concat(ie),styles:{visibility:"hidden",...gc?{opacity:"0",border:"0"}:{}},attributes:Od},components:[_d,...l?[]:[Rr,...Su.toArray()],Vr],behaviours:en([vi(()=>Rt.popup.shared.providers.checkUiComponentContext("any")),Do.config({disableClass:"tox-tinymce--disabled"}),po.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Xh=bR(Rd);return S.set(Xh),{mothership:Xh,outerContainer:Rd}},Kn=mo=>{const Zo=fx(rU(t)),Vr=fx(aU(t));return t.inline||(Rl("div","width",Vr)&&Mt(mo.element,"width",Vr),Rl("div","height",Zo)?Mt(mo.element,"height",Zo):Mt(mo.element,"height","400px")),Zo},Zt=mo=>{t.addShortcut("alt+F9","focus menubar",()=>{Qr.focusMenubar(mo)}),t.addShortcut("alt+F10","focus toolbar",()=>{Qr.focusToolbar(mo)}),t.addCommand("ToggleToolbarDrawer",(Zo,Vr)=>{Vr!=null&&Vr.skipFocus?Qr.toggleToolbarDrawerWithoutFocusing(mo):Qr.toggleToolbarDrawer(mo)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Qr.isToolbarDrawerToggled(mo))},wn=mo=>{const{mainUi:Zo,popupUi:Vr,uiMotherships:Rr}=mo;Go(Y_(t),(r0,A4)=>{t.ui.registry.addGroupToolbarButton(A4,r0)});const{buttons:Su,menuItems:Ua,contextToolbars:_d,sidebars:gc,views:Od}=t.ui.registry.getAll(),Rd=uk(t),Xh={menuItems:Ua,menus:fP(t),menubar:sP(t),toolbar:Rd.getOrThunk(()=>ok(t)),allowToolbarGroups:Ce===xd.floating,buttons:Su,sidebar:gc,views:Od};Zt(Zo.outerContainer),_F(t,Zo.mothership,Rr),p.setup(t,Rt.popup.shared,Fe),v5(t,Rt.popup),R5(t,Rt.popup.shared.getSink,Rt.popup),JD(t),VF(t,Pn,Rt.popup.shared),d5(t,_d,Vr.sink,{backstage:Rt.popup}),kX(t,Vr.sink);const LC=t.getElement(),Of=Kn(Zo.outerContainer),k4={targetNode:LC,height:Of};return h.render(t,mo,Xh,Rt.popup,k4)},$o=mo=>(I.set(mo.mothership),mo),is=()=>{const mo=cr(),Zo=Es(),Vr=_m(t)?ua():$o(Zo);y.dialogUi.set(Zo),y.popupUi.set(Vr),y.mainUi.set(mo);const Rr={popupUi:Vr,dialogUi:Zo,mainUi:mo,uiMotherships:y.getUiMotherships()};return wn(Rr)};return{popups:{backstage:Rt.popup,getMothership:()=>j5("popups",I)},dialogs:{backstage:Rt.dialog,getMothership:()=>j5("dialogs",R)},renderUI:is}},NX=t=>t.dom.textContent,IX=(t,r)=>{const l=_o(t,"id").fold(()=>{const h=Fn("dialog-label");return kt(r,"id",h),h},Gt);kt(t,"aria-labelledby",l)},FX=ce([Lt("lazySink"),tr("dragBlockClass"),sa("getBounds",La),rt("useTabstopAt",ot),rt("firstTabstop",0),rt("eventOrder",{}),hl("modalBehaviours",[po]),Yl("onExecute"),cp("onEscape")]),u4={sketch:Gt},BX=ce([pu({name:"draghandle",overrides:(t,r)=>({behaviours:en([Kv.config({mode:"mouse",getTarget:l=>Hi(l,'[role="dialog"]').getOr(l),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])})}),Zl({schema:[Lt("dom")],name:"title"}),Zl({factory:u4,schema:[Lt("dom")],name:"close"}),Zl({factory:u4,schema:[Lt("dom")],name:"body"}),pu({factory:u4,schema:[Lt("dom")],name:"footer"}),zu({factory:{sketch:(t,r)=>({...t,dom:r.dom,components:r.components})},schema:[rt("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),rt("components",[])],name:"blocker"})]),HX=(t,r,l,h)=>{const p=zs(),y=Ce=>{p.set(Ce);const _e=t.lazySink(Ce).getOrDie(),et=h.blocker(),Fe=_e.getSystem().build({...et,components:et.components.concat([du(Ce)]),behaviours:en([Io.config({}),Ko("dialog-blocker-events",[Yg(vc(),()=>{Rg.isBlocked(Ce)?oe():po.focusIn(Ce)})])])});mg(_e,Fe),po.focusIn(Ce)},S=Ce=>{p.clear(),ai(Ce.element).each(_e=>{Ce.getSystem().getByDom(_e).each(et=>{pg(et)})})},R=Ce=>_n(Ce,t,"body"),I=Ce=>Ur(Ce,t,"footer"),H=(Ce,_e)=>{Rg.block(Ce,_e)},X=Ce=>{Rg.unblock(Ce)},K=Fn("modal-events"),ie={...t.eventOrder,[Mc()]:[K].concat(t.eventOrder["alloy.system.attached"]||[])},de=rs();return{uid:t.uid,dom:t.dom,components:r,apis:{show:y,hide:S,getBody:R,getFooter:I,setIdle:X,setBusy:H},eventOrder:ie,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:gl(t.modalBehaviours,[Wo.config({}),po.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Rg.config({getRoot:p.get}),Ko(K,[ba(Ce=>{const _e=_n(Ce,t,"title").element,et=NX(_e);de.os.isMacOS()&&vn(et)?kt(Ce.element,"aria-label",et):IX(Ce.element,_e)})])])}},ol=Hl({name:"ModalDialog",configFields:FX(),partFields:BX(),factory:HX,apis:{show:(t,r)=>{t.show(r)},hide:(t,r)=>{t.hide(r)},getBody:(t,r)=>t.getBody(r),getFooter:(t,r)=>t.getFooter(r),setBusy:(t,r,l)=>{t.setBusy(r,l)},setIdle:(t,r)=>{t.setIdle(r)}}}),Z5=fo([Oi,RO].concat(Zp)),$X=iu,RC=[Lk("button"),wd,Ji("align","end",["start","end"]),Pk,Bh,Vm("buttonType",["primary","secondary"]),ti("context","mode:design")],d4=[...RC,Om],h4=[Cl("type",["submit","cancel","custom"]),...d4],zX=[Cl("type",["menu"]),Rm,Ow,wd,Dc("items",Z5),...RC],VX=[...RC,Cl("type",["togglebutton"]),Ow,wd,Rm,Ti("active",!1)],WX=Ga("type",{submit:h4,cancel:h4,custom:h4,menu:zX,togglebutton:VX}),UX=[Oi,Om,Cl("level",["info","warn","error","success"]),eL,rt("url","")],XX=fo(UX),xx=t=>[Oi,t],YX=[Oi,Om,Bh,Lk("button"),wd,g$,Vm("buttonType",["primary","secondary","toolbar"]),Pk,ti("context","mode:design")],jX=fo(YX),yx=[Oi,RO],Dg=yx.concat([MO]),ZX=yx.concat([DO,Bh,ti("context","mode:design")]),GX=fo(ZX),qX=iu,g4=Dg.concat([rL("auto"),ti("context","mode:design")]),DC=fo(g4),f4=mb([kv,Om,eL]),AT=Dg.concat([ti("storageKey","default"),ti("context","mode:design")]),Jv=fo(AT),TT=An,G5=fo(Dg),q5=An,K5=yx.concat([ti("tag","textarea"),ki("scriptId"),ki("scriptUrl"),Ru("onFocus"),Um("settings",void 0)]),KX=yx.concat([ti("tag","textarea"),$c("init")]),JX=Df(t=>ka("customeditor.old",mi(KX),t).orThunk(()=>ka("customeditor.new",mi(K5),t))),QX=An,J5=Dg.concat([ti("context","mode:design")]),Q5=fo(J5),m4=Id(),eY=t=>[Oi,Pf("columns"),t],tY=[Oi,ki("html"),Ji("presets","presentation",["presentation","document"]),sa("onInit",oe),Ti("stretched",!1)],nY=fo(tY),eH=Dg.concat([Ti("border",!1),Ti("sandboxed",!0),Ti("streamContent",!1),Ti("transparent",!0)]),oY=fo(eH),sY=An,rY=fo(yx.concat([Ai("height")])),p4=fo([ki("url"),Lf("zoom"),Lf("cachedWidth"),Lf("cachedHeight")]),b4=Dg.concat([Ai("inputMode"),Ai("placeholder"),Ti("maximized",!1),Bh,ti("context","mode:design")]),aY=fo(b4),tH=An,iY=t=>[Oi,DO,t,Ji("align","start",["start","center","end"]),Ai("for")],lY=[Om,kv],nH=[Om,Dc("items",Hg("items",()=>oH))],oH=fb([fo(lY),fo(nH)]),cY=Dg.concat([Dc("items",oH),Bh,ti("context","mode:design")]),Qv=fo(cY),sH=An,uY=Dg.concat([bb("items",[Om,kv]),Wm("size",1),Bh,ti("context","mode:design")]),ET=fo(uY),wx=An,_T=Dg.concat([Ti("constrain",!0),Bh,ti("context","mode:design")]),rH=fo(_T),MC=fo([ki("width"),ki("height")]),yu=yx.concat([DO,Wm("min",0),Wm("max",0)]),OT=fo(yu),aH=ng,iH=[Oi,Dc("header",An),Dc("cells",Rc(An))],dY=fo(iH),hY=Dg.concat([Ai("placeholder"),Ti("maximized",!1),Bh,ti("context","mode:design")]),ub=fo(hY),Lj=An,lH=[Cl("type",["directory","leaf"]),QP,ki("id"),cd("menu",qD),Ai("customStateIcon"),Ai("customStateIconTooltip")],e0=fo(lH),RT=lH.concat([Dc("children",Hg("children",()=>og("type",{directory:v4,leaf:e0})))]),v4=fo(RT),fY=og("type",{directory:v4,leaf:e0}),mY=[Oi,Dc("items",fY),Ru("onLeafAction"),Ru("onToggleExpand"),yh("defaultExpandedIds",[],An),Ai("defaultSelectedId")],pY=fo(mY),bY=Dg.concat([Ji("filetype","file",["image","media","file"]),Bh,Ai("picker_text"),ti("context","mode:design")]),Cx=fo(bY),Nj=fo([kv,LO]),x4=t=>Fi("items","items",Te(),Rc(Df(r=>ka(`Checking item of ${t}`,y4,r).fold(l=>C.error(sg(l)),l=>C.value(l))))),y4=za(()=>og("type",{alertbanner:XX,bar:fo(xx(x4("bar"))),button:jX,checkbox:GX,colorinput:Jv,colorpicker:G5,dropzone:Q5,grid:fo(eY(x4("grid"))),iframe:oY,input:aY,listbox:Qv,selectbox:ET,sizeinput:rH,slider:OT,textarea:ub,urlinput:Cx,customeditor:JX,htmlpanel:nY,imagepreview:rY,collection:DC,label:fo(iY(x4("label"))),table:dY,tree:pY,panel:cH})),Ij=[Oi,rt("classes",[]),Dc("items",y4)],cH=fo(Ij),vY=[Lk("tab"),QP,Dc("items",y4)],PC=[Oi,bb("tabs",vY)],xY=fo(PC),yY=d4,uH=WX,wY=fo([ki("title"),ar("body",og("type",{panel:cH,tabpanel:xY})),ti("size","normal"),yh("buttons",[],uH),rt("initialData",{}),sa("onAction",oe),sa("onChange",oe),sa("onSubmit",oe),sa("onClose",oe),sa("onCancel",oe),sa("onTabChange",oe)]),Fj=t=>ka("dialog",wY,t),e=fo([Cl("type",["cancel","custom"]),...yY]),n=fo([ki("title"),ki("url"),Lf("height"),Lf("width"),Nf("buttons",e),sa("onAction",oe),sa("onCancel",oe),sa("onClose",oe),sa("onMessage",oe)]),s=t=>ka("dialog",n,t),i=t=>lo(t)?[t].concat(De(Ri(t),i)):Bo(t)?De(t,i):[],u=t=>Ot(t.type)&&Ot(t.name),f={checkbox:qX,colorinput:TT,colorpicker:q5,dropzone:m4,input:tH,iframe:sY,imagepreview:p4,selectbox:wx,sizeinput:MC,slider:aH,listbox:sH,size:MC,textarea:Lj,urlinput:Nj,customeditor:QX,collection:f4,togglemenuitem:$X},x=t=>V.from(f[t.type]),T=t=>zo(i(t),u),D=t=>{const r=T(t),l=De(r,h=>x(h).fold(()=>[],p=>[ar(h.name,p)]));return fo(l)},F=t=>{var r;const l=qt(Fj(t)),h=D(t),p=(r=t.initialData)!==null&&r!==void 0?r:{};return{internalDialog:l,dataValidator:h,initialData:p}},G={open:(t,r)=>{const l=F(r);return t(l.internalDialog,l.initialData,l.dataValidator)},openUrl:(t,r)=>{const l=qt(s(r));return t(l)},redial:t=>F(t)};var ee=Object.freeze({__proto__:null,events:(t,r)=>{const l=(h,p)=>{t.updateState.each(y=>{const S=y(h,p);r.set(S)}),t.renderComponents.each(y=>{const S=y(p,r.get());(t.reuseDom?P1:_3)(h,S)})};return Er([Nt(zd(),(h,p)=>{const y=p;if(!y.universal){const S=t.channel;No(y.channels,S)&&l(h,y.data)}}),ba((h,p)=>{t.initialData.each(y=>{l(h,y)})})])}}),ke=Object.freeze({__proto__:null,getState:(t,r,l)=>l}),be=[Lt("channel"),tr("renderComponents"),tr("updateState"),tr("initialData"),Ti("reuseDom",!0)],Ye=Object.freeze({__proto__:null,init:()=>{const t=to(V.none()),r=()=>t.set(V.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:r}}});const qe=ul({fields:be,name:"reflecting",active:ee,apis:ke,state:Ye}),tt=t=>{const r=[],l={};return $s(t,(h,p)=>{h.fold(()=>{r.push(p)},y=>{l[p]=y})}),r.length>0?C.error(r):C.value(l)},lt=(t,r,l,h)=>{const p=dr(zv.sketch(y=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:dt(t.items,S=>S9(y,S,r,l,h))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[p.asSpec()]}],behaviours:en([po.config({mode:"acyclic",useTabstopAt:ut(aC)}),rh.memento(p),az(p,{postprocess:y=>tt(y).fold(S=>(console.error(S),{}),Gt)}),Ko("dialog-body-panel",[Nt(vc(),(y,S)=>{y.getSystem().broadcastOn([xA],{newFocus:V.some(S.event.target)})})])])}},$t=(t,r)=>({uid:t.uid,dom:t.dom,components:t.components,events:cw(t.action),behaviours:gl(t.tabButtonBehaviours,[Io.config({}),po.config({mode:"execution",useSpace:!0,useEnter:!0}),En.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),nn=Zc({name:"TabButton",configFields:[rt("uid",void 0),Lt("value"),Fi("dom","dom",ht(()=>({attributes:{role:"tab",id:Fn("aria"),"aria-selected":"false"}})),au()),tr("action"),rt("domModification",{}),hl("tabButtonBehaviours",[Io,po,En]),Lt("view")],factory:$t}),On=ce([Lt("tabs"),Lt("dom"),rt("clickToDismiss",!1),hl("tabbarBehaviours",[dn,po]),ug(["tabClass","selectedClass"])]),_t=iv({factory:nn,name:"tabs",unit:"tab",overrides:t=>{const r=(h,p)=>{dn.dehighlight(h,p),Jn(h,BC(),{tabbar:h,button:p})},l=(h,p)=>{dn.highlight(h,p),Jn(h,FC(),{tabbar:h,button:p})};return{action:h=>{const p=h.getSystem().getByUid(t.uid).getOrDie(),y=dn.isHighlighted(p,h);(y&&t.clickToDismiss?r:y?oe:l)(p,h)},domModification:{classes:[t.markers.tabClass]}}}}),vt=ce([_t]),Ut=(t,r,l,h)=>({uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:gl(t.tabbarBehaviours,[dn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(p,y)=>{kt(y.element,"aria-selected","true")},onDehighlight:(p,y)=>{kt(y.element,"aria-selected","false")}}),po.config({mode:"flow",getInitial:p=>dn.getHighlighted(p).map(y=>y.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Dn=Hl({name:"Tabbar",configFields:On(),partFields:vt(),factory:Ut}),ho=(t,r)=>({uid:t.uid,dom:t.dom,behaviours:gl(t.tabviewBehaviours,[Wo.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Cs=Zc({name:"Tabview",configFields:[hl("tabviewBehaviours",[Wo])],factory:ho}),Ss=ce([rt("selectFirst",!0),Ws("onChangeTab"),Ws("onDismissTab"),rt("tabs",[]),hl("tabSectionBehaviours",[])]),xr=Zl({factory:Dn,schema:[Lt("dom"),xh("markers",[Lt("tabClass"),Lt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Pr=Zl({factory:Cs,name:"tabview"}),di=ce([xr,Pr]),Kl=(t,r,l,h)=>{const p=S=>{const R=En.getValue(S);Ur(S,t,"tabview").each(I=>{We(t.tabs,X=>X.value===R).each(X=>{const K=X.view();_o(S.element,"id").each(ie=>{kt(I.element,"aria-labelledby",ie)}),Wo.set(I,K),t.onChangeTab(I,S,K)})})},y=(S,R)=>{Ur(S,t,"tabbar").each(I=>{R(I).each(Xg)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:h1(t.tabSectionBehaviours),events:Er(Ze([t.selectFirst?[ba((S,R)=>{y(S,dn.getFirst)})]:[],[Nt(FC(),(S,R)=>{const I=R.event.button;p(I)}),Nt(BC(),(S,R)=>{const I=R.event.button;t.onDismissTab(S,I)})]])),apis:{getViewItems:S=>Ur(S,t,"tabview").map(R=>Wo.contents(R)).getOr([]),showTab:(S,R)=>{y(S,H=>{const X=dn.getCandidates(H);return We(X,ie=>En.getValue(ie)===R).filter(ie=>!dn.isHighlighted(H,ie))})}}}},xi=Hl({name:"TabSection",configFields:Ss(),partFields:di(),factory:Kl,apis:{getViewItems:(t,r)=>t.getViewItems(r),showTab:(t,r,l)=>{t.showTab(r,l)}}}),fn=(t,r,l)=>dt(t,(h,p)=>{Wo.set(l,t[p].view());const y=r.dom.getBoundingClientRect();return Wo.set(l,[]),y.height}),io=t=>ur(Cr(t,(r,l)=>r>l?-1:r<l?1:0)),ir=(t,r,l)=>{const h=Di(t).dom,p=Hi(t,".tox-dialog-wrap").getOr(t),y=nr(p,"position")==="fixed";let S;y?S=Math.max(h.clientHeight,window.innerHeight):S=Math.max(h.offsetHeight,h.scrollHeight);const R=Xo(r),H=r.dom.offsetLeft>=l.dom.offsetLeft+pe(l)?Math.max(Xo(l),R):R,X=parseInt(nr(t,"margin-top"),10)||0,K=parseInt(nr(t,"margin-bottom"),10)||0,de=Xo(t)+X+K-H;return S-de},Tn=(t,r)=>{ur(t).each(l=>xi.showTab(r,l.value))},So=(t,r)=>{Mt(t,"height",r+"px"),Mt(t,"flex-basis",r+"px")},ko=(t,r,l)=>{Hi(t,'[role="dialog"]').each(h=>{Ca(h,'[role="tablist"]').each(p=>{l.get().map(y=>(Mt(r,"height","0"),Mt(r,"flex-basis","0"),Math.min(y,ir(h,r,p)))).each(y=>{So(r,y)})})})},yn=t=>Ca(t,'[role="tabpanel"]'),ks=t=>{const r=zs();return{extraEvents:[ba(p=>{const y=p.element;yn(y).each(S=>{Mt(S,"visibility","hidden"),p.getSystem().getByDom(S).toOptional().each(R=>{const I=fn(t,S,R);io(I).fold(r.clear,r.set)}),ko(y,S,r),Oo(S,"visibility"),Tn(t,p),requestAnimationFrame(()=>{ko(y,S,r)})})}),Nt($f(),p=>{const y=p.element;yn(y).each(S=>{ko(y,S,r)})}),Nt(vN,(p,y)=>{const S=p.element;yn(S).each(R=>{const I=Dh(ga(R));Mt(R,"visibility","hidden");const H=or(R,"height").map(ie=>parseInt(ie,10));Oo(R,"height"),Oo(R,"flex-basis");const X=R.dom.getBoundingClientRect().height;H.forall(ie=>X>ie)?(r.set(X),ko(S,R,r)):H.each(ie=>{So(R,ie)}),Oo(R,"visibility"),I.each(Fu)})})],selectFirst:!1}},Os="send-data-to-section",Ui="send-data-to-view",Yr=(t,r,l,h)=>{const p=to({}),y=X=>{const K=En.getValue(X),ie=tt(K).getOr({}),de=p.get(),Ce=me(de,ie);p.set(Ce)},S=X=>{const K=p.get();En.setValue(X,K)},R=to(null),I=dt(t.tabs,X=>({value:X.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Ia(l.shared.providers.translate(X.title))],view:()=>[zv.sketch(K=>({dom:{tag:"div",classes:["tox-form"]},components:dt(X.items,ie=>S9(K,ie,r,l,h)),formBehaviours:en([po.config({mode:"acyclic",useTabstopAt:ut(aC)}),Ko("TabView.form.events",[ba(S),kh(y)]),Uc.config({channels:ts([{key:Os,value:{onReceive:y}},{key:Ui,value:{onReceive:S}}])})])}))]})),H=ks(I);return xi.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(X,K,ie)=>{const de=En.getValue(K);Jn(X,bN,{name:de,oldName:R.get()}),R.set(de)},tabs:I,components:[xi.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Dn.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:en([Sa.config({})])}),xi.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:H.selectFirst,tabSectionBehaviours:en([Ko("tabpanel",H.extraEvents),po.config({mode:"acyclic"}),Bs.config({find:X=>ur(xi.getViewItems(X))}),Vv(V.none(),X=>(X.getSystem().broadcastOn([Os],{}),p.get()),(X,K)=>{p.set(K),X.getSystem().broadcastOn([Ui],{})})])})},Jl=(t,r,l,h,p,y)=>{const S=H=>{const X=H.body;switch(X.type){case"tabpanel":return[Yr(X,H.initialData,h,y)];default:return[lt(X,H.initialData,h,y)]}},R=(H,X)=>V.some({isTabPanel:()=>X.body.type==="tabpanel"}),I={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...l.map(H=>({id:H})).getOr({}),...p?I:{}}},components:[],behaviours:en([rh.childAt(0),qe.config({channel:`${nD}-${r}`,updateState:R,renderComponents:S,initialData:t})])}},wu=(t,r,l,h,p,y)=>Jl(t,r,V.some(l),h,p,y),Mg=(t,r,l,h)=>{const p=Jl(t,r,V.none(),l,!1,h);return ol.parts.body(p)},Tc=t=>{const r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[eD(V.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:en([Sa.config({}),Io.config({})])})]}],behaviours:en([po.config({mode:"acyclic",useTabstopAt:ut(aC)})])};return ol.parts.body(r)},Ed=vv.deviceType.isTouch(),dh=(t,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}),dc=(t,r)=>ol.parts.close(tl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:en([Sa.config({})])})),Cu=()=>ol.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),ao=(t,r)=>ol.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:xg(`<p>${TP(r.translate(t))}</p>`)}]}]}),Js=t=>ol.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),oi=(t,r)=>[Tg.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Tg.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],Xi=t=>{const r="tox-dialog",l=r+"-wrap",h=l+"__backdrop",p=r+"__disable-scroll";return ol.sketch({lazySink:t.lazySink,onEscape:y=>(t.onEscape(y),V.some(!0)),useTabstopAt:y=>!aC(y),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[r].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:xg(`<div class="${l}"></div>`),components:[{dom:{tag:"div",classes:Ed?[h,h+"--opaque"]:[h]}}]}},dragBlockClass:l,modalBehaviours:en([Io.config({}),Ko("dialog-events",t.dialogEvents.concat([Yg(vc(),(y,S)=>{Rg.isBlocked(y)?oe():po.focusIn(y)}),Nt(wb(),(y,S)=>{y.getSystem().broadcastOn([xA],{newFocus:S.event.newFocus})})])),Ko("scroll-lock",[ba(()=>{bi(Ge(),p)}),kh(()=>{_r(Ge(),p)})]),...t.extraBehaviours]),eventOrder:{[kl()]:["dialog-events"],[Mc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[cu()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},pl=t=>tl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:en([Sa.config({}),ni.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[yd("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:r=>{ws(r,Qp)}}),Yi=(t,r,l,h)=>{const p=y=>[Ia(h.translate(y.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...l.map(y=>({id:y})).getOr({})}},components:[],behaviours:en([qe.config({channel:`${fI}-${r}`,initialData:t,renderComponents:p})])}},Wa=()=>({dom:xg('<div class="tox-dialog__draghandle"></div>')}),qa=(t,r,l,h)=>Tg.sketch({dom:xg('<div class="tox-dialog__header"></div>'),components:[Yi(t,r,V.some(l),h),Wa(),pl(h)],containerBehaviours:en([Kv.config({mode:"mouse",blockerClass:"blocker",getTarget:p=>Oh(p,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Qc=(t,r,l)=>{const h=ol.parts.title(Yi(t,r,V.none(),l)),p=ol.parts.draghandle(Wa()),y=ol.parts.close(pl(l)),S=[h].concat(t.draggable?[p]:[]).concat([y]);return Tg.sketch({dom:xg('<div class="tox-dialog__header"></div>'),components:S})},hh=(t,r,l)=>Qc({title:l.shared.providers.translate(t),draggable:l.dialog.isDraggableModal()},r,l.shared.providers),Pg=(t,r,l,h)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":l.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${h.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:xg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Uh=(t,r,l)=>({onClose:()=>l.closeWindow(),onBlock:h=>{const p=Ca(t().element,".tox-dialog__header").map(y=>Xo(y));ol.setBusy(t(),(y,S)=>Pg(h.message,S,r,p))},onUnblock:()=>{ol.setIdle(t())}}),t0="tox-dialog--fullscreen",db="tox-dialog--width-lg",Fm="tox-dialog--width-md",Gu=t=>{switch(t){case"large":return V.some(db);case"medium":return V.some(Fm);default:return V.none()}},Bm=(t,r)=>{const l=Xe.fromDom(r.element.dom);yc(l,t0)||(Wd(l,[db,Fm]),Gu(t).each(h=>bi(l,h)))},Sx=(t,r)=>{const l=Xe.fromDom(t.element.dom),h=UC(l),p=We(h,y=>y===db||y===Fm).or(Gu(r));R4(l,[t0,...p.toArray()])},n0=(t,r,l)=>el(Xi({...t,firstTabstop:1,lazySink:l.shared.getSink,extraBehaviours:[sC({}),...t.extraBehaviours],onEscape:h=>{ws(h,Qp)},dialogEvents:r,eventOrder:{[zd()]:[qe.name(),Uc.name()],[Mc()]:["scroll-lock",qe.name(),"messages","dialog-events","alloy.base.behaviour"],[cu()]:["alloy.base.behaviour","dialog-events","messages",qe.name(),"scroll-lock"]}})),DT=(t,r={})=>{const l=h=>{const p=dt(h.items,y=>{const S=Yt(r,y.name).getOr(to(!1));return{...y,storage:S}});return{...h,items:p}};return dt(t,h=>h.type==="menu"?l(h):h)},o0=t=>ms(t,(r,l)=>l.type==="menu"?ms(l.items,(p,y)=>(p[y.name]=y.storage,p),r):r,{}),w4=(t,r)=>[p0(vc(),mz),t(Zw,(l,h,p,y)=>{am(y.element)&&Dh(ga(y.element)).each(pp),r.onClose(),h.onClose()}),t(Qp,(l,h,p,y)=>{h.onCancel(l),ws(y,Zw)}),Nt(yR,(l,h)=>r.onUnblock()),Nt(nA,(l,h)=>r.onBlock(h.event))],dH=(t,r)=>{const l=(p,y)=>Nt(p,(S,R)=>{h(S,(I,H)=>{y(t(),I,R.event,S)})}),h=(p,y)=>{qe.getState(p).get().each(S=>{y(S,p)})};return[...w4(l,r),l(Sf,(p,y,S)=>{y.onAction(p,{name:S.name})})]},hc=(t,r,l)=>{const h=(y,S)=>Nt(y,(R,I)=>{p(R,(H,X)=>{S(t(),H,I.event,R)})}),p=(y,S)=>{qe.getState(y).get().each(R=>{S(R.internalDialog,y)})};return[...w4(h,r),h(G1,(y,S)=>S.onSubmit(y)),h(vu,(y,S,R)=>{S.onChange(y,{name:R.name})}),h(Sf,(y,S,R,I)=>{const H=()=>I.getSystem().isConnected()?po.focusIn(I):void 0,X=de=>kr(de,"disabled")||_o(de,"aria-disabled").exists(Ce=>Ce==="true"),K=ga(I.element),ie=Dh(K);S.onAction(y,{name:R.name,value:R.value}),Dh(K).fold(H,de=>{X(de)||ie.exists(Ce=>Oa(de,Ce)&&X(Ce))?H():l().toOptional().filter(Ce=>!Oa(Ce.element,de)).each(H)})}),h(bN,(y,S,R)=>{S.onTabChange(y,{newTabName:R.name,oldTabName:R.oldName})}),kh(y=>{const S=t();En.setValue(y,S.getData())})]},gh=(t,r)=>sx(t,t.type,r),MT=(t,r,l)=>We(r,h=>h.name===l).bind(h=>h.memento.getOpt(t)),bt=(t,r)=>{const l=r.map(R=>R.footerButtons).getOr([]),h=As(l,R=>R.align==="start"),p=(R,I)=>Tg.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${R}`]},components:dt(I,H=>H.memento.asSpec())}),y=p("start",h.pass),S=p("end",h.fail);return[y,S]},pt=(t,r,l)=>{const h=(p,y)=>{const S=dt(y.buttons,I=>{const H=dr(gh(I,l));return{name:I.name,align:I.align,memento:H}}),R=I=>MT(p,S,I);return V.some({lookupByName:R,footerButtons:S})};return{dom:xg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:en([qe.config({channel:`${mI}-${r}`,initialData:t,updateState:h,renderComponents:bt})])}},mn=(t,r,l)=>pt(t,r,l),sn=(t,r,l)=>ol.parts.footer(pt(t,r,l)),Co=(t,r)=>{if(t.getRoot().getSystem().isConnected()){const h=Bs.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return zv.getField(h,r).orThunk(()=>t.getFooter().bind(S=>qe.getState(S).get()).bind(S=>S.lookupByName(r)))}else return V.none()},lr=(t,r)=>{const l=t.getRoot();return qe.getState(l).get().map(h=>qt(ka("data",h.dataValidator,r))).getOr(r)},si=(t,r,l)=>{const h=Ce=>{const _e=t.getRoot();_e.getSystem().isConnected()&&Ce(_e)},de={getData:()=>{const Ce=t.getRoot(),_e=Ce.getSystem().isConnected()?t.getFormWrapper():Ce,et=En.getValue(_e),Fe=Go(l,Ke=>Ke.get());return{...et,...Fe}},setData:Ce=>{h(_e=>{const et=de.getData(),Fe=me(et,Ce),Ke=lr(t,Fe),Qe=t.getFormWrapper();En.setValue(Qe,Ke),$s(l,(yt,St)=>{os(Fe,St)&&yt.set(Fe[St])})})},setEnabled:(Ce,_e)=>{Co(t,Ce).each(_e?Do.enable:Do.disable)},focus:Ce=>{Co(t,Ce).each(Io.focus)},block:Ce=>{if(!Ot(Ce))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");h(_e=>{Jn(_e,nA,{message:Ce})})},unblock:()=>{h(Ce=>{ws(Ce,yR)})},showTab:Ce=>{h(_e=>{const et=t.getBody();qe.getState(et).get().exists(Ke=>Ke.isTabPanel())&&Bs.getCurrent(et).each(Ke=>{xi.showTab(Ke,Ce)})})},redial:Ce=>{h(_e=>{const et=t.getId(),Fe=r(Ce),Ke=DT(Fe.internalDialog.buttons,l);_e.getSystem().broadcastOn([`${vA}-${et}`],Fe),_e.getSystem().broadcastOn([`${fI}-${et}`],Fe.internalDialog),_e.getSystem().broadcastOn([`${nD}-${et}`],Fe.internalDialog),_e.getSystem().broadcastOn([`${mI}-${et}`],{...Fe.internalDialog,buttons:Ke}),de.setData(Fe.initialData)})},close:()=>{h(Ce=>{ws(Ce,Zw)})},toggleFullscreen:t.toggleFullscreen};return de},Lg=(t,r,l)=>{const h=Fn("dialog"),p=t.internalDialog,y=hh(p.title,h,l),S=to(p.size),R=Qe=>Co(Fe,Qe),I=Gu(S.get()).toArray(),H=(Qe,yt)=>(S.set(yt.internalDialog.size),Bm(yt.internalDialog.size,Qe),V.some(yt)),X=Mg({body:p.body,initialData:p.initialData},h,l,R),K=DT(p.buttons),ie=o0(K),de=Qn(K.length!==0,sn({buttons:K},h,l)),Ce=hc(()=>Ke,Uh(()=>et,l.shared.providers,r),l.shared.getSink),_e={id:h,header:y,body:X,footer:de,extraClasses:I,extraBehaviours:[qe.config({channel:`${vA}-${h}`,updateState:H,initialData:t})],extraStyles:{}},et=n0(_e,Ce,l),Fe=(()=>{const Qe=()=>{const St=ol.getBody(et);return Bs.getCurrent(St).getOr(St)},yt=()=>{Sx(et,S.get())};return{getId:ce(h),getRoot:ce(et),getBody:()=>ol.getBody(et),getFooter:()=>ol.getFooter(et),getFormWrapper:Qe,toggleFullscreen:yt}})(),Ke=si(Fe,r.redial,ie);return{dialog:et,instanceApi:Ke}},fh=(t,r,l,h=!1,p)=>{const y=Fn("dialog"),S=Fn("dialog-label"),R=Fn("dialog-content"),I=t.internalDialog,H=Nn=>Co(Pn,Nn),X=to(I.size),K=Gu(X.get()).toArray(),ie=(Nn,kn)=>(X.set(kn.internalDialog.size),Bm(kn.internalDialog.size,Nn),p(),V.some(kn)),de=dr(qa({title:I.title,draggable:!0},y,S,l.shared.providers)),Ce=dr(wu({body:I.body,initialData:I.initialData},y,R,l,h,H)),_e=DT(I.buttons),et=o0(_e),Fe=Qn(_e.length!==0,dr(mn({buttons:_e},y,l))),Ke=hc(()=>Rt,{onBlock:Nn=>{Rg.block(St,(kn,Vn)=>{const Es=de.getOpt(St).map(ua=>Xo(ua.element));return Pg(Nn.message,Vn,l.shared.providers,Es)})},onUnblock:()=>{Rg.unblock(St)},onClose:()=>r.closeWindow()},l.shared.getSink),Qe="tox-dialog-inline",yt=rs().os,St=el({dom:{tag:"div",classes:["tox-dialog",Qe,...K],attributes:{role:"dialog",...yt.isMacOS()?{"aria-label":I.title}:{"aria-labelledby":S}}},eventOrder:{[zd()]:[qe.name(),Uc.name()],[kl()]:["execute-on-form"],[Mc()]:["reflecting","execute-on-form"]},behaviours:en([po.config({mode:"cyclic",onEscape:Nn=>(ws(Nn,Zw),V.some(!0)),useTabstopAt:Nn=>!aC(Nn)&&(Ks(Nn)!=="button"||In(Nn,"disabled")!=="disabled"),firstTabstop:1}),qe.config({channel:`${vA}-${y}`,updateState:ie,initialData:t}),Io.config({}),Ko("execute-on-form",Ke.concat([Yg(vc(),(Nn,kn)=>{po.focusIn(Nn)}),Nt(wb(),(Nn,kn)=>{Nn.getSystem().broadcastOn([xA],{newFocus:kn.event.newFocus})})])),Rg.config({getRoot:()=>V.some(St)}),Wo.config({}),sC({})]),components:[de.asSpec(),Ce.asSpec(),...Fe.map(Nn=>Nn.asSpec()).toArray()]}),un=()=>{Sx(St,X.get())},Pn={getId:ce(y),getRoot:ce(St),getFooter:()=>Fe.map(Nn=>Nn.get(St)),getBody:()=>Ce.get(St),getFormWrapper:()=>{const Nn=Ce.get(St);return Bs.getCurrent(Nn).getOr(Nn)},toggleFullscreen:un},Rt=si(Pn,r.redial,et);return{dialog:St,instanceApi:Rt}};var s0=tinymce.util.Tools.resolve("tinymce.util.URI");const hH=t=>{const r=S=>{t.getSystem().isConnected()&&S(t)};return{block:S=>{if(!Ot(S))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(R=>{Jn(R,nA,{message:S})})},unblock:()=>{r(S=>{ws(S,yR)})},close:()=>{r(S=>{ws(S,Zw)})},sendMessage:S=>{r(R=>{R.getSystem().broadcastOn([oD],S)})}}},gH=["insertContent","setContent","execCommand","close","block","unblock"],C4=t=>lo(t)&&gH.indexOf(t.mceAction)!==-1,fH=t=>!C4(t)&&lo(t)&&os(t,"mceAction"),Hm=(t,r,l)=>{switch(l.mceAction){case"insertContent":t.insertContent(l.content);break;case"setContent":t.setContent(l.content);break;case"execCommand":const h=Tt(l.ui)?l.ui:!1;t.execCommand(l.cmd,h,l.value);break;case"close":r.close();break;case"block":r.block(l.message);break;case"unblock":r.unblock();break}},mH=(t,r,l,h)=>{const p=Fn("dialog"),y=hh(t.title,p,h),S=Tc(t),R=t.buttons.bind(Qe=>Qe.length===0?V.none():V.some(sn({buttons:Qe},p,h))),I=dH(()=>Ke,Uh(()=>Fe,h.shared.providers,r)),H={...t.height.fold(()=>({}),Qe=>({height:Qe+"px","max-height":Qe+"px"})),...t.width.fold(()=>({}),Qe=>({width:Qe+"px","max-width":Qe+"px"}))},X=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],K=new s0(t.url,{base_uri:new s0(window.location.href)}),ie=`${K.protocol}://${K.host}${K.port?":"+K.port:""}`,de=Pl(),Ce=(Qe,yt)=>V.some(yt),_e=[qe.config({channel:`${vA}-${p}`,updateState:Ce,initialData:t}),Ko("messages",[ba(()=>{const Qe=wc(Xe.fromDom(window),"message",yt=>{if(K.isSameOrigin(new s0(yt.raw.origin))){const St=yt.raw.data;C4(St)?Hm(l,Ke,St):fH(St)&&t.onMessage(Ke,St)}});de.set(Qe)}),kh(de.clear)]),Uc.config({channels:{[oD]:{onReceive:(Qe,yt)=>{Ca(Qe.element,"iframe").each(St=>{const un=St.dom.contentWindow;vn(un)&&un.postMessage(yt,ie)})}}}})],Fe=n0({id:p,header:y,body:S,footer:R,extraClasses:X,extraBehaviours:_e,extraStyles:H},I,h),Ke=hH(Fe);return{dialog:Fe,instanceApi:Ke}},pH=t=>{const r=t.shared;return{open:(h,p)=>{const y=()=>{ol.hide(H),p()},S=dr(sx({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:V.some("primary"),align:"end",enabled:!0,icon:V.none()},"cancel",t)),R=Cu(),I=dc(y,r.providers),H=el(Xi({lazySink:()=>r.getSink(),header:dh(R,I),body:ao(h,r.providers),footer:V.some(Js(oi([],[S.asSpec()]))),onEscape:y,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Nt(Qp,y)],eventOrder:{}}));ol.show(H);const X=S.get(H);Io.focus(X)}}},bH=t=>{const r=t.shared;return{open:(h,p)=>{const y=ie=>{ol.hide(X),p(ie)},S=dr(sx({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:V.some("primary"),align:"end",enabled:!0,icon:V.none()},"submit",t)),R=sx({context:"any",name:"no",text:"No",primary:!1,buttonType:V.some("secondary"),align:"end",enabled:!0,icon:V.none()},"cancel",t),I=Cu(),H=dc(()=>y(!1),r.providers),X=el(Xi({lazySink:()=>r.getSink(),header:dh(I,H),body:ao(h,r.providers),footer:V.some(Js(oi([],[R,S.asSpec()]))),onEscape:()=>y(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Nt(Qp,()=>y(!1)),Nt(G1,()=>y(!0))],eventOrder:{}}));ol.show(X);const K=S.get(X);Io.focus(K)}}},S4=(t,r)=>qt(ka("data",r,t)),vH=t=>Yw(t,".tox-alert-dialog")||Yw(t,".tox-confirm-dialog"),Ls=(t,r,l)=>r&&l?[]:[aa.config({contextual:{lazyContext:()=>V.some(Hr(Xe.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:h=>Wp(t,h.element).map(y=>({bounds:Up(y),optScrollEnv:V.some({currentScrollTop:y.element.dom.scrollTop,scrollElmTop:bs(y.element).top})})).getOrThunk(()=>({bounds:La(),optScrollEnv:V.none()}))})],xt=t=>{const r=t.editor,l=Vp(r),h=pH(t.backstages.dialog),p=bH(t.backstages.dialog),y=(Ce,_e,et)=>{if(!Ln(_e)){if(_e.inline==="toolbar")return H(Ce,t.backstages.popup.shared.anchors.inlineDialog(),et,_e);if(_e.inline==="bottom")return X(Ce,t.backstages.popup.shared.anchors.inlineBottomDialog(),et,_e);if(_e.inline==="cursor")return H(Ce,t.backstages.popup.shared.anchors.cursor(),et,_e)}return I(Ce,et)},S=(Ce,_e)=>R(Ce,_e),R=(Ce,_e)=>{const et=Fe=>{const Ke=mH(Fe,{closeWindow:()=>{ol.hide(Ke.dialog),_e(Ke.instanceApi)}},r,t.backstages.dialog);return ol.show(Ke.dialog),Ke.instanceApi};return G.openUrl(et,Ce)},I=(Ce,_e)=>{const et=(Fe,Ke,Qe)=>{const yt=Ke,un=Lg({dataValidator:Qe,initialData:yt,internalDialog:Fe},{redial:G.redial,closeWindow:()=>{ol.hide(un.dialog),_e(un.instanceApi)}},t.backstages.dialog);return ol.show(un.dialog),un.instanceApi.setData(yt),un.instanceApi};return G.open(et,Ce)},H=(Ce,_e,et,Fe)=>{const Ke=(Qe,yt,St)=>{const un=S4(yt,St),Pn=zs(),Rt=t.backstages.popup.shared.header.isPositionedAtTop(),Nn={dataValidator:St,initialData:un,internalDialog:Qe},kn=()=>Pn.on(cr=>{Va.reposition(cr),(!l||!Rt)&&aa.refresh(cr)}),Vn=fh(Nn,{redial:G.redial,closeWindow:()=>{Pn.on(Va.hide),r.off("ResizeEditor",kn),Pn.clear(),et(Vn.instanceApi)}},t.backstages.popup,Fe.ariaAttrs,kn),Es=el(Va.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Fe.persistent?{event:"doNotDismissYet"}:{},...Rt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:en([Ko("window-manager-inline-events",[Nt(uu(),(cr,Kn)=>{ws(Vn.dialog,Qp)})]),...Ls(r,l,Rt)]),isExtraPart:(cr,Kn)=>vH(Kn)}));Pn.set(Es);const ua=()=>{const cr=r.inline?Ge():Xe.fromDom(r.getContainer()),Kn=Hr(cr);return V.some(Kn)};return Va.showWithinBounds(Es,du(Vn.dialog),{anchor:_e},ua),(!l||!Rt)&&(aa.refresh(Es),r.on("ResizeEditor",kn)),Vn.instanceApi.setData(un),po.focusIn(Vn.dialog),Vn.instanceApi};return G.open(Ke,Ce)},X=(Ce,_e,et,Fe)=>{const Ke=(Qe,yt,St)=>{const un=S4(yt,St),Pn=zs(),Rt=t.backstages.popup.shared.header.isPositionedAtTop(),Nn={dataValidator:St,initialData:un,internalDialog:Qe},kn=()=>Pn.on(cr=>{Va.reposition(cr),aa.refresh(cr)}),Vn=fh(Nn,{redial:G.redial,closeWindow:()=>{Pn.on(Va.hide),r.off("ResizeEditor ScrollWindow ElementScroll",kn),Pn.clear(),et(Vn.instanceApi)}},t.backstages.popup,Fe.ariaAttrs,kn),Es=el(Va.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Fe.persistent?{event:"doNotDismissYet"}:{},...Rt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:en([Ko("window-manager-inline-events",[Nt(uu(),(cr,Kn)=>{ws(Vn.dialog,Qp)})]),aa.config({contextual:{lazyContext:()=>V.some(Hr(Xe.fromDom(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:cr=>Wp(r,cr.element).map(Zt=>({bounds:Up(Zt),optScrollEnv:V.some({currentScrollTop:Zt.element.dom.scrollTop,scrollElmTop:bs(Zt.element).top})})).getOrThunk(()=>({bounds:La(),optScrollEnv:V.none()}))})]),isExtraPart:(cr,Kn)=>vH(Kn)}));Pn.set(Es);const ua=()=>t.backstages.popup.shared.getSink().toOptional().bind(cr=>{const Kn=Wp(r,cr.element),Zt=15,wn=Kn.map(mo=>Up(mo)).getOr(La()),$o=Hr(Xe.fromDom(r.getContentAreaContainer())),is=Wl($o,wn);return V.some(Br(is.x,is.y,is.width,is.height-Zt))});return Va.showWithinBounds(Es,du(Vn.dialog),{anchor:_e},ua),aa.refresh(Es),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",kn),Vn.instanceApi.setData(un),po.focusIn(Vn.dialog),Vn.instanceApi};return G.open(Ke,Ce)};return{open:y,openUrl:S,alert:(Ce,_e)=>{h.open(Ce,_e)},close:Ce=>{Ce.close()},confirm:(Ce,_e)=>{p.open(Ce,_e)}}},bo=t=>{K3(t),t8(t),BU(t)};var xs=()=>{Hc.add("silver",t=>{bo(t);let r=()=>La();const{dialogs:l,popups:h,renderUI:p}=LX(t,{getPopupSinkBounds:()=>r()}),y=()=>{const H=p();return Wp(t,h.getMothership().element).each(K=>{r=()=>Up(K)}),H};Z8.register(t,h.backstage.shared);const S=xt({editor:t,backstages:{popup:h.backstage,dialog:l.backstage}}),R=zs(),I=()=>MP(t,{backstage:h.backstage},h.getMothership(),R);return{renderUI:y,getWindowManagerImpl:ce(S),getNotificationManagerImpl:I}})};xs()}()),cZ}var dZ;function ZG(){return dZ||(dZ=1,jG()),lZ}ZG();var hZ={},gZ={},fZ;function GG(){return fZ||(fZ=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),gZ}var mZ;function qG(){return mZ||(mZ=1,GG()),hZ}qG();var pZ={},bZ={},vZ;function KG(){return vZ||(vZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.ModelManager");const Rs=(g,v,k)=>{var _;return k(g,v.prototype)?!0:((_=g.constructor)===null||_===void 0?void 0:_.name)===v.name},gn=g=>{const v=typeof g;return g===null?"null":v==="object"&&Array.isArray(g)?"array":v==="object"&&Rs(g,String,(k,_)=>_.isPrototypeOf(k))?"string":v},ys=g=>v=>gn(v)===g,rn=g=>v=>typeof v===g,gs=g=>v=>g===v,Fo=ys("string"),Ot=ys("object"),lo=ys("array"),ns=gs(null),Bo=rn("boolean"),fs=gs(void 0),Tt=g=>g==null,Ln=g=>!Tt(g),Lo=rn("function"),vn=rn("number"),Bt=()=>{},vo=(g,v)=>(...k)=>g(v.apply(null,k)),xn=(g,v)=>k=>g(v(k)),oe=g=>()=>g,Wt=g=>g,Yo=(g,v)=>g===v;function jt(g,...v){return(...k)=>{const _=v.concat(k);return g.apply(null,_)}}const ce=g=>v=>!g(v),Gt=g=>()=>{throw new Error(g)},Wn=g=>g(),no=oe(!1),ut=oe(!0);class Be{constructor(v,k){this.tag=v,this.value=k}static some(v){return new Be(!0,v)}static none(){return Be.singletonNone}fold(v,k){return this.tag?k(this.value):v()}isSome(){return this.tag}isNone(){return!this.tag}map(v){return this.tag?Be.some(v(this.value)):Be.none()}bind(v){return this.tag?v(this.value):Be.none()}exists(v){return this.tag&&v(this.value)}forall(v){return!this.tag||v(this.value)}filter(v){return!this.tag||v(this.value)?this:Be.none()}getOr(v){return this.tag?this.value:v}or(v){return this.tag?this:v}getOrThunk(v){return this.tag?this.value:v()}orThunk(v){return this.tag?this:v()}getOrDie(v){if(this.tag)return this.value;throw new Error(v??"Called getOrDie on None")}static from(v){return Ln(v)?Be.some(v):Be.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(v){this.tag&&v(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Be.singletonNone=new Be(!1);const Qo=Array.prototype.slice,Je=Array.prototype.indexOf,ot=Array.prototype.push,V=(g,v)=>Je.call(g,v),Zn=(g,v)=>V(g,v)>-1,Dt=(g,v)=>{for(let k=0,_=g.length;k<_;k++){const B=g[k];if(v(B,k))return!0}return!1},Ao=(g,v)=>{const k=[];for(let _=0;_<g;_++)k.push(v(_));return k},Rn=(g,v)=>{const k=g.length,_=new Array(k);for(let B=0;B<k;B++){const Z=g[B];_[B]=v(Z,B)}return _},it=(g,v)=>{for(let k=0,_=g.length;k<_;k++){const B=g[k];v(B,k)}},No=(g,v)=>{for(let k=g.length-1;k>=0;k--){const _=g[k];v(_,k)}},qs=(g,v)=>{const k=[],_=[];for(let B=0,Z=g.length;B<Z;B++){const se=g[B];(v(se,B)?k:_).push(se)}return{pass:k,fail:_}},Ht=(g,v)=>{const k=[];for(let _=0,B=g.length;_<B;_++){const Z=g[_];v(Z,_)&&k.push(Z)}return k},Gn=(g,v,k)=>(No(g,(_,B)=>{k=v(k,_,B)}),k),dt=(g,v,k)=>(it(g,(_,B)=>{k=v(k,_,B)}),k),wt=(g,v,k)=>{for(let _=0,B=g.length;_<B;_++){const Z=g[_];if(v(Z,_))return Be.some(Z);if(k(Z,_))break}return Be.none()},te=(g,v)=>wt(g,v,no),As=(g,v)=>{for(let k=0,_=g.length;k<_;k++){const B=g[k];if(v(B,k))return Be.some(k)}return Be.none()},zo=g=>{const v=[];for(let k=0,_=g.length;k<_;++k){if(!lo(g[k]))throw new Error("Arr.flatten item "+k+" was not an array, input: "+g);ot.apply(v,g[k])}return v},Un=(g,v)=>zo(Rn(g,v)),ms=(g,v)=>{for(let k=0,_=g.length;k<_;++k){const B=g[k];if(v(B,k)!==!0)return!1}return!0},Ka=g=>{const v=Qo.call(g,0);return v.reverse(),v},We=(g,v)=>{const k={};for(let _=0,B=g.length;_<B;_++){const Z=g[_];k[String(Z)]=v(Z,_)}return k},Ie=(g,v)=>{const k=Qo.call(g,0);return k.sort(v),k},Ze=(g,v)=>v>=0&&v<g.length?Be.some(g[v]):Be.none(),De=g=>Ze(g,0),Xn=g=>Ze(g,g.length-1),Mo=(g,v)=>{for(let k=0;k<g.length;k++){const _=v(g[k],k);if(_.isSome())return _}return Be.none()},Cn=Object.keys,Qs=Object.hasOwnProperty,Vo=(g,v)=>{const k=Cn(g);for(let _=0,B=k.length;_<B;_++){const Z=k[_],se=g[Z];v(se,Z)}},Cr=(g,v)=>us(g,(k,_)=>({k:_,v:v(k,_)})),us=(g,v)=>{const k={};return Vo(g,(_,B)=>{const Z=v(_,B);k[Z.k]=Z.v}),k},ur=g=>(v,k)=>{g[k]=v},ri=(g,v,k,_)=>{Vo(g,(B,Z)=>{(v(B,Z)?k:_)(B,Z)})},vr=(g,v)=>{const k={};return ri(g,v,ur(k),Bt),k},qo=(g,v)=>{const k=[];return Vo(g,(_,B)=>{k.push(v(_,B))}),k},ds=g=>qo(g,Wt),jr=(g,v)=>$s(g,v)?Be.from(g[v]):Be.none(),$s=(g,v)=>Qs.call(g,v),Go=(g,v)=>$s(g,v)&&g[v]!==void 0&&g[v]!==null,Xs=g=>{for(const v in g)if(Qs.call(g,v))return!1;return!0},qn=typeof window<"u"?window:Function("return this;")(),Ns=(g,v)=>{let k=v??qn;for(let _=0;_<g.length&&k!==void 0&&k!==null;++_)k=k[g[_]];return k},oo=(g,v)=>{const k=g.split(".");return Ns(k,v)},Wr=(g,v)=>oo(g,v),yi=(g,v)=>{const k=Wr(g,v);if(k==null)throw new Error(g+" not available on this browser");return k},uo=Object.getPrototypeOf,Ri=g=>yi("HTMLElement",g),Yt=g=>{const v=oo("ownerDocument.defaultView",g);return Ot(g)&&(Ri(v).prototype.isPrototypeOf(g)||/^HTML\w*Element$/.test(uo(g).constructor.name))},os=8,Lr=9,Zr=11,Fa=1,Xa=3,Is=g=>g.dom.nodeName.toLowerCase(),da=g=>g.dom.nodeType,Dr=g=>v=>da(v)===g,Ts=g=>da(g)===os||Is(g)==="#comment",Qn=g=>hr(g)&&Yt(g.dom),hr=Dr(Fa),Ta=Dr(Xa),vl=Dr(Lr),Ol=Dr(Zr),Ds=g=>v=>hr(v)&&Is(v)===g,yo=(g,v,k)=>{if(Fo(k)||Bo(k)||vn(k))g.setAttribute(v,k+"");else throw console.error("Invalid call to Attribute.set. Key ",v,":: Value ",k,":: Element ",g),new Error("Attribute value was not simple")},mr=(g,v,k)=>{yo(g.dom,v,k)},Ea=(g,v)=>{const k=g.dom;Vo(v,(_,B)=>{yo(k,B,_)})},va=(g,v)=>{Vo(v,(k,_)=>{k.fold(()=>{Re(g,_)},B=>{yo(g.dom,_,B)})})},Ms=(g,v)=>{const k=g.dom.getAttribute(v);return k===null?void 0:k},Ne=(g,v)=>Be.from(Ms(g,v)),Re=(g,v)=>{g.dom.removeAttribute(v)},gt=g=>dt(g.dom.attributes,(v,k)=>(v[k.name]=k.value,v),{}),ft=(g,v)=>{const _=(v||document).createElement("div");if(_.innerHTML=g,!_.hasChildNodes()||_.childNodes.length>1){const B="HTML does not have a single root node";throw console.error(B,g),new Error(B)}return To(_.childNodes[0])},Yn=(g,v)=>{const _=(v||document).createElement(g);return To(_)},go=(g,v)=>{const _=(v||document).createTextNode(g);return To(_)},To=g=>{if(g==null)throw new Error("Node cannot be null or undefined");return{dom:g}},Xe={fromHtml:ft,fromTag:Yn,fromText:go,fromDom:To,fromPoint:(g,v,k)=>Be.from(g.dom.elementFromPoint(v,k)).map(To)},Eo=(g,v)=>{const k=g.dom;if(k.nodeType!==Fa)return!1;{const _=k;if(_.matches!==void 0)return _.matches(v);if(_.msMatchesSelector!==void 0)return _.msMatchesSelector(v);if(_.webkitMatchesSelector!==void 0)return _.webkitMatchesSelector(v);if(_.mozMatchesSelector!==void 0)return _.mozMatchesSelector(v);throw new Error("Browser lacks native selectors")}},He=g=>g.nodeType!==Fa&&g.nodeType!==Lr&&g.nodeType!==Zr||g.childElementCount===0,ze=(g,v)=>{const k=v===void 0?document:v.dom;return He(k)?[]:Rn(k.querySelectorAll(g),Xe.fromDom)},It=(g,v)=>{const k=v===void 0?document:v.dom;return He(k)?Be.none():Be.from(k.querySelector(g)).map(Xe.fromDom)},Vt=(g,v)=>g.dom===v.dom,bn=(g,v)=>{const k=g.dom,_=v.dom;return k===_?!1:k.contains(_)},Hn=Eo,$n=g=>Xe.fromDom(g.dom.ownerDocument),Mn=g=>vl(g)?g:$n(g),eo=g=>Xe.fromDom(Mn(g).dom.documentElement),co=g=>Xe.fromDom(Mn(g).dom.defaultView),ps=g=>Be.from(g.dom.parentNode).map(Xe.fromDom),Ks=g=>Be.from(g.dom.parentElement).map(Xe.fromDom),Ys=(g,v)=>{const k=Lo(v)?v:no;let _=g.dom;const B=[];for(;_.parentNode!==null&&_.parentNode!==void 0;){const Z=_.parentNode,se=Xe.fromDom(Z);if(B.push(se),k(se)===!0)break;_=Z}return B},hi=g=>Be.from(g.dom.previousSibling).map(Xe.fromDom),Ja=g=>Be.from(g.dom.nextSibling).map(Xe.fromDom),so=g=>Rn(g.dom.childNodes,Xe.fromDom),ls=(g,v)=>{const k=g.dom.childNodes;return Be.from(k[v]).map(Xe.fromDom)},ss=g=>ls(g,0),_a=(g,v)=>{ps(g).each(_=>{_.dom.insertBefore(v.dom,g.dom)})},xa=(g,v)=>{Ja(g).fold(()=>{ps(g).each(B=>{pr(B,v)})},_=>{_a(_,v)})},ea=(g,v)=>{ss(g).fold(()=>{pr(g,v)},_=>{g.dom.insertBefore(v.dom,_.dom)})},pr=(g,v)=>{g.dom.appendChild(v.dom)},eu=(g,v,k)=>{ls(g,k).fold(()=>{pr(g,v)},_=>{_a(_,v)})},ji=(g,v)=>{_a(g,v),pr(v,g)},Fs=(g,v)=>{it(v,(k,_)=>{const B=_===0?g:v[_-1];xa(B,k)})},Oa=(g,v)=>{it(v,k=>{pr(g,k)})},Ra=g=>{g.dom.textContent="",it(so(g),v=>{ya(v)})},ya=g=>{const v=g.dom;v.parentNode!==null&&v.parentNode.removeChild(v)},Di=g=>{const v=so(g);v.length>0&&Fs(g,v),ya(g)},Qa=(g,v)=>Xe.fromDom(g.dom.cloneNode(v)),ai=g=>Qa(g,!1),Zi=g=>Qa(g,!0),Mi=(g,v)=>{const k=Xe.fromTag(v),_=gt(g);return Ea(k,_),k},ii=(g,v)=>{const k=Mi(g,v),_=so(Zi(g));return Oa(k,_),k},Ql=(g,v)=>{const k=Mi(g,v);xa(g,k);const _=so(g);return Oa(k,_),ya(g),k},wi=["tfoot","thead","tbody","colgroup"],gi=g=>Zn(wi,g),ha=(g,v)=>({rows:g,columns:v}),ec=(g,v)=>({row:g,column:v}),sl=(g,v,k)=>({element:g,rowspan:v,colspan:k}),tc=(g,v,k,_)=>({element:g,rowspan:v,colspan:k,isNew:_}),Ci=(g,v,k,_,B,Z)=>({element:g,rowspan:v,colspan:k,row:_,column:B,isLocked:Z}),ga=(g,v,k)=>({element:g,cells:v,section:k}),Ba=(g,v,k,_)=>({element:g,cells:v,section:k,isNew:_}),ta=(g,v,k)=>({element:g,isNew:v,isLocked:k}),Ha=(g,v,k,_)=>({element:g,cells:v,section:k,isNew:_}),nc=(g,v,k,_)=>({startRow:g,startCol:v,finishRow:k,finishCol:_}),gr=(g,v,k)=>({element:g,colspan:v,column:k}),he=(g,v)=>({element:g,columns:v}),Me=g=>Ol(g)&&Ln(g.dom.host),Ge=g=>Xe.fromDom(g.dom.getRootNode()),mt=g=>Me(g)?g:Xe.fromDom(Mn(g).dom.body),Qt=g=>{const v=Ge(g);return Me(v)?Be.some(v):Be.none()},kt=g=>Xe.fromDom(g.dom.host),Ps=g=>{if(Ln(g.target)){const v=Xe.fromDom(g.target);if(hr(v)&&In(v)&&g.composed&&g.composedPath){const k=g.composedPath();if(k)return De(k)}}return Be.from(g.target)},In=g=>Ln(g.dom.shadowRoot),_o=g=>{const v=Ta(g)?g.dom.parentNode:g.dom;if(v==null||v.ownerDocument===null)return!1;const k=v.ownerDocument;return Qt(Xe.fromDom(v)).fold(()=>k.body.contains(v),xn(_o,kt))},kr=()=>Q(Xe.fromDom(document)),Q=g=>{const v=g.dom.body;if(v==null)throw new Error("Body is not available yet");return Xe.fromDom(v)},xe=(g,v,k)=>Ht(Ys(g,k),v),Le=(g,v)=>Ht(so(g),v),st=(g,v)=>{let k=[];return it(so(g),_=>{v(_)&&(k=k.concat([_])),k=k.concat(st(_,v))}),k},Mt=(g,v,k)=>xe(g,_=>Eo(_,v),k),jo=(g,v)=>Le(g,k=>Eo(k,v)),js=(g,v)=>ze(v,g);var nr=(g,v,k,_,B)=>g(k,_)?Be.some(k):Lo(B)&&B(k)?Be.none():v(k,_,B);const zt=(g,v,k)=>{let _=g.dom;const B=Lo(k)?k:no;for(;_.parentNode;){_=_.parentNode;const Z=Xe.fromDom(_);if(v(Z))return Be.some(Z);if(B(Z))break}return Be.none()},or=(g,v,k)=>nr((B,Z)=>Z(B),zt,g,v,k),Da=(g,v)=>{const k=B=>v(Xe.fromDom(B));return te(g.dom.childNodes,k).map(Xe.fromDom)},Rl=(g,v)=>{const k=_=>{for(let B=0;B<_.childNodes.length;B++){const Z=Xe.fromDom(_.childNodes[B]);if(v(Z))return Be.some(Z);const se=k(_.childNodes[B]);if(se.isSome())return se}return Be.none()};return k(g.dom)},Oo=(g,v,k)=>zt(g,_=>Eo(_,v),k),Si=(g,v)=>Da(g,k=>Eo(k,v)),rl=(g,v)=>It(v,g),Ma=(g,v,k)=>nr((B,Z)=>Eo(B,Z),Oo,g,v,k),Xo=(g,v,k=Yo)=>g.exists(_=>k(_,v)),xl=g=>{const v=[],k=_=>{v.push(_)};for(let _=0;_<g.length;_++)g[_].each(k);return v},yl=(g,v)=>g!=null?v(g):Be.none(),Ku=(g,v)=>g?Be.some(v):Be.none(),Gr=(g,v)=>g.substring(v),Ya=(g,v,k)=>v===""||g.length>=v.length&&g.substr(k,k+v.length)===v,tn=(g,v)=>Gi(g,v)?Gr(g,v.length):g,bs=(g,v,k=0,_)=>{const B=g.indexOf(v,k);return B!==-1?fs(_)?!0:B+v.length<=_:!1},Gi=(g,v)=>Ya(g,v,0),Pi=(g,v)=>Ya(g,v,g.length-v.length),pe=(g=>v=>v.replace(g,""))(/^\s+|\s+$/g),Se=g=>g.length>0,at=g=>{const v=parseFloat(g);return isNaN(v)?Be.none():Be.some(v)},Et=g=>g.style!==void 0&&Lo(g.style.getPropertyValue),ro=(g,v,k)=>{if(!Fo(k))throw console.error("Invalid call to CSS.set. Property ",v,":: Value ",k,":: Element ",g),new Error("CSS value must be a string: "+k);Et(g)&&g.style.setProperty(v,k)},es=(g,v)=>{Et(g)&&g.style.removeProperty(v)},Jo=(g,v,k)=>{const _=g.dom;ro(_,v,k)},fr=(g,v)=>{const k=g.dom;Vo(v,(_,B)=>{ro(k,B,_)})},na=(g,v)=>{const k=g.dom,B=window.getComputedStyle(k).getPropertyValue(v);return B===""&&!_o(g)?ei(k,v):B},ei=(g,v)=>Et(g)?g.style.getPropertyValue(v):"",$a=(g,v)=>{const k=g.dom,_=ei(k,v);return Be.from(_).filter(B=>B.length>0)},oa=(g,v)=>{const k=g.dom;es(k,v),Xo(Ne(g,"style").map(pe),"")&&Re(g,"style")},fa=(g,v)=>{const k=g.dom,_=v.dom;Et(k)&&Et(_)&&(_.style.cssText=k.style.cssText)},Mr=(g,v,k=0)=>Ne(g,v).map(_=>parseInt(_,10)).getOr(k),Pa=(g,v)=>Mr(g,v,1),Fr=g=>Ds("col")(g)?Mr(g,"span",1)>1:Pa(g,"colspan")>1,Nr=g=>Pa(g,"rowspan")>1,er=(g,v)=>parseInt(na(g,v),10),$l=oe(10),Lc=oe(10),zl=(g,v)=>tu(g,v,ut),tu=(g,v,k)=>Un(so(g),_=>Eo(_,v)?k(_)?[_]:[]:tu(_,v,k)),nu=(g,v,k=no)=>{if(k(v))return Be.none();if(Zn(g,Is(v)))return Be.some(v);const _=B=>Eo(B,"table")||k(B);return Oo(v,g.join(","),_)},Ec=(g,v)=>nu(["td","th"],g,v),_c=g=>zl(g,"th,td"),Dl=g=>Eo(g,"colgroup")?jo(g,"col"):Un(oc(g),v=>jo(v,"col")),qi=(g,v)=>Ma(g,"table",v),jh=g=>zl(g,"tr"),oc=g=>qi(g).fold(oe([]),v=>jo(v,"colgroup")),mh=(g,v)=>Rn(g,k=>{if(Is(k)==="colgroup"){const _=Rn(Dl(k),B=>{const Z=Mr(B,"span",1);return sl(B,1,Z)});return ga(k,_,"colgroup")}else{const _=Rn(_c(k),B=>{const Z=Mr(B,"rowspan",1),se=Mr(B,"colspan",1);return sl(B,Z,se)});return ga(k,_,v(k))}}),Tu=g=>ps(g).map(v=>{const k=Is(v);return gi(k)?k:"tbody"}).getOr("tbody"),ph=g=>{const v=jh(g),_=[...oc(g),...v];return mh(_,Tu)},Md=(g,v)=>mh(g,()=>v),Eu=g=>{let v=!1,k;return(..._)=>(v||(v=!0,k=g.apply(null,_)),k)},Pd=(g,v,k,_)=>{const B=g.isiOS()&&/ipad/i.test(k)===!0,Z=g.isiOS()&&!B,se=g.isiOS()||g.isAndroid(),ge=se||_("(pointer:coarse)"),Ae=B||!Z&&se&&_("(min-device-width:768px)"),Ue=Z||se&&!Ae,ct=v.isSafari()&&g.isiOS()&&/safari/i.test(k)===!1,Kt=!Ue&&!Ae&&!ct;return{isiPad:oe(B),isiPhone:oe(Z),isTablet:oe(Ae),isPhone:oe(Ue),isTouch:oe(ge),isAndroid:g.isAndroid,isiOS:g.isiOS,isWebView:oe(ct),isDesktop:oe(Kt)}},bh=(g,v)=>{for(let k=0;k<g.length;k++){const _=g[k];if(_.test(v))return _}},fc=(g,v)=>{const k=bh(g,v);if(!k)return{major:0,minor:0};const _=B=>Number(v.replace(k,"$"+B));return ou(_(1),_(2))},Zh=(g,v)=>{const k=String(v).toLowerCase();return g.length===0?$e():fc(g,k)},$e=()=>ou(0,0),ou=(g,v)=>({major:g,minor:v}),Ml={nu:ou,detect:Zh,unknown:$e},Gh=(g,v)=>Mo(v.brands,k=>{const _=k.brand.toLowerCase();return te(g,B=>{var Z;return _===((Z=B.brand)===null||Z===void 0?void 0:Z.toLowerCase())}).map(B=>({current:B.name,version:Ml.nu(parseInt(k.version,10),0)}))}),Ng=(g,v)=>{const k=String(v).toLowerCase();return te(g,_=>_.search(k))},Nc=(g,v)=>Ng(g,v).map(k=>{const _=Ml.detect(k.versionRegexes,v);return{current:k.name,version:_}}),rs=(g,v)=>Ng(g,v).map(k=>{const _=Ml.detect(k.versionRegexes,v);return{current:k.name,version:_}}),Li=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,fi=g=>v=>bs(v,g),Ic=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:g=>bs(g,"edge/")&&bs(g,"chrome")&&bs(g,"safari")&&bs(g,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Li],search:g=>bs(g,"chrome")&&!bs(g,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:g=>bs(g,"msie")||bs(g,"trident")},{name:"Opera",versionRegexes:[Li,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:fi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:fi("firefox")},{name:"Safari",versionRegexes:[Li,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:g=>(bs(g,"safari")||bs(g,"mobile/"))&&bs(g,"applewebkit")}],vh=[{name:"Windows",search:fi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:g=>bs(g,"iphone")||bs(g,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:fi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:fi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:fi("linux"),versionRegexes:[]},{name:"Solaris",search:fi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:fi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:fi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ju={browsers:oe(Ic),oses:oe(vh)},Za="Edge",Qu="Chromium",mc="IE",ed="Opera",Fc="Firefox",Ni="Safari",qh=()=>td({current:void 0,version:Ml.unknown()}),td=g=>{const v=g.current,k=g.version,_=B=>()=>v===B;return{current:v,version:k,isEdge:_(Za),isChromium:_(Qu),isIE:_(mc),isOpera:_(ed),isFirefox:_(Fc),isSafari:_(Ni)}},li={unknown:qh,nu:td,edge:oe(Za),chromium:oe(Qu),ie:oe(mc),opera:oe(ed),firefox:oe(Fc),safari:oe(Ni)},wl="Windows",Ki="iOS",_u="Android",nd="Linux",Kh="macOS",su="Solaris",Vl="FreeBSD",od="ChromeOS",Ig=()=>Jh({current:void 0,version:Ml.unknown()}),Jh=g=>{const v=g.current,k=g.version,_=B=>()=>v===B;return{current:v,version:k,isWindows:_(wl),isiOS:_(Ki),isAndroid:_(_u),isMacOS:_(Kh),isLinux:_(nd),isSolaris:_(su),isFreeBSD:_(Vl),isChromeOS:_(od)}},Fg={unknown:Ig,nu:Jh,windows:oe(wl),ios:oe(Ki),android:oe(_u),linux:oe(nd),macos:oe(Kh),solaris:oe(su),freebsd:oe(Vl),chromeos:oe(od)},sd={detect:(g,v,k)=>{const _=Ju.browsers(),B=Ju.oses(),Z=v.bind(Ae=>Gh(_,Ae)).orThunk(()=>Nc(_,g)).fold(li.unknown,li.nu),se=rs(B,g).fold(Fg.unknown,Fg.nu),ge=Pd(se,Z,g,k);return{browser:Z,os:se,deviceType:ge}}},ru=g=>window.matchMedia(g).matches;let Ld=Eu(()=>sd.detect(window.navigator.userAgent,Be.from(window.navigator.userAgentData),ru));const Br=()=>Ld(),Hr=(g,v)=>{const k=(ge,Ae)=>{if(!vn(Ae)&&!Ae.match(/^[0-9]+$/))throw new Error(g+".set accepts only positive integer values. Value was "+Ae);const Ue=ge.dom;Et(Ue)&&(Ue.style[g]=Ae+"px")},_=ge=>{const Ae=v(ge);if(Ae<=0||Ae===null){const Ue=na(ge,g);return parseFloat(Ue)||0}return Ae},B=_,Z=(ge,Ae)=>dt(Ae,(Ue,ct)=>{const Kt=na(ge,ct),Sn=Kt===void 0?0:parseInt(Kt,10);return isNaN(Sn)?Ue:Ue+Sn},0);return{set:k,get:_,getOuter:B,aggregate:Z,max:(ge,Ae,Ue)=>{const ct=Z(ge,Ue);return Ae>ct?Ae-ct:0}}},Bc=(g,v)=>at(g).getOr(v),Wl=(g,v,k)=>Bc(na(g,v),k),Nd=(g,v,k,_)=>{const B=Wl(g,`padding-${k}`,0),Z=Wl(g,`padding-${_}`,0),se=Wl(g,`border-${k}-width`,0),ge=Wl(g,`border-${_}-width`,0);return v-B-Z-se-ge},La=(g,v)=>{const k=g.dom,_=k.getBoundingClientRect().width||k.offsetWidth;return v==="border-box"?_:Nd(g,_,"left","right")},to=g=>Wl(g,"height",g.dom.offsetHeight),Oc=g=>Wl(g,"width",g.dom.offsetWidth),rd=g=>La(g,"content-box"),Pl=Hr("width",g=>g.dom.offsetWidth),zs=g=>Pl.get(g),Hc=g=>Pl.getOuter(g),ad=rd,id=Oc,eg=(g,v,k)=>{const _=g.cells,B=_.slice(0,v),Z=_.slice(v),se=B.concat(k).concat(Z);return a(g,se)},C=(g,v,k)=>eg(g,v,[k]),o=(g,v,k)=>{const _=g.cells;_[v]=k},a=(g,v)=>Ha(g.element,v,g.section,g.isNew),c=(g,v)=>{const k=g.cells,_=Rn(k,v);return Ha(g.element,_,g.section,g.isNew)},d=(g,v)=>g.cells[v],m=(g,v)=>d(g,v).element,b=g=>g.cells.length,w=g=>{const v=qs(g,k=>k.section==="colgroup");return{rows:v.fail,cols:v.pass}},A=(g,v,k)=>{const _=Rn(g.cells,k);return Ha(v(g.element),_,g.section,!0)},E="data-snooker-locked-cols",M=g=>Ne(g,E).bind(v=>Be.from(v.match(/\d+/g))).map(v=>We(v,ut)),O=g=>{const v=dt(w(g).rows,(_,B)=>(it(B.cells,(Z,se)=>{Z.isLocked&&(_[se]=!0)}),_),{}),k=qo(v,(_,B)=>parseInt(B,10));return Ie(k)},L=(g,v)=>g+","+v,$=(g,v,k)=>Be.from(g.access[L(v,k)]),Y=(g,v,k)=>{const _=U(g,B=>k(v,B.element));return _.length>0?Be.some(_[0]):Be.none()},U=(g,v)=>{const k=Un(g.all,_=>_.cells);return Ht(k,v)},ne=g=>{const v={};let k=0;return it(g.cells,_=>{const B=_.colspan;Ao(B,Z=>{const se=k+Z;v[se]=gr(_.element,B,se)}),k+=B}),v},ae=g=>{const v={},k=[],B=De(g).map(pn=>pn.element).bind(qi).bind(M).getOr({});let Z=0,se=0,ge=0;const{pass:Ae,fail:Ue}=qs(g,pn=>pn.section==="colgroup");it(Ue,pn=>{const ln=[];it(pn.cells,jn=>{let Xt=0;for(;v[L(ge,Xt)]!==void 0;)Xt++;const cn=Go(B,Xt.toString()),dn=Ci(jn.element,jn.rowspan,jn.colspan,ge,Xt,cn);for(let Ho=0;Ho<jn.colspan;Ho++)for(let Hs=0;Hs<jn.rowspan;Hs++){const Or=ge+Hs,ia=Xt+Ho,Aa=L(Or,ia);v[Aa]=dn,se=Math.max(se,ia+1)}ln.push(dn)}),Z++,k.push(ga(pn.element,ln,pn.section)),ge++});const{columns:ct,colgroups:Kt}=Xn(Ae).map(pn=>{const ln=ne(pn);return{colgroups:[he(pn.element,ds(ln))],columns:ln}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ha(Z,se),access:v,all:k,columns:ct,colgroups:Kt}},ve={fromTable:g=>{const v=ph(g);return ae(v)},generate:ae,getAt:$,findItem:Y,filterItems:U,justCells:g=>Un(g.all,v=>v.cells),justColumns:g=>ds(g.columns),hasColumns:g=>Cn(g.columns).length>0,getColumnAt:(g,v)=>Be.from(g.columns[v])},Pe=(g,v=ut)=>{const k=g.grid,_=Ao(k.columns,Wt),B=Ao(k.rows,Wt);return Rn(_,Z=>ht(()=>Un(B,Ue=>ve.getAt(g,Ue,Z).filter(ct=>ct.column===Z).toArray()),Ue=>Ue.colspan===1&&v(Ue.element),()=>ve.getAt(g,0,Z)))},ht=(g,v,k)=>{const _=g();return te(_,v).orThunk(()=>Be.from(_[0]).orThunk(k)).map(se=>se.element)},P=g=>{const v=g.grid,k=Ao(v.rows,Wt),_=Ao(v.columns,Wt);return Rn(k,B=>ht(()=>Un(_,Ae=>ve.getAt(g,B,Ae).filter(Ue=>Ue.row===B).fold(oe([]),Ue=>[Ue])),Ae=>Ae.rowspan===1,()=>ve.getAt(g,B,0)))},W=(g,v)=>{if(v<0||v>=g.length-1)return Be.none();const k=g[v].fold(()=>{const B=Ka(g.slice(0,v));return Mo(B,(Z,se)=>Z.map(ge=>({value:ge,delta:se+1})))},B=>Be.some({value:B,delta:0})),_=g[v+1].fold(()=>{const B=g.slice(v+1);return Mo(B,(Z,se)=>Z.map(ge=>({value:ge,delta:se+1})))},B=>Be.some({value:B,delta:1}));return k.bind(B=>_.map(Z=>{const se=Z.delta+B.delta;return Math.abs(Z.value-B.value)/se}))},q=(g,v)=>k=>ue(k)==="rtl"?v:g,ue=g=>na(g,"direction")==="rtl"?"rtl":"ltr",ye=Hr("height",g=>{const v=g.dom;return _o(g)?v.getBoundingClientRect().height:v.offsetHeight}),nt=g=>ye.get(g),Ft=g=>ye.getOuter(g),an=to,hn=(g,v)=>({left:g,top:v,translate:(_,B)=>hn(g+_,v+B)}),Jt=hn,wo=g=>{const v=g.getBoundingClientRect();return Jt(v.left,v.top)},Ro=(g,v)=>g!==void 0?g:v!==void 0?v:0,sr=g=>{const v=g.dom.ownerDocument,k=v.body,_=v.defaultView,B=v.documentElement;if(k===g.dom)return Jt(k.offsetLeft,k.offsetTop);const Z=Ro(_==null?void 0:_.pageYOffset,B.scrollTop),se=Ro(_==null?void 0:_.pageXOffset,B.scrollLeft),ge=Ro(B.clientTop,k.clientTop),Ae=Ro(B.clientLeft,k.clientLeft);return qr(g).translate(se-Ae,Z-ge)},qr=g=>{const v=g.dom,_=v.ownerDocument.body;return _===v?Jt(_.offsetLeft,_.offsetTop):_o(g)?wo(v):Jt(0,0)},$r=(g,v)=>({row:g,y:v}),Ii=(g,v)=>({col:g,x:v}),Vs=g=>sr(g).left+Hc(g),Ar=g=>sr(g).left,ma=(g,v)=>Ii(g,Ar(v)),al=(g,v)=>Ii(g,Vs(v)),Tr=g=>sr(g).top,pc=(g,v)=>$r(g,Tr(v)),za=(g,v)=>$r(g,Tr(v)+Ft(v)),il=(g,v,k)=>{if(k.length===0)return[];const _=Rn(k.slice(1),(Z,se)=>Z.map(ge=>g(se,ge))),B=k[k.length-1].map(Z=>v(k.length-1,Z));return _.concat([B])},mi=g=>-g,fo={delta:Wt,positions:g=>il(pc,za,g),edge:Tr},$m=q({delta:Wt,edge:Ar,positions:g=>il(ma,al,g)},{delta:mi,edge:Vs,positions:g=>il(al,ma,g)}),tg={delta:(g,v)=>$m(v).delta(g,v),positions:(g,v)=>$m(v).positions(g,v),edge:g=>$m(g).edge(g)},mb={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},au=(()=>{const g="[0-9]+",k="[eE]"+("[+-]?"+g),_="\\.",B=ge=>`(?:${ge})?`,se=`[+-]?(?:${["Infinity",g+_+B(g)+B(k),_+g+B(k),g+B(k)].join("|")})`;return new RegExp(`^(${se})(.*)$`)})(),ld=(g,v)=>Dt(v,k=>Dt(mb[k],_=>g===_)),ng=(g,v)=>Be.from(au.exec(g)).bind(_=>{const B=Number(_[1]),Z=_[2];return ld(Z,v)?Be.some({value:B,unit:Z}):Be.none()}),An=/(\d+(\.\d+)?)%/,iu=/(\d+(\.\d+)?)px|em/,zm=Ds("col"),Bg=Ds("tr"),lu=(g,v,k)=>{const _=Ks(g).getOrThunk(()=>Q($n(g)));return v(g)/k(_)*100},Rf=(g,v)=>{Jo(g,"width",v+"px")},og=(g,v)=>{Jo(g,"width",v+"%")},Id=(g,v)=>{Jo(g,"height",v+"px")},Df=g=>{oa(g,"height")},Ou=g=>an(g)+"px",l0=(g,v,k,_)=>{const B=qi(g).map(Z=>{const se=k(Z);return Math.floor(v/100*se)}).getOr(v);return _(g,B),B},ka=(g,v,k,_)=>{const B=parseFloat(g);return Pi(g,"%")&&Is(v)!=="table"?l0(v,B,k,_):B},qt=g=>{const v=Ou(g);return v?ka(v,g,nt,Id):nt(g)},Ul=(g,v,k)=>{const _=k(g),B=Pa(g,v);return _/B},sg=(g,v)=>$a(g,v).orThunk(()=>Ne(g,v).map(k=>k+"px")),Ga=g=>sg(g,"width"),Hg=g=>sg(g,"height"),Fi=g=>lu(g,zs,ad),rr=g=>zm(g)?zs(g):id(g),Mf=g=>Bg(g)?nt(g):Ul(g,"rowspan",qt),Lt=g=>Ga(g).bind(k=>ng(k,["fixed","relative","empty"])),ar=(g,v,k)=>{Jo(g,"width",v+k)},Pf=g=>zs(g)+"px",ki=g=>nt(g)+"px",Cl=g=>lu(g,zs,ad)+"%",$c=g=>Ga(g).exists(v=>An.test(v)),pb=g=>Ga(g).exists(v=>iu.test(v)),xh=g=>Ga(g).isNone(),bb=oe(An),Dc=Ds("col"),tr=g=>Ga(g).getOrThunk(()=>rr(g)+"px"),cd=g=>Hg(g).getOrThunk(()=>Mf(g)+"px"),Lf=g=>Rn(ve.justColumns(g),v=>Be.from(v.element)),Ai=g=>{const v=Br().browser,k=v.isChromium()||v.isFirefox();return Dc(g)?k:!0},Vm=(g,v,k,_,B,Z)=>g.filter(_).fold(()=>Z(W(k,v)),se=>B(se)),Ru=(g,v,k,_)=>{const B=Pe(g),Z=ve.hasColumns(g)?Lf(g):B,se=[Be.some(tg.edge(v))].concat(Rn(tg.positions(B,v),Ae=>Ae.map(Ue=>Ue.x))),ge=ce(Fr);return Rn(Z,(Ae,Ue)=>Vm(Ae,Ue,se,ge,ct=>{if(Ai(ct))return k(ct);{const Kt=yl(B[Ue],Wt);return Vm(Kt,Ue,se,ge,Sn=>_(Be.some(zs(Sn))),_)}},_))},Nf=g=>g.map(v=>v+"px").getOr(""),Bi=(g,v)=>Ru(g,v,tr,Nf),Sl=(g,v,k)=>Ru(g,v,Fi,_=>_.fold(()=>k.minCellWidth(),B=>B/k.pixelWidth()*100)),rt=(g,v,k)=>Ru(g,v,rr,_=>_.getOrThunk(k.minCellWidth)),Ir=(g,v,k,_)=>{const B=P(g),Z=Rn(g.all,ge=>Be.some(ge.element)),se=[Be.some(fo.edge(v))].concat(Rn(fo.positions(B,v),ge=>ge.map(Ae=>Ae.y)));return Rn(Z,(ge,Ae)=>Vm(ge,Ae,se,ut,k,_))},Wm=(g,v)=>Ir(g,v,Mf,k=>k.getOrThunk(Lc)),ti=(g,v)=>Ir(g,v,cd,Nf),Ji=(g,v)=>()=>_o(g)?v(g):parseFloat($a(g,"width").getOr("0")),Ti=g=>{const v=Ji(g,zs),k=oe(0);return{width:v,pixelWidth:v,getWidths:(B,Z)=>rt(B,g,Z),getCellDelta:k,singleColumnWidth:oe([0]),minCellWidth:k,setElementWidth:Bt,adjustTableWidth:Bt,isRelative:!0,label:"none"}},sa=g=>{const v=Ji(g,Ae=>parseFloat(Cl(Ae))),k=Ji(g,zs);return{width:v,pixelWidth:k,getWidths:(Ae,Ue)=>Sl(Ae,g,Ue),getCellDelta:Ae=>Ae/k()*100,singleColumnWidth:(Ae,Ue)=>[100-Ae],minCellWidth:()=>$l()/k()*100,setElementWidth:og,adjustTableWidth:Ae=>{const Ue=v(),ct=Ae/100*Ue,Kt=Ue+ct;og(g,Kt)},isRelative:!0,label:"percent"}},Um=g=>{const v=Ji(g,zs);return{width:v,pixelWidth:v,getWidths:(se,ge)=>rt(se,g,ge),getCellDelta:Wt,singleColumnWidth:(se,ge)=>[Math.max($l(),se+ge)-se],minCellWidth:$l,setElementWidth:Rf,adjustTableWidth:se=>{const ge=v()+se;Rf(g,ge)},isRelative:!1,label:"pixel"}},yh=(g,v)=>bb().exec(v)!==null?sa(g):Um(g),z={getTableSize:g=>Ga(g).fold(()=>Ti(g),k=>yh(g,k)),pixelSize:Um,percentageSize:sa,noneSize:Ti},re=(g,v,k,_,B,Z)=>({minRow:g,minCol:v,maxRow:k,maxCol:_,allCells:B,selectedCells:Z}),we=(g,v)=>{const k=g.grid.columns;let B=g.grid.rows,Z=k,se=0,ge=0;const Ae=[],Ue=[];return Vo(g.access,ct=>{if(Ae.push(ct),v(ct)){Ue.push(ct);const Kt=ct.row,Sn=Kt+ct.rowspan-1,pn=ct.column,ln=pn+ct.colspan-1;Kt<B?B=Kt:Sn>se&&(se=Sn),pn<Z?Z=pn:ln>ge&&(ge=ln)}}),re(B,Z,se,ge,Ae,Ue)},je=(g,v,k)=>{const _=g[k].element,B=Xe.fromTag("td");pr(B,Xe.fromTag("br")),(v?pr:ea)(_,B)},Pt=(g,v,k,_)=>{const B=Ht(g,ge=>ge.section!=="colgroup"),Z=v.grid.columns,se=v.grid.rows;for(let ge=0;ge<se;ge++){let Ae=!1;for(let Ue=0;Ue<Z;Ue++)ge<k.minRow||ge>k.maxRow||Ue<k.minCol||Ue>k.maxCol||(ve.getAt(v,ge,Ue).filter(_).isNone()?je(B,Ae,ge):Ae=!0)}},on=(g,v,k,_)=>{Vo(k.columns,se=>{(se.column<v.minCol||se.column>v.maxCol)&&ya(se.element)});const B=Ht(zl(g,"tr"),se=>se.dom.childElementCount===0);it(B,ya),(v.minCol===v.maxCol||v.minRow===v.maxRow)&&it(zl(g,"th,td"),se=>{Re(se,"rowspan"),Re(se,"colspan")}),Re(g,E),Re(g,"data-snooker-col-series"),z.getTableSize(g).adjustTableWidth(_)},zn=(g,v,k,_)=>{if(_.minCol===0&&v.grid.columns===_.maxCol+1)return 0;const B=rt(v,g,k),Z=dt(B,(Ue,ct)=>Ue+ct,0),Ae=dt(B.slice(_.minCol,_.maxCol+1),(Ue,ct)=>Ue+ct,0)/Z*k.pixelWidth()-k.pixelWidth();return k.getCellDelta(Ae)},Po=(g,v)=>{const k=Sn=>Eo(Sn.element,v),_=Zi(g),B=ph(_),Z=z.getTableSize(g),se=ve.generate(B),ge=we(se,k),Ae="th:not("+v+"),td:not("+v+")",Ue=tu(_,"th,td",Sn=>Eo(Sn,Ae));it(Ue,ya),Pt(B,se,ge,k);const ct=ve.fromTable(g),Kt=zn(g,ct,Z,ge);return on(_,ge,se,Kt),_},ts="",br=((g,v)=>{const k=Z=>{if(!g(Z))throw new Error("Can only get "+v+" value of a "+v+" node");return _(Z).getOr("")},_=Z=>g(Z)?Be.from(Z.dom.nodeValue):Be.none();return{get:k,getOption:_,set:(Z,se)=>{if(!g(Z))throw new Error("Can only set raw "+v+" value of a "+v+" node");Z.dom.nodeValue=se}}})(Ta,"text"),pa=g=>br.get(g),sc=g=>br.getOption(g),zc=(g,v)=>br.set(g,v),ll=g=>Is(g)==="img"?1:sc(g).fold(()=>so(g).length,v=>v.length),ud=g=>sc(g).filter(v=>v.trim().length!==0||v.indexOf(ts)>-1).isSome(),Fd=g=>Qn(g)&&Ms(g,"contenteditable")==="false",Bd=["img","br"],wh=g=>ud(g)||Zn(Bd,Is(g))||Fd(g),$g=g=>Rl(g,wh),If=g=>Xm(g,wh),Xm=(g,v)=>{const k=_=>{const B=so(_);for(let Z=B.length-1;Z>=0;Z--){const se=B[Z];if(v(se))return Be.some(se);const ge=k(se);if(ge.isSome())return ge}return Be.none()};return k(g)},pi={scope:["row","col"]},Du=g=>()=>{const v=Xe.fromTag("td",g.dom);return pr(v,Xe.fromTag("br",g.dom)),v},Ch=g=>()=>Xe.fromTag("col",g.dom),Zs=g=>()=>Xe.fromTag("colgroup",g.dom),wa=g=>()=>Xe.fromTag("tr",g.dom),Na=(g,v,k)=>{const _=ii(g,v);return Vo(k,(B,Z)=>{B===null?Re(_,Z):mr(_,Z,B)}),_},Xl=g=>g,Ym=(g,v,k)=>$g(g).map(B=>{const Z=k.join(","),se=Mt(B,Z,ge=>Vt(ge,g));return Gn(se,(ge,Ae)=>{const Ue=ai(Ae);return pr(ge,Ue),Ue},v)}).getOr(v),jm=(g,v)=>{Vo(pi,(k,_)=>Ne(g,_).filter(B=>Zn(k,B)).each(B=>mr(v,_,B)))},bc=(g,v,k)=>{const _=(se,ge)=>{fa(se.element,ge),oa(ge,"height"),se.colspan!==1&&oa(ge,"width")},B=se=>{const ge=Xe.fromTag(Is(se.element),v.dom),Ae=k.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Ue=Ae.length>0?Ym(se.element,ge,Ae):ge;return pr(Ue,Xe.fromTag("br")),_(se,ge),jm(se.element,ge),g(se.element,ge),ge};return{col:se=>{const ge=Xe.fromTag(Is(se.element),v.dom);return _(se,ge),g(se.element,ge),ge},colgroup:Zs(v),row:wa(v),cell:B,replace:Na,colGap:Ch(v),gap:Du(v)}},vc=g=>({col:Ch(g),colgroup:Zs(g),row:wa(g),cell:Du(g),replace:Xl,colGap:Ch(g),gap:Du(g)}),NC=(g,v)=>{const _=document.createElement("div");return _.innerHTML=g,so(Xe.fromDom(_))},Mu=g=>Rn(g,Xe.fromDom),Ff=g=>v=>v.options.get(g),Hd="100%",Sh=g=>{var v;const k=g.dom,_=(v=k.getParent(g.selection.getStart(),k.isBlock))!==null&&v!==void 0?v:g.getBody();return ad(Xe.fromDom(_))+"px"},Bf=(g,v)=>Vg(g)||!Wg(g)?v:kl(g)?{...v,width:Sh(g)}:{...v,width:Hd},BT=(g,v)=>Vg(g)||Wg(g)?v:kl(g)?{...v,width:Sh(g)}:{...v,width:Hd},vb=g=>{const v=g.options.register;v("table_clone_elements",{processor:"string[]"}),v("table_use_colgroups",{processor:"boolean",default:!0}),v("table_header_type",{processor:k=>{const _=Zn(["section","cells","sectionCells","auto"],k);return _?{value:k,valid:_}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),v("table_sizing_mode",{processor:"string",default:"auto"}),v("table_default_attributes",{processor:"object",default:{border:"1"}}),v("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),v("table_column_resizing",{processor:k=>{const _=Zn(["preservetable","resizetable"],k);return _?{value:k,valid:_}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),v("table_resize_bars",{processor:"boolean",default:!0}),v("table_style_by_css",{processor:"boolean",default:!0}),v("table_merge_content_on_paste",{processor:"boolean",default:!0})},zg=g=>Be.from(g.options.get("table_clone_elements")),HT=g=>{const v=g.options.get("object_resizing");return Zn(v.split(","),"table")},ci=Ff("table_header_type"),c0=Ff("table_column_resizing"),$d=g=>c0(g)==="preservetable",Hf=g=>c0(g)==="resizetable",xb=Ff("table_sizing_mode"),zd=g=>xb(g)==="relative",kl=g=>xb(g)==="fixed",Vg=g=>xb(g)==="responsive",u0=Ff("table_resize_bars"),Wg=Ff("table_style_by_css"),cl=Ff("table_merge_content_on_paste"),d0=g=>{const v=g.options,k=v.get("table_default_attributes");return v.isSet("table_default_attributes")?k:BT(g,k)},h0=g=>{const v=g.options,k=v.get("table_default_styles");return v.isSet("table_default_styles")?k:Bf(g,k)},$T=Ff("table_use_colgroups"),IC=g=>Ma(g,"[contenteditable]"),Ug=(g,v=!1)=>_o(g)?g.dom.isContentEditable:IC(g).fold(oe(v),k=>$f(k)==="true"),$f=g=>g.dom.contentEditable,Mc=g=>Xe.fromDom(g.getBody()),cu=g=>v=>Vt(v,Mc(g)),uu=g=>{Re(g,"data-mce-style");const v=k=>Re(k,"data-mce-style");it(_c(g),v),it(Dl(g),v),it(jh(g),v)},yb=g=>Xe.fromDom(g.selection.getStart()),wb=g=>g.getBoundingClientRect().width,Zm=g=>g.getBoundingClientRect().height,kx=g=>(v,k)=>{const _=v.dom.getStyle(k,g)||v.dom.getAttrib(k,g);return Be.from(_).filter(Se)},FC=kx("width"),BC=kx("height"),Ax=g=>/^(\d+(\.\d+)?)%$/.test(g),Gm=g=>/^(\d+(\.\d+)?)px$/.test(g),ws=g=>or(g,Ds("table")).exists(Ug),Jn=(g,v)=>{const k=v.column,_=v.column+v.colspan-1,B=v.row,Z=v.row+v.rowspan-1;return k<=g.finishCol&&_>=g.startCol&&B<=g.finishRow&&Z>=g.startRow},Xg=(g,v)=>v.column>=g.startCol&&v.column+v.colspan-1<=g.finishCol&&v.row>=g.startRow&&v.row+v.rowspan-1<=g.finishRow,g0=(g,v)=>{let k=!0;const _=jt(Xg,v);for(let B=v.startRow;B<=v.finishRow;B++)for(let Z=v.startCol;Z<=v.finishCol;Z++)k=k&&ve.getAt(g,B,Z).exists(_);return k?Be.some(v):Be.none()},f0=(g,v)=>nc(Math.min(g.row,v.row),Math.min(g.column,v.column),Math.max(g.row+g.rowspan-1,v.row+v.rowspan-1),Math.max(g.column+g.colspan-1,v.column+v.colspan-1)),Tx=(g,v,k)=>{const _=ve.findItem(g,v,Vt),B=ve.findItem(g,k,Vt);return _.bind(Z=>B.map(se=>f0(Z,se)))},m0=(g,v,k)=>Tx(g,v,k).bind(_=>g0(g,_)),Er=(g,v,k,_)=>ve.findItem(g,v,Vt).bind(B=>{const Z=k>0?B.row+B.rowspan-1:B.row,se=_>0?B.column+B.colspan-1:B.column;return ve.getAt(g,Z+k,se+_).map(Ae=>Ae.element)}),Ex=(g,v,k)=>Tx(g,v,k).map(_=>{const B=ve.filterItems(g,jt(Jn,_));return Rn(B,Z=>Z.element)}),HC=(g,v)=>{const k=(_,B)=>bn(B,_);return ve.findItem(g,v,k).map(_=>_.element)},_x=(g,v,k)=>qi(g).bind(_=>{const B=zf(_);return Er(B,g,v,k)}),Nt=(g,v,k)=>{const _=zf(g);return Ex(_,v,k)},qm=(g,v,k,_,B)=>{const Z=zf(g),se=Vt(g,k)?Be.some(v):HC(Z,v),ge=Vt(g,B)?Be.some(_):HC(Z,_);return se.bind(Ae=>ge.bind(Ue=>Ex(Z,Ae,Ue)))},$C=(g,v,k)=>{const _=zf(g);return m0(_,v,k)},zf=ve.fromTable;var zC=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],rg=()=>{const g=Ue=>Xe.fromDom(Ue.dom.cloneNode(!1)),v=Ue=>Mn(Ue).dom,k=Ue=>hr(Ue)?Is(Ue)==="body"?!0:Zn(zC,Is(Ue)):!1,_=Ue=>hr(Ue)?Zn(["br","img","hr","input"],Is(Ue)):!1,B=Ue=>hr(Ue)&&Ms(Ue,"contenteditable")==="false",Z=(Ue,ct)=>Ue.dom.compareDocumentPosition(ct.dom),se=(Ue,ct)=>{const Kt=gt(Ue);Ea(ct,Kt)},ge=Ue=>{const ct=Is(Ue);return Zn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ct)},Ae=Ue=>hr(Ue)?Ne(Ue,"lang"):Be.none();return{up:oe({selector:Oo,closest:Ma,predicate:zt,all:Ys}),down:oe({selector:js,predicate:st}),styles:oe({get:na,getRaw:$a,set:Jo,remove:oa}),attrs:oe({get:Ms,set:mr,remove:Re,copyTo:se}),insert:oe({before:_a,after:xa,afterAll:Fs,append:pr,appendAll:Oa,prepend:ea,wrap:ji}),remove:oe({unwrap:Di,remove:ya}),create:oe({nu:Xe.fromTag,clone:g,text:Xe.fromText}),query:oe({comparePosition:Z,prevSibling:hi,nextSibling:Ja}),property:oe({children:so,name:Is,parent:ps,document:v,isText:Ta,isComment:Ts,isElement:hr,isSpecial:ge,getLanguage:Ae,getText:pa,setText:zc,isBoundary:k,isEmptyTag:_,isNonEditable:B}),eq:Vt,is:Hn}};const p0=(g,v,k,_)=>{const B=k[0],Z=k.slice(1);return _(g,v,B,Z)},Vf=(g,v,k)=>k.length>0?p0(g,v,k,Cb):Be.none(),Cb=(g,v,k,_)=>{const B=v(g,k);return Gn(_,(Z,se)=>{const ge=v(g,se);return Yg(g,Z,ge)},B)},Yg=(g,v,k)=>v.bind(_=>k.filter(jt(g.eq,_))),ba=(g,v)=>jt(g.eq,v),kh=(g,v,k,_=no)=>{const B=[v].concat(g.up().all(v)),Z=[k].concat(g.up().all(k)),se=ct=>As(ct,_).fold(()=>ct,Sn=>ct.slice(0,Sn+1)),ge=se(B),Ae=se(Z),Ue=te(ge,ct=>Dt(Ae,ba(g,ct)));return{firstpath:ge,secondpath:Ae,shared:Ue}},VC=Vf,ag=kh,Ox=rg(),Wf=(g,v)=>VC(Ox,(k,_)=>g(_),v),Rx=(g,v,k)=>ag(Ox,g,v,k),Dx=g=>Oo(g,"table"),xc=(g,v,k)=>{const _=B=>Z=>k!==void 0&&k(Z)||Vt(Z,B);return Vt(g,v)?Be.some({boxes:Be.some([g]),start:g,finish:v}):Dx(g).bind(B=>Dx(v).bind(Z=>{if(Vt(B,Z))return Be.some({boxes:Nt(B,g,v),start:g,finish:v});if(bn(B,Z)){const se=Mt(v,"td,th",_(B)),ge=se.length>0?se[se.length-1]:v;return Be.some({boxes:qm(B,g,B,v,Z),start:g,finish:ge})}else if(bn(Z,B)){const se=Mt(g,"td,th",_(Z)),ge=se.length>0?se[se.length-1]:g;return Be.some({boxes:qm(Z,g,B,v,Z),start:g,finish:ge})}else return Rx(g,v).shared.bind(se=>Ma(se,"table",k).bind(ge=>{const Ae=Mt(v,"td,th",_(ge)),Ue=Ae.length>0?Ae[Ae.length-1]:v,ct=Mt(g,"td,th",_(ge)),Kt=ct.length>0?ct[ct.length-1]:g;return Be.some({boxes:qm(ge,g,B,v,Z),start:Kt,finish:Ue})}))}))},Km=(g,v)=>{const k=js(g,v);return k.length>0?Be.some(k):Be.none()},zT=(g,v)=>te(g,k=>Eo(k,v)),jg=(g,v,k)=>rl(g,v).bind(_=>rl(g,k).bind(B=>Wf(Dx,[_,B]).map(Z=>({first:_,last:B,table:Z})))),VT=(g,v)=>Oo(g,"table").bind(k=>rl(k,v).bind(_=>xc(_,g).bind(B=>B.boxes.map(Z=>({boxes:Z,start:B.start,finish:B.finish}))))),Uf=(g,v,k,_,B)=>zT(g,B).bind(Z=>_x(Z,v,k).bind(se=>VT(se,_))),b0=(g,v)=>Km(g,v),WT=(g,v,k)=>jg(g,v,k).bind(_=>{const B=Ae=>Vt(g,Ae),Z="thead,tfoot,tbody,table",se=Oo(_.first,Z,B),ge=Oo(_.last,Z,B);return se.bind(Ae=>ge.bind(Ue=>Vt(Ae,Ue)?$C(_.table,_.first,_.last):Be.none()))}),Sb=Wt,Vd=g=>{const v=(_,B)=>Ne(_,B).exists(Z=>parseInt(Z,10)>1),k=_=>v(_,"rowspan")||v(_,"colspan");return g.length>0&&ms(g,k)?Be.some(g):Be.none()},rc=(g,v,k)=>v.length<=1?Be.none():WT(g,k.firstSelectedSelector,k.lastSelectedSelector).map(_=>({bounds:_,cells:v})),en="data-mce-selected",Jm="td["+en+"],th["+en+"]",ul="["+en+"]",Mx="data-mce-first-selected",Px="td["+Mx+"],th["+Mx+"]",Lx="data-mce-last-selected",Jr="td["+Lx+"],th["+Lx+"]",UT=ul,Xf={selected:en,selectedSelector:Jm,firstSelected:Mx,firstSelectedSelector:Px,lastSelected:Lx,lastSelectedSelector:Jr},ig=(g,v,k)=>({element:k,mergable:rc(v,g,Xf),unmergable:Vd(g),selection:Sb(g)}),Qm=(g,v,k)=>({element:g,clipboard:v,generators:k}),Nx=(g,v,k,_)=>({selection:Sb(g),clipboard:k,generators:_}),Ah=g=>qi(g).bind(v=>b0(v,Xf.firstSelectedSelector)).fold(oe(g),v=>v[0]),WC=g=>(v,k)=>{const _=Is(v),B=_==="col"||_==="colgroup"?Ah(v):v;return Ma(B,g,k)},bi=WC("th,td,caption"),v0=WC("th,td"),_r=g=>Mu(g.model.table.getSelectedCells()),Ix=g=>Ht(_r(g),v=>Eo(v,Xf.selectedSelector)),yc=g=>qi(g[0]).map(v=>{const k=Po(v,UT);return uu(k),[k]}),ep=(g,v)=>Rn(v,k=>g.selection.serializer.serialize(k.dom,{})).join(""),Wd=(g,v)=>{const k=g.getDoc(),_=Ge(Xe.fromDom(g.getBody())),B=Xe.fromTag("div",k);mr(B,"data-mce-bogus","all"),fr(B,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const Z=mt(_);Oa(B,v),pr(Z,B);const se=B.dom.innerText;return ya(B),se},R4=(g,v)=>{g.on("BeforeGetContent",k=>{const _=B=>{k.preventDefault(),yc(B).each(Z=>{const se=k.format==="text"?Wd(g,Z):ep(g,Z);k.content=se})};if(k.selection===!0){const B=Ix(g);B.length>=1&&_(B)}}),g.on("BeforeSetContent",k=>{if(k.selection===!0&&k.paste===!0){const _=_r(g);De(_).each(B=>{qi(B).each(Z=>{const se=Ht(NC(k.content),Ae=>Is(Ae)!=="meta"),ge=Ds("table");if(cl(g)&&se.length===1&&ge(se[0])){k.preventDefault();const Ae=Xe.fromDom(g.getDoc()),Ue=vc(Ae),ct=Qm(B,se[0],Ue);v.pasteCells(Z,ct).each(()=>{g.focus()})}})})}})},x0=(g,v)=>({element:g,offset:v}),XT=(g,v,k)=>g.property().isText(v)&&g.property().getText(v).trim().length===0||g.property().isComment(v)?k(v).bind(_=>XT(g,_,k).orThunk(()=>Be.some(_))):Be.none(),UC=(g,v)=>g.property().isText(v)?g.property().getText(v).length:g.property().children(v).length,dd=(g,v)=>{const k=XT(g,v,g.query().prevSibling).getOr(v);if(g.property().isText(k))return x0(k,UC(g,k));const _=g.property().children(k);return _.length>0?dd(g,_[_.length-1]):x0(k,UC(g,k))},Ud=dd,ac=rg(),tp=g=>Ud(ac,g),y0=(g,v)=>{Fr(g)||Lt(g).each(_=>{const B=_.value/2;ar(g,B,_.unit),ar(v,B,_.unit)})},w0=g=>Rn(g,oe(0)),np=(g,v,k,_,B)=>B(g.slice(0,v)).concat(_).concat(B(g.slice(k))),Zg=g=>(v,k,_,B)=>{if(g(_)){const Z=Math.max(B,v[k]-Math.abs(_)),se=Math.abs(Z-v[k]);return _>=0?se:-se}else return _},Th=Zg(g=>g<0),op=Zg(ut),Gg=()=>{const g=(ge,Ae,Ue,ct,Kt)=>{const Sn=Th(ge,Ae,ct,Kt);return np(ge,Ae,Ue+1,[Sn,0],w0)},v=(ge,Ae,Ue,ct)=>{const Kt=(100+Ue)/100,Sn=Math.max(ct,(ge[Ae]+Ue)/Kt);return Rn(ge,(pn,ln)=>(ln===Ae?Sn:pn/Kt)-pn)},k=(ge,Ae,Ue,ct,Kt,Sn)=>Sn?v(ge,Ae,ct,Kt):g(ge,Ae,Ue,ct,Kt);return{resizeTable:(ge,Ae)=>ge(Ae),clampTableDelta:Th,calcLeftEdgeDeltas:k,calcMiddleDeltas:(ge,Ae,Ue,ct,Kt,Sn,pn)=>k(ge,Ue,ct,Kt,Sn,pn),calcRightEdgeDeltas:(ge,Ae,Ue,ct,Kt,Sn)=>{if(Sn)return v(ge,Ue,ct,Kt);{const pn=Th(ge,Ue,ct,Kt);return w0(ge.slice(0,Ue)).concat([pn])}},calcRedestributedWidths:(ge,Ae,Ue,ct)=>{if(ct){const Sn=(Ae+Ue)/Ae,pn=Rn(ge,ln=>ln/Sn);return{delta:Sn*100-100,newSizes:pn}}else return{delta:Ue,newSizes:ge}}}},lg=()=>{const g=(se,ge,Ae,Ue,ct)=>{const Kt=Ue>=0?Ae:ge,Sn=op(se,Kt,Ue,ct);return np(se,ge,Ae+1,[Sn,-Sn],w0)};return{resizeTable:(se,ge,Ae)=>{Ae&&se(ge)},clampTableDelta:(se,ge,Ae,Ue,ct)=>{if(ct){if(Ae>=0)return Ae;{const Kt=dt(se,(Sn,pn)=>Sn+pn-Ue,0);return Math.max(-Kt,Ae)}}else return Th(se,ge,Ae,Ue)},calcLeftEdgeDeltas:g,calcMiddleDeltas:(se,ge,Ae,Ue,ct,Kt)=>g(se,Ae,Ue,ct,Kt),calcRightEdgeDeltas:(se,ge,Ae,Ue,ct,Kt)=>{if(Kt)return w0(se);{const Sn=Ue/se.length;return Rn(se,oe(Sn))}},calcRedestributedWidths:(se,ge,Ae,Ue)=>({delta:0,newSizes:se})}},Yf=g=>ve.fromTable(g).grid,kb=Ds("th"),C0=g=>ms(g,v=>kb(v.element)),XC=(g,v)=>g&&v?"sectionCells":g?"section":"cells",Fx=g=>{const v=g.section==="thead",k=Xo(sp(g.cells),"th");return g.section==="tfoot"?{type:"footer"}:v||k?{type:"header",subType:XC(v,k)}:{type:"body"}},sp=g=>{const v=Ht(g,k=>kb(k.element));return v.length===0?Be.some("td"):v.length===g.length?Be.some("th"):Be.none()},YC=g=>{const v=Rn(g,B=>Fx(B).type),k=Zn(v,"header"),_=Zn(v,"footer");if(!k&&!_)return Be.some("body");{const B=Zn(v,"body");return k&&!B&&!_?Be.some("header"):!k&&!B&&_?Be.some("footer"):Be.none()}},YT=g=>Mo(g.all,v=>{const k=Fx(v);return k.type==="header"?Be.from(k.subType):Be.none()}),S0=(g,v,k)=>ta(k(g.element,v),!0,g.isLocked),Bx=(g,v)=>g.section!==v?Ha(g.element,g.cells,v,g.isNew):g,Ab=()=>({transformRow:Bx,transformCell:(g,v,k)=>{const _=k(g.element,v),B=Is(_)!=="td"?Ql(_,"td"):_;return ta(B,g.isNew,g.isLocked)}}),Hx=()=>({transformRow:Bx,transformCell:S0}),rp=()=>({transformRow:(g,v)=>Bx(g,v==="thead"?"tbody":v),transformCell:S0}),ap={getTableSectionType:(g,v)=>{const k=ve.fromTable(g);switch(YT(k).getOr(v)){case"section":return Ab();case"sectionCells":return Hx();case"cells":return rp()}},section:Ab,sectionCells:Hx,cells:rp,fallback:()=>({transformRow:Wt,transformCell:S0})},hd=(g,v,k,_)=>{k===_?Re(g,v):mr(g,v,k)},Tb=(g,v,k)=>{Xn(jo(g,v)).fold(()=>ea(g,k),_=>xa(_,k))},jC=(g,v)=>{const k=Si(g,v).getOrThunk(()=>{const _=Xe.fromTag(v,$n(g).dom);return v==="thead"?Tb(g,"caption,colgroup",_):v==="colgroup"?Tb(g,"caption",_):pr(g,_),_});return Ra(k),k},ZC=(g,v)=>{const k=[],_=[],B=pn=>Rn(pn,ln=>{ln.isNew&&k.push(ln.element);const jn=ln.element;return Ra(jn),it(ln.cells,Xt=>{Xt.isNew&&_.push(Xt.element),hd(Xt.element,"colspan",Xt.colspan,1),hd(Xt.element,"rowspan",Xt.rowspan,1),pr(jn,Xt.element)}),jn}),Z=pn=>Un(pn,ln=>Rn(ln.cells,jn=>(hd(jn.element,"span",jn.colspan,1),jn.element))),se=(pn,ln)=>{const jn=jC(g,ln),cn=(ln==="colgroup"?Z:B)(pn);Oa(jn,cn)},ge=pn=>{Si(g,pn).each(ya)},Ae=(pn,ln)=>{pn.length>0?se(pn,ln):ge(ln)},Ue=[],ct=[],Kt=[],Sn=[];return it(v,pn=>{switch(pn.section){case"thead":Ue.push(pn);break;case"tbody":ct.push(pn);break;case"tfoot":Kt.push(pn);break;case"colgroup":Sn.push(pn);break}}),Ae(Sn,"colgroup"),Ae(Ue,"thead"),Ae(ct,"tbody"),Ae(Kt,"tfoot"),{newRows:k,newCells:_}},GC=g=>Rn(g,v=>{const k=ai(v.element);return it(v.cells,_=>{const B=Zi(_.element);hd(B,"colspan",_.colspan,1),hd(B,"rowspan",_.rowspan,1),pr(k,B)}),k}),jf=(g,v)=>Rn(g,k=>d(k,v)),P4=(g,v)=>g[v],Zf=(g,v)=>{if(g.length===0)return 0;const k=g[0];return As(g,B=>!v(k.element,B.element)).getOr(g.length)},ip=(g,v,k,_)=>{const B=P4(g,v),Z=B.section==="colgroup",se=Zf(B.cells.slice(k),_),ge=Z?1:Zf(jf(g.slice(v),k),_);return{colspan:se,rowspan:ge}},qC=(g,v)=>{const k=Rn(g,B=>Rn(B.cells,no)),_=(B,Z,se,ge)=>{for(let Ae=B;Ae<B+se;Ae++)for(let Ue=Z;Ue<Z+ge;Ue++)k[Ae][Ue]=!0};return Rn(g,(B,Z)=>{const se=Un(B.cells,(ge,Ae)=>{if(k[Z][Ae]===!1){const Ue=ip(g,Z,Ae,v);return _(Z,Ae,Ue.rowspan,Ue.colspan),[tc(ge.element,Ue.rowspan,Ue.colspan,ge.isNew)]}else return[]});return Ba(B.element,se,B.section,B.isNew)})},lp=(g,v,k)=>{const _=[];it(g.colgroups,B=>{const Z=[];for(let se=0;se<g.grid.columns;se++){const ge=ve.getColumnAt(g,se).map(Ae=>ta(Ae.element,k,!1)).getOrThunk(()=>ta(v.colGap(),!0,!1));Z.push(ge)}_.push(Ha(B.element,Z,"colgroup",k))});for(let B=0;B<g.grid.rows;B++){const Z=[];for(let Ae=0;Ae<g.grid.columns;Ae++){const Ue=ve.getAt(g,B,Ae).map(ct=>ta(ct.element,k,ct.isLocked)).getOrThunk(()=>ta(v.gap(),!0,!1));Z.push(Ue)}const se=g.all[B],ge=Ha(se.element,Z,se.section,k);_.push(ge)}return _},jT=(g,v)=>lp(g,v,!1),$x=g=>qC(g,Vt),KC=(g,v)=>Mo(g.all,k=>te(k.cells,_=>Vt(v,_.element))),JC=(g,v,k)=>{const _=Rn(v.selection,Z=>Ec(Z).bind(se=>KC(g,se)).filter(k)),B=xl(_);return Ku(B.length>0,B)},Ll=(g,v,k,_,B)=>(Z,se,ge,Ae)=>{const Ue=ve.fromTable(Z),ct=Be.from(Ae==null?void 0:Ae.section).getOrThunk(ap.fallback);return v(Ue,se).map(Sn=>{const pn=jT(Ue,ge),ln=g(pn,Sn,Vt,B(ge),ct),jn=O(ln.grid),Xt=$x(ln.grid);return{info:Sn,grid:Xt,cursor:ln.cursor,lockedColumns:jn}}).bind(Sn=>{const pn=ZC(Z,Sn.grid),ln=Be.from(Ae==null?void 0:Ae.sizing).getOrThunk(()=>z.getTableSize(Z)),jn=Be.from(Ae==null?void 0:Ae.resize).getOrThunk(lg);return k(Z,Sn.grid,Sn.info,{sizing:ln,resize:jn,section:ct}),_(Z),Re(Z,E),Sn.lockedColumns.length>0&&mr(Z,E,Sn.lockedColumns.join(",")),Be.some({cursor:Sn.cursor,newRows:pn.newRows,newCells:pn.newCells})})},L4=(g,v)=>Ec(v.element).bind(k=>KC(g,k).map(_=>({..._,generators:v.generators,clipboard:v.clipboard}))),qg=(g,v)=>JC(g,v,ut).map(k=>({cells:k,generators:v.generators,clipboard:v.clipboard})),ZT=(g,v)=>v.mergable,cg=(g,v)=>v.unmergable,Vc=(g,v)=>JC(g,v,ut),Xd=(g,v)=>JC(g,v,k=>!k.isLocked),Gf=(g,v)=>KC(g,v).exists(k=>!k.isLocked),QC=(g,v)=>ms(v,k=>Gf(g,k)),Eb=(g,v)=>ZT(g,v).filter(k=>QC(g,k.cells)),k0=(g,v)=>cg(g,v).filter(k=>QC(g,k)),Kg=(g,v,k,_)=>{const B=w(g).rows;if(B.length===0)return g;for(let Z=v.startRow;Z<=v.finishRow;Z++)for(let se=v.startCol;se<=v.finishCol;se++){const ge=B[Z],Ae=d(ge,se).isLocked;o(ge,se,ta(_(),!1,Ae))}return g},zx=(g,v,k,_)=>{const B=w(g).rows;let Z=!0;for(let se=0;se<B.length;se++)for(let ge=0;ge<b(B[0]);ge++){const Ae=B[se],Ue=d(Ae,ge),ct=Ue.element,Kt=k(ct,v);Kt&&!Z?o(Ae,ge,ta(_(),!0,Ue.isLocked)):Kt&&(Z=!1)}return g},Yd=(g,v)=>dt(g,(k,_)=>Dt(k,B=>v(B.element,_.element))?k:k.concat([_]),[]),Eh=(g,v,k,_)=>(v>0&&v<g[0].cells.length&&it(g,B=>{const Z=B.cells[v-1];let se=0;const ge=_();for(;B.cells.length>v+se&&k(Z.element,B.cells[v+se].element);)o(B,v+se,ta(ge,!0,B.cells[v+se].isLocked)),se++}),g),GT=(g,v,k,_)=>{const B=w(g).rows;if(v>0&&v<B.length){const Z=B[v-1].cells,se=Yd(Z,k);it(se,ge=>{let Ae=Be.none();for(let Ue=v;Ue<B.length;Ue++)for(let ct=0;ct<b(B[0]);ct++){const Kt=B[Ue],Sn=d(Kt,ct);k(Sn.element,ge.element)&&(Ae.isNone()&&(Ae=Be.some(_())),Ae.each(ln=>{o(Kt,ct,ta(ln,!0,Sn.isLocked))}))}})}return g},Qi=g=>{const v=Z=>Z(g),k=oe(g),_=()=>B,B={tag:!0,inner:g,fold:(Z,se)=>se(g),isValue:ut,isError:no,map:Z=>A0.value(Z(g)),mapError:_,bind:v,exists:v,forall:v,getOr:k,or:_,getOrThunk:k,orThunk:_,getOrDie:k,each:Z=>{Z(g)},toOptional:()=>Be.some(g)};return B},_b=g=>{const v=()=>k,k={tag:!1,inner:g,fold:(_,B)=>_(g),isValue:no,isError:ut,map:v,mapError:_=>A0.error(_(g)),bind:v,exists:no,forall:ut,getOr:Wt,or:Wt,getOrThunk:Wn,orThunk:Wn,getOrDie:Gt(String(g)),each:Bt,toOptional:Be.none};return k},A0={value:Qi,error:_b,fromOption:(g,v)=>g.fold(()=>_b(v),Qi)},Vx=(g,v,k)=>{if(g.row>=v.length||g.column>b(v[0]))return A0.error("invalid start address out of table bounds, row: "+g.row+", column: "+g.column);const _=v.slice(g.row),B=_[0].cells.slice(g.column),Z=b(k[0]),se=k.length;return A0.value({rowDelta:_.length-se,colDelta:B.length-Z})},qf=(g,v)=>{const k=b(g[0]),_=b(v[0]);return{rowDelta:0,colDelta:k-_}},Jg=(g,v)=>{const k=g.length,_=v.length;return{rowDelta:k-_,colDelta:0}},gd=(g,v,k,_)=>{const B=v.section==="colgroup"?k.col:k.cell;return Ao(g,Z=>ta(B(),!0,_(Z)))},Lu=(g,v,k,_)=>{const B=g[g.length-1];return g.concat(Ao(v,()=>{const Z=B.section==="colgroup"?k.colgroup:k.row,se=A(B,Z,Wt),ge=gd(se.cells.length,se,k,Ae=>$s(_,Ae.toString()));return a(se,ge)}))},e2=(g,v,k,_)=>Rn(g,B=>{const Z=gd(v,B,k,no);return eg(B,_,Z)}),qT=(g,v,k)=>Rn(g,_=>dt(k,(B,Z)=>{const se=gd(1,_,v,ut)[0];return C(B,Z,se)},_)),_h=(g,v,k)=>{const _=v.colDelta<0?e2:Wt,B=v.rowDelta<0?Lu:Wt,Z=O(g),se=b(g[0]),ge=Dt(Z,ct=>ct===se-1),Ae=_(g,Math.abs(v.colDelta),k,ge?se-1:se),Ue=O(Ae);return B(Ae,Math.abs(v.rowDelta),k,We(Ue,ut))},ug=(g,v,k,_)=>{const B=d(g[v],k),Z=jt(_,B.element),se=g[v];return g.length>1&&b(se)>1&&(k>0&&Z(m(se,k-1))||k<se.cells.length-1&&Z(m(se,k+1))||v>0&&Z(m(g[v-1],k))||v<g.length-1&&Z(m(g[v+1],k)))},T0=(g,v,k,_,B,Z)=>{const se=g.row,ge=g.column,Ae=k.length,Ue=b(k[0]),ct=se+Ae,Kt=ge+Ue+Z.length,Sn=We(Z,ut);for(let pn=se;pn<ct;pn++){let ln=0;for(let jn=ge;jn<Kt;jn++){if(Sn[jn]){ln++;continue}ug(v,pn,jn,B)&&zx(v,m(v[pn],jn),B,_.cell);const Xt=jn-ge-ln,cn=d(k[pn-se],Xt),dn=cn.element,Ho=_.replace(dn);o(v[pn],jn,ta(Ho,!0,cn.isLocked))}}return v},Ws=(g,v,k)=>{const _=b(v[0]),B=w(v).cols.length+g.row,Z=Ao(_-g.column,ge=>ge+g.column),se=te(Z,ge=>ms(k,Ae=>Ae!==ge)).getOr(_-1);return{row:B,column:se}},Yl=(g,v,k)=>Ht(k,_=>_>=g.column&&_<=b(v[0])+g.column),Kf=(g,v,k,_,B)=>{const Z=O(v),se=Ws(g,v,Z),ge=w(k).rows,Ae=Yl(se,ge,Z);return Vx(se,v,ge).map(ct=>{const Kt={...ct,colDelta:ct.colDelta-Ae.length},Sn=_h(v,Kt,_),pn=O(Sn),ln=Yl(se,ge,pn);return T0(se,Sn,ge,_,B,ln)})},cp=(g,v,k,_,B)=>{Eh(v,g,B,_.cell);const Z=Jg(k,v),se=_h(k,Z,_),ge=Jg(v,se),Ae=_h(v,ge,_);return Rn(Ae,(Ue,ct)=>eg(Ue,g,se[ct].cells))},ra=(g,v,k,_,B)=>{GT(v,g,B,_.cell);const Z=O(v),se=qf(v,k),ge={...se,colDelta:se.colDelta-Z.length},Ae=_h(v,ge,_),{cols:Ue,rows:ct}=w(Ae),Kt=O(Ae),Sn=qf(k,v),pn={...Sn,colDelta:Sn.colDelta+Kt.length},ln=qT(k,_,Kt),jn=_h(ln,pn,_);return[...Ue,...ct.slice(0,g),...jn,...ct.slice(g,ct.length)]},Jf=(g,v,k,_)=>A(g,B=>_(B,k),v),dg=(g,v,k,_,B)=>{const{rows:Z,cols:se}=w(g),ge=Z.slice(0,v),Ae=Z.slice(v),Ue=Jf(Z[k],(ct,Kt)=>v>0&&v<Z.length&&_(m(Z[v-1],Kt),m(Z[v],Kt))?d(Z[v],Kt):ta(B(ct.element,_),!0,ct.isLocked),_,B);return[...se,...ge,Ue,...Ae]},t2=(g,v,k,_,B,Z,se)=>{if(k==="colgroup"||!_){const ge=d(g,B);return ta(se(ge.element,Z),!0,!1)}else return d(g,v)},KT=(g,v,k,_,B)=>Rn(g,Z=>{const se=v>0&&v<b(Z)&&_(m(Z,v-1),m(Z,v)),ge=t2(Z,v,Z.section,se,k,_,B);return C(Z,v,ge)}),n2=(g,v)=>Un(g,k=>{const _=k.cells,B=Gn(v,(Z,se)=>se>=0&&se<Z.length?Z.slice(0,se).concat(Z.slice(se+1)):Z,_);return B.length>0?[Ha(k.element,B,k.section,k.isNew)]:[]}),aa=(g,v,k)=>{const{rows:_,cols:B}=w(g);return[...B,..._.slice(0,v),..._.slice(k+1)]},Ob=(g,v,k,_)=>m(g[v],k)!==void 0&&v>0&&_(m(g[v-1],k),m(g[v],k)),JT=(g,v,k)=>v>0&&k(m(g,v-1),m(g,v)),o2=(g,v,k,_)=>Ob(g,v,k,_)||JT(g[v],k,_),Qf=(g,v)=>ms(v,Wt)&&C0(g.cells)?ut:(_,B,Z)=>!(Is(_.element)==="th"&&v[Z]),fd=(g,v)=>ms(v,Wt)&&C0(g)?ut:(_,B,Z)=>!(Is(_.element)==="th"&&v[B]),Rb=(g,v,k,_)=>{const B=se=>se==="row"?Nr(v):Fr(v),Z=se=>B(se)?`${se}group`:se;return g?kb(v)?Z(k):null:_&&kb(v)?Z(k==="row"?"col":"row"):null},hg=(g,v)=>(k,_,B)=>Be.some(Rb(g,k.element,"col",v[B])),Fn=(g,v)=>(k,_)=>Be.some(Rb(g,k.element,"row",v[_])),s2=(g,v,k)=>ta(k(g.element,v),!0,g.isLocked),E0=(g,v,k,_,B,Z,se)=>{const ge=Ae=>Dt(v,Ue=>k(Ae.element,Ue.element));return Rn(g,(Ae,Ue)=>c(Ae,(ct,Kt)=>{if(ge(ct)){const Sn=se(ct,Ue,Kt)?B(ct,k,_):ct;return Z(Sn,Ue,Kt).each(pn=>{va(Sn.element,{scope:Be.from(pn)})}),Sn}else return ct}))},r2=(g,v,k)=>Un(g,(_,B)=>o2(g,B,v,k)?[]:[d(_,v)]),a2=(g,v,k)=>{const _=g[v];return Un(_.cells,(B,Z)=>o2(g,v,Z,k)?[]:[B])},Wx=(g,v,k,_,B)=>{const Z=w(g).rows,se=Un(v,ct=>r2(Z,ct,_)),ge=Rn(Z,ct=>C0(ct.cells)),Ae=fd(se,ge),Ue=Fn(k,ge);return E0(g,se,_,B,s2,Ue,Ae)},Ux=(g,v,k,_,B,Z,se)=>{const{cols:ge,rows:Ae}=w(g),Ue=Ae[v[0]],ct=Un(v,Xt=>a2(Ae,Xt,B)),Kt=Rn(Ue.cells,(Xt,cn)=>C0(r2(Ae,cn,B))),Sn=[...Ae];it(v,Xt=>{Sn[Xt]=se.transformRow(Ae[Xt],k)});const pn=[...ge,...Sn],ln=Qf(Ue,Kt),jn=hg(_,Kt);return E0(pn,ct,B,Z,se.transformCell,jn,ln)},up=(g,v,k,_)=>{const B=w(g).rows,Z=Rn(v,se=>d(B[se.row],se.column));return E0(g,Z,k,_,s2,Be.none,ut)},em={generate:g=>{if(!lo(g))throw new Error("cases must be an array");if(g.length===0)throw new Error("there must be at least one case");const v=[],k={};return it(g,(_,B)=>{const Z=Cn(_);if(Z.length!==1)throw new Error("one and only one name per case");const se=Z[0],ge=_[se];if(k[se]!==void 0)throw new Error("duplicate key detected:"+se);if(se==="cata")throw new Error("cannot have a case named cata (sorry)");if(!lo(ge))throw new Error("case arguments must be an array");v.push(se),k[se]=(...Ae)=>{const Ue=Ae.length;if(Ue!==ge.length)throw new Error("Wrong number of arguments to case "+se+". Expected "+ge.length+" ("+ge+"), got "+Ue);return{fold:(...Kt)=>{if(Kt.length!==g.length)throw new Error("Wrong number of arguments to fold. Expected "+g.length+", got "+Kt.length);return Kt[B].apply(null,Ae)},match:Kt=>{const Sn=Cn(Kt);if(v.length!==Sn.length)throw new Error("Wrong number of arguments to match. Expected: "+v.join(",")+`
Actual: `+Sn.join(","));if(!ms(v,ln=>Zn(Sn,ln)))throw new Error("Not all branches were specified when using match. Specified: "+Sn.join(", ")+`
Required: `+v.join(", "));return Kt[se].apply(null,Ae)},log:Kt=>{console.log(Kt,{constructors:v,constructor:se,params:Ae})}}}}),k}},dp={...em.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},O0=(g,v)=>g.length===0?dp.none():g.length===1?dp.only(0):v===0?dp.left(0,1):v===g.length-1?dp.right(v-1,v):v>0&&v<g.length-1?dp.middle(v-1,v,v+1):dp.none(),md=(g,v,k,_,B)=>{const Z=g.slice(0),se=O0(g,v),ge=oe(Rn(Z,oe(0))),Ae=Sn=>_.singleColumnWidth(Z[Sn],k),Ue=(Sn,pn)=>B.calcLeftEdgeDeltas(Z,Sn,pn,k,_.minCellWidth(),_.isRelative),ct=(Sn,pn,ln)=>B.calcMiddleDeltas(Z,Sn,pn,ln,k,_.minCellWidth(),_.isRelative),Kt=(Sn,pn)=>B.calcRightEdgeDeltas(Z,Sn,pn,k,_.minCellWidth(),_.isRelative);return se.fold(ge,Ae,Ue,ct,Kt)},QT=(g,v,k)=>{let _=0;for(let B=g;B<v;B++)_+=k[B]!==void 0?k[B]:0;return _},R0=(g,v)=>{const k=ve.justCells(g);return Rn(k,_=>{const B=QT(_.column,_.column+_.colspan,v);return{element:_.element,width:B,colspan:_.colspan}})},D0=(g,v)=>{const k=ve.justColumns(g);return Rn(k,(_,B)=>({element:_.element,width:v[B],colspan:_.colspan}))},eE=(g,v)=>Rn(g.all,(k,_)=>({element:k.element,height:v[_]})),tE=g=>Gn(g,(v,k)=>v+k,0),i2=(g,v)=>ve.hasColumns(g)?D0(g,v):R0(g,v),Mb=(g,v,k)=>{const _=i2(g,v);it(_,B=>{k.setElementWidth(B.element,B.width)})},l2=(g,v,k,_,B)=>{const Z=ve.fromTable(g),se=B.getCellDelta(v),ge=B.getWidths(Z,B),Ae=k===Z.grid.columns-1,Ue=_.clampTableDelta(ge,k,se,B.minCellWidth(),Ae),ct=md(ge,k,Ue,B,_),Kt=Rn(ct,(Sn,pn)=>Sn+ge[pn]);Mb(Z,Kt,B),_.resizeTable(B.adjustTableWidth,Ue,Ae)},Xx=(g,v,k)=>{const _=ve.fromTable(g),B=Wm(_,g),Z=Rn(B,(Ae,Ue)=>k===Ue?Math.max(v+Ae,Lc()):Ae),se=eE(_,Z);it(se,Ae=>{Id(Ae.element,Ae.height)}),it(ve.justCells(_),Ae=>{Df(Ae.element)});const ge=tE(Z);Id(g,ge)},nE=(g,v,k,_,B)=>{const Z=ve.generate(v),se=_.getWidths(Z,_),ge=_.pixelWidth(),{newSizes:Ae,delta:Ue}=B.calcRedestributedWidths(se,ge,k.pixelDelta,_.isRelative);Mb(Z,Ae,_),_.adjustTableWidth(Ue)},Pb=(g,v,k,_)=>{const B=ve.generate(v),Z=_.getWidths(B,_);Mb(B,Z,_)},hp=g=>dt(g,(k,_)=>Dt(k,Z=>Z.column===_.column)?k:k.concat([_]),[]).sort((k,_)=>k.column-_.column),Qg=Ds("col"),M0=Ds("colgroup"),Yx=g=>Is(g)==="tr"||M0(g),P0=g=>{const v=Mr(g,"colspan",1),k=Mr(g,"rowspan",1);return{element:g,colspan:v,rowspan:k}},jx=(g,v=P0)=>{const k=ge=>Qg(ge.element)?g.col(ge):g.cell(ge),_=ge=>M0(ge.element)?g.colgroup(ge):g.row(ge),B=ge=>{if(Yx(ge))return _({element:ge});{const Ae=ge,Ue=k(v(Ae));return Z=Be.some({item:Ae,replacement:Ue}),Ue}};let Z=Be.none();return{getOrInit:(ge,Ae)=>Z.fold(()=>B(ge),Ue=>Ae(ge,Ue.item)?Ue.replacement:B(ge))}},Zx=g=>v=>{const k=[],_=(se,ge)=>te(k,Ae=>ge(Ae.item,se)),B=se=>{const ge=g==="td"?{scope:null}:{},Ae=v.replace(se,g,ge);return k.push({item:se,sub:Ae}),Ae};return{replaceOrInit:(se,ge)=>{if(Yx(se)||Qg(se))return se;{const Ae=se;return _(Ae,ge).fold(()=>B(Ae),Ue=>ge(se,Ue.item)?Ue.sub:B(Ae))}}}},Gx=g=>Ne(g,"scope").map(v=>v.substr(0,3)),Wc={modification:jx,transform:Zx,merging:g=>({unmerge:_=>{const B=Gx(_);return B.each(Z=>mr(_,"scope",Z)),()=>{const Z=g.cell({element:_,colspan:1,rowspan:1});return oa(Z,"width"),oa(_,"width"),B.each(se=>mr(Z,"scope",se)),Z}},merge:_=>{const B=()=>{const Z=xl(Rn(_,Gx));if(Z.length===0)return Be.none();{const se=Z[0],ge=["row","col"];return Dt(Z,Ue=>Ue!==se&&Zn(ge,Ue))?Be.none():Be.from(se)}};return oa(_[0],"width"),B().fold(()=>Re(_[0],"scope"),Z=>mr(_[0],"scope",Z+"group")),oe(_[0])}})},tm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],u2=(g,v)=>{const k=g.property().name(v);return Zn(["ol","ul"],k)},ef=(g,v)=>{const k=g.property().name(v);return Zn(tm,k)},nm=(g,v)=>Zn(["br","img","hr","input"],g.property().name(v)),qx=rg(),At=g=>ef(qx,g),pd=g=>u2(qx,g),om=g=>nm(qx,g),oE=g=>{const v=Ds("br"),k=Ae=>ms(Ae,Ue=>v(Ue)||Ta(Ue)&&pa(Ue).trim().length===0),_=Ae=>Is(Ae)==="li"||zt(Ae,pd).isSome(),B=Ae=>Ja(Ae).map(Ue=>At(Ue)?!0:om(Ue)?Is(Ue)!=="img":!1).getOr(!1),Z=Ae=>If(Ae).bind(Ue=>{const ct=B(Ue);return ps(Ue).map(Kt=>ct===!0||_(Kt)||v(Ue)||At(Kt)&&!Vt(Ae,Kt)?[]:[Xe.fromTag("br")])}).getOr([]),ge=(()=>{const Ae=Un(g,Ue=>{const ct=so(Ue);return k(ct)?[]:ct.concat(Z(Ue))});return Ae.length===0?[Xe.fromTag("br")]:Ae})();Ra(g[0]),Oa(g[0],ge)},Lb=g=>Ug(g,!0),Nu=g=>{_c(g).length===0&&ya(g)},gp=(g,v)=>({grid:g,cursor:v}),d2=g=>Mo(g,v=>Mo(v.cells,k=>{const _=k.element;return Ku(Lb(_),_)})),h2=(g,v,k)=>{var _,B;const Z=w(g).rows;return Be.from((B=(_=Z[v])===null||_===void 0?void 0:_.cells[k])===null||B===void 0?void 0:B.element).filter(Lb).orThunk(()=>d2(Z))},jl=(g,v,k)=>{const _=h2(g,v,k);return gp(g,_)},L0=g=>dt(g,(k,_)=>Dt(k,Z=>Z.row===_.row)?k:k.concat([_]),[]).sort((k,_)=>k.row-_.row),g2=(g,v,k,_)=>{const B=v[0].row,Z=L0(v),se=Gn(Z,(ge,Ae)=>({grid:dg(ge.grid,B,Ae.row+ge.delta,k,_.getOrInit),delta:ge.delta+1}),{grid:g,delta:0}).grid;return jl(se,B,v[0].column)},sE=(g,v,k,_)=>{const B=L0(v),Z=B[B.length-1],se=Z.row+Z.rowspan,ge=Gn(B,(Ae,Ue)=>dg(Ae,se,Ue.row,k,_.getOrInit),g);return jl(ge,se,v[0].column)},f2=(g,v,k,_)=>{const B=v.details,Z=hp(B),se=Z[0].column,ge=Gn(Z,(Ae,Ue)=>({grid:KT(Ae.grid,se,Ue.column+Ae.delta,k,_.getOrInit),delta:Ae.delta+1}),{grid:g,delta:0}).grid;return jl(ge,B[0].row,se)},rE=(g,v,k,_)=>{const B=v.details,Z=B[B.length-1],se=Z.column+Z.colspan,ge=hp(B),Ae=Gn(ge,(Ue,ct)=>KT(Ue,se,ct.column,k,_.getOrInit),g);return jl(Ae,B[0].row,se)},m2=(g,v,k,_)=>{const B=hp(v),Z=Rn(B,ge=>ge.column),se=Wx(g,Z,!0,k,_.replaceOrInit);return jl(se,v[0].row,v[0].column)},aE=(g,v,k,_)=>{const B=up(g,v,k,_.replaceOrInit);return jl(B,v[0].row,v[0].column)},iE=(g,v,k,_)=>{const B=hp(v),Z=Rn(B,ge=>ge.column),se=Wx(g,Z,!1,k,_.replaceOrInit);return jl(se,v[0].row,v[0].column)},p2=(g,v,k,_)=>{const B=up(g,v,k,_.replaceOrInit);return jl(B,v[0].row,v[0].column)},fp=(g,v)=>(k,_,B,Z,se)=>{const ge=L0(_),Ae=Rn(ge,ct=>ct.row),Ue=Ux(k,Ae,g,v,B,Z.replaceOrInit,se);return jl(Ue,_[0].row,_[0].column)},lE=fp("thead",!0),b2=fp("tbody",!1),cE=fp("tfoot",!1),Ia=(g,v,k,_)=>{const B=hp(v.details),Z=n2(g,Rn(B,ge=>ge.column)),se=Z.length>0?Z[0].cells.length-1:0;return jl(Z,B[0].row,Math.min(B[0].column,se))},Kx=(g,v,k,_)=>{const B=L0(v),Z=aa(g,B[0].row,B[B.length-1].row),se=Math.max(w(Z).rows.length-1,0);return jl(Z,Math.min(v[0].row,se),v[0].column)},v2=(g,v,k,_)=>{const B=v.cells;oE(B);const Z=Kg(g,v.bounds,k,_.merge(B));return gp(Z,Be.from(B[0]))},x2=(g,v,k,_)=>{const Z=Gn(v,(se,ge)=>zx(se,ge,k,_.unmerge(ge)),g);return gp(Z,Be.from(v[0]))},Jx=(g,v,k,_)=>{const Z=((Ae,Ue)=>{const ct=ve.fromTable(Ae);return lp(ct,Ue,!0)})(v.clipboard,v.generators),se=ec(v.row,v.column);return Kf(se,g,Z,v.generators,k).fold(()=>gp(g,Be.some(v.element)),Ae=>jl(Ae,v.row,v.column))},el=(g,v,k)=>{const _=Md(g,k.section),B=ve.generate(_);return lp(B,v,!0)},du=(g,v,k,_)=>{const B=w(g).rows,Z=v.cells[0].column,se=B[v.cells[0].row],ge=el(v.clipboard,v.generators,se),Ae=cp(Z,g,ge,v.generators,k);return jl(Ae,v.cells[0].row,v.cells[0].column)},y2=(g,v,k,_)=>{const B=w(g).rows,Z=v.cells[v.cells.length-1].column+v.cells[v.cells.length-1].colspan,se=B[v.cells[0].row],ge=el(v.clipboard,v.generators,se),Ae=cp(Z,g,ge,v.generators,k);return jl(Ae,v.cells[0].row,Z)},Qx=(g,v,k,_)=>{const B=w(g).rows,Z=v.cells[0].row,se=B[Z],ge=el(v.clipboard,v.generators,se),Ae=ra(Z,g,ge,v.generators,k);return jl(Ae,v.cells[0].row,v.cells[0].column)},ey=(g,v,k,_)=>{const B=w(g).rows,Z=v.cells[v.cells.length-1].row+v.cells[v.cells.length-1].rowspan,se=B[v.cells[0].row],ge=el(v.clipboard,v.generators,se),Ae=ra(Z,g,ge,v.generators,k);return jl(Ae,Z,v.cells[0].column)},uE=(g,v)=>{const k=ve.fromTable(g);return Vc(k,v).bind(B=>{const Z=B[B.length-1],se=B[0].column,ge=Z.column+Z.colspan,Ae=zo(Rn(k.all,Ue=>Ht(Ue.cells,ct=>ct.column>=se&&ct.column<ge)));return sp(Ae)}).getOr("")},N0=(g,v)=>{const k=ve.fromTable(g);return Vc(k,v).bind(sp).getOr("")},w2=(g,v)=>{const k=ve.fromTable(g);return Vc(k,v).bind(B=>{const Z=B[B.length-1],se=B[0].row,ge=Z.row+Z.rowspan,Ae=k.all.slice(se,ge);return YC(Ae)}).getOr("")},Nb=(g,v,k,_)=>Pb(g,v,k,_.sizing),C2=(g,v,k,_)=>nE(g,v,k,_.sizing,_.resize),Hi=(g,v)=>Dt(v,k=>k.column===0&&k.isLocked),dE=(g,v)=>Dt(v,k=>k.column+k.colspan>=g.grid.columns&&k.isLocked),Iu=(g,v)=>{const k=Pe(g),_=hp(v);return dt(_,(B,Z)=>{const ge=k[Z.column].map(Hc).getOr(0);return B+ge},0)},Ca=g=>(v,k)=>Vc(v,k).filter(_=>!(g?Hi:dE)(v,_)).map(_=>({details:_,pixelDelta:Iu(v,_)})),Oh=(g,v)=>Xd(g,v).map(k=>({details:k,pixelDelta:-Iu(g,k)})),mp=g=>(v,k)=>qg(v,k).filter(_=>!(g?Hi:dE)(v,_.cells)),ty=Wc.transform("th"),Ib=Wc.transform("td"),S2=Ll(g2,Vc,Bt,Bt,Wc.modification),tf=Ll(sE,Vc,Bt,Bt,Wc.modification),Nl=Ll(f2,Ca(!0),C2,Bt,Wc.modification),Rh=Ll(rE,Ca(!1),C2,Bt,Wc.modification),k2=Ll(Ia,Oh,C2,Nu,Wc.modification),hE=Ll(Kx,Vc,Bt,Nu,Wc.modification),ny=Ll(m2,Xd,Bt,Bt,ty),I0=Ll(iE,Xd,Bt,Bt,Ib),oy=Ll(lE,Xd,Bt,Bt,ty),sy=Ll(b2,Xd,Bt,Bt,Ib),F0=Ll(cE,Xd,Bt,Bt,Ib),Bn=Ll(aE,Xd,Bt,Bt,ty),Fb=Ll(p2,Xd,Bt,Bt,Ib),ry=Ll(v2,Eb,Nb,Bt,Wc.merging),A2=Ll(x2,k0,Nb,Bt,Wc.merging),gE=Ll(Jx,L4,Nb,Bt,Wc.modification),Il=Ll(du,mp(!0),Bt,Bt,Wc.modification),T2=Ll(y2,mp(!1),Bt,Bt,Wc.modification),nf=Ll(Qx,qg,Bt,Bt,Wc.modification),E2=Ll(ey,qg,Bt,Bt,Wc.modification),ay=uE,_2=N0,Fl=w2,of=(g,v)=>g.dispatch("NewRow",{node:v}),iy=(g,v)=>g.dispatch("NewCell",{node:v}),sm=(g,v,k)=>{g.dispatch("TableModified",{...k,table:v})},fE=(g,v,k,_,B)=>{g.dispatch("TableSelectionChange",{cells:v,start:k,finish:_,otherCells:B})},$i=g=>{g.dispatch("TableSelectionClear")},zi=(g,v,k,_,B)=>{g.dispatch("ObjectResizeStart",{target:v,width:k,height:_,origin:B})},Al=(g,v,k,_,B)=>{g.dispatch("ObjectResized",{target:v,width:k,height:_,origin:B})},Vi={structure:!1,style:!0},yr={structure:!0,style:!1},Ei={structure:!0,style:!0},B0=(g,v)=>zd(g)?z.percentageSize(v):kl(g)?z.pixelSize(v):z.getTableSize(v),ly=(g,v,k)=>{const _=Wi=>Is(Mc(Wi))==="table",B=Wi=>!_(g)||Yf(Wi).rows>1,Z=Wi=>!_(g)||Yf(Wi).columns>1,se=zg(g),ge=Hf(g)?Bt:y0,Ae=Wi=>{switch(ci(g)){case"section":return ap.section();case"sectionCells":return ap.sectionCells();case"cells":return ap.cells();default:return ap.getTableSectionType(Wi,"section")}},Ue=(Wi,T1)=>T1.cursor.fold(()=>{const vg=_c(Wi);return De(vg).filter(_o).map(vs=>{k.clearSelectedCells(Wi.dom);const Gl=g.dom.createRng();return Gl.selectNode(vs.dom),g.selection.setRng(Gl),mr(vs,"data-mce-selected","1"),Gl})},vg=>{const vs=tp(vg),Gl=g.dom.createRng();return Gl.setStart(vs.element.dom,vs.offset),Gl.setEnd(vs.element.dom,vs.offset),g.selection.setRng(Gl),k.clearSelectedCells(Wi.dom),Be.some(Gl)}),ct=(Wi,T1,vg,vs)=>(Gl,E1,_1=!1)=>{uu(Gl);const BS=Xe.fromDom(g.getDoc()),vf=bc(vg,BS,se),Am={sizing:B0(g,Gl),resize:Hf(g)?Gg():lg(),section:Ae(Gl)};return T1(Gl)?Wi(Gl,E1,vf,Am).bind(O1=>{v.refresh(Gl.dom),it(O1.newRows,hv=>{of(g,hv.dom)}),it(O1.newCells,hv=>{iy(g,hv.dom)});const f_=Ue(Gl,O1);return _o(Gl)&&(uu(Gl),_1||sm(g,Gl.dom,vs)),f_.map(hv=>({rng:hv,effect:vs}))}):Be.none()},Kt=ct(hE,B,Bt,yr),Sn=ct(k2,Z,Bt,yr),pn=ct(S2,ut,Bt,yr),ln=ct(tf,ut,Bt,yr),jn=ct(Nl,ut,ge,yr),Xt=ct(Rh,ut,ge,yr),cn=ct(ry,ut,Bt,yr),dn=ct(A2,ut,Bt,yr),Ho=ct(Il,ut,Bt,yr),Hs=ct(T2,ut,Bt,yr),Or=ct(nf,ut,Bt,yr),ia=ct(E2,ut,Bt,yr),Aa=ct(gE,ut,Bt,Ei),bu=ct(Bn,ut,Bt,yr),Kd=ct(Fb,ut,Bt,yr),km=ct(ny,ut,Bt,yr),Lh=ct(I0,ut,Bt,yr),Xr=ct(oy,ut,Bt,yr),Cc=ct(sy,ut,Bt,yr),Sc=ct(F0,ut,Bt,yr);return{deleteRow:Kt,deleteColumn:Sn,insertRowsBefore:pn,insertRowsAfter:ln,insertColumnsBefore:jn,insertColumnsAfter:Xt,mergeCells:cn,unmergeCells:dn,pasteColsBefore:Ho,pasteColsAfter:Hs,pasteRowsBefore:Or,pasteRowsAfter:ia,pasteCells:Aa,makeCellsHeader:bu,unmakeCellsHeader:Kd,makeColumnsHeader:km,unmakeColumnsHeader:Lh,makeRowsHeader:Xr,makeRowsBody:Cc,makeRowsFooter:Sc,getTableRowType:Fl,getTableCellType:_2,getTableColType:ay}},cy=(g,v,k)=>{const _=Mr(g,v,1);k===1||_<=1?Re(g,v):mr(g,v,Math.min(k,_))},uy=(g,v)=>k=>{const _=k.column+k.colspan-1,B=k.column;return _>=g&&B<v},O2=(g,v,k)=>{if(ve.hasColumns(g)){const _=Ht(ve.justColumns(g),uy(v,k)),B=Rn(_,se=>{const ge=Zi(se.element);return cy(ge,"span",k-v),ge}),Z=Xe.fromTag("colgroup");return Oa(Z,B),[Z]}else return[]},R2=(g,v,k)=>Rn(g.all,_=>{const B=Ht(_.cells,uy(v,k)),Z=Rn(B,ge=>{const Ae=Zi(ge.element);return cy(Ae,"colspan",k-v),Ae}),se=Xe.fromTag("tr");return Oa(se,Z),se}),Bb=(g,v)=>{const k=ve.fromTable(g);return Xd(k,v).map(B=>{const Z=B[B.length-1],se=B[0].column,ge=Z.column+Z.colspan,Ae=O2(k,se,ge),Ue=R2(k,se,ge);return[...Ae,...Ue]})},H0=(g,v,k)=>{const _=ve.fromTable(g);return Vc(_,v).bind(Z=>{const se=lp(_,k,!1),Ae=w(se).rows.slice(Z[0].row,Z[Z.length-1].row+Z[Z.length-1].rowspan),Ue=Un(Ae,Kt=>{const Sn=Ht(Kt.cells,pn=>!pn.isLocked);return Sn.length>0?[{...Kt,cells:Sn}]:[]}),ct=$x(Ue);return Ku(ct.length>0,ct)}).map(Z=>GC(Z))},Hb=em.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),D2=(g,v,k)=>{const _=k.substring(0,k.length-g.length),B=parseFloat(_);return _===B.toString()?v(B):Hb.invalid(k)},rm={...Hb,from:g=>Pi(g,"%")?D2("%",Hb.percent,g):Pi(g,"px")?D2("px",Hb.pixels,g):Hb.invalid(g)},Uc=(g,v)=>Rn(g,k=>rm.from(k).fold(()=>k,B=>B/v*100+"%",B=>B+"%")),mE=(g,v,k)=>{const _=k/v;return Rn(g,B=>rm.from(B).fold(()=>B,se=>se*_+"px",se=>se/100*k+"px"))},pE=(g,v)=>{const k=g.fold(()=>oe(""),_=>{const B=_/v;return oe(B+"px")},()=>{const _=100/v;return oe(_+"%")});return Ao(v,k)},Fu=(g,v,k)=>g.fold(()=>v,_=>mE(v,k,_),_=>Uc(v,k)),pp=(g,v,k)=>{const _=rm.from(k),B=ms(g,Z=>Z==="0px")?pE(_,g.length):Fu(_,g,v);return dy(B)},am=(g,v)=>g.length===0?v:Gn(g,(k,_)=>rm.from(_).fold(oe(0),Wt,Wt)+k,0),Dh=(g,v)=>{const k=Math.floor(g);return{value:k+v,remainder:g-k}},ic=(g,v)=>rm.from(g).fold(oe(g),k=>k+v+"px",k=>k+v+"%"),dy=g=>{if(g.length===0)return g;const v=Gn(g,(_,B)=>{const Z=rm.from(B).fold(()=>({value:B,remainder:0}),se=>Dh(se,"px"),se=>({value:se+"%",remainder:0}));return{output:[Z.value].concat(_.output),remainder:_.remainder+Z.remainder}},{output:[],remainder:0}),k=v.output;return k.slice(0,k.length-1).concat([ic(k[k.length-1],Math.round(v.remainder))])},sf=rm.from,M2=(g,v,k)=>{it(v,_=>{const B=g.slice(_.column,_.colspan+_.column),Z=am(B,$l());Jo(_.element,"width",Z+k)})},$0=(g,v,k)=>{it(v,(_,B)=>{const Z=am([g[B]],$l());Jo(_.element,"width",Z+k)})},hy=(g,v,k)=>{it(k,_=>{oa(_.element,"height")}),it(v,(_,B)=>{Jo(_.element,"height",g[B])})},$b=g=>sf(g).fold(oe("px"),oe("px"),oe("%")),z0=(g,v,k)=>{const _=ve.fromTable(g),B=_.all,Z=ve.justCells(_),se=ve.justColumns(_);v.each(ge=>{const Ae=$b(ge),Ue=zs(g),ct=Bi(_,g),Kt=pp(ct,Ue,ge);ve.hasColumns(_)?$0(Kt,se,Ae):M2(Kt,Z,Ae),Jo(g,"width",ge)}),k.each(ge=>{const Ae=nt(g),Ue=ti(_,g),ct=pp(Ue,Ae,ge);hy(ct,B,Z),Jo(g,"height",ge)})},P2=$c,L2=pb,N2=xh,zb=g=>{Re(g,"width"),Re(g,"height")},im=g=>{const v=Cl(g);z0(g,Be.some(v),Be.none()),zb(g)},Vb=g=>{const v=Pf(g);z0(g,Be.some(v),Be.none()),zb(g)},bE=g=>{const v=ki(g);z0(g,Be.none(),Be.some(v)),zb(g)},gy=g=>{oa(g,"width");const v=Dl(g),k=v.length>0?v:_c(g);it(k,_=>{oa(_,"width"),zb(_)}),zb(g)},vE={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},V0=()=>Xe.fromTag("th"),xE=()=>Xe.fromTag("td"),I2=()=>Xe.fromTag("col"),yE=(g,v,k,_)=>{const B=Xe.fromTag("tr");for(let Z=0;Z<g;Z++){const se=_<v||Z<k?V0():xE();Z<k&&mr(se,"scope","row"),_<v&&mr(se,"scope","col"),pr(se,Xe.fromTag("br")),pr(B,se)}return B},F2=g=>{const v=Xe.fromTag("colgroup");return Ao(g,()=>pr(v,I2())),v},Wb=(g,v,k,_)=>Ao(g,B=>yE(v,k,_,B)),B2=(g,v,k,_,B,Z=vE)=>{const se=Xe.fromTag("table"),ge=B!=="cells";fr(se,Z.styles),Ea(se,Z.attributes),Z.colGroups&&pr(se,F2(v));const Ae=Math.min(g,k);if(ge&&k>0){const pn=Xe.fromTag("thead");pr(se,pn);const jn=Wb(k,v,B==="sectionCells"?Ae:0,_);Oa(pn,jn)}const Ue=Xe.fromTag("tbody");pr(se,Ue);const ct=ge?g-Ae:g,Sn=Wb(ct,v,ge?0:k,_);return Oa(Ue,Sn),se},wc=g=>g.dom.innerHTML,fy=g=>{const v=Xe.fromTag("div"),k=Xe.fromDom(g.dom.cloneNode(!0));return pr(v,k),wc(v)},H2=(g,v)=>{g.selection.select(v.dom,!0),g.selection.collapse(!0)},my=(g,v)=>{rl(v,"td,th").each(jt(H2,g))},Ub=(g,v)=>{it(js(v,"tr"),k=>{of(g,k.dom),it(js(k,"th,td"),_=>{iy(g,_.dom)})})},wE=g=>Fo(g)&&g.indexOf("%")!==-1,CE=(g,v,k,_,B)=>{const Z=h0(g),se={styles:Z,attributes:d0(g),colGroups:$T(g)};return g.undoManager.ignore(()=>{const ge=B2(k,v,B,_,ci(g),se);mr(ge,"data-mce-id","__mce");const Ae=fy(ge);g.insertContent(Ae),g.addVisual()}),rl(Mc(g),'table[data-mce-id="__mce"]').map(ge=>(kl(g)?Vb(ge):Vg(g)?gy(ge):(zd(g)||wE(Z.width))&&im(ge),uu(ge),Re(ge,"data-mce-id"),Ub(g,ge),my(g,ge),ge.dom)).getOrNull()},SE=(g,v,k,_={})=>{const B=Z=>vn(Z)&&Z>0;if(B(v)&&B(k)){const Z=_.headerRows||0,se=_.headerColumns||0;return CE(g,k,v,se,Z)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var W0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const $2="x-tinymce/dom-table-",py=$2+"rows",by=$2+"columns",Xb=g=>{const v=W0.FakeClipboardItem(g);W0.write([v])},vy=g=>{var v;const k=(v=W0.read())!==null&&v!==void 0?v:[];return Mo(k,_=>Be.from(_.getType(g)))},z2=g=>{vy(g).isSome()&&W0.clear()},V2=g=>{g.fold(kE,v=>Xb({[py]:v}))},W2=()=>vy(py),kE=()=>z2(py),U2=g=>{g.fold(X2,v=>Xb({[by]:v}))},xy=()=>vy(by),X2=()=>z2(by),rf=g=>bi(yb(g),cu(g)).filter(ws),Y2=g=>v0(yb(g),cu(g)).filter(ws),AE=(g,v)=>{const k=cu(g),_=()=>rf(g).each(Xt=>{qi(Xt,k).filter(ce(k)).each(cn=>{const dn=Xe.fromText("");if(xa(cn,dn),ya(cn),g.dom.isEmpty(g.getBody()))g.setContent(""),g.selection.setCursorLocation();else{const Ho=g.dom.createRng();Ho.setStart(dn.dom,0),Ho.setEnd(dn.dom,0),g.selection.setRng(Ho),g.nodeChanged()}})}),B=Xt=>rf(g).each(cn=>{Vg(g)||kl(g)||zd(g)||qi(cn,k).each(Ho=>{Xt==="relative"&&!P2(Ho)?im(Ho):Xt==="fixed"&&!L2(Ho)?Vb(Ho):Xt==="responsive"&&!N2(Ho)&&gy(Ho),uu(Ho),sm(g,Ho.dom,yr)})}),Z=Xt=>qi(Xt,k),se=Xt=>Y2(g).bind(cn=>Z(cn).map(dn=>Xt(dn,cn))),ge=(Xt,cn)=>{se(dn=>{g.formatter.toggle("tableclass",{value:cn},dn.dom),sm(g,dn.dom,Vi)})},Ae=(Xt,cn)=>{se(dn=>{const Ho=_r(g),Or=ms(Ho,ia=>g.formatter.match("tablecellclass",{value:cn},ia.dom))?g.formatter.remove:g.formatter.apply;it(Ho,ia=>Or("tablecellclass",{value:cn},ia.dom)),sm(g,dn.dom,Vi)})},Ue=()=>{rf(g).each(Xt=>{qi(Xt,k).each(cn=>{Si(cn,"caption").fold(()=>{const dn=Xe.fromTag("caption");pr(dn,Xe.fromText("Caption")),eu(cn,dn,0),g.selection.setCursorLocation(dn.dom,0)},dn=>{Ds("caption")(Xt)&&It("td",cn).each(Ho=>g.selection.setCursorLocation(Ho.dom,0)),ya(dn)}),sm(g,cn.dom,yr)})})},ct=Xt=>{g.focus()},Kt=(Xt,cn=!1)=>se((dn,Ho)=>{const Hs=ig(_r(g),dn,Ho);Xt(dn,Hs,cn).each(ct)}),Sn=()=>se((Xt,cn)=>{const dn=ig(_r(g),Xt,cn),Ho=bc(Bt,Xe.fromDom(g.getDoc()),Be.none());return H0(Xt,dn,Ho)}),pn=()=>se((Xt,cn)=>{const dn=ig(_r(g),Xt,cn);return Bb(Xt,dn)}),ln=(Xt,cn)=>cn().each(dn=>{const Ho=Rn(dn,Hs=>Zi(Hs));se((Hs,Or)=>{const ia=vc(Xe.fromDom(g.getDoc())),Aa=Nx(_r(g),Or,Ho,ia);Xt(Hs,Aa).each(ct)})}),jn=Xt=>(cn,dn)=>jr(dn,"type").each(Ho=>{Kt(Xt(Ho),dn.no_events)});Vo({mceTableSplitCells:()=>Kt(v.unmergeCells),mceTableMergeCells:()=>Kt(v.mergeCells),mceTableInsertRowBefore:()=>Kt(v.insertRowsBefore),mceTableInsertRowAfter:()=>Kt(v.insertRowsAfter),mceTableInsertColBefore:()=>Kt(v.insertColumnsBefore),mceTableInsertColAfter:()=>Kt(v.insertColumnsAfter),mceTableDeleteCol:()=>Kt(v.deleteColumn),mceTableDeleteRow:()=>Kt(v.deleteRow),mceTableCutCol:()=>pn().each(Xt=>{U2(Xt),Kt(v.deleteColumn)}),mceTableCutRow:()=>Sn().each(Xt=>{V2(Xt),Kt(v.deleteRow)}),mceTableCopyCol:()=>pn().each(Xt=>U2(Xt)),mceTableCopyRow:()=>Sn().each(Xt=>V2(Xt)),mceTablePasteColBefore:()=>ln(v.pasteColsBefore,xy),mceTablePasteColAfter:()=>ln(v.pasteColsAfter,xy),mceTablePasteRowBefore:()=>ln(v.pasteRowsBefore,W2),mceTablePasteRowAfter:()=>ln(v.pasteRowsAfter,W2),mceTableDelete:_,mceTableCellToggleClass:Ae,mceTableToggleClass:ge,mceTableToggleCaption:Ue,mceTableSizingMode:(Xt,cn)=>B(cn),mceTableCellType:jn(Xt=>Xt==="th"?v.makeCellsHeader:v.unmakeCellsHeader),mceTableColType:jn(Xt=>Xt==="th"?v.makeColumnsHeader:v.unmakeColumnsHeader),mceTableRowType:jn(Xt=>{switch(Xt){case"header":return v.makeRowsHeader;case"footer":return v.makeRowsFooter;default:return v.makeRowsBody}})},(Xt,cn)=>g.addCommand(cn,Xt)),g.addCommand("mceInsertTable",(Xt,cn)=>{SE(g,cn.rows,cn.columns,cn.options)}),g.addCommand("mceTableApplyCellStyle",(Xt,cn)=>{const dn=Or=>"tablecell"+Or.toLowerCase().replace("-","");if(!Ot(cn))return;const Ho=Ht(_r(g),ws);if(Ho.length===0)return;const Hs=vr(cn,(Or,ia)=>g.formatter.has(dn(ia))&&Fo(Or));Xs(Hs)||(Vo(Hs,(Or,ia)=>{const Aa=dn(ia);it(Ho,bu=>{Or===""?g.formatter.remove(Aa,{value:null},bu.dom,!0):g.formatter.apply(Aa,{value:Or},bu.dom)})}),Z(Ho[0]).each(Or=>sm(g,Or.dom,Vi)))})},TE=(g,v)=>{const k=cu(g),_=B=>v0(yb(g)).bind(Z=>qi(Z,k).map(se=>{const ge=ig(_r(g),se,Z);return B(se,ge)})).getOr("");Vo({mceTableRowType:()=>_(v.getTableRowType),mceTableCellType:()=>_(v.getTableCellType),mceTableColType:()=>_(v.getTableColType)},(B,Z)=>g.addQueryValueHandler(Z,B))},U0=em.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),bd=(g,v,k,_)=>g.fold(v,k,_),X0=g=>g.fold(Wt,Wt,Wt),Y0=U0.before,yy=U0.on,j2=U0.after,_i={before:Y0,on:yy,after:j2,cata:bd,getStart:X0},bp={create:(g,v)=>({selection:g,kill:v})},af=(g,v)=>{const k=g.document.createRange();return k.selectNode(v.dom),k},j0=(g,v)=>{const k=g.document.createRange();return G2(k,v),k},G2=(g,v)=>g.selectNodeContents(v.dom),EE=(g,v)=>{v.fold(k=>{g.setStartBefore(k.dom)},(k,_)=>{g.setStart(k.dom,_)},k=>{g.setStartAfter(k.dom)})},_E=(g,v)=>{v.fold(k=>{g.setEndBefore(k.dom)},(k,_)=>{g.setEnd(k.dom,_)},k=>{g.setEndAfter(k.dom)})},q2=(g,v,k)=>{const _=g.document.createRange();return EE(_,v),_E(_,k),_},Yb=(g,v,k,_,B)=>{const Z=g.document.createRange();return Z.setStart(v.dom,k),Z.setEnd(_.dom,B),Z},wy=g=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom,width:g.width,height:g.height}),OE=g=>{const v=g.getClientRects(),k=v.length>0?v[0]:g.getBoundingClientRect();return k.width>0||k.height>0?Be.some(k).map(wy):Be.none()},vp=em.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),K2=(g,v,k)=>v(Xe.fromDom(k.startContainer),k.startOffset,Xe.fromDom(k.endContainer),k.endOffset),J2=(g,v)=>v.match({domRange:k=>({ltr:oe(k),rtl:Be.none}),relative:(k,_)=>({ltr:Eu(()=>q2(g,k,_)),rtl:Eu(()=>Be.some(q2(g,_,k)))}),exact:(k,_,B,Z)=>({ltr:Eu(()=>Yb(g,k,_,B,Z)),rtl:Eu(()=>Be.some(Yb(g,B,Z,k,_)))})}),Q2=(g,v)=>{const k=v.ltr();return k.collapsed?v.rtl().filter(B=>B.collapsed===!1).map(B=>vp.rtl(Xe.fromDom(B.endContainer),B.endOffset,Xe.fromDom(B.startContainer),B.startOffset)).getOrThunk(()=>K2(g,vp.ltr,k)):K2(g,vp.ltr,k)},Cy=(g,v)=>{const k=J2(g,v);return Q2(g,k)},Z0=(g,v)=>Cy(g,v).match({ltr:(_,B,Z,se)=>{const ge=g.document.createRange();return ge.setStart(_.dom,B),ge.setEnd(Z.dom,se),ge},rtl:(_,B,Z,se)=>{const ge=g.document.createRange();return ge.setStart(Z.dom,se),ge.setEnd(_.dom,B),ge}});vp.ltr,vp.rtl;const lf={create:(g,v,k,_)=>({start:g,soffset:v,finish:k,foffset:_})},tS={create:(g,v,k,_)=>({start:_i.on(g,v),finish:_i.on(k,_)})},nS=(g,v)=>{const k=Z0(g,v);return lf.create(Xe.fromDom(k.startContainer),k.startOffset,Xe.fromDom(k.endContainer),k.endOffset)},G0=tS.create,DE=(g,v,k,_,B,Z,se)=>Vt(k,B)&&_===Z?Be.none():Ma(k,"td,th",v).bind(ge=>Ma(B,"td,th",v).bind(Ae=>lm(g,v,ge,Ae,se))),lm=(g,v,k,_,B)=>Vt(k,_)?Be.none():xc(k,_,v).bind(Z=>{const se=Z.boxes.getOr([]);return se.length>1?(B(g,se,Z.start,Z.finish),Be.some(bp.create(Be.some(G0(k,0,k,ll(k))),!0))):Be.none()}),q0=(g,v,k,_,B)=>{const Z=se=>(B.clearBeforeUpdate(k),B.selectRange(k,se.boxes,se.start,se.finish),se.boxes);return Uf(_,g,v,B.firstSelectedSelector,B.lastSelectedSelector).map(Z)},jb=(g,v)=>({item:g,mode:v}),oS=(g,v,k,_=xp)=>g.property().parent(v).map(B=>jb(B,_)),xp=(g,v,k,_=yp)=>k.sibling(g,v).map(B=>jb(B,_)),yp=(g,v,k,_=yp)=>{const B=g.property().children(v);return k.first(B).map(se=>jb(se,_))},ME=[{current:oS,next:xp,fallback:Be.none()},{current:xp,next:yp,fallback:Be.some(oS)},{current:yp,next:yp,fallback:Be.some(xp)}],sS=(g,v,k,_,B=ME)=>te(B,se=>se.current===k).bind(se=>se.current(g,v,_,se.next).orThunk(()=>se.fallback.bind(ge=>sS(g,v,ge,_)))),wp={left:()=>({sibling:(k,_)=>k.query().prevSibling(_),first:k=>k.length>0?Be.some(k[k.length-1]):Be.none()}),right:()=>({sibling:(k,_)=>k.query().nextSibling(_),first:k=>k.length>0?Be.some(k[0]):Be.none()})},Sy=(g,v,k,_,B,Z)=>sS(g,v,_,B).bind(ge=>Z(ge.item)?Be.none():k(ge.item)?Be.some(ge.item):Sy(g,ge.item,k,ge.mode,B,Z)),ky=(g,v,k,_)=>Sy(g,v,k,xp,wp.left(),_),LE=(g,v,k,_)=>Sy(g,v,k,xp,wp.right(),_),Ay=g=>v=>g.property().children(v).length===0,rS=(g,v,k)=>Cp(g,v,Ay(g),k),aS=(g,v,k)=>iS(g,v,Ay(g),k),Cp=ky,iS=LE,K0=rg(),cf=(g,v)=>rS(K0,g,v),gg=(g,v)=>aS(K0,g,v),Zb=(g,v,k)=>Cp(K0,g,v,k),Gb=(g,v,k)=>iS(K0,g,v,k),NE=(g,v,k)=>zt(g,v,k).isSome(),Xc=em.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),jd=(g,v,k)=>{const _=g.getRect(v),B=g.getRect(k);return B.right>_.left&&B.left<_.right},Ty=g=>Ma(g,"tr"),uf={...Xc,verify:(g,v,k,_,B,Z,se)=>Ma(_,"td,th",se).bind(ge=>Ma(v,"td,th",se).map(Ae=>Vt(ge,Ae)?Vt(_,ge)&&ll(ge)===B?Z(Ae):Xc.none("in same cell"):Wf(Ty,[ge,Ae]).fold(()=>jd(g,Ae,ge)?Xc.success():Z(Ae),Ue=>Z(Ae)))).getOr(Xc.none("default")),cata:(g,v,k,_,B)=>g.fold(v,k,_,B)},Sp=(g,v,k,_)=>({parent:g,children:v,element:k,index:_}),Tl=g=>ps(g).bind(v=>{const k=so(v);return Ey(k,g).map(_=>Sp(v,k,g,_))}),Ey=(g,v)=>As(g,jt(Vt,v)),J0=Ds("br"),um=(g,v,k)=>v(g,k).bind(_=>Ta(_)&&pa(_).trim().length===0?um(_,v,k):Be.some(_)),qb=(g,v,k)=>k.traverse(v).orThunk(()=>um(v,k.gather,g)).map(k.relative),FE=(g,v)=>ls(g,v).filter(J0).orThunk(()=>ls(g,v-1).filter(J0)),_y=(g,v,k,_)=>FE(v,k).bind(B=>_.traverse(B).fold(()=>um(B,_.gather,g).map(_.relative),Z=>Tl(Z).map(se=>_i.on(se.parent,se.index)))),Kb=(g,v,k,_)=>(J0(v)?qb(g,v,_):_y(g,v,k,_)).map(Z=>({start:Z,finish:Z})),El=g=>uf.cata(g,v=>Be.none(),()=>Be.none(),v=>Be.some(x0(v,0)),v=>Be.some(x0(v,ll(v)))),Oy=(g,v)=>({left:g.left,top:g.top+v,right:g.right,bottom:g.bottom+v}),Bu=(g,v)=>({left:g.left,top:g.top-v,right:g.right,bottom:g.bottom-v}),Ry=(g,v,k)=>({left:g.left+v,top:g.top+k,right:g.right+v,bottom:g.bottom+k}),kp=g=>g.top,Ap=g=>g.bottom,Dy=(g,v,k)=>k>=0&&k<ll(v)?g.getRangedRect(v,k,v,k+1):k>0?g.getRangedRect(v,k-1,v,k):Be.none(),fg=g=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom}),My=(g,v)=>Be.some(g.getRect(v)),Py=(g,v,k)=>hr(v)?My(g,v).map(fg):Ta(v)?Dy(g,v,k).map(fg):Be.none(),Ly=(g,v)=>hr(v)?My(g,v).map(fg):Ta(v)?g.getRangedRect(v,0,v,ll(v)).map(fg):Be.none(),Mh=5,Q0=100,Bl=em.generate([{none:[]},{retry:["caret"]}]),lS=(g,v)=>g.left<v.left||Math.abs(v.right-g.left)<1||g.left>v.right,Ny=(g,v,k)=>or(v,At).fold(no,_=>Ly(g,_).exists(B=>lS(k,B))),Iy=(g,v,k,_,B)=>{const Z=Oy(B,Mh);return Math.abs(k.bottom-_.bottom)<1||k.top>B.bottom?Bl.retry(Z):k.top===B.bottom?Bl.retry(Oy(B,1)):Ny(g,v,B)?Bl.retry(Ry(Z,Mh,0)):Bl.none()},Fy={point:kp,adjuster:(g,v,k,_,B)=>{const Z=Bu(B,Mh);return Math.abs(k.top-_.top)<1||k.bottom<B.top?Bl.retry(Z):k.bottom===B.top?Bl.retry(Bu(B,1)):Ny(g,v,B)?Bl.retry(Ry(Z,Mh,0)):Bl.none()},move:Bu,gather:cf},uS={point:Ap,adjuster:Iy,move:Oy,gather:gg},dS=(g,v,k)=>g.elementFromPoint(v,k).filter(_=>Is(_)==="table").isSome(),hu=(g,v,k,_,B)=>df(g,v,k,v.move(_,Mh),B),df=(g,v,k,_,B)=>B===0?Be.some(_):dS(g,_.left,v.point(_))?hu(g,v,k,_,B-1):g.situsFromPoint(_.left,v.point(_)).bind(Z=>Z.start.fold(Be.none,se=>Ly(g,se).bind(ge=>v.adjuster(g,se,ge,k,_).fold(Be.none,Ae=>df(g,v,k,Ae,B-1))).orThunk(()=>Be.some(_)),Be.none)),hS=(g,v,k)=>g.point(v)>k.getInnerHeight()?Be.some(g.point(v)-k.getInnerHeight()):g.point(v)<0?Be.some(-g.point(v)):Be.none(),dm=(g,v,k)=>{const _=g.move(k,Mh),B=df(v,g,k,_,Q0).getOr(_);return hS(g,B,v).fold(()=>v.situsFromPoint(B.left,g.point(B)),Z=>(v.scrollBy(0,Z),v.situsFromPoint(B.left,g.point(B)-Z)))},lc={tryUp:jt(dm,Fy),tryDown:jt(dm,uS),getJumpSize:oe(Mh)},Yc=20,cc=(g,v,k)=>g.getSelection().bind(_=>Kb(v,_.finish,_.foffset,k).fold(()=>Be.some(x0(_.finish,_.foffset)),B=>{const Z=g.fromSitus(B),se=uf.verify(g,_.finish,_.foffset,Z.finish,Z.foffset,k.failure,v);return El(se)})),gu=(g,v,k,_,B,Z)=>Z===0?Be.none():hm(g,v,k,_,B).bind(se=>{const ge=g.fromSitus(se),Ae=uf.verify(g,k,_,ge.finish,ge.foffset,B.failure,v);return uf.cata(Ae,()=>Be.none(),()=>Be.some(se),Ue=>Vt(k,Ue)&&_===0?e1(g,k,_,Bu,B):gu(g,v,Ue,0,B,Z-1),Ue=>Vt(k,Ue)&&_===ll(Ue)?e1(g,k,_,Oy,B):gu(g,v,Ue,ll(Ue),B,Z-1))}),e1=(g,v,k,_,B)=>Py(g,v,k).bind(Z=>fu(g,B,_(Z,lc.getJumpSize()))),fu=(g,v,k)=>{const _=Br().browser;return _.isChromium()||_.isSafari()||_.isFirefox()?v.retry(g,k):Be.none()},hm=(g,v,k,_,B)=>Py(g,k,_).bind(Z=>fu(g,B,Z)),gS=(g,v,k)=>cc(g,v,k).bind(_=>gu(g,v,_.element,_.offset,k,Yc).map(g.fromSitus)),F4=(g,v)=>NE(g,k=>ps(k).exists(_=>Vt(_,v))),BE=(g,v,k,_,B)=>Ma(_,"td,th",v).bind(Z=>Ma(Z,"table",v).bind(se=>F4(B,se)?gS(g,v,k).bind(ge=>Ma(ge.finish,"td,th",v).map(Ae=>({start:Z,finish:Ae,range:ge}))):Be.none())),By=(g,v,k,_,B,Z)=>Z(_,v).orThunk(()=>BE(g,v,k,_,B).map(se=>{const ge=se.range;return bp.create(Be.some(G0(ge.start,ge.soffset,ge.finish,ge.foffset)),!0)})),HE=(g,v)=>Ma(g,"tr",v).bind(k=>Ma(k,"table",v).bind(_=>{const B=js(_,"tr");return Vt(k,B[0])?Zb(_,Z=>If(Z).isSome(),v).map(Z=>{const se=ll(Z);return bp.create(Be.some(G0(Z,se,Z,se)),!0)}):Be.none()})),t1=(g,v)=>Ma(g,"tr",v).bind(k=>Ma(k,"table",v).bind(_=>{const B=js(_,"tr");return Vt(k,B[B.length-1])?Gb(_,Z=>$g(Z).isSome(),v).map(Z=>bp.create(Be.some(G0(Z,0,Z,0)),!0)):Be.none()})),_l=(g,v,k,_,B,Z,se)=>BE(g,k,_,B,Z).bind(ge=>lm(v,k,ge.start,ge.finish,se)),Jb=g=>{let v=g;return{get:()=>v,set:B=>{v=B}}},Qb=g=>{const v=Jb(Be.none()),k=()=>v.get().each(g);return{clear:()=>{k(),v.set(Be.none())},isSet:()=>v.get().isSome(),get:()=>v.get(),set:ge=>{k(),v.set(Be.some(ge))}}},hf=()=>{const g=Qb(Bt);return{...g,on:k=>g.get().each(k)}},Hy=(g,v)=>Ma(g,"td,th",v),n1=g=>Ks(g).exists(Ug),$y=(g,v,k,_)=>{const B=hf(),Z=B.clear,se=ct=>{B.on(Kt=>{_.clearBeforeUpdate(v),Hy(ct.target,k).each(Sn=>{xc(Kt,Sn,k).each(pn=>{const ln=pn.boxes.getOr([]);if(ln.length===1){const jn=ln[0],Xt=$f(jn)==="false",cn=Xo(IC(ct.target),jn,Vt);Xt&&cn&&_.selectRange(v,ln,jn,jn)}else ln.length>1&&(_.selectRange(v,ln,pn.start,pn.finish),g.selectContents(Sn))})})})};return{clearstate:Z,mousedown:ct=>{_.clear(v),Hy(ct.target,k).filter(n1).each(B.set)},mouseover:ct=>{se(ct)},mouseup:ct=>{se(ct),Z()}}},o1={traverse:Ja,gather:gg,relative:_i.before,retry:lc.tryDown,failure:uf.failedDown},zy={traverse:hi,gather:cf,relative:_i.before,retry:lc.tryUp,failure:uf.failedUp},Tp=g=>v=>v===g,mg=Tp(38),ev=Tp(40),gm=g=>g>=37&&g<=40,pg={isBackward:Tp(37),isForward:Tp(39)},fS={isBackward:Tp(39),isForward:Tp(37)},jc=g=>{const v=g!==void 0?g.dom:document,k=v.body.scrollLeft||v.documentElement.scrollLeft,_=v.body.scrollTop||v.documentElement.scrollTop;return Jt(k,_)},Vy=(g,v,k)=>{const B=(k!==void 0?k.dom:document).defaultView;B&&B.scrollBy(g,v)},gf=em.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fm=g=>gf.exact(g.start,g.soffset,g.finish,g.foffset),s1=g=>g.match({domRange:v=>Xe.fromDom(v.startContainer),relative:(v,k)=>_i.getStart(v),exact:(v,k,_,B)=>v}),r1=gf.domRange,$E=gf.relative,zE=gf.exact,mS=g=>{const v=s1(g);return co(v)},pS=lf.create,mm={domRange:r1,relative:$E,exact:zE,exactFromRange:fm,getWin:mS,range:pS},Ep=(g,v,k)=>{var _;return Be.from((_=g.caretPositionFromPoint)===null||_===void 0?void 0:_.call(g,v,k)).bind(B=>{if(B.offsetNode===null)return Be.none();const Z=g.createRange();return Z.setStart(B.offsetNode,B.offset),Z.collapse(),Be.some(Z)})},tv=(g,v,k)=>{var _;return Be.from((_=g.caretRangeFromPoint)===null||_===void 0?void 0:_.call(g,v,k))},VE=(g,v,k)=>g.caretPositionFromPoint?Ep(g,v,k):g.caretRangeFromPoint?tv(g,v,k):Be.none(),bS=(g,v,k)=>{const _=g.document;return VE(_,v,k).map(B=>lf.create(Xe.fromDom(B.startContainer),B.startOffset,Xe.fromDom(B.endContainer),B.endOffset))},nv=(g,v)=>{const k=Is(g);return k==="input"?_i.after(g):Zn(["br","img"],k)?v===0?_i.before(g):_i.after(g):_i.on(g,v)},a1=(g,v)=>{const k=g.fold(_i.before,nv,_i.after),_=v.fold(_i.before,nv,_i.after);return mm.relative(k,_)},Wy=(g,v,k,_)=>{const B=nv(g,v),Z=nv(k,_);return mm.relative(B,Z)},vS=(g,v,k,_)=>{const Z=$n(g).dom.createRange();return Z.setStart(g.dom,v),Z.setEnd(k.dom,_),Z},i1=(g,v,k,_)=>{const B=vS(g,v,k,_),Z=Vt(g,k)&&v===_;return B.collapsed&&!Z},_p=g=>Be.from(g.getSelection()),xS=(g,v)=>{_p(g).each(k=>{k.removeAllRanges(),k.addRange(v)})},pm=(g,v,k,_,B)=>{const Z=Yb(g,v,k,_,B);xS(g,Z)},Gs=(g,v,k,_,B,Z)=>{v.collapse(k.dom,_),v.extend(B.dom,Z)},bg=(g,v)=>Cy(g,v).match({ltr:(k,_,B,Z)=>{pm(g,k,_,B,Z)},rtl:(k,_,B,Z)=>{_p(g).each(se=>{if(se.setBaseAndExtent)se.setBaseAndExtent(k.dom,_,B.dom,Z);else if(se.extend)try{Gs(g,se,k,_,B,Z)}catch{pm(g,B,Z,k,_)}else pm(g,B,Z,k,_)})}}),ff=(g,v,k,_,B)=>{const Z=Wy(v,k,_,B);bg(g,Z)},l1=(g,v,k)=>{const _=a1(v,k);bg(g,_)},Uy=g=>{if(g.rangeCount>0){const v=g.getRangeAt(0),k=g.getRangeAt(g.rangeCount-1);return Be.some(lf.create(Xe.fromDom(v.startContainer),v.startOffset,Xe.fromDom(k.endContainer),k.endOffset))}else return Be.none()},ov=g=>{if(g.anchorNode===null||g.focusNode===null)return Uy(g);{const v=Xe.fromDom(g.anchorNode),k=Xe.fromDom(g.focusNode);return i1(v,g.anchorOffset,k,g.focusOffset)?Be.some(lf.create(v,g.anchorOffset,k,g.focusOffset)):Uy(g)}},bm=(g,v,k=!0)=>{const B=(k?j0:af)(g,v);xS(g,B)},sv=g=>_p(g).filter(v=>v.rangeCount>0).bind(ov),c1=g=>sv(g).map(v=>mm.exact(v.start,v.soffset,v.finish,v.foffset)),yS=(g,v)=>{const k=Z0(g,v);return OE(k)},WE=(g,v,k)=>bS(g,v,k),vm=g=>{_p(g).each(v=>v.removeAllRanges())},u1=g=>({elementFromPoint:(Xt,cn)=>Xe.fromPoint(Xe.fromDom(g.document),Xt,cn),getRect:Xt=>Xt.dom.getBoundingClientRect(),getRangedRect:(Xt,cn,dn,Ho)=>{const Hs=mm.exact(Xt,cn,dn,Ho);return yS(g,Hs)},getSelection:()=>c1(g).map(Xt=>nS(g,Xt)),fromSitus:Xt=>{const cn=mm.relative(Xt.start,Xt.finish);return nS(g,cn)},situsFromPoint:(Xt,cn)=>WE(g,Xt,cn).map(dn=>tS.create(dn.start,dn.soffset,dn.finish,dn.foffset)),clearSelection:()=>{vm(g)},collapseSelection:(Xt=!1)=>{c1(g).each(cn=>cn.fold(dn=>dn.collapse(Xt),(dn,Ho)=>{const Hs=Xt?dn:Ho;l1(g,Hs,Hs)},(dn,Ho,Hs,Or)=>{const ia=Xt?dn:Hs,Aa=Xt?Ho:Or;ff(g,ia,Aa,ia,Aa)}))},setSelection:Xt=>{ff(g,Xt.start,Xt.soffset,Xt.finish,Xt.foffset)},setRelativeSelection:(Xt,cn)=>{l1(g,Xt,cn)},selectNode:Xt=>{bm(g,Xt,!1)},selectContents:Xt=>{bm(g,Xt)},getInnerHeight:()=>g.innerHeight,getScrollY:()=>jc(Xe.fromDom(g.document)).top,scrollBy:(Xt,cn)=>{Vy(Xt,cn,Xe.fromDom(g.document))}}),mf=(g,v)=>({rows:g,cols:v}),Xy=(g,v,k,_)=>{const B=u1(g),Z=$y(B,v,k,_);return{clearstate:Z.clearstate,mousedown:Z.mousedown,mouseover:Z.mouseover,mouseup:Z.mouseup}},Yy=g=>or(g,Qn).exists(Ug),xm=(g,v)=>Yy(g)||Yy(v),jy=(g,v,k,_)=>{const B=u1(g),Z=()=>(_.clear(v),Be.none());return{keydown:(Ae,Ue,ct,Kt,Sn,pn)=>{const ln=Ae.raw,jn=ln.which,Xt=ln.shiftKey===!0;return Km(v,_.selectedSelector).fold(()=>(gm(jn)&&!Xt&&_.clearBeforeUpdate(v),gm(jn)&&Xt&&!xm(Ue,Kt)?Be.none:ev(jn)&&Xt?jt(_l,B,v,k,o1,Kt,Ue,_.selectRange):mg(jn)&&Xt?jt(_l,B,v,k,zy,Kt,Ue,_.selectRange):ev(jn)?jt(By,B,k,o1,Kt,Ue,t1):mg(jn)?jt(By,B,k,zy,Kt,Ue,HE):Be.none),dn=>{const Ho=Hs=>()=>Mo(Hs,ia=>q0(ia.rows,ia.cols,v,dn,_)).fold(()=>jg(v,_.firstSelectedSelector,_.lastSelectedSelector).map(ia=>{const Aa=ev(jn)||pn.isForward(jn)?_i.after:_i.before;return B.setRelativeSelection(_i.on(ia.first,0),Aa(ia.table)),_.clear(v),bp.create(Be.none(),!0)}),ia=>Be.some(bp.create(Be.none(),!0)));return gm(jn)&&Xt&&!xm(Ue,Kt)?Be.none:ev(jn)&&Xt?Ho([mf(1,0)]):mg(jn)&&Xt?Ho([mf(-1,0)]):pn.isBackward(jn)&&Xt?Ho([mf(0,-1),mf(-1,0)]):pn.isForward(jn)&&Xt?Ho([mf(0,1),mf(1,0)]):gm(jn)&&!Xt?Z:Be.none})()},keyup:(Ae,Ue,ct,Kt,Sn)=>Km(v,_.selectedSelector).fold(()=>{const pn=Ae.raw,ln=pn.which;return pn.shiftKey===!0&&gm(ln)&&xm(Ue,Kt)?DE(v,k,Ue,ct,Kt,Sn,_.selectRange):Be.none()},Be.none)}},wS=(g,v,k,_)=>{const B=u1(g);return(Z,se)=>{_.clearBeforeUpdate(v),xc(Z,se,k).each(ge=>{const Ae=ge.boxes.getOr([]);_.selectRange(v,Ae,ge.start,ge.finish),B.selectContents(se),B.collapseSelection()})}},CS=(g,v)=>{const k=Ms(g,v);return k===void 0||k===""?[]:k.split(" ")},Ph=(g,v,k)=>{const B=CS(g,v).concat([k]);return mr(g,v,B.join(" ")),!0},SS=(g,v,k)=>{const _=Ht(CS(g,v),B=>B!==k);return _.length>0?mr(g,v,_.join(" ")):Re(g,v),!1},d1=g=>g.dom.classList!==void 0,Hu=g=>CS(g,"class"),dl=(g,v)=>Ph(g,"class",v),UE=(g,v)=>SS(g,"class",v),Zd=(g,v)=>{d1(g)?g.dom.classList.add(v):dl(g,v)},XE=g=>{(d1(g)?g.dom.classList:Hu(g)).length===0&&Re(g,"class")},kS=(g,v)=>{d1(g)?g.dom.classList.remove(v):UE(g,v),XE(g)},rv=(g,v)=>d1(g)&&g.dom.classList.contains(v),Op=(g,v)=>{it(v,k=>{kS(g,k)})},AS=g=>v=>{Zd(v,g)},TS=g=>v=>{Op(v,g)},ES={byClass:g=>{const v=AS(g.selected),k=TS([g.selected,g.lastSelected,g.firstSelected]),_=Z=>{const se=js(Z,g.selectedSelector);it(se,k)};return{clearBeforeUpdate:_,clear:_,selectRange:(Z,se,ge,Ae)=>{_(Z),it(se,v),Zd(ge,g.firstSelected),Zd(Ae,g.lastSelected)},selectedSelector:g.selectedSelector,firstSelectedSelector:g.firstSelectedSelector,lastSelectedSelector:g.lastSelectedSelector}},byAttr:(g,v,k)=>{const _=Ae=>{Re(Ae,g.selected),Re(Ae,g.firstSelected),Re(Ae,g.lastSelected)},B=Ae=>{mr(Ae,g.selected,"1")},Z=Ae=>{se(Ae),k()},se=Ae=>{const Ue=js(Ae,`${g.selectedSelector},${g.firstSelectedSelector},${g.lastSelectedSelector}`);it(Ue,_)};return{clearBeforeUpdate:se,clear:Z,selectRange:(Ae,Ue,ct,Kt)=>{Z(Ae),it(Ue,B),mr(ct,g.firstSelected,"1"),mr(Kt,g.lastSelected,"1"),v(Ue,ct,Kt)},selectedSelector:g.selectedSelector,firstSelectedSelector:g.firstSelectedSelector,lastSelectedSelector:g.lastSelectedSelector}}},En=(g,v,k,_)=>{switch(g.tag){case"none":return v();case"single":return _(g.element);case"multiple":return k(g.elements)}},hl=()=>({tag:"none"}),h1=g=>({tag:"multiple",elements:g}),gl=g=>({tag:"single",element:g}),$u=(g,v,k)=>({get:()=>b0(g(),k).fold(()=>v().fold(hl,gl),h1)}),Zy=(g,v)=>{const k=g.slice(0,v[v.length-1].row+1),_=$x(k);return Un(_,B=>{const Z=B.cells.slice(0,v[v.length-1].column+1);return Rn(Z,se=>se.element)})},av=(g,v)=>{const k=g.slice(v[0].row+v[0].rowspan-1,g.length),_=$x(k);return Un(_,B=>{const Z=B.cells.slice(v[0].column+v[0].colspan-1,B.cells.length);return Rn(Z,se=>se.element)})},Rp=(g,v,k)=>{const _=ve.fromTable(g);return Vc(_,v).map(Z=>{const se=lp(_,k,!1),{rows:ge}=w(se),Ae=Zy(ge,Z),Ue=av(ge,Z);return{upOrLeftCells:Ae,downOrRightCells:Ue}})},_S=(g,v,k,_,B,Z,se)=>({target:g,x:v,y:k,stop:_,prevent:B,kill:Z,raw:se}),pf=g=>{const v=Xe.fromDom(Ps(g).getOr(g.target)),k=()=>g.stopPropagation(),_=()=>g.preventDefault(),B=vo(_,k);return _S(v,g.clientX,g.clientY,k,_,B,g)},Dp=(g,v)=>k=>{g(k)&&v(pf(k))},YE=(g,v,k,_,B)=>{const Z=Dp(k,_);return g.dom.addEventListener(v,Z,B),{unbind:jt(ZE,g,v,Z,B)}},jE=(g,v,k,_)=>YE(g,v,k,_,!1),ZE=(g,v,k,_)=>{g.dom.removeEventListener(v,k,_)},OS=ut,ym=(g,v,k)=>jE(g,v,OS,k),Mp=pf,wm=g=>!rv(Xe.fromDom(g.target),"ephox-snooker-resizer-bar"),g1=(g,v)=>{const k=$u(()=>Xe.fromDom(g.getBody()),()=>v0(yb(g),cu(g)),Xf.selectedSelector),_=(Ae,Ue,ct)=>{qi(Ue).each(Sn=>{const pn=Rn(Ae,dn=>dn.dom),ln=zg(g),jn=bc(Bt,Xe.fromDom(g.getDoc()),ln),Xt=_r(g),cn=Rp(Sn,{selection:Xt},jn).map(dn=>Cr(dn,Ho=>Rn(Ho,Hs=>Hs.dom))).getOrUndefined();fE(g,pn,Ue.dom,ct.dom,cn)})},B=()=>$i(g),Z=ES.byAttr(Xf,_,B);return g.on("init",Ae=>{const Ue=g.getWin(),ct=Mc(g),Kt=cu(g),Sn=()=>{const Xr=g.selection,Cc=Xe.fromDom(Xr.getStart()),Sc=Xe.fromDom(Xr.getEnd());Wf(qi,[Cc,Sc]).fold(()=>Z.clear(ct),Bt)},pn=Xy(Ue,ct,Kt,Z),ln=jy(Ue,ct,Kt,Z),jn=wS(Ue,ct,Kt,Z),Xt=Xr=>Xr.raw.shiftKey===!0;g.on("TableSelectorChange",Xr=>jn(Xr.start,Xr.finish));const cn=(Xr,Cc)=>{Xt(Xr)&&(Cc.kill&&Xr.kill(),Cc.selection.each(Sc=>{const Vu=mm.relative(Sc.start,Sc.finish),as=Z0(Ue,Vu);g.selection.setRng(as)}))},dn=Xr=>{const Cc=Mp(Xr);if(Cc.raw.shiftKey&&gm(Cc.raw.which)){const Sc=g.selection.getRng(),Vu=Xe.fromDom(Sc.startContainer),as=Xe.fromDom(Sc.endContainer);ln.keyup(Cc,Vu,Sc.startOffset,as,Sc.endOffset).each(Pc=>{cn(Cc,Pc)})}},Ho=Xr=>{const Cc=Mp(Xr);v.hide();const Sc=g.selection.getRng(),Vu=Xe.fromDom(Sc.startContainer),as=Xe.fromDom(Sc.endContainer),Pc=q(pg,fS)(Xe.fromDom(g.selection.getStart()));ln.keydown(Cc,Vu,Sc.startOffset,as,Sc.endOffset,Pc).each(Wi=>{cn(Cc,Wi)}),v.show()},Hs=Xr=>Xr.button===0,Or=Xr=>Xr.buttons===void 0?!0:(Xr.buttons&1)!==0,ia=Xr=>{pn.clearstate()},Aa=Xr=>{Hs(Xr)&&wm(Xr)&&pn.mousedown(Mp(Xr))},bu=Xr=>{Or(Xr)&&wm(Xr)&&pn.mouseover(Mp(Xr))},Kd=Xr=>{Hs(Xr)&&wm(Xr)&&pn.mouseup(Mp(Xr))},Lh=(()=>{const Xr=Jb(Xe.fromDom(ct)),Cc=Jb(0);return{touchEnd:Vu=>{const as=Xe.fromDom(Vu.target);if(Ds("td")(as)||Ds("th")(as)){const Pc=Xr.get(),Wi=Cc.get();Vt(Pc,as)&&Vu.timeStamp-Wi<300&&(Vu.preventDefault(),jn(as,as))}Xr.set(as),Cc.set(Vu.timeStamp)}}})();g.on("dragstart",ia),g.on("mousedown",Aa),g.on("mouseover",bu),g.on("mouseup",Kd),g.on("touchend",Lh.touchEnd),g.on("keyup",dn),g.on("keydown",Ho),g.on("NodeChange",Sn)}),g.on("PreInit",()=>{g.serializer.addTempAttr(Xf.firstSelected),g.serializer.addTempAttr(Xf.lastSelected)}),{getSelectedCells:()=>En(k.get(),oe([]),Ae=>Rn(Ae,Ue=>Ue.dom),Ae=>[Ae.dom]),clearSelectedCells:Ae=>Z.clear(Xe.fromDom(Ae))}},mu=g=>{let v=[];return{bind:Z=>{if(Z===void 0)throw new Error("Event bind error: undefined handler");v.push(Z)},unbind:Z=>{v=Ht(v,se=>se!==Z)},trigger:(...Z)=>{const se={};it(g,(ge,Ae)=>{se[ge]=Z[Ae]}),it(v,ge=>{ge(se)})}}},Gd=g=>{const v=Cr(g,_=>({bind:_.bind,unbind:_.unbind})),k=Cr(g,_=>_.trigger);return{registry:v,trigger:k}},Cm=(g,v)=>{let k=null;const _=()=>{ns(k)||(clearTimeout(k),k=null)};return{cancel:_,throttle:(...Z)=>{_(),k=setTimeout(()=>{k=null,g.apply(null,Z)},v)}}},Pp=g=>g.slice(0).sort(),f1=(g,v)=>{throw new Error("All required keys ("+Pp(g).join(", ")+") were not specified. Specified keys were: "+Pp(v).join(", ")+".")},m1=g=>{throw new Error("Unsupported keys for object: "+Pp(g).join(", "))},GE=(g,v)=>{if(!lo(v))throw new Error("The "+g+" fields must be an array. Was: "+v+".");it(v,k=>{if(!Fo(k))throw new Error("The value "+k+" in the "+g+" fields was not a string.")})},qE=(g,v)=>{throw new Error("All values need to be of type: "+v+". Keys ("+Pp(g).join(", ")+") were not.")},KE=g=>{const v=Pp(g);te(v,(_,B)=>B<v.length-1&&_===v[B+1]).each(_=>{throw new Error("The field: "+_+" occurs more than once in the combined fields: ["+v.join(", ")+"].")})},JE=(g,v)=>RS(g,v,{validate:Lo,label:"function"}),RS=(g,v,k)=>{if(v.length===0)throw new Error("You must specify at least one required field.");return GE("required",v),KE(v),_=>{const B=Cn(_);ms(v,ge=>Zn(B,ge))||f1(v,B),g(v,B);const se=Ht(v,ge=>!k.validate(_[ge],ge));return se.length>0&&qE(se,k.label),_}},DS=(g,v)=>{const k=Ht(v,_=>!Zn(g,_));k.length>0&&m1(k)},Gy=g=>JE(DS,g),p1=Gy(["compare","extract","mutate","sink"]),Zl=Gy(["element","start","stop","destroy"]),zu=Gy(["forceDrop","drop","move","delayDrop"]),pu=()=>{let g=Be.none();const v=()=>{g=Be.none()},k=(Z,se)=>{const ge=g.map(Ae=>Z.compare(Ae,se));return g=Be.some(se),ge},_=(Z,se)=>{se.extract(Z).each(Ae=>{k(se,Ae).each(ct=>{B.trigger.move(ct)})})},B=Gd({move:mu(["info"])});return{onEvent:_,reset:v,events:B.registry}},iv=()=>{const g=Gd({move:mu(["info"])});return{onEvent:Bt,reset:Bt,events:g.registry}},qy=()=>{const g=iv(),v=pu();let k=g;return{on:()=>{k.reset(),k=v},off:()=>{k.reset(),k=g},isOn:()=>k===v,onEvent:(ge,Ae)=>{k.onEvent(ge,Ae)},events:v.events}},MS=(g,v,k)=>{let _=!1;const B=Gd({start:mu([]),stop:mu([])}),Z=qy(),se=()=>{ln.stop(),Z.isOn()&&(Z.off(),B.trigger.stop())},ge=Cm(se,200),Ae=Xt=>{ln.start(Xt),Z.on(),B.trigger.start()},Ue=Xt=>{ge.cancel(),Z.onEvent(Xt,v)};Z.events.move.bind(Xt=>{v.mutate(g,Xt.info)});const ct=()=>{_=!0},Kt=()=>{_=!1},Sn=()=>_,pn=Xt=>(...cn)=>{_&&Xt.apply(null,cn)},ln=v.sink(zu({forceDrop:se,drop:pn(se),move:pn(Ue),delayDrop:pn(ge.throttle)}),k),jn=()=>{ln.destroy()};return{element:ln.element,go:Ae,on:ct,off:Kt,isActive:Sn,destroy:jn,events:B.registry}},b1=g=>{const v=g.replace(/\./g,"-");return{resolve:_=>v+"-"+_}},v1=b1("ephox-dragster").resolve,e_=g=>{const v={layerClass:v1("blocker"),...g},k=Xe.fromTag("div");return mr(k,"role","presentation"),fr(k,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Zd(k,v1("blocker")),Zd(k,v.layerClass),{element:oe(k),destroy:()=>{ya(k)}}};var y1=p1({compare:(g,v)=>Jt(v.left-g.left,v.top-g.top),extract:g=>Be.some(Jt(g.x,g.y)),sink:(g,v)=>{const k=e_(v),_=ym(k.element(),"mousedown",g.forceDrop),B=ym(k.element(),"mouseup",g.drop),Z=ym(k.element(),"mousemove",g.move),se=ym(k.element(),"mouseout",g.delayDrop),ge=()=>{k.destroy(),B.unbind(),Z.unbind(),se.unbind(),_.unbind()},Ae=ct=>{pr(ct,k.element())},Ue=()=>{ya(k.element())};return Zl({element:k.element,start:Ae,stop:Ue,destroy:ge})},mutate:(g,v)=>{g.mutate(v.left,v.top)}});const Ur=(g,v={})=>{var k;const _=(k=v.mode)!==null&&k!==void 0?k:y1;return MS(g,_,v)},qd=b1("ephox-snooker").resolve,LS=()=>{const g=Gd({drag:mu(["xDelta","yDelta"])});return{mutate:(k,_)=>{g.trigger.drag(k,_)},events:g.registry}},Ky=()=>{const g=Gd({drag:mu(["xDelta","yDelta","target"])});let v=Be.none();const k=LS();return k.events.drag.bind(Z=>{v.each(se=>{g.trigger.drag(Z.xDelta,Z.yDelta,se)})}),{assign:Z=>{v=Be.some(Z)},get:()=>v,mutate:k.mutate,events:g.registry}},Lp=(g,v,k,_,B)=>{const Z=Xe.fromTag("div");return fr(Z,{position:"absolute",left:v-_/2+"px",top:k+"px",height:B+"px",width:_+"px"}),Ea(Z,{"data-column":g,role:"presentation"}),Z},w1=(g,v,k,_,B)=>{const Z=Xe.fromTag("div");return fr(Z,{position:"absolute",left:v+"px",top:k-B/2+"px",height:B+"px",width:_+"px"}),Ea(Z,{"data-row":g,role:"presentation"}),Z},lv=qd("resizer-bar"),Jy=qd("resizer-rows"),NS=qd("resizer-cols"),Qy=7,IS=(g,v)=>Un(g.all,(k,_)=>v(k.element)?[_]:[]),cv=(g,v)=>{const k=[];return Ao(g.grid.columns,_=>{ve.getColumnAt(g,_).map(Z=>Z.element).forall(v)&&k.push(_)}),Ht(k,_=>{const B=ve.filterItems(g,Z=>Z.column===_);return ms(B,Z=>v(Z.element))})},Sm=g=>{const v=js(g.parent(),"."+lv);it(v,ya)},C1=(g,v,k)=>{const _=g.origin();it(v,B=>{B.each(Z=>{const se=k(_,Z);Zd(se,lv),pr(g.parent(),se)})})},o_=(g,v,k,_)=>{C1(g,v,(B,Z)=>{const se=Lp(Z.col,Z.x-B.left,k.top-B.top,Qy,_);return Zd(se,NS),se})},s_=(g,v,k,_)=>{C1(g,v,(B,Z)=>{const se=w1(Z.row,k.left-B.left,Z.y-B.top,_,Qy);return Zd(se,Jy),se})},r_=(g,v,k,_,B)=>{const Z=sr(k),se=v.isResizable,ge=_.length>0?fo.positions(_,k):[],Ae=ge.length>0?IS(g,se):[],Ue=Ht(ge,(pn,ln)=>Dt(Ae,jn=>ln===jn));s_(v,Ue,Z,Hc(k));const ct=B.length>0?tg.positions(B,k):[],Kt=ct.length>0?cv(g,se):[],Sn=Ht(ct,(pn,ln)=>Dt(Kt,jn=>ln===jn));o_(v,Sn,Z,Ft(k))},Zc=(g,v)=>{if(Sm(g),g.isResizable(v)){const k=ve.fromTable(v),_=P(k),B=Pe(k);r_(k,g,v,_,B)}},Hl=(g,v)=>{const k=js(g.parent(),"."+lv);it(k,v)},Np=g=>{Hl(g,v=>{Jo(v,"display","none")})},$4=g=>{Hl(g,v=>{Jo(v,"display","block")})},a_=g=>rv(g,Jy),i_=g=>rv(g,NS),Bs=qd("resizer-bar-dragging"),l_=g=>{const v=Ky(),k=Ur(v,{});let _=Be.none();const B=(ln,jn)=>Be.from(Ms(ln,jn));v.events.drag.bind(ln=>{B(ln.target,"data-row").each(jn=>{const Xt=er(ln.target,"top");Jo(ln.target,"top",Xt+ln.yDelta+"px")}),B(ln.target,"data-column").each(jn=>{const Xt=er(ln.target,"left");Jo(ln.target,"left",Xt+ln.xDelta+"px")})});const Z=(ln,jn)=>{const Xt=er(ln,jn),cn=Mr(ln,"data-initial-"+jn,0);return Xt-cn};k.events.stop.bind(()=>{v.get().each(ln=>{_.each(jn=>{B(ln,"data-row").each(Xt=>{const cn=Z(ln,"top");Re(ln,"data-initial-top"),pn.trigger.adjustHeight(jn,cn,parseInt(Xt,10))}),B(ln,"data-column").each(Xt=>{const cn=Z(ln,"left");Re(ln,"data-initial-left"),pn.trigger.adjustWidth(jn,cn,parseInt(Xt,10))}),Zc(g,jn)})})});const se=(ln,jn)=>{pn.trigger.startAdjust(),v.assign(ln),mr(ln,"data-initial-"+jn,er(ln,jn)),Zd(ln,Bs),Jo(ln,"opacity","0.2"),k.go(g.parent())},ge=ym(g.parent(),"mousedown",ln=>{a_(ln.target)&&se(ln.target,"top"),i_(ln.target)&&se(ln.target,"left")}),Ae=ln=>Vt(ln,g.view()),Ue=ln=>Ma(ln,"table",Ae).filter(Ug),ct=ym(g.view(),"mouseover",ln=>{Ue(ln.target).fold(()=>{_o(ln.target)&&Sm(g)},jn=>{k.isActive()&&(_=Be.some(jn),Zc(g,jn))})}),Kt=()=>{ge.unbind(),ct.unbind(),k.destroy(),Sm(g)},Sn=ln=>{Zc(g,ln)},pn=Gd({adjustHeight:mu(["table","delta","row"]),adjustWidth:mu(["table","delta","column"]),startAdjust:mu([])});return{destroy:Kt,refresh:Sn,on:k.on,off:k.off,hideBars:jt(Np,g),showBars:jt($4,g),events:pn.registry}},ew={create:(g,v,k)=>{const _=fo,B=tg,Z=l_(g),se=Gd({beforeResize:mu(["table","type"]),afterResize:mu(["table","type"]),startDrag:mu([])});return Z.events.adjustHeight.bind(ge=>{const Ae=ge.table;se.trigger.beforeResize(Ae,"row");const Ue=_.delta(ge.delta,Ae);Xx(Ae,Ue,ge.row),se.trigger.afterResize(Ae,"row")}),Z.events.startAdjust.bind(ge=>{se.trigger.startDrag()}),Z.events.adjustWidth.bind(ge=>{const Ae=ge.table;se.trigger.beforeResize(Ae,"col");const Ue=B.delta(ge.delta,Ae),ct=k(Ae);l2(Ae,Ue,ge.column,v,ct),se.trigger.afterResize(Ae,"col")}),{on:Z.on,off:Z.off,refreshBars:Z.refresh,hideBars:Z.hideBars,showBars:Z.showBars,destroy:Z.destroy,events:se.registry}}},uv={only:(g,v)=>{const k=vl(g)?eo(g):g;return{parent:oe(k),view:oe(g),origin:oe(Jt(0,0)),isResizable:v}},detached:(g,v,k)=>{const _=()=>sr(v);return{parent:oe(v),view:oe(g),origin:_,isResizable:k}},body:(g,v,k)=>({parent:oe(v),view:oe(g),origin:oe(Jt(0,0)),isResizable:k})},u_=()=>{const g=Xe.fromTag("div");return fr(g,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),pr(kr(),g),g},d_=(g,v)=>g.inline?uv.body(Xe.fromDom(g.getBody()),u_(),v):uv.only(Xe.fromDom(g.getDoc()),v),tw=(g,v)=>{g.inline&&ya(v.parent())},S1=g=>Ln(g)&&g.nodeName==="TABLE",k1="bar-",W4=g=>Ms(g,"data-mce-resize")!=="false",h_=g=>{const v=ve.fromTable(g);ve.hasColumns(v)||it(_c(g),k=>{const _=na(k,"width");Jo(k,"width",_),Re(k,"width")})},dv=g=>Gi(g,"corner-"),nw=g=>tn(g,"corner-"),g_=g=>{const v=hf(),k=hf(),_=hf();let B,Z,se,ge;const Ae=cn=>B0(g,cn),Ue=()=>$d(g)?lg():Gg(),ct=cn=>Yf(cn).columns,Kt=cn=>Yf(cn).rows,Sn=(cn,dn,Ho,Hs)=>{const Or=nw(dn),ia=Pi(Or,"e"),Aa=Gi(Or,"n");if(Z===""&&im(cn),ge===""&&bE(cn),Ho!==B&&Z!==""){Jo(cn,"width",Z);const bu=Ue(),Kd=Ae(cn),km=$d(g)||ia?ct(cn)-1:0;l2(cn,Ho-B,km,bu,Kd)}else if(Ax(Z)){const bu=parseFloat(Z.replace("%","")),Kd=Ho*bu/B;Jo(cn,"width",Kd+"%")}if(Gm(Z)&&h_(cn),Hs!==se&&ge!==""){Jo(cn,"height",ge);const bu=Aa?0:Kt(cn)-1;Xx(cn,Hs-se,bu)}},pn=()=>{k.on(cn=>{cn.destroy()}),_.on(cn=>{tw(g,cn)})};return g.on("init",()=>{const cn=d_(g,W4);if(_.set(cn),HT(g)&&u0(g)){const dn=Ue(),Ho=ew.create(cn,dn,Ae);g.mode.isReadOnly()||Ho.on(),Ho.events.startDrag.bind(Hs=>{v.set(g.selection.getRng())}),Ho.events.beforeResize.bind(Hs=>{const Or=Hs.table.dom;zi(g,Or,wb(Or),Zm(Or),k1+Hs.type)}),Ho.events.afterResize.bind(Hs=>{const Or=Hs.table,ia=Or.dom;uu(Or),v.on(Aa=>{g.selection.setRng(Aa),g.focus()}),Al(g,ia,wb(ia),Zm(ia),k1+Hs.type),g.undoManager.add()}),k.set(Ho)}}),g.on("ObjectResizeStart",cn=>{const dn=cn.target;if(S1(dn)&&!g.mode.isReadOnly()){const Ho=Xe.fromDom(dn);it(g.dom.select(".mce-clonedresizable"),Hs=>{g.dom.addClass(Hs,"mce-"+c0(g)+"-columns")}),!L2(Ho)&&kl(g)?Vb(Ho):!P2(Ho)&&zd(g)&&im(Ho),N2(Ho)&&Gi(cn.origin,k1)&&im(Ho),B=cn.width,Z=Vg(g)?"":FC(g,dn).getOr(""),se=cn.height,ge=BC(g,dn).getOr("")}}),g.on("ObjectResized",cn=>{const dn=cn.target;if(S1(dn)){const Ho=Xe.fromDom(dn),Hs=cn.origin;dv(Hs)&&Sn(Ho,Hs,cn.width,cn.height),uu(Ho),sm(g,Ho.dom,Vi)}}),g.on("SwitchMode",()=>{k.on(cn=>{g.mode.isReadOnly()?(cn.off(),cn.hideBars()):(cn.on(),cn.showBars())})}),g.on("dragstart dragend",cn=>{k.on(dn=>{cn.type==="dragstart"?(dn.hideBars(),dn.off()):(dn.on(),dn.showBars())})}),g.on("remove",()=>{pn()}),{refresh:cn=>{k.on(dn=>dn.refreshBars(Xe.fromDom(cn)))},hide:()=>{k.on(cn=>cn.hideBars())},show:()=>{k.on(cn=>cn.showBars())}}},FS=g=>{vb(g);const v=g_(g),k=g1(g,v),_=ly(g,v,k);return AE(g,_),TE(g,_),R4(g,_),{getSelectedCells:k.getSelectedCells,clearSelectedCells:k.clearSelectedCells}},Do=g=>({table:FS(g)});var A1=()=>{cs.add("dom",Do)};A1()}()),bZ}var xZ;function JG(){return xZ||(xZ=1,KG()),pZ}JG();var yZ={},wZ={},CZ;function QG(){return CZ||(CZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=(Je,ot,V)=>{const Zn=ot==="UL"?"InsertUnorderedList":"InsertOrderedList";Je.execCommand(Zn,!1,V===!1?null:{"list-style-type":V})},gn=Je=>{Je.addCommand("ApplyUnorderedListStyle",(ot,V)=>{Rs(Je,"UL",V["list-style-type"])}),Je.addCommand("ApplyOrderedListStyle",(ot,V)=>{Rs(Je,"OL",V["list-style-type"])})},ys=Je=>ot=>ot.options.get(Je),rn=Je=>{const ot=Je.options.register;ot("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),ot("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},gs=ys("advlist_number_styles"),Fo=ys("advlist_bullet_styles"),Ot=Je=>Je==null,lo=Je=>!Ot(Je);var ns=tinymce.util.Tools.resolve("tinymce.util.Tools");class Bo{constructor(ot,V){this.tag=ot,this.value=V}static some(ot){return new Bo(!0,ot)}static none(){return Bo.singletonNone}fold(ot,V){return this.tag?V(this.value):ot()}isSome(){return this.tag}isNone(){return!this.tag}map(ot){return this.tag?Bo.some(ot(this.value)):Bo.none()}bind(ot){return this.tag?ot(this.value):Bo.none()}exists(ot){return this.tag&&ot(this.value)}forall(ot){return!this.tag||ot(this.value)}filter(ot){return!this.tag||ot(this.value)?this:Bo.none()}getOr(ot){return this.tag?this.value:ot}or(ot){return this.tag?this:ot}getOrThunk(ot){return this.tag?this.value:ot()}orThunk(ot){return this.tag?this:ot()}getOrDie(ot){if(this.tag)return this.value;throw new Error(ot??"Called getOrDie on None")}static from(ot){return lo(ot)?Bo.some(ot):Bo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ot){this.tag&&ot(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Bo.singletonNone=new Bo(!1);const fs=(Je,ot,V)=>{for(let Zn=0,Dt=Je.length;Zn<Dt;Zn++){const Ao=Je[Zn];if(ot(Ao,Zn))return Bo.some(Ao);if(V(Ao,Zn))break}return Bo.none()},Tt=Je=>/\btox\-/.test(Je.className),Ln=(Je,ot)=>Je.dom.isChildOf(ot,Je.getBody()),Lo=Je=>ot=>lo(ot)&&Je.test(ot.nodeName),vn=Lo(/^(OL|UL|DL)$/),Bt=Lo(/^(TH|TD)$/),vo=(Je,ot,V)=>fs(ot,Zn=>vn(Zn)&&!Tt(Zn),Bt).exists(Zn=>Zn.nodeName===V&&Ln(Je,Zn)),xn=Je=>{const ot=Je.dom.getParent(Je.selection.getNode(),"ol,ul"),V=Je.dom.getStyle(ot,"listStyleType");return Bo.from(V)},oe=(Je,ot)=>ot!==null&&!Je.dom.isEditable(ot),Wt=(Je,ot)=>{const V=Je.dom.getParent(ot,"ol,ul,dl");return oe(Je,V)||!Je.selection.isEditable()},Yo=(Je,ot)=>{const V=Je.selection.getNode();return ot({parents:Je.dom.getParents(V),element:V}),Je.on("NodeChange",ot),()=>Je.off("NodeChange",ot)},jt=Je=>Je.replace(/\-/g," ").replace(/\b\w/g,ot=>ot.toUpperCase()),ce=Je=>Ot(Je)||Je==="default"?"":Je,Gt=(Je,ot)=>V=>{const Zn=(Ao,Rn)=>{const it=Ao.selection.getStart(!0);V.setActive(vo(Ao,Rn,ot)),V.setEnabled(!Wt(Ao,it))};return Yo(Je,Ao=>Zn(Je,Ao.parents))},Wn=(Je,ot,V,Zn,Dt,Ao)=>{Je.ui.registry.addSplitButton(ot,{tooltip:V,icon:Dt==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Rn=>{const it=ns.map(Ao,No=>{const qs=Dt==="OL"?"num":"bull",Ht=No==="disc"||No==="decimal"?"default":No,Gn=ce(No),dt=jt(No);return{type:"choiceitem",value:Gn,icon:"list-"+qs+"-"+Ht,text:dt}});Rn(it)},onAction:()=>Je.execCommand(Zn),onItemAction:(Rn,it)=>{Rs(Je,Dt,it)},select:Rn=>xn(Je).map(No=>Rn===No).getOr(!1),onSetup:Gt(Je,Dt)})},no=(Je,ot,V,Zn,Dt,Ao)=>{Je.ui.registry.addToggleButton(ot,{active:!1,tooltip:V,icon:Dt==="OL"?"ordered-list":"unordered-list",onSetup:Gt(Je,Dt),onAction:()=>Je.queryCommandState(Zn)||Ao===""?Je.execCommand(Zn):Rs(Je,Dt,Ao)})},ut=(Je,ot,V,Zn,Dt,Ao)=>{Ao.length>1?Wn(Je,ot,V,Zn,Dt,Ao):no(Je,ot,V,Zn,Dt,ce(Ao[0]))},Be=Je=>{ut(Je,"numlist","Numbered list","InsertOrderedList","OL",gs(Je)),ut(Je,"bullist","Bullet list","InsertUnorderedList","UL",Fo(Je))};var Qo=()=>{cs.add("advlist",Je=>{Je.hasPlugin("lists")?(rn(Je),Be(Je),gn(Je)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};Qo()}()),wZ}var SZ;function eq(){return SZ||(SZ=1,QG()),yZ}eq();var kZ={},AZ={},TZ;function tq(){return TZ||(TZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,gn=Ht=>Gn=>Gn.options.get(Ht),ys=Ht=>{const Gn=Ht.options.register;Gn("autolink_pattern",{processor:"regexp",default:new RegExp("^"+Rs().source+"$","i")}),Gn("link_default_target",{processor:"string"}),Gn("link_default_protocol",{processor:"string",default:"https"})},rn=gn("autolink_pattern"),gs=gn("link_default_target"),Fo=gn("link_default_protocol"),Ot=gn("allow_unsafe_link_target"),lo=(Ht,Gn,dt)=>{var wt;return dt(Ht,Gn.prototype)?!0:((wt=Ht.constructor)===null||wt===void 0?void 0:wt.name)===Gn.name},ns=Ht=>{const Gn=typeof Ht;return Ht===null?"null":Gn==="object"&&Array.isArray(Ht)?"array":Gn==="object"&&lo(Ht,String,(dt,wt)=>wt.isPrototypeOf(dt))?"string":Gn},Bo=Ht=>Gn=>ns(Gn)===Ht,fs=Ht=>Gn=>Ht===Gn,Tt=Bo("string"),Ln=fs(void 0),Lo=Ht=>Ht==null,vn=Ht=>!Lo(Ht),Bt=Ht=>Gn=>!Ht(Gn),vo=Object.hasOwnProperty,xn=(Ht,Gn)=>vo.call(Ht,Gn),oe=(Ht,Gn,dt)=>Ht.length>=Gn.length&&Ht.substr(dt,dt+Gn.length)===Gn,Wt=(Ht,Gn,dt=0,wt)=>{const te=Ht.indexOf(Gn,dt);return te!==-1?Ln(wt)?!0:te+Gn.length<=wt:!1},Yo=(Ht,Gn)=>oe(Ht,Gn,0),jt="\uFEFF",ce=Ht=>Ht===jt,Gt=Ht=>Ht.replace(/\uFEFF/g,"");var Wn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const no=Ht=>Ht.nodeType===3,ut=Ht=>Ht.nodeType===1,Be=Ht=>/^[(\[{ \u00a0]$/.test(Ht),Qo=Ht=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(Ht),Je=Ht=>/[?!,.;:]/.test(Ht),ot=(Ht,Gn,dt)=>{for(let wt=Gn-1;wt>=0;wt--){const te=Ht.charAt(wt);if(!ce(te)&&dt(te))return wt}return-1},V=(Ht,Gn)=>{let dt=Ht,wt=Gn;for(;ut(dt)&&dt.childNodes[wt];)dt=dt.childNodes[wt],wt=no(dt)?dt.data.length:dt.childNodes.length;return{container:dt,offset:wt}},Zn=(Ht,Gn)=>{var dt;const wt=Ht.schema.getVoidElements(),te=rn(Ht),{dom:As,selection:zo}=Ht;if(As.getParent(zo.getNode(),"a[href]")!==null||Ht.mode.isReadOnly())return null;const Un=zo.getRng(),ms=Wn(As,Vo=>As.isBlock(Vo)||xn(wt,Vo.nodeName.toLowerCase())||As.getContentEditable(Vo)==="false"),{container:Ka,offset:We}=V(Un.endContainer,Un.endOffset),Ie=(dt=As.getParent(Ka,As.isBlock))!==null&&dt!==void 0?dt:As.getRoot(),Ze=ms.backwards(Ka,We+Gn,(Vo,Cr)=>{const us=Vo.data,ur=ot(us,Cr,Bt(Be));return ur===-1||Je(us[ur])?ur:ur+1},Ie);if(!Ze)return null;let De=Ze.container;const Xn=ms.backwards(Ze.container,Ze.offset,(Vo,Cr)=>{De=Vo;const us=ot(Vo.data,Cr,Be);return us===-1?us:us+1},Ie),Mo=As.createRng();Xn?Mo.setStart(Xn.container,Xn.offset):Mo.setStart(De,0),Mo.setEnd(Ze.container,Ze.offset);const Qs=Gt(Mo.toString()).match(te);if(Qs){let Vo=Qs[0];return Yo(Vo,"www.")?Vo=Fo(Ht)+"://"+Vo:Wt(Vo,"@")&&!Qo(Vo)&&(Vo="mailto:"+Vo),{rng:Mo,url:Vo}}else return null},Dt=(Ht,Gn)=>{const{dom:dt,selection:wt}=Ht,{rng:te,url:As}=Gn,zo=wt.getBookmark();wt.setRng(te);const Un="createlink",ms={command:Un,ui:!1,value:As};if(!Ht.dispatch("BeforeExecCommand",ms).isDefaultPrevented()){Ht.getDoc().execCommand(Un,!1,As),Ht.dispatch("ExecCommand",ms);const We=gs(Ht);if(Tt(We)){const Ie=wt.getNode();dt.setAttrib(Ie,"target",We),We==="_blank"&&!Ot(Ht)&&dt.setAttrib(Ie,"rel","noopener")}}wt.moveToBookmark(zo),Ht.nodeChanged()},Ao=Ht=>{const Gn=Zn(Ht,-1);vn(Gn)&&Dt(Ht,Gn)},Rn=Ao,it=Ht=>{const Gn=Zn(Ht,0);vn(Gn)&&Dt(Ht,Gn)},No=Ht=>{Ht.on("keydown",Gn=>{Gn.keyCode===13&&!Gn.isDefaultPrevented()&&it(Ht)}),Ht.on("keyup",Gn=>{Gn.keyCode===32?Ao(Ht):(Gn.keyCode===48&&Gn.shiftKey||Gn.keyCode===221)&&Rn(Ht)})};var qs=()=>{cs.add("autolink",Ht=>{ys(Ht),No(Ht)})};qs()}()),AZ}var EZ;function nq(){return EZ||(EZ=1,tq()),kZ}nq();var _Z={},OZ={},RZ;function oq(){return RZ||(RZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=(P,W,q)=>{var ue;return q(P,W.prototype)?!0:((ue=P.constructor)===null||ue===void 0?void 0:ue.name)===W.name},gn=P=>{const W=typeof P;return P===null?"null":W==="object"&&Array.isArray(P)?"array":W==="object"&&Rs(P,String,(q,ue)=>ue.isPrototypeOf(q))?"string":W},ys=P=>W=>gn(W)===P,rn=P=>W=>typeof W===P,gs=ys("string"),Fo=ys("object"),Ot=ys("array"),lo=rn("boolean"),ns=P=>P==null,Bo=P=>!ns(P),fs=rn("function"),Tt=rn("number"),Ln=()=>{},Lo=(P,W)=>q=>P(W(q)),vn=P=>()=>P,Bt=(P,W)=>P===W;function vo(P,...W){return(...q)=>{const ue=W.concat(q);return P.apply(null,ue)}}const xn=P=>W=>!P(W),oe=vn(!1);class Wt{constructor(W,q){this.tag=W,this.value=q}static some(W){return new Wt(!0,W)}static none(){return Wt.singletonNone}fold(W,q){return this.tag?q(this.value):W()}isSome(){return this.tag}isNone(){return!this.tag}map(W){return this.tag?Wt.some(W(this.value)):Wt.none()}bind(W){return this.tag?W(this.value):Wt.none()}exists(W){return this.tag&&W(this.value)}forall(W){return!this.tag||W(this.value)}filter(W){return!this.tag||W(this.value)?this:Wt.none()}getOr(W){return this.tag?this.value:W}or(W){return this.tag?this:W}getOrThunk(W){return this.tag?this.value:W()}orThunk(W){return this.tag?this:W()}getOrDie(W){if(this.tag)return this.value;throw new Error(W??"Called getOrDie on None")}static from(W){return Bo(W)?Wt.some(W):Wt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(W){this.tag&&W(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Wt.singletonNone=new Wt(!1);const Yo=Array.prototype.slice,jt=Array.prototype.indexOf,ce=Array.prototype.push,Gt=(P,W)=>jt.call(P,W),Wn=(P,W)=>Gt(P,W)>-1,no=(P,W)=>{for(let q=0,ue=P.length;q<ue;q++){const ye=P[q];if(W(ye,q))return!0}return!1},ut=(P,W)=>{const q=P.length,ue=new Array(q);for(let ye=0;ye<q;ye++){const nt=P[ye];ue[ye]=W(nt,ye)}return ue},Be=(P,W)=>{for(let q=0,ue=P.length;q<ue;q++){const ye=P[q];W(ye,q)}},Qo=(P,W)=>{const q=[];for(let ue=0,ye=P.length;ue<ye;ue++){const nt=P[ue];W(nt,ue)&&q.push(nt)}return q},Je=(P,W)=>{if(P.length===0)return[];{let q=W(P[0]);const ue=[];let ye=[];for(let nt=0,Ft=P.length;nt<Ft;nt++){const an=P[nt],hn=W(an);hn!==q&&(ue.push(ye),ye=[]),q=hn,ye.push(an)}return ye.length!==0&&ue.push(ye),ue}},ot=(P,W,q)=>(Be(P,(ue,ye)=>{q=W(q,ue,ye)}),q),V=(P,W,q)=>{for(let ue=0,ye=P.length;ue<ye;ue++){const nt=P[ue];if(W(nt,ue))return Wt.some(nt);if(q(nt,ue))break}return Wt.none()},Zn=(P,W)=>V(P,W,oe),Dt=P=>{const W=[];for(let q=0,ue=P.length;q<ue;++q){if(!Ot(P[q]))throw new Error("Arr.flatten item "+q+" was not an array, input: "+P);ce.apply(W,P[q])}return W},Ao=(P,W)=>Dt(ut(P,W)),Rn=P=>{const W=Yo.call(P,0);return W.reverse(),W},it=(P,W)=>W>=0&&W<P.length?Wt.some(P[W]):Wt.none(),No=P=>it(P,0),qs=P=>it(P,P.length-1),Ht=(P,W)=>{const q=[],ue=fs(W)?ye=>no(q,nt=>W(nt,ye)):ye=>Wn(q,ye);for(let ye=0,nt=P.length;ye<nt;ye++){const Ft=P[ye];ue(Ft)||q.push(Ft)}return q},Gn=(P,W,q=Bt)=>P.exists(ue=>q(ue,W)),dt=(P,W,q=Bt)=>wt(P,W,q).getOr(P.isNone()&&W.isNone()),wt=(P,W,q)=>P.isSome()&&W.isSome()?Wt.some(q(P.getOrDie(),W.getOrDie())):Wt.none(),te=8,As=11,zo=1,Un=3,ms=(P,W)=>{const ue=(W||document).createElement("div");if(ue.innerHTML=P,!ue.hasChildNodes()||ue.childNodes.length>1){const ye="HTML does not have a single root node";throw console.error(ye,P),new Error(ye)}return Ie(ue.childNodes[0])},Ka=(P,W)=>{const ue=(W||document).createElement(P);return Ie(ue)},We=(P,W)=>{const ue=(W||document).createTextNode(P);return Ie(ue)},Ie=P=>{if(P==null)throw new Error("Node cannot be null or undefined");return{dom:P}},De={fromHtml:ms,fromTag:Ka,fromText:We,fromDom:Ie,fromPoint:(P,W,q)=>Wt.from(P.dom.elementFromPoint(W,q)).map(Ie)},Xn=(P,W)=>{const q=P.dom;if(q.nodeType!==zo)return!1;{const ue=q;if(ue.matches!==void 0)return ue.matches(W);if(ue.msMatchesSelector!==void 0)return ue.msMatchesSelector(W);if(ue.webkitMatchesSelector!==void 0)return ue.webkitMatchesSelector(W);if(ue.mozMatchesSelector!==void 0)return ue.mozMatchesSelector(W);throw new Error("Browser lacks native selectors")}},Mo=(P,W)=>P.dom===W.dom,Cn=(P,W)=>{const q=P.dom,ue=W.dom;return q===ue?!1:q.contains(ue)},Qs=Xn,Vo=typeof window<"u"?window:Function("return this;")(),Cr=(P,W)=>{let q=W??Vo;for(let ue=0;ue<P.length&&q!==void 0&&q!==null;++ue)q=q[P[ue]];return q},us=(P,W)=>{const q=P.split(".");return Cr(q,W)},ur=(P,W)=>us(P,W),ri=(P,W)=>{const q=ur(P,W);if(q==null)throw new Error(P+" not available on this browser");return q},vr=Object.getPrototypeOf,qo=P=>ri("HTMLElement",P),ds=P=>{const W=us("ownerDocument.defaultView",P);return Fo(P)&&(qo(W).prototype.isPrototypeOf(P)||/^HTML\w*Element$/.test(vr(P).constructor.name))},jr=P=>P.dom.nodeName.toLowerCase(),$s=P=>P.dom.nodeType,Go=P=>W=>$s(W)===P,Xs=P=>$s(P)===te||jr(P)==="#comment",qn=P=>Ns(P)&&ds(P.dom),Ns=Go(zo),oo=Go(Un),Wr=Go(As),yi=P=>W=>Ns(W)&&jr(W)===P,uo=P=>Wt.from(P.dom.parentNode).map(De.fromDom),Ri=P=>Wt.from(P.dom.parentElement).map(De.fromDom),Yt=P=>Wt.from(P.dom.nextSibling).map(De.fromDom),os=P=>ut(P.dom.childNodes,De.fromDom),Lr=(P,W)=>{const q=P.dom.childNodes;return Wt.from(q[W]).map(De.fromDom)},Zr=P=>Lr(P,0),Fa=P=>Lr(P,P.dom.childNodes.length-1),Xa=P=>Wr(P)&&Bo(P.dom.host),Is=P=>De.fromDom(P.dom.getRootNode()),da=P=>{const W=Is(P);return Xa(W)?Wt.some(W):Wt.none()},Dr=P=>De.fromDom(P.dom.host),Ts=P=>{const W=oo(P)?P.dom.parentNode:P.dom;if(W==null||W.ownerDocument===null)return!1;const q=W.ownerDocument;return da(De.fromDom(W)).fold(()=>q.body.contains(W),Lo(Ts,Dr))};var Qn=(P,W,q,ue,ye)=>P(q,ue)?Wt.some(q):fs(ye)&&ye(q)?Wt.none():W(q,ue,ye);const hr=(P,W,q)=>{let ue=P.dom;const ye=fs(q)?q:oe;for(;ue.parentNode;){ue=ue.parentNode;const nt=De.fromDom(ue);if(W(nt))return Wt.some(nt);if(ye(nt))break}return Wt.none()},Ta=(P,W,q)=>Qn((ye,nt)=>nt(ye),hr,P,W,q),vl=(P,W,q)=>hr(P,ue=>Xn(ue,W),q),Ol=(P,W,q)=>Qn((ye,nt)=>Xn(ye,nt),vl,P,W,q),Ds=P=>Ol(P,"[contenteditable]"),yo=(P,W=!1)=>Ts(P)?P.dom.isContentEditable:Ds(P).fold(vn(W),q=>mr(q)==="true"),mr=P=>P.dom.contentEditable,Ea=(P,W)=>{uo(P).each(ue=>{ue.dom.insertBefore(W.dom,P.dom)})},va=(P,W)=>{Yt(P).fold(()=>{uo(P).each(ye=>{Ne(ye,W)})},ue=>{Ea(ue,W)})},Ms=(P,W)=>{Zr(P).fold(()=>{Ne(P,W)},ue=>{P.dom.insertBefore(W.dom,ue.dom)})},Ne=(P,W)=>{P.dom.appendChild(W.dom)},Re=(P,W)=>{Be(W,q=>{Ea(P,q)})},gt=(P,W)=>{Be(W,q=>{Ne(P,q)})},ft=P=>{P.dom.textContent="",Be(os(P),W=>{Yn(W)})},Yn=P=>{const W=P.dom;W.parentNode!==null&&W.parentNode.removeChild(W)};var go=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),To=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Sr=tinymce.util.Tools.resolve("tinymce.util.VK");const Xe=P=>ut(P,De.fromDom),Eo=Object.keys,He=(P,W)=>{const q=Eo(P);for(let ue=0,ye=q.length;ue<ye;ue++){const nt=q[ue],Ft=P[nt];W(Ft,nt)}},ze=P=>(W,q)=>{P[q]=W},It=(P,W,q,ue)=>{He(P,(ye,nt)=>{(W(ye,nt)?q:ue)(ye,nt)})},Vt=(P,W)=>{const q={};return It(P,W,ze(q),Ln),q},bn=(P,W,q)=>{if(gs(q)||lo(q)||Tt(q))P.setAttribute(W,q+"");else throw console.error("Invalid call to Attribute.set. Key ",W,":: Value ",q,":: Element ",P),new Error("Attribute value was not simple")},Hn=(P,W)=>{const q=P.dom;He(W,(ue,ye)=>{bn(q,ye,ue)})},$n=P=>ot(P.dom.attributes,(W,q)=>(W[q.name]=q.value,W),{}),Mn=(P,W)=>De.fromDom(P.dom.cloneNode(W)),eo=P=>Mn(P,!0),co=(P,W)=>{const q=De.fromTag(W),ue=$n(P);return Hn(q,ue),q},ps=(P,W)=>{const q=co(P,W);va(P,q);const ue=os(P);return gt(q,ue),Yn(P),q};var Ks=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ys=tinymce.util.Tools.resolve("tinymce.util.Tools");const hi=P=>W=>Bo(W)&&W.nodeName.toLowerCase()===P,Ja=P=>W=>Bo(W)&&P.test(W.nodeName),so=P=>Bo(P)&&P.nodeType===3,ls=P=>Bo(P)&&P.nodeType===1,ss=Ja(/^(OL|UL|DL)$/),_a=Ja(/^(OL|UL)$/),xa=hi("ol"),ea=Ja(/^(LI|DT|DD)$/),pr=Ja(/^(DT|DD)$/),eu=Ja(/^(TH|TD)$/),ji=hi("br"),Fs=P=>{var W;return((W=P.parentNode)===null||W===void 0?void 0:W.firstChild)===P},Oa=(P,W)=>Bo(W)&&W.nodeName in P.schema.getTextBlockElements(),Ra=(P,W)=>Bo(P)&&P.nodeName in W,ya=(P,W)=>Bo(W)&&W.nodeName in P.schema.getVoidElements(),Di=(P,W)=>ji(W)?P.isBlock(W.nextSibling)&&!ji(W.previousSibling):!1,Qa=(P,W,q)=>{const ue=P.isEmpty(W);return q&&P.select("span[data-mce-type=bookmark]",W).length>0?!1:ue},ai=(P,W)=>P.isChildOf(W,P.getRoot()),Zi=P=>W=>W.options.get(P),Mi=P=>{const W=P.options.register;W("lists_indent_on_tab",{processor:"boolean",default:!0})},ii=Zi("lists_indent_on_tab"),Ql=Zi("forced_root_block"),wi=Zi("forced_root_block_attrs"),gi=(P,W,q={})=>{const ue=P.dom,ye=P.schema.getBlockElements(),nt=ue.createFragment(),Ft=Ql(P),an=wi(P);let hn,Jt,wo=!1;for(Jt=ue.create(Ft,{...an,...q.style?{style:q.style}:{}}),Ra(W.firstChild,ye)||nt.appendChild(Jt);hn=W.firstChild;){const Ro=hn.nodeName;!wo&&(Ro!=="SPAN"||hn.getAttribute("data-mce-type")!=="bookmark")&&(wo=!0),Ra(hn,ye)?(nt.appendChild(hn),Jt=null):(Jt||(Jt=ue.create(Ft,an),nt.appendChild(Jt)),Jt.appendChild(hn))}return!wo&&Jt&&Jt.appendChild(ue.create("br",{"data-mce-bogus":"1"})),nt},ha=Ks.DOM,ec=(P,W,q)=>{const ue=Jt=>{const wo=Jt.parentNode;wo&&Ys.each(ye,Ro=>{wo.insertBefore(Ro,q.parentNode)}),ha.remove(Jt)},ye=ha.select('span[data-mce-type="bookmark"]',W),nt=gi(P,q),Ft=ha.createRng();Ft.setStartAfter(q),Ft.setEndAfter(W);const an=Ft.extractContents();for(let Jt=an.firstChild;Jt;Jt=Jt.firstChild)if(Jt.nodeName==="LI"&&P.dom.isEmpty(Jt)){ha.remove(Jt);break}P.dom.isEmpty(an)||ha.insertAfter(an,W),ha.insertAfter(nt,W);const hn=q.parentElement;hn&&Qa(P.dom,hn)&&ue(hn),ha.remove(q),Qa(P.dom,W)&&ha.remove(W)},sl=yi("dd"),tc=yi("dt"),Ci=(P,W)=>{sl(W)?ps(W,"dt"):tc(W)&&Ri(W).each(q=>ec(P,q.dom,W.dom))},ga=P=>{tc(P)&&ps(P,"dd")},Ba=(P,W,q)=>{W==="Indent"?Be(q,ga):Be(q,ue=>Ci(P,ue))},ta=(P,W)=>{if(so(P))return{container:P,offset:W};const q=go.getNode(P,W);return so(q)?{container:q,offset:W>=P.childNodes.length?q.data.length:0}:q.previousSibling&&so(q.previousSibling)?{container:q.previousSibling,offset:q.previousSibling.data.length}:q.nextSibling&&so(q.nextSibling)?{container:q.nextSibling,offset:0}:{container:P,offset:W}},Ha=P=>{const W=P.cloneRange(),q=ta(P.startContainer,P.startOffset);W.setStart(q.container,q.offset);const ue=ta(P.endContainer,P.endOffset);return W.setEnd(ue.container,ue.offset),W},nc=["OL","UL","DL"],gr=nc.join(","),he=(P,W)=>{const q=W||P.selection.getStart(!0);return P.dom.getParent(q,gr,kr(P,q))},Me=(P,W)=>Bo(P)&&W.length===1&&W[0]===P,Ge=P=>Qo(P.querySelectorAll(gr),ss),mt=P=>{const W=he(P),q=P.selection.getSelectedBlocks();return Me(W,q)?Ge(W):Qo(q,ue=>ss(ue)&&W!==ue)},Qt=(P,W)=>{const q=Ys.map(W,ue=>{const ye=P.dom.getParent(ue,"li,dd,dt",kr(P,ue));return ye||ue});return Ht(q)},kt=P=>{const W=P.selection.getSelectedBlocks();return Qo(Qt(P,W),ea)},Ps=P=>Qo(kt(P),pr),In=(P,W)=>{const q=P.dom.getParents(W,"TD,TH");return q.length>0?q[0]:P.getBody()},_o=(P,W)=>!ss(W)&&!ea(W)&&no(nc,q=>P.isValidChild(W.nodeName,q)),kr=(P,W)=>{const q=P.dom.getParents(W,P.dom.isBlock),ue=nt=>nt.nodeName.toLowerCase()!==Ql(P);return Zn(q,nt=>ue(nt)&&_o(P.schema,nt)).getOr(P.getBody())},Q=P=>uo(P).exists(W=>ea(W.dom)&&Zr(W).exists(q=>!ss(q.dom))&&Fa(W).exists(q=>!ss(q.dom))),xe=(P,W)=>{const q=P.dom.getParents(W,"ol,ul",kr(P,W));return qs(q)},Le=P=>{const W=xe(P,P.selection.getStart()),q=Qo(P.selection.getSelectedBlocks(),_a);return W.toArray().concat(q)},st=P=>{const W=P.selection.getStart();return P.dom.getParents(W,"ol,ul",kr(P,W))},Mt=P=>{const W=Le(P),q=st(P);return Zn(q,ue=>Q(De.fromDom(ue))).fold(()=>jo(P,W),ue=>[ue])},jo=(P,W)=>{const q=ut(W,ue=>xe(P,ue).getOr(ue));return Ht(q)},js=P=>/\btox\-/.test(P.className),nr=(P,W)=>V(P,ss,eu).exists(q=>q.nodeName===W&&!js(q)),zt=(P,W)=>W!==null&&!P.dom.isEditable(W),or=P=>{const W=he(P);return zt(P,W)||!P.selection.isEditable()},Da=(P,W)=>{const q=P.dom.getParent(W,"ol,ul,dl");return zt(P,q)||!P.selection.isEditable()},Rl=(P,W)=>{const q=P.selection.getNode();return W({parents:P.dom.getParents(q),element:q}),P.on("NodeChange",W),()=>P.off("NodeChange",W)},Oo=(P,W)=>{const ue=document.createDocumentFragment();return Be(P,ye=>{ue.appendChild(ye.dom)}),De.fromDom(ue)},Si=(P,W,q)=>P.dispatch("ListMutation",{action:W,element:q}),Ma=(P=>W=>W.replace(P,""))(/^\s+|\s+$/g),Xo=P=>P.length>0,xl=P=>!Xo(P),yl=P=>P.style!==void 0&&fs(P.style.getPropertyValue),Ku=(P,W,q)=>{if(!gs(q))throw console.error("Invalid call to CSS.set. Property ",W,":: Value ",q,":: Element ",P),new Error("CSS value must be a string: "+q);yl(P)&&P.style.setProperty(W,q)},Gr=(P,W,q)=>{const ue=P.dom;Ku(ue,W,q)},Ya=P=>Qs(P,"OL,UL"),tn=P=>Qs(P,"LI"),bs=P=>Zr(P).exists(Ya),Gi=P=>Fa(P).exists(Ya),Pi=P=>"listAttributes"in P,ja=P=>"isComment"in P,pe=P=>"isFragment"in P,Se=P=>P.depth>0,at=P=>P.isSelected,Et=P=>{const W=os(P),q=Gi(P)?W.slice(0,-1):W;return ut(q,eo)},ro=(P,W,q)=>uo(P).filter(Ns).map(ue=>({depth:W,dirty:!1,isSelected:q,content:Et(P),itemAttributes:$n(P),listAttributes:$n(ue),listType:jr(ue),isInPreviousLi:!1})),es=(P,W)=>{Ne(P.item,W.list)},Jo=P=>{for(let W=1;W<P.length;W++)es(P[W-1],P[W])},fr=(P,W)=>{wt(qs(P),No(W),es)},na=(P,W)=>{const q={list:De.fromTag(W,P),item:De.fromTag("li",P)};return Ne(q.list,q.item),q},ei=(P,W,q)=>{const ue=[];for(let ye=0;ye<q;ye++)ue.push(na(P,Pi(W)?W.listType:W.parentListType));return ue},$a=(P,W)=>{for(let q=0;q<P.length-1;q++)Gr(P[q].item,"list-style-type","none");qs(P).each(q=>{Pi(W)&&(Hn(q.list,W.listAttributes),Hn(q.item,W.itemAttributes)),gt(q.item,W.content)})},oa=(P,W)=>{jr(P.list)!==W.listType&&(P.list=ps(P.list,W.listType)),Hn(P.list,W.listAttributes)},fa=(P,W,q)=>{const ue=De.fromTag("li",P);return Hn(ue,W),gt(ue,q),ue},Mr=(P,W)=>{Ne(P.list,W),P.item=W},Pa=(P,W,q)=>{const ue=W.slice(0,q.depth);return qs(ue).each(ye=>{if(Pi(q)){const nt=fa(P,q.itemAttributes,q.content);Mr(ye,nt),oa(ye,q)}else if(pe(q))gt(ye.item,q.content);else{const nt=De.fromHtml(`<!--${q.content}-->`);Ne(ye.list,nt)}}),ue},Fr=(P,W,q)=>{const ue=ei(P,q,q.depth-W.length);return Jo(ue),$a(ue,q),fr(W,ue),W.concat(ue)},Nr=(P,W)=>{let q=Wt.none();const ue=ot(W,(ye,nt,Ft)=>ja(nt)?Ft===0?(q=Wt.some(nt),ye):Pa(P,ye,nt):nt.depth>ye.length?Fr(P,ye,nt):Pa(P,ye,nt),[]);return q.each(ye=>{const nt=De.fromHtml(`<!--${ye.content}-->`);No(ue).each(Ft=>{Ms(Ft.list,nt)})}),No(ue).map(ye=>ye.list)},er=(P,W)=>{switch(P){case"Indent":W.depth++;break;case"Outdent":W.depth--;break;case"Flatten":W.depth=0}W.dirty=!0},$l=(P,W)=>{Pi(P)&&Pi(W)&&(P.listType=W.listType,P.listAttributes={...W.listAttributes})},Lc=P=>{P.listAttributes=Vt(P.listAttributes,(W,q)=>q!=="start")},zl=(P,W)=>{const q=P[W].depth,ue=nt=>nt.depth===q&&!nt.dirty,ye=nt=>nt.depth<q;return V(Rn(P.slice(0,W)),ue,ye).orThunk(()=>V(P.slice(W+1),ue,ye))},tu=P=>(Be(P,(W,q)=>{zl(P,q).fold(()=>{W.dirty&&Pi(W)&&Lc(W)},ue=>$l(W,ue))}),P),nu=P=>{let W=P;return{get:()=>W,set:ye=>{W=ye}}},Ec=(P,W,q,ue)=>{var ye;if(Xs(ue))return[{depth:P+1,content:(ye=ue.dom.nodeValue)!==null&&ye!==void 0?ye:"",dirty:!1,isSelected:!1,isComment:!0}];W.each(an=>{Mo(an.start,ue)&&q.set(!0)});const nt=ro(ue,P,q.get());W.each(an=>{Mo(an.end,ue)&&q.set(!1)});const Ft=Fa(ue).filter(Ya).map(an=>Dl(P,W,q,an)).getOr([]);return nt.toArray().concat(Ft)},_c=(P,W,q,ue)=>Zr(ue).filter(Ya).fold(()=>Ec(P,W,q,ue),ye=>{const nt=ot(os(ue),(Ft,an,hn)=>{if(hn===0)return Ft;if(tn(an))return Ft.concat(Ec(P,W,q,an));{const Jt={isFragment:!0,depth:P,content:[an],isSelected:!1,dirty:!1,parentListType:jr(ye)};return Ft.concat(Jt)}},[]);return Dl(P,W,q,ye).concat(nt)}),Dl=(P,W,q,ue)=>Ao(os(ue),ye=>{const nt=Ya(ye)?Dl:_c,Ft=P+1;return nt(Ft,W,q,ye)}),qi=(P,W)=>{const q=nu(!1),ue=0;return ut(P,ye=>({sourceList:ye,entries:Dl(ue,W,q,ye)}))},jh=(P,W)=>{const q=tu(W);return ut(q,ue=>{const ye=ja(ue)?Oo([De.fromHtml(`<!--${ue.content}-->`)]):Oo(ue.content),nt=Pi(ue)?ue.itemAttributes:{};return De.fromDom(gi(P,ye.dom,nt))})},oc=(P,W)=>{const q=tu(W);return Nr(P.contentDocument,q).toArray()},mh=(P,W)=>Ao(Je(W,Se),q=>No(q).exists(Se)?oc(P,q):jh(P,q)),Tu=(P,W)=>{Be(Qo(P,at),q=>er(W,q))},ph=P=>{const W=ut(kt(P),De.fromDom);return wt(Zn(W,xn(bs)),Zn(Rn(W),xn(bs)),(q,ue)=>({start:q,end:ue}))},Md=(P,W,q)=>{const ue=qi(W,ph(P));Be(ue,ye=>{Tu(ye.entries,q);const nt=mh(P,ye.entries);Be(nt,Ft=>{Si(P,q==="Indent"?"IndentList":"OutdentList",Ft.dom)}),Re(ye.sourceList,nt),Yn(ye.sourceList)})},Eu=(P,W)=>{const q=Xe(Mt(P)),ue=Xe(Ps(P));let ye=!1;if(q.length||ue.length){const nt=P.selection.getBookmark();Md(P,q,W),Ba(P,W,ue),P.selection.moveToBookmark(nt),P.selection.setRng(Ha(P.selection.getRng())),P.nodeChanged(),ye=!0}return ye},Pd=(P,W)=>!or(P)&&Eu(P,W),bh=P=>Pd(P,"Indent"),fc=P=>Pd(P,"Outdent"),Zh=P=>Pd(P,"Flatten"),$e="\uFEFF",ou=P=>P===$e,Ml=(P,W,q)=>hr(P,W,q).isSome(),Gh=(P,W)=>Ml(P,vo(Mo,W));var Ng=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Nc=Ks.DOM,rs=P=>{const W={},q=ue=>{let ye=P[ue?"startContainer":"endContainer"],nt=P[ue?"startOffset":"endOffset"];if(ls(ye)){const Ft=Nc.create("span",{"data-mce-type":"bookmark"});ye.hasChildNodes()?(nt=Math.min(nt,ye.childNodes.length-1),ue?ye.insertBefore(Ft,ye.childNodes[nt]):Nc.insertAfter(Ft,ye.childNodes[nt])):ye.appendChild(Ft),ye=Ft,nt=0}W[ue?"startContainer":"endContainer"]=ye,W[ue?"startOffset":"endOffset"]=nt};return q(!0),P.collapsed||q(),W},Li=P=>{const W=ue=>{const ye=an=>{var hn;let Jt=(hn=an.parentNode)===null||hn===void 0?void 0:hn.firstChild,wo=0;for(;Jt;){if(Jt===an)return wo;(!ls(Jt)||Jt.getAttribute("data-mce-type")!=="bookmark")&&wo++,Jt=Jt.nextSibling}return-1};let nt=P[ue?"startContainer":"endContainer"],Ft=P[ue?"startOffset":"endOffset"];if(nt){if(ls(nt)&&nt.parentNode){const an=nt;Ft=ye(nt),nt=nt.parentNode,Nc.remove(an),!nt.hasChildNodes()&&Nc.isBlock(nt)&&nt.appendChild(Nc.create("br"))}P[ue?"startContainer":"endContainer"]=nt,P[ue?"startOffset":"endOffset"]=Ft}};W(!0),W();const q=Nc.createRng();return q.setStart(P.startContainer,P.startOffset),P.endContainer&&q.setEnd(P.endContainer,P.endOffset),Ha(q)},fi=P=>{switch(P){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ic=(P,W,q)=>{const ue=q["list-style-type"]?q["list-style-type"]:null;P.setStyle(W,"list-style-type",ue)},vh=(P,W)=>{Ys.each(W,(q,ue)=>{P.setAttribute(ue,q)})},Ju=(P,W,q)=>{vh(W,q["list-attributes"]),Ys.each(P.select("li",W),ue=>{vh(ue,q["list-item-attributes"])})},Za=(P,W,q)=>{Ic(P,W,q),Ju(P,W,q)},Qu=(P,W,q)=>{Ys.each(q,ue=>P.setStyle(W,ue,""))},mc=(P,W)=>Bo(W)&&!Ra(W,P.schema.getBlockElements()),ed=(P,W,q,ue)=>{let ye=W[q?"startContainer":"endContainer"];const nt=W[q?"startOffset":"endOffset"];ls(ye)&&(ye=ye.childNodes[Math.min(nt,ye.childNodes.length-1)]||ye),!q&&ji(ye.nextSibling)&&(ye=ye.nextSibling);const Ft=hn=>{for(;!P.dom.isBlock(hn)&&hn.parentNode&&ue!==hn;)hn=hn.parentNode;return hn},an=(hn,Jt)=>{var wo;const Ro=new To(hn,Ft(hn)),sr=Jt?"next":"prev";let qr;for(;qr=Ro[sr]();)if(!(ya(P,qr)||ou(qr.textContent)||((wo=qr.textContent)===null||wo===void 0?void 0:wo.length)===0))return Wt.some(qr);return Wt.none()};if(q&&so(ye))if(ou(ye.textContent))ye=an(ye,!1).getOr(ye);else for(ye.parentNode!==null&&mc(P,ye.parentNode)&&(ye=ye.parentNode);ye.previousSibling!==null&&(mc(P,ye.previousSibling)||so(ye.previousSibling));)ye=ye.previousSibling;if(!q&&so(ye))if(ou(ye.textContent))ye=an(ye,!0).getOr(ye);else for(ye.parentNode!==null&&mc(P,ye.parentNode)&&(ye=ye.parentNode);ye.nextSibling!==null&&(mc(P,ye.nextSibling)||so(ye.nextSibling));)ye=ye.nextSibling;for(;ye.parentNode!==ue;){const hn=ye.parentNode;if(Oa(P,ye)||/^(TD|TH)$/.test(hn.nodeName))return ye;ye=hn}return ye},Fc=(P,W,q)=>{const ue=[],ye=P.dom,nt=ed(P,W,!0,q),Ft=ed(P,W,!1,q);let an;const hn=[];for(let Jt=nt;Jt&&(hn.push(Jt),Jt!==Ft);Jt=Jt.nextSibling);return Ys.each(hn,Jt=>{var wo;if(Oa(P,Jt)){ue.push(Jt),an=null;return}if(ye.isBlock(Jt)||ji(Jt)){ji(Jt)&&ye.remove(Jt),an=null;return}const Ro=Jt.nextSibling;if(Ng.isBookmarkNode(Jt)&&(ss(Ro)||Oa(P,Ro)||!Ro&&Jt.parentNode===q)){an=null;return}an||(an=ye.create("p"),(wo=Jt.parentNode)===null||wo===void 0||wo.insertBefore(an,Jt),ue.push(an)),an.appendChild(Jt)}),ue},Ni=(P,W,q)=>{const ue=P.getStyle(W,"list-style-type");let ye=q?q["list-style-type"]:"";return ye=ye===null?"":ye,ue===ye},qh=(P,W)=>{const q=P.selection.getStart(!0),ue=ed(P,W,!0,P.getBody());return Gh(De.fromDom(ue),De.fromDom(W.commonAncestorContainer))?W.commonAncestorContainer:q},td=(P,W,q)=>{const ue=P.selection.getRng();let ye="LI";const nt=kr(P,qh(P,ue)),Ft=P.dom;if(Ft.getContentEditable(P.selection.getNode())==="false")return;W=W.toUpperCase(),W==="DL"&&(ye="DT");const an=rs(ue),hn=Qo(Fc(P,ue,nt),P.dom.isEditable);Ys.each(hn,Jt=>{let wo;const Ro=Jt.previousSibling,sr=Jt.parentNode;ea(sr)||(Ro&&ss(Ro)&&Ro.nodeName===W&&Ni(Ft,Ro,q)?(wo=Ro,Jt=Ft.rename(Jt,ye),Ro.appendChild(Jt)):(wo=Ft.create(W),sr.insertBefore(wo,Jt),wo.appendChild(Jt),Jt=Ft.rename(Jt,ye)),Qu(Ft,Jt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Za(Ft,wo,q),nd(P.dom,wo))}),P.selection.setRng(Li(an))},li=(P,W)=>ss(P)&&P.nodeName===(W==null?void 0:W.nodeName),wl=(P,W,q)=>{const ue=P.getStyle(W,"list-style-type",!0),ye=P.getStyle(q,"list-style-type",!0);return ue===ye},Ki=(P,W)=>P.className===W.className,_u=(P,W,q)=>li(W,q)&&wl(P,W,q)&&Ki(W,q),nd=(P,W)=>{let q,ue=W.nextSibling;if(_u(P,W,ue)){const ye=ue;for(;q=ye.firstChild;)W.appendChild(q);P.remove(ye)}if(ue=W.previousSibling,_u(P,W,ue)){const ye=ue;for(;q=ye.lastChild;)W.insertBefore(q,W.firstChild);P.remove(ye)}},Kh=(P,W,q,ue)=>{if(W.nodeName!==q){const ye=P.dom.rename(W,q);Za(P.dom,ye,ue),Si(P,fi(q),ye)}else Za(P.dom,W,ue),Si(P,fi(q),W)},su=(P,W,q,ue)=>{if(W.classList.forEach((ye,nt,Ft)=>{ye.startsWith("tox-")&&(Ft.remove(ye),Ft.length===0&&W.removeAttribute("class"))}),W.nodeName!==q){const ye=P.dom.rename(W,q);Za(P.dom,ye,ue),Si(P,fi(q),ye)}else Za(P.dom,W,ue),Si(P,fi(q),W)},Vl=(P,W,q,ue,ye)=>{const nt=ss(W);if(nt&&W.nodeName===ue&&!od(ye)&&!js(W))Zh(P);else{td(P,ue,ye);const Ft=rs(P.selection.getRng()),an=nt?[W,...q]:q,hn=nt&&js(W)?su:Kh;Ys.each(an,Jt=>{hn(P,Jt,ue,ye)}),P.selection.setRng(Li(Ft))}},od=P=>"list-style-type"in P,Ig=(P,W,q,ue)=>{if(W!==P.getBody())if(W)if(W.nodeName===q&&!od(ue)&&!js(W))Zh(P);else{const ye=rs(P.selection.getRng());js(W)&&W.classList.forEach((Ft,an,hn)=>{Ft.startsWith("tox-")&&(hn.remove(Ft),hn.length===0&&W.removeAttribute("class"))}),Za(P.dom,W,ue);const nt=P.dom.rename(W,q);nd(P.dom,nt),P.selection.setRng(Li(ye)),td(P,q,ue),Si(P,fi(q),nt)}else td(P,q,ue),Si(P,fi(q),W)},Jh=(P,W,q)=>{const ue=he(P);if(Da(P,ue))return;const ye=mt(P),nt=Fo(q)?q:{};ye.length>0?Vl(P,ue,ye,W,nt):Ig(P,ue,W,nt)},Fg=Ks.DOM,Qh=(P,W)=>{const q=W.parentElement;if(q&&q.nodeName==="LI"&&q.firstChild===W){const ue=q.previousSibling;ue&&ue.nodeName==="LI"?(ue.appendChild(W),Qa(P,q)&&Fg.remove(q)):Fg.setStyle(q,"listStyleType","none")}if(ss(q)){const ue=q.previousSibling;ue&&ue.nodeName==="LI"&&ue.appendChild(W)}},sd=(P,W)=>{const q=Ys.grep(P.select("ol,ul",W));Ys.each(q,ue=>{Qh(P,ue)})},ru=(P,W,q,ue)=>{let ye=W.startContainer;const nt=W.startOffset;if(so(ye)&&(q?nt<ye.data.length:nt>0))return ye;const Ft=P.schema.getNonEmptyElements();ls(ye)&&(ye=go.getNode(ye,nt));const an=new To(ye,ue);q&&Di(P.dom,ye)&&an.next();const hn=q?an.next.bind(an):an.prev2.bind(an);for(;ye=hn();)if(ye.nodeName==="LI"&&!ye.hasChildNodes()||Ft[ye.nodeName]||so(ye)&&ye.data.length>0)return ye;return null},Ld=(P,W)=>{const q=W.childNodes;return q.length===1&&!ss(q[0])&&P.isBlock(q[0])},Br=P=>Wt.from(P).map(De.fromDom).filter(qn).exists(W=>yo(W)&&!Wn(["details"],jr(W))),Hr=(P,W)=>{Ld(P,W)&&Br(W.firstChild)&&P.remove(W.firstChild,!0)},Bc=(P,W,q)=>{let ue;const ye=Ld(P,q)?q.firstChild:q;if(Hr(P,W),!Qa(P,W,!0))for(;ue=W.firstChild;)ye.appendChild(ue)},Wl=(P,W,q)=>{let ue;const ye=W.parentNode;if(!ai(P,W)||!ai(P,q))return;ss(q.lastChild)&&(ue=q.lastChild),ye===q.lastChild&&ji(ye.previousSibling)&&P.remove(ye.previousSibling);const nt=q.lastChild;nt&&ji(nt)&&W.hasChildNodes()&&P.remove(nt),Qa(P,q,!0)&&ft(De.fromDom(q)),Bc(P,W,q),ue&&q.appendChild(ue);const an=Cn(De.fromDom(q),De.fromDom(W))?P.getParents(W,ss,q):[];P.remove(W),Be(an,hn=>{Qa(P,hn)&&hn!==P.getRoot()&&P.remove(hn)})},Nd=(P,W,q)=>{ft(De.fromDom(q)),Wl(P.dom,W,q),P.selection.setCursorLocation(q,0)},La=(P,W,q,ue)=>{const ye=P.dom;if(ye.isEmpty(ue))Nd(P,q,ue);else{const nt=rs(W);Wl(ye,q,ue),P.selection.setRng(Li(nt))}},to=(P,W,q,ue)=>{const ye=rs(W);Wl(P.dom,q,ue);const nt=Li(ye);P.selection.setRng(nt)},Oc=(P,W)=>{const q=P.dom,ue=P.selection,ye=ue.getStart(),nt=In(P,ye),Ft=q.getParent(ue.getStart(),"LI",nt);if(Ft){const an=Ft.parentElement;if(an===P.getBody()&&Qa(q,an))return!0;const hn=Ha(ue.getRng()),Jt=q.getParent(ru(P,hn,W,nt),"LI",nt),wo=Jt&&(W?q.isChildOf(Ft,Jt):q.isChildOf(Jt,Ft));if(Jt&&Jt!==Ft&&!wo)return P.undoManager.transact(()=>{W?La(P,hn,Jt,Ft):Fs(Ft)?fc(P):to(P,hn,Ft,Jt)}),!0;if(wo&&!W&&Jt!==Ft)return P.undoManager.transact(()=>{if(hn.commonAncestorContainer.parentElement){const Ro=rs(hn),sr=hn.commonAncestorContainer.parentElement;Bc(q,hn.commonAncestorContainer.parentElement,Jt),sr.remove();const qr=Li(Ro);P.selection.setRng(qr)}}),!0;if(!Jt&&!W&&hn.startOffset===0&&hn.endOffset===0)return P.undoManager.transact(()=>{Zh(P)}),!0}return!1},rd=(P,W,q)=>{const ue=P.getParent(W.parentNode,P.isBlock,q);P.remove(W),ue&&P.isEmpty(ue)&&P.remove(ue)},Pl=(P,W)=>{const q=P.dom,ue=P.selection.getStart(),ye=In(P,ue),nt=q.getParent(ue,q.isBlock,ye);if(nt&&q.isEmpty(nt,void 0,{checkRootAsContent:!0})){const Ft=Ha(P.selection.getRng()),an=q.getParent(ru(P,Ft,W,ye),"LI",ye);if(an){const hn=sr=>Wn(["td","th","caption"],jr(sr)),Jt=sr=>sr.dom===ye,wo=Ta(De.fromDom(an),hn,Jt),Ro=Ta(De.fromDom(Ft.startContainer),hn,Jt);return dt(wo,Ro,Mo)?(P.undoManager.transact(()=>{const sr=an.parentNode;rd(q,nt,ye),nd(q,sr),P.selection.select(an,!0),P.selection.collapse(W)}),!0):!1}}return!1},zs=(P,W)=>Oc(P,W)||Pl(P,W),Hc=P=>{const W=P.selection.getStart(),q=In(P,W);return P.dom.getParent(W,"LI,DT,DD",q)||kt(P).length>0},ad=P=>Hc(P)?(P.undoManager.transact(()=>{let W=!0;const q=()=>W=!1;P.on("input",q),P.execCommand("Delete"),P.off("input",q),W&&P.dispatch("input"),sd(P.dom,P.getBody())}),!0):!1,id=(P,W)=>{const q=P.selection;return!Da(P,q.getNode())&&(q.isCollapsed()?zs(P,W):ad(P))},eg=P=>{P.on("ExecCommand",W=>{const q=W.command.toLowerCase();(q==="delete"||q==="forwarddelete")&&Hc(P)&&sd(P.dom,P.getBody())}),P.on("keydown",W=>{W.keyCode===Sr.BACKSPACE?id(P,!1)&&W.preventDefault():W.keyCode===Sr.DELETE&&id(P,!0)&&W.preventDefault()})},C=P=>({backspaceDelete:W=>{id(P,W)}}),o=(P,W)=>{const q=he(P);q===null||Da(P,q)||P.undoManager.transact(()=>{Fo(W.styles)&&P.dom.setStyles(q,W.styles),Fo(W.attrs)&&He(W.attrs,(ue,ye)=>P.dom.setAttrib(q,ye,ue))})},a=P=>{const W=Rn(Ma(P).split("")),q=ut(W,(ue,ye)=>{const nt=ue.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,ye)*nt});return ot(q,(ue,ye)=>ue+ye,0)},c=P=>{if(P--,P<0)return"";{const W=P%26,q=Math.floor(P/26),ue=c(q),ye=String.fromCharCode(65+W);return ue+ye}},d=P=>/^[A-Z]+$/.test(P),m=P=>/^[a-z]+$/.test(P),b=P=>/^[0-9]+$/.test(P),w=P=>b(P)?2:d(P)?0:m(P)?1:xl(P)?3:4,A=P=>{switch(w(P)){case 2:return Wt.some({listStyleType:Wt.none(),start:P});case 0:return Wt.some({listStyleType:Wt.some("upper-alpha"),start:a(P).toString()});case 1:return Wt.some({listStyleType:Wt.some("lower-alpha"),start:a(P).toString()});case 3:return Wt.some({listStyleType:Wt.none(),start:""});case 4:return Wt.none()}},E=P=>{const W=parseInt(P.start,10);return Gn(P.listStyleType,"upper-alpha")?c(W):Gn(P.listStyleType,"lower-alpha")?c(W).toLowerCase():P.start},M=P=>{const W=he(P);!xa(W)||Da(P,W)||P.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:E({start:P.dom.getAttrib(W,"start","1"),listStyleType:Wt.from(P.dom.getStyle(W,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:q=>{const ue=q.getData();A(ue.start).each(ye=>{P.execCommand("mceListUpdate",!1,{attrs:{start:ye.start==="1"?"":ye.start},styles:{"list-style-type":ye.listStyleType.getOr("")}})}),q.close()}})},O=(P,W)=>()=>{const q=he(P);return Bo(q)&&q.nodeName===W},L=P=>{P.addCommand("mceListProps",()=>{M(P)})},$=P=>{P.on("BeforeExecCommand",W=>{const q=W.command.toLowerCase();q==="indent"?bh(P):q==="outdent"&&fc(P)}),P.addCommand("InsertUnorderedList",(W,q)=>{Jh(P,"UL",q)}),P.addCommand("InsertOrderedList",(W,q)=>{Jh(P,"OL",q)}),P.addCommand("InsertDefinitionList",(W,q)=>{Jh(P,"DL",q)}),P.addCommand("RemoveList",()=>{Zh(P)}),L(P),P.addCommand("mceListUpdate",(W,q)=>{Fo(q)&&o(P,q)}),P.addQueryStateHandler("InsertUnorderedList",O(P,"UL")),P.addQueryStateHandler("InsertOrderedList",O(P,"OL")),P.addQueryStateHandler("InsertDefinitionList",O(P,"DL"))};var Y=tinymce.util.Tools.resolve("tinymce.html.Node");const U=P=>P.type===3,ne=P=>P.length===0,ae=P=>{const W=(ye,nt)=>{const Ft=Y.create("li");Be(ye,an=>Ft.append(an)),nt?P.insert(Ft,nt,!0):P.append(Ft)},q=(ye,nt)=>U(nt)?[...ye,nt]:!ne(ye)&&!U(nt)?(W(ye,nt),[]):ye,ue=ot(P.children(),q,[]);ne(ue)||W(ue)},le=P=>{P.on("PreInit",()=>{const{parser:W}=P;W.addNodeFilter("ul,ol",q=>Be(q,ae))})},me=P=>{P.on("keydown",W=>{W.keyCode!==Sr.TAB||Sr.metaKeyPressed(W)||P.undoManager.transact(()=>{(W.shiftKey?fc(P):bh(P))&&W.preventDefault()})})},Oe=P=>{ii(P)&&me(P),eg(P)},Te=(P,W)=>q=>{const ue=ye=>{q.setActive(nr(ye.parents,W)),q.setEnabled(!Da(P,ye.element)&&P.selection.isEditable())};return q.setEnabled(P.selection.isEditable()),Rl(P,ue)},Ve=P=>{const W=q=>()=>P.execCommand(q);P.hasPlugin("advlist")||(P.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:W("InsertOrderedList"),onSetup:Te(P,"OL")}),P.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:W("InsertUnorderedList"),onSetup:Te(P,"UL")}))},ve=(P,W)=>q=>Rl(P,ye=>q.setEnabled(nr(ye.parents,W)&&!Da(P,ye.element))),Pe=P=>{const W={text:"List properties...",icon:"ordered-list",onAction:()=>P.execCommand("mceListProps"),onSetup:ve(P,"OL")};P.ui.registry.addMenuItem("listprops",W),P.ui.registry.addContextMenu("lists",{update:q=>{const ue=he(P,q);return xa(ue)?["listprops"]:[]}})};var ht=()=>{cs.add("lists",P=>(Mi(P),le(P),P.hasPlugin("rtc",!0)?L(P):(Oe(P),$(P)),Ve(P),Pe(P),C(P)))};ht()}()),OZ}var DZ;function sq(){return DZ||(DZ=1,oq()),_Z}sq();var MZ={},PZ={},LZ;function rq(){return LZ||(LZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=(he,Me,Ge)=>{var mt;return Ge(he,Me.prototype)?!0:((mt=he.constructor)===null||mt===void 0?void 0:mt.name)===Me.name},gn=he=>{const Me=typeof he;return he===null?"null":Me==="object"&&Array.isArray(he)?"array":Me==="object"&&Rs(he,String,(Ge,mt)=>mt.isPrototypeOf(Ge))?"string":Me},ys=he=>Me=>gn(Me)===he,rn=he=>Me=>typeof Me===he,gs=he=>Me=>he===Me,Fo=ys("string"),Ot=ys("object"),lo=ys("array"),ns=gs(null),Bo=rn("boolean"),fs=he=>he==null,Tt=he=>!fs(he),Ln=rn("function"),Lo=(he,Me)=>{if(lo(he)){for(let Ge=0,mt=he.length;Ge<mt;++Ge)if(!Me(he[Ge]))return!1;return!0}return!1},vn=()=>{},Bt=he=>()=>he,vo=(he,Me)=>he===Me;class xn{constructor(Me,Ge){this.tag=Me,this.value=Ge}static some(Me){return new xn(!0,Me)}static none(){return xn.singletonNone}fold(Me,Ge){return this.tag?Ge(this.value):Me()}isSome(){return this.tag}isNone(){return!this.tag}map(Me){return this.tag?xn.some(Me(this.value)):xn.none()}bind(Me){return this.tag?Me(this.value):xn.none()}exists(Me){return this.tag&&Me(this.value)}forall(Me){return!this.tag||Me(this.value)}filter(Me){return!this.tag||Me(this.value)?this:xn.none()}getOr(Me){return this.tag?this.value:Me}or(Me){return this.tag?this:Me}getOrThunk(Me){return this.tag?this.value:Me()}orThunk(Me){return this.tag?this:Me()}getOrDie(Me){if(this.tag)return this.value;throw new Error(Me??"Called getOrDie on None")}static from(Me){return Tt(Me)?xn.some(Me):xn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Me){this.tag&&Me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}xn.singletonNone=new xn(!1);const oe=Array.prototype.indexOf,Wt=Array.prototype.push,Yo=(he,Me)=>oe.call(he,Me),jt=(he,Me)=>Yo(he,Me)>-1,ce=(he,Me)=>{const Ge=he.length,mt=new Array(Ge);for(let Qt=0;Qt<Ge;Qt++){const kt=he[Qt];mt[Qt]=Me(kt,Qt)}return mt},Gt=(he,Me)=>{for(let Ge=0,mt=he.length;Ge<mt;Ge++){const Qt=he[Ge];Me(Qt,Ge)}},Wn=(he,Me,Ge)=>(Gt(he,(mt,Qt)=>{Ge=Me(Ge,mt,Qt)}),Ge),no=he=>{const Me=[];for(let Ge=0,mt=he.length;Ge<mt;++Ge){if(!lo(he[Ge]))throw new Error("Arr.flatten item "+Ge+" was not an array, input: "+he);Wt.apply(Me,he[Ge])}return Me},ut=(he,Me)=>no(ce(he,Me)),Be=(he,Me)=>{for(let Ge=0;Ge<he.length;Ge++){const mt=Me(he[Ge],Ge);if(mt.isSome())return mt}return xn.none()},Qo=(he,Me,Ge=vo)=>he.exists(mt=>Ge(mt,Me)),Je=he=>{const Me=[],Ge=mt=>{Me.push(mt)};for(let mt=0;mt<he.length;mt++)he[mt].each(Ge);return Me},ot=(he,Me)=>he?xn.some(Me):xn.none(),V=he=>Me=>Me.options.get(he),Zn=he=>{const Me=he.options.register;Me("link_assume_external_targets",{processor:Ge=>{const mt=Fo(Ge)||Bo(Ge);return mt?Ge===!0?{value:1,valid:mt}:Ge==="http"||Ge==="https"?{value:Ge,valid:mt}:{value:0,valid:mt}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Me("link_context_toolbar",{processor:"boolean",default:!1}),Me("link_list",{processor:Ge=>Fo(Ge)||Ln(Ge)||Lo(Ge,Ot)}),Me("link_default_target",{processor:"string"}),Me("link_default_protocol",{processor:"string",default:"https"}),Me("link_target_list",{processor:Ge=>Bo(Ge)||Lo(Ge,Ot),default:!0}),Me("link_rel_list",{processor:"object[]",default:[]}),Me("link_class_list",{processor:"object[]",default:[]}),Me("link_title",{processor:"boolean",default:!0}),Me("allow_unsafe_link_target",{processor:"boolean",default:!1}),Me("link_quicklink",{processor:"boolean",default:!1})},Dt=V("link_assume_external_targets"),Ao=V("link_context_toolbar"),Rn=V("link_list"),it=V("link_default_target"),No=V("link_default_protocol"),qs=V("link_target_list"),Ht=V("link_rel_list"),Gn=V("link_class_list"),dt=V("link_title"),wt=V("allow_unsafe_link_target"),te=V("link_quicklink"),As=Object.keys,zo=Object.hasOwnProperty,Un=(he,Me)=>{const Ge=As(he);for(let mt=0,Qt=Ge.length;mt<Qt;mt++){const kt=Ge[mt],Ps=he[kt];Me(Ps,kt)}},ms=he=>(Me,Ge)=>{he[Ge]=Me},Ka=(he,Me,Ge,mt)=>{Un(he,(Qt,kt)=>{(Me(Qt,kt)?Ge:mt)(Qt,kt)})},We=(he,Me)=>{const Ge={};return Ka(he,Me,ms(Ge),vn),Ge},Ie=(he,Me)=>zo.call(he,Me),Ze=(he,Me)=>Ie(he,Me)&&he[Me]!==void 0&&he[Me]!==null;var De=tinymce.util.Tools.resolve("tinymce.util.URI"),Xn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Mo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Cn=he=>Tt(he)&&he.nodeName.toLowerCase()==="a",Qs=he=>Cn(he)&&!!us(he),Vo=(he,Me)=>{if(he.collapsed)return[];{const Ge=he.cloneContents(),mt=Ge.firstChild,Qt=new Xn(mt,Ge),kt=[];let Ps=mt;do Me(Ps)&&kt.push(Ps);while(Ps=Qt.next());return kt}},Cr=he=>/^\w+:/i.test(he),us=he=>{var Me,Ge;return(Ge=(Me=he.getAttribute("data-mce-href"))!==null&&Me!==void 0?Me:he.getAttribute("href"))!==null&&Ge!==void 0?Ge:""},ur=(he,Me)=>{const Ge=["noopener"],mt=he?he.split(/\s+/):[],Qt=_o=>Mo.trim(_o.sort().join(" ")),kt=_o=>(_o=Ps(_o),_o.length>0?_o.concat(Ge):Ge),Ps=_o=>_o.filter(kr=>Mo.inArray(Ge,kr)===-1),In=Me?kt(mt):Ps(mt);return In.length>0?Qt(In):""},ri=he=>he.replace(/\uFEFF/g,""),vr=(he,Me)=>(Me=Me||jr(he.selection.getRng())[0]||he.selection.getNode(),Ns(Me)?xn.from(he.dom.select("a[href]",Me)[0]):xn.from(he.dom.getParent(Me,"a[href]"))),qo=(he,Me)=>vr(he,Me).isSome(),ds=(he,Me)=>{const Ge=Me.fold(()=>he.getContent({format:"text"}),mt=>mt.innerText||mt.textContent||"");return ri(Ge)},jr=he=>Vo(he,Qs),$s=he=>Mo.grep(he,Qs),Go=he=>$s(he).length>0,Xs=he=>jr(he).length>0,qn=he=>{const Me=he.schema.getTextInlineElements(),Ge=kt=>kt.nodeType===1&&!Cn(kt)&&!Ie(Me,kt.nodeName.toLowerCase());if(vr(he).exists(kt=>kt.hasAttribute("data-mce-block")))return!1;const Qt=he.selection.getRng();return Qt.collapsed?!0:Vo(Qt,Ge).length===0},Ns=he=>Tt(he)&&he.nodeName==="FIGURE"&&/\bimage\b/i.test(he.className),oo=he=>Wn(["title","rel","class","target"],(Ge,mt)=>(he[mt].each(Qt=>{Ge[mt]=Qt.length>0?Qt:null}),Ge),{href:he.href}),Wr=(he,Me)=>(Me==="http"||Me==="https")&&!Cr(he)?Me+"://"+he:he,yi=(he,Me)=>{const Ge={...Me};if(Ht(he).length===0&&!wt(he)){const mt=ur(Ge.rel,Ge.target==="_blank");Ge.rel=mt||null}return xn.from(Ge.target).isNone()&&qs(he)===!1&&(Ge.target=it(he)),Ge.href=Wr(Ge.href,Dt(he)),Ge},uo=(he,Me,Ge,mt)=>{Ge.each(Qt=>{Ie(Me,"innerText")?Me.innerText=Qt:Me.textContent=Qt}),he.dom.setAttribs(Me,mt),he.selection.select(Me)},Ri=(he,Me,Ge,mt)=>{const Qt=he.dom;Ns(Me)?Dr(Qt,Me,mt):Ge.fold(()=>{he.execCommand("mceInsertLink",!1,mt)},kt=>{he.insertContent(Qt.createHTML("a",mt,Qt.encode(kt)))})},Yt=(he,Me,Ge)=>{const mt=he.selection.getNode(),Qt=vr(he,mt),kt=yi(he,oo(Ge));he.undoManager.transact(()=>{Ge.href===Me.href&&Me.attach(),Qt.fold(()=>{Ri(he,mt,Ge.text,kt)},Ps=>{he.focus(),uo(he,Ps,Ge.text,kt)})})},os=he=>{const Me=he.dom,Ge=he.selection,mt=Ge.getBookmark(),Qt=Ge.getRng().cloneRange(),kt=Me.getParent(Qt.startContainer,"a[href]",he.getBody()),Ps=Me.getParent(Qt.endContainer,"a[href]",he.getBody());kt&&Qt.setStartBefore(kt),Ps&&Qt.setEndAfter(Ps),Ge.setRng(Qt),he.execCommand("unlink"),Ge.moveToBookmark(mt)},Lr=he=>{he.undoManager.transact(()=>{const Me=he.selection.getNode();Ns(Me)?da(he,Me):os(he),he.focus()})},Zr=he=>{const{class:Me,href:Ge,rel:mt,target:Qt,text:kt,title:Ps}=he;return We({class:Me.getOrNull(),href:Ge,rel:mt.getOrNull(),target:Qt.getOrNull(),text:kt.getOrNull(),title:Ps.getOrNull()},(In,_o)=>ns(In)===!1)},Fa=(he,Me)=>{const Ge=he.options.get,mt={allow_html_data_urls:Ge("allow_html_data_urls"),allow_script_urls:Ge("allow_script_urls"),allow_svg_data_urls:Ge("allow_svg_data_urls")},Qt=Me.href;return{...Me,href:De.isDomSafe(Qt,"a",mt)?Qt:""}},Xa=(he,Me,Ge)=>{const mt=Fa(he,Ge);he.hasPlugin("rtc",!0)?he.execCommand("createlink",!1,Zr(mt)):Yt(he,Me,mt)},Is=he=>{he.hasPlugin("rtc",!0)?he.execCommand("unlink"):Lr(he)},da=(he,Me)=>{var Ge;const mt=he.dom.select("img",Me)[0];if(mt){const Qt=he.dom.getParents(mt,"a[href]",Me)[0];Qt&&((Ge=Qt.parentNode)===null||Ge===void 0||Ge.insertBefore(mt,Qt),he.dom.remove(Qt))}},Dr=(he,Me,Ge)=>{var mt;const Qt=he.select("img",Me)[0];if(Qt){const kt=he.create("a",Ge);(mt=Qt.parentNode)===null||mt===void 0||mt.insertBefore(kt,Qt),kt.appendChild(Qt)}},Ts=he=>Fo(he.value)?he.value:"",Qn=he=>Fo(he.text)?he.text:Fo(he.title)?he.title:"",hr=(he,Me)=>{const Ge=[];return Mo.each(he,mt=>{const Qt=Qn(mt);if(mt.menu!==void 0){const kt=hr(mt.menu,Me);Ge.push({text:Qt,items:kt})}else{const kt=Me(mt);Ge.push({text:Qt,value:kt})}}),Ge},Ta=(he=Ts)=>Me=>xn.from(Me).map(Ge=>hr(Ge,he)),Ds={sanitize:he=>Ta(Ts)(he),sanitizeWith:Ta,createUi:(he,Me)=>Ge=>({name:he,type:"listbox",label:Me,items:Ge}),getValue:Ts},yo=he=>Ze(he,"items"),mr=(he,Me)=>Be(Me,Ge=>yo(Ge)?mr(he,Ge.items):ot(Ge.value===he,Ge)),Ea=(he,Me,Ge,mt)=>{const Qt=mt[Me],kt=he.length>0;return Qt!==void 0?mr(Qt,Ge).map(Ps=>({url:{value:Ps.value,meta:{text:kt?he:Ps.text,attach:vn}},text:kt?he:Ps.text})):xn.none()},va=(he,Me)=>Me==="link"?he.link:Me==="anchor"?he.anchor:xn.none(),Ne={init:(he,Me)=>{const Ge={text:he.text,title:he.title},mt=_o=>{var kr;return ot(Ge.title.length<=0,xn.from((kr=_o.meta)===null||kr===void 0?void 0:kr.title).getOr(""))},Qt=_o=>{var kr;return ot(Ge.text.length<=0,xn.from((kr=_o.meta)===null||kr===void 0?void 0:kr.text).getOr(_o.value))},kt=_o=>{const kr=Qt(_o.url),Q=mt(_o.url);return kr.isSome()||Q.isSome()?xn.some({...kr.map(xe=>({text:xe})).getOr({}),...Q.map(xe=>({title:xe})).getOr({})}):xn.none()},Ps=(_o,kr)=>{const Q=va(Me,kr).getOr([]);return Ea(Ge.text,kr,Q,_o)};return{onChange:(_o,kr)=>{const Q=kr.name;return Q==="url"?kt(_o()):jt(["anchor","link"],Q)?Ps(_o(),Q):((Q==="text"||Q==="title")&&(Ge[Q]=_o()[Q]),xn.none())}}},getDelta:Ea};var Re=tinymce.util.Tools.resolve("tinymce.util.Delay");const gt=(he,Me,Ge)=>{const mt=he.selection.getRng();Re.setEditorTimeout(he,()=>{he.windowManager.confirm(Me,Qt=>{he.selection.setRng(mt),Ge(Qt)})})},ft=he=>{const Me=he.href;return Me.indexOf("@")>0&&Me.indexOf("/")===-1&&Me.indexOf("mailto:")===-1?xn.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:mt=>({...mt,href:"mailto:"+Me})}):xn.none()},Yn=(he,Me)=>Ge=>{const mt=Ge.href;return he===1&&!Cr(mt)||he===0&&/^\s*www(\.|\d\.)/i.test(mt)?xn.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Me}:// prefix?`,preprocess:kt=>({...kt,href:Me+"://"+mt})}):xn.none()},To={preprocess:(he,Me)=>Be([ft,Yn(Dt(he),No(he))],Ge=>Ge(Me)).fold(()=>Promise.resolve(Me),Ge=>new Promise(mt=>{gt(he,Ge.message,Qt=>{mt(Qt?Ge.preprocess(Me):Me)})}))},Xe={getAnchors:he=>{const Me=he.dom.select("a:not([href])"),Ge=ut(Me,mt=>{const Qt=mt.name||mt.id;return Qt?[{text:Qt,value:"#"+Qt}]:[]});return Ge.length>0?xn.some([{text:"None",value:""}].concat(Ge)):xn.none()}},He={getClasses:he=>{const Me=Gn(he);return Me.length>0?Ds.sanitize(Me):xn.none()}},ze=he=>{try{return xn.some(JSON.parse(he))}catch{return xn.none()}},Vt={getLinks:he=>{const Me=mt=>he.convertURL(mt.value||mt.url||"","href"),Ge=Rn(he);return new Promise(mt=>{Fo(Ge)?fetch(Ge).then(Qt=>Qt.ok?Qt.text().then(ze):Promise.reject()).then(mt,()=>mt(xn.none())):Ln(Ge)?Ge(Qt=>mt(xn.some(Qt))):mt(xn.from(Ge))}).then(mt=>mt.bind(Ds.sanitizeWith(Me)).map(Qt=>Qt.length>0?[{text:"None",value:""}].concat(Qt):Qt))}},Hn={getRels:(he,Me)=>{const Ge=Ht(he);if(Ge.length>0){const mt=Qo(Me,"_blank"),Qt=wt(he)===!1,kt=In=>ur(Ds.getValue(In),mt);return(Qt?Ds.sanitizeWith(kt):Ds.sanitize)(Ge)}return xn.none()}},$n=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],eo={getTargets:he=>{const Me=qs(he);return lo(Me)?Ds.sanitize(Me).orThunk(()=>xn.some($n)):Me===!1?xn.none():xn.some($n)}},co=(he,Me,Ge)=>{const mt=he.getAttrib(Me,Ge);return mt!==null&&mt.length>0?xn.some(mt):xn.none()},ps=(he,Me)=>{const Ge=he.dom,Qt=qn(he)?xn.some(ds(he.selection,Me)):xn.none(),kt=Me.bind(Q=>xn.from(Ge.getAttrib(Q,"href"))),Ps=Me.bind(Q=>xn.from(Ge.getAttrib(Q,"target"))),In=Me.bind(Q=>co(Ge,Q,"rel")),_o=Me.bind(Q=>co(Ge,Q,"class")),kr=Me.bind(Q=>co(Ge,Q,"title"));return{url:kt,text:Qt,title:kr,target:Ps,rel:In,linkClass:_o}},Ys={collect:(he,Me)=>Vt.getLinks(he).then(Ge=>{const mt=ps(he,Me);return{anchor:mt,catalogs:{targets:eo.getTargets(he),rels:Hn.getRels(he,mt.target),classes:He.getClasses(he),anchor:Xe.getAnchors(he),link:Ge},optNode:Me,flags:{titleEnabled:dt(he)}}})},hi=(he,Me)=>Ge=>{const mt=Ge.getData();if(!mt.url.value){Is(he),Ge.close();return}const Qt=In=>xn.from(mt[In]).filter(_o=>!Qo(Me.anchor[In],_o)),kt={href:mt.url.value,text:Qt("text"),target:Qt("target"),rel:Qt("rel"),class:Qt("linkClass"),title:Qt("title")},Ps={href:mt.url.value,attach:mt.url.meta!==void 0&&mt.url.meta.attach?mt.url.meta.attach:vn};To.preprocess(he,kt).then(In=>{Xa(he,Ps,In)}),Ge.close()},Ja=he=>{const Me=vr(he);return Ys.collect(he,Me)},so=(he,Me)=>{const Ge=he.anchor,mt=Ge.url.getOr("");return{url:{value:mt,meta:{original:{value:mt}}},text:Ge.text.getOr(""),title:Ge.title.getOr(""),anchor:mt,link:mt,rel:Ge.rel.getOr(""),target:Ge.target.or(Me).getOr(""),linkClass:Ge.linkClass.getOr("")}},ls=(he,Me,Ge)=>{const mt=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Qt=he.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),kt=he.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ps=xn.from(it(Ge)),In=so(he,Ps),_o=he.catalogs,kr=Ne.init(In,_o);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:no([mt,Qt,kt,Je([_o.anchor.map(Ds.createUi("anchor","Anchors")),_o.rels.map(Ds.createUi("rel","Rel")),_o.targets.map(Ds.createUi("target","Open link in...")),_o.link.map(Ds.createUi("link","Link list")),_o.classes.map(Ds.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:In,onChange:(xe,{name:Le})=>{kr.onChange(xe.getData,{name:Le}).each(st=>{xe.setData(st)})},onSubmit:Me}},ss=he=>{Ja(he).then(Ge=>{const mt=hi(he,Ge);return ls(Ge,mt,he)}).then(Ge=>{he.windowManager.open(Ge)})},_a=he=>{he.addCommand("mceLink",(Me,Ge)=>{(Ge==null?void 0:Ge.dialog)===!0||!te(he)?ss(he):he.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},xa=he=>{he.addShortcut("Meta+K","",()=>{he.execCommand("mceLink")})},ea=he=>{let Me=he;return{get:()=>Me,set:Qt=>{Me=Qt}}},pr=he=>{const Me=ea(xn.none()),Ge=()=>Me.get().each(he);return{clear:()=>{Ge(),Me.set(xn.none())},isSet:()=>Me.get().isSome(),get:()=>Me.get(),set:In=>{Ge(),Me.set(xn.some(In))}}},eu=()=>{const he=pr(vn);return{...he,on:Ge=>he.get().each(Ge)}},ji=(he,Me)=>he.substring(Me),Fs=(he,Me,Ge)=>Me===""||he.length>=Me.length&&he.substr(Ge,Ge+Me.length)===Me,Oa=(he,Me)=>Ra(he,Me)?ji(he,Me.length):he,Ra=(he,Me)=>Fs(he,Me,0);var ya=tinymce.util.Tools.resolve("tinymce.util.VK");const Di=(he,Me)=>{document.body.appendChild(he),he.dispatchEvent(Me),document.body.removeChild(he)},Qa=he=>{const Me=document.createElement("a");Me.target="_blank",Me.href=he,Me.rel="noreferrer noopener";const Ge=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(Ge),Di(Me,Ge)},ai=he=>he.altKey===!0&&he.shiftKey===!1&&he.ctrlKey===!1&&he.metaKey===!1,Zi=(he,Me)=>{if(Me){const Ge=us(Me);if(/^#/.test(Ge)){const mt=he.dom.select(`${Ge},[name="${Oa(Ge,"#")}"]`);mt.length&&he.selection.scrollIntoView(mt[0],!0)}else Qa(Me.href)}},Mi=he=>{const Me=he.selection.getRng(),Ge=Me.startContainer;return Qs(Ge)&&Me.startContainer===Me.endContainer&&he.dom.select("img",Ge).length===1},ii=(he,Me)=>{const Ge=$s(he.dom.getParents(Me));return ot(Ge.length===1,Ge[0])},Ql=he=>{const Me=jr(he.selection.getRng());return ot(Me.length>0,Me[0]).or(ii(he,he.selection.getNode()))},wi=he=>he.selection.isCollapsed()||Mi(he)?ii(he,he.selection.getStart()):Ql(he),gi=he=>{const Me=eu(),Ge=()=>Me.get().or(wi(he)),mt=()=>Ge().each(Qt=>Zi(he,Qt));return he.on("contextmenu",Qt=>{ii(he,Qt.target).each(Me.set)}),he.on("SelectionChange",()=>{Me.isSet()||wi(he).each(Me.set)}),he.on("click",Qt=>{Me.clear();const kt=$s(he.dom.getParents(Qt.target));kt.length===1&&ya.metaKeyPressed(Qt)&&(Qt.preventDefault(),Zi(he,kt[0]))}),he.on("keydown",Qt=>{Me.clear(),!Qt.isDefaultPrevented()&&Qt.keyCode===13&&ai(Qt)&&Ge().each(kt=>{Qt.preventDefault(),Zi(he,kt)})}),{gotoSelectedLink:mt}},ha=he=>()=>{he.execCommand("mceLink",!1,{dialog:!0})},ec=(he,Me)=>(he.on("NodeChange",Me),()=>he.off("NodeChange",Me)),sl=he=>Me=>{const Ge=()=>{Me.setActive(!he.mode.isReadOnly()&&qo(he,he.selection.getNode())),Me.setEnabled(he.selection.isEditable())};return Ge(),ec(he,Ge)},tc=he=>Me=>{const Ge=()=>{Me.setEnabled(he.selection.isEditable())};return Ge(),ec(he,Ge)},Ci=he=>Me=>{const Ge=kt=>Go(kt)||Xs(he.selection.getRng()),mt=he.dom.getParents(he.selection.getStart()),Qt=kt=>{Me.setEnabled(Ge(kt)&&he.selection.isEditable())};return Qt(mt),ec(he,kt=>Qt(kt.parents))},ga=(he,Me)=>{he.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:ha(he),onSetup:sl(he)}),he.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Me.gotoSelectedLink,onSetup:Ci(he)}),he.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Is(he),onSetup:Ci(he)})},Ba=(he,Me)=>{he.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Me.gotoSelectedLink,onSetup:Ci(he)}),he.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:ha(he),onSetup:tc(he)}),he.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Is(he),onSetup:Ci(he)})},ta=he=>{const Me="link unlink openlink",Ge="link";he.ui.registry.addContextMenu("link",{update:mt=>he.dom.isEditable(mt)?Go(he.dom.getParents(mt,"a"))?Me:Ge:""})},Ha=(he,Me)=>{const Ge=kt=>{kt.selection.collapse(!1)},mt=kt=>{const Ps=he.selection.getNode();return kt.setEnabled(qo(he,Ps)&&he.selection.isEditable()),vn},Qt=kt=>{const Ps=vr(he),In=qn(he);if(Ps.isNone()&&In){const _o=ds(he.selection,Ps);return ot(_o.length===0,kt)}else return xn.none()};he.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:sl(he)},label:"Link",predicate:kt=>Ao(he)&&qo(he,kt),initValue:()=>vr(he).fold(Bt(""),us),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:kt=>{const Ps=he.selection.getNode();return kt.setActive(qo(he,Ps)),sl(he)(kt)},onAction:kt=>{const Ps=kt.getValue(),In=Qt(Ps);Xa(he,{href:Ps,attach:vn},{href:Ps,text:In,title:xn.none(),rel:xn.none(),target:xn.from(it(he)),class:xn.none()}),Ge(he),kt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:mt,onAction:kt=>{Is(he),kt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:mt,onAction:kt=>{Me.gotoSelectedLink(),kt.hide()}}]})},nc=he=>{const Me=gi(he);ga(he,Me),Ba(he,Me),ta(he),Ha(he,Me)};var gr=()=>{cs.add("link",he=>{Zn(he),_a(he),nc(he),xa(he)})};gr()}()),PZ}var NZ;function aq(){return NZ||(NZ=1,rq()),MZ}aq();var IZ={},FZ={},BZ;function iq(){return BZ||(BZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=Object.getPrototypeOf,gn=(Q,xe,Le)=>{var st;return Le(Q,xe.prototype)?!0:((st=Q.constructor)===null||st===void 0?void 0:st.name)===xe.name},ys=Q=>{const xe=typeof Q;return Q===null?"null":xe==="object"&&Array.isArray(Q)?"array":xe==="object"&&gn(Q,String,(Le,st)=>st.isPrototypeOf(Le))?"string":xe},rn=Q=>xe=>ys(xe)===Q,gs=Q=>xe=>typeof xe===Q,Fo=Q=>xe=>Q===xe,Ot=(Q,xe)=>ns(Q)&&gn(Q,xe,(Le,st)=>Rs(Le)===st),lo=rn("string"),ns=rn("object"),Bo=Q=>Ot(Q,Object),fs=rn("array"),Tt=Fo(null),Ln=gs("boolean"),Lo=Q=>Q==null,vn=Q=>!Lo(Q),Bt=gs("function"),vo=gs("number"),xn=(Q,xe)=>{if(fs(Q)){for(let Le=0,st=Q.length;Le<st;++Le)if(!xe(Q[Le]))return!1;return!0}return!1},oe=()=>{};class Wt{constructor(xe,Le){this.tag=xe,this.value=Le}static some(xe){return new Wt(!0,xe)}static none(){return Wt.singletonNone}fold(xe,Le){return this.tag?Le(this.value):xe()}isSome(){return this.tag}isNone(){return!this.tag}map(xe){return this.tag?Wt.some(xe(this.value)):Wt.none()}bind(xe){return this.tag?xe(this.value):Wt.none()}exists(xe){return this.tag&&xe(this.value)}forall(xe){return!this.tag||xe(this.value)}filter(xe){return!this.tag||xe(this.value)?this:Wt.none()}getOr(xe){return this.tag?this.value:xe}or(xe){return this.tag?this:xe}getOrThunk(xe){return this.tag?this.value:xe()}orThunk(xe){return this.tag?this:xe()}getOrDie(xe){if(this.tag)return this.value;throw new Error(xe??"Called getOrDie on None")}static from(xe){return vn(xe)?Wt.some(xe):Wt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(xe){this.tag&&xe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Wt.singletonNone=new Wt(!1);const Yo=Object.keys,jt=Object.hasOwnProperty,ce=(Q,xe)=>{const Le=Yo(Q);for(let st=0,Mt=Le.length;st<Mt;st++){const jo=Le[st],js=Q[jo];xe(js,jo)}},Gt=Q=>(xe,Le)=>{Q[Le]=xe},Wn=(Q,xe,Le,st)=>{ce(Q,(Mt,jo)=>{(xe(Mt,jo)?Le:st)(Mt,jo)})},no=(Q,xe)=>{const Le={};return Wn(Q,xe,Gt(Le),oe),Le},ut=(Q,xe)=>jt.call(Q,xe),Be=(Q,xe)=>ut(Q,xe)&&Q[xe]!==void 0&&Q[xe]!==null,Qo=Array.prototype.push,Je=Q=>{const xe=[];for(let Le=0,st=Q.length;Le<st;++Le){if(!fs(Q[Le]))throw new Error("Arr.flatten item "+Le+" was not an array, input: "+Q);Qo.apply(xe,Q[Le])}return xe},ot=(Q,xe)=>xe>=0&&xe<Q.length?Wt.some(Q[xe]):Wt.none(),V=Q=>ot(Q,0),Zn=(Q,xe)=>{for(let Le=0;Le<Q.length;Le++){const st=xe(Q[Le],Le);if(st.isSome())return st}return Wt.none()};typeof window<"u"||Function("return this;")();const Dt=(Q,xe,Le)=>{if(lo(Le)||Ln(Le)||vo(Le))Q.setAttribute(xe,Le+"");else throw console.error("Invalid call to Attribute.set. Key ",xe,":: Value ",Le,":: Element ",Q),new Error("Attribute value was not simple")},Ao=(Q,xe,Le)=>{Dt(Q.dom,xe,Le)},Rn=(Q,xe)=>{Q.dom.removeAttribute(xe)},it=(Q,xe)=>{const st=(xe||document).createElement("div");if(st.innerHTML=Q,!st.hasChildNodes()||st.childNodes.length>1){const Mt="HTML does not have a single root node";throw console.error(Mt,Q),new Error(Mt)}return Ht(st.childNodes[0])},No=(Q,xe)=>{const st=(xe||document).createElement(Q);return Ht(st)},qs=(Q,xe)=>{const st=(xe||document).createTextNode(Q);return Ht(st)},Ht=Q=>{if(Q==null)throw new Error("Node cannot be null or undefined");return{dom:Q}},dt={fromHtml:it,fromTag:No,fromText:qs,fromDom:Ht,fromPoint:(Q,xe,Le)=>Wt.from(Q.dom.elementFromPoint(xe,Le)).map(Ht)};var wt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),te=tinymce.util.Tools.resolve("tinymce.util.URI");const As=Q=>Q.length>0,zo=Q=>xe=>xe.options.get(Q),Un=Q=>{const xe=Q.options.register;xe("image_dimensions",{processor:"boolean",default:!0}),xe("image_advtab",{processor:"boolean",default:!1}),xe("image_uploadtab",{processor:"boolean",default:!0}),xe("image_prepend_url",{processor:"string",default:""}),xe("image_class_list",{processor:"object[]"}),xe("image_description",{processor:"boolean",default:!0}),xe("image_title",{processor:"boolean",default:!1}),xe("image_caption",{processor:"boolean",default:!1}),xe("image_list",{processor:Le=>{const st=Le===!1||lo(Le)||xn(Le,ns)||Bt(Le);return st?{value:Le,valid:st}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},ms=zo("image_dimensions"),Ka=zo("image_advtab"),We=zo("image_uploadtab"),Ie=zo("image_prepend_url"),Ze=zo("image_class_list"),De=zo("image_description"),Xn=zo("image_title"),Mo=zo("image_caption"),Cn=zo("image_list"),Qs=zo("a11y_advanced_options"),Vo=zo("automatic_uploads"),Cr=Q=>As(Q.options.get("images_upload_url")),us=Q=>vn(Q.options.get("images_upload_handler")),ur=(Q,xe)=>Math.max(parseInt(Q,10),parseInt(xe,10)),ri=Q=>new Promise(xe=>{const Le=document.createElement("img"),st=jo=>{Le.onload=Le.onerror=null,Le.parentNode&&Le.parentNode.removeChild(Le),xe(jo)};Le.onload=()=>{const jo=ur(Le.width,Le.clientWidth),js=ur(Le.height,Le.clientHeight),nr={width:jo,height:js};st(Promise.resolve(nr))},Le.onerror=()=>{st(Promise.reject(`Failed to get image dimensions for: ${Q}`))};const Mt=Le.style;Mt.visibility="hidden",Mt.position="fixed",Mt.bottom=Mt.left="0px",Mt.width=Mt.height="auto",document.body.appendChild(Le),Le.src=Q}),vr=Q=>(Q&&(Q=Q.replace(/px$/,"")),Q),qo=Q=>(Q.length>0&&/^[0-9]+$/.test(Q)&&(Q+="px"),Q),ds=Q=>{if(Q.margin){const xe=String(Q.margin).split(" ");switch(xe.length){case 1:Q["margin-top"]=Q["margin-top"]||xe[0],Q["margin-right"]=Q["margin-right"]||xe[0],Q["margin-bottom"]=Q["margin-bottom"]||xe[0],Q["margin-left"]=Q["margin-left"]||xe[0];break;case 2:Q["margin-top"]=Q["margin-top"]||xe[0],Q["margin-right"]=Q["margin-right"]||xe[1],Q["margin-bottom"]=Q["margin-bottom"]||xe[0],Q["margin-left"]=Q["margin-left"]||xe[1];break;case 3:Q["margin-top"]=Q["margin-top"]||xe[0],Q["margin-right"]=Q["margin-right"]||xe[1],Q["margin-bottom"]=Q["margin-bottom"]||xe[2],Q["margin-left"]=Q["margin-left"]||xe[1];break;case 4:Q["margin-top"]=Q["margin-top"]||xe[0],Q["margin-right"]=Q["margin-right"]||xe[1],Q["margin-bottom"]=Q["margin-bottom"]||xe[2],Q["margin-left"]=Q["margin-left"]||xe[3]}delete Q.margin}return Q},jr=(Q,xe)=>{const Le=Cn(Q);lo(Le)?fetch(Le).then(st=>{st.ok&&st.json().then(xe)}):Bt(Le)?Le(xe):xe(Le)},$s=(Q,xe,Le)=>{const st=()=>{Le.onload=Le.onerror=null,Q.selection&&(Q.selection.select(Le),Q.nodeChanged())};Le.onload=()=>{!xe.width&&!xe.height&&ms(Q)&&Q.dom.setAttribs(Le,{width:String(Le.clientWidth),height:String(Le.clientHeight)}),st()},Le.onerror=st},Go=Q=>new Promise((xe,Le)=>{const st=new FileReader;st.onload=()=>{xe(st.result)},st.onerror=()=>{var Mt;Le((Mt=st.error)===null||Mt===void 0?void 0:Mt.message)},st.readAsDataURL(Q)}),Xs=Q=>Q.nodeName==="IMG"&&(Q.hasAttribute("data-mce-object")||Q.hasAttribute("data-mce-placeholder")),qn=(Q,xe)=>{const Le=Q.options.get;return te.isDomSafe(xe,"img",{allow_html_data_urls:Le("allow_html_data_urls"),allow_script_urls:Le("allow_script_urls"),allow_svg_data_urls:Le("allow_svg_data_urls")})},Ns=wt.DOM,oo=Q=>Q.style.marginLeft&&Q.style.marginRight&&Q.style.marginLeft===Q.style.marginRight?vr(Q.style.marginLeft):"",Wr=Q=>Q.style.marginTop&&Q.style.marginBottom&&Q.style.marginTop===Q.style.marginBottom?vr(Q.style.marginTop):"",yi=Q=>Q.style.borderWidth?vr(Q.style.borderWidth):"",uo=(Q,xe)=>{var Le;return Q.hasAttribute(xe)&&(Le=Q.getAttribute(xe))!==null&&Le!==void 0?Le:""},Ri=Q=>Q.parentNode!==null&&Q.parentNode.nodeName==="FIGURE",Yt=(Q,xe,Le)=>{Le===""||Le===null?Q.removeAttribute(xe):Q.setAttribute(xe,Le)},os=Q=>{const xe=Ns.create("figure",{class:"image"});Ns.insertAfter(xe,Q),xe.appendChild(Q),xe.appendChild(Ns.create("figcaption",{contentEditable:"true"},"Caption")),xe.contentEditable="false"},Lr=Q=>{const xe=Q.parentNode;vn(xe)&&(Ns.insertAfter(Q,xe),Ns.remove(xe))},Zr=Q=>{Ri(Q)?Lr(Q):os(Q)},Fa=(Q,xe)=>{const Le=Q.getAttribute("style"),st=xe(Le!==null?Le:"");st.length>0?(Q.setAttribute("style",st),Q.setAttribute("data-mce-style",st)):Q.removeAttribute("style")},Xa=(Q,xe)=>(Le,st,Mt)=>{const jo=Le.style;jo[st]?(jo[st]=qo(Mt),Fa(Le,xe)):Yt(Le,st,Mt)},Is=(Q,xe)=>Q.style[xe]?vr(Q.style[xe]):uo(Q,xe),da=(Q,xe)=>{const Le=qo(xe);Q.style.marginLeft=Le,Q.style.marginRight=Le},Dr=(Q,xe)=>{const Le=qo(xe);Q.style.marginTop=Le,Q.style.marginBottom=Le},Ts=(Q,xe)=>{const Le=qo(xe);Q.style.borderWidth=Le},Qn=(Q,xe)=>{Q.style.borderStyle=xe},hr=Q=>{var xe;return(xe=Q.style.borderStyle)!==null&&xe!==void 0?xe:""},Ta=Q=>vn(Q)&&Q.nodeName==="FIGURE",vl=Q=>Q.nodeName==="IMG",Ol=Q=>Ns.getAttrib(Q,"alt").length===0&&Ns.getAttrib(Q,"role")==="presentation",Ds=Q=>Ol(Q)?"":uo(Q,"alt"),yo=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),mr=(Q,xe)=>{var Le;const st=document.createElement("img");return Yt(st,"style",xe.style),(oo(st)||xe.hspace!=="")&&da(st,xe.hspace),(Wr(st)||xe.vspace!=="")&&Dr(st,xe.vspace),(yi(st)||xe.border!=="")&&Ts(st,xe.border),(hr(st)||xe.borderStyle!=="")&&Qn(st,xe.borderStyle),Q((Le=st.getAttribute("style"))!==null&&Le!==void 0?Le:"")},Ea=(Q,xe)=>{const Le=document.createElement("img");if(ft(Q,{...xe,caption:!1},Le),Ne(Le,xe.alt,xe.isDecorative),xe.caption){const st=Ns.create("figure",{class:"image"});return st.appendChild(Le),st.appendChild(Ns.create("figcaption",{contentEditable:"true"},"Caption")),st.contentEditable="false",st}else return Le},va=(Q,xe)=>({src:uo(xe,"src"),alt:Ds(xe),title:uo(xe,"title"),width:Is(xe,"width"),height:Is(xe,"height"),class:uo(xe,"class"),style:Q(uo(xe,"style")),caption:Ri(xe),hspace:oo(xe),vspace:Wr(xe),border:yi(xe),borderStyle:hr(xe),isDecorative:Ol(xe)}),Ms=(Q,xe,Le,st,Mt)=>{Le[st]!==xe[st]&&Mt(Q,st,String(Le[st]))},Ne=(Q,xe,Le)=>{if(Le){Ns.setAttrib(Q,"role","presentation");const st=dt.fromDom(Q);Ao(st,"alt","")}else{if(Tt(xe)){const st=dt.fromDom(Q);Rn(st,"alt")}else{const st=dt.fromDom(Q);Ao(st,"alt",xe)}Ns.getAttrib(Q,"role")==="presentation"&&Ns.setAttrib(Q,"role","")}},Re=(Q,xe,Le)=>{(Le.alt!==xe.alt||Le.isDecorative!==xe.isDecorative)&&Ne(Q,Le.alt,Le.isDecorative)},gt=(Q,xe)=>(Le,st,Mt)=>{Q(Le,Mt),Fa(Le,xe)},ft=(Q,xe,Le)=>{const st=va(Q,Le);Ms(Le,st,xe,"caption",(Mt,jo,js)=>Zr(Mt)),Ms(Le,st,xe,"src",Yt),Ms(Le,st,xe,"title",Yt),Ms(Le,st,xe,"width",Xa("width",Q)),Ms(Le,st,xe,"height",Xa("height",Q)),Ms(Le,st,xe,"class",Yt),Ms(Le,st,xe,"style",gt((Mt,jo)=>Yt(Mt,"style",jo),Q)),Ms(Le,st,xe,"hspace",gt(da,Q)),Ms(Le,st,xe,"vspace",gt(Dr,Q)),Ms(Le,st,xe,"border",gt(Ts,Q)),Ms(Le,st,xe,"borderStyle",gt(Qn,Q)),Re(Le,st,xe)},Yn=(Q,xe)=>{const Le=Q.dom.styles.parse(xe),st=ds(Le),Mt=Q.dom.styles.parse(Q.dom.styles.serialize(st));return Q.dom.styles.serialize(Mt)},go=Q=>{const xe=Q.selection.getNode(),Le=Q.dom.getParent(xe,"figure.image");return Le?Q.dom.select("img",Le)[0]:xe&&(xe.nodeName!=="IMG"||Xs(xe))?null:xe},To=(Q,xe)=>{var Le;const st=Q.dom,Mt=no(Q.schema.getTextBlockElements(),(js,nr)=>!Q.schema.isValidChild(nr,"figure")),jo=st.getParent(xe.parentNode,js=>Be(Mt,js.nodeName),Q.getBody());return jo&&(Le=st.split(jo,xe))!==null&&Le!==void 0?Le:xe},Sr=Q=>{const xe=go(Q);return xe?va(Le=>Yn(Q,Le),xe):yo()},Xe=(Q,xe)=>{const Le=Ea(Mt=>Yn(Q,Mt),xe);Q.dom.setAttrib(Le,"data-mce-id","__mcenew"),Q.focus(),Q.selection.setContent(Le.outerHTML);const st=Q.dom.select('*[data-mce-id="__mcenew"]')[0];if(Q.dom.setAttrib(st,"data-mce-id",null),Ta(st)){const Mt=To(Q,st);Q.selection.select(Mt)}else Q.selection.select(st)},Eo=(Q,xe)=>{Q.dom.setAttrib(xe,"src",xe.getAttribute("src"))},He=(Q,xe)=>{if(xe){const Le=Q.dom.is(xe.parentNode,"figure.image")?xe.parentNode:xe;Q.dom.remove(Le),Q.focus(),Q.nodeChanged(),Q.dom.isEmpty(Q.getBody())&&(Q.setContent(""),Q.selection.setCursorLocation())}},ze=(Q,xe)=>{const Le=go(Q);if(Le)if(ft(st=>Yn(Q,st),xe,Le),Eo(Q,Le),Ta(Le.parentNode)){const st=Le.parentNode;To(Q,st),Q.selection.select(Le.parentNode)}else Q.selection.select(Le),$s(Q,xe,Le)},It=(Q,xe)=>{const Le=xe.src;return{...xe,src:qn(Q,Le)?Le:""}},Vt=(Q,xe)=>{const Le=go(Q);if(Le){const Mt={...va(js=>Yn(Q,js),Le),...xe},jo=It(Q,Mt);Mt.src?ze(Q,jo):He(Q,Le)}else xe.src&&Xe(Q,{...yo(),...xe})},$n=(Q=>(...xe)=>{if(xe.length===0)throw new Error("Can't merge zero objects");const Le={};for(let st=0;st<xe.length;st++){const Mt=xe[st];for(const jo in Mt)ut(Mt,jo)&&(Le[jo]=Q(Le[jo],Mt[jo]))}return Le})((Q,xe)=>Bo(Q)&&Bo(xe)?$n(Q,xe):xe);var Mn=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),eo=tinymce.util.Tools.resolve("tinymce.util.Tools");const co=Q=>lo(Q.value)?Q.value:"",ps=Q=>lo(Q.text)?Q.text:lo(Q.title)?Q.title:"",Ks=(Q,xe)=>{const Le=[];return eo.each(Q,st=>{const Mt=ps(st);if(st.menu!==void 0){const jo=Ks(st.menu,xe);Le.push({text:Mt,items:jo})}else{const jo=xe(st);Le.push({text:Mt,value:jo})}}),Le},Ys=(Q=co)=>xe=>xe?Wt.from(xe).map(Le=>Ks(Le,Q)):Wt.none(),hi=Q=>Ys(co)(Q),Ja=Q=>ut(Q,"items"),so=(Q,xe)=>Zn(Q,Le=>Ja(Le)?so(Le.items,xe):Le.value===xe?Wt.some(Le):Wt.none()),ss={sanitizer:Ys,sanitize:hi,findEntry:(Q,xe)=>Q.bind(Le=>so(Le,xe))},xa={makeTab:Q=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},ea=Q=>{const xe=ss.sanitizer(Xo=>Q.convertURL(Xo.value||Xo.url||"","src")),Le=new Promise(Xo=>{jr(Q,xl=>{Xo(xe(xl).map(yl=>Je([[{text:"None",value:""}],yl])))})}),st=ss.sanitize(Ze(Q)),Mt=Ka(Q),jo=We(Q),js=Cr(Q),nr=us(Q),zt=Sr(Q),or=De(Q),Da=Xn(Q),Rl=ms(Q),Oo=Mo(Q),Si=Qs(Q),rl=Vo(Q),Ma=Wt.some(Ie(Q)).filter(Xo=>lo(Xo)&&Xo.length>0);return Le.then(Xo=>({image:zt,imageList:Xo,classList:st,hasAdvTab:Mt,hasUploadTab:jo,hasUploadUrl:js,hasUploadHandler:nr,hasDescription:or,hasImageTitle:Da,hasDimensions:Rl,hasImageCaption:Oo,prependURL:Ma,hasAccessibilityOptions:Si,automaticUploads:rl}))},pr=Q=>{const xe={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},Le=Q.imageList.map(Da=>({name:"images",type:"listbox",label:"Image list",items:Da})),st={name:"alt",type:"input",label:"Alternative description",enabled:!(Q.hasAccessibilityOptions&&Q.image.isDecorative)},Mt={name:"title",type:"input",label:"Image title"},jo={name:"dimensions",type:"sizeinput"},js={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},nr=Q.classList.map(Da=>({name:"classes",type:"listbox",label:"Class",items:Da})),zt={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},or=Da=>Da?{type:"grid",columns:2}:{type:"panel"};return Je([[xe],Le.toArray(),Q.hasAccessibilityOptions&&Q.hasDescription?[js]:[],Q.hasDescription?[st]:[],Q.hasImageTitle?[Mt]:[],Q.hasDimensions?[jo]:[],[{...or(Q.classList.isSome()&&Q.hasImageCaption),items:Je([nr.toArray(),Q.hasImageCaption?[zt]:[]])}]])},ji={makeTab:Q=>({title:"General",name:"general",items:pr(Q)}),makeItems:pr},Oa={makeTab:Q=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Ra=Q=>({prevImage:ss.findEntry(Q.imageList,Q.image.src),prevAlt:Q.image.alt,open:!0}),ya=Q=>({src:{value:Q.src,meta:{}},images:Q.src,alt:Q.alt,title:Q.title,dimensions:{width:Q.width,height:Q.height},classes:Q.class,caption:Q.caption,style:Q.style,vspace:Q.vspace,border:Q.border,hspace:Q.hspace,borderstyle:Q.borderStyle,fileinput:[],isDecorative:Q.isDecorative}),Di=(Q,xe)=>({src:Q.src.value,alt:(Q.alt===null||Q.alt.length===0)&&xe?null:Q.alt,title:Q.title,width:Q.dimensions.width,height:Q.dimensions.height,class:Q.classes,style:Q.style,caption:Q.caption,hspace:Q.hspace,vspace:Q.vspace,border:Q.border,borderStyle:Q.borderstyle,isDecorative:Q.isDecorative}),Qa=(Q,xe)=>/^(?:[a-zA-Z]+:)?\/\//.test(xe)?Wt.none():Q.prependURL.bind(Le=>xe.substring(0,Le.length)!==Le?Wt.some(Le+xe):Wt.none()),ai=(Q,xe)=>{const Le=xe.getData();Qa(Q,Le.src.value).each(st=>{xe.setData({src:{value:st,meta:Le.src.meta}})})},Zi=(Q,xe,Le)=>{Q.hasDescription&&lo(Le.alt)&&(xe.alt=Le.alt),Q.hasAccessibilityOptions&&(xe.isDecorative=Le.isDecorative||xe.isDecorative||!1),Q.hasImageTitle&&lo(Le.title)&&(xe.title=Le.title),Q.hasDimensions&&(lo(Le.width)&&(xe.dimensions.width=Le.width),lo(Le.height)&&(xe.dimensions.height=Le.height)),lo(Le.class)&&ss.findEntry(Q.classList,Le.class).each(st=>{xe.classes=st.value}),Q.hasImageCaption&&Ln(Le.caption)&&(xe.caption=Le.caption),Q.hasAdvTab&&(lo(Le.style)&&(xe.style=Le.style),lo(Le.vspace)&&(xe.vspace=Le.vspace),lo(Le.border)&&(xe.border=Le.border),lo(Le.hspace)&&(xe.hspace=Le.hspace),lo(Le.borderstyle)&&(xe.borderstyle=Le.borderstyle))},Mi=(Q,xe)=>{const Le=xe.getData(),st=Le.src.meta;if(st!==void 0){const Mt=$n({},Le);Zi(Q,Mt,st),xe.setData(Mt)}},ii=(Q,xe,Le,st)=>{const Mt=st.getData(),jo=Mt.src.value,js=Mt.src.meta||{};!js.width&&!js.height&&xe.hasDimensions&&(As(jo)?Q.imageSize(jo).then(nr=>{Le.open&&st.setData({dimensions:nr})}).catch(nr=>console.error(nr)):st.setData({dimensions:{width:"",height:""}}))},Ql=(Q,xe,Le)=>{const st=Le.getData(),Mt=ss.findEntry(Q.imageList,st.src.value);xe.prevImage=Mt,Le.setData({images:Mt.map(jo=>jo.value).getOr("")})},wi=(Q,xe,Le,st)=>{ai(xe,st),Mi(xe,st),ii(Q,xe,Le,st),Ql(xe,Le,st)},gi=(Q,xe,Le,st)=>{const Mt=st.getData(),jo=ss.findEntry(xe.imageList,Mt.images);jo.each(js=>{Mt.alt===""||Le.prevImage.map(zt=>zt.text===Mt.alt).getOr(!1)?js.value===""?st.setData({src:js,alt:Le.prevAlt}):st.setData({src:js,alt:js.text}):st.setData({src:js})}),Le.prevImage=jo,wi(Q,xe,Le,st)},ha=(Q,xe,Le,st)=>{const Mt=st.getData();st.block("Uploading image"),V(Mt.fileinput).fold(()=>{st.unblock()},jo=>{const js=URL.createObjectURL(jo),nr=()=>{st.unblock(),URL.revokeObjectURL(js)},zt=or=>{st.setData({src:{value:or,meta:{}}}),st.showTab("general"),wi(Q,xe,Le,st),st.focus("src")};Go(jo).then(or=>{const Da=Q.createBlobCache(jo,js,or);xe.automaticUploads?Q.uploadImage(Da).then(Rl=>{zt(Rl.url),nr()}).catch(Rl=>{nr(),Q.alertErr(Rl,()=>{st.focus("fileinput")})}):(Q.addToBlobCache(Da),zt(Da.blobUri()),st.unblock())})})},ec=(Q,xe,Le)=>(st,Mt)=>{Mt.name==="src"?wi(Q,xe,Le,st):Mt.name==="images"?gi(Q,xe,Le,st):Mt.name==="alt"?Le.prevAlt=st.getData().alt:Mt.name==="fileinput"?ha(Q,xe,Le,st):Mt.name==="isDecorative"&&st.setEnabled("alt",!st.getData().isDecorative)},sl=Q=>()=>{Q.open=!1},tc=Q=>Q.hasAdvTab||Q.hasUploadUrl||Q.hasUploadHandler?{type:"tabpanel",tabs:Je([[ji.makeTab(Q)],Q.hasAdvTab?[xa.makeTab(Q)]:[],Q.hasUploadTab&&(Q.hasUploadUrl||Q.hasUploadHandler)?[Oa.makeTab(Q)]:[]])}:{type:"panel",items:ji.makeItems(Q)},Ci=(Q,xe,Le)=>st=>{const Mt=$n(ya(xe.image),st.getData()),jo={...Mt,style:mr(Le.normalizeCss,Di(Mt,!1))};Q.execCommand("mceUpdateImage",!1,Di(jo,xe.hasAccessibilityOptions)),Q.editorUpload.uploadImagesAuto(),st.close()},ga=Q=>xe=>qn(Q,xe)?ri(Q.documentBaseURI.toAbsolute(xe)).then(Le=>({width:String(Le.width),height:String(Le.height)})):Promise.resolve({width:"",height:""}),Ba=Q=>(xe,Le,st)=>{var Mt;return Q.editorUpload.blobCache.create({blob:xe,blobUri:Le,name:(Mt=xe.name)===null||Mt===void 0?void 0:Mt.replace(/\.[^\.]+$/,""),filename:xe.name,base64:st.split(",")[1]})},ta=Q=>xe=>{Q.editorUpload.blobCache.add(xe)},Ha=Q=>(xe,Le)=>{Q.windowManager.alert(xe,Le)},nc=Q=>xe=>Yn(Q,xe),gr=Q=>xe=>Q.dom.parseStyle(xe),he=Q=>(xe,Le)=>Q.dom.serializeStyle(xe,Le),Me=Q=>xe=>Mn(Q).upload([xe],!1).then(Le=>{var st;return Le.length===0?Promise.reject("Failed to upload image"):Le[0].status===!1?Promise.reject((st=Le[0].error)===null||st===void 0?void 0:st.message):Le[0]}),Ge=Q=>{const xe={imageSize:ga(Q),addToBlobCache:ta(Q),createBlobCache:Ba(Q),alertErr:Ha(Q),normalizeCss:nc(Q),parseStyle:gr(Q),serializeStyle:he(Q),uploadImage:Me(Q)};return{open:()=>{ea(Q).then(st=>{const Mt=Ra(st);return{title:"Insert/Edit Image",size:"normal",body:tc(st),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ya(st.image),onSubmit:Ci(Q,st,xe),onChange:ec(xe,st,Mt),onClose:sl(Mt)}}).then(Q.windowManager.open)}}},mt=Q=>{Q.addCommand("mceImage",Ge(Q).open),Q.addCommand("mceUpdateImage",(xe,Le)=>{Q.undoManager.transact(()=>Vt(Q,Le))})},Qt=Q=>{const xe=Q.attr("class");return vn(xe)&&/\bimage\b/.test(xe)},kt=Q=>xe=>{let Le=xe.length;const st=Mt=>{Mt.attr("contenteditable",Q?"true":null)};for(;Le--;){const Mt=xe[Le];Qt(Mt)&&(Mt.attr("contenteditable",Q?"false":null),eo.each(Mt.getAll("figcaption"),st))}},Ps=Q=>{Q.on("PreInit",()=>{Q.parser.addNodeFilter("figure",kt(!0)),Q.serializer.addNodeFilter("figure",kt(!1))})},In=Q=>xe=>{const Le=()=>{xe.setEnabled(Q.selection.isEditable())};return Q.on("NodeChange",Le),Le(),()=>{Q.off("NodeChange",Le)}},_o=Q=>{Q.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Ge(Q).open,onSetup:xe=>{xe.setActive(vn(go(Q)));const Le=Q.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",xe.setActive).unbind,st=In(Q)(xe);return()=>{Le(),st()}}}),Q.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Ge(Q).open,onSetup:In(Q)}),Q.ui.registry.addContextMenu("image",{update:xe=>Q.selection.isEditable()&&(Ta(xe)||vl(xe)&&!Xs(xe))?["image"]:[]})};var kr=()=>{cs.add("image",Q=>{Un(Q),Ps(Q),_o(Q),mt(Q)})};kr()}()),FZ}var HZ;function lq(){return HZ||(HZ=1,iq()),IZ}lq();var $Z={},zZ={},VZ;function cq(){return VZ||(VZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=(We,Ie)=>We.dispatch("insertCustomChar",{chr:Ie}),gn=(We,Ie)=>{const Ze=Rs(We,Ie).chr;We.execCommand("mceInsertContent",!1,Ze)},ys=(We,Ie,Ze)=>{var De;return Ze(We,Ie.prototype)?!0:((De=We.constructor)===null||De===void 0?void 0:De.name)===Ie.name},rn=We=>{const Ie=typeof We;return We===null?"null":Ie==="object"&&Array.isArray(We)?"array":Ie==="object"&&ys(We,String,(Ze,De)=>De.isPrototypeOf(Ze))?"string":Ie},gs=We=>Ie=>rn(Ie)===We,Fo=We=>Ie=>typeof Ie===We,Ot=We=>Ie=>We===Ie,lo=gs("array"),ns=Ot(null),Bo=Ot(void 0),fs=We=>We==null,Tt=We=>!fs(We),Ln=Fo("function"),vn=(We=>()=>We)(!1);class Bt{constructor(Ie,Ze){this.tag=Ie,this.value=Ze}static some(Ie){return new Bt(!0,Ie)}static none(){return Bt.singletonNone}fold(Ie,Ze){return this.tag?Ze(this.value):Ie()}isSome(){return this.tag}isNone(){return!this.tag}map(Ie){return this.tag?Bt.some(Ie(this.value)):Bt.none()}bind(Ie){return this.tag?Ie(this.value):Bt.none()}exists(Ie){return this.tag&&Ie(this.value)}forall(Ie){return!this.tag||Ie(this.value)}filter(Ie){return!this.tag||Ie(this.value)?this:Bt.none()}getOr(Ie){return this.tag?this.value:Ie}or(Ie){return this.tag?this:Ie}getOrThunk(Ie){return this.tag?this.value:Ie()}orThunk(Ie){return this.tag?this:Ie()}getOrDie(Ie){if(this.tag)return this.value;throw new Error(Ie??"Called getOrDie on None")}static from(Ie){return Tt(Ie)?Bt.some(Ie):Bt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ie){this.tag&&Ie(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Bt.singletonNone=new Bt(!1);const vo=Array.prototype.push,xn=(We,Ie)=>{const Ze=We.length,De=new Array(Ze);for(let Xn=0;Xn<Ze;Xn++){const Mo=We[Xn];De[Xn]=Ie(Mo,Xn)}return De},oe=(We,Ie)=>{for(let Ze=0,De=We.length;Ze<De;Ze++){const Xn=We[Ze];Ie(Xn,Ze)}},Wt=(We,Ie,Ze)=>{for(let De=0,Xn=We.length;De<Xn;De++){const Mo=We[De];if(Ie(Mo,De))return Bt.some(Mo);if(Ze(Mo,De))break}return Bt.none()},Yo=(We,Ie)=>Wt(We,Ie,vn),jt=We=>{const Ie=[];for(let Ze=0,De=We.length;Ze<De;++Ze){if(!lo(We[Ze]))throw new Error("Arr.flatten item "+Ze+" was not an array, input: "+We);vo.apply(Ie,We[Ze])}return Ie},ce=(We,Ie)=>jt(xn(We,Ie));var Gt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wn=We=>Ie=>Ie.options.get(We),no=We=>{const Ie=We.options.register,Ze=De=>Ln(De)||lo(De);Ie("charmap",{processor:Ze}),Ie("charmap_append",{processor:Ze})},ut=Wn("charmap"),Be=Wn("charmap_append"),Qo=Gt.isArray,Je="User Defined",ot=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],V=We=>Gt.grep(We,Ie=>Qo(Ie)&&Ie.length===2),Zn=We=>Qo(We)?V(We):typeof We=="function"?We():[],Dt=(We,Ie)=>{const Ze=ut(We);Ze&&(Ie=[{name:Je,characters:Zn(Ze)}]);const De=Be(We);if(De){const Xn=Gt.grep(Ie,Mo=>Mo.name===Je);return Xn.length?(Xn[0].characters=[...Xn[0].characters,...Zn(De)],Ie):Ie.concat({name:Je,characters:Zn(De)})}return Ie},Ao=We=>{const Ie=Dt(We,ot());return Ie.length>1?[{name:"All",characters:ce(Ie,Ze=>Ze.characters)}].concat(Ie):Ie},Rn=We=>({getCharMap:()=>Ao(We),insertChar:De=>{gn(We,De)}}),it=We=>{let Ie=We;return{get:()=>Ie,set:Xn=>{Ie=Xn}}},No=(We,Ie)=>{let Ze=null;const De=()=>{ns(Ze)||(clearTimeout(Ze),Ze=null)};return{cancel:De,throttle:(...Mo)=>{De(),Ze=setTimeout(()=>{Ze=null,We.apply(null,Mo)},Ie)}}},qs=(We,Ie,Ze=0,De)=>{const Xn=We.indexOf(Ie,Ze);return Xn!==-1?Bo(De)?!0:Xn+Ie.length<=De:!1},Ht=String.fromCodePoint,Gn=(We,Ie,Ze)=>qs(Ht(We).toLowerCase(),Ze)?!0:qs(Ie.toLowerCase(),Ze)||qs(Ie.toLowerCase().replace(/\s+/g,""),Ze),dt=(We,Ie)=>{const Ze=[],De=Ie.toLowerCase();return oe(We.characters,Xn=>{Gn(Xn[0],Xn[1],De)&&Ze.push(Xn)}),xn(Ze,Xn=>({text:Xn[1],value:Ht(Xn[0]),icon:Ht(Xn[0])}))},wt="pattern",te=(We,Ie)=>{const Ze=()=>[{label:"Search",type:"input",name:wt},{type:"collection",name:"results"}],De=()=>xn(Ie,qo=>({title:qo.name,name:qo.name,items:Ze()})),Xn=()=>({type:"panel",items:Ze()}),Mo=()=>({type:"tabpanel",tabs:De()}),Cn=Ie.length===1?it(Je):it("All"),Qs=(qo,ds)=>{Yo(Ie,jr=>jr.name===Cn.get()).each(jr=>{const $s=dt(jr,ds);qo.setData({results:$s})})},Cr=No(qo=>{const ds=qo.getData().pattern;Qs(qo,ds)},40),us=Ie.length===1?Xn():Mo(),ur={pattern:"",results:dt(Ie[0],"")},ri={title:"Special Character",size:"normal",body:us,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:ur,onAction:(qo,ds)=>{ds.name==="results"&&(gn(We,ds.value),qo.close())},onTabChange:(qo,ds)=>{Cn.set(ds.newTabName),Cr.throttle(qo)},onChange:(qo,ds)=>{ds.name===wt&&Cr.throttle(qo)}};We.windowManager.open(ri).focus(wt)},As=(We,Ie)=>{We.addCommand("mceShowCharmap",()=>{te(We,Ie)})},zo=(We,Ie)=>{We.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(Ze,De)=>new Promise((Xn,Mo)=>{Xn(dt(Ie,Ze))}),onAction:(Ze,De,Xn)=>{We.selection.setRng(De),We.insertContent(Xn),Ze.hide()}})},Un=We=>Ie=>{const Ze=()=>{Ie.setEnabled(We.selection.isEditable())};return We.on("NodeChange",Ze),Ze(),()=>{We.off("NodeChange",Ze)}},ms=We=>{const Ie=()=>We.execCommand("mceShowCharmap");We.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:Ie,onSetup:Un(We)}),We.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:Ie,onSetup:Un(We)})};var Ka=()=>{cs.add("charmap",We=>{no(We);const Ie=Ao(We);return As(We,Ie),ms(We),zo(We,Ie[0]),Rn(We)})};Ka()}()),zZ}var WZ;function uq(){return WZ||(WZ=1,cq()),$Z}uq();var UZ={},XZ={},YZ;function dq(){return YZ||(YZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager"),Rs=tinymce.util.Tools.resolve("tinymce.Env"),gn=tinymce.util.Tools.resolve("tinymce.util.Tools");const ys=Ln=>Lo=>Lo.options.get(Ln),rn=ys("content_style"),gs=ys("content_css_cors"),Fo=ys("body_class"),Ot=ys("body_id"),lo=Ln=>{var Lo;let vn="";const Bt=Ln.dom.encode,vo=(Lo=rn(Ln))!==null&&Lo!==void 0?Lo:"";vn+='<base href="'+Bt(Ln.documentBaseURI.getURI())+'">';const xn=gs(Ln)?' crossorigin="anonymous"':"";gn.each(Ln.contentCSS,no=>{vn+='<link type="text/css" rel="stylesheet" href="'+Bt(Ln.documentBaseURI.toAbsolute(no))+'"'+xn+">"}),vo&&(vn+='<style type="text/css">'+vo+"</style>");const oe=Ot(Ln),Wt=Fo(Ln),jt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(Rs.os.isMacOS()||Rs.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",ce=Ln.getBody().dir,Gt=ce?' dir="'+Bt(ce)+'"':"";return"<!DOCTYPE html><html><head>"+vn+'</head><body id="'+Bt(oe)+'" class="mce-content-body '+Bt(Wt)+'"'+Gt+">"+Ln.getContent()+jt+"</body></html>"},ns=Ln=>{const Lo=lo(Ln);Ln.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Lo}}).focus("close")},Bo=Ln=>{Ln.addCommand("mcePreview",()=>{ns(Ln)})},fs=Ln=>{const Lo=()=>Ln.execCommand("mcePreview");Ln.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Lo,context:"any"}),Ln.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Lo,context:"any"})};var Tt=()=>{cs.add("preview",Ln=>{Bo(Ln),fs(Ln)})};Tt()}()),XZ}var jZ;function hq(){return jZ||(jZ=1,dq()),UZ}hq();var ZZ={},GZ={},qZ;function gq(){return qZ||(qZ=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager"),Rs=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),gn=tinymce.util.Tools.resolve("tinymce.util.Tools");const ys=Je=>ot=>ot.options.get(Je),rn=Je=>{const ot=Je.options.register;ot("allow_html_in_named_anchor",{processor:"boolean",default:!1})},gs=ys("allow_html_in_named_anchor"),Fo="a:not([href])",Ot=Je=>!Je,lo=Je=>Je.getAttribute("id")||Je.getAttribute("name")||"",ns=Je=>Je.nodeName.toLowerCase()==="a",Bo=Je=>ns(Je)&&!Je.getAttribute("href")&&lo(Je)!=="",fs=Je=>Bo(Je)&&!Je.firstChild,Tt=Je=>{const ot=Je.dom;Rs(ot).walk(Je.selection.getRng(),V=>{gn.each(V,Zn=>{fs(Zn)&&ot.remove(Zn,!1)})})},Ln=Je=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(Je),Lo=Je=>Je.dom.getParent(Je.selection.getStart(),Fo),vn=Je=>{const ot=Lo(Je);return ot?lo(ot):""},Bt=(Je,ot)=>{Je.undoManager.transact(()=>{gs(Je)||Je.selection.collapse(!0),Je.selection.isCollapsed()?Je.insertContent(Je.dom.createHTML("a",{id:ot})):(Tt(Je),Je.formatter.remove("namedAnchor",void 0,void 0,!0),Je.formatter.apply("namedAnchor",{value:ot}),Je.addVisual())})},vo=(Je,ot,V)=>{V.removeAttribute("name"),V.id=ot,Je.addVisual(),Je.undoManager.add()},xn=(Je,ot)=>{const V=Lo(Je);V?vo(Je,ot,V):Bt(Je,ot),Je.focus()},oe=(Je,ot)=>Ln(ot)?(xn(Je,ot),!0):(Je.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),Wt=Je=>{const ot=vn(Je);Je.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:ot},onSubmit:V=>{oe(Je,V.getData().id)&&V.close()}})},Yo=Je=>{Je.addCommand("mceAnchor",()=>{Wt(Je)})},jt=Je=>Ot(Je.attr("href"))&&!Ot(Je.attr("id")||Je.attr("name")),ce=Je=>jt(Je)&&!Je.firstChild,Gt=Je=>ot=>{for(let V=0;V<ot.length;V++){const Zn=ot[V];ce(Zn)&&Zn.attr("contenteditable",Je)}},Wn=Je=>{Je.on("PreInit",()=>{Je.parser.addNodeFilter("a",Gt("false")),Je.serializer.addNodeFilter("a",Gt(null))})},no=Je=>{Je.formatter.register("namedAnchor",{inline:"a",selector:Fo,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(ot,V,Zn)=>Bo(ot)})},ut=Je=>ot=>{const V=()=>{ot.setEnabled(Je.selection.isEditable())};return Je.on("NodeChange",V),V(),()=>{Je.off("NodeChange",V)}},Be=Je=>{const ot=()=>Je.execCommand("mceAnchor");Je.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:ot,onSetup:V=>{const Zn=Je.selection.selectorChangedWithUnbind("a:not([href])",V.setActive).unbind,Dt=ut(Je)(V);return()=>{Zn(),Dt()}}}),Je.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:ot,onSetup:ut(Je)})};var Qo=()=>{cs.add("anchor",Je=>{rn(Je),Wn(Je),Yo(Je),Be(Je),Je.on("PreInit",()=>{no(Je)})})};Qo()}()),GZ}var KZ;function fq(){return KZ||(KZ=1,gq()),ZZ}fq();var JZ={},QZ={},eG;function mq(){return eG||(eG=1,function(){const cs=He=>{let ze=He;return{get:()=>ze,set:bn=>{ze=bn}}};var Rs=tinymce.util.Tools.resolve("tinymce.PluginManager");const gn=(He,ze,It)=>{var Vt;return It(He,ze.prototype)?!0:((Vt=He.constructor)===null||Vt===void 0?void 0:Vt.name)===ze.name},ys=He=>{const ze=typeof He;return He===null?"null":ze==="object"&&Array.isArray(He)?"array":ze==="object"&&gn(He,String,(It,Vt)=>Vt.isPrototypeOf(It))?"string":ze},rn=He=>ze=>ys(ze)===He,gs=He=>ze=>typeof ze===He,Fo=rn("string"),Ot=rn("array"),lo=gs("boolean"),ns=He=>He==null,Bo=He=>!ns(He),fs=gs("number"),Tt=()=>{},Ln=He=>()=>He,Lo=Ln(!0),Bt=Ln("[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]");class vo{constructor(ze,It){this.tag=ze,this.value=It}static some(ze){return new vo(!0,ze)}static none(){return vo.singletonNone}fold(ze,It){return this.tag?It(this.value):ze()}isSome(){return this.tag}isNone(){return!this.tag}map(ze){return this.tag?vo.some(ze(this.value)):vo.none()}bind(ze){return this.tag?ze(this.value):vo.none()}exists(ze){return this.tag&&ze(this.value)}forall(ze){return!this.tag||ze(this.value)}filter(ze){return!this.tag||ze(this.value)?this:vo.none()}getOr(ze){return this.tag?this.value:ze}or(ze){return this.tag?this:ze}getOrThunk(ze){return this.tag?this.value:ze()}orThunk(ze){return this.tag?this:ze()}getOrDie(ze){if(this.tag)return this.value;throw new Error(ze??"Called getOrDie on None")}static from(ze){return Bo(ze)?vo.some(ze):vo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ze){this.tag&&ze(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}vo.singletonNone=new vo(!1);const xn=Bt;var oe=tinymce.util.Tools.resolve("tinymce.Env"),Wt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Yo=Array.prototype.slice,jt=Array.prototype.push,ce=(He,ze)=>{const It=He.length,Vt=new Array(It);for(let bn=0;bn<It;bn++){const Hn=He[bn];Vt[bn]=ze(Hn,bn)}return Vt},Gt=(He,ze)=>{for(let It=0,Vt=He.length;It<Vt;It++){const bn=He[It];ze(bn,It)}},Wn=(He,ze)=>{for(let It=He.length-1;It>=0;It--){const Vt=He[It];ze(Vt,It)}},no=(He,ze)=>{if(He.length===0)return[];{let It=ze(He[0]);const Vt=[];let bn=[];for(let Hn=0,$n=He.length;Hn<$n;Hn++){const Mn=He[Hn],eo=ze(Mn);eo!==It&&(Vt.push(bn),bn=[]),It=eo,bn.push(Mn)}return bn.length!==0&&Vt.push(bn),Vt}},ut=(He,ze,It)=>(Gt(He,(Vt,bn)=>{It=ze(It,Vt,bn)}),It),Be=He=>{const ze=[];for(let It=0,Vt=He.length;It<Vt;++It){if(!Ot(He[It]))throw new Error("Arr.flatten item "+It+" was not an array, input: "+He);jt.apply(ze,He[It])}return ze},Qo=(He,ze)=>Be(ce(He,ze)),Je=(He,ze)=>{const It=Yo.call(He,0);return It.sort(ze),It},ot=Object.hasOwnProperty,V=(He,ze)=>ot.call(He,ze);typeof window<"u"||Function("return this;")();const Zn=9,Dt=11,Ao=1,Rn=3,it=He=>He.dom.nodeType,qs=(He=>ze=>it(ze)===He)(Rn),Ht=(He,ze,It)=>{if(Fo(It)||lo(It)||fs(It))He.setAttribute(ze,It+"");else throw console.error("Invalid call to Attribute.set. Key ",ze,":: Value ",It,":: Element ",He),new Error("Attribute value was not simple")},Gn=(He,ze,It)=>{Ht(He.dom,ze,It)},dt=(He,ze)=>{const Vt=(ze||document).createElement("div");if(Vt.innerHTML=He,!Vt.hasChildNodes()||Vt.childNodes.length>1){const bn="HTML does not have a single root node";throw console.error(bn,He),new Error(bn)}return As(Vt.childNodes[0])},wt=(He,ze)=>{const Vt=(ze||document).createElement(He);return As(Vt)},te=(He,ze)=>{const Vt=(ze||document).createTextNode(He);return As(Vt)},As=He=>{if(He==null)throw new Error("Node cannot be null or undefined");return{dom:He}},Un={fromHtml:dt,fromTag:wt,fromText:te,fromDom:As,fromPoint:(He,ze,It)=>vo.from(He.dom.elementFromPoint(ze,It)).map(As)},ms=He=>He.nodeType!==Ao&&He.nodeType!==Zn&&He.nodeType!==Dt||He.childElementCount===0,Ka=(He,ze)=>{const It=ze===void 0?document:ze.dom;return ms(It)?[]:ce(It.querySelectorAll(He),Un.fromDom)},We=He=>vo.from(He.dom.parentNode).map(Un.fromDom),Ie=He=>ce(He.dom.childNodes,Un.fromDom),Ze=(He,ze)=>({element:He,offset:ze}),De=(He,ze)=>{const It=Ie(He);return It.length>0&&ze<It.length?Ze(It[ze],0):Ze(He,ze)},Xn=(He,ze)=>{We(He).each(Vt=>{Vt.dom.insertBefore(ze.dom,He.dom)})},Mo=(He,ze)=>{He.dom.appendChild(ze.dom)},Cn=(He,ze)=>{Xn(He,ze),Mo(ze,He)},Vo=((He,ze)=>{const It=Hn=>{if(!He(Hn))throw new Error("Can only get "+ze+" value of a "+ze+" node");return Vt(Hn).getOr("")},Vt=Hn=>He(Hn)?vo.from(Hn.dom.nodeValue):vo.none();return{get:It,getOption:Vt,set:(Hn,$n)=>{if(!He(Hn))throw new Error("Can only set raw "+ze+" value of a "+ze+" node");Hn.dom.nodeValue=$n}}})(qs,"text"),Cr=He=>Vo.get(He),us=(He,ze,It)=>(He.compareDocumentPosition(ze)&It)!==0,ur=(He,ze)=>us(He,ze,Node.DOCUMENT_POSITION_PRECEDING),ri=(He,ze)=>Ka(ze,He);var vr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const qo=(He,ze)=>He.isBlock(ze)||V(He.schema.getVoidElements(),ze.nodeName),ds=(He,ze)=>!He.isEditable(ze),jr=(He,ze)=>He.getContentEditable(ze)==="true"&&ze.parentNode&&!He.isEditable(ze.parentNode),$s=(He,ze)=>!He.isBlock(ze)&&V(He.schema.getWhitespaceElements(),ze.nodeName),Go=(He,ze)=>qo(He,ze)||ds(He,ze)||$s(He,ze)||jr(He,ze),Xs=He=>He.nodeType===3,qn=()=>({sOffset:0,fOffset:0,elements:[]}),Ns=(He,ze)=>De(Un.fromDom(He),ze),oo=(He,ze,It,Vt,bn,Hn=!0)=>{let $n=Hn?ze(!1):It;for(;$n;){const Mn=ds(He,$n);if(Mn||$s(He,$n)){if(Mn?Vt.cef($n):Vt.boundary($n))break;$n=ze(!0);continue}else if(qo(He,$n)){if(Vt.boundary($n))break}else Xs($n)&&Vt.text($n);if($n===bn)break;$n=ze(!1)}},Wr=(He,ze,It,Vt,bn)=>{var Hn;if(Go(He,It))return;const $n=(Hn=He.getParent(Vt,He.isBlock))!==null&&Hn!==void 0?Hn:He.getRoot(),Mn=new vr(It,$n),eo=bn?Mn.next.bind(Mn):Mn.prev.bind(Mn);oo(He,eo,It,{boundary:Lo,cef:Lo,text:co=>{bn?ze.fOffset+=co.length:ze.sOffset+=co.length,ze.elements.push(Un.fromDom(co))}})},yi=(He,ze,It,Vt,bn,Hn=!0)=>{const $n=new vr(It,ze),Mn=[];let eo=qn();Wr(He,eo,It,ze,!1);const co=()=>(eo.elements.length>0&&(Mn.push(eo),eo=qn()),!1);return oo(He,$n.next.bind($n),It,{boundary:co,cef:ps=>(co(),bn&&Mn.push(...bn.cef(ps)),!1),text:ps=>{eo.elements.push(Un.fromDom(ps)),bn&&bn.text(ps,eo)}},Vt,Hn),Vt&&Wr(He,eo,Vt,ze,!0),co(),Mn},uo=(He,ze)=>{const It=Ns(ze.startContainer,ze.startOffset),Vt=It.element.dom,bn=Ns(ze.endContainer,ze.endOffset),Hn=bn.element.dom;return yi(He,ze.commonAncestorContainer,Vt,Hn,{text:($n,Mn)=>{$n===Hn?Mn.fOffset+=$n.length-bn.offset:$n===Vt&&(Mn.sOffset+=It.offset)},cef:$n=>{const Mn=Qo(ri(Un.fromDom($n),"*[contenteditable=true]"),eo=>{const co=eo.dom;return yi(He,co,co)});return Je(Mn,(eo,co)=>ur(eo.elements[0].dom,co.elements[0].dom)?1:-1)}},!1)},Ri=(He,ze)=>ze.collapsed?[]:uo(He,ze),Yt=(He,ze)=>{const It=He.createRng();return It.selectNode(ze),Ri(He,It)},os=(He,ze)=>Qo(ze,It=>Yt(He,It)),Lr=(He,ze,It=0,Vt=He.length)=>{const bn=ze.regex;bn.lastIndex=It;const Hn=[];let $n;for(;$n=bn.exec(He);){const Mn=$n[ze.matchIndex],eo=$n.index+$n[0].indexOf(Mn),co=eo+Mn.length;if(co>Vt)break;Hn.push({start:eo,finish:co}),bn.lastIndex=co}return Hn},Zr=(He,ze)=>{const It=ut(He,(Vt,bn)=>{const Hn=Cr(bn),$n=Vt.last,Mn=$n+Hn.length,eo=Qo(ze,(co,ps)=>co.start<Mn&&co.finish>$n?[{element:bn,start:Math.max($n,co.start)-$n,finish:Math.min(Mn,co.finish)-$n,matchId:ps}]:[]);return{results:Vt.results.concat(eo),last:Mn}},{results:[],last:0}).results;return no(It,Vt=>Vt.matchId)},Fa=(He,ze)=>Qo(ze,It=>{const Vt=It.elements,bn=ce(Vt,Cr).join(""),Hn=Lr(bn,He,It.sOffset,bn.length-It.fOffset);return Zr(Vt,Hn)}),Xa=(He,ze)=>{Wn(He,(It,Vt)=>{Wn(It,bn=>{const Hn=Un.fromDom(ze.cloneNode(!1));Gn(Hn,"data-mce-index",Vt);const $n=bn.element.dom;if($n.length===bn.finish&&bn.start===0)Cn(bn.element,Hn);else{$n.length!==bn.finish&&$n.splitText(bn.finish);const Mn=$n.splitText(bn.start);Cn(Un.fromDom(Mn),Hn)}})})},Is=(He,ze,It,Vt)=>{const bn=Yt(He,It),Hn=Fa(ze,bn);return Xa(Hn,Vt),Hn.length},da=(He,ze,It,Vt)=>{const bn=It.getBookmark(),Hn=He.select("td[data-mce-selected],th[data-mce-selected]"),$n=Hn.length>0?os(He,Hn):Ri(He,It.getRng()),Mn=Fa(ze,$n);return Xa(Mn,Vt),It.moveToBookmark(bn),Mn.length},Dr=He=>He.getAttribute("data-mce-index"),Ts=(He,ze,It,Vt)=>{const bn=He.dom.create("span",{"data-mce-bogus":1});bn.className="mce-match-marker";const Hn=He.getBody();return Ms(He,ze,!1),Vt?da(He.dom,It,He.selection,bn):Is(He.dom,It,Hn,bn)},Qn=He=>{var ze;const It=He.parentNode;He.firstChild&&It.insertBefore(He.firstChild,He),(ze=He.parentNode)===null||ze===void 0||ze.removeChild(He)},hr=(He,ze)=>{const It=[],Vt=Wt.toArray(He.getBody().getElementsByTagName("span"));if(Vt.length)for(let bn=0;bn<Vt.length;bn++){const Hn=Dr(Vt[bn]);Hn===null||!Hn.length||Hn===ze.toString()&&It.push(Vt[bn])}return It},Ta=(He,ze,It)=>{const Vt=ze.get();let bn=Vt.index;const Hn=He.dom;It?bn+1===Vt.count?bn=0:bn++:bn-1===-1?bn=Vt.count-1:bn--,Hn.removeClass(hr(He,Vt.index),"mce-match-marker-selected");const $n=hr(He,bn);return $n.length?(Hn.addClass(hr(He,bn),"mce-match-marker-selected"),He.selection.scrollIntoView($n[0]),bn):-1},vl=(He,ze)=>{const It=ze.parentNode;He.remove(ze),It&&He.isEmpty(It)&&He.remove(It)},Ol=(He,ze)=>{const Vt="("+He.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return ze?`(?:^|\\s|${xn()})`+Vt+`(?=$|\\s|${xn()})`:Vt},Ds=(He,ze,It,Vt,bn,Hn)=>{const $n=He.selection,Mn=Ol(It,bn),eo=$n.isForward(),co={regex:new RegExp(Mn,Vt?"g":"gi"),matchIndex:1},ps=Ts(He,ze,co,Hn);if(oe.browser.isSafari()&&$n.setRng($n.getRng(),eo),ps){const Ks=Ta(He,ze,!0);ze.set({index:Ks,count:ps,text:It,matchCase:Vt,wholeWord:bn,inSelection:Hn})}return ps},yo=(He,ze)=>{const It=Ta(He,ze,!0);ze.set({...ze.get(),index:It})},mr=(He,ze)=>{const It=Ta(He,ze,!1);ze.set({...ze.get(),index:It})},Ea=He=>{const ze=Dr(He);return ze!==null&&ze.length>0},va=(He,ze,It,Vt,bn)=>{const Hn=ze.get(),$n=Hn.index;let Mn,eo=$n;Vt=Vt!==!1;const co=He.getBody(),ps=Wt.grep(Wt.toArray(co.getElementsByTagName("span")),Ea);for(let Ks=0;Ks<ps.length;Ks++){const Ys=Dr(ps[Ks]);let hi=Mn=parseInt(Ys,10);if(bn||hi===Hn.index){for(It.length?(ps[Ks].innerText=It,Qn(ps[Ks])):vl(He.dom,ps[Ks]);ps[++Ks];)if(hi=parseInt(Dr(ps[Ks]),10),hi===Mn)vl(He.dom,ps[Ks]);else{Ks--;break}Vt&&eo--}else Mn>$n&&ps[Ks].setAttribute("data-mce-index",String(Mn-1))}return ze.set({...Hn,count:bn?0:Hn.count-1,index:eo}),Vt?yo(He,ze):mr(He,ze),!bn&&ze.get().count>0},Ms=(He,ze,It)=>{let Vt,bn;const Hn=ze.get(),$n=Wt.toArray(He.getBody().getElementsByTagName("span"));for(let Mn=0;Mn<$n.length;Mn++){const eo=Dr($n[Mn]);eo!==null&&eo.length&&(eo===Hn.index.toString()&&(Vt||(Vt=$n[Mn].firstChild),bn=$n[Mn].firstChild),Qn($n[Mn]))}if(ze.set({...Hn,index:-1,count:0,text:""}),Vt&&bn){const Mn=He.dom.createRng();return Mn.setStart(Vt,0),Mn.setEnd(bn,bn.data.length),It!==!1&&He.selection.setRng(Mn),Mn}else return},Ne=(He,ze)=>ze.get().count>1,Re=(He,ze)=>ze.get().count>1,gt=(He,ze)=>({done:Mn=>Ms(He,ze,Mn),find:(Mn,eo,co,ps=!1)=>Ds(He,ze,Mn,eo,co,ps),next:()=>yo(He,ze),prev:()=>mr(He,ze),replace:(Mn,eo,co)=>va(He,ze,Mn,eo,co)}),ft=He=>{const ze=cs(vo.none()),It=()=>ze.get().each(He);return{clear:()=>{It(),ze.set(vo.none())},isSet:()=>ze.get().isSome(),get:()=>ze.get(),set:Mn=>{It(),ze.set(vo.some(Mn))}}},Yn=()=>{const He=ft(Tt);return{...He,on:It=>He.get().each(It)}},go=(He,ze)=>{const It=Yn();He.undoManager.add();const Vt=Wt.trim(He.selection.getContent({format:"text"})),bn=so=>{so.setEnabled("next",Ne(He,ze)),so.setEnabled("prev",Re(He,ze))},Hn=so=>{const ls=so.getData(),ss=ze.get();ze.set({...ss,matchCase:ls.matchcase,wholeWord:ls.wholewords,inSelection:ls.inselection})},$n=(so,ls)=>{Gt(["replace","replaceall","prev","next"],xa=>so.setEnabled(xa,!ls))},Mn=(so,ls)=>{ls.redial(Ja(so,ls.getData()))},eo=(so,ls)=>{oe.browser.isSafari()&&oe.deviceType.isTouch()&&(ls==="find"||ls==="replace"||ls==="replaceall")&&so.focus(ls)},co=so=>{Ms(He,ze,!1),$n(so,!0),bn(so)},ps=so=>{const ls=so.getData(),ss=ze.get();if(!ls.findtext.length){co(so);return}if(ss.text===ls.findtext&&ss.matchCase===ls.matchcase&&ss.wholeWord===ls.wholewords)yo(He,ze);else{const _a=Ds(He,ze,ls.findtext,ls.matchcase,ls.wholewords,ls.inselection);_a<=0&&Mn(!0,so),$n(so,_a===0)}bn(so)},Ks=ze.get(),Ys={findtext:Vt,replacetext:"",wholewords:Ks.wholeWord,matchcase:Ks.matchCase,inselection:Ks.inSelection},hi=so=>{const ls=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return so&&ls.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),ls},Ja=(so,ls)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:hi(so)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:ls,onChange:(ss,_a)=>{so&&Mn(!1,ss),_a.name==="findtext"&&ze.get().count>0&&co(ss)},onAction:(ss,_a)=>{const xa=ss.getData();switch(_a.name){case"find":ps(ss);break;case"replace":va(He,ze,xa.replacetext)?bn(ss):co(ss);break;case"replaceall":va(He,ze,xa.replacetext,!0,!0),co(ss);break;case"prev":mr(He,ze),bn(ss);break;case"next":yo(He,ze),bn(ss);break;case"matchcase":case"wholewords":case"inselection":Mn(!1,ss),Hn(ss),co(ss);break}eo(ss,_a.name)},onSubmit:ss=>{ps(ss),eo(ss,"find")},onClose:()=>{He.focus(),Ms(He,ze),He.undoManager.add()}});It.set(He.windowManager.open(Ja(!1,Ys),{inline:"toolbar"}))},To=(He,ze)=>{He.addCommand("SearchReplace",()=>{go(He,ze)})},Sr=(He,ze)=>()=>{go(He,ze)},Xe=(He,ze)=>{He.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Sr(He,ze),icon:"search"}),He.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Sr(He,ze),icon:"search",shortcut:"Meta+F"}),He.shortcuts.add("Meta+F","",Sr(He,ze))};var Eo=()=>{Rs.add("searchreplace",He=>{const ze=cs({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return To(He,ze),Xe(He,ze),gt(He,ze)})};Eo()}()),QZ}var tG;function pq(){return tG||(tG=1,mq()),JZ}pq();var nG={},oG={},sG;function bq(){return sG||(sG=1,function(){const cs=Tt=>{let Ln=Tt;return{get:()=>Ln,set:Bt=>{Ln=Bt}}};var Rs=tinymce.util.Tools.resolve("tinymce.PluginManager");const gn=(Tt,Ln)=>{Tt.dispatch("VisualBlocks",{state:Ln})},ys=(Tt,Ln,Lo)=>{Tt.dom.toggleClass(Tt.getBody(),"mce-visualblocks"),Lo.set(!Lo.get()),gn(Tt,Lo.get())},rn=(Tt,Ln,Lo)=>{Tt.addCommand("mceVisualBlocks",()=>{ys(Tt,Ln,Lo)})},gs=Tt=>Ln=>Ln.options.get(Tt),Fo=Tt=>{const Ln=Tt.options.register;Ln("visualblocks_default_state",{processor:"boolean",default:!1})},Ot=gs("visualblocks_default_state"),lo=(Tt,Ln,Lo)=>{Tt.on("PreviewFormats AfterPreviewFormats",vn=>{Lo.get()&&Tt.dom.toggleClass(Tt.getBody(),"mce-visualblocks",vn.type==="afterpreviewformats")}),Tt.on("init",()=>{Ot(Tt)&&ys(Tt,Ln,Lo)})},ns=(Tt,Ln)=>Lo=>{Lo.setActive(Ln.get());const vn=Bt=>Lo.setActive(Bt.state);return Tt.on("VisualBlocks",vn),()=>Tt.off("VisualBlocks",vn)},Bo=(Tt,Ln)=>{const Lo=()=>Tt.execCommand("mceVisualBlocks");Tt.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:Lo,onSetup:ns(Tt,Ln),context:"any"}),Tt.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:Lo,onSetup:ns(Tt,Ln),context:"any"})};var fs=()=>{Rs.add("visualblocks",(Tt,Ln)=>{Fo(Tt);const Lo=cs(!1);rn(Tt,Ln,Lo),Bo(Tt,Lo),lo(Tt,Ln,Lo)})};fs()}()),oG}var rG;function vq(){return rG||(rG=1,bq()),nG}vq();var aG={},iG={},lG;function xq(){return lG||(lG=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=(Ot,lo)=>{Ot.focus(),Ot.undoManager.transact(()=>{Ot.setContent(lo)}),Ot.selection.setCursorLocation(),Ot.nodeChanged()},gn=Ot=>Ot.getContent({source_view:!0}),ys=Ot=>{const lo=gn(Ot);Ot.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:lo},onSubmit:ns=>{Rs(Ot,ns.getData().code),ns.close()}})},rn=Ot=>{Ot.addCommand("mceCodeEditor",()=>{ys(Ot)})},gs=Ot=>{const lo=()=>Ot.execCommand("mceCodeEditor");Ot.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:lo}),Ot.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:lo})};var Fo=()=>{cs.add("code",Ot=>(rn(Ot),gs(Ot),{}))};Fo()}()),iG}var cG;function yq(){return cG||(cG=1,xq()),aG}yq();var uG={},dG={},hG;function wq(){return hG||(hG=1,function(){const cs=pe=>{let Se=pe;return{get:()=>Se,set:ro=>{Se=ro}}};var Rs=tinymce.util.Tools.resolve("tinymce.PluginManager");const gn=pe=>({isFullscreen:()=>pe.get()!==null}),ys=(pe,Se,at)=>{var Et;return at(pe,Se.prototype)?!0:((Et=pe.constructor)===null||Et===void 0?void 0:Et.name)===Se.name},rn=pe=>{const Se=typeof pe;return pe===null?"null":Se==="object"&&Array.isArray(pe)?"array":Se==="object"&&ys(pe,String,(at,Et)=>Et.isPrototypeOf(at))?"string":Se},gs=pe=>Se=>rn(Se)===pe,Fo=pe=>Se=>typeof Se===pe,Ot=pe=>Se=>pe===Se,lo=gs("string"),ns=gs("object"),Bo=gs("array"),fs=Ot(null),Tt=Fo("boolean"),Ln=Ot(void 0),Lo=pe=>pe==null,vn=pe=>!Lo(pe),Bt=Fo("function"),vo=Fo("number"),xn=()=>{},oe=(pe,Se)=>(...at)=>pe(Se.apply(null,at)),Wt=(pe,Se)=>at=>pe(Se(at)),Yo=pe=>()=>pe;function jt(pe,...Se){return(...at)=>{const Et=Se.concat(at);return pe.apply(null,Et)}}const ce=Yo(!1),Gt=Yo(!0);class Wn{constructor(Se,at){this.tag=Se,this.value=at}static some(Se){return new Wn(!0,Se)}static none(){return Wn.singletonNone}fold(Se,at){return this.tag?at(this.value):Se()}isSome(){return this.tag}isNone(){return!this.tag}map(Se){return this.tag?Wn.some(Se(this.value)):Wn.none()}bind(Se){return this.tag?Se(this.value):Wn.none()}exists(Se){return this.tag&&Se(this.value)}forall(Se){return!this.tag||Se(this.value)}filter(Se){return!this.tag||Se(this.value)?this:Wn.none()}getOr(Se){return this.tag?this.value:Se}or(Se){return this.tag?this:Se}getOrThunk(Se){return this.tag?this.value:Se()}orThunk(Se){return this.tag?this:Se()}getOrDie(Se){if(this.tag)return this.value;throw new Error(Se??"Called getOrDie on None")}static from(Se){return vn(Se)?Wn.some(Se):Wn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Se){this.tag&&Se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Wn.singletonNone=new Wn(!1);const no=Array.prototype.push,ut=(pe,Se)=>{const at=pe.length,Et=new Array(at);for(let ro=0;ro<at;ro++){const es=pe[ro];Et[ro]=Se(es,ro)}return Et},Be=(pe,Se)=>{for(let at=0,Et=pe.length;at<Et;at++){const ro=pe[at];Se(ro,at)}},Qo=(pe,Se)=>{const at=[];for(let Et=0,ro=pe.length;Et<ro;Et++){const es=pe[Et];Se(es,Et)&&at.push(es)}return at},Je=(pe,Se,at)=>{for(let Et=0,ro=pe.length;Et<ro;Et++){const es=pe[Et];if(Se(es,Et))return Wn.some(es);if(at(es,Et))break}return Wn.none()},ot=(pe,Se)=>Je(pe,Se,ce),V=pe=>{const Se=[];for(let at=0,Et=pe.length;at<Et;++at){if(!Bo(pe[at]))throw new Error("Arr.flatten item "+at+" was not an array, input: "+pe);no.apply(Se,pe[at])}return Se},Zn=(pe,Se)=>V(ut(pe,Se)),Dt=(pe,Se)=>Se>=0&&Se<pe.length?Wn.some(pe[Se]):Wn.none(),Ao=pe=>Dt(pe,0),Rn=(pe,Se)=>{for(let at=0;at<pe.length;at++){const Et=Se(pe[at],at);if(Et.isSome())return Et}return Wn.none()},it=(pe,Se,at)=>pe.isSome()&&Se.isSome()?Wn.some(at(pe.getOrDie(),Se.getOrDie())):Wn.none(),No=pe=>{const Se=cs(Wn.none()),at=()=>Se.get().each(pe);return{clear:()=>{at(),Se.set(Wn.none())},isSet:()=>Se.get().isSome(),get:()=>Se.get(),set:fr=>{at(),Se.set(Wn.some(fr))}}},qs=()=>No(pe=>pe.unbind()),Ht=()=>{const pe=No(xn);return{...pe,on:at=>pe.get().each(at)}},Gn=(pe,Se)=>{let at=null;return{cancel:()=>{fs(at)||(clearTimeout(at),at=null)},throttle:(...es)=>{fs(at)&&(at=setTimeout(()=>{at=null,pe.apply(null,es)},Se))}}},dt=Object.keys,wt=(pe,Se)=>{const at=dt(pe);for(let Et=0,ro=at.length;Et<ro;Et++){const es=at[Et],Jo=pe[es];Se(Jo,es)}},te=typeof window<"u"?window:Function("return this;")(),As=(pe,Se)=>{let at=Se??te;for(let Et=0;Et<pe.length&&at!==void 0&&at!==null;++Et)at=at[pe[Et]];return at},zo=(pe,Se)=>{const at=pe.split(".");return As(at,Se)},Un=(pe,Se)=>zo(pe,Se),ms=(pe,Se)=>{const at=Un(pe,Se);if(at==null)throw new Error(pe+" not available on this browser");return at},Ka=Object.getPrototypeOf,We=pe=>ms("HTMLElement",pe),Ie=pe=>{const Se=zo("ownerDocument.defaultView",pe);return ns(pe)&&(We(Se).prototype.isPrototypeOf(pe)||/^HTML\w*Element$/.test(Ka(pe).constructor.name))},Ze=9,De=11,Xn=1,Mo=3,Cn=pe=>pe.dom.nodeType,Qs=pe=>Se=>Cn(Se)===pe,Vo=pe=>Cr(pe)&&Ie(pe.dom),Cr=Qs(Xn),us=Qs(Mo),ur=Qs(De),ri=(pe,Se,at)=>{if(lo(at)||Tt(at)||vo(at))pe.setAttribute(Se,at+"");else throw console.error("Invalid call to Attribute.set. Key ",Se,":: Value ",at,":: Element ",pe),new Error("Attribute value was not simple")},vr=(pe,Se,at)=>{ri(pe.dom,Se,at)},qo=(pe,Se)=>{const at=pe.dom.getAttribute(Se);return at===null?void 0:at},ds=(pe,Se)=>{pe.dom.removeAttribute(Se)},jr=pe=>pe.dom.classList!==void 0,$s=(pe,Se)=>jr(pe)&&pe.dom.classList.contains(Se),Go=(pe,Se,at=0,Et)=>{const ro=pe.indexOf(Se,at);return ro!==-1?Ln(Et)?!0:ro+Se.length<=Et:!1},Xs=pe=>pe.style!==void 0&&Bt(pe.style.getPropertyValue),qn=(pe,Se)=>{const Et=(Se||document).createElement("div");if(Et.innerHTML=pe,!Et.hasChildNodes()||Et.childNodes.length>1){const ro="HTML does not have a single root node";throw console.error(ro,pe),new Error(ro)}return Wr(Et.childNodes[0])},Ns=(pe,Se)=>{const Et=(Se||document).createElement(pe);return Wr(Et)},oo=(pe,Se)=>{const Et=(Se||document).createTextNode(pe);return Wr(Et)},Wr=pe=>{if(pe==null)throw new Error("Node cannot be null or undefined");return{dom:pe}},uo={fromHtml:qn,fromTag:Ns,fromText:oo,fromDom:Wr,fromPoint:(pe,Se,at)=>Wn.from(pe.dom.elementFromPoint(Se,at)).map(Wr)},Ri=(pe,Se)=>{const at=pe.dom;if(at.nodeType!==Xn)return!1;{const Et=at;if(Et.matches!==void 0)return Et.matches(Se);if(Et.msMatchesSelector!==void 0)return Et.msMatchesSelector(Se);if(Et.webkitMatchesSelector!==void 0)return Et.webkitMatchesSelector(Se);if(Et.mozMatchesSelector!==void 0)return Et.mozMatchesSelector(Se);throw new Error("Browser lacks native selectors")}},Yt=pe=>pe.nodeType!==Xn&&pe.nodeType!==Ze&&pe.nodeType!==De||pe.childElementCount===0,os=(pe,Se)=>{const at=document;return Yt(at)?[]:ut(at.querySelectorAll(pe),uo.fromDom)},Lr=(pe,Se)=>pe.dom===Se.dom,Zr=pe=>uo.fromDom(pe.dom.ownerDocument),Fa=pe=>Wn.from(pe.dom.parentNode).map(uo.fromDom),Xa=(pe,Se)=>{const at=Bt(Se)?Se:ce;let Et=pe.dom;const ro=[];for(;Et.parentNode!==null&&Et.parentNode!==void 0;){const es=Et.parentNode,Jo=uo.fromDom(es);if(ro.push(Jo),at(Jo)===!0)break;Et=es}return ro},Is=pe=>{const Se=at=>Qo(at,Et=>!Lr(pe,Et));return Fa(pe).map(Dr).map(Se).getOr([])},da=pe=>Wn.from(pe.dom.nextSibling).map(uo.fromDom),Dr=pe=>ut(pe.dom.childNodes,uo.fromDom),Ts=pe=>ur(pe)&&vn(pe.dom.host),Qn=pe=>uo.fromDom(pe.dom.getRootNode()),hr=pe=>{const Se=Qn(pe);return Ts(Se)?Wn.some(Se):Wn.none()},Ta=pe=>uo.fromDom(pe.dom.host),vl=pe=>{if(vn(pe.target)){const Se=uo.fromDom(pe.target);if(Cr(Se)&&Ol(Se)&&pe.composed&&pe.composedPath){const at=pe.composedPath();if(at)return Ao(at)}}return Wn.from(pe.target)},Ol=pe=>vn(pe.dom.shadowRoot),Ds=pe=>{const Se=us(pe)?pe.dom.parentNode:pe.dom;if(Se==null||Se.ownerDocument===null)return!1;const at=Se.ownerDocument;return hr(uo.fromDom(Se)).fold(()=>at.body.contains(Se),Wt(Ds,Ta))},yo=pe=>{const Se=pe.dom.body;if(Se==null)throw new Error("Body is not available yet");return uo.fromDom(Se)},mr=(pe,Se,at)=>{if(!lo(at))throw console.error("Invalid call to CSS.set. Property ",Se,":: Value ",at,":: Element ",pe),new Error("CSS value must be a string: "+at);Xs(pe)&&pe.style.setProperty(Se,at)},Ea=(pe,Se,at)=>{const Et=pe.dom;mr(Et,Se,at)},va=(pe,Se)=>{const at=pe.dom;wt(Se,(Et,ro)=>{mr(at,ro,Et)})},Ms=(pe,Se)=>{const at=pe.dom,ro=window.getComputedStyle(at).getPropertyValue(Se);return ro===""&&!Ds(pe)?Ne(at,Se):ro},Ne=(pe,Se)=>Xs(pe)?pe.style.getPropertyValue(Se):"",Re=(pe,Se,at,Et,ro,es,Jo)=>({target:pe,x:Se,y:at,stop:Et,prevent:ro,kill:es,raw:Jo}),gt=pe=>{const Se=uo.fromDom(vl(pe).getOr(pe.target)),at=()=>pe.stopPropagation(),Et=()=>pe.preventDefault(),ro=oe(Et,at);return Re(Se,pe.clientX,pe.clientY,at,Et,ro,pe)},ft=(pe,Se)=>at=>{pe(at)&&Se(gt(at))},Yn=(pe,Se,at,Et,ro)=>{const es=ft(at,Et);return pe.dom.addEventListener(Se,es,ro),{unbind:jt(To,pe,Se,es,ro)}},go=(pe,Se,at,Et)=>Yn(pe,Se,at,Et,!1),To=(pe,Se,at,Et)=>{pe.dom.removeEventListener(Se,at,Et)},Sr=Gt,Xe=(pe,Se,at)=>go(pe,Se,Sr,at),Eo=pe=>{let Se=!1,at;return(...Et)=>(Se||(Se=!0,at=pe.apply(null,Et)),at)},He=(pe,Se,at,Et)=>{const ro=pe.isiOS()&&/ipad/i.test(at)===!0,es=pe.isiOS()&&!ro,Jo=pe.isiOS()||pe.isAndroid(),fr=Jo||Et("(pointer:coarse)"),na=ro||!es&&Jo&&Et("(min-device-width:768px)"),ei=es||Jo&&!na,$a=Se.isSafari()&&pe.isiOS()&&/safari/i.test(at)===!1,oa=!ei&&!na&&!$a;return{isiPad:Yo(ro),isiPhone:Yo(es),isTablet:Yo(na),isPhone:Yo(ei),isTouch:Yo(fr),isAndroid:pe.isAndroid,isiOS:pe.isiOS,isWebView:Yo($a),isDesktop:Yo(oa)}},ze=(pe,Se)=>{for(let at=0;at<pe.length;at++){const Et=pe[at];if(Et.test(Se))return Et}},It=(pe,Se)=>{const at=ze(pe,Se);if(!at)return{major:0,minor:0};const Et=ro=>Number(Se.replace(at,"$"+ro));return Hn(Et(1),Et(2))},Vt=(pe,Se)=>{const at=String(Se).toLowerCase();return pe.length===0?bn():It(pe,at)},bn=()=>Hn(0,0),Hn=(pe,Se)=>({major:pe,minor:Se}),$n={nu:Hn,detect:Vt,unknown:bn},Mn=(pe,Se)=>Rn(Se.brands,at=>{const Et=at.brand.toLowerCase();return ot(pe,ro=>{var es;return Et===((es=ro.brand)===null||es===void 0?void 0:es.toLowerCase())}).map(ro=>({current:ro.name,version:$n.nu(parseInt(at.version,10),0)}))}),eo=(pe,Se)=>{const at=String(Se).toLowerCase();return ot(pe,Et=>Et.search(at))},co=(pe,Se)=>eo(pe,Se).map(at=>{const Et=$n.detect(at.versionRegexes,Se);return{current:at.name,version:Et}}),ps=(pe,Se)=>eo(pe,Se).map(at=>{const Et=$n.detect(at.versionRegexes,Se);return{current:at.name,version:Et}}),Ks=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ys=pe=>Se=>Go(Se,pe),hi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:pe=>Go(pe,"edge/")&&Go(pe,"chrome")&&Go(pe,"safari")&&Go(pe,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ks],search:pe=>Go(pe,"chrome")&&!Go(pe,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:pe=>Go(pe,"msie")||Go(pe,"trident")},{name:"Opera",versionRegexes:[Ks,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ys("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ys("firefox")},{name:"Safari",versionRegexes:[Ks,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:pe=>(Go(pe,"safari")||Go(pe,"mobile/"))&&Go(pe,"applewebkit")}],Ja=[{name:"Windows",search:Ys("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:pe=>Go(pe,"iphone")||Go(pe,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ys("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ys("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ys("linux"),versionRegexes:[]},{name:"Solaris",search:Ys("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ys("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ys("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],so={browsers:Yo(hi),oses:Yo(Ja)},ls="Edge",ss="Chromium",_a="IE",xa="Opera",ea="Firefox",pr="Safari",eu=()=>ji({current:void 0,version:$n.unknown()}),ji=pe=>{const Se=pe.current,at=pe.version,Et=ro=>()=>Se===ro;return{current:Se,version:at,isEdge:Et(ls),isChromium:Et(ss),isIE:Et(_a),isOpera:Et(xa),isFirefox:Et(ea),isSafari:Et(pr)}},Fs={unknown:eu,nu:ji,edge:Yo(ls),chromium:Yo(ss),ie:Yo(_a),opera:Yo(xa),firefox:Yo(ea),safari:Yo(pr)},Oa="Windows",Ra="iOS",ya="Android",Di="Linux",Qa="macOS",ai="Solaris",Zi="FreeBSD",Mi="ChromeOS",ii=()=>Ql({current:void 0,version:$n.unknown()}),Ql=pe=>{const Se=pe.current,at=pe.version,Et=ro=>()=>Se===ro;return{current:Se,version:at,isWindows:Et(Oa),isiOS:Et(Ra),isAndroid:Et(ya),isMacOS:Et(Qa),isLinux:Et(Di),isSolaris:Et(ai),isFreeBSD:Et(Zi),isChromeOS:Et(Mi)}},wi={unknown:ii,nu:Ql,windows:Yo(Oa),ios:Yo(Ra),android:Yo(ya),linux:Yo(Di),macos:Yo(Qa),solaris:Yo(ai),freebsd:Yo(Zi),chromeos:Yo(Mi)},ha={detect:(pe,Se,at)=>{const Et=so.browsers(),ro=so.oses(),es=Se.bind(na=>Mn(Et,na)).orThunk(()=>co(Et,pe)).fold(Fs.unknown,Fs.nu),Jo=ps(ro,pe).fold(wi.unknown,wi.nu),fr=He(Jo,es,pe,at);return{browser:es,os:Jo,deviceType:fr}}},ec=pe=>window.matchMedia(pe).matches;let sl=Eo(()=>ha.detect(window.navigator.userAgent,Wn.from(window.navigator.userAgentData),ec));const tc=()=>sl(),Ci=(pe,Se)=>({left:pe,top:Se,translate:(Et,ro)=>Ci(pe+Et,Se+ro)}),ga=Ci,Ba=pe=>{const Se=pe!==void 0?pe.dom:document,at=Se.body.scrollLeft||Se.documentElement.scrollLeft,Et=Se.body.scrollTop||Se.documentElement.scrollTop;return ga(at,Et)},ta=pe=>{const Se=pe===void 0?window:pe;return tc().browser.isFirefox()?Wn.none():Wn.from(Se.visualViewport)},Ha=(pe,Se,at,Et)=>({x:pe,y:Se,width:at,height:Et,right:pe+at,bottom:Se+Et}),nc=pe=>{const Se=pe===void 0?window:pe,at=Se.document,Et=Ba(uo.fromDom(at));return ta(Se).fold(()=>{const ro=Se.document.documentElement,es=ro.clientWidth,Jo=ro.clientHeight;return Ha(Et.left,Et.top,es,Jo)},ro=>Ha(Math.max(ro.pageLeft,Et.left),Math.max(ro.pageTop,Et.top),ro.width,ro.height))},gr=(pe,Se,at)=>ta(at).map(Et=>{const ro=es=>Se(gt(es));return Et.addEventListener(pe,ro),{unbind:()=>Et.removeEventListener(pe,ro)}}).getOrThunk(()=>({unbind:xn}));var he=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Me=tinymce.util.Tools.resolve("tinymce.Env");const Ge=(pe,Se)=>{pe.dispatch("FullscreenStateChanged",{state:Se}),pe.dispatch("ResizeEditor")},mt=pe=>Se=>Se.options.get(pe),Qt=pe=>{const Se=pe.options.register;Se("fullscreen_native",{processor:"boolean",default:!1})},kt=mt("fullscreen_native"),Ps=pe=>{const Se=uo.fromDom(pe.getElement());return hr(Se).map(Ta).getOrThunk(()=>yo(Zr(Se)))},In=pe=>pe.fullscreenElement!==void 0?pe.fullscreenElement:pe.msFullscreenElement!==void 0?pe.msFullscreenElement:pe.webkitFullscreenElement!==void 0?pe.webkitFullscreenElement:null,_o=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",kr=pe=>{const Se=pe.dom;Se.requestFullscreen?Se.requestFullscreen():Se.msRequestFullscreen?Se.msRequestFullscreen():Se.webkitRequestFullScreen&&Se.webkitRequestFullScreen()},Q=pe=>{const Se=pe.dom;Se.exitFullscreen?Se.exitFullscreen():Se.msExitFullscreen?Se.msExitFullscreen():Se.webkitCancelFullScreen&&Se.webkitCancelFullScreen()},xe=pe=>pe.dom===In(Zr(pe).dom),Le=(pe,Se,at)=>Qo(Xa(pe,at),Se),st=(pe,Se)=>Qo(Is(pe),Se),Mt=pe=>os(pe),jo=(pe,Se,at)=>Le(pe,Et=>Ri(Et,Se),at),js=(pe,Se)=>st(pe,at=>Ri(at,Se)),nr="data-ephox-mobile-fullscreen-style",zt="display:none!important;",or="position:absolute!important;",Da="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Rl="background-color:rgb(255,255,255)!important;",Oo=Me.os.isAndroid(),Si=pe=>{const Se=Ms(pe,"background-color");return Se!==void 0&&Se!==""?"background-color:"+Se+"!important":Rl},rl=(pe,Se,at)=>{const Et=ei=>js(ei,"*:not(.tox-silver-sink)"),ro=ei=>$a=>{const oa=qo($a,"style"),fa=oa===void 0?"no-styles":oa.trim();fa!==ei&&(vr($a,nr,fa),va($a,pe.parseStyle(ei)))},es=jo(Se,"*"),Jo=Zn(es,Et),fr=Si(at);Be(Jo,ro(zt)),Be(es,ro(or+Da+fr)),ro((Oo===!0?"":or)+Da+fr)(Se)},Ma=pe=>{const Se=Mt("["+nr+"]");Be(Se,at=>{const Et=qo(at,nr);Et&&Et!=="no-styles"?va(at,pe.parseStyle(Et)):ds(at,"style"),ds(at,nr)})},Xo=he.DOM,xl=()=>nc(window),yl=pe=>window.scrollTo(pe.x,pe.y),Ku=ta().fold(()=>({bind:xn,unbind:xn}),pe=>{const Se=Ht(),at=qs(),Et=qs(),ro=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},es=()=>{window.requestAnimationFrame(()=>{Se.on(ei=>va(ei,{top:pe.offsetTop+"px",left:pe.offsetLeft+"px",height:pe.height+"px",width:pe.width+"px"}))})},Jo=Gn(()=>{ro(),es()},50);return{bind:ei=>{Se.set(ei),Jo.throttle(),at.set(gr("resize",Jo.throttle)),Et.set(gr("scroll",Jo.throttle))},unbind:()=>{Se.on(()=>{at.clear(),Et.clear()}),Se.clear()}}}),Gr=(pe,Se)=>{const at=document.body,Et=document.documentElement,ro=pe.getContainer(),es=uo.fromDom(ro),Jo=da(es).filter(Nr=>Vo(Nr)&&$s(Nr,"tox-silver-sink")),fr=Ps(pe),na=Se.get(),ei=uo.fromDom(pe.getBody()),$a=Me.deviceType.isTouch(),oa=ro.style,fa=pe.iframeElement,Mr=fa==null?void 0:fa.style,Pa=Nr=>{Nr(at,"tox-fullscreen"),Nr(Et,"tox-fullscreen"),Nr(ro,"tox-fullscreen"),hr(es).map(er=>Ta(er).dom).each(er=>{Nr(er,"tox-fullscreen"),Nr(er,"tox-shadowhost")})},Fr=()=>{$a&&Ma(pe.dom),Pa(Xo.removeClass),Ku.unbind(),Wn.from(Se.get()).each(Nr=>Nr.fullscreenChangeHandler.unbind())};if(na)na.fullscreenChangeHandler.unbind(),kt(pe)&&xe(fr)&&Q(Zr(fr)),Mr.width=na.iframeWidth,Mr.height=na.iframeHeight,oa.width=na.containerWidth,oa.height=na.containerHeight,oa.top=na.containerTop,oa.left=na.containerLeft,it(Jo,na.sinkCssPosition,(Nr,er)=>{Ea(Nr,"position",er)}),Fr(),yl(na.scrollPos),Se.set(null),Ge(pe,!1),pe.off("remove",Fr);else{const Nr=Xe(Zr(fr),_o(),$l=>{kt(pe)&&!xe(fr)&&Se.get()!==null&&Gr(pe,Se)}),er={scrollPos:xl(),containerWidth:oa.width,containerHeight:oa.height,containerTop:oa.top,containerLeft:oa.left,iframeWidth:Mr.width,iframeHeight:Mr.height,fullscreenChangeHandler:Nr,sinkCssPosition:Jo.map($l=>Ms($l,"position"))};$a&&rl(pe.dom,es,ei),Mr.width=Mr.height="100%",oa.width=oa.height="",Pa(Xo.addClass),Jo.each($l=>{Ea($l,"position","fixed")}),Ku.bind(es),pe.on("remove",Fr),Se.set(er),kt(pe)&&kr(fr),Ge(pe,!0)}},Ya=(pe,Se)=>{pe.addCommand("mceFullScreen",()=>{Gr(pe,Se)})};var tn=tinymce.util.Tools.resolve("tinymce.util.VK");const bs=(pe,Se)=>{pe.on("init",()=>{pe.on("keydown",at=>{at.keyCode===tn.TAB&&!(at.metaKey||at.ctrlKey)&&Se.get()&&at.preventDefault()})})},Gi=(pe,Se)=>at=>{at.setActive(Se.get()!==null);const Et=ro=>at.setActive(ro.state);return pe.on("FullscreenStateChanged",Et),()=>pe.off("FullscreenStateChanged",Et)},Pi=(pe,Se)=>{const at=()=>pe.execCommand("mceFullScreen");pe.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:at,onSetup:Gi(pe,Se),context:"any"}),pe.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:at,onSetup:Gi(pe,Se),shortcut:"Meta+Shift+F",context:"any"})};var ja=()=>{Rs.add("fullscreen",pe=>{const Se=cs(null);return pe.inline||(Qt(pe),Ya(pe,Se),Pi(pe,Se),bs(pe,Se),pe.addShortcut("Meta+Shift+F","","mceFullScreen")),gn(Se)})};ja()}()),dG}var gG;function Cq(){return gG||(gG=1,wq()),uG}Cq();var fG={},mG={},pG;function Sq(){return pG||(pG=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=jt=>ce=>ce.options.get(jt),gn=jt=>{const ce=jt.options.register;ce("insertdatetime_dateformat",{processor:"string",default:jt.translate("%Y-%m-%d")}),ce("insertdatetime_timeformat",{processor:"string",default:jt.translate("%H:%M:%S")}),ce("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),ce("insertdatetime_element",{processor:"boolean",default:!1})},ys=Rs("insertdatetime_dateformat"),rn=Rs("insertdatetime_timeformat"),gs=Rs("insertdatetime_formats"),Fo=Rs("insertdatetime_element"),Ot=jt=>{const ce=gs(jt);return ce.length>0?ce[0]:rn(jt)},lo="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),ns="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Bo="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),fs="January February March April May June July August September October November December".split(" "),Tt=(jt,ce)=>{if(jt=""+jt,jt.length<ce)for(let Gt=0;Gt<ce-jt.length;Gt++)jt="0"+jt;return jt},Ln=(jt,ce,Gt=new Date)=>(ce=ce.replace("%D","%m/%d/%Y"),ce=ce.replace("%r","%I:%M:%S %p"),ce=ce.replace("%Y",""+Gt.getFullYear()),ce=ce.replace("%y",""+Gt.getYear()),ce=ce.replace("%m",Tt(Gt.getMonth()+1,2)),ce=ce.replace("%d",Tt(Gt.getDate(),2)),ce=ce.replace("%H",""+Tt(Gt.getHours(),2)),ce=ce.replace("%M",""+Tt(Gt.getMinutes(),2)),ce=ce.replace("%S",""+Tt(Gt.getSeconds(),2)),ce=ce.replace("%I",""+((Gt.getHours()+11)%12+1)),ce=ce.replace("%p",Gt.getHours()<12?"AM":"PM"),ce=ce.replace("%B",""+jt.translate(fs[Gt.getMonth()])),ce=ce.replace("%b",""+jt.translate(Bo[Gt.getMonth()])),ce=ce.replace("%A",""+jt.translate(ns[Gt.getDay()])),ce=ce.replace("%a",""+jt.translate(lo[Gt.getDay()])),ce=ce.replace("%%","%"),ce),Lo=(jt,ce,Gt,Wn)=>{const no=jt.dom.create("time",{datetime:Gt},Wn);jt.dom.replace(no,ce),jt.selection.select(no,!0),jt.selection.collapse(!1)},vn=(jt,ce)=>{if(Fo(jt)&&jt.selection.isEditable()){const Gt=Ln(jt,ce);let Wn;/%[HMSIp]/.test(ce)?Wn=Ln(jt,"%Y-%m-%dT%H:%M"):Wn=Ln(jt,"%Y-%m-%d");const no=jt.dom.getParent(jt.selection.getStart(),"time");no?Lo(jt,no,Wn,Gt):jt.insertContent('<time datetime="'+Wn+'">'+Gt+"</time>")}else jt.insertContent(Ln(jt,ce))},Bt=jt=>{jt.addCommand("mceInsertDate",(ce,Gt)=>{vn(jt,Gt??ys(jt))}),jt.addCommand("mceInsertTime",(ce,Gt)=>{vn(jt,Gt??rn(jt))})},vo=jt=>{let ce=jt;return{get:()=>ce,set:no=>{ce=no}}};var xn=tinymce.util.Tools.resolve("tinymce.util.Tools");const oe=jt=>ce=>{const Gt=()=>{ce.setEnabled(jt.selection.isEditable())};return jt.on("NodeChange",Gt),Gt(),()=>{jt.off("NodeChange",Gt)}},Wt=jt=>{const ce=gs(jt),Gt=vo(Ot(jt)),Wn=ut=>jt.execCommand("mceInsertDate",!1,ut);jt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:ut=>ut===Gt.get(),fetch:ut=>{ut(xn.map(ce,Be=>({type:"choiceitem",text:Ln(jt,Be),value:Be})))},onAction:ut=>{Wn(Gt.get())},onItemAction:(ut,Be)=>{Gt.set(Be),Wn(Be)},onSetup:oe(jt)});const no=ut=>()=>{Gt.set(ut),Wn(ut)};jt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>xn.map(ce,ut=>({type:"menuitem",text:Ln(jt,ut),onAction:no(ut)})),onSetup:oe(jt)})};var Yo=()=>{cs.add("insertdatetime",jt=>{gn(jt),Bt(jt),Wt(jt)})};Yo()}()),mG}var bG;function kq(){return bG||(bG=1,Sq()),fG}kq();var vG={},xG={},yG;function Aq(){return yG||(yG=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=(Ne,Re,gt)=>{var ft;return gt(Ne,Re.prototype)?!0:((ft=Ne.constructor)===null||ft===void 0?void 0:ft.name)===Re.name},gn=Ne=>{const Re=typeof Ne;return Ne===null?"null":Re==="object"&&Array.isArray(Ne)?"array":Re==="object"&&Rs(Ne,String,(gt,ft)=>ft.isPrototypeOf(gt))?"string":Re},ys=Ne=>Re=>gn(Re)===Ne,rn=ys("string"),gs=ys("object"),Fo=ys("array"),Ot=Ne=>Ne==null,lo=Ne=>!Ot(Ne);class ns{constructor(Re,gt){this.tag=Re,this.value=gt}static some(Re){return new ns(!0,Re)}static none(){return ns.singletonNone}fold(Re,gt){return this.tag?gt(this.value):Re()}isSome(){return this.tag}isNone(){return!this.tag}map(Re){return this.tag?ns.some(Re(this.value)):ns.none()}bind(Re){return this.tag?Re(this.value):ns.none()}exists(Re){return this.tag&&Re(this.value)}forall(Re){return!this.tag||Re(this.value)}filter(Re){return!this.tag||Re(this.value)?this:ns.none()}getOr(Re){return this.tag?this.value:Re}or(Re){return this.tag?this:Re}getOrThunk(Re){return this.tag?this.value:Re()}orThunk(Re){return this.tag?this:Re()}getOrDie(Re){if(this.tag)return this.value;throw new Error(Re??"Called getOrDie on None")}static from(Re){return lo(Re)?ns.some(Re):ns.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Re){this.tag&&Re(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ns.singletonNone=new ns(!1);const Bo=Array.prototype.push,fs=(Ne,Re)=>{for(let gt=0,ft=Ne.length;gt<ft;gt++){const Yn=Ne[gt];Re(Yn,gt)}},Tt=Ne=>{const Re=[];for(let gt=0,ft=Ne.length;gt<ft;++gt){if(!Fo(Ne[gt]))throw new Error("Arr.flatten item "+gt+" was not an array, input: "+Ne);Bo.apply(Re,Ne[gt])}return Re},Ln=Ne=>{let Re=Ne;return{get:()=>Re,set:Yn=>{Re=Yn}}},Lo=Object.keys,vn=Object.hasOwnProperty,Bt=(Ne,Re)=>{const gt=Lo(Ne);for(let ft=0,Yn=gt.length;ft<Yn;ft++){const go=gt[ft],To=Ne[go];Re(To,go)}},vo=(Ne,Re)=>xn(Ne,Re)?ns.from(Ne[Re]):ns.none(),xn=(Ne,Re)=>vn.call(Ne,Re),oe=Ne=>Re=>Re.options.get(Ne),Wt=Ne=>{const Re=Ne.options.register;Re("audio_template_callback",{processor:"function"}),Re("video_template_callback",{processor:"function"}),Re("iframe_template_callback",{processor:"function"}),Re("media_live_embeds",{processor:"boolean",default:!0}),Re("media_filter_html",{processor:"boolean",default:!0}),Re("media_url_resolver",{processor:"function"}),Re("media_alt_source",{processor:"boolean",default:!0}),Re("media_poster",{processor:"boolean",default:!0}),Re("media_dimensions",{processor:"boolean",default:!0})},Yo=oe("audio_template_callback"),jt=oe("video_template_callback"),ce=oe("iframe_template_callback"),Gt=oe("media_live_embeds"),Wn=oe("media_filter_html"),no=oe("media_url_resolver"),ut=oe("media_alt_source"),Be=oe("media_poster"),Qo=oe("media_dimensions");var Je=tinymce.util.Tools.resolve("tinymce.util.Tools"),ot=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),V=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Zn=ot.DOM,Dt=Ne=>Ne.replace(/px$/,""),Ao=Ne=>{const Re=Ne.attr("style"),gt=Re?Zn.parseStyle(Re):{};return{type:"ephox-embed-iri",source:Ne.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:vo(gt,"max-width").map(Dt).getOr(""),height:vo(gt,"max-height").map(Dt).getOr("")}},Rn=(Ne,Re)=>{let gt={};const Yn=V({validate:!1,forced_root_block:!1},Re).parse(Ne);for(let go=Yn;go;go=go.walk())if(go.type===1){const To=go.name;if(go.attr("data-ephox-embed-iri")){gt=Ao(go);break}else!gt.source&&To==="param"&&(gt.source=go.attr("movie")),(To==="iframe"||To==="object"||To==="embed"||To==="video"||To==="audio")&&(gt.type||(gt.type=To),gt=Je.extend(go.attributes.map,gt)),To==="source"&&(gt.source?gt.altsource||(gt.altsource=go.attr("src")):gt.source=go.attr("src")),To==="img"&&!gt.poster&&(gt.poster=go.attr("src"))}return gt.source=gt.source||gt.src||"",gt.altsource=gt.altsource||"",gt.poster=gt.poster||"",gt},it=Ne=>{var Re;const gt={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},ft=(Re=Ne.toLowerCase().split(".").pop())!==null&&Re!==void 0?Re:"";return vo(gt,ft).getOr("")};var No=tinymce.util.Tools.resolve("tinymce.html.Node"),qs=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Ht=(Ne,Re={})=>V({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...Re},Ne),Gn=ot.DOM,dt=Ne=>/^[0-9.]+$/.test(Ne)?Ne+"px":Ne,wt=(Ne,Re)=>{const gt=Re.attr("style"),ft=gt?Gn.parseStyle(gt):{};lo(Ne.width)&&(ft["max-width"]=dt(Ne.width)),lo(Ne.height)&&(ft["max-height"]=dt(Ne.height)),Re.attr("style",Gn.serializeStyle(ft))},te=["source","altsource"],As=(Ne,Re,gt,ft)=>{let Yn=0,go=0;const To=Ht(ft);To.addNodeFilter("source",Xe=>Yn=Xe.length);const Sr=To.parse(Ne);for(let Xe=Sr;Xe;Xe=Xe.walk())if(Xe.type===1){const Eo=Xe.name;if(Xe.attr("data-ephox-embed-iri")){wt(Re,Xe);break}else{switch(Eo){case"video":case"object":case"embed":case"img":case"iframe":Re.height!==void 0&&Re.width!==void 0&&(Xe.attr("width",Re.width),Xe.attr("height",Re.height));break}if(gt)switch(Eo){case"video":Xe.attr("poster",Re.poster),Xe.attr("src",null);for(let ze=Yn;ze<2;ze++)if(Re[te[ze]]){const It=new No("source",1);It.attr("src",Re[te[ze]]),It.attr("type",Re[te[ze]+"mime"]||null),Xe.append(It)}break;case"iframe":Xe.attr("src",Re.source);break;case"object":const He=Xe.getAll("img").length>0;if(Re.poster&&!He){Xe.attr("src",Re.poster);const ze=new No("img",1);ze.attr("src",Re.poster),ze.attr("width",Re.width),ze.attr("height",Re.height),Xe.append(ze)}break;case"source":if(go<2&&(Xe.attr("src",Re[te[go]]),Xe.attr("type",Re[te[go]+"mime"]||null),!Re[te[go]])){Xe.remove();continue}go++;break;case"img":Re.poster||Xe.remove();break}}}return qs({},ft).serialize(Sr)},zo=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Un=Ne=>{const Re=Ne.match(/^(https?:\/\/|www\.)(.+)$/i);return Re&&Re.length>1?Re[1]==="www."?"https://":Re[1]:"https://"},ms=(Ne,Re)=>{const gt=Un(Re),ft=Ne.regex.exec(Re);let Yn=gt+Ne.url;if(lo(ft))for(let go=0;go<ft.length;go++)Yn=Yn.replace("$"+go,()=>ft[go]?ft[go]:"");return Yn.replace(/\?$/,"")},Ka=Ne=>{const Re=zo.filter(gt=>gt.regex.test(Ne));return Re.length>0?Je.extend({},Re[0],{url:ms(Re[0],Ne)}):null},We=(Ne,Re)=>{if(Re)return Re(Ne);{const gt=Ne.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+Ne.source+'" width="'+Ne.width+'" height="'+Ne.height+'"'+gt+"></iframe>"}},Ie=Ne=>{let Re='<object data="'+Ne.source+'" width="'+Ne.width+'" height="'+Ne.height+'" type="application/x-shockwave-flash">';return Ne.poster&&(Re+='<img src="'+Ne.poster+'" width="'+Ne.width+'" height="'+Ne.height+'" />'),Re+="</object>",Re},Ze=(Ne,Re)=>Re?Re(Ne):'<audio controls="controls" src="'+Ne.source+'">'+(Ne.altsource?`
<source src="`+Ne.altsource+'"'+(Ne.altsourcemime?' type="'+Ne.altsourcemime+'"':"")+` />
`:"")+"</audio>",De=(Ne,Re)=>Re?Re(Ne):'<video width="'+Ne.width+'" height="'+Ne.height+'"'+(Ne.poster?' poster="'+Ne.poster+'"':"")+` controls="controls">
<source src="`+Ne.source+'"'+(Ne.sourcemime?' type="'+Ne.sourcemime+'"':"")+` />
`+(Ne.altsource?'<source src="'+Ne.altsource+'"'+(Ne.altsourcemime?' type="'+Ne.altsourcemime+'"':"")+` />
`:"")+"</video>",Xn=(Ne,Re)=>{var gt;const ft=Je.extend({},Re);if(!ft.source&&(Je.extend(ft,Rn((gt=ft.embed)!==null&&gt!==void 0?gt:"",Ne.schema)),!ft.source))return"";ft.altsource||(ft.altsource=""),ft.poster||(ft.poster=""),ft.source=Ne.convertURL(ft.source,"source"),ft.altsource=Ne.convertURL(ft.altsource,"source"),ft.sourcemime=it(ft.source),ft.altsourcemime=it(ft.altsource),ft.poster=Ne.convertURL(ft.poster,"poster");const Yn=Ka(ft.source);if(Yn&&(ft.source=Yn.url,ft.type=Yn.type,ft.allowfullscreen=Yn.allowFullscreen,ft.width=ft.width||String(Yn.w),ft.height=ft.height||String(Yn.h)),ft.embed)return As(ft.embed,ft,!0,Ne.schema);{const go=Yo(Ne),To=jt(Ne),Sr=ce(Ne);return ft.width=ft.width||"300",ft.height=ft.height||"150",Je.each(ft,(Xe,Eo)=>{ft[Eo]=Ne.dom.encode(""+Xe)}),ft.type==="iframe"?We(ft,Sr):ft.sourcemime==="application/x-shockwave-flash"?Ie(ft):ft.sourcemime.indexOf("audio")!==-1?Ze(ft,go):De(ft,To)}},Mo=Ne=>Ne.hasAttribute("data-mce-object")||Ne.hasAttribute("data-ephox-embed-iri"),Cn=Ne=>{Ne.on("mousedown",Re=>{const gt=Ne.dom.getParent(Re.target,".mce-preview-object");gt&&Ne.dom.getAttrib(gt,"data-mce-selected")==="2"&&Re.stopImmediatePropagation()}),Ne.on("click keyup touchend",()=>{const Re=Ne.selection.getNode();Re&&Ne.dom.hasClass(Re,"mce-preview-object")&&Ne.dom.getAttrib(Re,"data-mce-selected")&&Re.setAttribute("data-mce-selected","2")}),Ne.on("ObjectResized",Re=>{const gt=Re.target;if(gt.getAttribute("data-mce-object")){let ft=gt.getAttribute("data-mce-html");ft&&(ft=unescape(ft),gt.setAttribute("data-mce-html",escape(As(ft,{width:String(Re.width),height:String(Re.height)},!1,Ne.schema))))}})},Qs={},Vo=(Ne,Re,gt)=>new Promise((ft,Yn)=>{const go=To=>(To.html&&(Qs[Ne.source]=To),ft({url:Ne.source,html:To.html?To.html:Re(Ne)}));Qs[Ne.source]?go(Qs[Ne.source]):gt({url:Ne.source}).then(go).catch(Yn)}),Cr=(Ne,Re)=>Promise.resolve({html:Re(Ne),url:Ne.source}),us=Ne=>Re=>Xn(Ne,Re),ur=(Ne,Re)=>{const gt=no(Ne);return gt?Vo(Re,us(Ne),gt):Cr(Re,us(Ne))},ri=Ne=>xn(Qs,Ne),vr=(Ne,Re)=>vo(Re,Ne).bind(gt=>vo(gt,"meta")),qo=(Ne,Re,gt)=>ft=>{const Yn=()=>vo(Ne,ft),go=()=>vo(Re,ft),To=Eo=>vo(Eo,"value").bind(He=>He.length>0?ns.some(He):ns.none()),Sr=()=>Yn().bind(Eo=>gs(Eo)?To(Eo).orThunk(go):go().orThunk(()=>ns.from(Eo))),Xe=()=>go().orThunk(()=>Yn().bind(Eo=>gs(Eo)?To(Eo):ns.from(Eo)));return{[ft]:(ft===gt?Sr():Xe()).getOr("")}},ds=(Ne,Re)=>{const gt={};return vo(Ne,"dimensions").each(ft=>{fs(["width","height"],Yn=>{vo(Re,Yn).orThunk(()=>vo(ft,Yn)).each(go=>gt[Yn]=go)})}),gt},jr=(Ne,Re)=>{const gt=Re&&Re!=="dimensions"?vr(Re,Ne).getOr({}):{},ft=qo(Ne,gt,Re);return{...ft("source"),...ft("altsource"),...ft("poster"),...ft("embed"),...ds(Ne,gt)}},$s=Ne=>{const Re={...Ne,source:{value:vo(Ne,"source").getOr("")},altsource:{value:vo(Ne,"altsource").getOr("")},poster:{value:vo(Ne,"poster").getOr("")}};return fs(["width","height"],gt=>{vo(Ne,gt).each(ft=>{const Yn=Re.dimensions||{};Yn[gt]=ft,Re.dimensions=Yn})}),Re},Go=Ne=>Re=>{const gt=Re&&Re.msg?"Media embed handler error: "+Re.msg:"Media embed handler threw unknown error.";Ne.notificationManager.open({type:"error",text:gt})},Xs=Ne=>{const Re=Ne.selection.getNode(),gt=Mo(Re)?Ne.serializer.serialize(Re,{selection:!0}):"",ft=Rn(gt,Ne.schema),go=(()=>{if(Wr(ft.source,ft.type)){const To=Ne.dom.getRect(Re);return{width:To.w.toString().replace(/px$/,""),height:To.h.toString().replace(/px$/,"")}}else return{}})();return{embed:gt,...ft,...go}},qn=(Ne,Re)=>gt=>{if(rn(gt.url)&&gt.url.trim().length>0){const ft=gt.html,go={...Rn(ft,Re.schema),source:gt.url,embed:ft};Ne.setData($s(go))}},Ns=(Ne,Re)=>{const gt=Ne.dom.select("*[data-mce-object]");for(let ft=0;ft<Re.length;ft++)for(let Yn=gt.length-1;Yn>=0;Yn--)Re[ft]===gt[Yn]&&gt.splice(Yn,1);Ne.selection.select(gt[0])},oo=(Ne,Re)=>{const gt=Ne.dom.select("*[data-mce-object]");Ne.insertContent(Re),Ns(Ne,gt),Ne.nodeChanged()},Wr=(Ne,Re)=>lo(Re)&&Re==="ephox-embed-iri"&&lo(Ka(Ne)),yi=(Ne,Re)=>((ft,Yn)=>ft.width!==Yn.width||ft.height!==Yn.height)(Ne,Re)&&Wr(Re.source,Ne.type),uo=(Ne,Re,gt)=>{var ft;Re.embed=yi(Ne,Re)&&Qo(gt)?Xn(gt,{...Re,embed:""}):As((ft=Re.embed)!==null&&ft!==void 0?ft:"",Re,!1,gt.schema),Re.embed&&(Ne.source===Re.source||ri(Re.source))?oo(gt,Re.embed):ur(gt,Re).then(Yn=>{oo(gt,Yn.html)}).catch(Go(gt))},Ri=Ne=>{const Re=Xs(Ne),gt=Ln(Re),ft=$s(Re),Yn=(Mn,eo)=>{const co=jr(eo.getData(),"source");Mn.source!==co.source&&(qn($n,Ne)({url:co.source,html:""}),ur(Ne,co).then(qn($n,Ne)).catch(Go(Ne)))},go=Mn=>{var eo;const co=jr(Mn.getData()),ps=Rn((eo=co.embed)!==null&&eo!==void 0?eo:"",Ne.schema);Mn.setData($s(ps))},To=(Mn,eo,co)=>{const ps=jr(Mn.getData(),eo),Ks=yi(co,ps)&&Qo(Ne)?{...ps,embed:""}:ps,Ys=Xn(Ne,Ks);Mn.setData($s({...Ks,embed:Ys}))},Sr=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],Xe=Qo(Ne)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Eo={title:"General",name:"general",items:Tt([Sr,Xe])},ze={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},It=[];ut(Ne)&&It.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Be(Ne)&&It.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Vt={title:"Advanced",name:"advanced",items:It},bn=[Eo,ze];It.length>0&&bn.push(Vt);const Hn={type:"tabpanel",tabs:bn},$n=Ne.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Hn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Mn=>{const eo=jr(Mn.getData());uo(gt.get(),eo,Ne),Mn.close()},onChange:(Mn,eo)=>{switch(eo.name){case"source":Yn(gt.get(),Mn);break;case"embed":go(Mn);break;case"dimensions":case"altsource":case"poster":To(Mn,eo.name,gt.get());break}gt.set(jr(Mn.getData()))},initialData:ft})},Yt=Ne=>({showDialog:()=>{Ri(Ne)}}),os=Ne=>{const Re=()=>{Ri(Ne)};Ne.addCommand("mceMedia",Re)},Lr=(Ne,Re,gt)=>Ne.length>=Re.length&&Ne.substr(gt,gt+Re.length)===Re,Zr=(Ne,Re)=>Lr(Ne,Re,0);var Fa=tinymce.util.Tools.resolve("tinymce.Env");const Xa=Ne=>{const Re=Ne.name;return Re==="iframe"||Re==="video"||Re==="audio"},Is=(Ne,Re,gt,ft=null)=>{const Yn=Ne.attr(gt);return lo(Yn)?Yn:xn(Re,gt)?null:ft},da=(Ne,Re,gt)=>{const ft=Re.name==="img"||Ne.name==="video",Yn=ft?"300":null,go=Ne.name==="audio"?"30":"150",To=ft?go:null;Re.attr({width:Is(Ne,gt,"width",Yn),height:Is(Ne,gt,"height",To)})},Dr=(Ne,Re,gt,ft)=>{const Yn=Ht(Ne.schema).parse(ft,{context:Re});for(;Yn.firstChild;)gt.append(Yn.firstChild)},Ts=(Ne,Re)=>{const gt=Re.name,ft=new No("img",1);return hr(Ne,Re,ft),da(Re,ft,{}),ft.attr({style:Re.attr("style"),src:Fa.transparentSrc,"data-mce-object":gt,class:"mce-object mce-object-"+gt}),ft},Qn=(Ne,Re)=>{var gt;const ft=Re.name,Yn=new No("span",1);Yn.attr({contentEditable:"false",style:Re.attr("style"),"data-mce-object":ft,class:"mce-preview-object mce-object-"+ft}),hr(Ne,Re,Yn);const go=Ne.dom.parseStyle((gt=Re.attr("style"))!==null&&gt!==void 0?gt:""),To=new No(ft,1);if(da(Re,To,go),To.attr({src:Re.attr("src"),style:Re.attr("style"),class:Re.attr("class")}),ft==="iframe")To.attr({allowfullscreen:Re.attr("allowfullscreen"),frameborder:"0",sandbox:Re.attr("sandbox"),referrerpolicy:Re.attr("referrerpolicy")});else{fs(["controls","crossorigin","currentTime","loop","muted","poster","preload"],He=>{To.attr(He,Re.attr(He))});const Eo=Yn.attr("data-mce-html");lo(Eo)&&Dr(Ne,ft,To,unescape(Eo))}const Sr=new No("span",1);return Sr.attr("class","mce-shim"),Yn.append(To),Yn.append(Sr),Yn},hr=(Ne,Re,gt)=>{var ft;const Yn=(ft=Re.attributes)!==null&&ft!==void 0?ft:[];let go=Yn.length;for(;go--;){const Eo=Yn[go].name;let He=Yn[go].value;Eo!=="width"&&Eo!=="height"&&Eo!=="style"&&!Zr(Eo,"data-mce-")&&((Eo==="data"||Eo==="src")&&(He=Ne.convertURL(He,Eo)),gt.attr("data-mce-p-"+Eo,He))}const To=qs({inner:!0},Ne.schema),Sr=new No("div",1);fs(Re.children(),Eo=>Sr.append(Eo));const Xe=To.serialize(Sr);Xe&&(gt.attr("data-mce-html",escape(Xe)),gt.empty())},Ta=Ne=>{const Re=Ne.attr("class");return rn(Re)&&/\btiny-pageembed\b/.test(Re)},vl=Ne=>{let Re=Ne;for(;Re=Re.parent;)if(Re.attr("data-ephox-embed-iri")||Ta(Re))return!0;return!1},Ol=Ne=>Re=>{let gt=Re.length,ft;for(;gt--;)ft=Re[gt],ft.parent&&(ft.parent.attr("data-mce-object")||(Xa(ft)&&Gt(Ne)?vl(ft)||ft.replace(Qn(Ne,ft)):vl(ft)||ft.replace(Ts(Ne,ft))))},Ds=(Ne,Re,gt)=>{const ft=Ne.options.get,Yn=ft("xss_sanitization"),go=Wn(Ne);return Ht(Ne.schema,{sanitize:Yn,validate:go}).parse(gt,{context:Re})},yo=Ne=>{Ne.on("PreInit",()=>{const{schema:Re,serializer:gt,parser:ft}=Ne,Yn=Re.getBoolAttrs();fs("webkitallowfullscreen mozallowfullscreen".split(" "),go=>{Yn[go]={}}),Bt({embed:["wmode"]},(go,To)=>{const Sr=Re.getElementRule(To);Sr&&fs(go,Xe=>{Sr.attributes[Xe]={},Sr.attributesOrder.push(Xe)})}),ft.addNodeFilter("iframe,video,audio,object,embed",Ol(Ne)),gt.addAttributeFilter("data-mce-object",(go,To)=>{var Sr;let Xe=go.length;for(;Xe--;){const Eo=go[Xe];if(!Eo.parent)continue;const He=Eo.attr(To),ze=new No(He,1);if(He!=="audio"){const Hn=Eo.attr("class");Hn&&Hn.indexOf("mce-preview-object")!==-1&&Eo.firstChild?ze.attr({width:Eo.firstChild.attr("width"),height:Eo.firstChild.attr("height")}):ze.attr({width:Eo.attr("width"),height:Eo.attr("height")})}ze.attr({style:Eo.attr("style")});const It=(Sr=Eo.attributes)!==null&&Sr!==void 0?Sr:[];let Vt=It.length;for(;Vt--;){const Hn=It[Vt].name;Hn.indexOf("data-mce-p-")===0&&ze.attr(Hn.substr(11),It[Vt].value)}const bn=Eo.attr("data-mce-html");if(bn){const Hn=Ds(Ne,He,unescape(bn));fs(Hn.children(),$n=>ze.append($n))}Eo.replace(ze)}})}),Ne.on("SetContent",()=>{const Re=Ne.dom;fs(Re.select("span.mce-preview-object"),gt=>{Re.select("span.mce-shim",gt).length===0&&Re.add(gt,"span",{class:"mce-shim"})})})},mr=Ne=>{Ne.on("ResolveName",Re=>{let gt;Re.target.nodeType===1&&(gt=Re.target.getAttribute("data-mce-object"))&&(Re.name=gt)})},Ea=Ne=>Re=>{const gt=()=>{Re.setEnabled(Ne.selection.isEditable())};return Ne.on("NodeChange",gt),gt(),()=>{Ne.off("NodeChange",gt)}},va=Ne=>{const Re=()=>Ne.execCommand("mceMedia");Ne.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Re,onSetup:gt=>{const ft=Ne.selection;gt.setActive(Mo(ft.getNode()));const Yn=ft.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",gt.setActive).unbind,go=Ea(Ne)(gt);return()=>{Yn(),go()}}}),Ne.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Re,onSetup:Ea(Ne)})};var Ms=()=>{cs.add("media",Ne=>(Wt(Ne),os(Ne),va(Ne),mr(Ne),yo(Ne),Cn(Ne),Yt(Ne)))};Ms()}()),xG}var wG;function Tq(){return wG||(wG=1,Aq()),vG}Tq();var CG={},SG={},kG;function Eq(){return kG||(kG=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const Rs=(N,z,re)=>{var we;return re(N,z.prototype)?!0:((we=N.constructor)===null||we===void 0?void 0:we.name)===z.name},gn=N=>{const z=typeof N;return N===null?"null":z==="object"&&Array.isArray(N)?"array":z==="object"&&Rs(N,String,(re,we)=>we.isPrototypeOf(re))?"string":z},ys=N=>z=>gn(z)===N,rn=N=>z=>typeof z===N,gs=N=>z=>N===z,Fo=ys("string"),Ot=ys("array"),lo=rn("boolean"),ns=gs(void 0),Bo=N=>N==null,fs=N=>!Bo(N),Tt=rn("function"),Ln=rn("number"),Lo=()=>{},vn=(N,z)=>re=>N(z(re)),Bt=N=>()=>N,vo=N=>N,xn=(N,z)=>N===z;function oe(N,...z){return(...re)=>{const we=z.concat(re);return N.apply(null,we)}}const Wt=N=>{N()},Yo=Bt(!1),jt=Bt(!0);class ce{constructor(z,re){this.tag=z,this.value=re}static some(z){return new ce(!0,z)}static none(){return ce.singletonNone}fold(z,re){return this.tag?re(this.value):z()}isSome(){return this.tag}isNone(){return!this.tag}map(z){return this.tag?ce.some(z(this.value)):ce.none()}bind(z){return this.tag?z(this.value):ce.none()}exists(z){return this.tag&&z(this.value)}forall(z){return!this.tag||z(this.value)}filter(z){return!this.tag||z(this.value)?this:ce.none()}getOr(z){return this.tag?this.value:z}or(z){return this.tag?this:z}getOrThunk(z){return this.tag?this.value:z()}orThunk(z){return this.tag?this:z()}getOrDie(z){if(this.tag)return this.value;throw new Error(z??"Called getOrDie on None")}static from(z){return fs(z)?ce.some(z):ce.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(z){this.tag&&z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ce.singletonNone=new ce(!1);const Gt=Object.keys,Wn=Object.hasOwnProperty,no=(N,z)=>{const re=Gt(N);for(let we=0,je=re.length;we<je;we++){const Pt=re[we],on=N[Pt];z(on,Pt)}},ut=N=>(z,re)=>{N[re]=z},Be=(N,z,re,we)=>{no(N,(je,Pt)=>{(z(je,Pt)?re:we)(je,Pt)})},Qo=(N,z)=>{const re={};return Be(N,z,ut(re),Lo),re},Je=(N,z)=>{const re=[];return no(N,(we,je)=>{re.push(z(we,je))}),re},ot=N=>Je(N,vo),V=N=>Gt(N).length,Zn=(N,z)=>Dt(N,z)?ce.from(N[z]):ce.none(),Dt=(N,z)=>Wn.call(N,z),Ao=(N,z)=>Dt(N,z)&&N[z]!==void 0&&N[z]!==null,Rn=N=>{for(const z in N)if(Wn.call(N,z))return!1;return!0},it=Array.prototype.indexOf,No=Array.prototype.push,qs=(N,z)=>it.call(N,z),Ht=(N,z)=>qs(N,z)>-1,Gn=(N,z)=>{for(let re=0,we=N.length;re<we;re++){const je=N[re];if(z(je,re))return!0}return!1},dt=(N,z)=>{const re=[];for(let we=0;we<N;we++)re.push(z(we));return re},wt=(N,z)=>{const re=N.length,we=new Array(re);for(let je=0;je<re;je++){const Pt=N[je];we[je]=z(Pt,je)}return we},te=(N,z)=>{for(let re=0,we=N.length;re<we;re++){const je=N[re];z(je,re)}},As=(N,z)=>{for(let re=N.length-1;re>=0;re--){const we=N[re];z(we,re)}},zo=(N,z)=>{const re=[],we=[];for(let je=0,Pt=N.length;je<Pt;je++){const on=N[je];(z(on,je)?re:we).push(on)}return{pass:re,fail:we}},Un=(N,z)=>{const re=[];for(let we=0,je=N.length;we<je;we++){const Pt=N[we];z(Pt,we)&&re.push(Pt)}return re},ms=(N,z,re)=>(As(N,(we,je)=>{re=z(re,we,je)}),re),Ka=(N,z,re)=>(te(N,(we,je)=>{re=z(re,we,je)}),re),We=(N,z,re)=>{for(let we=0,je=N.length;we<je;we++){const Pt=N[we];if(z(Pt,we))return ce.some(Pt);if(re(Pt,we))break}return ce.none()},Ie=(N,z)=>We(N,z,Yo),Ze=N=>{const z=[];for(let re=0,we=N.length;re<we;++re){if(!Ot(N[re]))throw new Error("Arr.flatten item "+re+" was not an array, input: "+N);No.apply(z,N[re])}return z},De=(N,z)=>Ze(wt(N,z)),Xn=(N,z)=>{for(let re=0,we=N.length;re<we;++re){const je=N[re];if(z(je,re)!==!0)return!1}return!0},Mo=(N,z)=>{const re={};for(let we=0,je=N.length;we<je;we++){const Pt=N[we];re[String(Pt)]=z(Pt,we)}return re},Cn=(N,z)=>z>=0&&z<N.length?ce.some(N[z]):ce.none(),Qs=N=>Cn(N,0),Vo=N=>Cn(N,N.length-1),Cr=(N,z)=>{for(let re=0;re<N.length;re++){const we=z(N[re],re);if(we.isSome())return we}return ce.none()},us=8,ur=9,ri=11,vr=1,qo=3,ds=(N,z)=>{const we=(z||document).createElement("div");if(we.innerHTML=N,!we.hasChildNodes()||we.childNodes.length>1){const je="HTML does not have a single root node";throw console.error(je,N),new Error(je)}return Go(we.childNodes[0])},jr=(N,z)=>{const we=(z||document).createElement(N);return Go(we)},$s=(N,z)=>{const we=(z||document).createTextNode(N);return Go(we)},Go=N=>{if(N==null)throw new Error("Node cannot be null or undefined");return{dom:N}},qn={fromHtml:ds,fromTag:jr,fromText:$s,fromDom:Go,fromPoint:(N,z,re)=>ce.from(N.dom.elementFromPoint(z,re)).map(Go)},Ns=(N,z)=>{const re=N.dom;if(re.nodeType!==vr)return!1;{const we=re;if(we.matches!==void 0)return we.matches(z);if(we.msMatchesSelector!==void 0)return we.msMatchesSelector(z);if(we.webkitMatchesSelector!==void 0)return we.webkitMatchesSelector(z);if(we.mozMatchesSelector!==void 0)return we.mozMatchesSelector(z);throw new Error("Browser lacks native selectors")}},oo=N=>N.nodeType!==vr&&N.nodeType!==ur&&N.nodeType!==ri||N.childElementCount===0,Wr=(N,z)=>{const re=z===void 0?document:z.dom;return oo(re)?[]:wt(re.querySelectorAll(N),qn.fromDom)},yi=(N,z)=>{const re=z===void 0?document:z.dom;return oo(re)?ce.none():ce.from(re.querySelector(N)).map(qn.fromDom)},uo=(N,z)=>N.dom===z.dom,Ri=Ns;typeof window<"u"||Function("return this;")();const Yt=N=>N.dom.nodeName.toLowerCase(),os=N=>N.dom.nodeType,Lr=N=>z=>os(z)===N,Zr=N=>os(N)===us||Yt(N)==="#comment",Fa=Lr(vr),Xa=Lr(qo),Is=Lr(ur),da=Lr(ri),Dr=N=>z=>Fa(z)&&Yt(z)===N,Ts=N=>qn.fromDom(N.dom.ownerDocument),Qn=N=>Is(N)?N:Ts(N),hr=N=>ce.from(N.dom.parentNode).map(qn.fromDom),Ta=(N,z)=>{const re=Tt(z)?z:Yo;let we=N.dom;const je=[];for(;we.parentNode!==null&&we.parentNode!==void 0;){const Pt=we.parentNode,on=qn.fromDom(Pt);if(je.push(on),re(on)===!0)break;we=Pt}return je},vl=N=>ce.from(N.dom.previousSibling).map(qn.fromDom),Ol=N=>ce.from(N.dom.nextSibling).map(qn.fromDom),Ds=N=>wt(N.dom.childNodes,qn.fromDom),yo=(N,z)=>{const re=N.dom.childNodes;return ce.from(re[z]).map(qn.fromDom)},mr=N=>yo(N,0),Ea=N=>da(N)&&fs(N.dom.host),va=N=>qn.fromDom(N.dom.getRootNode()),Ms=N=>{const z=va(N);return Ea(z)?ce.some(z):ce.none()},Ne=N=>qn.fromDom(N.dom.host),Re=N=>{const z=Xa(N)?N.dom.parentNode:N.dom;if(z==null||z.ownerDocument===null)return!1;const re=z.ownerDocument;return Ms(qn.fromDom(z)).fold(()=>re.body.contains(z),vn(Re,Ne))};var gt=(N,z,re,we,je)=>N(re,we)?ce.some(re):Tt(je)&&je(re)?ce.none():z(re,we,je);const ft=(N,z,re)=>{let we=N.dom;const je=Tt(re)?re:Yo;for(;we.parentNode;){we=we.parentNode;const Pt=qn.fromDom(we);if(z(Pt))return ce.some(Pt);if(je(Pt))break}return ce.none()},Yn=(N,z,re)=>gt((je,Pt)=>Pt(je),ft,N,z,re),go=(N,z)=>{const re=je=>z(qn.fromDom(je));return Ie(N.dom.childNodes,re).map(qn.fromDom)},To=(N,z,re)=>ft(N,we=>Ns(we,z),re),Sr=(N,z)=>go(N,re=>Ns(re,z)),Xe=(N,z)=>yi(z,N),Eo=(N,z,re)=>gt((je,Pt)=>Ns(je,Pt),To,N,z,re),He=N=>Eo(N,"[contenteditable]"),ze=(N,z=!1)=>Re(N)?N.dom.isContentEditable:He(N).fold(Bt(z),re=>It(re)==="true"),It=N=>N.dom.contentEditable,Vt=N=>N.nodeName.toLowerCase(),bn=N=>qn.fromDom(N.getBody()),Hn=N=>z=>uo(z,bn(N)),$n=N=>N?N.replace(/px$/,""):"",Mn=N=>/^\d+(\.\d+)?$/.test(N)?N+"px":N,eo=N=>qn.fromDom(N.selection.getStart()),co=N=>qn.fromDom(N.selection.getEnd()),ps=N=>Yn(N,Dr("table")).forall(ze),Ks=(N,z)=>Un(Ds(N),z),Ys=(N,z)=>{let re=[];return te(Ds(N),we=>{z(we)&&(re=re.concat([we])),re=re.concat(Ys(we,z))}),re},hi=(N,z)=>Ks(N,re=>Ns(re,z)),Ja=(N,z)=>Wr(z,N),so=(N,z,re)=>{if(Fo(re)||lo(re)||Ln(re))N.setAttribute(z,re+"");else throw console.error("Invalid call to Attribute.set. Key ",z,":: Value ",re,":: Element ",N),new Error("Attribute value was not simple")},ls=(N,z,re)=>{so(N.dom,z,re)},ss=(N,z)=>{const re=N.dom;no(z,(we,je)=>{so(re,je,we)})},_a=(N,z)=>{const re=N.dom.getAttribute(z);return re===null?void 0:re},xa=(N,z)=>ce.from(_a(N,z)),ea=(N,z)=>{N.dom.removeAttribute(z)},pr=N=>Ka(N.dom.attributes,(z,re)=>(z[re.name]=re.value,z),{}),eu=(N,z,re=xn)=>N.exists(we=>re(we,z)),ji=N=>{const z=[],re=we=>{z.push(we)};for(let we=0;we<N.length;we++)N[we].each(re);return z},Fs=(N,z,re)=>N.isSome()&&z.isSome()?ce.some(re(N.getOrDie(),z.getOrDie())):ce.none(),Oa=N=>N.bind(vo),Ra=(N,z)=>N?ce.some(z):ce.none(),ya=(N,z)=>N.substring(z),Di=(N,z,re)=>z===""||N.length>=z.length&&N.substr(re,re+z.length)===z,Qa=(N,z)=>ai(N,z)?ya(N,z.length):N,ai=(N,z)=>Di(N,z,0),Mi=(N=>z=>z.replace(N,""))(/^\s+|\s+$/g),ii=N=>N.length>0,Ql=N=>!ii(N),wi=(N,z=10)=>{const re=parseInt(N,z);return isNaN(re)?ce.none():ce.some(re)},gi=N=>{const z=parseFloat(N);return isNaN(z)?ce.none():ce.some(z)},ha=N=>N.style!==void 0&&Tt(N.style.getPropertyValue),ec=(N,z,re)=>{if(!Fo(re))throw console.error("Invalid call to CSS.set. Property ",z,":: Value ",re,":: Element ",N),new Error("CSS value must be a string: "+re);ha(N)&&N.style.setProperty(z,re)},sl=(N,z)=>{ha(N)&&N.style.removeProperty(z)},tc=(N,z,re)=>{const we=N.dom;ec(we,z,re)},Ci=(N,z)=>{const re=N.dom,je=window.getComputedStyle(re).getPropertyValue(z);return je===""&&!Re(N)?ga(re,z):je},ga=(N,z)=>ha(N)?N.style.getPropertyValue(z):"",Ba=(N,z)=>{const re=N.dom,we=ga(re,z);return ce.from(we).filter(je=>je.length>0)},ta=(N,z)=>{const re=N.dom;sl(re,z),eu(xa(N,"style").map(Mi),"")&&ea(N,"style")},Ha=(N,z,re=0)=>xa(N,z).map(we=>parseInt(we,10)).getOr(re),nc=(N,z)=>gr(N,z,jt),gr=(N,z,re)=>De(Ds(N),we=>Ns(we,z)?re(we)?[we]:[]:gr(we,z,re)),he=["tfoot","thead","tbody","colgroup"],Me=N=>Ht(he,N),Ge=(N,z)=>({rows:N,columns:z}),mt=(N,z,re)=>({element:N,rowspan:z,colspan:re}),Qt=(N,z,re,we,je,Pt)=>({element:N,rowspan:z,colspan:re,row:we,column:je,isLocked:Pt}),kt=(N,z,re)=>({element:N,cells:z,section:re}),Ps=(N,z,re,we)=>({startRow:N,startCol:z,finishRow:re,finishCol:we}),In=(N,z,re)=>({element:N,colspan:z,column:re}),_o=(N,z)=>({element:N,columns:z}),kr=(N,z,re=Yo)=>{if(re(z))return ce.none();if(Ht(N,Yt(z)))return ce.some(z);const we=je=>Ns(je,"table")||re(je);return To(z,N.join(","),we)},Q=(N,z)=>kr(["td","th"],N,z),xe=N=>nc(N,"th,td"),Le=N=>Ns(N,"colgroup")?hi(N,"col"):De(jo(N),z=>hi(z,"col")),st=(N,z)=>Eo(N,"table",z),Mt=N=>nc(N,"tr"),jo=N=>st(N).fold(Bt([]),z=>hi(z,"colgroup")),js=(N,z)=>wt(N,re=>{if(Yt(re)==="colgroup"){const we=wt(Le(re),je=>{const Pt=Ha(je,"span",1);return mt(je,1,Pt)});return kt(re,we,"colgroup")}else{const we=wt(xe(re),je=>{const Pt=Ha(je,"rowspan",1),on=Ha(je,"colspan",1);return mt(je,Pt,on)});return kt(re,we,z(re))}}),nr=N=>hr(N).map(z=>{const re=Yt(z);return Me(re)?re:"tbody"}).getOr("tbody"),zt=N=>{const z=Mt(N),we=[...jo(N),...z];return js(we,nr)},or="data-snooker-locked-cols",Da=N=>xa(N,or).bind(z=>ce.from(z.match(/\d+/g))).map(z=>Mo(z,jt)),Rl=(N,z)=>N+","+z,Oo=(N,z,re)=>ce.from(N.access[Rl(z,re)]),Si=(N,z,re)=>{const we=rl(N,je=>re(z,je.element));return we.length>0?ce.some(we[0]):ce.none()},rl=(N,z)=>{const re=De(N.all,we=>we.cells);return Un(re,z)},Ma=N=>{const z={};let re=0;return te(N.cells,we=>{const je=we.colspan;dt(je,Pt=>{const on=re+Pt;z[on]=In(we.element,je,on)}),re+=je}),z},Xo=N=>{const z={},re=[],je=Qs(N).map(sc=>sc.element).bind(st).bind(Da).getOr({});let Pt=0,on=0,zn=0;const{pass:Po,fail:ts}=zo(N,sc=>sc.section==="colgroup");te(ts,sc=>{const zc=[];te(sc.cells,ll=>{let ud=0;for(;z[Rl(zn,ud)]!==void 0;)ud++;const Fd=Ao(je,ud.toString()),Bd=Qt(ll.element,ll.rowspan,ll.colspan,zn,ud,Fd);for(let wh=0;wh<ll.colspan;wh++)for(let $g=0;$g<ll.rowspan;$g++){const If=zn+$g,Xm=ud+wh,pi=Rl(If,Xm);z[pi]=Bd,on=Math.max(on,Xm+1)}zc.push(Bd)}),Pt++,re.push(kt(sc.element,zc,sc.section)),zn++});const{columns:Kr,colgroups:br}=Vo(Po).map(sc=>{const zc=Ma(sc);return{colgroups:[_o(sc.element,ot(zc))],columns:zc}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Ge(Pt,on),access:z,all:re,columns:Kr,colgroups:br}},tn={fromTable:N=>{const z=zt(N);return Xo(z)},generate:Xo,getAt:Oo,findItem:Si,filterItems:rl,justCells:N=>De(N.all,z=>z.cells),justColumns:N=>ot(N.columns),hasColumns:N=>Gt(N.columns).length>0,getColumnAt:(N,z)=>ce.from(N.columns[z])};var bs=tinymce.util.Tools.resolve("tinymce.util.Tools");const Gi=(N,z,re)=>{const we=N.select("td,th",z);let je;for(let Pt=0;Pt<we.length;Pt++){const on=N.getStyle(we[Pt],re);if(ns(je)&&(je=on),je!==on)return""}return je},Pi=(N,z,re)=>{bs.each("left center right".split(" "),we=>{we!==re&&N.formatter.remove("align"+we,{},z)}),re&&N.formatter.apply("align"+re,{},z)},ja=(N,z,re)=>{bs.each("top middle bottom".split(" "),we=>{we!==re&&N.formatter.remove("valign"+we,{},z)}),re&&N.formatter.apply("valign"+re,{},z)},pe=(N,z,re)=>{N.dispatch("TableModified",{...re,table:z})},Se=(N,z)=>gi(N).getOr(z),at=(N,z,re)=>Se(Ci(N,z),re),Et=(N,z,re,we)=>{const je=at(N,`padding-${re}`,0),Pt=at(N,`padding-${we}`,0),on=at(N,`border-${re}-width`,0),zn=at(N,`border-${we}-width`,0);return z-je-Pt-on-zn},ro=(N,z)=>{const re=N.dom,we=re.getBoundingClientRect().width||re.offsetWidth;return z==="border-box"?we:Et(N,we,"left","right")},Jo=N=>ro(N,"content-box");var fr=tinymce.util.Tools.resolve("tinymce.Env");const na="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",ei=dt(5,N=>{const z=`${N+1}px`;return{title:z,value:z}}),$a=wt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],N=>({title:N,value:N.toLowerCase()})),oa="100%",fa=N=>{var z;const re=N.dom,we=(z=re.getParent(N.selection.getStart(),re.isBlock))!==null&&z!==void 0?z:N.getBody();return Jo(qn.fromDom(we))+"px"},Mr=(N,z)=>Eu(N)||!Dl(N)?z:Md(N)?{...z,width:fa(N)}:{...z,width:oa},Pa=(N,z)=>Eu(N)||Dl(N)?z:Md(N)?{...z,width:fa(N)}:{...z,width:oa},Fr=N=>z=>z.options.get(N),Nr=N=>{const z=N.options.register;z("table_border_widths",{processor:"object[]",default:ei}),z("table_border_styles",{processor:"object[]",default:$a}),z("table_cell_advtab",{processor:"boolean",default:!0}),z("table_row_advtab",{processor:"boolean",default:!0}),z("table_advtab",{processor:"boolean",default:!0}),z("table_appearance_options",{processor:"boolean",default:!0}),z("table_grid",{processor:"boolean",default:!fr.deviceType.isTouch()}),z("table_cell_class_list",{processor:"object[]",default:[]}),z("table_row_class_list",{processor:"object[]",default:[]}),z("table_class_list",{processor:"object[]",default:[]}),z("table_toolbar",{processor:"string",default:na}),z("table_background_color_map",{processor:"object[]",default:[]}),z("table_border_color_map",{processor:"object[]",default:[]})},er=Fr("table_sizing_mode"),$l=Fr("table_border_widths"),Lc=Fr("table_border_styles"),zl=Fr("table_cell_advtab"),tu=Fr("table_row_advtab"),nu=Fr("table_advtab"),Ec=Fr("table_appearance_options"),_c=Fr("table_grid"),Dl=Fr("table_style_by_css"),qi=Fr("table_cell_class_list"),jh=Fr("table_row_class_list"),oc=Fr("table_class_list"),mh=Fr("table_toolbar"),Tu=Fr("table_background_color_map"),ph=Fr("table_border_color_map"),Md=N=>er(N)==="fixed",Eu=N=>er(N)==="responsive",Pd=N=>{const z=N.options,re=z.get("table_default_styles");return z.isSet("table_default_styles")?re:Mr(N,re)},bh=N=>{const z=N.options,re=z.get("table_default_attributes");return z.isSet("table_default_attributes")?re:Pa(N,re)},fc=(N,z)=>z.column>=N.startCol&&z.column+z.colspan-1<=N.finishCol&&z.row>=N.startRow&&z.row+z.rowspan-1<=N.finishRow,Zh=(N,z)=>{let re=!0;const we=oe(fc,z);for(let je=z.startRow;je<=z.finishRow;je++)for(let Pt=z.startCol;Pt<=z.finishCol;Pt++)re=re&&tn.getAt(N,je,Pt).exists(we);return re?ce.some(z):ce.none()},$e=(N,z)=>Ps(Math.min(N.row,z.row),Math.min(N.column,z.column),Math.max(N.row+N.rowspan-1,z.row+z.rowspan-1),Math.max(N.column+N.colspan-1,z.column+z.colspan-1)),ou=(N,z,re)=>{const we=tn.findItem(N,z,uo),je=tn.findItem(N,re,uo);return we.bind(Pt=>je.map(on=>$e(Pt,on)))},Ml=(N,z,re)=>ou(N,z,re).bind(we=>Zh(N,we)),Gh=(N,z,re)=>{const we=Ng(N);return Ml(we,z,re)},Ng=tn.fromTable,Nc=(N,z)=>{hr(N).each(we=>{we.dom.insertBefore(z.dom,N.dom)})},rs=(N,z)=>{Ol(N).fold(()=>{hr(N).each(je=>{fi(je,z)})},we=>{Nc(we,z)})},Li=(N,z)=>{mr(N).fold(()=>{fi(N,z)},we=>{N.dom.insertBefore(z.dom,we.dom)})},fi=(N,z)=>{N.dom.appendChild(z.dom)},Ic=(N,z)=>{Nc(N,z),fi(z,N)},vh=(N,z)=>{te(z,(re,we)=>{const je=we===0?N:z[we-1];rs(je,re)})},Ju=(N,z)=>{te(z,re=>{fi(N,re)})},Za=N=>{const z=N.dom;z.parentNode!==null&&z.parentNode.removeChild(z)},Qu=N=>{const z=Ds(N);z.length>0&&vh(N,z),Za(N)},ed=((N,z)=>{const re=Pt=>{if(!N(Pt))throw new Error("Can only get "+z+" value of a "+z+" node");return we(Pt).getOr("")},we=Pt=>N(Pt)?ce.from(Pt.dom.nodeValue):ce.none();return{get:re,getOption:we,set:(Pt,on)=>{if(!N(Pt))throw new Error("Can only set raw "+z+" value of a "+z+" node");Pt.dom.nodeValue=on}}})(Xa,"text"),Fc=N=>ed.get(N),Ni=(N,z)=>ed.set(N,z);var qh=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],td=()=>{const N=ts=>qn.fromDom(ts.dom.cloneNode(!1)),z=ts=>Qn(ts).dom,re=ts=>Fa(ts)?Yt(ts)==="body"?!0:Ht(qh,Yt(ts)):!1,we=ts=>Fa(ts)?Ht(["br","img","hr","input"],Yt(ts)):!1,je=ts=>Fa(ts)&&_a(ts,"contenteditable")==="false",Pt=(ts,Kr)=>ts.dom.compareDocumentPosition(Kr.dom),on=(ts,Kr)=>{const br=pr(ts);ss(Kr,br)},zn=ts=>{const Kr=Yt(ts);return Ht(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Kr)},Po=ts=>Fa(ts)?xa(ts,"lang"):ce.none();return{up:Bt({selector:To,closest:Eo,predicate:ft,all:Ta}),down:Bt({selector:Ja,predicate:Ys}),styles:Bt({get:Ci,getRaw:Ba,set:tc,remove:ta}),attrs:Bt({get:_a,set:ls,remove:ea,copyTo:on}),insert:Bt({before:Nc,after:rs,afterAll:vh,append:fi,appendAll:Ju,prepend:Li,wrap:Ic}),remove:Bt({unwrap:Qu,remove:Za}),create:Bt({nu:qn.fromTag,clone:N,text:qn.fromText}),query:Bt({comparePosition:Pt,prevSibling:vl,nextSibling:Ol}),property:Bt({children:Ds,name:Yt,parent:hr,document:z,isText:Xa,isComment:Zr,isElement:Fa,isSpecial:zn,getLanguage:Po,getText:Fc,setText:Ni,isBoundary:re,isEmptyTag:we,isNonEditable:je}),eq:uo,is:Ri}};const li=(N,z,re,we)=>{const je=re[0],Pt=re.slice(1);return we(N,z,je,Pt)},wl=(N,z,re)=>re.length>0?li(N,z,re,Ki):ce.none(),Ki=(N,z,re,we)=>{const je=z(N,re);return ms(we,(Pt,on)=>{const zn=z(N,on);return _u(N,Pt,zn)},je)},_u=(N,z,re)=>z.bind(we=>re.filter(oe(N.eq,we))),nd=wl,Kh=td(),su=(N,z)=>nd(Kh,(re,we)=>N(we),z),Vl=N=>To(N,"table"),od=(N,z)=>{const re=Ja(N,z);return re.length>0?ce.some(re):ce.none()},Ig=(N,z,re)=>Xe(N,z).bind(we=>Xe(N,re).bind(je=>su(Vl,[we,je]).map(Pt=>({first:we,last:je,table:Pt})))),Jh=(N,z)=>od(N,z),Fg=(N,z,re)=>Ig(N,z,re).bind(we=>{const je=Po=>uo(N,Po),Pt="thead,tfoot,tbody,table",on=To(we.first,Pt,je),zn=To(we.last,Pt,je);return on.bind(Po=>zn.bind(ts=>uo(Po,ts)?Gh(we.table,we.first,we.last):ce.none()))}),Qh=N=>wt(N,qn.fromDom),sd="data-mce-selected",ru="td["+sd+"],th["+sd+"]",Ld="data-mce-first-selected",Br="td["+Ld+"],th["+Ld+"]",Hr="data-mce-last-selected",Bc="td["+Hr+"],th["+Hr+"]",Wl={selected:sd,selectedSelector:ru,firstSelected:Ld,firstSelectedSelector:Br,lastSelected:Hr,lastSelectedSelector:Bc},Nd=N=>st(N).bind(z=>Jh(z,Wl.firstSelectedSelector)).fold(Bt(N),z=>z[0]),La=N=>(z,re)=>{const we=Yt(z),je=we==="col"||we==="colgroup"?Nd(z):z;return Eo(je,N,re)},to=La("th,td,caption"),Oc=La("th,td"),rd=N=>Qh(N.model.table.getSelectedCells()),Pl=(N,z)=>{const re=Oc(N),we=re.bind(je=>st(je)).map(je=>Mt(je));return Fs(re,we,(je,Pt)=>Un(Pt,on=>Gn(Qh(on.dom.cells),zn=>_a(zn,z)==="1"||uo(zn,je)))).getOr([])},zs=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Hc=N=>({value:C(N)}),ad=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,id=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,eg=N=>ad.test(N)||id.test(N),C=N=>Qa(N,"#").toUpperCase(),o=N=>eg(N)?ce.some({value:C(N)}):ce.none(),a=N=>{const z=N.toString(16);return(z.length===1?"0"+z:z).toUpperCase()},c=N=>{const z=a(N.red)+a(N.green)+a(N.blue);return Hc(z)},d=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,m=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,b=(N,z,re,we)=>({red:N,green:z,blue:re,alpha:we}),w=(N,z,re,we)=>{const je=parseInt(N,10),Pt=parseInt(z,10),on=parseInt(re,10),zn=parseFloat(we);return b(je,Pt,on,zn)},A=N=>{const z=d.exec(N);if(z!==null)return ce.some(w(z[1],z[2],z[3],"1"));const re=m.exec(N);return re!==null?ce.some(w(re[1],re[2],re[3],re[4])):ce.none()},E=N=>o(N).orThunk(()=>A(N).map(c)).getOrThunk(()=>{const z=document.createElement("canvas");z.height=1,z.width=1;const re=z.getContext("2d");re.clearRect(0,0,z.width,z.height),re.fillStyle="#FFFFFF",re.fillStyle=N,re.fillRect(0,0,1,1);const we=re.getImageData(0,0,1,1).data,je=we[0],Pt=we[1],on=we[2],zn=we[3];return c(b(je,Pt,on,zn))}),M=N=>A(N).map(c).map(z=>"#"+z.value).getOr(N),O=N=>{let z=N;return{get:()=>z,set:je=>{z=je}}},L=N=>{const z=O(ce.none()),re=()=>z.get().each(N);return{clear:()=>{re(),z.set(ce.none())},isSet:()=>z.get().isSome(),get:()=>z.get(),set:zn=>{re(),z.set(ce.some(zn))}}},$=()=>L(N=>N.unbind()),Y=(N,z,re)=>we=>{const je=$(),Pt=Ql(re),on=()=>{const zn=rd(N),Po=ts=>N.formatter.match(z,{value:re},ts.dom,Pt);Pt?(we.setActive(!Gn(zn,Po)),je.set(N.formatter.formatChanged(z,ts=>we.setActive(!ts),!0))):(we.setActive(Xn(zn,Po)),je.set(N.formatter.formatChanged(z,we.setActive,!1,{value:re})))};return N.initialized?on():N.on("init",on),je.clear},U=N=>Ao(N,"menu"),ne=N=>wt(N,z=>{const re=z.text||z.title||"";return U(z)?{text:re,items:ne(z.menu)}:{text:re,value:z.value}}),ae=N=>N.length?ce.some(ne([{text:"Select...",value:"mce-no-match"},...N])):ce.none(),le=(N,z,re,we)=>wt(z,je=>{const Pt=je.text||je.title;return U(je)?{type:"nestedmenuitem",text:Pt,getSubmenuItems:()=>le(N,je.menu,re,we)}:{text:Pt,type:"togglemenuitem",onAction:()=>we(je.value),onSetup:Y(N,re,je.value)}}),me=(N,z)=>re=>{N.execCommand("mceTableApplyCellStyle",!1,{[z]:re})},Oe=N=>De(N,z=>U(z)?[{...z,menu:Oe(z.menu)}]:ii(z.value)?[z]:[]),Te=(N,z,re,we)=>je=>je(le(N,z,re,we)),Ve=(N,z,re)=>{const we=wt(z,je=>({text:je.title,value:"#"+E(je.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:we.length>0?we:void 0,allowCustomColors:!1},onAction:je=>{const Pt=je.value==="remove"?"":je.value;N.execCommand("mceTableApplyCellStyle",!1,{[re]:Pt})}}]},ve=N=>()=>{const re=N.queryCommandValue("mceTableRowType")==="header"?"body":"header";N.execCommand("mceTableRowType",!1,{type:re})},Pe=N=>()=>{const re=N.queryCommandValue("mceTableColType")==="th"?"td":"th";N.execCommand("mceTableColType",!1,{type:re})},ht=N=>ae(qi(N)).map(z=>({name:"class",type:"listbox",label:"Class",items:z})),P=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:zs}],W=N=>P.concat(ht(N).toArray()),q=(N,z)=>{const we=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ne(Lc(N)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:z==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(we):we}},ye={normal:(N,z)=>{const re=N.dom;return{setAttrib:(on,zn)=>{re.setAttrib(z,on,zn)},setStyle:(on,zn)=>{re.setStyle(z,on,zn)},setFormat:(on,zn)=>{zn===""?N.formatter.remove(on,{value:null},z,!0):N.formatter.apply(on,{value:zn},z)}}}},nt=Dr("th"),Ft=(N,z)=>N&&z?"sectionCells":N?"section":"cells",an=N=>{const z=N.section==="thead",re=eu(hn(N.cells),"th");return N.section==="tfoot"?{type:"footer"}:z||re?{type:"header",subType:Ft(z,re)}:{type:"body"}},hn=N=>{const z=Un(N,re=>nt(re.element));return z.length===0?ce.some("td"):z.length===N.length?ce.some("th"):ce.none()},Jt=N=>{const z=wt(N,je=>an(je).type),re=Ht(z,"header"),we=Ht(z,"footer");if(!re&&!we)return ce.some("body");{const je=Ht(z,"body");return re&&!je&&!we?ce.some("header"):!re&&!je&&we?ce.some("footer"):ce.none()}},wo=N=>{let z=!1,re;return(...we)=>(z||(z=!0,re=N.apply(null,we)),re)},Ro=(N,z)=>Cr(N.all,re=>Ie(re.cells,we=>uo(z,we.element))),sr=(N,z,re)=>{const we=wt(z.selection,Pt=>Q(Pt).bind(on=>Ro(N,on)).filter(re)),je=ji(we);return Ra(je.length>0,je)},qr=(N,z)=>z.mergable,$r=(N,z)=>z.unmergable,Ii=(N,z)=>sr(N,z,jt),Vs=(N,z)=>Ro(N,z).exists(re=>!re.isLocked),Ar=(N,z)=>Xn(z,re=>Vs(N,re)),ma=(N,z)=>qr(N,z).filter(re=>Ar(N,re.cells)),al=(N,z)=>$r(N,z).filter(re=>Ar(N,re));({...{generate:N=>{if(!Ot(N))throw new Error("cases must be an array");if(N.length===0)throw new Error("there must be at least one case");const z=[],re={};return te(N,(we,je)=>{const Pt=Gt(we);if(Pt.length!==1)throw new Error("one and only one name per case");const on=Pt[0],zn=we[on];if(re[on]!==void 0)throw new Error("duplicate key detected:"+on);if(on==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ot(zn))throw new Error("case arguments must be an array");z.push(on),re[on]=(...Po)=>{const ts=Po.length;if(ts!==zn.length)throw new Error("Wrong number of arguments to case "+on+". Expected "+zn.length+" ("+zn+"), got "+ts);return{fold:(...br)=>{if(br.length!==N.length)throw new Error("Wrong number of arguments to fold. Expected "+N.length+", got "+br.length);return br[je].apply(null,Po)},match:br=>{const pa=Gt(br);if(z.length!==pa.length)throw new Error("Wrong number of arguments to match. Expected: "+z.join(",")+`
Actual: `+pa.join(","));if(!Xn(z,zc=>Ht(pa,zc)))throw new Error("Not all branches were specified when using match. Specified: "+pa.join(", ")+`
Required: `+z.join(", "));return br[on].apply(null,Po)},log:br=>{console.log(br,{constructors:z,constructor:on,params:Po})}}}}),re}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const mi=(N,z)=>{const re=tn.fromTable(N);return Ii(re,z).bind(je=>{const Pt=je[je.length-1],on=je[0].row,zn=Pt.row+Pt.rowspan,Po=re.all.slice(on,zn);return Jt(Po)}).getOr("")},fo=N=>ai(N,"rgb")?M(N):N,Rc=N=>{const z=qn.fromDom(N);return{borderwidth:Ba(z,"border-width").getOr(""),borderstyle:Ba(z,"border-style").getOr(""),bordercolor:Ba(z,"border-color").map(fo).getOr(""),backgroundcolor:Ba(z,"background-color").map(fo).getOr("")}},fb=N=>{const z=N[0],re=N.slice(1);return te(re,we=>{te(Gt(z),je=>{no(we,(Pt,on)=>{const zn=z[je];zn!==""&&je===on&&zn!==Pt&&(z[je]=je==="class"?"mce-no-match":"")})})}),z},$m=(N,z,re,we)=>Ie(N,je=>!ns(re.formatter.matchNode(we,z+je))).getOr(""),tg=oe($m,["left","center","right"],"align"),mb=oe($m,["top","middle","bottom"],"valign"),au=(N,z)=>{const re=Pd(N),we=bh(N),je=()=>({borderstyle:Zn(re,"border-style").getOr(""),bordercolor:fo(Zn(re,"border-color").getOr("")),backgroundcolor:fo(Zn(re,"background-color").getOr(""))}),Pt={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},on=()=>{const Kr=re["border-width"];return Dl(N)&&Kr?{border:Kr}:Zn(we,"border").fold(()=>({}),br=>({border:br}))},zn=z?je():{},Po=()=>{const Kr=Zn(re,"border-spacing").or(Zn(we,"cellspacing")).fold(()=>({}),pa=>({cellspacing:pa})),br=Zn(re,"border-padding").or(Zn(we,"cellpadding")).fold(()=>({}),pa=>({cellpadding:pa}));return{...Kr,...br}};return{...Pt,...re,...we,...zn,...on(),...Po()}},ld=N=>st(qn.fromDom(N)).map(z=>{const re={selection:Qh(N.cells)};return mi(z,re)}).getOr(""),ng=(N,z,re)=>{const we=(zn,Po)=>{const ts=Ba(qn.fromDom(Po),"border-width");return Dl(N)&&ts.isSome()?ts.getOr(""):zn.getAttrib(Po,"border")||Gi(N.dom,Po,"border-width")||Gi(N.dom,Po,"border")||""},je=N.dom,Pt=Dl(N)?je.getStyle(z,"border-spacing")||je.getAttrib(z,"cellspacing"):je.getAttrib(z,"cellspacing")||je.getStyle(z,"border-spacing"),on=Dl(N)?Gi(je,z,"padding")||je.getAttrib(z,"cellpadding"):je.getAttrib(z,"cellpadding")||Gi(je,z,"padding");return{width:je.getStyle(z,"width")||je.getAttrib(z,"width"),height:je.getStyle(z,"height")||je.getAttrib(z,"height"),cellspacing:Pt??"",cellpadding:on??"",border:we(je,z),caption:!!je.select("caption",z)[0],class:je.getAttrib(z,"class",""),align:tg(N,z),...re?Rc(z):{}}},An=(N,z,re)=>{const we=N.dom;return{height:we.getStyle(z,"height")||we.getAttrib(z,"height"),class:we.getAttrib(z,"class",""),type:ld(z),align:tg(N,z),...re?Rc(z):{}}},iu=(N,z,re,we)=>{const je=N.dom,Pt=we.getOr(z);return{width:((zn,Po)=>je.getStyle(zn,Po)||je.getAttrib(zn,Po))(Pt,"width"),scope:je.getAttrib(z,"scope"),celltype:Vt(z),class:je.getAttrib(z,"class",""),halign:tg(N,z),valign:mb(N,z),...re?Rc(z):{}}},zm=(N,z)=>{const re=tn.fromTable(N),we=tn.justCells(re),je=Un(we,Pt=>Gn(z,on=>uo(Pt.element,on)));return wt(je,Pt=>({element:Pt.element.dom,column:tn.getColumnAt(re,Pt.column).map(on=>on.element.dom)}))},Bg=(N,z,re,we)=>{we("scope")&&N.setAttrib("scope",re.scope),we("class")&&re.class!=="mce-no-match"&&N.setAttrib("class",re.class),we("width")&&z.setStyle("width",Mn(re.width))},lu=(N,z,re)=>{re("backgroundcolor")&&N.setFormat("tablecellbackgroundcolor",z.backgroundcolor),re("bordercolor")&&N.setFormat("tablecellbordercolor",z.bordercolor),re("borderstyle")&&N.setFormat("tablecellborderstyle",z.borderstyle),re("borderwidth")&&N.setFormat("tablecellborderwidth",Mn(z.borderwidth))},Rf=(N,z,re,we)=>{const je=z.length===1;te(z,Pt=>{const on=Pt.element,zn=je?jt:we,Po=ye.normal(N,on),ts=Pt.column.map(Kr=>ye.normal(N,Kr)).getOr(Po);Bg(Po,ts,re,zn),zl(N)&&lu(Po,re,zn),we("halign")&&Pi(N,on,re.halign),we("valign")&&ja(N,on,re.valign)})},og=(N,z)=>{N.execCommand("mceTableCellType",!1,{type:z.celltype,no_events:!0})},Id=(N,z,re,we)=>{const je=Qo(we,(Pt,on)=>re[on]!==Pt);V(je)>0&&z.length>=1&&st(z[0]).each(Pt=>{const on=zm(Pt,z),zn=V(Qo(je,(ts,Kr)=>Kr!=="scope"&&Kr!=="celltype"))>0,Po=Dt(je,"celltype");(zn||Dt(je,"scope"))&&Rf(N,on,we,oe(Dt,je)),Po&&og(N,we),pe(N,Pt.dom,{structure:Po,style:zn})})},Df=(N,z,re,we)=>{const je=we.getData();we.close(),N.undoManager.transact(()=>{Id(N,z,re,je),N.focus()})},Ou=(N,z)=>{const re=st(z[0]).map(we=>wt(zm(we,z),je=>iu(N,je.element,zl(N),je.column)));return fb(re.getOrDie())},l0=N=>{const z=rd(N);if(z.length===0)return;const re=Ou(N,z),we={type:"tabpanel",tabs:[{title:"General",name:"general",items:W(N)},q(N,"cell")]},je={type:"panel",items:[{type:"grid",columns:2,items:W(N)}]};N.windowManager.open({title:"Cell Properties",size:"normal",body:zl(N)?we:je,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:re,onSubmit:oe(Df,N,z,re)})},ka=N=>ae(jh(N)).map(z=>({name:"class",type:"listbox",label:"Class",items:z})),qt=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Ul=N=>qt.concat(ka(N).toArray()),sg=(N,z,re)=>{re("class")&&z.class!=="mce-no-match"&&N.setAttrib("class",z.class),re("height")&&N.setStyle("height",Mn(z.height))},Ga=(N,z,re)=>{re("backgroundcolor")&&N.setStyle("background-color",z.backgroundcolor),re("bordercolor")&&N.setStyle("border-color",z.bordercolor),re("borderstyle")&&N.setStyle("border-style",z.borderstyle)},Hg=(N,z,re,we)=>{const Pt=z.length===1?jt:we;te(z,on=>{const zn=hi(qn.fromDom(on),"td,th"),Po=ye.normal(N,on);sg(Po,re,Pt),tu(N)&&Ga(Po,re,Pt),we("height")&&te(zn,ts=>{N.dom.setStyle(ts.dom,"height",null)}),we("align")&&Pi(N,on,re.align)})},Fi=(N,z)=>{N.execCommand("mceTableRowType",!1,{type:z.type,no_events:!0})},rr=(N,z,re,we)=>{const je=Qo(we,(Pt,on)=>re[on]!==Pt);if(V(je)>0){const Pt=Dt(je,"type"),on=Pt?V(je)>1:!0;on&&Hg(N,z,we,oe(Dt,je)),Pt&&Fi(N,we),st(qn.fromDom(z[0])).each(zn=>pe(N,zn.dom,{structure:Pt,style:on}))}},Mf=(N,z,re,we)=>{const je=we.getData();we.close(),N.undoManager.transact(()=>{rr(N,z,re,je),N.focus()})},Lt=N=>{const z=Pl(eo(N),Wl.selected);if(z.length===0)return;const re=wt(z,on=>An(N,on.dom,tu(N))),we=fb(re),je={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ul(N)},q(N,"row")]},Pt={type:"panel",items:[{type:"grid",columns:2,items:Ul(N)}]};N.windowManager.open({title:"Row Properties",size:"normal",body:tu(N)?je:Pt,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:we,onSubmit:oe(Mf,N,wt(z,on=>on.dom),we)})},ar=(N,z,re)=>{const we=re?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],je=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Pt=Ec(N)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],on=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],zn=z.length>0?[{name:"class",type:"listbox",label:"Class",items:z}]:[];return we.concat(je).concat(Pt).concat(on).concat(zn)},Pf=(N,z,re,we)=>{if(z.tagName==="TD"||z.tagName==="TH")Fo(re)&&fs(we)?N.setStyle(z,re,we):N.setStyles(z,re);else if(z.children)for(let je=0;je<z.children.length;je++)Pf(N,z.children[je],re,we)},ki=(N,z,re,we)=>{const je=N.dom,Pt={},on={},zn=Dl(N),Po=nu(N),ts=parseFloat(re.border)===0;if(!ns(re.class)&&re.class!=="mce-no-match"&&(Pt.class=re.class),on.height=Mn(re.height),zn?on.width=Mn(re.width):je.getAttrib(z,"width")&&(Pt.width=$n(re.width)),zn?(ts?(Pt.border=0,on["border-width"]=""):(on["border-width"]=Mn(re.border),Pt.border=1),on["border-spacing"]=Mn(re.cellspacing)):(Pt.border=ts?0:re.border,Pt.cellpadding=re.cellpadding,Pt.cellspacing=re.cellspacing),zn&&z.children){const Kr={};if(ts?Kr["border-width"]="":we.border&&(Kr["border-width"]=Mn(re.border)),we.cellpadding&&(Kr.padding=Mn(re.cellpadding)),Po&&we.bordercolor&&(Kr["border-color"]=re.bordercolor),!Rn(Kr))for(let br=0;br<z.children.length;br++)Pf(je,z.children[br],Kr)}if(Po){const Kr=re;on["background-color"]=Kr.backgroundcolor,on["border-color"]=Kr.bordercolor,on["border-style"]=Kr.borderstyle}je.setStyles(z,{...Pd(N),...on}),je.setAttribs(z,{...bh(N),...Pt})},Cl=(N,z,re,we)=>{const je=N.dom,Pt=we.getData(),on=Qo(Pt,(zn,Po)=>re[Po]!==zn);we.close(),N.undoManager.transact(()=>{if(!z){const zn=wi(Pt.cols).getOr(1),Po=wi(Pt.rows).getOr(1);N.execCommand("mceInsertTable",!1,{rows:Po,columns:zn}),z=Oc(eo(N),Hn(N)).bind(ts=>st(ts,Hn(N))).map(ts=>ts.dom).getOrDie()}if(V(on)>0){const zn={border:Dt(on,"border"),bordercolor:Dt(on,"bordercolor"),cellpadding:Dt(on,"cellpadding")};ki(N,z,Pt,zn);const Po=je.select("caption",z)[0];(Po&&!Pt.caption||!Po&&Pt.caption)&&N.execCommand("mceTableToggleCaption"),Pi(N,z,Pt.align)}if(N.focus(),N.addVisual(),V(on)>0){const zn=Dt(on,"caption"),Po=zn?V(on)>1:!0;pe(N,z,{structure:zn,style:Po})}})},$c=(N,z)=>{const re=N.dom;let we,je=au(N,nu(N));z?(je.cols="1",je.rows="1",nu(N)&&(je.borderstyle="",je.bordercolor="",je.backgroundcolor="")):(we=re.getParent(N.selection.getStart(),"table",N.getBody()),we?je=ng(N,we,nu(N)):nu(N)&&(je.borderstyle="",je.bordercolor="",je.backgroundcolor=""));const Pt=ae(oc(N));Pt.isSome()&&je.class&&(je.class=je.class.replace(/\s*mce\-item\-table\s*/g,""));const on={type:"grid",columns:2,items:ar(N,Pt.getOr([]),z)},zn=()=>({type:"panel",items:[on]}),Po=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[on]},q(N,"table")]}),ts=nu(N)?Po():zn();N.windowManager.open({title:"Table Properties",size:"normal",body:ts,onSubmit:oe(Cl,N,we,je),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:je})},pb=N=>{const z=re=>{ps(eo(N))&&re()};no({mceTableProps:oe($c,N,!1),mceTableRowProps:oe(Lt,N),mceTableCellProps:oe(l0,N),mceInsertTableDialog:oe($c,N,!0)},(re,we)=>N.addCommand(we,()=>z(re)))},xh=(N,z)=>Sr(N,z).isSome(),bb=vo,Dc=N=>{const z=(we,je)=>xa(we,je).exists(Pt=>parseInt(Pt,10)>1),re=we=>z(we,"rowspan")||z(we,"colspan");return N.length>0&&Xn(N,re)?ce.some(N):ce.none()},tr=(N,z,re)=>z.length<=1?ce.none():Fg(N,re.firstSelectedSelector,re.lastSelectedSelector).map(we=>({bounds:we,cells:z})),cd=N=>({element:N,mergable:ce.none(),unmergable:ce.none(),selection:[N]}),Lf=(N,z,re)=>({element:re,mergable:tr(z,N,Wl),unmergable:Dc(N),selection:bb(N)}),Ai=N=>{const z=O(ce.none()),re=O([]);let we=ce.none();const je=Dr("caption"),Pt=Zs=>we.forall(wa=>!wa[Zs]),on=()=>to(eo(N),Hn(N)),zn=()=>to(co(N),Hn(N)),Po=()=>on().bind(Zs=>Oa(Fs(st(Zs),zn().bind(st),(wa,Na)=>uo(wa,Na)?je(Zs)?ce.some(cd(Zs)):ce.some(Lf(rd(N),wa,Zs)):ce.none()))),ts=Zs=>st(Zs.element).map(Na=>{const Xl=tn.fromTable(Na),Ym=Ii(Xl,Zs).getOr([]),jm=Ka(Ym,(bc,vc)=>(vc.isLocked&&(bc.onAny=!0,vc.column===0?bc.onFirst=!0:vc.column+vc.colspan>=Xl.grid.columns&&(bc.onLast=!0)),bc),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ma(Xl,Zs).isSome(),unmergeable:al(Xl,Zs).isSome(),locked:jm}}),Kr=()=>{z.set(wo(Po)()),we=z.get().bind(ts),te(re.get(),Wt)},br=Zs=>(Zs(),re.set(re.get().concat([Zs])),()=>{re.set(Un(re.get(),wa=>wa!==Zs))}),pa=(Zs,wa)=>br(()=>z.get().fold(()=>{Zs.setEnabled(!1)},Na=>{Zs.setEnabled(!wa(Na)&&N.selection.isEditable())})),sc=(Zs,wa,Na)=>br(()=>z.get().fold(()=>{Zs.setEnabled(!1),Zs.setActive(!1)},Xl=>{Zs.setEnabled(!wa(Xl)&&N.selection.isEditable()),Zs.setActive(Na(Xl))})),zc=Zs=>we.exists(wa=>wa.locked[Zs]),ll=Zs=>pa(Zs,wa=>!1),ud=Zs=>pa(Zs,wa=>je(wa.element)),Fd=Zs=>wa=>pa(wa,Na=>je(Na.element)||zc(Zs)),Bd=Zs=>wa=>pa(wa,Na=>je(Na.element)||Zs().isNone()),wh=(Zs,wa)=>Na=>pa(Na,Xl=>je(Xl.element)||Zs().isNone()||zc(wa)),$g=Zs=>pa(Zs,wa=>Pt("mergeable")),If=Zs=>pa(Zs,wa=>Pt("unmergeable")),Xm=Zs=>sc(Zs,Yo,wa=>st(wa.element,Hn(N)).exists(Xl=>xh(Xl,"caption"))),pi=(Zs,wa)=>Na=>sc(Na,Xl=>je(Xl.element),()=>N.queryCommandValue(Zs)===wa),Du=pi("mceTableRowType","header"),Ch=pi("mceTableColType","th");return N.on("NodeChange ExecCommand TableSelectorChange",Kr),{onSetupTable:ll,onSetupCellOrRow:ud,onSetupColumn:Fd,onSetupPasteable:Bd,onSetupPasteableColumn:wh,onSetupMergeable:$g,onSetupUnmergeable:If,resetTargets:Kr,onSetupTableWithCaption:Xm,onSetupTableRowHeaders:Du,onSetupTableColumnHeaders:Ch,targets:z.get}};var Vm=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ru="x-tinymce/dom-table-",Nf=Ru+"rows",Bi=Ru+"columns",Sl=N=>{var z;const re=(z=Vm.read())!==null&&z!==void 0?z:[];return Cr(re,we=>ce.from(we.getType(N)))},rt=()=>Sl(Nf),Ir=()=>Sl(Bi),Wm=N=>z=>{const re=()=>{z.setEnabled(N.selection.isEditable())};return N.on("NodeChange",re),re(),()=>{N.off("NodeChange",re)}},ti=(N,z)=>{N.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Wm(N),fetch:zn=>zn("inserttable | cell row column | advtablesort | tableprops deletetable")});const re=zn=>()=>N.execCommand(zn),we=(zn,Po)=>{N.queryCommandSupported(Po.command)&&N.ui.registry.addButton(zn,{...Po,onAction:Tt(Po.onAction)?Po.onAction:re(Po.command)})},je=(zn,Po)=>{N.queryCommandSupported(Po.command)&&N.ui.registry.addToggleButton(zn,{...Po,onAction:Tt(Po.onAction)?Po.onAction:re(Po.command)})};we("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:z.onSetupTable}),we("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:z.onSetupTable}),we("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:z.onSetupCellOrRow}),we("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:z.onSetupMergeable}),we("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:z.onSetupUnmergeable}),we("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:z.onSetupCellOrRow}),we("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:z.onSetupCellOrRow}),we("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:z.onSetupCellOrRow}),we("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:z.onSetupCellOrRow}),we("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:z.onSetupColumn("onFirst")}),we("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:z.onSetupColumn("onLast")}),we("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:z.onSetupColumn("onAny")}),we("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:z.onSetupCellOrRow}),we("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:z.onSetupCellOrRow}),we("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:z.onSetupPasteable(rt)}),we("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:z.onSetupPasteable(rt)}),we("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:z.onSetupColumn("onAny")}),we("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:z.onSetupColumn("onAny")}),we("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:z.onSetupPasteableColumn(Ir,"onFirst")}),we("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:z.onSetupPasteableColumn(Ir,"onLast")}),we("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Wm(N)});const Pt=Oe(oc(N));Pt.length!==0&&N.queryCommandSupported("mceTableToggleClass")&&N.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Te(N,Pt,"tableclass",zn=>N.execCommand("mceTableToggleClass",!1,zn)),onSetup:z.onSetupTable});const on=Oe(qi(N));on.length!==0&&N.queryCommandSupported("mceTableCellToggleClass")&&N.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Te(N,on,"tablecellclass",zn=>N.execCommand("mceTableCellToggleClass",!1,zn)),onSetup:z.onSetupCellOrRow}),N.queryCommandSupported("mceTableApplyCellStyle")&&(N.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Te(N,zs,"tablecellverticalalign",me(N,"vertical-align")),onSetup:z.onSetupCellOrRow}),N.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Te(N,$l(N),"tablecellborderwidth",me(N,"border-width")),onSetup:z.onSetupCellOrRow}),N.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Te(N,Lc(N),"tablecellborderstyle",me(N,"border-style")),onSetup:z.onSetupCellOrRow}),N.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:zn=>zn(Ve(N,Tu(N),"background-color")),onSetup:z.onSetupCellOrRow}),N.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:zn=>zn(Ve(N,ph(N),"border-color")),onSetup:z.onSetupCellOrRow})),je("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:z.onSetupTableWithCaption}),je("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ve(N),onSetup:z.onSetupTableRowHeaders}),je("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Pe(N),onSetup:z.onSetupTableColumnHeaders})},Ji=N=>{const z=we=>N.dom.is(we,"table")&&N.getBody().contains(we)&&N.dom.isEditable(we.parentNode),re=mh(N);re.length>0&&N.ui.registry.addContextToolbar("table",{predicate:z,items:re,scope:"node",position:"node"})},Ti=N=>z=>{const re=()=>{z.setEnabled(N.selection.isEditable())};return N.on("NodeChange",re),re(),()=>{N.off("NodeChange",re)}},sa=(N,z)=>{const re=br=>()=>N.execCommand(br),we=(br,pa)=>N.queryCommandSupported(pa.command)?(N.ui.registry.addMenuItem(br,{...pa,onAction:Tt(pa.onAction)?pa.onAction:re(pa.command)}),!0):!1,je=(br,pa)=>{N.queryCommandSupported(pa.command)&&N.ui.registry.addToggleMenuItem(br,{...pa,onAction:Tt(pa.onAction)?pa.onAction:re(pa.command)})},Pt=br=>{N.execCommand("mceInsertTable",!1,{rows:br.numRows,columns:br.numColumns})},on=[we("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:z.onSetupCellOrRow}),we("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:z.onSetupCellOrRow}),we("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:z.onSetupCellOrRow}),we("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:z.onSetupCellOrRow}),we("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:z.onSetupCellOrRow}),we("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:z.onSetupCellOrRow}),we("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:z.onSetupPasteable(rt)}),we("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:z.onSetupPasteable(rt)})],zn=[we("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:z.onSetupColumn("onFirst")}),we("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:z.onSetupColumn("onLast")}),we("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:z.onSetupColumn("onAny")}),we("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:z.onSetupColumn("onAny")}),we("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:z.onSetupColumn("onAny")}),we("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:z.onSetupPasteableColumn(Ir,"onFirst")}),we("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:z.onSetupPasteableColumn(Ir,"onLast")})],Po=[we("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:z.onSetupCellOrRow}),we("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:z.onSetupMergeable}),we("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:z.onSetupUnmergeable})];_c(N)?N.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Pt}],onSetup:Ti(N)}):N.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:re("mceInsertTableDialog"),onSetup:Ti(N)}),N.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:re("mceInsertTableDialog"),onSetup:Ti(N)}),we("tableprops",{text:"Table properties",onSetup:z.onSetupTable,command:"mceTableProps"}),we("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:z.onSetupTable,command:"mceTableDelete"}),Ht(on,!0)&&N.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Bt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),Ht(zn,!0)&&N.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Bt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),Ht(Po,!0)&&N.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Bt("tablecellprops tablemergecells tablesplitcells")}),N.ui.registry.addContextMenu("table",{update:()=>(z.resetTargets(),z.targets().fold(Bt(""),br=>Yt(br.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const ts=Oe(oc(N));ts.length!==0&&N.queryCommandSupported("mceTableToggleClass")&&N.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>le(N,ts,"tableclass",br=>N.execCommand("mceTableToggleClass",!1,br)),onSetup:z.onSetupTable});const Kr=Oe(qi(N));Kr.length!==0&&N.queryCommandSupported("mceTableCellToggleClass")&&N.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>le(N,Kr,"tablecellclass",br=>N.execCommand("mceTableCellToggleClass",!1,br)),onSetup:z.onSetupCellOrRow}),N.queryCommandSupported("mceTableApplyCellStyle")&&(N.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>le(N,zs,"tablecellverticalalign",me(N,"vertical-align")),onSetup:z.onSetupCellOrRow}),N.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>le(N,$l(N),"tablecellborderwidth",me(N,"border-width")),onSetup:z.onSetupCellOrRow}),N.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>le(N,Lc(N),"tablecellborderstyle",me(N,"border-style")),onSetup:z.onSetupCellOrRow}),N.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Ve(N,Tu(N),"background-color"),onSetup:z.onSetupCellOrRow}),N.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Ve(N,ph(N),"border-color"),onSetup:z.onSetupCellOrRow})),je("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:z.onSetupTableWithCaption}),je("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ve(N),onSetup:z.onSetupTableRowHeaders}),je("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Pe(N),onSetup:z.onSetupTableRowHeaders})},Um=N=>{const z=Ai(N);Nr(N),pb(N),sa(N,z),ti(N,z),Ji(N)};var yh=()=>{cs.add("table",Um)};yh()}()),SG}var AG;function _q(){return AG||(AG=1,Eq()),CG}_q();var TG={},EG={},_G;function Oq(){return _G||(_G=1,function(){var cs=tinymce.util.Tools.resolve("tinymce.PluginManager");const gn=(We=>Ie=>We===Ie)(null),ys=We=>We,rn=(We,Ie)=>{const Ze=We.length,De=new Array(Ze);for(let Xn=0;Xn<Ze;Xn++){const Mo=We[Xn];De[Xn]=Ie(Mo,Xn)}return De},Fo={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\uFEFF-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:"[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]"},Ot={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},lo=[new RegExp(Fo.aletter),new RegExp(Fo.midnumlet),new RegExp(Fo.midletter),new RegExp(Fo.midnum),new RegExp(Fo.numeric),new RegExp(Fo.cr),new RegExp(Fo.lf),new RegExp(Fo.newline),new RegExp(Fo.extend),new RegExp(Fo.format),new RegExp(Fo.katakana),new RegExp(Fo.extendnumlet),new RegExp("@")],ns="",Bo=new RegExp("^"+Fo.punctuation+"$"),fs=/^\s+$/,Tt=lo,Ln=Ot.OTHER,Lo=We=>{let Ie=Ln;const Ze=Tt.length;for(let De=0;De<Ze;++De){const Xn=Tt[De];if(Xn&&Xn.test(We)){Ie=De;break}}return Ie},vn=We=>{const Ie={};return Ze=>{if(Ie[Ze])return Ie[Ze];{const De=We(Ze);return Ie[Ze]=De,De}}},Bt=We=>{const Ie=vn(Lo);return rn(We,Ie)},vo=(We,Ie)=>{const Ze=We[Ie],De=We[Ie+1];if(Ie<0||Ie>We.length-1&&Ie!==0||Ze===Ot.ALETTER&&De===Ot.ALETTER)return!1;const Xn=We[Ie+2];if(Ze===Ot.ALETTER&&(De===Ot.MIDLETTER||De===Ot.MIDNUMLET||De===Ot.AT)&&Xn===Ot.ALETTER)return!1;const Mo=We[Ie-1];return(Ze===Ot.MIDLETTER||Ze===Ot.MIDNUMLET||De===Ot.AT)&&De===Ot.ALETTER&&Mo===Ot.ALETTER||(Ze===Ot.NUMERIC||Ze===Ot.ALETTER)&&(De===Ot.NUMERIC||De===Ot.ALETTER)||(Ze===Ot.MIDNUM||Ze===Ot.MIDNUMLET)&&De===Ot.NUMERIC&&Mo===Ot.NUMERIC||Ze===Ot.NUMERIC&&(De===Ot.MIDNUM||De===Ot.MIDNUMLET)&&Xn===Ot.NUMERIC||(Ze===Ot.EXTEND||Ze===Ot.FORMAT)&&(De===Ot.ALETTER||De===Ot.NUMERIC||De===Ot.KATAKANA||De===Ot.EXTEND||De===Ot.FORMAT)||(De===Ot.EXTEND||De===Ot.FORMAT&&(Xn===Ot.ALETTER||Xn===Ot.NUMERIC||Xn===Ot.KATAKANA||Xn===Ot.EXTEND||Xn===Ot.FORMAT))&&(Ze===Ot.ALETTER||Ze===Ot.NUMERIC||Ze===Ot.KATAKANA||Ze===Ot.EXTEND||Ze===Ot.FORMAT)||Ze===Ot.CR&&De===Ot.LF?!1:Ze===Ot.NEWLINE||Ze===Ot.CR||Ze===Ot.LF||De===Ot.NEWLINE||De===Ot.CR||De===Ot.LF?!0:!(Ze===Ot.KATAKANA&&De===Ot.KATAKANA||De===Ot.EXTENDNUMLET&&(Ze===Ot.ALETTER||Ze===Ot.NUMERIC||Ze===Ot.KATAKANA||Ze===Ot.EXTENDNUMLET)||Ze===Ot.EXTENDNUMLET&&(De===Ot.ALETTER||De===Ot.NUMERIC||De===Ot.KATAKANA)||Ze===Ot.AT)},xn=ns,oe=fs,Wt=Bo,Yo=We=>We==="http"||We==="https",jt=(We,Ie)=>{let Ze;for(Ze=Ie;Ze<We.length&&!oe.test(We[Ze]);Ze++);return Ze},ce=(We,Ie)=>{const Ze=jt(We,Ie+1);return We.slice(Ie+1,Ze).join(xn).substr(0,3)==="://"?Ze:Ie},Gt=(We,Ie,Ze,De)=>{const Xn=[],Mo=[];let Cn=[];for(let Qs=0;Qs<Ze.length;++Qs)if(Cn.push(We[Qs]),vo(Ze,Qs)){const Vo=Ie[Qs];if((De.includeWhitespace||!oe.test(Vo))&&(De.includePunctuation||!Wt.test(Vo))){const Cr=Qs-Cn.length+1,us=Qs+1,ur=Ie.slice(Cr,us).join(xn);if(Yo(ur)){const ri=ce(Ie,Qs),vr=We.slice(us,ri);Array.prototype.push.apply(Cn,vr),Qs=ri}Ie[Qs+1]==="."&&/^([a-zA-Z]\.)+$/.test(ur+".")?(Cn.push(We[Qs+1]),Mo.push({start:Cr,end:us+1})):Mo.push({start:Cr,end:us}),Xn.push(Cn)}Cn=[]}return{words:Xn,indices:Mo}},Wn=()=>({includeWhitespace:!1,includePunctuation:!1}),no=(We,Ie,Ze)=>{Ze={...Wn(),...Ze};const De=rn(We,Ie),Xn=Bt(De);return Gt(We,De,Xn,Ze)},Be=(We,Ie,Ze)=>no(We,Ie,Ze).words,Qo=We=>We.replace(/\uFEFF/g,"");var Je=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const ot=(We,Ie)=>{const Ze=Ie.getBlockElements(),De=Ie.getVoidElements(),Xn=Cr=>Ze[Cr.nodeName]||De[Cr.nodeName],Mo=[];let Cn="";const Qs=new Je(We,We);let Vo;for(;Vo=Qs.next();)Vo.nodeType===3?Cn+=Qo(Vo.data):Xn(Vo)&&Cn.length&&(Mo.push(Cn),Cn="");return Cn.length&&Mo.push(Cn),Mo},V=We=>We.replace(/\u200B/g,""),Zn=We=>We.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,Dt=(We,Ie)=>{const Ze=V(ot(We,Ie).join(`
`));return Be(Ze.split(""),ys).length},Ao=(We,Ie)=>{const Ze=ot(We,Ie).join("");return Zn(Ze)},Rn=(We,Ie)=>{const Ze=ot(We,Ie).join("").replace(/\s/g,"");return Zn(Ze)},it=(We,Ie)=>()=>Ie(We.getBody(),We.schema),No=(We,Ie)=>()=>Ie(We.selection.getRng().cloneContents(),We.schema),qs=We=>it(We,Dt),Ht=We=>({body:{getWordCount:qs(We),getCharacterCount:it(We,Ao),getCharacterCountWithoutSpaces:it(We,Rn)},selection:{getWordCount:No(We,Dt),getCharacterCount:No(We,Ao),getCharacterCountWithoutSpaces:No(We,Rn)},getCount:qs(We)}),Gn=(We,Ie)=>{We.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Ie.body.getWordCount()),String(Ie.selection.getWordCount())],["Characters (no spaces)",String(Ie.body.getCharacterCountWithoutSpaces()),String(Ie.selection.getCharacterCountWithoutSpaces())],["Characters",String(Ie.body.getCharacterCount()),String(Ie.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},dt=(We,Ie)=>{We.addCommand("mceWordCount",()=>Gn(We,Ie))},wt=(We,Ie)=>{let Ze=null;return{cancel:()=>{gn(Ze)||(clearTimeout(Ze),Ze=null)},throttle:(...Mo)=>{gn(Ze)&&(Ze=setTimeout(()=>{Ze=null,We.apply(null,Mo)},Ie))}}};var te=tinymce.util.Tools.resolve("tinymce.util.Delay");const As=(We,Ie)=>{We.dispatch("wordCountUpdate",{wordCount:{words:Ie.body.getWordCount(),characters:Ie.body.getCharacterCount(),charactersWithoutSpaces:Ie.body.getCharacterCountWithoutSpaces()}})},zo=(We,Ie)=>{As(We,Ie)},Un=(We,Ie,Ze)=>{const De=wt(()=>zo(We,Ie),Ze);We.on("init",()=>{zo(We,Ie),te.setEditorTimeout(We,()=>{We.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",De.throttle)},0),We.on("remove",De.cancel)})},ms=We=>{const Ie=()=>We.execCommand("mceWordCount");We.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Ie,context:"any"}),We.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Ie,context:"any"})};var Ka=(We=300)=>{cs.add("wordcount",Ie=>{const Ze=Ht(Ie);return dt(Ie,Ze),ms(Ie),Un(Ie,Ze,We),Ze})};Ka()}()),EG}var OG;function Rq(){return OG||(OG=1,Oq()),TG}Rq();const Dq={series:[{name:"Pengunjung",data:[31,40,28,51,42,109,100]}],chart:{height:350,type:"area",fontFamily:"Inter, sans-serif",toolbar:{show:!1}},colors:["#3B82F6"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3,stops:[0,90,100]}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{borderColor:"#E2E8F0",strokeDashArray:4},xaxis:{categories:["Sen","Sel","Rab","Kam","Jum","Sab","Min"],axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:function(cs){return cs.toFixed(0)}}},tooltip:{theme:"dark",x:{show:!1}}},Mq={series:[44,55,13,43,22],chart:{type:"donut",height:350,fontFamily:"Inter, sans-serif"},labels:["Teknologi","Bisnis","Olahraga","Politik","Hiburan"],colors:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"],plotOptions:{pie:{donut:{size:"70%"}}},legend:{position:"bottom",horizontalAlign:"center"},responsive:[{breakpoint:480,options:{chart:{height:300}}}]};function Pq(){try{const cs=new aZ(document.querySelector("#visitorChart"),Dq),Rs=new aZ(document.querySelector("#categoryChart"),Mq);cs.render(),Rs.render()}catch(cs){console.error("Error initializing charts:",cs)}}function Lq(){const cs=document.getElementById("sidebar"),Rs=document.getElementById("overlay"),gn=document.getElementById("toggleSidebar"),ys=document.getElementById("closeSidebar");if(gn&&ys&&cs&&Rs){let gs=function(){cs.classList.toggle("-left-64"),cs.classList.toggle("left-0"),Rs.classList.toggle("hidden"),document.body.classList.toggle("overflow-hidden")};var rn=gs;gn.addEventListener("click",gs),ys.addEventListener("click",gs),Rs.addEventListener("click",gs)}}document.addEventListener("DOMContentLoaded",()=>{Lq(),Pq();const cs=document.getElementById("sidebar"),Rs=document.getElementById("overlay"),gn=document.getElementById("toggleSidebar"),ys=document.getElementById("closeSidebar");function rn(){cs.classList.toggle("-left-64"),cs.classList.toggle("left-0"),Rs.classList.toggle("hidden"),document.body.classList.toggle("overflow-hidden")}gn.addEventListener("click",rn),ys.addEventListener("click",rn),Rs.addEventListener("click",rn);const gs=document.getElementById("notifDropdown"),Fo=document.getElementById("notifContent");gs.addEventListener("click",vn=>{vn.stopPropagation(),Fo.classList.toggle("hidden"),lo.classList.add("hidden")});const Ot=document.getElementById("profileDropdown"),lo=document.getElementById("profileContent");Ot.addEventListener("click",vn=>{vn.stopPropagation(),lo.classList.toggle("hidden"),Fo.classList.add("hidden")}),document.addEventListener("click",()=>{Fo.classList.add("hidden"),lo.classList.add("hidden")});function ns(vn,Bt,vo,xn){let oe=null;const Wt=Yo=>{oe||(oe=Yo);const jt=Math.min((Yo-oe)/xn,1);vn.innerHTML=Math.floor(jt*(vo-Bt)+Bt).toLocaleString(),jt<1&&window.requestAnimationFrame(Wt)};window.requestAnimationFrame(Wt)}const Bo=new IntersectionObserver(vn=>{vn.forEach(Bt=>{Bt.isIntersecting&&(document.querySelectorAll(".stats-number").forEach(xn=>{const oe=parseInt(xn.getAttribute("data-value"));ns(xn,0,oe,2e3)}),Bo.unobserve(Bt.target))})}),fs=document.querySelector(".stats-container");fs&&Bo.observe(fs),document.querySelectorAll("table").forEach(vn=>{const Bt=document.createElement("div");Bt.classList.add("overflow-x-auto"),vn.parentNode.insertBefore(Bt,vn),Bt.appendChild(vn)}),document.querySelector('input[type="text"]').addEventListener("input",vn=>{const Bt=vn.target.value.toLowerCase();console.log("Searching for:",Bt)}),window.addEventListener("resize",()=>{window.innerWidth>=1024&&(cs.classList.remove("left-0"),cs.classList.add("-left-64"),Rs.classList.add("hidden"),document.body.classList.remove("overflow-hidden"))});const Lo=document.querySelector("#editor");Lo&&(console.log("Editor element ditemukan"),YG.init({selector:"#editor",height:500,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","wordcount"],toolbar:"undo redo | blocks | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",branding:!1,promotion:!1,skin:!1,content_css:!1}).then(()=>{console.log("TinyMCE berhasil diinisialisasi")}).catch(vn=>{console.error("Error inisialisasi TinyMCE:",vn),console.log("Editor status:",Lo?"ditemukan":"tidak ditemukan")}))});
